commit 0a527e800d2634945178133510368c3fc80433e4
Author: Mate Szalay-Beko <szalay.beko.mate@gmail.com>
Date:   Tue Nov 26 10:21:51 2019 +0800

    [LIVY-717] introduce maven property to set ZooKeeper version
    
    When we want to use Livy in a cluster where a newer ZooKeeper server version is used, we might run into run-time errors if we compile Livy using the current Curator / Hadoop versions. The Curator version can already explicitly set with the `curator.version` maven property in build time, but we were still missed the same parameter for ZooKeeper.
    
    In this PR I added a new maven parameter called `zookeeper.version` and after analyzing the maven dependency tree, I made sure that the Curator and ZooKeeper versions used in compile time are always harmonized and controlled by the maven parameters.
    
    I set the `zookeeper.version` in maven to `3.4.6` to be backward compatible with the current Livy dependencies.
    
    see https://issues.apache.org/jira/browse/LIVY-717
    
    Author: Mate Szalay-Beko <szalay.beko.mate@gmail.com>
    
    Closes #262 from symat/LIVY-171.

 integration-test/pom.xml | 37 +++++++++++++++++++++++++++++++++++++
 pom.xml                  |  2 ++
 server/pom.xml           | 28 ++++++++++++++++++++++++++++
 3 files changed, 67 insertions(+)

commit cccba9480e2db821d6cc67f580eeb67f2fac4e95
Author: runzhiwang <runzhiwang@tencent.com>
Date:   Mon Nov 25 11:44:37 2019 +0800

    [LIVY-714][SERVER] Fix cannot remove the app in leakedAppTags when timeout
    
    ## What changes were proposed in this pull request?
    1.`var isRemoved = false` should be in `while(iter.hasNext),` otherwise if there are two apps, the first app will be killApplication and the second app will timeout in this loop, and after removing the first app,` isRemoved = true`, and the second app cannot pass the` if(!isRemoved)` and only will be deleted in the next loop.
    
    2.`entry.getValue - now` is negative, and never greater than `sessionLeakageCheckTimeout`.
    
    ![image](https://user-images.githubusercontent.com/51938049/69202431-99a81080-0b7c-11ea-8084-9801af5a75bd.png)
    
    ## How was this patch tested?
    
    Existed IT and UT.
    
    Author: runzhiwang <runzhiwang@tencent.com>
    
    Closes #259 from runzhiwang/leakapp.

 .../scala/org/apache/livy/utils/SparkYarnApp.scala | 27 ++++++++++++++++------
 .../org/apache/livy/utils/SparkYarnAppSpec.scala   | 21 +++++++++++++++++
 2 files changed, 41 insertions(+), 7 deletions(-)

commit 8f1e8986b2fa8a5d4047c900c224478bb1829489
Author: captainzmc <micahzhao@tencent.com>
Date:   Fri Nov 22 10:39:20 2019 +0800

    [LIVY-715][DOC] The configuration in the template is inconsistent with LivyConf.scala
    
    ## What changes were proposed in this pull request?
    
        When I test livy impersonation found that, in livy.conf.template the value of livy.impersonation.enabled is true. So I thought impersonation was enabled by default.
        However, impersonation was not turned on when we test. I found that the real configuration in LivyConf. scala is false.
        This can mislead users.
    
    ## How was this patch tested?
    
    no need
    
    Author: captainzmc <micahzhao@tencent.com>
    
    Closes #261 from captainzmc/apache-livy-master.

 conf/livy.conf.template | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6261c57be8df66d5f3fc3ccdaa15f8c4e1989d1d
Author: BoneAn <anhui@oppo.com>
Date:   Thu Nov 14 09:51:48 2019 +0800

    [LIVY-707] Add audit log for SqlJobs from ThriftServer
    
    ## What changes were proposed in this pull request?
    
    We should add audit logs in thriftServer for admin to easily to manage operations,
    
    ## How was this patch tested?
    
    An audit log example showed below,
    
    ```
    19/11/06 16:38:30 INFO ThriftServerAudit$: user: test ipAddress: 10.25.22.46 query: select count(*) from test1 beforeExecute: 1573029416951 afterExecute: 1573029510972 time spent: 94021
    ```
    
    Author: BoneAn <anhui@oppo.com>
    
    Closes #255 from huianyi/LIVY-707.

 .../LivyExecuteStatementOperation.scala            |  6 ++++
 .../livy/thriftserver/ThriftServerAudit.scala      | 36 ++++++++++++++++++++++
 2 files changed, 42 insertions(+)

commit 7847c3fe8309dfd2d2089dac68044603745a3499
Author: runzhiwang <runzhiwang@tencent.com>
Date:   Tue Nov 12 11:26:48 2019 +0100

    [LIVY-699][THRIFT] Fix resultSet.getBigDecimal throw java.sql.SQLException: Illegal conversion
    
    ## What changes were proposed in this pull request?
    
    [LIVY-699][THRIFT] Fix resultSet.getBigDecimal throw java.sql.SQLException: Illegal conversion.
    
    Follows are steps to reproduce the problem:
    1. `create table test(id decimal)`.
    2. Then `resultSet.getBigDecimal(1)` will throw:` java.sql.SQLException: Illegal conversion`. The reason is `getSchema().getColumnDescriptorAt(columnIndex - 1).getType();` at https://github.com/apache/hive/blob/master/jdbc/src/java/org/apache/hive/jdbc/HiveBaseResultSet.java#L415 return string, so cannot pass the check `val instanceof BigDecimal `at https://github.com/apache/hive/blob/master/jdbc/src/java/org/apache/hive/jdbc/HiveBaseResultSet.java#L133, so throw `java.sql.SQLException: Illegal conversion` at https://github.com/apache/hive/blob/master/jdbc/src/java/org/apache/hive/jdbc/HiveBaseResultSet.java#L137
    3. So the root cause is the error return of `getType()`, which should return decimal other than string.
    4. Regarding to date and timestamp, though the return type is string, hive-jdbc has done the transformation from string to date and timestamp in the following links. But I think it is necessary to return the right type.
    https://github.com/apache/hive/blob/master/jdbc/src/java/org/apache/hive/jdbc/HiveBaseResultSet.java#L255
    https://github.com/apache/hive/blob/master/jdbc/src/java/org/apache/hive/jdbc/HiveBaseResultSet.java#L571
    
    Additionally, SparkThrift return decimal type instead of string in the same case, if user use `getBigDecimal` and migrate from SparkThrift to Livy, it will throw exception. So it is necessary to return decimal instead of string in livy.
    
    ## How was this patch tested?
    
    Add `SchemaIT.scala` to test the return of column type.
    
    Author: runzhiwang <runzhiwang@tencent.com>
    
    Closes #247 from runzhiwang/support-type.

 .../apache/livy/thriftserver/types/Schema.scala    |   6 +
 .../livy/thriftserver/ThriftServerSuites.scala     | 134 ++++++++++++++++++---
 .../apache/livy/thriftserver/session/DataType.java |   3 +
 3 files changed, 126 insertions(+), 17 deletions(-)

commit 6c7df77204a5a7bfb04beb9789253120d8d7db6c
Author: runzhiwang <runzhiwang@tencent.com>
Date:   Tue Nov 12 15:35:34 2019 +0800

    [LIVY-711][TEST] Fix Travis fails to build on Ubuntu16.04
    
    ## What changes were proposed in this pull request?
    
    Fix Travis fails to build on Ubuntu16.04
    
    ## How was this patch tested?
    
    1. Previously the `dist `of .travis.yml is `xenial ` which points to Ubuntu 14.04.5 LTS. Travis build successfully.
    ![image](https://user-images.githubusercontent.com/51938049/68647534-10c81e00-0559-11ea-9152-362711b30946.png)
    
    ![image](https://user-images.githubusercontent.com/51938049/68647646-669cc600-0559-11ea-9413-9c29860d63f5.png)
    
    2. However, recently `xenial ` points Ubuntu 16.04.6 LTS which needs jdk > 8, but 8 is needed by Livy, so travis build failed.
    ![image](https://user-images.githubusercontent.com/51938049/68647880-edea3980-0559-11ea-8135-f5a68b3d303d.png)
    ![image](https://user-images.githubusercontent.com/51938049/68648187-baf47580-055a-11ea-90cf-8592e628a32c.png)
    ![image](https://user-images.githubusercontent.com/51938049/68647919-0e19f880-055a-11ea-94b9-4f19099654cb.png)
    
    3. So I change the dist to `trusty` which points to Ubuntu 14.04.5 LTS according to the travis doc, and travis build successfully.
    ![image](https://user-images.githubusercontent.com/51938049/68648018-4d484980-055a-11ea-8358-c4234d7cf56c.png)
    ![image](https://user-images.githubusercontent.com/51938049/68648028-5507ee00-055a-11ea-8f6e-7c7efcbc6390.png)
    
    Author: runzhiwang <runzhiwang@tencent.com>
    
    Closes #257 from runzhiwang/travis-build-error.

 .travis.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1f64264135409f4a9c7f094660c7d4d6e4130a34
Author: yihengwang <yihengwang@tencent.com>
Date:   Tue Nov 12 09:53:44 2019 +0800

    [LIVY-708][SERVER] Align curator jars version
    
    ## What changes were proposed in this pull request?
    Livy server has dependency of Apache Curator through hadoop client. However, the versions of the curator jars are not aligned. Here're the curator jars after build
    
    * curator-client-2.7.1.jar
    * curator-framework-2.7.1.jar
    * curator-recipes-2.6.0.jar
    This will cause Method not found issue in some case:
    ```
    Exception in thread "main" java.lang.NoSuchMethodError:
    org.apache.curator.utils.PathUtils.validatePath(Ljava/lang/String;)V
    ```
    This patch specify the version of curator-recipes to 2.7.1.
    
    ## How was this patch tested?
    Manually test in the env where no such method exception are thrown.
    Existing UT/IT
    
    Author: yihengwang <yihengwang@tencent.com>
    
    Closes #256 from yiheng/fix_708.

 pom.xml        | 1 +
 server/pom.xml | 6 ++++++
 2 files changed, 7 insertions(+)

commit 9042ff5b4a03cd302a884b5a74280d4b476792b7
Author: Wing Yew Poon <wypoon@cloudera.com>
Date:   Wed Nov 6 10:54:42 2019 +0100

    [LIVY-705][THRIFT] Support getting keystore password from Hadoop credential provider
    
    ## What changes were proposed in this pull request?
    
    https://issues.apache.org/jira/browse/LIVY-705
    
    LIVY-475 added support for getting the keystore password and key password from a Hadoop credential provider file. The keystore password is also needed for SSL/TLS support in the Thrift server. In this change, we extend the support for getting the keystore password from the Hadoop credential provider to the Thrift server as well.
    
    ## How was this patch tested?
    
    Manually tested a Livy Thrift server that has livy.server.thrift.use.SSL=true, using both binary and http mode. Configured keystore password in a Hadoop credential provider file and provided the path to this file in livy.hadoop.security.credential.provider.path.
    
    Author: Wing Yew Poon <wypoon@cloudera.com>
    
    Closes #253 from wypoon/wypoon_LIVY-705.

 .../livy/thriftserver/cli/ThriftBinaryCLIService.scala     |  2 +-
 .../apache/livy/thriftserver/cli/ThriftCLIService.scala    | 14 ++++++++++++++
 .../livy/thriftserver/cli/ThriftHttpCLIService.scala       |  2 +-
 3 files changed, 16 insertions(+), 2 deletions(-)

commit c7313c5648c63089413464b47f33c9749dbabb20
Author: Yishuang Lu <luystu@gmail.com>
Date:   Thu Oct 31 10:47:46 2019 +0800

    [MINOR][DOC] Add missing session kind in UI
    
    ## What changes were proposed in this pull request?
    
    Add missing session kind in UI
    
    ## How was this patch tested?
    
    No need to test
    
    Author: Yishuang Lu <luystu@gmail.com>
    
    Closes #248 from lys0716/dev-1.

 .../org/apache/livy/server/ui/static/html/sessions-table.html         | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9b776a58fdeac63261f988dde70093bdf0191721
Author: captainzmc <micahzhao@tencent.com>
Date:   Thu Oct 31 10:34:53 2019 +0800

    [LIVY-678] Thrift ldap authentication, based on ldapurl, basedn, domain
    
    ## What changes were proposed in this pull request?
    Currently, livy thrift-server doesn't support LDAP Authentication. We need to add LDAP authentication as that's preferable method due to security reasons.
    The authentication was based on ldapUrl, basedn, domain.
    User-based filters are also supported in this PR.
    
    ## How was this patch tested?
    
    UTs tests for this part have been added. We can test in UTs
    
    Author: captainzmc <micahzhao@tencent.com>
    
    Closes #236 from captainzmc/thrift-ldap-impl.

 .../src/main/scala/org/apache/livy/LivyConf.scala  |   3 +-
 .../auth/LdapAuthenticationHandlerImpl.scala       |  20 +--
 .../org/apache/livy/server/auth/LdapUtils.scala    |  87 ++++++++++++
 thriftserver/server/pom.xml                        |  44 ++++++
 .../livy/thriftserver/auth/AuthFactory.scala       |   5 +-
 .../thriftserver/auth/AuthenticationProvider.scala |   5 +-
 .../auth/LdapAuthenticationProviderImpl.scala      |  65 +++++++++
 .../livy/thriftserver/auth/ldap/ChainFilter.scala  |  29 ++++
 .../thriftserver/auth/ldap/DirSearchFactory.scala  |  37 +++++
 .../livy/thriftserver/auth/ldap/Filter.scala       |  34 +++++
 .../thriftserver/auth/ldap/LdapSearchFactory.scala |  59 ++++++++
 .../livy/thriftserver/auth/ldap/UserFilter.scala   |  44 ++++++
 .../livy/thriftserver/cli/ThriftHttpServlet.scala  |   2 +-
 .../auth/TestLdapAuthenticationProviderImpl.scala  | 155 +++++++++++++++++++++
 14 files changed, 564 insertions(+), 25 deletions(-)

commit ba12b51ec987e76b6b67e20f60b4326e203b03f6
Author: runzhiwang <runzhiwang@tencent.com>
Date:   Mon Oct 21 16:16:18 2019 +0800

    [LIVY-697] Rsc client cannot resolve the hostname of driver in yarn-cluster mode
    
    ## What changes were proposed in this pull request?
    
    [LIVY-697] Rsc client cannot resolve the hostname of driver in yarn-cluster mode
    
    1. The content of Driver in /etc/hosts are as follows:
       127.0.0.1 localhost
       10.10.10.10 test_hostname
    
    2. The content of Driver in /etc/hostname are as follows:
       test_hostname
    
    3. The findLocalAddress method in livy cannot return 10.10.10.10, but return  test_hostname.
       Because the  test_hostname point to 10.10.10.10,  which doesn't pass the check
       address.isLoopbackAddress(), so findLocalAddress return test_hostname .
    
    4. The rsc client cannot resolve the test_hostname, which cause rsc client cannot connect to
       driver.
    
    5. The findLocalAddress method in livy can return 10.10.10.10 as expected if the content
       of Driver in  /etc/hosts are as follows, which is not correct in our environment.
       127.0.0.1 localhost
       127.0.0.1 test_hostname
    
    6. Though I can modify the findLocalAddress method to return 10.10.10.10, but it maybe cause
      error if the machine has multiple  network  cards.  So, rsc client gets the driver ip from the
      connection.
    
    ## How was this patch tested?
    
    1. The content of Driver in /etc/hosts are as follows:
       127.0.0.1 localhost
       127.0.0.1 test_hostname
    
    2. The content of Driver in /etc/hostname are as follows:
       test_hostname
    
    3. rsc client can get the driver ip in connection, and connect to driver successfully.
    
    Author: runzhiwang <runzhiwang@tencent.com>
    
    Closes #246 from runzhiwang/hostname-2-ip.

 rsc/src/main/java/org/apache/livy/rsc/ContextLauncher.java | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 85837e381bd9899a2680cfbb30c4f76f3a113c69
Author: Peter Toth <peter.toth@gmail.com>
Date:   Mon Oct 14 10:28:32 2019 -0700

    [LIVY-695] Upgrade JQuery to 3.4.1 and Bootstrap to 3.4.1
    
    ## What changes were proposed in this pull request?
    
    This PR:
    - updates JQuery to 3.4.1
    - updates Bootstrap to 3.4.1
    - switches to minified version of Bootstrap
    - removes unused old bootstrap files
    
    The changes are needed to fix CVEs.
    
    ## How was this patch tested?
    
    Manual tests:
    - Livy Server UI looks ok
    - Documentation had a minor issue of logo position after plain upgrade, but fix is included in this commit
    
    Author: Peter Toth <peter.toth@gmail.com>
    Author: Peter Toth <ptoth@cloudera.com>
    
    Closes #245 from peter-toth/LIVY-695-upgrade-bootstrap-to-3.4.1.

 .rat-excludes                                                      | 2 +-
 .../org/apache/livy/server/ui/static/css/bootstrap.min.css         | 7 +++----
 .../resources/org/apache/livy/server/ui/static/js/bootstrap.min.js | 7 +++----
 .../org/apache/livy/server/ui/static/js/jquery-3.2.1.min.js        | 4 ----
 .../org/apache/livy/server/ui/static/js/jquery-3.4.1.min.js        | 2 ++
 server/src/main/scala/org/apache/livy/server/ui/UIServlet.scala    | 2 +-
 6 files changed, 10 insertions(+), 14 deletions(-)

commit 2e7d691c03caa6eaa1d170b2ab03265a65ff12f2
Author: captainzmc <micahzhao@tencent.com>
Date:   Sun Oct 13 09:42:23 2019 +0200

    [LIVY-356][SERVER] Add LDAP authentication for livy-server.
    
    ## What changes were proposed in this pull request?
    Currently, livy-server doesn't support LDAP Authentication from client to server(livy). We need to add LDAP authentication as that's preferable method due to security reasons.
    Here we reimplement LdapAuthenticationHandle, which is new in hadoop2.8+.
    ## How was this patch tested?
    
    UTs tests for this part have been added. We can test in UTs
    
    Author: captainzmc <micahzhao@tencent.com>
    Author: Janki Akhani <jakhani@linkedin.com>
    
    Closes #231 from captainzmc/add-ldap.

 pom.xml                                            |   4 +
 server/pom.xml                                     |  43 ++++
 .../src/main/scala/org/apache/livy/LivyConf.scala  |   7 +
 .../scala/org/apache/livy/server/LivyServer.scala  |  21 ++
 .../auth/LdapAuthenticationHandlerImpl.scala       | 219 +++++++++++++++++++++
 .../auth/TestLdapAuthenticationHandlerImpl.scala   | 156 +++++++++++++++
 6 files changed, 450 insertions(+)

commit 0804c8ea8ece67d01ababec616c9ad8e3b15dc9f
Author: Yiheng Wang <yihengw@gmail.com>
Date:   Sun Sep 29 16:24:30 2019 +0800

    [LIVY-690][THRIFT] Exclude curator in thrift server pom to avoid conflict jars
    
    ## What changes were proposed in this pull request?
    Currently, thrift server has a dependency of curator-client:2.12.0 through the hive service. After the build, a `curator-client-2.12.0.jar` file will be generated in the `jars` folder. It is conflicted with the `curator-client-2.7.1.jar` file, which is used by livy server.
    
    We observed that in some JDK, the `curator-client-2.12.0.jar` is loaded before the `curator-client-2.7.1.jar`, and will crash the recovery enabled livy server.
    
    In this patch, we exclude the `org.apache.curator` modules from the hive dependency.
    
    ## How was this patch tested?
    Manual test and existing UT/ITs
    
    Author: Yiheng Wang <yihengw@gmail.com>
    
    Closes #239 from yiheng/exclude_curator.

 thriftserver/server/pom.xml | 4 ++++
 1 file changed, 4 insertions(+)

commit 0ea4a14fcd77a954898f58b4a624d0d515b52eda
Author: weiwenda <weiwenda@qq.com>
Date:   Sun Sep 29 16:19:41 2019 +0800

    [LIVY-688] Error message of BypassJobStatus should contains cause information of Exception
    
    ## What changes were proposed in this pull request?
    Change the implement of org.apache.livy.rsc.Utils.stackTraceAsString to guava Throwables.getStackTraceAsString, so that user can receive details of error message by calling org.apache.livy.client.http.JobHandleImpl.get.
    
    https://issues.apache.org/jira/browse/LIVY-688
    
    Author: weiwenda <weiwenda@qq.com>
    
    Closes #237 from WeiWenda/livy-err-clear.

 rsc/src/main/java/org/apache/livy/rsc/Utils.java | 12 +++++-------
 1 file changed, 5 insertions(+), 7 deletions(-)

commit 6c53d2b41975f5b0171ce45320deb4b69f8ddea7
Author: Jeffrey(Xilang) Yan <7855100+yantzu@users.noreply.github.com>
Date:   Sun Sep 29 10:09:10 2019 +0800

    [LIVY-658] RSCDriver should catch exception if cancel job failed during shutdown
    
    ## What changes were proposed in this pull request?
    
    Currently, if startup meet exception, exception will trigger spark to shutdown, then trigger cancel job, but cancel job will throw another exception due to spark is not initialized. The new exception will swallow the old exception.
    
    https://issues.apache.org/jira/browse/LIVY-658
    
    Before changes:
    ![cancel job exception](https://user-images.githubusercontent.com/7855100/64118287-f0961900-cdc9-11e9-9b72-d051fb4bdbdf.jpg)
    
    After changes:
    ![cancel job exception after fix](https://user-images.githubusercontent.com/7855100/64118295-f4c23680-cdc9-11e9-9a2d-38efa0770a99.jpg)
    
    ## How was this patch tested?
    
    Tested manually， and  add unit test.
    
    Please review https://livy.incubator.apache.org/community/ before opening a pull request.
    
    Author: Jeffrey(Xilang) Yan <7855100+yantzu@users.noreply.github.com>
    
    Closes #223 from yantzu/initialize_exception_swallow_by_shutdown_exception.

 .../java/org/apache/livy/rsc/driver/RSCDriver.java |  6 +++-
 .../org/apache/livy/rsc/driver/TestRSCDriver.java  | 36 ++++++++++++++++++++++
 2 files changed, 41 insertions(+), 1 deletion(-)

commit b8251eb9b3d63c77c61a5950dee5958b654d9633
Author: yihengwang <yihengwang@tencent.com>
Date:   Thu Sep 19 10:35:26 2019 +0800

    [LIVY-644][TEST] Flaky test: Failed to execute goal org.jacoco:jacoco-maven-plugin:0.8.2:report-aggregate (jacoco-report) on project livy-coverage-report
    
    ## What changes were proposed in this pull request?
    This patch fixes the flaky test: Failed to execute goal org.jacoco:jacoco-maven-plugin:0.8.2:report-aggregate (jacoco-report) on project livy-coverage-report.
    
    When JVM shutdown no gracefully in a test, the code coverage data file generated by jacoco may be corrupt. Jacoco will throw an exception when generate code coverage report.
    
    In Livy integration test, two test cases shut down no gracefully(one of them uses System.exit). We can find random failure when jacoco process code coverage data file generated by that test case.
    
    In this patch, we turn off the code coverage analysis on these two test cases.
    
    ## How was this patch tested?
    Compare the jacoco data file generated in the integration test. Before the fix, there're 18 files, and after the fix there're 16 files, which means the fix works.
    
    Run 10 builds on Travis each before and after the fix:
    1. Before the fix: 3 builds failed due to the jacoco code coverage exception
    2. After the fix: No build failed
    
    Existing UTs and ITs.
    
    Author: yihengwang <yihengwang@tencent.com>
    
    Closes #229 from yiheng/fix_644.

 .../src/test/scala/org/apache/livy/test/InteractiveIT.scala         | 6 ++++--
 rsc/src/main/java/org/apache/livy/rsc/ContextLauncher.java          | 2 +-
 rsc/src/main/java/org/apache/livy/rsc/RSCConf.java                  | 1 +
 3 files changed, 6 insertions(+), 3 deletions(-)

commit e2e966b46f4799f9b343a82d065cf077f3d49a50
Author: runzhiwang <runzhiwang@tencent.com>
Date:   Wed Sep 18 11:07:50 2019 +0800

    [LIVY-657][TEST] Fix travis failed on should not create sessions with duplicate names
    
    ## What changes were proposed in this pull request?
    
    Fix travis failed on "should not create sessions with duplicate names"
    
    The cause of failed is as follows:
    
    1. When session2 was stopped, it will call stop() method in Session.scala asynchronously by Scala Future. So when assert(session2.stopped), if the stop() method has not been executed asynchronously, the test will fail.
    
    ## How was this patch tested?
    
    Existed UT and IT.
    
    Author: runzhiwang <runzhiwang@tencent.com>
    
    Closes #225 from runzhiwang/LIVY-657.

 .../test/scala/org/apache/livy/sessions/SessionManagerSpec.scala  | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 145cc2b77db4c7d7bdd8f953dc3a16856d9fcf0f
Author: yihengwang <yihengwang@tencent.com>
Date:   Tue Sep 17 17:21:28 2019 +0800

    [LIVY-633][SERVER] session should not be gc-ed for long running queries
    
    ## What changes were proposed in this pull request?
    Currently, Livy records the last activity time of the session before statement execution. If a statement runs too long, exceeding then the session timeout, the session will be garbage collected after the statement execution.
    
    This should not be the expected behavior. The statement execution time should not be count into idle. We should update the last activity time after the statement execution.
    
    We cannot be updated when session changes state from busy to idle in the Session class. So in this patch, we add a replLastActivity field into the rscClient, which will be updated when the repl state changes. So when session changes its state from busy to idle, this field will catch the time and finally reflect on the session last activity.
    
    ## How was this patch tested?
    Manual test. Also, add a new unit test.
    
    Existing unit tests and integration tests.
    
    Author: yihengwang <yihengwang@tencent.com>
    Author: Yiheng Wang <yihengw@gmail.com>
    
    Closes #224 from yiheng/fix_633.

 rsc/pom.xml                                            |  7 +++++++
 rsc/src/main/java/org/apache/livy/rsc/RSCClient.java   | 18 ++++++++++++++++++
 .../livy/server/interactive/InteractiveSession.scala   | 12 ++++++++++++
 .../server/interactive/InteractiveSessionSpec.scala    | 15 +++++++++++++++
 4 files changed, 52 insertions(+)

commit a9b2ddb951a043a960fc9feb69f0bf30f7e18fdd
Author: runzhiwang <runzhiwang@tencent.com>
Date:   Tue Sep 17 11:58:41 2019 +0800

    [LIVY-647][TEST] Fix travis failed on batch session should not be gc-ed until application is finished
    
    ## What changes were proposed in this pull request?
    
    Fix travis failed on "batch session should not be gc-ed until application is finished"
    
    The cause of failed is as follows:
    
    1. When create BatchSessionManager, the GarbageCollector thread will be created, which collect garbage according to session.state. However the session was mocked, and the test thread execute doReturn(s).when(session).state several times, if the test thread do half of the statement doReturn(s).when(session).state, and GarbageCollector thread check session.state at this time, the exception will threw by GarbageCollector thread.
    
    2. So the fix avoid executing doReturn(s).when(session).state after session has been registered into SessionManager.
    
    ## How was this patch tested?
    
    Existed UT and IT.
    
    Author: runzhiwang <runzhiwang@tencent.com>
    
    Closes #222 from runzhiwang/LIVY-647.

 .../apache/livy/sessions/SessionManagerSpec.scala  | 99 ++++++++++++++--------
 1 file changed, 66 insertions(+), 33 deletions(-)

commit 4de6258aed7cbaff4a5909fe0d9db79fe869c46f
Author: Yishuang Lu <luystu@gmail.com>
Date:   Fri Sep 6 16:15:26 2019 +0800

    [MINOR][DOC] Add missing session kind in documentation
    
    ## What changes were proposed in this pull request?
    
    Add missing session kind in documentation.
    
    ## How was this patch tested?
    
    no need to test
    
    Author: Yishuang Lu <luystu@gmail.com>
    
    Closes #227 from lys0716/dev.

 docs/rest-api.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3c4eab9273775893f56ec1706c1d2b775340cfa3
Author: runzhiwang <runzhiwang@tencent.com>
Date:   Fri Sep 6 15:43:37 2019 +0800

    [LIVY-659][TEST] Fix travis failed on can kill spark-submit while it's running
    
    ## What changes were proposed in this pull request?
    
    Fix travis failed on "can kill spark-submit while it's running"
    
    The cause of failed is as follows:
    
    1. The test does not mock the method getApplicationReport of mockYarnClient, so yarnClient.getApplicationReport will return null.
    
    2. If the thread yarnAppMonitorThread run before the test executing app.kill(), yarnAppMonitorThread will throw NullPointerException when execute appReport.getDiagnostics.
    
    3. Then the NullPointerException was caught by yarnAppMonitorThread, and yarnAppMonitorThread changeState(SparkApp.State.FAILED).
    
    4. At last, the test execute app.kill(), but the app state is FAILED, so it won't execute process.foreach(_.destroy()), which cause verify(mockSparkSubmit, times(1)).destroy() failed.
    
    ## How was this patch tested?
    
    Existed UT and IT.
    
    Author: runzhiwang <runzhiwang@tencent.com>
    
    Closes #226 from runzhiwang/LIVY-659.

 .../org/apache/livy/utils/SparkYarnAppSpec.scala   | 22 ++++++++++++++++++----
 1 file changed, 18 insertions(+), 4 deletions(-)

commit 3cdb7b2584dc97bc17e01721b6be38c3b137a2e1
Author: micahzhao <micahzhao@tencent.com>
Date:   Thu Sep 5 14:26:02 2019 +0200

    [LIVY-640] Add tests for ThriftServer
    
    ## What changes were proposed in this pull request?
    
    1、Added some tests in BinaryThriftServerSuite that ThriftServer is currently missing（The tests was Moved from spark ThriftServer）.
    2、Set ENABLE_HIVE_CONTEXT=true in BinaryThriftServerSuite to support the creation of Hive tables and the creation of udf in test.
    3、Upgrade spark2.2.0 to 2.2.3. To resolve the issue that session cannot be created during Travis test when ENABLE_HIVE_CONTEXT is set to true
    4、Travis ITs is divided into two parts to avoid test timeout problems.
    
    ## How was this patch tested?
    
    Test with Travis and see the results
    ![image](https://user-images.githubusercontent.com/13825159/63577482-10a32c80-c5c1-11e9-868a-0aab4b1af743.png)
    
    Author: micahzhao <micahzhao@tencent.com>
    
    Closes #209 from captainzmc/add-thrift-test.

 pom.xml                                            |   6 +-
 .../livy/thriftserver/ThriftServerSuites.scala     | 209 ++++++++++++++-------
 2 files changed, 143 insertions(+), 72 deletions(-)

commit c4bb55b12f5978ba151d92e1f1e655f91233138b
Author: Jeffrey(Xilang) Yan <7855100+yantzu@users.noreply.github.com>
Date:   Thu Sep 5 14:14:17 2019 +0800

    [LIVY-645] Add Session Name, Owner, Proxy User information to Web UI
    
    ## What changes were proposed in this pull request?
    
    1, Web UI, add Session Name to Interactive Sessions list
    2, Web UI, add Session Name, Owner, Proxy User to Batch Sessions list
    3,~~fix thrift server session doesn't set Session Name issue.~~ Move to PR #218
    
    ## How was this patch tested?
    
    Update existing unit test, and have tested manually.
    
    ![AddName](https://user-images.githubusercontent.com/7855100/63513238-3de7d000-c518-11e9-8b18-613874ed635a.jpg)
    ![AddName2](https://user-images.githubusercontent.com/7855100/63513246-42ac8400-c518-11e9-9019-679bb82e4bb0.jpg)
    
    Author: Jeffrey(Xilang) Yan <7855100+yantzu@users.noreply.github.com>
    
    Closes #207 from yantzu/add_more_info_to_ui.

 .../apache/livy/server/ui/static/html/batches-table.html | 16 ++++++++++++++++
 .../livy/server/ui/static/html/sessions-table.html       |  6 ++++++
 .../org/apache/livy/server/ui/static/js/all-sessions.js  |  4 ++++
 .../org/apache/livy/server/ui/static/js/session.js       |  1 +
 .../apache/livy/server/batch/BatchSessionServlet.scala   |  6 ++++--
 .../org/apache/livy/server/batch/BatchServletSpec.scala  |  7 ++++++-
 6 files changed, 37 insertions(+), 3 deletions(-)

commit e6b6ec060d18d33a300ffa7d766ad46d6c4c70cf
Author: Jeffrey(Xilang) Yan <7855100+yantzu@users.noreply.github.com>
Date:   Wed Sep 4 11:08:58 2019 +0800

    [LIVY-652] Thrifserver doesn't set session name correctly
    
    ## What changes were proposed in this pull request?
    
    Thriftserver should set session name as the value passed in livy.session.name , but it current always set it NONE
    
    ## How was this patch tested?
    
    add IT
    
    https://issues.apache.org/jira/browse/LIVY-652
    
    Author: Jeffrey(Xilang) Yan <7855100+yantzu@users.noreply.github.com>
    
    Closes #218 from yantzu/thrift_session_has_no_name.

 .../livy/thriftserver/LivyThriftSessionManager.scala    |  2 +-
 .../apache/livy/thriftserver/ThriftServerSuites.scala   | 17 +++++++++++++++++
 2 files changed, 18 insertions(+), 1 deletion(-)

commit 830d740db5193314f469fa7bcbd4f6f93cbfc08b
Author: runzhiwang <runzhiwang@tencent.com>
Date:   Tue Sep 3 12:58:51 2019 +0800

    [LIVY-519][TEST] Fix travis failed on should kill yarn app
    
    ## What changes were proposed in this pull request?
    
    Fix travis failed on "should kill yarn app"
    
    The cause of failed is as follows:
    1. When create SparkYarnApp, the yarnAppMonitorThread will be created, which change app state to Failed. Because before recent commit https://github.com/apache/incubator-livy/commit/a90f4fac8be27a38cc961c24043a494a739ff188, the pair <RUNNING: getYarnApplicationState, SUCCEEDED: getFinalApplicationStatus> which was mocked in test, but was not defined in mapYarnState, so the state of app will be changed to failed.
    
    2. Then the test kills app, which will call killApplication when the app is running. However the app has been changed to failed in step 1, so killApplication won't be called, and verify(mockYarnClient).killApplication(appId) failed.
    
    3. So if yarnAppMonitorThread changes app state before main thread kills app, the test will failed. If not, the test will succeed.
    
    4. Though the recent commit https://github.com/apache/incubator-livy/commit/a90f4fac8be27a38cc961c24043a494a739ff188 fixed the bug accidentally, it is necessary to ensure the app is running before kill app.
    
    ## How was this patch tested?
    
    Existed UT and IT.
    
    Author: runzhiwang <runzhiwang@tencent.com>
    
    Closes #221 from runzhiwang/LIVY-519.

 server/src/main/scala/org/apache/livy/utils/SparkYarnApp.scala     | 3 ++-
 server/src/test/scala/org/apache/livy/utils/SparkYarnAppSpec.scala | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

commit d0d8028657c7314ad031f51c0a564a8786213187
Author: Marco Gaido <mgaido@apache.org>
Date:   Fri Aug 30 14:06:08 2019 +0200

    [LIVY-622][LIVY-623][LIVY-624][LIVY-625][THRIFT][FOLLOWUP] Use ResultSet in catalog operations
    
    ## What changes were proposed in this pull request?
    
    This is a followup of #194 which addresses all the remaining concerns. The main changes are:
    
     - reverting the introduction of a state specific for catalog operations;
     - usage of `ResultSet` to send over the wire the data for catalog operations too.
    
    ## How was this patch tested?
    
    existing modified UTs
    
    Author: Marco Gaido <mgaido@apache.org>
    
    Closes #217 from mgaido91/LIVY-622_followup.

 .../livy/thriftserver/LivyOperationManager.scala   | 18 ++---
 .../operation/GetColumnsOperation.scala            | 20 +++---
 .../operation/GetFunctionsOperation.scala          | 35 ++-------
 .../operation/GetSchemasOperation.scala            | 12 ++--
 .../operation/GetTablesOperation.scala             | 16 ++---
 .../thriftserver/operation/MetadataOperation.scala |  3 -
 .../operation/SparkCatalogOperation.scala          | 51 ++------------
 .../session/CleanupCatalogResultJob.java           | 37 ----------
 .../session/FetchCatalogResultJob.java             | 51 --------------
 .../livy/thriftserver/session/GetColumnsJob.java   | 31 ++++----
 .../livy/thriftserver/session/GetFunctionsJob.java | 66 ++++++++++++++---
 .../livy/thriftserver/session/GetSchemasJob.java   | 24 ++++---
 .../livy/thriftserver/session/GetTablesJob.java    | 19 ++---
 .../livy/thriftserver/session/SparkCatalogJob.java | 64 +++++++++++++++--
 .../livy/thriftserver/session/SparkUtils.java      | 46 ++++++++++++
 .../thriftserver/session/ThriftSessionState.java   | 32 ---------
 .../thriftserver/session/ThriftSessionTest.java    | 82 +++++++++++++---------
 17 files changed, 290 insertions(+), 317 deletions(-)

commit 4521ef9f8e8af5634e101eb89ca8603ddedfde16
Author: runzhiwang <runzhiwang@tencent.com>
Date:   Fri Aug 30 16:00:55 2019 +0800

    [LIVY-586] Fix batch state from starting to dead when startup fail
    
    ## What changes were proposed in this pull request?
    
    Fix batch state from starting to dead when startup fail
    
    ## How was this patch tested?
    
    Create batch session with error parameter, the batch state will turn from starting to dead.
    
    Author: runzhiwang <runzhiwang@tencent.com>
    
    Closes #215 from runzhiwang/LIVY-586.

 .../scala/org/apache/livy/utils/SparkYarnApp.scala | 10 ++++++++-
 .../org/apache/livy/utils/SparkYarnAppSpec.scala   | 24 ++++++++++++++++++++++
 2 files changed, 33 insertions(+), 1 deletion(-)

commit a90f4fac8be27a38cc961c24043a494a739ff188
Author: wangzhefeng <wangzhefeng@didichuxing.com>
Date:   Fri Aug 30 11:53:03 2019 +0800

    [LIVY-642] Fix a rare status happened in yarn cause SparkApp change into error state
    
    some of batch session returned failed state while spark yarn application is succeeded. and in livy log，i find the reason：
    
    ```
    2019-08-23 05:32:48,096 ERROR [Logging.scala:56] - Unknown YARN state RUNNING for app application_1559632632227_47808044 with final status SUCCEEDED.
    ```
    
    it means yarn application state is RUNNING while final app status is SUCCEEDED, it's a correct status in yarn, means AM has not sync app state yet. and livy mapped this situatition as SparkApp.state.FAILED.
    So, i think we should map this state into SparkApp.state.RUNNING，waiting for AM sync.
    
    Author: wangzhefeng <wangzhefeng@didichuxing.com>
    
    Closes #204 from Jassy1994/LIVY-642.

 server/src/main/scala/org/apache/livy/utils/SparkYarnApp.scala | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 9c34750230acb3c3f72b66c82bea86ca2e33fe57
Author: Marco Gaido <mgaido@apache.org>
Date:   Thu Aug 29 14:44:41 2019 +0200

    [LIVY-650][THRIFT] Remove schema from ResultSet
    
    ## What changes were proposed in this pull request?
    
    The class `ResultSet` is serialized and sent over the wire. Currently this class contains a JSON string representation of the spark schema, which is never used. Hence, the PR removes it in order to avoid serializing it uselessly.
    
    ## How was this patch tested?
    
    existing UTs
    
    Author: Marco Gaido <mgaido@apache.org>
    
    Closes #213 from mgaido91/LIVY-650.

 .../org/apache/livy/thriftserver/session/FetchResultJob.java     | 2 +-
 .../java/org/apache/livy/thriftserver/session/ResultSet.java     | 9 +--------
 .../main/java/org/apache/livy/thriftserver/session/SqlJob.java   | 3 ---
 .../org/apache/livy/thriftserver/session/StatementState.java     | 1 -
 .../org/apache/livy/thriftserver/session/ThriftSessionState.java | 1 -
 .../org/apache/livy/thriftserver/session/ColumnBufferTest.java   | 2 +-
 6 files changed, 3 insertions(+), 15 deletions(-)

commit 4ec3b9b47b556390b2f738df62b5b277fa02f6ef
Author: Shanyu Zhao <shzhao@microsoft.com>
Date:   Wed Aug 28 19:04:57 2019 +0800

    [LIVY-617] Livy session leak on Yarn when creating session duplicated names
    
    ## What changes were proposed in this pull request?
    When creating a session with duplicated name, instead of throw exception in SessionManager.register() method, we should stop the session. Otherwise the session driver process will keep running and end up creating a leaked Yarn application.
    
    https://issues.apache.org/jira/browse/LIVY-617
    
    ## How was this patch tested?
    
    This is just a simple fix and verified with manual end to end test.
    
    Author: Shanyu Zhao <shzhao@microsoft.com>
    
    Closes #187 from shanyu/shanyu.

 .../src/main/scala/org/apache/livy/sessions/SessionManager.scala | 9 ++++++++-
 server/src/test/scala/org/apache/livy/sessions/MockSession.scala | 5 ++++-
 .../test/scala/org/apache/livy/sessions/SessionManagerSpec.scala | 2 ++
 3 files changed, 14 insertions(+), 2 deletions(-)

commit 8b92397d55c55615c7110cc7e2602d0106f6eac7
Author: runzhiwang <runzhiwang@tencent.com>
Date:   Tue Aug 27 11:56:00 2019 +0800

    [LIVY-620][LIVY-641] Fix travis failed on test: should end with status dead when batch session exits with no 0 return code
    
    ## What changes were proposed in this pull request?
    
    Fix travis failed on test: should end with status dead when batch session exits with no 0 return code
    
    1. Travis failed because of thread in SparkProcApp.scala and thead in BatchSession.scala change SessionState to different value when stopSession in test.
    
    2. The changes of BatchSession.scala is to revert the commit of https://github.com/apache/incubator-livy/commit/01da43dba07aee1e4d13a2a19f233a38546ddec0.
    
    3. The changes of SparkYarnApp.scala and BatchSessionSpec.scala are the new changes
    
    ## How was this patch tested?
    
    1. Existed UT and IT.
    2. Create Batch Session In Yarn and kill SparkSubmit, then check the SessionState.
    
    Author: runzhiwang <runzhiwang@tencent.com>
    
    Closes #214 from runzhiwang/LIVY-641-SESSION-STATUS.

 .../main/scala/org/apache/livy/server/batch/BatchSession.scala |  9 ---------
 server/src/main/scala/org/apache/livy/utils/SparkYarnApp.scala | 10 ++++++++++
 .../scala/org/apache/livy/server/batch/BatchSessionSpec.scala  |  4 ++--
 3 files changed, 12 insertions(+), 11 deletions(-)

commit 256702ed20f84a47036af948ffcb452b4ad67721
Author: openopen2 <a261049174@outlook.com>
Date:   Tue Aug 27 11:28:27 2019 +0800

    [LIVY-639][REPL] add start time and completion time and duration to the statements web ui
    
    ## What changes were proposed in this pull request?
    
    add start time and completion time and duration to the statements web ui
    
    JIRA: https://issues.apache.org/jira/browse/LIVY-639?filter=-2
    
    ## How was this patch tested?
    
    Existing test set and our test environment
    
    ![DeepinScreenshot_select-area_20190816153300](https://user-images.githubusercontent.com/23738217/63151060-2487e500-c03b-11e9-92d1-f3eb497c322c.png)
    
    Author: openopen2 <a261049174@outlook.com>
    
    Closes #201 from OpenOpened/master.

 docs/rest-api.md                                   | 15 +++++++++
 .../main/scala/org/apache/livy/repl/Session.scala  |  3 ++
 .../java/org/apache/livy/rsc/driver/Statement.java |  2 ++
 .../server/ui/static/html/statements-table.html    | 18 ++++++++++
 .../org/apache/livy/server/ui/static/js/session.js | 38 ++++++++++++++++++++++
 5 files changed, 76 insertions(+)

commit 3626382f9e718b446cdb68341df0dc46036f1068
Author: yihengwang <yihengwang@tencent.com>
Date:   Sun Aug 25 09:47:49 2019 +0200

    [LIVY-574][TESTS][THRIFT] Add tests for metadata operations
    
    ## What changes were proposed in this pull request?
    Add unit test for existing meta operation: GetCatalogsOperation/GetTableTypesOperation/GetTypeInfoOperation.
    
    We also fix issues we met.
    
    ## How was this patch tested?
    Add new unit tests and existing test.
    
    We also use SquirrelSQL test relate operations.
    ![image](https://user-images.githubusercontent.com/1297418/62930007-26a93400-bdee-11e9-9364-259308724db6.png)
    
    ![image](https://user-images.githubusercontent.com/1297418/62930073-42143f00-bdee-11e9-9409-62d07ad0eabd.png)
    
    Author: yihengwang <yihengwang@tencent.com>
    
    Closes #197 from yiheng/fix_574.

 .../livy/thriftserver/cli/ThriftCLIService.scala   |   6 +-
 .../operation/GetCatalogsOperation.scala           |   4 +-
 .../operation/GetTypeInfoOperation.scala           |  11 ++-
 .../thriftserver/operation/MetadataOperation.scala |   2 +-
 .../livy/thriftserver/serde/ThriftResultSet.scala  |   8 ++
 .../livy/thriftserver/ThriftServerSuites.scala     | 102 ++++++++++++++++++++-
 .../livy/thriftserver/session/ColumnBuffer.java    |  96 ++++++++++++++++---
 .../thriftserver/session/ColumnBufferTest.java     |  96 +++++++++++++++++++
 8 files changed, 300 insertions(+), 25 deletions(-)

commit 515c3278ddba957e6b1c9a3d4dec673a191ebe1a
Author: Oleksandr Shevchenko <oleksandr.shevchenko@datarobot.com>
Date:   Sun Aug 25 09:37:03 2019 +0800

    [LIVY-648][DOC] Wrong return message in cancel statement documentation
    
    ## What changes were proposed in this pull request?
    Fix the trivial mistake in the documentation. "Canceled" vs "cancelled" (two Ls).
    See details in the ticket https://issues.apache.org/jira/browse/LIVY-648
    
    Or better to change message here?
    https://github.com/apache/incubator-livy/blob/ae961700d71fd1669dec4f396c8990d3d8c93759/server/src/main/scala/org/apache/livy/server/interactive/InteractiveSessionServlet.scala#L149
    
    ## How was this patch tested?
    not need any tests
    
    Author: Oleksandr Shevchenko <oleksandr.shevchenko@datarobot.com>
    
    Closes #210 from o-shevchenko/DM-648.

 docs/rest-api.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9a4d0f1139de7ffa1f456f42eb05fd93d23616bc
Author: micahzhao <micahzhao@tencent.com>
Date:   Thu Aug 22 14:03:27 2019 +0800

    [LIVY-637][THRIFTSERVER] Fix NullPointerException when create database using thriftserver
    
    ## What changes were proposed in this pull request?
    
    Spark beeline use old hive-jdbc-client doesn’t do null point ref check. So  when new TRowSet, setColumes make sure column set not null.
    
    ## How was this patch tested?
    
    Connect to livy's thriftserver using spark beeline. And create/use/drop database will no longer have nullpointerexceptions after execution.
    
    ![image](https://user-images.githubusercontent.com/13825159/63147414-b0484400-c030-11e9-8d14-b22238306194.png)
    
    Author: micahzhao <micahzhao@tencent.com>
    
    Closes #200 from captainzmc/livy-637.

 .../scala/org/apache/livy/thriftserver/serde/ThriftResultSet.scala     | 3 +++
 1 file changed, 3 insertions(+)

commit ae961700d71fd1669dec4f396c8990d3d8c93759
Author: zixu <zixu@microsoft.com>
Date:   Thu Aug 22 10:41:29 2019 +0800

    [LIVY-592][SERVER] Allow proxy user to view or modify his session
    
    ## What changes were proposed in this pull request?
    This patch is ported from https://github.com/apache/incubator-livy/pull/172, with adding some unit tests.
    
    Allow proxy user to view or modify his session. Here is the link to the corresponding Jira
    https://issues.apache.org/jira/browse/LIVY-592
    
    ## How was this patch tested?
    New unit tests and existing unit tests.
    
    Author: zixu <zixu@microsoft.com>
    Author: yihengwang <yihengwang@tencent.com>
    
    Closes #202 from yiheng/fix_592.

 .../scala/org/apache/livy/server/AccessManager.scala   | 18 ++++++++++++------
 .../scala/org/apache/livy/server/SessionServlet.scala  |  8 ++++++--
 .../apache/livy/server/batch/BatchSessionServlet.scala |  4 +++-
 .../server/interactive/InteractiveSessionServlet.scala |  4 +++-
 .../org/apache/livy/server/SessionServletSpec.scala    | 17 ++++++++++++++++-
 .../apache/livy/server/batch/BatchServletSpec.scala    |  1 +
 6 files changed, 41 insertions(+), 11 deletions(-)

commit 3b948092ca79c964db88951d9ca31654d8b52fe5
Author: tison <wander4096@gmail.com>
Date:   Thu Aug 22 10:17:38 2019 +0800

    [HOTFIX][LOG] log stack trace properly
    
    ## What changes were proposed in this pull request?
    
    Log stack trace properly. With an automatic check pass this is the only instance.
    
    ## How was this patch tested?
    
    straightforward
    
    Author: tison <wander4096@gmail.com>
    
    Closes #203 from TisonKun/patch-1.

 rsc/src/main/java/org/apache/livy/rsc/RSCClient.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 22c73e37fd2c4d93362e576f05ab2a11a7a22714
Author: yihengwang <yihengwang@tencent.com>
Date:   Mon Aug 19 19:20:42 2019 +0200

    [LIVY-573][TESTS][THRIFT] Add tests for operation logs retrieval
    
    ## What changes were proposed in this pull request?
    Add unit test for operation logs retrieval.
    
    ## How was this patch tested?
    New unit tests and existing unit test
    
    Author: yihengwang <yihengwang@tencent.com>
    
    Closes #199 from yiheng/fix_573.

 .../livy/thriftserver/ThriftServerSuites.scala     | 25 ++++++++++++++++++++++
 1 file changed, 25 insertions(+)

commit cae9d97185bf371912dcd863dff5babfd9cb704a
Author: yihengwang <yihengwang@tencent.com>
Date:   Fri Aug 16 10:32:11 2019 +0800

    [LIVY-622][LIVY-623][LIVY-624][LIVY-625][THRIFT] Support GetFunctions, GetSchemas, GetTables, GetColumns in Livy thrift server
    
    ## What changes were proposed in this pull request?
    In this patch, we add the implementations of GetSchemas, GetFunctions, GetTables, and GetColumns in Livy Thrift server.
    
    https://issues.apache.org/jira/browse/LIVY-622
    https://issues.apache.org/jira/browse/LIVY-623
    https://issues.apache.org/jira/browse/LIVY-624
    https://issues.apache.org/jira/browse/LIVY-625
    
    ## How was this patch tested?
    Add new unit tests and integration test. Run them with existing tests.
    
    Author: yihengwang <yihengwang@tencent.com>
    
    Closes #194 from yiheng/fix_575.

 .../apache/livy/thriftserver/LivyCLIService.scala  |  16 +--
 .../livy/thriftserver/LivyOperationManager.scala   |  63 ++++++++
 .../livy/thriftserver/cli/ThriftCLIService.scala   |  17 ++-
 .../operation/GetColumnsOperation.scala            | 102 +++++++++++++
 .../operation/GetFunctionsOperation.scala          |  94 ++++++++++++
 .../operation/GetSchemasOperation.scala            |  63 ++++++++
 .../operation/GetTablesOperation.scala             |  73 ++++++++++
 .../thriftserver/operation/MetadataOperation.scala |   6 +
 .../operation/SparkCatalogOperation.scala          | 119 ++++++++++++++++
 .../livy/thriftserver/ThriftServerSuites.scala     | 158 ++++++++++++++++++++-
 .../livy/thriftserver/session/CatalogJobState.java |  28 ++++
 .../session/CleanupCatalogResultJob.java           |  37 +++++
 .../livy/thriftserver/session/ColumnBuffer.java    |  36 +++++
 .../session/FetchCatalogResultJob.java             |  51 +++++++
 .../livy/thriftserver/session/GetColumnsJob.java   |  93 ++++++++++++
 .../livy/thriftserver/session/GetFunctionsJob.java |  67 +++++++++
 .../livy/thriftserver/session/GetSchemasJob.java   |  47 ++++++
 .../livy/thriftserver/session/GetTablesJob.java    |  92 ++++++++++++
 .../livy/thriftserver/session/SparkCatalogJob.java |  50 +++++++
 .../livy/thriftserver/session/SparkUtils.java      | 113 +++++++++++++++
 .../thriftserver/session/ThriftSessionState.java   |  32 +++++
 .../thriftserver/session/ThriftSessionTest.java    |  53 ++++++-
 22 files changed, 1395 insertions(+), 15 deletions(-)

commit fb03da30c5ae9a45faf56e95911f6821c4f7b2d2
Author: runzhiwang <runzhiwang@tencent.com>
Date:   Thu Aug 15 15:14:04 2019 +0800

    [LIVY-635][BUILD] Fix travis fail to build by excluding the dependency of hbase
    
    ## What changes were proposed in this pull request?
    
    Fix travis fail to build by excluding the dependency of hbase.
    
    ## How was this patch tested?
    
    existed UT and IT.
    
    Author: runzhiwang <runzhiwang@tencent.com>
    
    Closes #198 from runzhiwang/LIVY-635.

 integration-test/pom.xml    |  4 ++++
 thriftserver/client/pom.xml | 12 ++++++++++++
 thriftserver/server/pom.xml |  8 ++++++++
 3 files changed, 24 insertions(+)

commit 01da43dba07aee1e4d13a2a19f233a38546ddec0
Author: Gustavo Martin Morcuende <gu.martinm@gmail.com>
Date:   Thu Aug 15 11:53:20 2019 +0800

    [LIVY-620] Spark batch session always ends with success when configuration is master yarn and deploy-mode client
    
    ## What changes were proposed in this pull request?
    
    Batch session should end with state dead when process exits with no 0 return code.
    https://issues.apache.org/jira/browse/LIVY-620
    
    ## How was this patch tested?
    
    1. Unit Test (included in this PR)
    Submit batch session that runs forever, wait 2 seconds, kill that batch session and expect for state dead.
    
    2. Also currently used in production environment.
    
    Author: Gustavo Martin Morcuende <gu.martinm@gmail.com>
    
    Closes #192 from gumartinm/master.

 .../apache/livy/server/batch/BatchSession.scala    | 11 ++++++-
 .../livy/server/batch/BatchSessionSpec.scala       | 38 +++++++++++++++++++++-
 2 files changed, 47 insertions(+), 2 deletions(-)

commit e7f23e06606ff79aec1c22e79a96f959cb89a8be
Author: Shanyu Zhao <shzhao@microsoft.com>
Date:   Fri Aug 9 14:51:08 2019 +0800

    [LIVY-547][SERVER] Livy kills session after livy.server.session.timeout even if the session is active
    
    ## What changes were proposed in this pull request?
    Add a new configuration:
      livy.server.session.timeout-check.skip-busy
    To indicate whether or not to skip timeout check for a busy session. It defaults to false for
    backward compatibility.
    
    https://issues.apache.org/jira/browse/LIVY-547
    
    ## How was this patch tested?
    
    Manually tested the configuration.
    
    Author: Shanyu Zhao <shzhao@microsoft.com>
    
    Closes #190 from shanyu/shanyu-547.

 conf/livy.conf.template                              |  6 +++++-
 server/src/main/scala/org/apache/livy/LivyConf.scala |  3 +++
 .../org/apache/livy/sessions/SessionManager.scala    |  4 ++++
 .../scala/org/apache/livy/sessions/MockSession.scala |  3 ++-
 .../apache/livy/sessions/SessionManagerSpec.scala    | 20 ++++++++++++++++++--
 5 files changed, 32 insertions(+), 4 deletions(-)

commit 788767e4cced78f18798f73a651f3ec2d087f938
Author: jerryshao <jerryshao@tencent.com>
Date:   Thu Aug 1 19:41:23 2019 +0800

    [MINOR] Remove unused guava import
    
    ## What changes were proposed in this pull request?
    
    PR #181 removed guava dependency in LivyServer, but it still left unused guava import. Here in this minor fix, removed this unused import.
    
    ## How was this patch tested?
    
    Existing UTs.
    
    Author: jerryshao <jerryshao@tencent.com>
    
    Closes #191 from jerryshao/remove-guava-minor.

 server/src/main/scala/org/apache/livy/utils/LineBufferedStream.scala | 2 --
 1 file changed, 2 deletions(-)

commit 1ce266d78fb3475af6154262629ff92f5d342ae6
Author: runzhiwang <1769910785@qq.com>
Date:   Mon Jul 29 16:29:23 2019 +0800

    [LIVY-587] Remove unused guava dependency
    
    ## What changes were proposed in this pull request?
    
    Guava was unused any more, and it's too heavy to include, so remove the guava dependency.
    
    ## How was this patch tested?
    
    Existing unit tests.
    
    Author: runzhiwang <1769910785@qq.com>
    
    Closes #181 from runzhiwang/livy-587.

 pom.xml                                                        |  7 -------
 server/pom.xml                                                 |  5 -----
 .../apache/livy/server/interactive/InteractiveSession.scala    |  2 --
 .../main/scala/org/apache/livy/utils/LineBufferedStream.scala  | 10 +++++++++-
 4 files changed, 9 insertions(+), 15 deletions(-)

commit 92062e1659db2af85711b1f35c50ff4050fec675
Author: yangping.wyp <yangping.wyp@alibaba-inc.com>
Date:   Fri Jul 26 19:34:42 2019 +0800

    [LIVY-613][REPL] Livy can't handle the java.sql.Date type correctly.
    
    ## What changes were proposed in this pull request?
    
    When Spark table has `java.sql.Date` type column, Livy can't handle the `java.sql.Date` type correctly. e.g
    ```
    create table test(
        name string,
        birthday date
    );
    
    insert into test values ('Livy', '2019-07-24')
    
    curl -H "Content-Type:application/json" -X POST -d '{"code":"select * from test", "kind":"sql"}' 192.168.1.6:8998/sessions/48/statements
    {"id":1,"code":"select * from test","state":"waiting","output":null,"progress":0.0}
    
    curl 192.168.1.6:8998/sessions/48/statements/1
    {"id":1,"code":"select * from test","state":"available","output":{"status":"ok","execution_count":1,"data":{"application/json":{"schema":{"type":"struct","fields":[{"name":"name","type":"string","nullable":true,"metadata":{}},{"name":"birthday","type":"date","nullable":true,"metadata":{}}]},"data":[["Livy",{}]]}}},"progress":1.0}
    ```
    as you can see, the output of `select * from test` is `["Livy",{}]` , birthday column's value isn't handle  correctly.
    
    The reason is that json4s can't handle `java.sql.Date`, so we should define the `CustomSerializer` for `java.sql.Date`.
    
    This PR  add a `DateSerializer` to support `java.sql.Date` parser.
    
    ## How was this patch tested?
    
    (Please explain how this patch was tested. E.g. unit tests, integration tests, manual tests)
    (If this patch involves UI changes, please attach a screenshot; otherwise, remove this)
    
    Please review https://livy.incubator.apache.org/community/ before opening a pull request.
    
    Author: yangping.wyp <yangping.wyp@alibaba-inc.com>
    
    Closes #186 from 397090770/master.

 .../org/apache/livy/repl/SQLInterpreter.scala      | 11 +++-
 .../org/apache/livy/repl/SQLInterpreterSpec.scala  | 69 +++++++++++++++++++++-
 2 files changed, 78 insertions(+), 2 deletions(-)

commit 7dee3cc142f79a131d54a37c7a56bb697c160cc1
Author: Jeffrey(Xilang) Yan <7855100+yantzu@users.noreply.github.com>
Date:   Mon Jul 22 12:15:32 2019 +0200

    [LIVY-571] cleanupStatement should not throw exception when statementId not exist
    
    ## What changes were proposed in this pull request?
    
    `ThriftSessionState` is used to store query result by statementId. When an exception is thrown during execute query, no query result is stored. But when a statement is closed from beeline, a request is invoked to remove cached query result in `ThriftSessionState`.
    
    Remove statement query result from `ThriftSessionState` currently throws an exception, hiding the original query failure exception and message. The PR makes it return cleanly, so the proper exception is reported to the end user.
    
    ## How was this patch tested?
    
    Added unit tests.
    
    Author: Jeffrey(Xilang) Yan <7855100+yantzu@users.noreply.github.com>
    Author: yantzu <7855100+yantzu@users.noreply.github.com>
    Author: 80254702 <80254702@adc.com>
    
    Closes #182 from yantzu/LIVY-571.

 .../LivyExecuteStatementOperation.scala            |  6 ++++-
 .../apache/livy/thriftserver/rpc/RpcClient.scala   |  2 +-
 .../livy/thriftserver/ThriftServerSuites.scala     | 31 +++++++++++++++++++++-
 .../thriftserver/session/CleanupStatementJob.java  |  7 +++--
 .../thriftserver/session/ThriftSessionState.java   |  8 +++---
 .../thriftserver/session/ThriftSessionTest.java    | 12 ++++-----
 6 files changed, 50 insertions(+), 16 deletions(-)

commit 15758502247b5df5fc5b3a5827af9f5117875dae
Author: dockerzhang(张超) <dockerzhang@tencent.com>
Date:   Mon Jul 22 14:20:47 2019 +0800

    [LIVY-610][BUILD] optimization for windows environment build.
    
    ## What changes were proposed in this pull request?
    
    we can remove requireOS restriction for windows building, and add execute permission for bin/livy-server.
    https://issues.apache.org/jira/browse/LIVY-610
    ## How was this patch tested?
     tested manually.
    
    Author: dockerzhang(张超) <dockerzhang@tencent.com>
    Author: dockerzhang <zhchao_beyond@outlook.com>
    
    Closes #184 from dockerzhang/windows-build.

 assembly/assembly.xml | 1 +
 pom.xml               | 3 ---
 2 files changed, 1 insertion(+), 3 deletions(-)

commit 22a8ad133bccb9e7e4a8e99556507362904b5416
Author: Arun Mahadevan <arunm@apache.org>
Date:   Sun Jul 21 15:59:40 2019 +0200

    [LIVY-598] Upgrade jackson to 2.9.9
    
    ## What changes were proposed in this pull request?
    
    Upgrade the jackson dependency to 2.9.9 which fixes CVE-2019-12086.  Spark has also recently upgraded to jackson version 2.9.9.
    
    ## How was this patch tested?
    
    Existing unit tests
    
    Please review https://livy.incubator.apache.org/community/ before opening a pull request.
    
    Author: Arun Mahadevan <arunm@apache.org>
    
    Closes #174 from arunmahadevan/LIVY-598.

 pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f7961924e4bed4d1257817cd871bfe0555d1cca0
Author: Yiheng Wang <yihengw@gmail.com>
Date:   Tue Jul 16 10:22:11 2019 +0800

    [LIVY-582][TESTS] Hostname in python-api test should be lower case to avoid test failures
    
    ## What changes were proposed in this pull request?
    In the python-API test code, when returning a mocked response, the mock lib will compare the URL with the predefined URLs case sensitive. However, the `Request` lib used in the Livy python API will change the URL to lower case. This will cause test failures on a machine with an upper case hostname.
    
    This patch turns the hostname in python-API test code into the lower case to avoid such test failures.
    
    ## How was this patch tested?
    Existing test. Run test specifically on a machine with an upper case hostname.
    
    Author: Yiheng Wang <yihengw@gmail.com>
    
    Closes #180 from yiheng/fix_582.

 python-api/src/test/python/livy-tests/client_test.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 6ad9ae9607e8369d5787d0d0c07eb3bd7b060bfc
Author: yihengwang <yihengwang@tencent.com>
Date:   Fri Jul 12 10:11:25 2019 +0800

    [LIVY-603][BUILD] Upgrade build spark version to 2.4.3
    
    ## What changes were proposed in this pull request?
    Bump Spark 2.4 minor version to 2.4.3.
    
    ## How was this patch tested?
    Existing test
    
    Author: yihengwang <yihengwang@tencent.com>
    
    Closes #179 from yiheng/bump_spark_2_4_3.

 pom.xml | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit ee94065a630fa932488229365de68ab5e053d3a0
Author: yihengwang <yihengwang@tencent.com>
Date:   Tue Jul 9 19:16:53 2019 +0800

    [MINOR] Fix spark 2.4.0 tgz file dead download link in pom.xml
    
    ## What changes were proposed in this pull request?
    The download link for spark 2.4.0 tgz file in the pom.xml file is a dead link. This patch change all the spark tgz download links to the official spark release archive site, which should be more stable.
    
    ## How was this patch tested?
    Existing test.
    
    Author: yihengwang <yihengwang@tencent.com>
    
    Closes #178 from yiheng/fix_travis.

 pom.xml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 5abc043708b443ba36612a4f4e2f5137bd63621a
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Apr 11 09:29:39 2019 -0700

    [LIVY-563] Propagate RSC configuration when creating sessions.
    
    Even though not all RSC configs apply to the remote driver, a few do,
    so propagate all of them when starting a new session.
    
    Includes new unit test.
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #168 from vanzin/LIVY-563.

 rsc/src/main/java/org/apache/livy/rsc/RSCConf.java         |  2 +-
 .../livy/server/interactive/InteractiveSession.scala       |  9 +++++++++
 .../livy/server/interactive/InteractiveSessionSpec.scala   | 14 +++++++++++++-
 3 files changed, 23 insertions(+), 2 deletions(-)

commit d5b27dd430e8f5d4e149125eb433fd61e3e24c00
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Apr 1 13:22:31 2019 -0700

    [DOCS] Fix Javadoc 8 errors.
    
    Seems like javadoc 8 doesn't like when you reference nested classes
    from parent types.
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #164 from vanzin/javadoc-fix.

 .../main/java/org/apache/livy/client/common/AbstractJobHandle.java  | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 8c7f03b4a8c5fae73c14bac7d97c62cc0fd6241d
Author: Gyorgy Gal <gal.gyorgy@gmail.com>
Date:   Tue Mar 26 17:50:15 2019 -0700

    [LIVY-513][LIVY-517][TEST] Fix SessionHeartbeatSpec flakiness, occasional NPE
    
    ## What changes were proposed in this pull request?
    
    This PR aims to fix the following issues in the test suite `SessionHeartbeatSpec`:
    
     * Since there is no implementation provided for `stop()` in `mock[TestSession]`, Mockito returns `null` by default and this causes `SessionManager#delete` to throw
       `NullPointerException` when executing `map()` on the `Future[Unit]` object it expects.
       This can be observed in the unit test output (`server/target/unit-tests.log`):
    
    ```
    19/03/25 18:20:30.123 ScalaTest-main-running-SessionHeartbeatSpec INFO SessionHeartbeatSpec$$anonfun$2$TestWatchdog$1: Registering new session 0
    19/03/25 18:20:30.123 ScalaTest-main-running-SessionHeartbeatSpec INFO SessionHeartbeatSpec$$anonfun$2$TestWatchdog$1: Registering new session 1
    19/03/25 18:20:30.124 ScalaTest-main-running-SessionHeartbeatSpec INFO SessionHeartbeatSpec$$anonfun$2$TestWatchdog$1: Session 0 expired. Last heartbeat is at null.
    19/03/25 18:20:30.124 ScalaTest-main-running-SessionHeartbeatSpec WARN SessionHeartbeatSpec$$anonfun$2$TestWatchdog$1: Exception was thrown when deleting expired session 0
    java.lang.NullPointerException
            at org.apache.livy.sessions.SessionManager.delete(SessionManager.scala:123)
            at org.apache.livy.server.interactive.SessionHeartbeatWatchdog$$anonfun$deleteExpiredSessions$1.apply(SessionHeartbeat.scala:113)
            at org.apache.livy.server.interactive.SessionHeartbeatWatchdog$$anonfun$deleteExpiredSessions$1.apply(SessionHeartbeat.scala:110)
            at scala.collection.Iterator$class.foreach(Iterator.scala:891)
            at scala.collection.AbstractIterator.foreach(Iterator.scala:1334)
            at scala.collection.MapLike$DefaultValuesIterable.foreach(MapLike.scala:206)
            at org.apache.livy.server.interactive.SessionHeartbeatWatchdog$class.deleteExpiredSessions(SessionHeartbeat.scala:110)
            at org.apache.livy.server.interactive.SessionHeartbeatSpec$$anonfun$2$TestWatchdog$1.deleteExpiredSessions(SessionHeartbeatSpec.scala:60)
    ```
    
     * In some rare cases, the SessionManager GC thread may run `collectGarbage()` after the test sessions are registered but before the test is finished. The GC thread will also attempt to delete the `mock[TestSession]` objects because the mocked session's `lastActivity()` function returns 0 by default which means`currentTime - session.lastActivity > sessionTimeout` will always be true. This causes a race condition that can have the following outcomes:
    
         1. The `stop()` method may be called twice (both by `SessionHeartbeatWatchdog#deleteExpiredSessions` and `SessionManager#collectGarbage`), resulting in a `TooManyActualInvocations` exception (LIVY-513):
    
                    ```
                      org.mockito.exceptions.verification.TooManyActualInvocations: testSession$1.stop();
                    Wanted 1 time:
                    -> at org.apache.livy.server.interactive.SessionHeartbeatSpec$$anonfun$2$$anonfun$apply$mcV$sp$5.apply$mcV$sp(SessionHeartbeatSpec.scala:93)
                    But was 2 times. Undesired invocation:
                    -> at org.apache.livy.sessions.SessionManager.delete(SessionManager.scala:124)
                      at org.apache.livy.server.interactive.SessionHeartbeatSpec$$anonfun$2$$anonfun$apply$mcV$sp$5.apply$mcV$sp(SessionHeartbeatSpec.scala:93)
                      at org.apache.livy.server.interactive.SessionHeartbeatSpec$$anonfun$2$$anonfun$apply$mcV$sp$5.apply(SessionHeartbeatSpec.scala:70)
                      at org.apache.livy.server.interactive.SessionHeartbeatSpec$$anonfun$2$$anonfun$apply$mcV$sp$5.apply(SessionHeartbeatSpec.scala:70)
                      at org.scalatest.Transformer$$anonfun$apply$1.apply$mcV$sp(Transformer.scala:22)
                      at org.scalatest.OutcomeOf$class.outcomeOf(OutcomeOf.scala:85)
                      at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
                      at org.scalatest.Transformer.apply(Transformer.scala:22)
                      at org.scalatest.Transformer.apply(Transformer.scala:20)
                      at org.scalatest.FunSpecLike$$anon$1.apply(FunSpecLike.scala:422)
                      at org.scalatest.Suite$class.withFixture(Suite.scala:1122)
                      ...
                    ```
    
             2. The `stop()` method may be called by `collectGarbage()` after `deleteExpiredSessions()`, but before the test is finished, which causes the following error message to appear on the console (LIVY-517).
    
                    ```
                    Deleting Mock for TestSession$1, hashCode: 1666638753 because it was inactive for more than 3600000.0 ms.
                    Exception in thread "session gc thread" java.lang.NullPointerException
                            at org.apache.livy.sessions.SessionManager.delete(SessionManager.scala:124)
                            at org.apache.livy.sessions.SessionManager$$anonfun$collectGarbage$2.apply(SessionManager.scala:171)
                            at org.apache.livy.sessions.SessionManager$$anonfun$collectGarbage$2.apply(SessionManager.scala:168)
                            at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)
                            at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)
                            at scala.collection.immutable.List.foreach(List.scala:392)
                            at scala.collection.TraversableLike$class.map(TraversableLike.scala:234)
                            at scala.collection.immutable.List.map(List.scala:296)
                            at org.apache.livy.sessions.SessionManager.collectGarbage(SessionManager.scala:168)
                            at org.apache.livy.sessions.SessionManager$GarbageCollector.run(SessionManager.scala:201)
                    ```
    
    These race conditions can be triggered easily by inserting `Thread.sleep(x)` (where x is between 10 to 50) before the loop in `org.apache.livy.sessions.SessionManager.GarbageCollector#run` and rerunning the test.
    
    With this change applied, the SessionManager GC should not attempt to collect the `mock[TestSession]` objects created by the test, so the race condition should be eliminated and the flakiness of the test should be fixed.
    
    ## How was this patch tested?
    
    By running the existing UTs.
    
    Author: Gyorgy Gal <gal.gyorgy@gmail.com>
    
    Closes #163 from gyogal/LIVY-513.

 .../org/apache/livy/server/interactive/SessionHeartbeatSpec.scala    | 5 +++++
 1 file changed, 5 insertions(+)

commit 1c914a1f0fab80a11285ea7f602bb445b797c0a8
Author: Marco Gaido <mgaido@apache.org>
Date:   Tue Mar 26 17:43:16 2019 -0700

    [LIVY-572] Avoid usage of spark classes in ColumnBuffer
    
    ## What changes were proposed in this pull request?
    
    The `ColumnBuffers` can be created both inside spark jobs and in the Livy server. The latter case happens when operation logs are returned and  fails before this patch because we are using Spark classes in this code after the refactor in LIVY-503. Unfortunately, we do not have test coverage for operation logs retrieval and this is the reason why this wasn't spot out earlier.
    
    Since operation logs are retrieved by beeline for each query, this means that every query run through beeline fails, unless `livy.server.thrift.logging.operation.enabled` is set to `false`.
    
    ## How was this patch tested?
    
    manual tests using beeline
    
    Author: Marco Gaido <mgaido@apache.org>
    
    Closes #162 from mgaido91/LIVY-572.

 .../livy/thriftserver/session/ColumnBuffer.java    | 67 +------------------
 .../livy/thriftserver/session/ResultSet.java       | 76 +++++++++++++++++++++-
 2 files changed, 76 insertions(+), 67 deletions(-)

commit 07d216d33a5420004262c9b8d2acc2751547cc96
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Mar 19 13:08:15 2019 -0700

    [BUILD] Add "apache" prefix to release archives.
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #160 from vanzin/archive-name.

 assembly/pom.xml     |  2 +-
 dev/release-build.sh | 50 +++++++++++++++++++++-----------------------------
 2 files changed, 22 insertions(+), 30 deletions(-)

commit eebf378343423f7dbcb2b9f079172674315abb3a
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Mar 18 16:38:15 2019 -0700

    [LIVY-570] Replace test archives with auto-generated files.
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #159 from vanzin/LIVY-570.

 python-api/pom.xml                                        |  3 +++
 python-api/src/test/python/livy-tests/client_test.py      | 15 +++++++++++----
 .../src/test/python/livy-tests/resources/jar_file.jar     |  0
 .../src/test/python/livy-tests/resources/zip_file.zip     |  0
 4 files changed, 14 insertions(+), 4 deletions(-)

commit 50e4efe44657da2a3030a7a1825e1665000bf566
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Mar 18 10:39:02 2019 -0700

    [BUILD] Bump master version to 0.7.0.
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #158 from vanzin/version-bump.

 api/pom.xml                  | 4 ++--
 assembly/pom.xml             | 4 ++--
 client-common/pom.xml        | 4 ++--
 client-http/pom.xml          | 4 ++--
 core/pom.xml                 | 4 ++--
 core/scala-2.11/pom.xml      | 4 ++--
 coverage/pom.xml             | 4 ++--
 docs/_data/project.yml       | 2 +-
 docs/programmatic-api.md     | 2 +-
 examples/pom.xml             | 4 ++--
 integration-test/pom.xml     | 4 ++--
 pom.xml                      | 2 +-
 python-api/pom.xml           | 4 ++--
 python-api/setup.py          | 2 +-
 repl/pom.xml                 | 4 ++--
 repl/scala-2.11/pom.xml      | 4 ++--
 rsc/pom.xml                  | 2 +-
 scala-api/pom.xml            | 4 ++--
 scala-api/scala-2.11/pom.xml | 4 ++--
 scala/pom.xml                | 4 ++--
 server/pom.xml               | 4 ++--
 test-lib/pom.xml             | 4 ++--
 thriftserver/client/pom.xml  | 2 +-
 thriftserver/server/pom.xml  | 2 +-
 thriftserver/session/pom.xml | 2 +-
 25 files changed, 42 insertions(+), 42 deletions(-)

commit 59972a857a4e087d5c862585065335c9c3dae458
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Mar 18 09:04:42 2019 -0700

    [LIVY-565] Ensure column buffer for string and binary returns all data.
    
    The code was failing to account for null values at the tail end of the buffer,
    and could return a buffer that was too short for the number of rows being
    returned.
    
    Also added unit tests to verify the fix.
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #155 from vanzin/LIVY-565.

 .../livy/thriftserver/session/ColumnBuffer.java    | 44 ++++++++++++--------
 .../thriftserver/session/ColumnBufferTest.java     | 48 +++++++++++++++++++++-
 2 files changed, 73 insertions(+), 19 deletions(-)

commit 292896bacfd873ce69c682ba584a03ef8455bd52
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri Mar 15 08:45:24 2019 -0700

    [LIVY-566] Cancel Spark jobs related to statement on cancellation.
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #156 from vanzin/LIVY-566.

 .../java/org/apache/livy/thriftserver/session/ThriftSessionState.java    | 1 +
 1 file changed, 1 insertion(+)

commit ed7e2dbb66bf1cba02b7ad60a03107486d49ff53
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri Mar 15 08:44:28 2019 -0700

    [BUILD] Run ITs with the correct version of Spark.
    
    The 2.4 IT runs were running with Spark 2.2.
    
    Also update 2.3 to 2.3.3 since 2.3.2 is not mirrored anymore.
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #157 from vanzin/it-version.

 pom.xml | 17 +++--------------
 1 file changed, 3 insertions(+), 14 deletions(-)

commit 57677897b486bab5bb39e78eb0d7f734262411ae
Author: Gyorgy Gal <gal.gyorgy@gmail.com>
Date:   Tue Mar 12 08:48:29 2019 -0700

    [LIVY-568][BUILD] Upgrade jackson version to 2.9.8
    
    ## What changes were proposed in this pull request?
    
    Due to security issues of jackson databind module (https://github.com/FasterXML/jackson-databind/issues/2186) proposing to upgrade jackson version to 2.9.8.
    
    ## How was this patch tested?
    
    Existing UTs.
    
    Author: Gyorgy Gal <gal.gyorgy@gmail.com>
    
    Closes #153 from gyogal/LIVY-568.

 pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7d9b453780a11abb92e8c0cb504a894c174c01a8
Author: Meisam Fathi <meisam.fathi@gmail.com>
Date:   Fri Feb 15 15:18:45 2019 -0800

    [LIVY-556] HearbeatExpired is not stubbed correctly in test cases
    
    ## What changes were proposed in this pull request?
    Add the proper stubbing to all mocked interactive sessions to make sure session heartbeats work correctly.
    
    ## How was this patch tested?
    This change only fixes the test cases. It is not changing production code.
    
    Author: Meisam Fathi <meisam.fathi@gmail.com>
    
    Closes #143 from meisam/LIVY-556.

 .../apache/livy/server/interactive/InteractiveSessionServletSpec.scala  | 2 ++
 server/src/test/scala/org/apache/livy/sessions/SessionManagerSpec.scala | 1 +
 2 files changed, 3 insertions(+)

commit 2240c715d38b9d4a9498e4252283430a343ae728
Author: Fathi Salmi, Meisam(mfathisalmi) <mfathisalmi@paypal.com>
Date:   Fri Feb 15 15:16:45 2019 -0800

    [LIVY-557] Make Travis-CI logs less verbose
    
    ## What changes were proposed in this pull request?
    - Set the base travis image to ubuntu Xenial.
    - Set the Scala version to `2.11.12` to match the version in pom.xml.
    - Install `r-base` directly from xenial repos (no need to add r-packages).
    - Combine the two `mvn` builds into one (`script` and `install` sections in `.travis.yml`).
    - Make apt-get and pip are quiet.
    - ~Set the SLF4J log level to warn for maven.~
    
    ## How was this patch tested?
    Tested on Travis:
    - Before this change, travis logs were about 6K+ lines long.
    - After this change, the logs are less than 4K for unit tests and less than 3K for integration tests.
    - I also verified that
      - Travis uses scala 2.11.12.
      - r-base is installed.
      - mvn runs without a problem after combining the two mvn builds.
      - Warn level messages and outputs of builds/tests are still available in the logs.
      - apt-get and pip run in quiet mode.
    
    ## Sample Travis outputs
    **A build log that is  big to fit into Travis UI (size 4MB)**: https://travis-ci.org/apache/incubator-livy/jobs/487096239
    **A build log BEFORE this change  (size 643KB)**: https://travis-ci.org/apache/incubator-livy/jobs/487164276
    **A build log AFTER this change (size 327KB)**: https://travis-ci.org/apache/incubator-livy/jobs/492011690
    **~A build log with mvn log level set to warn (323 KB)**: ~https://travis-ci.org/apache/incubator-livy/jobs/490937880~
    This change is reverted because it was silencing useful information in mvn.
    
    Task-url: https://issues.apache.org/jira/browse/LIVY-557
    
    Author: Fathi Salmi, Meisam(mfathisalmi) <mfathisalmi@paypal.com>
    Author: Fathi Salmi, Meisam <meisam.fathi@gmail.com>
    Author: Meisam Fathi <meisam.fathi@gmail.com>
    
    Closes #144 from meisam/LIVY-557.

 .travis.yml | 36 +++++++++++++-----------------------
 1 file changed, 13 insertions(+), 23 deletions(-)

commit 954ec21204569c7ac07b59284b13f8bc42e4faf2
Author: jerryshao <sai.sai.shao@gmail.com>
Date:   Mon Feb 11 11:57:20 2019 +0100

    [LIVY-508][SERVER] Support custom auth filter for livy server
    
    ## What changes were proposed in this pull request?
    
    Users may have the requirement to add their own auth filter to the Livy server other than Kerberos, so here propose to add this support.
    
    ## How was this patch tested?
    
    Verified locally in the cluster.
    
    Author: jerryshao <sai.sai.shao@gmail.com>
    Author: jerryshao <jerryshao@tencent.com>
    
    Closes #110 from jerryshao/LIVY-508.

 conf/livy.conf.template                             | 13 +++++++++++++
 .../scala/org/apache/livy/server/LivyServer.scala   | 21 ++++++++++++++++++---
 2 files changed, 31 insertions(+), 3 deletions(-)

commit 80daadef02ae57b2a5487c6f92e0f7df558d4864
Author: Kevin Risden <krisden@apache.org>
Date:   Thu Feb 7 09:54:08 2019 -0800

    [LIVY-551] Add "doAs" impersonation support
    
    ## What changes were proposed in this pull request?
    
    Currently `proxyuser` is used in batches and sessions for impersonation. This should be extended to support impersonation for all endpoints. Adding the query parameter `doAs` matches others in the Hadoop ecosystem and will work across endpoints.
    
    https://issues.apache.org/jira/browse/LIVY-551
    
    ## How was this patch tested?
    
    Added unit and integration tests for this feature. Manually tested to ensure that `proxyuser` still works. Also checked that if both `proxyuser` and the new `doAs` parameter are specified that `doAs` takes precedence.
    
    Author: Kevin Risden <krisden@apache.org>
    
    Closes #141 from risdenk/LIVY-551.

 docs/rest-api.md                                   |   7 ++
 .../org/apache/livy/server/AccessManager.scala     |   5 +-
 .../org/apache/livy/server/SessionServlet.scala    |  26 +++-
 .../apache/livy/server/batch/BatchSession.scala    |   3 +-
 .../livy/server/batch/BatchSessionServlet.scala    |   3 +-
 .../server/interactive/InteractiveSession.scala    |   3 +-
 .../interactive/InteractiveSessionServlet.scala    |   3 +-
 .../scala/org/apache/livy/sessions/Session.scala   |   3 +-
 .../apache/livy/server/SessionServletSpec.scala    | 138 +++++++++++++++++++--
 .../livy/server/batch/BatchSessionSpec.scala       |   4 +-
 .../interactive/InteractiveSessionSpec.scala       |   3 +-
 .../livy/server/interactive/JobApiSpec.scala       |  73 +++++++++--
 .../thriftserver/LivyThriftSessionManager.scala    |   1 +
 13 files changed, 240 insertions(+), 32 deletions(-)

commit def6318c84f32a09f219065691857f11ca74e7cb
Author: Fathi Salmi, Meisam(mfathisalmi) <mfathisalmi@paypal.com>
Date:   Tue Feb 5 11:25:06 2019 -0800

    [LIVY-41] Let users access sessions by session name
    
    This commit  enables Livy users to access sessions either by names or by auto-generated sessiond id's.
    
    It also prevents users from creating sessions that have the same name.
    
    This commit keeps API change  minimal. These are places that API change
    is needed:
    - `Session` and its sub-classes adds a new field, `name`.
    - `RecoveryMetadata` and its sub-classes adds a new field, `name`.
    - `SessionManager` adds a new method `getSession(name: String)` which looks sessions up by name.
    
    Task-url: https://issues.apache.org/jira/browse/LIVY-41
    
    Author: Fathi Salmi, Meisam(mfathisalmi) <mfathisalmi@paypal.com>
    Author: Meisam Fathi <meisam.fathi@gmail.com>
    Author: Fathi Salmi, Meisam <meisam.fathi@gmail.com>
    Author: Fathi, Meisam <meisam.fathi@gmail.com>
    
    Closes #48 from meisam/LIVY-41-rebased.

 .../apache/livy/client/common/HttpMessages.java    |   8 +-
 .../apache/livy/client/http/HttpClientSpec.scala   |   1 +
 .../livy/test/framework/LivyRestClient.scala       |   4 +
 .../test/scala/org/apache/livy/test/BatchIT.scala  |   4 +-
 .../scala/org/apache/livy/test/InteractiveIT.scala |   2 +-
 .../org/apache/livy/server/SessionServlet.scala    |  13 ++-
 .../apache/livy/server/batch/BatchSession.scala    |  20 +++-
 .../livy/server/batch/BatchSessionServlet.scala    |   9 +-
 .../server/interactive/InteractiveSession.scala    | 104 +++++++++++----------
 .../interactive/InteractiveSessionServlet.scala    |   6 +-
 .../scala/org/apache/livy/sessions/Session.scala   |  16 +++-
 .../org/apache/livy/sessions/SessionManager.scala  |  13 +++
 .../apache/livy/server/SessionServletSpec.scala    |   4 +-
 .../livy/server/batch/BatchServletSpec.scala       |  60 +++++++-----
 .../livy/server/batch/BatchSessionSpec.scala       |  19 +++-
 .../interactive/BaseInteractiveServletSpec.scala   |   1 +
 .../InteractiveSessionServletSpec.scala            |  12 ++-
 .../interactive/InteractiveSessionSpec.scala       |  32 +++++--
 .../server/interactive/SessionHeartbeatSpec.scala  |   5 +-
 .../server/recovery/BlackholeStateStoreSpec.scala  |  20 ++++
 .../org/apache/livy/sessions/MockSession.scala     |   5 +-
 .../apache/livy/sessions/SessionManagerSpec.scala  |  46 +++++++--
 .../thriftserver/LivyThriftSessionManager.scala    |   1 +
 23 files changed, 289 insertions(+), 116 deletions(-)

commit e5489d0e15869c03065088464c2551cf45d320dd
Author: meisam <meisam@users.noreply.github.com>
Date:   Mon Jan 28 02:09:03 2019 -0800

    [MINOR] Fix instructions on how to build Livy.
    
    ## What changes were proposed in this pull request?
    Update the README section with instructions on building Livy
    
    ## How was this patch tested?
    - Checked the rendered markdown.
    - Executed the instructions.
    
    ## What remains to be done?
    This instruction should be updated in the documentation each time Livy's repository name changes.

 README.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 02550f7919b7348b6a7270cf806e031670037b2f
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Jan 7 15:18:28 2019 -0800

    Update Livy repo URLs.
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #137 from vanzin/gitbox_update.

 dev/release-build.sh | 2 +-
 pom.xml              | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit bf4056f09dfd9b05321c9cede1763317399a1001
Author: mark91 <marcogaido91@gmail.com>
Date:   Thu Jan 3 12:32:48 2019 -0800

    [LIVY-538] Add integration tests for thriftserver
    
    ## What changes were proposed in this pull request?
    
    Added a new module containing ITs for the thriftserver. The current tests contain only simple queries which ensure that the thriftserver is working correctly in the distributed environment. Specific checks of functionalities are already tested in the related UTs
    
    ## How was this patch tested?
    
    added tests
    
    Author: mark91 <marcogaido91@gmail.com>
    Author: Marco Gaido <mgaido@hortonworks.com>
    
    Closes #131 from mgaido91/LIVY-538.

 integration-test/pom.xml                           | 80 ++++++++++++++++++++++
 .../org/apache/livy/test/framework/Cluster.scala   |  1 +
 .../apache/livy/test/framework/MiniCluster.scala   | 28 ++++++--
 .../framework/BaseThriftIntegrationTestSuite.scala | 54 +++++++++++++++
 .../test/scala/org/apache/livy/test/JdbcIT.scala   | 66 ++++++++++++++++++
 .../scala/org/apache/livy/server/LivyServer.scala  | 29 ++++++--
 6 files changed, 245 insertions(+), 13 deletions(-)

commit e2d2189f4fb000e0113befa03db16916f94e03bb
Author: Tao Li <tali1@microsoft.com>
Date:   Wed Dec 19 14:17:51 2018 -0800

    [LIVY-479] Enable livy.rsc.launcher.address configuration
    
    ## What changes were proposed in this pull request?
    In current code we are setting livy.rsc.launcher.address to RPC server and ignoring whatever is specified in configs. However in some scenarios there is a need for the user to be able to explicitly configure it. For example, the IP address for an active Livy server might change over the time, so rather than using the fixed IP address, we need to specify this setting to a more generic host name. For this reason, we want to enable the capability of user side configurations.
    
    Jira: https://issues.apache.org/jira/browse/LIVY-479
    
    ## How was this patch tested?
    Manual tests by changing "livy.rsc.launcher.address" and verified the setting took effect
    
    Author: Tao Li <tali1@microsoft.com>
    
    Closes #101 from taoliseki/LIVY-479.

 rsc/src/main/java/org/apache/livy/rsc/ContextLauncher.java | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit c8cfe2994ea8925d63ff22e2d076c3fae1cf3dc1
Author: Marco Gaido <mgaido@hortonworks.com>
Date:   Tue Dec 18 16:28:54 2018 -0800

    [LIVY-543] Clean thriftserver dependencies from Hive's jetty
    
    ## What changes were proposed in this pull request?
    
    Hive 3.0 uses Jetty 9.3.8. So there are some jars coming from hive dependency which are conflicting with our Jetty dependencies which were upgraded in LIVY-526. Hence we should ignore the dependencies Hive has on Jetty and use our own version. After the refactor which has been done in the thriftserver, this should be easy. This can cause issue when running the server (not always, though, which makes it hard to debug and reproduce).
    
    The PR removes also an extra-dependency which was left in the thriftserver-server module which is not needed anymore after the refactor which created the thriftserver-session module.
    
    ## How was this patch tested?
    
    manual tests, checking the generated JARs
    
    Please review https://livy.incubator.apache.org/community/ before opening a pull request.
    
    Author: Marco Gaido <mgaido@hortonworks.com>
    
    Closes #134 from mgaido91/LIVY-543.

 thriftserver/server/pom.xml | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

commit 1d05d18cf037121722750504050195249616019f
Author: Adrian Petrescu <apetresc@gmail.com>
Date:   Tue Dec 4 14:36:49 2018 -0800

    [LIVY-539] Fix incorrect default value in livy-client.conf.template
    
    ## What changes were proposed in this pull request?
    JIRA LINK: https://issues.apache.org/jira/browse/LIVY-539
    
    The template for `livy-client.conf` implies that the default value of `livy.rsc.launcher.port.range` is `10000~10110`, but this is in fact incorrect - the real default value is `10000~10010`, as you can [see here](https://github.com/apache/incubator-livy/blob/master/rsc/src/main/java/org/apache/livy/rsc/RSCConf.java#L54). This is really confusing, especially since:
      * 10110 is wrong on the Spark side, the default configuration there won't open that many ports
      * 10010 and 10110 look very similar to the human eye so it can take a long time to notice the discrepancy
    
    This PR modifies the default conf template to reflect the real default value.
    
    ## How was this patch tested?
    
    No testing applicable, it's a configuration template fix.
    
    Author: Adrian Petrescu <apetresc@gmail.com>
    
    Closes #132 from apetresc/patch-1.

 conf/livy-client.conf.template | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dddb29b5de6aa045580776ef13c764f408fcf5a9
Author: Bjoern Lohrmann <5310706+bjoernlohrmann@users.noreply.github.com>
Date:   Mon Dec 3 15:33:56 2018 -0800

    [LIVY-533] Use setJobGroup/cancelJobGroup to cancel bypass jobs
    
    ## What changes were proposed in this pull request?
    
    This PR fixes [LIVY-533](https://issues.apache.org/jira/browse/LIVY-533).
    
    The proposed fix invokes setJobGroup() in the worker thread before calling job code, and cancelJobGroup() when another thread tries to cancel job execution. synchronized blocks are employed to guard against race conditions.
    
    Also, this PR removes some unused code from the JobWrapper class.
    
    ## How was this patch tested?
    
    Manual as well as Livy test suite. No new tests were added, since the code is covered by existing tests.
    
    Author: Bjoern Lohrmann <5310706+bjoernlohrmann@users.noreply.github.com>
    
    Closes #128 from bjoernlohrmann/master.

 .../apache/livy/rsc/driver/BypassJobWrapper.java   | 42 ++++++++----
 .../org/apache/livy/rsc/driver/JobWrapper.java     | 40 +++++++-----
 .../java/org/apache/livy/rsc/TestSparkClient.java  | 76 ++++++++++++++++++----
 3 files changed, 118 insertions(+), 40 deletions(-)

commit 47d3ee6b6555a63d0b871788a53aab022fff518a
Author: Marco Gaido <mgaido@hortonworks.com>
Date:   Fri Nov 30 15:57:16 2018 -0800

    [LIVY-502] Remove dependency on hive-exec
    
    ## What changes were proposed in this pull request?
    
    This PR removes the dependency on `hive-exec`. Only modules of Hive which are used after this PR are `hive-service-rpc` and `hive-service`. This drastically reduces the amount of JARs needed by the thriftserver module.
    
    The PR takes the Hive classes which we were using and adapts them when necessary (or simpify when we don't need something) in order to work in the Livy thriftserver.
    
    Most of the classes are just migrated replacing all occurrences of `HiveConf`, `HiveSession` and other Hive specific classes. Only one class has a quite different logic than Hive's and it is `AuthFactory`, as we are using a different UGI handling from Hive (as we are not running the TS in a standalone JVM).
    
    The functionalities we are taking from Hive are:
     - the thrift protocol endpoints (the classes in the `cli` package), ie. the classes handling lower level details about the communication with the client;
     - the authentication layer (classes in the `auth` package, which are used in the ones in `cli`), despite this PR leaves LDAP and PAM as out of scope as they are not trivial to be ported and not needed for a working solution. We can add them later;
      - the classes in the `operation` package which are used to answer to metadata queries by the JDBC driver.
    
    ## How was this patch tested?
    
    existing UTs + manual tests
    
    Author: Marco Gaido <mgaido@hortonworks.com>
    
    Closes #117 from mgaido91/LIVY-502.

 server/pom.xml                                     |   4 +
 .../src/main/scala/org/apache/livy/LivyConf.scala  |  66 ++
 .../scala/org/apache/livy/server/LivyServer.scala  |   9 +-
 .../apache/livy/server/ThriftServerFactory.scala   |   2 +
 thriftserver/server/pom.xml                        |  36 +-
 .../apache/hive/service/auth/HiveAuthFactory.java  | 320 --------
 .../apache/hive/service/cli/ColumnBasedSet.java    | 205 -----
 .../apache/hive/service/cli/JobProgressUpdate.java |  55 --
 .../apache/hive/service/cli/OperationStatus.java   |  75 --
 .../cli/operation/GetCatalogsOperation.java        |  80 --
 .../cli/operation/GetTableTypesOperation.java      | 101 ---
 .../cli/operation/GetTypeInfoOperation.java        | 147 ----
 .../cli/operation/HiveTableTypeMapping.java        |  61 --
 .../service/cli/operation/MetadataOperation.java   | 133 ----
 .../hive/service/cli/operation/Operation.java      | 290 -------
 .../service/cli/thrift/ThriftBinaryCLIService.java | 167 ----
 .../hive/service/cli/thrift/ThriftCLIService.java  | 871 ---------------------
 .../service/cli/thrift/ThriftHttpCLIService.java   | 234 ------
 .../hive/service/cli/thrift/ThriftHttpServlet.java | 592 --------------
 .../apache/hive/service/server/HiveServer2.java    | 316 --------
 .../apache/livy/thriftserver/LivyCLIService.scala  | 147 ++--
 .../LivyExecuteStatementOperation.scala            |  55 +-
 .../livy/thriftserver/LivyOperationManager.scala   |  54 +-
 .../livy/thriftserver/LivyThriftServer.scala       |  60 +-
 .../thriftserver/LivyThriftSessionManager.scala    |  56 +-
 .../thriftserver/ThriftServerFactoryImpl.scala     |   5 +
 .../apache/livy/thriftserver/ThriftService.scala   | 159 ++++
 .../livy/thriftserver/auth/AuthBridgeServer.scala  | 299 +++++++
 .../livy/thriftserver/auth/AuthFactory.scala       | 196 +++++
 .../thriftserver/auth/AuthenticationProvider.scala |  74 ++
 .../auth/LivyDelegationTokenSecretManager.scala    |  81 ++
 .../livy/thriftserver/auth/PlainSaslServer.scala   | 184 +++++
 .../cli/ThreadPoolExecutorWithOomHook.scala        |  54 ++
 .../thriftserver/cli/ThriftBinaryCLIService.scala  | 176 +++++
 .../livy/thriftserver/cli/ThriftCLIService.scala   | 745 ++++++++++++++++++
 .../thriftserver/cli/ThriftHttpCLIService.scala    | 210 +++++
 .../livy/thriftserver/cli/ThriftHttpServlet.scala  | 503 ++++++++++++
 .../operation/GetCatalogsOperation.scala           |  58 ++
 .../operation/GetTableTypesOperation.scala         |  59 ++
 .../operation/GetTypeInfoOperation.scala           | 126 +++
 .../thriftserver/operation/MetadataOperation.scala |  49 ++
 .../livy/thriftserver/operation/Operation.scala    | 180 +++++
 .../livy/thriftserver/serde/ThriftResultSet.scala  | 124 +++
 .../livy/thriftserver/types/DataTypeUtils.scala    |  89 +--
 .../apache/livy/thriftserver/types/Schema.scala    | 111 +++
 .../livy/thriftserver/ui/ThriftJsonServlet.scala   |   2 +-
 .../livy/thriftserver/ThriftServerBaseTest.scala   |  11 +-
 .../livy/thriftserver/ThriftServerSuites.scala     |   4 +-
 .../thriftserver/session/RegisterSessionJob.java   |   2 -
 .../livy/thriftserver/session/StatementState.java  |   2 -
 50 files changed, 3699 insertions(+), 3940 deletions(-)

commit 39fa887cfa482c5edaba2ad0c2af683d8e5c63c6
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Nov 29 10:09:42 2018 -0800

    [LIVY-503] Separate thrift server session code in separate module.
    
    This change creates a new module ("livy-thriftserver-session") with
    the code related to the Thrift server that is expected to run inside
    a Spark session. The module contains a few Job implementations that
    are used by the Thrift server to run SQL statements on the session
    side, plus some internal bookkeeping code.
    
    The new module is a re-implementation of the current Scala code in
    Java; Java is chosen because it becomes simpler to support different
    Scala versions, for a couple of reasons:
    
    - no need to compile the module separately for different Scala versions,
      for when that becomes an issue.
    - better control of serialization, instead of relying on Scala types that
      may not be compatible across versions (imagine the Livy server and the
      Spark session using different Scala versions).
    
    The change also removes the "jarLocation" configuration; in a release
    package, the session jars would be available with the rest of the RSC
    jars; for development, some code was added to the RSC to add the
    thrift server jars to the session when a local build is detected.
    
    Also included is a small change in the RSC pom so that the shaded jar
    is generated in the correct target directory and later copied into the
    staging directory; this solves an issue with using the RSC in test code
    in other modules (such as the one being added).
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #118 from vanzin/LIVY-503.

 assembly/assembly.xml                              |   7 +
 assembly/pom.xml                                   |   5 +
 pom.xml                                            |   4 +-
 rsc/pom.xml                                        |  23 +-
 .../java/org/apache/livy/rsc/ContextLauncher.java  |  20 +-
 .../src/main/scala/org/apache/livy/LivyConf.scala  |   1 -
 thriftserver/server/pom.xml                        |  10 +-
 .../LivyExecuteStatementOperation.scala            |  22 +-
 .../thriftserver/LivyThriftSessionManager.scala    |  24 +-
 .../apache/livy/thriftserver/rpc/RpcClient.scala   | 189 +----------
 .../livy/thriftserver/serde/ColumnBuffer.scala     | 186 -----------
 .../livy/thriftserver/types/DataTypeUtils.scala    | 145 ++-------
 .../server/src/test/resources/log4j.properties     |  39 +++
 .../livy/thriftserver/ThriftServerBaseTest.scala   |  11 +-
 thriftserver/session/pom.xml                       | 110 +++++++
 .../thriftserver/session/CleanupStatementJob.java  |  47 +++
 .../livy/thriftserver/session/ColumnBuffer.java    | 361 +++++++++++++++++++++
 .../apache/livy/thriftserver/session/DataType.java |  35 ++
 .../livy/thriftserver/session/FetchResultJob.java  |  67 ++++
 .../thriftserver/session/FetchResultSchemaJob.java |  46 +++
 .../thriftserver/session/RegisterSessionJob.java}  |  35 +-
 .../livy/thriftserver/session/ResultSet.java       |  58 ++++
 .../livy/thriftserver/session/ScalaIterator.java   |  48 +++
 .../livy/thriftserver/session/SparkUtils.java      |  60 ++++
 .../apache/livy/thriftserver/session/SqlJob.java   |  92 ++++++
 .../livy/thriftserver/session/StatementState.java} |  31 +-
 .../thriftserver/session/ThriftSessionState.java   | 126 +++++++
 .../thriftserver/session/UnregisterSessionJob.java |  48 +++
 .../thriftserver/session/ColumnBufferTest.java     | 256 +++++++++++++++
 .../thriftserver/session/ThriftSessionTest.java    | 169 ++++++++++
 30 files changed, 1729 insertions(+), 546 deletions(-)

commit ae2228f568f97865eb502a2cb568d431eeda47c0
Author: Marco Gaido <mgaido@hortonworks.com>
Date:   Wed Nov 28 13:48:58 2018 -0800

    [LIVY-537] Add hiveconf for setting the num of executors in thrift sessions
    
    ## What changes were proposed in this pull request?
    
    We missed to add a parameter to set the number of executors when creating a session through the thrift API. See https://issues.apache.org/jira/browse/LIVY-537.
    
    ## How was this patch tested?
    
    Manual tests.
    
    Author: Marco Gaido <mgaido@hortonworks.com>
    
    Closes #130 from mgaido91/LIVY-537.

 .../scala/org/apache/livy/thriftserver/LivyThriftSessionManager.scala   | 2 ++
 1 file changed, 2 insertions(+)

commit 8504c641eae91473f0c112d7438def489484619d
Author: Alexey Romanenko <aromanenko.dev@gmail.com>
Date:   Mon Nov 26 09:21:09 2018 -0800

    [LIVY-535] Fix non-atomic session creation
    
    ## What changes were proposed in this pull request?
    
    All steps, that include check for too many sessions and creating new
    session, should be atomic operation to avoid concurrent access of
    several threads to different part of this code in the same time.
    
    https://issues.apache.org/jira/browse/LIVY-535
    
    ## How was this patch tested?
    If was tested manually on local virtual cluster with this different values of config option `livy.server.session.max-creation`: 1, 2 and 3
    
    Then I run the following command to make sure that only allowed number of sessions were created in the same time and others were rejected:
    `for i in {1..5}; do curl -X POST --data '{"file": "/tmp/spark-examples-2.jar", "className": "org.apache.spark.examples.SparkPi"}' -H "Content-Type: application/json" http://localhost:8999/batches; done`
    
    Author: Alexey Romanenko <aromanenko.dev@gmail.com>
    
    Closes #129 from aromanenko-dev/LIVY-535-session-max-creation.

 .../org/apache/livy/server/SessionServlet.scala    | 22 ++++++++++++----------
 1 file changed, 12 insertions(+), 10 deletions(-)

commit 4cfb6bcb8fb9ac6b2d6c8b3d04b20f647b507e1f
Author: hyukjinkwon <gurwls223@apache.org>
Date:   Wed Nov 7 09:16:37 2018 -0800

    [LIVY-518][BUILD] Support Spark 2.4
    
    ## What changes were proposed in this pull request?
    
    This PR proposes to support Spark 2.4 in Livy.
    
    ## How was this patch tested?
    
    Unit tests and manual tests.
    
    Author: hyukjinkwon <gurwls223@apache.org>
    Author: Hyukjin Kwon <gurwls223@apache.org>
    
    Closes #121 from HyukjinKwon/spark24-support.

 .travis.yml                                        |  4 +++
 README.md                                          |  2 +-
 pom.xml                                            | 32 ++++++++++++++++++++++
 .../java/org/apache/livy/rsc/TestSparkClient.java  | 16 ++++++++---
 .../org/apache/livy/utils/LivySparkUtils.scala     |  4 ++-
 5 files changed, 52 insertions(+), 6 deletions(-)

commit 0bcc290dd2bccef85645f1a35938c241974b5c17
Author: ingo <ingo.schuster@de.ibm.com>
Date:   Mon Nov 5 09:36:12 2018 -0800

    [LIVY-525] SessionServlet: Convert response body for error messages to json
    
    ## What changes were proposed in this pull request?
    SessionServlet is supposed to deliver json responses. This is not the case in some error cases today. This pull requests converts the response bodies for NotFound, BadRequest and Forbidden to json
    https://issues.apache.org/jira/browse/LIVY-525
    
    ## How was this patch tested?
    manual tests since this is a trivial fix.
    
    Author: ingo <ingo.schuster@de.ibm.com>
    
    Closes #127 from IngoSchuster/json_fix.

 .../src/main/scala/org/apache/livy/server/JsonServlet.scala  |  4 ++++
 .../main/scala/org/apache/livy/server/SessionServlet.scala   | 12 ++++++------
 .../test/scala/org/apache/livy/server/JsonServletSpec.scala  | 10 ++++++++++
 3 files changed, 20 insertions(+), 6 deletions(-)

commit 0442eb01aa293d540fdf23ddd86b86c4278b83b9
Author: Marco Gaido <mgaido@hortonworks.com>
Date:   Thu Oct 25 12:44:20 2018 -0700

    [LIVY-495] Add thriftserver UI
    
    ## What changes were proposed in this pull request?
    
    The PR adds a new table in the Session tab dedicated to thrift-server sessions. The table contains the active sessions with a link to the corresponding Livy session.
    
    Moreover, the same information is also exposed through a REST endpoint (`"thriftserver/sessions"`).
    
    ## How was this patch tested?
    
    Manual tests. A screenshot of the UI is:
    
    ![screen shot 2018-10-09 at 11 32 18 am](https://user-images.githubusercontent.com/8821783/46660327-11082400-cbb7-11e8-9779-e8d85483dc97.png)
    
    Author: Marco Gaido <mgaido@hortonworks.com>
    
    Closes #114 from mgaido91/LIVY-495.

 .../livy/server/ui/static/js/all-sessions.js       |  4 +-
 .../scala/org/apache/livy/server/LivyServer.scala  | 16 ++++--
 .../apache/livy/server/ThriftServerFactory.scala   |  6 ++
 .../org/apache/livy/server/ui/UIServlet.scala      | 64 +++++++++++++---------
 .../ui/static/html/thrift-sessions-table.html      | 51 +++++++++++++++++
 .../livy/server/ui/static/js/thrift-sessions.js    | 50 +++++++++++++++++
 .../thriftserver/ThriftServerFactoryImpl.scala     |  7 +++
 .../livy/thriftserver/ui/ThriftJsonServlet.scala   | 55 +++++++++++++++++++
 8 files changed, 222 insertions(+), 31 deletions(-)

commit 4fb5516d2212b8c542fae8590844ac60f17f273d
Author: Lantao Jin <jinlantao@gmail.com>
Date:   Thu Oct 25 12:35:25 2018 -0700

    [LIVY-531][BUILD] Update spark-2.3 default version to 2.3.2
    
    ## What changes were proposed in this pull request?
    
    Due to spark 2.3.2 is highly recommended version to upgrade for all 2.3.x users which contains many stability bug fixes.
    
    ## How was this patch tested?
    
    Existing UTs.
    
    Author: Lantao Jin <jinlantao@gmail.com>
    
    Closes #124 from LantaoJin/LIVY-531.

 pom.xml | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit bcb6d2850fe63c349519650adbadea99cb30aec4
Author: itholic <haejoon309@naver.com>
Date:   Tue Oct 16 13:59:49 2018 -0700

    [LIVY-529][DOCS] Fix supported Python version from 2.6+ to 2.7+ in documentation
    
    ## What changes were proposed in this pull request?
    
    As of Spark 2.2, Python 2.6 is officially dropped(https://issues.apache.org/jira/browse/SPARK-12661).
    
    Since Livy support Spark 2.2+, looks this limitation is inheritted.
    
    Currently, Livy doc (https://github.com/apache/incubator-livy/blob/master/README.md) notes Python 2.6+ is required.
    
    It looks this should be changed to 2.7+
    
    ## How was this patch tested?
    
    N/A
    
    Author: itholic <haejoon309@naver.com>
    
    Closes #122 from itholic/LIVY-529.

 README.md | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 328425d05aa7b0b6acb5fc74000b1362f310f2c5
Author: itholic <haejoon309@naver.com>
Date:   Tue Oct 16 13:55:00 2018 -0700

    [MINOR] There is some typo in PULL_REQUEST_TEMPLATE
    
    ## What changes were proposed in this pull request?
    
    I found a typo In PULL_REQUEST_TEMPLATE,
    
    > `Iinclude` a link to the associated JIRA and make sure to add a link to this pr on the JIRA as well)
    
    So i suggest this typo fix to `(include`
    
    ## How was this patch tested?
    
    N/A
    
    Author: itholic <haejoon309@naver.com>
    
    Closes #123 from itholic/MINOR.

 .github/PULL_REQUEST_TEMPLATE | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a068363a0c097ab167e8fb6de1015930e71b4cb8
Author: Arun Mahadevan <arunm@apache.org>
Date:   Sat Oct 13 15:47:18 2018 +0800

    [LIVY-526] Upgrade jetty version
    
    ## What changes were proposed in this pull request?
    
    Upgrade the jetty patch version to a more recent version that has fixes for a few security issues.
    
    ## How was this patch tested?
    
    Existing unit tests
    
    Author: Arun Mahadevan <arunm@apache.org>
    
    Closes #120 from arunmahadevan/jetty-upgrade.

 .../src/test/scala/org/apache/livy/client/http/LivyConnectionSpec.scala | 2 +-
 pom.xml                                                                 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit d87a34872069107329b67940d193c2962cf2026d
Author: Marco Gaido <mgaido@hortonworks.com>
Date:   Fri Oct 5 13:06:21 2018 -0700

    [LIVY-500] Add beeline client for dev
    
    ## What changes were proposed in this pull request?
    
    The PR adds a new `thriftserver/client` module and a `beeline` script which are useful to have a client for the thriftserver during local testing. Both things are intended for dev usage only and are not shipped with the distribution.
    
    ## How was this patch tested?
    
    manual test
    
    Author: Marco Gaido <mgaido@hortonworks.com>
    
    Closes #113 from mgaido91/LIVY-500.

 dev/beeline                 | 48 ++++++++++++++++++++++++++++++++++++
 pom.xml                     |  1 +
 thriftserver/client/pom.xml | 60 +++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 109 insertions(+)

commit df25e6f0858ac7eec145e47acc54124c2205b0a2
Author: Marco Gaido <mgaido@hortonworks.com>
Date:   Mon Oct 1 13:38:29 2018 -0700

    [LIVY-520] Add log when session is GC-ed
    
    ## What changes were proposed in this pull request?
    
    When a session is inactive for a long time, it is GC-ed, ie. it is closed. Currently this operation is not logged, so it is not easy to understand why a session was closed.
    
    The PR proposes to add a log in order to explain what happened.
    
    ## How was this patch tested?
    
    manual tests
    
    Author: Marco Gaido <mgaido@hortonworks.com>
    
    Closes #116 from mgaido91/LIVY-520.

 server/src/main/scala/org/apache/livy/sessions/SessionManager.scala | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 56c76bc2d4563593edce062a563603fe63e5a431
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Sep 27 10:18:38 2018 -0700

    [LIVY-511][LIVY-512] Remove support for old Spark, Scala versions.
    
    This change restricts Livy support to Spark 2.2+ and Scala 2.11.  Both changes
    are made together because by supporting Spark 2.2+ only, it becomes impossible
    to test Scala 2.10.
    
    As part of the change, a lot of code that used reflection to support different
    versions of Spark could be cleaned up and directly call Spark APIs.
    
    The Scala 2.10 parts of the builds also have been removed, but the actual
    support for building and running with different Scala versions (and related
    tests) have been left as is. This will allow us to support 2.12 in the future.
    
    This change intentionally does not touch the public API (the "api/" module).
    There are things that could be cleaned up now that Spark 1.x is not supported,
    but that would mean an API breakage so I chose to leave those alone for now.
    
    The test matrix and build profiles have also been simplified a lot.  There are
    now two profiles to choose from (for Spark 2.2 and 2.3); integration tests can
    be run against a different version of Spark by running just the integration
    test module with the desired profile.
    
    Tested with Spark 2.2 and 2.3, and also by building against 2.2 and running
    integration tests against 2.3.
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #112 from vanzin/LIVY-511.

 .travis.yml                                        |  24 +--
 README.md                                          |  19 +--
 assembly/assembly.xml                              |   7 -
 assembly/pom.xml                                   |   6 -
 conf/livy.conf.template                            |   4 +-
 core/scala-2.10/pom.xml                            |  53 ------
 coverage/pom.xml                                   |  18 --
 .../main/java/org/apache/livy/examples/PiApp.java  |   2 +-
 .../scala/org/apache/livy/test/InteractiveIT.scala |   9 +-
 pom.xml                                            | 147 +----------------
 repl/scala-2.10/pom.xml                            |  41 -----
 .../org/apache/livy/repl/SparkInterpreter.scala    | 182 ---------------------
 .../apache/livy/repl/SparkInterpreterSpec.scala    |  86 ----------
 .../org/apache/livy/repl/SparkInterpreter.scala    |  55 +------
 .../org/apache/livy/repl/SQLInterpreter.scala      |  25 +--
 .../org/apache/livy/repl/SQLInterpreterSpec.scala  |  26 +--
 .../java/org/apache/livy/rsc/ContextLauncher.java  |   9 +-
 .../org/apache/livy/rsc/driver/JobContextImpl.java |  12 +-
 .../org/apache/livy/rsc/driver/SparkEntries.java   |  46 ++----
 scala-api/scala-2.10/pom.xml                       |  38 -----
 scala-api/src/main/resources/build.marker          |   0
 .../src/main/scala/org/apache/livy/LivyConf.scala  |   3 +-
 .../apache/livy/server/batch/BatchSession.scala    |   3 -
 .../server/interactive/InteractiveSession.scala    |  21 +--
 .../org/apache/livy/utils/LivySparkUtils.scala     |  10 +-
 .../interactive/BaseInteractiveServletSpec.scala   |   4 +-
 .../interactive/InteractiveSessionSpec.scala       |   8 +-
 .../apache/livy/utils/LivySparkUtilsSuite.scala    |  52 +-----
 .../apache/livy/thriftserver/rpc/RpcClient.scala   |  76 +++------
 29 files changed, 113 insertions(+), 873 deletions(-)

commit 134713d705a8de555bed912ac84f5214d7bddc30
Author: Marco Gaido <mgaido@hortonworks.com>
Date:   Mon Sep 24 15:39:07 2018 -0700

    [LIVY-494] Add thriftserver to Livy server
    
    ## What changes were proposed in this pull request?
    
    The PR adds a configuration parameter in order to startup also the thriftserver when starting Livy server.
    
    Apart from this trivial change, other 3 main things were needed and are present in this PR:
    
     - Add the thriftserver JARs to the assembly and the livy-server script;
     - A small refactor in order to enforce impersonation in the `*Session` classes, instead of in the `*Servlet` ones, so that it is picked up by the thriftserver module too (this change is not strictly needed, but I consider it a better option that duplicating this logic in the thriftserver module too);
     - Creating a UGI from the configured keytab. This is needed because the thriftserver requires the UGI to be created from a keytab in order to work properly and previously Livy was using a UGI generated from the cached TGT (created by the `kinit` command).
    
    ## How was this patch tested?
    
    Manual test: starting the server and having it up for more than 9 days.
    
    Author: Marco Gaido <mgaido@hortonworks.com>
    
    Closes #107 from mgaido91/LIVY-494.

 assembly/assembly.xml                              |  7 +++
 assembly/pom.xml                                   | 11 +++++
 bin/livy-server                                    |  5 ++
 server/pom.xml                                     |  6 +++
 .../src/main/scala/org/apache/livy/LivyConf.scala  |  1 +
 .../org/apache/livy/server/AccessManager.scala     | 46 ++++++++++++++++++
 .../scala/org/apache/livy/server/LivyServer.scala  | 23 +++++++++
 .../org/apache/livy/server/SessionServlet.scala    | 56 +++-------------------
 .../apache/livy/server/ThriftServerFactory.scala   | 40 ++++++++++++++++
 .../apache/livy/server/batch/BatchSession.scala    |  9 ++--
 .../livy/server/batch/BatchSessionServlet.scala    | 10 ++--
 .../server/interactive/InteractiveSession.scala    |  8 ++--
 .../interactive/InteractiveSessionServlet.scala    |  5 +-
 .../apache/livy/server/SessionServletSpec.scala    |  8 +++-
 .../livy/server/batch/BatchSessionSpec.scala       |  8 +++-
 .../interactive/InteractiveSessionSpec.scala       |  4 +-
 .../livy/thriftserver/LivyThriftServer.scala       | 23 +++++++--
 .../thriftserver/LivyThriftSessionManager.scala    |  2 +-
 .../thriftserver/ThriftServerFactoryImpl.scala     | 37 ++++++++++++++
 19 files changed, 236 insertions(+), 73 deletions(-)

commit d39ab356b4e36d8780bd44b9d5020bfeec90cb2f
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Sep 20 11:49:22 2018 +0800

    [LIVY-510] Remove support for JDK7.
    
    With this change Livy will only build and run with JDK8. While this
    doesn't necessarily preclude using Java 7 for running Spark itself,
    that is not encouraged due to possible issues with serialization.
    
    There are a few small changes elsewhere that I made so tests would pass,
    but aren't related to the java 8 change:
    
    - a small tweak to the fallback code that initializes the python
      interpreter, which was failing with a weird reflection error.
    
    - expose the user's home directory in the MiniYarnCluster, to allow
      the tests to see pip packages installed in the user's home.
    
    - tweak the python API tests so that the pytest cache does not pollute
      the source directory.
    
    - changed Travis to use Oracle's JDK, since the Open JDK path was
      mixing Java 8 and 9 and causing errors.
    
    - updated jacoco to latest stable.
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #111 from vanzin/LIVY-510.

 .travis.yml                                        |  6 +-
 README.md                                          |  6 +-
 .../apache/livy/test/framework/MiniCluster.scala   |  7 +-
 .../src/test/resources/test_python_api.py          |  3 +-
 .../test/scala/org/apache/livy/test/JobApiIT.scala | 16 +++--
 pom.xml                                            | 82 +++-------------------
 python-api/setup.cfg                               |  1 +
 .../org/apache/livy/repl/PythonInterpreter.scala   |  8 ++-
 8 files changed, 34 insertions(+), 95 deletions(-)

commit f99cc32df3e0f8cf5f2a3925df166d6b531f2b50
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Sep 11 11:11:57 2018 -0700

    [MINOR] Update version of ffi.
    
    The other updates were made when building the docs, more exactly when
    trying to fix "bundle install", since things wouldn't build with the
    existing dependencies.
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #108 from vanzin/ffi-update.

 docs/Gemfile.lock | 18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)

commit 1ef6d2a7b6b10325854d710ec6f27c9aaf33f50d
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Sep 11 13:36:46 2018 +0800

    [MINOR] Remove unneded repos from root pom.
    
    Also a minor indentation fix.
    
    Author: Marcelo Vanzin <vanzin@cloudera.com>
    
    Closes #109 from vanzin/pom-cleanup.

 pom.xml | 89 ++++++++++++++++++++++++++---------------------------------------
 1 file changed, 35 insertions(+), 54 deletions(-)

commit 7d8fa69f1804025d95971bcfb389951075dc6b98
Author: Marco Gaido <mgaido@hortonworks.com>
Date:   Mon Sep 10 11:42:10 2018 +0800

    [LIVY-491][LIVY-492][LIVY-493] Add Thriftserver module and implementation
    
    ## What changes were proposed in this pull request?
    
    The PR contains an implementation of a JDBC API for Livy server based on the Hive Thriftserver. The implementation is based on the version 3.0 of Hive Thriftserver.
    
    This initial PR contains the thriftserver module added to Livy and its implementation. It doesn't contain any binding for starting it, this will be added later.
    
    Some Hive classes have been ported here because they needed come modifications in order to works properly in Livy. Long term solution is to get of them all by re-implementing the needed parts in the Livy thriftserver itself, without relying on Hive code (other than the PRC interface) anymore. Those classes/changes can be summarized in three categories:
    
     1. Changes to make the Hive classes easy to extend: for instance, some visibility modifiers were changes (moving from `private` or `package private` to `protected` or `public`);
     2. Changes in order to reduce the dependencies on Hive modules/classes: for instance all the classes in the `operation` package were modified in order to get rid of the usage of `HiveSession` and the `HiveServer2` was changed in order not to use `CLIService`.
     3. The UGI management which is currently performed in Livy is definitely very different from the Hive one, this required changes to the `HiveAuthFactory` in order not to interfere with the existing codebase.
    
    ## How was this patch tested?
    
    added integration tests as UTs
    
    Author: Marco Gaido <mgaido@hortonworks.com>
    
    Closes #104 from mgaido91/LIVY-491.

 .travis.yml                                        |   9 +-
 checkstyle-suppressions.xml                        |   1 +
 pom.xml                                            |  38 +-
 .../src/main/scala/org/apache/livy/LivyConf.scala  |   4 +
 .../server/interactive/InteractiveSession.scala    |   2 +-
 thriftserver/server/pom.xml                        | 234 ++++++
 .../apache/hive/service/auth/HiveAuthFactory.java  | 320 ++++++++
 .../apache/hive/service/cli/ColumnBasedSet.java    | 205 +++++
 .../apache/hive/service/cli/JobProgressUpdate.java |  55 ++
 .../apache/hive/service/cli/OperationStatus.java   |  75 ++
 .../cli/operation/GetCatalogsOperation.java        |  80 ++
 .../cli/operation/GetTableTypesOperation.java      | 101 +++
 .../cli/operation/GetTypeInfoOperation.java        | 147 ++++
 .../cli/operation/HiveTableTypeMapping.java        |  61 ++
 .../service/cli/operation/MetadataOperation.java   | 133 ++++
 .../hive/service/cli/operation/Operation.java      | 290 +++++++
 .../service/cli/thrift/ThriftBinaryCLIService.java | 167 ++++
 .../hive/service/cli/thrift/ThriftCLIService.java  | 871 +++++++++++++++++++++
 .../service/cli/thrift/ThriftHttpCLIService.java   | 234 ++++++
 .../hive/service/cli/thrift/ThriftHttpServlet.java | 592 ++++++++++++++
 .../apache/hive/service/server/HiveServer2.java    | 316 ++++++++
 .../apache/livy/thriftserver/LivyCLIService.scala  | 432 ++++++++++
 .../LivyExecuteStatementOperation.scala            | 209 +++++
 .../livy/thriftserver/LivyOperationManager.scala   | 244 ++++++
 .../livy/thriftserver/LivyThriftServer.scala       | 122 +++
 .../thriftserver/LivyThriftSessionManager.scala    | 635 +++++++++++++++
 .../org/apache/livy/thriftserver/SessionInfo.scala |  90 +++
 .../apache/livy/thriftserver/SessionStates.scala   |  26 +
 .../apache/livy/thriftserver/rpc/RpcClient.scala   | 289 +++++++
 .../livy/thriftserver/serde/ColumnBuffer.scala     | 186 +++++
 .../serde/ColumnOrientedResultSet.scala            |  35 +
 .../apache/livy/thriftserver/types/DataType.scala  |  38 +
 .../livy/thriftserver/types/DataTypeUtils.scala    | 178 +++++
 .../livy/thriftserver/ThriftServerBaseTest.scala   | 124 +++
 .../livy/thriftserver/ThriftServerSuites.scala     | 149 ++++
 35 files changed, 6686 insertions(+), 6 deletions(-)

commit 8027ca708fdc3df9a5b08d2d33d0436018154bcc
Author: jerryshao <sshao@hortonworks.com>
Date:   Wed Aug 22 10:48:33 2018 +0800

    [LIVY-498][REPL] Fix Windows CRLF line ending issue in SparkR interpreter
    
    ## What changes were proposed in this pull request?
    
    If the issued query contains CRLF EOL, it will be failed to execute on *nix machine. This happens when submitting queries from Windows machine and executing on Linux machine.
    
    So here propose to convert statement to match system's EOL.
    
    ## How was this patch tested?
    
    New UT added.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #105 from jerryshao/LIVY-498.

 core/src/main/scala/org/apache/livy/EOLUtils.scala | 101 +++++++++++++++++++++
 .../test/scala/org/apache/livy/EOLUtilsSuite.scala |  57 ++++++++++++
 .../scala/org/apache/livy/test/InteractiveIT.scala |   2 +
 .../scala/org/apache/livy/repl/ReplDriver.scala    |   6 +-
 4 files changed, 163 insertions(+), 3 deletions(-)

commit 551dd5c27f05c35c75015c7dae9153e2a7f23089
Author: jerryshao <sshao@hortonworks.com>
Date:   Wed Jun 13 11:42:40 2018 +0800

    [HOTFIX] Fix Base64 not existed in jdk7 issue

 core/pom.xml                                    | 5 +++++
 core/src/main/scala/org/apache/livy/Utils.scala | 7 +++++--
 2 files changed, 10 insertions(+), 2 deletions(-)

commit 2196302731590def9a8f8a25628dd302eac06260
Author: jerryshao <sshao@hortonworks.com>
Date:   Tue Jun 12 20:06:16 2018 +0800

    [Security] Update to support pyspark and sparkr changes in Spark 2.3.1

 core/src/main/scala/org/apache/livy/Utils.scala    | 11 ++++--
 pom.xml                                            |  8 ++---
 repl/src/main/resources/fake_shell.py              | 23 +++++++++----
 .../org/apache/livy/repl/PythonInterpreter.scala   | 30 ++++++++++++++--
 .../org/apache/livy/repl/SparkRInterpreter.scala   | 40 ++++++++++++++++++----
 5 files changed, 91 insertions(+), 21 deletions(-)

commit fe0283f864b850973276f3c857908ccb2e6370f2
Author: jerryshao <sshao@hortonworks.com>
Date:   Tue Jun 12 20:52:52 2018 +0800

    [LIVY-477][BUILD] Upgrade Scala version to 2.11.12
    
    ## What changes were proposed in this pull request?
    
    Scala version below 2.11.12 has CVE (https://scala-lang.org/news/security-update-nov17.html), and Spark will also upgrade its supported version to 2.11.12.
    
    So here upgrading Livy's Scala version also.
    
    ## How was this patch tested?
    
    Existing tests.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #100 from jerryshao/LIVY-477.

 pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 02c5915f38a0cd19acfc8222233cba37d73393f9
Author: Ivan Dzikovsky <idzikovsky@protonmail.com>
Date:   Thu May 31 19:53:25 2018 +0800

    [LIVY-475] Support of Hadoop CredentialProvider API
    
    In this PR I've added following option to livy.conf:
    ```
    ```
    to allow to specify path to Hadoop Credential Provider, which than used in `WebServer.scala` to set Keystore password and Key password to JKS that used to enable SSL encryption.
    
    Also before trying to use Hadoop CredentialProvider API I'm checking if it available (as it was not available in Hadoop < 2.6) using the same [method that used in Oozie](https://github.com/apache/oozie/commit/6a731f9926158da38d1e3b518671ada95a544fe8#diff-800f95e605f21c5aaf5edef13039c9b9R124).
    
    To use this, you will need to generate Credential Provider containing "livy.keystore.password" and/or "livy.key-password" in the common way:
    ```bash
    hadoop credential create "livy.keystore.password" -value "keystore_secret" -provider jceks://hdfsnn1.example.com/my/path/livy_creds.jceks
    hadoop credential create "livy.key-password" -value "key_secret" -provider jceks://hdfsnn1.example.com/my/path/livy_creds.jceks
    ```
    
    Author: Ivan Dzikovsky <idzikovsky@protonmail.com>
    
    Closes #99 from idzikovsky/LIVY-475.
    
    Change-Id: Iae60550900067e61a37a6f74acb5e299005f3397

 conf/livy.conf.template                            |  5 +++++
 .../src/main/scala/org/apache/livy/LivyConf.scala  |  2 ++
 .../scala/org/apache/livy/server/WebServer.scala   | 24 ++++++++++++++++++----
 3 files changed, 27 insertions(+), 4 deletions(-)

commit 8b3fcbc8d52a6e6e1628cf139c0b0f49be797cec
Author: jerryshao <sshao@hortonworks.com>
Date:   Tue May 29 13:51:20 2018 +0800

    [LIVY-473][TEST] Minor refactor of integration test to remove legacy code
    
    Integration test has some legacy codes related to different cluster type (mini or real). Since now we already use real Spark package to do test and partially removed that code, we should refactor to remove all the unused legacy code.
    
    Existing tests.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #97 from jerryshao/LIVY-473.
    
    Change-Id: I7ca6c69884f7ed11a34cde5a6e1fc9bfcd141cbb

 .../org/apache/livy/test/framework/Cluster.scala   | 38 +-----------
 .../apache/livy/test/framework/MiniCluster.scala   | 22 +------
 .../livy/test/framework/MiniClusterUtils.scala     | 68 ++++++++++++++++++++++
 3 files changed, 71 insertions(+), 57 deletions(-)

commit ca4cad22968e1a2f88fa0ec262c1088812e3d251
Author: jerryshao <sshao@hortonworks.com>
Date:   Fri May 25 09:36:03 2018 +0800

    [LIVY-472][SERVER] Improve the logs for fail-to-create session
    
    ## What changes were proposed in this pull request?
    
    Livy currently doesn't give a very clear log about the fail-to-create session, it only says that session related app tag cannot be found in RM, but doesn't tell user how to search and get the true root cause. So here change the logs to make it more clear.
    
    ## How was this patch tested?
    
    Local verification.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #96 from jerryshao/LIVY-472.

 .../interactive/InteractiveSessionServlet.scala       |  2 +-
 .../scala/org/apache/livy/utils/SparkYarnApp.scala    | 19 +++++++++++--------
 2 files changed, 12 insertions(+), 9 deletions(-)

commit 6f1756cffbde5c58075dc2d2dc8a7a8ea51516fe
Author: M Wcislo <mwcislo999@gmail.com>
Date:   Tue May 22 19:23:22 2018 -0700

    [LIVY-468] Reverse proxy support
    
    ## What changes were proposed in this pull request?
    Implements reverse proxy support, by adding basePath/URL concept, configurable using livy.conf
    
    Resolves: [LIVY-468](https://issues.apache.org/jira/browse/LIVY-468)
    
    ## How was this patch tested?
    Tested manually with Kong 0.11 and Spark 2.1.0 in cluster mode (using spark dispatcher).
    
    Author: M Wcislo <mwcislo999@gmail.com>
    
    Closes #93 from m-wcislo/LIVY-468_reverse_proxy_support.

 conf/livy.conf.template                            |  4 ++
 .../livy/server/ui/static/js/all-sessions.js       |  8 ++--
 .../org/apache/livy/server/ui/static/js/livy-ui.js | 15 +++++++-
 .../apache/livy/server/ui/static/js/session-log.js |  2 +-
 .../org/apache/livy/server/ui/static/js/session.js |  6 +--
 .../src/main/scala/org/apache/livy/LivyConf.scala  |  1 +
 .../scala/org/apache/livy/server/LivyServer.scala  |  7 ++--
 .../org/apache/livy/server/ui/UIServlet.scala      | 43 +++++++++++++---------
 8 files changed, 56 insertions(+), 30 deletions(-)

commit 551cc53095f0a4b5382602ba0c296f8cf8932e44
Author: Alexey Romanenko <aromanenko.dev@gmail.com>
Date:   Mon May 21 09:25:04 2018 +0800

    [LIVY-452] Differentiate FAILED and KILLED states
    
    Currently, it's not possible to distinguish between two states - SparkApp.State.KILLED and SparkApp.State.FAILED. In both cases the session state will be SessionState.Dead(). This patch adds new SessionState.Killed() which will be used when job was actually killed by user.
    
    https://issues.apache.org/jira/browse/LIVY-452
    
    - Corresponding unit test was adjusted
    - Tested manually on YARN cluster with `livy.spark.deploy-mode=cluster`
    
    Author: Alexey Romanenko <aromanenko.dev@gmail.com>
    
    Closes #92 from aromanenko-dev/LIVY-452-SessionState-Killed.
    
    Change-Id: Ia18808d7954e20653e152d8bf6748f43c2707b18

 .../main/scala/org/apache/livy/sessions/SessionState.scala  |  4 ++++
 docs/rest-api.md                                            |  4 ++++
 .../org/apache/livy/test/framework/LivyRestClient.scala     |  5 +++++
 .../src/test/scala/org/apache/livy/test/BatchIT.scala       |  2 +-
 .../scala/org/apache/livy/server/batch/BatchSession.scala   |  4 ++--
 .../apache/livy/server/interactive/InteractiveSession.scala |  3 ++-
 .../src/main/scala/org/apache/livy/utils/SparkProcApp.scala | 13 +++++++++++--
 7 files changed, 29 insertions(+), 6 deletions(-)

commit e3f45a057cc45bca5bceb04af8ea9218b35fa621
Author: jerryshao <sshao@hortonworks.com>
Date:   Thu May 3 14:37:07 2018 +0800

    [LIVY-466][RSC] Fix RSCDriver exception during RPC shutdown
    
    ## What changes were proposed in this pull request?
    
    During RSCDriver's shutdown, it will first shutdown RPC server, and then all the RPC clients. When RPC client is closed, it will register a timeout to avoid orphaned RSCDriver, but this is not necessary during RSCDriver's shutdown, so here fixing this issue. The details can be seen in [JIRA](https://issues.apache.org/jira/browse/LIVY-466).
    
    ## How was this patch tested?
    
    Local verification.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #90 from jerryshao/LIVY-466.

 rsc/src/main/java/org/apache/livy/rsc/driver/RSCDriver.java | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 9d381bdf04704b596006f51de56dc3827054f96c
Author: jerryshao <sshao@hortonworks.com>
Date:   Thu Apr 26 09:36:47 2018 +0800

    [LIVY-460][SERVER] Remove misleading log prefix
    
    ## What changes were proposed in this pull request?
    
    Removing misleading log prefix "stdout: " for the captured stdout/stderr of spark-submit process
    
    ## How was this patch tested?
    
    N/A
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #89 from jerryshao/LIVY-460.

 server/src/main/scala/org/apache/livy/utils/LineBufferedStream.scala | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 71c3feed9cbafef40805975ea7ce6fa2498bab72
Author: jerryshao <sshao@hortonworks.com>
Date:   Wed Apr 18 16:51:36 2018 +0800

    [LIVY-458][BUILD] Upgrade jackson version to 2.9.5
    
    ## What changes were proposed in this pull request?
    
    Due to several security issues of jackson databind module (CVE-2018-5968, CVE-2017-17485, CVE-2018-7489), here propose to upgrade jackson version 2.9.5.
    
    ## How was this patch tested?
    
    Existing UTs.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #87 from jerryshao/LIVY-458.

 pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cd8b11261811abb4fe3afe0f19540cd4bdaeb5f7
Author: jerryshao <sshao@hortonworks.com>
Date:   Wed Apr 18 10:29:34 2018 +0800

    [LIVY-457][REPL] Fix SQLContext is not initialized correctly issue
    
    ## What changes were proposed in this pull request?
    
    The signature of SQLContext's constructor is changed in Spark2, but we're still using the Spark1's signature, which will throw an exception when using this object.
    
    ## How was this patch tested?
    
    UT and local verification.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #86 from jerryshao/LIVY-457.

 .travis.yml                                                        | 5 ++---
 .../src/test/scala/org/apache/livy/test/InteractiveIT.scala        | 4 ++++
 repl/src/main/resources/fake_shell.py                              | 7 +++++--
 3 files changed, 11 insertions(+), 5 deletions(-)

commit 7e4bb3bd6888742e43aed7396ed490d343a063a2
Author: jerryshao <sshao@hortonworks.com>
Date:   Wed Apr 11 10:24:20 2018 +0800

    [LIVY-455][REPL] Fix json4s doesn't support java.math.BigDecimal issue
    
    ## What changes were proposed in this pull request?
    
    Livy's SQLInterpreter will throw exception when rows contain java.math.BigDecimal data. This is because current version of json4s doesn't treat java.math.BigDecimal type as primitive type. On the contrary, json4s supports Scala BigDecimal as primitive type. So the fix is to convert java BigDecimal to Scala BigDecimal.
    
    ## How was this patch tested?
    
    Unit test is added.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #85 from jerryshao/LIVY-455.

 .../org/apache/livy/repl/SQLInterpreter.scala      | 10 +++++-
 .../org/apache/livy/repl/SQLInterpreterSpec.scala  | 36 ++++++++++++++++++++++
 2 files changed, 45 insertions(+), 1 deletion(-)

commit 06cfa7bce2cde205895be31fa83adc006e7d4ec2
Author: Wieland Hoffmann <WHoffman@de.ibm.com>
Date:   Mon Apr 9 13:47:36 2018 +0800

    [MINOR] Fix travis builds
    
    Each individual commit has a more detailed description of what's being changed and why.
    
    At the moment, Travis builds don't work:
    
    * https://travis-ci.org/mineo/incubator-livy/builds/359324523 - the `sudo pip3 install --upgrade pip "setuptools < 36"` command fails with `sudo: pip3: command not found`.
    * fixing that, the `failing the org.apache.rat:apache-rat-plugin:0.12:check` maven goal fails because it sees `.pytest_cache` folders that it doesn't know about (https://github.com/pytest-dev/pytest/issues/3286, failure in https://travis-ci.org/mineo/incubator-livy/jobs/359326261, check the raw log).
    
    This pull request works around the pip3 failures by just using pip as a callable module (possible since Python 3.4) and adding `.pytest_cache` to raw-excludes, as well as showing the contents of `rat.txt` files in the `after_failure` step. I concede that the pip change is more of a workaround, but I don't know how else to fix it and unblock testing.
    
    Running the tests on travis.
    
    Please review https://livy.incubator.apache.org/community/ before opening a pull request.
    
    Author: Wieland Hoffmann <WHoffman@de.ibm.com>
    
    Closes #84 from mineo/rat.

 .rat-excludes | 1 +
 .travis.yml   | 6 +++---
 2 files changed, 4 insertions(+), 3 deletions(-)

commit 10373b6e2edc1fa7af6ec363491eb25ff48d730f
Author: jerryshao <sshao@hortonworks.com>
Date:   Mon Mar 12 10:37:28 2018 +0800

    [LIVY-446][BUILD] Livy to Support Spark 2.3
    
    ## What changes were proposed in this pull request?
    
    This PR aims to support Spark 2.3 in Livy, several changes due to internal changes of Spark 2.3
    
    ## How was this patch tested?
    
    Existing UTs.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #81 from jerryshao/LIVY-446.

 .travis.yml                                        |  14 ++-
 .../test/scala/org/apache/livy/test/JobApiIT.scala |   2 +-
 pom.xml                                            | 110 ++++++++++++++++-----
 repl/scala-2.10/pom.xml                            |   2 +
 repl/scala-2.11/pom.xml                            |   2 +
 .../org/apache/livy/repl/PythonInterpreter.scala   |   8 +-
 .../org/apache/livy/repl/SparkRInterpreter.scala   |   4 +-
 .../java/org/apache/livy/rsc/TestSparkClient.java  |   1 +
 .../apache/livy/rsc/rpc/TestKryoMessageCodec.java  |   2 +-
 .../test/java/org/apache/livy/rsc/rpc/TestRpc.java |   4 +-
 scala-api/pom.xml                                  |  11 +++
 scala-api/scala-2.10/pom.xml                       |   2 +
 scala-api/scala-2.11/pom.xml                       |   2 +
 .../org/apache/livy/scalaapi/ScalaClientTest.scala |   1 +
 .../org/apache/livy/utils/LivySparkUtils.scala     |   4 +-
 .../interactive/InteractiveSessionSpec.scala       |   2 +-
 .../org/apache/livy/test/jobs/SQLGetTweets.java    |   2 +-
 17 files changed, 133 insertions(+), 40 deletions(-)

commit b9c2f10194f32532009690fe89a11959c4c083c0
Author: Meisam <meisam@Hachinohe.local>
Date:   Thu Mar 8 08:56:01 2018 +0800

    [LIVY-448] Assembly format is duplicated in pom.xml and assembly.xml
    
    ## What changes were proposed in this pull request?
    The assembly format for Livy is specified twice:
    1 in `assembly/pom.xml`:
    ```xml
                  <formats>
                    <format>${assembly.format}</format>
                  </formats>
    ```
    2 in `assembly/assembly.xml`
    ```
                  <formats>
                    <format>zip</format>
                  </formats>
    ```
    But only one is enough. Also in `assembly/assembly.xml`, the format is hard coded as zip, but is should be based
    
    ## How was this patch tested?
    All the unit tests and ITs pass as usual. Moreover, I tested that  `targz` profile builds a tar.gz archive and the default profile builds a zip archive.
    
    For example,
    this builds the zip archive:
    ```
    mvn -am -pl assembly package
    ```
    And this builds the tar.gz artifact:
    ```
    mvn -Ptargz -am -pl assembly package
    ```
    
    Task-url: https://issues.apache.org/jira/browse/LIVY-448
    
    Author: Meisam <meisam@Hachinohe.local>
    
    Closes #83 from meisam/LIVY-448.

 assembly/assembly.xml | 2 +-
 assembly/pom.xml      | 3 ---
 2 files changed, 1 insertion(+), 4 deletions(-)

commit 6d2ffdd54273e7d4a75bde38527f75acc14d6ef3
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Wed Mar 7 12:29:06 2018 -0800

    [MINOR] Addressed Docs dependency security vulnerability followup
    
    Followup to 26428c56f20ba5ea608038ed8c2e11d8f04665d4
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #82 from ajbozarth/gem.

 docs/Gemfile.lock | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit ec8dffdaa2a2c2d2f348bd6fd5d583e812480907
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Fri Feb 9 14:10:10 2018 -0800

    [MINOR][BUILD] Improve release-build script
    
    Improved release-build.sh based on the 0.5.0-incubating release process.
    
    Includes:
    
    - Instead of forcing user to set env it prompts for required info, this also protects password inout
    - Creates temp dir to hold files created in release process and makes sure git ignores it
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #76 from ajbozarth/script.

 .gitignore           |  1 +
 dev/release-build.sh | 60 ++++++++++++++++++++++++++++++++++++----------------
 2 files changed, 43 insertions(+), 18 deletions(-)

commit f47b742cc4afd61e51d5fcba481ce28a55f307c1
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Tue Feb 6 14:09:04 2018 -0800

    [LIVY-440] Update copyright year to 2018
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #79 from ajbozarth/440.

 NOTICE | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 26428c56f20ba5ea608038ed8c2e11d8f04665d4
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Thu Jan 25 14:46:35 2018 -0800

    [MINOR] Addressed Docs dependency security vulnerability
    
    Addressed issue raised on mailing list:
    https://www.mail-archive.com/devlivy.incubator.apache.org/msg00295.html
    
    More info on the vulnerability:
    https://snyk.io/blog/nokogiri-xxe-vulnerabilities/
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #75 from ajbozarth/fix.

 docs/Gemfile.lock | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 99c385d6436120e3767393ba76dcaa982d7b9929
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Tue Jan 23 13:10:26 2018 -0800

    [LIVY-434][BUILD] Update master to version 0.6.0-incubating-SNAPSHOT

 api/pom.xml                  | 4 ++--
 assembly/pom.xml             | 4 ++--
 client-common/pom.xml        | 4 ++--
 client-http/pom.xml          | 4 ++--
 core/pom.xml                 | 4 ++--
 core/scala-2.10/pom.xml      | 4 ++--
 core/scala-2.11/pom.xml      | 4 ++--
 coverage/pom.xml             | 4 ++--
 docs/_data/project.yml       | 2 +-
 docs/programmatic-api.md     | 2 +-
 examples/pom.xml             | 4 ++--
 integration-test/pom.xml     | 4 ++--
 pom.xml                      | 2 +-
 python-api/pom.xml           | 4 ++--
 python-api/setup.py          | 2 +-
 repl/pom.xml                 | 4 ++--
 repl/scala-2.10/pom.xml      | 4 ++--
 repl/scala-2.11/pom.xml      | 4 ++--
 rsc/pom.xml                  | 4 ++--
 scala-api/pom.xml            | 4 ++--
 scala-api/scala-2.10/pom.xml | 4 ++--
 scala-api/scala-2.11/pom.xml | 4 ++--
 scala/pom.xml                | 4 ++--
 server/pom.xml               | 4 ++--
 test-lib/pom.xml             | 4 ++--
 25 files changed, 46 insertions(+), 46 deletions(-)

commit fc22da91948bbf3d0629b4f74722e21a8687288d
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Tue Jan 23 12:21:27 2018 -0800

    [LIVY-141][LIVY-175][DOCS] Update javadocs and scaladocs and include in Docs build
    
    [LIVY-141](https://issues.apache.org/jira/browse/LIVY-141) [LIVY-175](https://issues.apache.org/jira/browse/LIVY-175)
    
    Adding javadocs to Livy:
    - Add ability to build Livy javadocs
    - Update current javadoc comments to address build errors and warnings
    - Add more javadoc comments to fully describe API
    - Include public API javadocs and scaladocs in Livy Documentation
    
    Noted Remaining Issues:
    - Since only the public javadocs are build with the Livy Docs not all javadoc warnings in other modules have been addressed.
    - There are still some warnings in the Scala API scaladocs build due to the docs not linking to an external lib for referenced scala lib classes, this does not break the build in any way.
    - Scaladocs is not supported for Livy as a whole. With the update to Scala 2.11 many scaladoc warnings were upgraded to error and Livy fundamentally can't fix them.
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #38 from ajbozarth/javadoc.

 .gitignore                                         |  1 +
 api/src/main/java/org/apache/livy/JobContext.java  | 47 ++++++++++++----
 api/src/main/java/org/apache/livy/JobHandle.java   |  4 ++
 api/src/main/java/org/apache/livy/LivyClient.java  |  9 ++--
 .../java/org/apache/livy/LivyClientBuilder.java    |  6 +++
 .../java/org/apache/livy/LivyClientFactory.java    |  2 +
 .../main/java/org/apache/livy/package-info.java    | 21 ++++++++
 .../livy/client/common/AbstractJobHandle.java      |  5 +-
 .../org/apache/livy/client/common/ClientConf.java  | 28 +++++++---
 docs/README.md                                     | 17 +++++-
 docs/_data/navigation.yml                          |  4 ++
 docs/_plugins/build-apis.rb                        | 62 ++++++++++++++++++++++
 pom.xml                                            | 31 +++++++++++
 .../java/org/apache/livy/rsc/driver/RSCDriver.java |  2 +
 .../java/org/apache/livy/rsc/package-info.java     | 21 ++++++++
 rsc/src/main/java/org/apache/livy/rsc/rpc/Rpc.java |  3 ++
 .../org/apache/livy/rsc/rpc/RpcDispatcher.java     | 11 ++--
 .../java/org/apache/livy/rsc/rpc/RpcServer.java    |  4 +-
 18 files changed, 250 insertions(+), 28 deletions(-)

commit 3440857a1f844f607215475d353e749b62819cac
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Wed Jan 17 16:27:04 2018 -0800

    [LIVY-104][CORE] Update Livy build to Scala 2.11
    
    [LIVY-104](https://issues.apache.org/jira/browse/LIVY-104)
    
    Livy currently builds using Scala 2.10 which has been EOL for a couple years. This update switches the build to use 2.11 instead.
    This does not drop Livy support for Scala 2.10, it only updates the version used to build Livy itself.
    We are holding off updating to Scala 2.12 since Livy still supports Spark 1.6, which doesn't support 2.12 and such an update would break UTs for 1.6, any update to 2.12 will have to wait until Spark 1.6 support is dropped.
    
    This update also addresses any new deprecation warning raised in the update as well as updates various ITs to pass.
    
    This locally passes both UTs and ITs build withe all supported versions of Spark.
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #72 from ajbozarth/scala211.

 .../org/apache/livy/test/framework/BaseIntegrationTestSuite.scala  | 2 +-
 .../src/test/scala/org/apache/livy/test/InteractiveIT.scala        | 7 +++++--
 .../src/test/scala/org/apache/livy/test/JobApiIT.scala             | 4 ++--
 pom.xml                                                            | 4 ++--
 server/src/main/scala/org/apache/livy/server/JsonServlet.scala     | 2 +-
 5 files changed, 11 insertions(+), 8 deletions(-)

commit 85e8fba3ce5d0e180655fd9ee239cb320d550780
Author: Artem Plotnikov <aplotnikov@joom.com>
Date:   Thu Jan 4 10:22:40 2018 +0800

    [LIVY-429] preserve url fragment in spark.yarn.dist.archives
    
    ## What changes were proposed in this pull request?
    
    Preserve url fragment identifier in spark.yarn.dist.archives setting when there is no schema specified. Current code truncates url fragment, as a result Spark just copies archives to job local dir without extracting it.
    
    ## How was this patch tested?
    
    Added case to existing unit test
    
    Author: Artem Plotnikov <aplotnikov@joom.com>
    
    Closes #71 from broartem/LIVY-429.

 server/src/main/scala/org/apache/livy/sessions/Session.scala     | 7 +++++--
 server/src/test/scala/org/apache/livy/sessions/SessionSpec.scala | 4 ++--
 2 files changed, 7 insertions(+), 4 deletions(-)

commit e54318314c59580d40eb6944ed780d8762e97cf6
Author: jerryshao <sshao@hortonworks.com>
Date:   Tue Dec 5 09:29:57 2017 +0800

    [LIVY-19][REPL] Add SQL interpreter for Livy interactive session
    
    ## What changes were proposed in this pull request?
    
    With the requirement to support executing SQL query in Livy interactive session. Here propose to add this new interpreter for SQL specific usage.
    
    This interpreter will honor a new code kind "SQL", and pass query to SparkSession/SQLContext to get executed. The returned format is json format with schema included, each type is properly mapped a related json type.
    
    ## How was this patch tested?
    
    Add new UTs and ITs.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #68 from jerryshao/LIVY-19.

 core/src/main/scala/org/apache/livy/Logging.scala  |   4 +
 .../main/scala/org/apache/livy/sessions/Kind.scala |   3 +
 docs/rest-api.md                                   |  15 ++-
 .../livy/test/framework/LivyRestClient.scala       |  15 ++-
 .../scala/org/apache/livy/test/InteractiveIT.scala |  13 +++
 pom.xml                                            |   3 +
 .../org/apache/livy/repl/SQLInterpreter.scala      | 118 ++++++++++++++++++++
 .../main/scala/org/apache/livy/repl/Session.scala  |  20 ++--
 .../org/apache/livy/repl/SQLInterpreterSpec.scala  | 120 +++++++++++++++++++++
 rsc/src/main/java/org/apache/livy/rsc/RSCConf.java |   7 +-
 10 files changed, 299 insertions(+), 19 deletions(-)

commit 1efc801806619d7741f453eff07afac33e841d7a
Author: jerryshao <sshao@hortonworks.com>
Date:   Wed Nov 29 12:49:39 2017 +0800

    [LIVY-415][CORE][FOLLOWUP] Fix static object creation issue for SessionState
    
    ## What changes were proposed in this pull request?
    
    In LIVY-415, we changed `SessionState` to static object instead of case class. This is OK for `SessionState`, but for `FinishedSessionState`, it requires `time` field to be set during object creation. Using static object will never reflect the actual `time` when object is created. So here propose to fix it.
    
    CC aa8y please take a review, this is introduced in your changes.
    
    ## How was this patch tested?
    
    Existing tests.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #67 from jerryshao/LIVY-415-followup.

 .../scala/org/apache/livy/sessions/SessionState.scala     | 15 ++++++---------
 .../org/apache/livy/test/framework/LivyRestClient.scala   |  6 +++---
 repl/src/main/scala/org/apache/livy/repl/Session.scala    |  4 ++--
 .../scala/org/apache/livy/server/batch/BatchSession.scala |  4 ++--
 .../livy/server/interactive/InteractiveSession.scala      |  8 ++++----
 .../org/apache/livy/sessions/SessionManagerSpec.scala     |  6 +++---
 6 files changed, 20 insertions(+), 23 deletions(-)

commit cd777e209ae26d9f66814fed6565b029da3b2479
Author: jerryshao <sshao@hortonworks.com>
Date:   Mon Nov 27 16:25:52 2017 +0800

    [LIVY-399][TEST] Enable real test for PySpark and SparkR interpreters
    
    Currently because we lack pyspark and sparkr dependencies in our environment, so we neglect the pyspark and sparkr integration tests, here propose a way to enable these integration tests. The solution is mainly borrowed from Zeppelin - to download Spark binary before integration tests, so that we will have a complete Spark environment to do the test. Because of this several modules like minicluster-dependencies are not required, so here removed such modules.
    
    Besides, we proposed to remove real test implementations, since we never used real test before and it mainly did what scripts should do with Scala code, which makes it hard to maintain. Also for now mini-cluster test is quite close to real test, so it is not so useful to still keep real test.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #49 from jerryshao/LIVY-399.

 .travis.yml                                        |  15 +-
 dev/travis-upload-logs.sh                          |  39 ---
 integration-test/minicluster-dependencies/pom.xml  | 135 ----------
 .../minicluster-dependencies/scala-2.10/pom.xml    |  36 ---
 .../minicluster-dependencies/scala-2.11/pom.xml    |  36 ---
 .../src/main/resources/build.marker                |   0
 integration-test/pom.xml                           |  97 ++------
 .../test/framework/BaseIntegrationTestSuite.scala  |  18 --
 .../org/apache/livy/test/framework/Cluster.scala   |   3 -
 .../apache/livy/test/framework/MiniCluster.scala   |  41 +--
 .../apache/livy/test/framework/RealCluster.scala   | 277 ---------------------
 .../src/test/resources/test_python_api.py          |   8 +-
 .../test/scala/org/apache/livy/test/BatchIT.scala  |   6 +-
 .../scala/org/apache/livy/test/InteractiveIT.scala |   7 +-
 .../test/scala/org/apache/livy/test/JobApiIT.scala |  13 +-
 pom.xml                                            |  28 ++-
 .../org/apache/livy/repl/PythonInterpreter.scala   |   2 +-
 17 files changed, 76 insertions(+), 685 deletions(-)

commit f893d19918beb41bd82169f1c3da88a1fb9e934d
Author: jerryshao <sshao@hortonworks.com>
Date:   Fri Nov 24 13:31:38 2017 +0800

    [LIVY-299][REPL] Output multiple lines in one statement block
    
    ## What changes were proposed in this pull request?
    
    Livy Scala Interpreter doesn't support output multiple lines in one code block, this will miss some outputs, so here change the logic to support it.
    
    ## How was this patch tested?
    
    Add new unit tests.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #66 from jerryshao/LIVY-299.

 .../scala/org/apache/livy/test/InteractiveIT.scala | 22 ++++++-------
 .../livy/repl/AbstractSparkInterpreter.scala       | 32 ++++++++++++++++--
 .../apache/livy/repl/PythonInterpreterSpec.scala   | 11 +++++++
 .../apache/livy/repl/ScalaInterpreterSpec.scala    | 38 ++++++++++++++--------
 .../org/apache/livy/repl/SharedSessionSpec.scala   |  4 +--
 .../apache/livy/repl/SparkRInterpreterSpec.scala   | 11 +++++++
 .../org/apache/livy/repl/SparkSessionSpec.scala    | 12 +++----
 .../interactive/InteractiveSessionSpec.scala       |  2 +-
 8 files changed, 95 insertions(+), 37 deletions(-)

commit 1f59e102b65c1c18775fe9d286d22b9228497807
Author: Keiji Yoshida <kjmrknsn@gmail.com>
Date:   Thu Nov 23 13:19:53 2017 +0800

    [LIVY-416] Upgrade the version of Jackson from 2.4.4 to 2.9.2
    
    ## What changes were proposed in this pull request?
    
    https://issues.apache.org/jira/browse/LIVY-416
    
    `com.fasterxml.jackson.core.JsonGenerationException` is sometimes thrown. The full stack trace is show on [JsonGenerationException.txt](https://github.com/apache/incubator-livy/files/1482566/JsonGenerationException.txt).
    
    This is because of the Jackson's bug (https://github.com/FasterXML/jackson-core/issues/307) which was fixed at Jackson 2.7.7.
    
    To fix this issue, the version of Jackson should be updated from 2.4.4 to the latest one (2.9.2).
    
    In addition, `com.google.guava:guava:15.0` was added to the dependencies because it was removed from the dependencies of `com.fasterxml.jackson.module:jackson-module-scala_{2.10,2.11}:2.9.2`.
    
    * [com.fasterxml.jackson.module:jackson-module-scala_2.10:2.4.4](https://mvnrepository.com/artifact/com.fasterxml.jackson.module/jackson-module-scala_2.10/2.4.4)
    * [com.fasterxml.jackson.module:jackson-module-scala_2.11:2.4.4](https://mvnrepository.com/artifact/com.fasterxml.jackson.module/jackson-module-scala_2.11/2.4.4)
    * [com.fasterxml.jackson.module:jackson-module-scala_2.10:2.9.2](https://mvnrepository.com/artifact/com.fasterxml.jackson.module/jackson-module-scala_2.10/2.9.2)
    * [com.fasterxml.jackson.module:jackson-module-scala_2.11:2.9.2](https://mvnrepository.com/artifact/com.fasterxml.jackson.module/jackson-module-scala_2.11/2.9.2)
    
    ## How was this patch tested?
    By executing `mvn clean package`.
    
    Author: Keiji Yoshida <kjmrknsn@gmail.com>
    
    Closes #64 from kjmrknsn/LIVY-416.

 pom.xml        | 9 ++++++++-
 server/pom.xml | 5 +++++
 2 files changed, 13 insertions(+), 1 deletion(-)

commit 64d71aa757a93518427f315e908dcf54373948b2
Author: Jeff Zhang <zjffdu@gmail.com>
Date:   Thu Nov 23 10:14:15 2017 +0800

    [LIVY-418] Respect spark.pyspark.python for PythonInterpreter
    
    ## What changes were proposed in this pull request?
    
    `spark.pyspark.python` is introduced in spark 2.1, livy also need to update its code for choosing python version
    
    ## How was this patch tested?
    
    Manually verified.
    
    Author: Jeff Zhang <zjffdu@gmail.com>
    
    Closes #65 from zjffdu/LIVY-418.

 repl/src/main/scala/org/apache/livy/repl/PythonInterpreter.scala | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 54715447e0865483826dec6ad1db8a4187983189
Author: Arun Allamsetty <arun.allamsetty@gmail.com>
Date:   Wed Nov 15 11:42:45 2017 +0800

    [LIVY-415] Use objects and abstract classes in for Kind and SessionState.
    
    ## What changes were proposed in this pull request?
    
    - Use a singleton (object) rather than having a case class and creating an object of only one type whenever we need an object of the type. Using an object helps with code efficiency and readability.
    - Use abstract classes to set up methods with default definitions to follow the DRY principles.
    
    ## How was this patch tested?
    
    All the existing tests were modified to use the new changes. The changes were then tested on Travis with existing settings to make sure it's compatible with the the upstream repository.
    
    Please review https://livy.incubator.apache.org/community/ before opening a pull request.
    
    I have read through the page and felt like this change does not require a JIRA. If you feel otherwise, I can create a JIRA and then attach it to the PR.
    
    Author: Arun Allamsetty <arun.allamsetty@gmail.com>
    
    Closes #62 from aa8y/singleton.

 .../apache/livy/client/http/HttpClientSpec.scala   |   4 +-
 .../main/scala/org/apache/livy/sessions/Kind.scala |  28 +++---
 .../org/apache/livy/sessions/SessionState.scala    | 106 +++++++--------------
 .../livy/test/framework/LivyRestClient.scala       |  10 +-
 .../test/scala/org/apache/livy/test/BatchIT.scala  |   4 +-
 .../scala/org/apache/livy/test/InteractiveIT.scala |  20 ++--
 .../scala/org/apache/livy/repl/ReplDriver.scala    |   8 +-
 .../main/scala/org/apache/livy/repl/Session.scala  |  30 +++---
 .../org/apache/livy/repl/BaseSessionSpec.scala     |   6 +-
 .../org/apache/livy/repl/PythonSessionSpec.scala   |   2 +-
 .../org/apache/livy/repl/ReplDriverSuite.scala     |   2 +-
 .../org/apache/livy/repl/SharedSessionSpec.scala   |   2 +-
 .../org/apache/livy/repl/SparkRSessionSpec.scala   |   2 +-
 .../org/apache/livy/repl/SparkSessionSpec.scala    |   2 +-
 .../apache/livy/server/batch/BatchSession.scala    |  10 +-
 .../interactive/CreateInteractiveRequest.scala     |   2 +-
 .../server/interactive/InteractiveSession.scala    |  28 +++---
 .../apache/livy/server/SessionServletSpec.scala    |   2 +-
 .../livy/server/batch/BatchServletSpec.scala       |   2 +-
 .../livy/server/batch/BatchSessionSpec.scala       |   2 +-
 .../interactive/BaseInteractiveServletSpec.scala   |   2 +-
 .../interactive/CreateInteractiveRequestSpec.scala |   2 +-
 .../InteractiveSessionServletSpec.scala            |   8 +-
 .../interactive/InteractiveSessionSpec.scala       |  22 ++---
 .../livy/server/interactive/JobApiSpec.scala       |   2 +-
 .../org/apache/livy/sessions/MockSession.scala     |   2 +-
 .../apache/livy/sessions/SessionManagerSpec.scala  |  18 ++--
 27 files changed, 142 insertions(+), 186 deletions(-)

commit ef5dccbb0d15797a4bc009b78c88e3b40ff79b7d
Author: 沈洪 <yuling.sh@alipay.com>
Date:   Tue Nov 7 16:29:32 2017 +0800

    [LIVY-412][SERVER] Reject create session request if too more sessions are creating.
    
    ## What changes were proposed in this pull request?
    
    In our cluster, livy server run with spark yarn cluster mode, when createSession request is too frequently, livyServer will start too more spark-submit child process, it will cause the machine oom.
    
    Reject the create session request when there are too many spark-submit child process.
    
    ## How was this patch tested?
    
    Add two testcase, test create interactive and batch session when reach the max creating sessions, the request should failed.
    
    Please review https://livy.incubator.apache.org/community/ before opening a pull request.
    
    Author: 沈洪 <yuling.sh@alipay.com>
    
    Closes #58 from shenh062326/livy-412.

 .../java/org/apache/livy/rsc/ContextLauncher.java  |  3 +++
 .../java/org/apache/livy/rsc/RSCClientFactory.java |  6 +++++
 .../src/main/scala/org/apache/livy/LivyConf.scala  |  2 ++
 .../org/apache/livy/server/SessionServlet.scala    | 28 +++++++++++++++-------
 .../apache/livy/server/batch/BatchSession.scala    | 22 ++++++++++++++++-
 .../livy/server/batch/BatchServletSpec.scala       | 27 +++++++++++++++++++--
 .../InteractiveSessionServletSpec.scala            | 27 ++++++++++++++++++++-
 7 files changed, 103 insertions(+), 12 deletions(-)

commit 5e0201f60161e99aea965e1e56b1f2a331600c26
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Tue Oct 31 11:23:27 2017 -0700

    [MINOR] Missed Doc update during 0.4 release
    
    We missed a note in the Docs referencing a pre-apache release workaround
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #61 from ajbozarth/patch-1.

 docs/programmatic-api.md | 3 ---
 1 file changed, 3 deletions(-)

commit 80571b9e4961c0cb8487e100d376307e7de9e30a
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Thu Oct 26 14:30:44 2017 -0700

    [MINOR] Doc Typos
    
    Fixed a some typos in the REST API Documentation
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #59 from ajbozarth/patch-1.

 docs/rest-api.md | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 20cbdd57e48a37bdff3e7a383d6e94108105a274
Author: jerryshao <sshao@hortonworks.com>
Date:   Thu Oct 26 11:41:34 2017 +0800

    [MINOR][HOTFIX] Fix python code style issue
    
    ## What changes were proposed in this pull request?
    
    Travis complains "E722 do not use bare except" in python-client style check. Minor changes to fix it.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #60 from jerryshao/python-style-fix.

 python-api/src/main/python/livy/client.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bef5b4f6d8ac931613027cf50cbc44be3be2e107
Author: jerryshao <sshao@hortonworks.com>
Date:   Fri Oct 20 14:58:22 2017 +0800

    [LIVY-245][RSC] Add support shared variables across Jobs
    
    Currently we cannot share variables across different Jobs in Livy, so here propose to add a cache layer in RSC to store shared objects. This cache followed LRU, the least not used will be removed when exceeding limits.
    
    This work is based on alex-the-man 's work.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #19 from jerryshao/LIVY-245.

 api/src/main/java/org/apache/livy/JobContext.java  | 13 ++++-
 .../test/scala/org/apache/livy/test/JobApiIT.scala | 11 ++++
 repl/src/main/resources/fake_shell.py              | 28 ++++++++++
 .../main/scala/org/apache/livy/repl/Session.scala  |  2 +-
 .../scala/org/apache/livy/repl/SessionSpec.scala   |  2 +-
 rsc/src/main/java/org/apache/livy/rsc/RSCConf.java |  7 ++-
 .../org/apache/livy/rsc/driver/JobContextImpl.java | 51 +++++++++++++++++
 .../java/org/apache/livy/rsc/TestSparkClient.java  | 64 +++++++++++++++++++---
 .../org/apache/livy/scalaapi/ScalaJobContext.scala |  9 +++
 .../livy/test/jobs/SharedVariableCounter.java      | 48 ++++++++++++++++
 .../test/jobs/ScalaSharedVariableCounter.scala     | 38 +++++++++++++
 11 files changed, 258 insertions(+), 15 deletions(-)

commit 1bbefe601641aa4db74dbed1f7faf458b9a70a63
Author: jerryshao <sshao@hortonworks.com>
Date:   Fri Oct 20 11:10:43 2017 +0800

    [LIVY-411][REPL] Fix session cannot start issue when python or r package is missing
    
    ## What changes were proposed in this pull request?
    
    https://issues.apache.org/jira/browse/LIVY-411
    
    In Livy 0.5.0, we supported multiple languages in one session, but it requires that all the packages should be available before session creation, such as R package and Python package, otherwise session will be failed to create. However, in some cases python or R package may be missing in Spark distro, this will make Livy fail to creation interactive session.
    
    To fix this issue, we should not force such restriction on session creation, but delay the check until related interpreter is used. If such packaging is missing, we should make the related execution failure and return user the cause of issue, but don't affect other correctly started interpreters.
    
    ## How was this patch tested?
    
    Existing test and manually verification on local cluster.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #56 from jerryshao/LIVY-411.

 .../test/scala/org/apache/livy/test/JobApiIT.scala |   2 +-
 .../src/test/spark2/scala/Spark2JobApiIT.scala     |   2 +-
 .../org/apache/livy/repl/PythonInterpreter.scala   |   4 +-
 .../scala/org/apache/livy/repl/ReplDriver.scala    |   9 +-
 .../main/scala/org/apache/livy/repl/Session.scala  | 132 ++++++++++++---------
 .../org/apache/livy/scalaapi/ScalaClientTest.scala |   7 +-
 .../server/interactive/InteractiveSession.scala    |  45 ++++---
 7 files changed, 117 insertions(+), 84 deletions(-)

commit 19004b51a14de68a34526bab22b1b64a2376f042
Author: Eric Perry <eric@ericjperry.com>
Date:   Fri Oct 20 10:04:12 2017 +0800

    [LIVY-409] Livy shell UX improvements
    
    I'm not sure how large of an audience the livy-shell has, but I've come to use it quite a bit in my testing/use of Livy and added a few small improvements that have made it a bit easier to use for me (and may help others):
    
    * Replaced the use of httplib with requests to fix dropped connection issues (and a few other robustness issues).
    * Added some context to the REPL prompt, by including the session `kind` and ID.
    * Ignore `SIGINT` signal so that users can type `CTRL-C` to cancel out a command.
    
    I know the use of `requests` is pretty ubiquitous but I included `livy-shell-requirements.txt` just in case 1) someone doesn't have it installed or 2) more dependencies are added down the road.
    
    Author: Eric Perry <eric@ericjperry.com>
    
    Closes #55 from ericjperry/feature/livy-shell-improvements.

 dev/livy-shell | 99 +++++++++++++++++++++++++++++++---------------------------
 1 file changed, 53 insertions(+), 46 deletions(-)

commit 8056e4682531a5a4b717a0b13d992a46637fd412
Author: Pascal Pellmont <github@ppo2.ch>
Date:   Tue Oct 10 08:39:00 2017 +0800

    [LIVY-7] added autocompletion api and implementation for scala
    
    I started an implementation of the very old feature request (LIVY-7) for code autocompletion.
    This implementation works with scala 2.11 and scala 2.10.
    
    I'd be happy if somebody could review and comment it.
    
    As for the API: I chose a synchronous call because resolving the code options shouldn't be a very long process (and if it were it wouldn't make sense anyway).
    
    Author: Pascal Pellmont <github@ppo2.ch>
    
    Closes #51 from pellmont/master.

 core/src/main/scala/org/apache/livy/msgs.scala     |  4 +++
 docs/rest-api.md                                   | 36 ++++++++++++++++++++++
 .../livy/test/framework/LivyRestClient.scala       | 30 ++++++++++++++++++
 .../scala/org/apache/livy/test/InteractiveIT.scala |  3 ++
 .../org/apache/livy/repl/SparkInterpreter.scala    |  6 ++++
 .../org/apache/livy/repl/SparkInterpreter.scala    | 16 ++++++++++
 .../livy/repl/AbstractSparkInterpreter.scala       |  6 ++++
 .../scala/org/apache/livy/repl/Interpreter.scala   |  4 +++
 .../scala/org/apache/livy/repl/ReplDriver.scala    |  4 +++
 .../main/scala/org/apache/livy/repl/Session.scala  |  6 ++++
 .../apache/livy/repl/ScalaInterpreterSpec.scala    | 10 ++++++
 .../java/org/apache/livy/rsc/BaseProtocol.java     | 16 ++++++++++
 .../main/java/org/apache/livy/rsc/RSCClient.java   |  6 ++++
 .../server/interactive/InteractiveSession.scala    |  9 ++++++
 .../interactive/InteractiveSessionServlet.scala    |  9 +++++-
 15 files changed, 164 insertions(+), 1 deletion(-)

commit ec069e32f44179cb1bdec0085087f7bd1044afb1
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Mon Oct 9 15:18:02 2017 -0700

    [MINOR] Adding a PR Template
    
    Added a pull request template like Spark's to help new Livy devs
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #54 from ajbozarth/pr-template.

 .github/PULL_REQUEST_TEMPLATE | 11 +++++++++++
 .rat-excludes                 |  1 +
 2 files changed, 12 insertions(+)

commit ff6c2ebbbb367a9718e3efab4f460a8225c245ed
Author: jerryshao <sshao@hortonworks.com>
Date:   Fri Sep 29 10:05:58 2017 +0800

    [LIVY-408][RSC] Update Netty version to 4.0.37.Final
    
    Netty version below 4.0.37.Final has some potential security issue (https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2016-4970), it is fixed in this version. So propose to upgrade Netty to avoid such issue.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #53 from jerryshao/LIVY-408.

 pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0ca16d5d2fb9bed6c66a6a787afb5a7f025c577f
Author: jerryshao <sshao@hortonworks.com>
Date:   Tue Sep 26 21:07:39 2017 +0800

    [LIVY-406][LIVY-406][FOLLOWUP][SERVER] Fix UT failure in branch 0.4 and apply to Master branch for consistency
    
    Because we changed the AppState logic in #39 , so the UT which passed in master branch will be failed in branch 0.4, here to fix this issue.
    
    Also apply this PR to master branch for the consistency, it should also be worked in master branch.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #52 from jerryshao/LIVY-406-followup.

 server/src/test/scala/org/apache/livy/utils/SparkYarnAppSpec.scala | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4a537e24d605766f901232760f39b44adae817a2
Author: jerryshao <sshao@hortonworks.com>
Date:   Tue Sep 26 13:25:11 2017 +0800

    [LIVY-406][SERVER] Fix Livy cannot app id in yarn client mode issue
    
    In our `SparkYarnApp` logic, we have to wait for process to exit before to query app id. Since the process is never exited in yarn client mode, so it will block follow-up logic to get app id and other yarn application information.
    
    So here propose to remove this logic, also because now we will query app id ever since app is launched, so we should increase the look-up time to avoid timeout.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #50 from jerryshao/LIVY-406.

 conf/livy.conf.template                            |  4 +--
 .../src/main/scala/org/apache/livy/LivyConf.scala  |  2 +-
 .../scala/org/apache/livy/utils/SparkYarnApp.scala |  9 -------
 .../org/apache/livy/utils/SparkYarnAppSpec.scala   | 30 ++++++++++++++++++++++
 4 files changed, 33 insertions(+), 12 deletions(-)

commit 1bd92b9f4684fee2bacc0545b56316d5f0553f9a
Author: jerryshao <sshao@hortonworks.com>
Date:   Fri Sep 22 13:30:53 2017 +0800

    [LIVY-398][DOC] Update rest API to reflect the changes of shared context session
    
    LIVY-194 changes the semantics of session in Livy and add supports of shared context for Livy session, so here change the docs in REST API to reflect the changes of LIVY-194.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #47 from jerryshao/LIVY-398.

 docs/rest-api.md | 45 ++++++++++++++++++++++++++++++---------------
 1 file changed, 30 insertions(+), 15 deletions(-)

commit 219fdac5cfea1780cfb4e52f29777d3b21f8a55e
Author: Fathi Salmi, Meisam(mfathisalmi) <mfathisalmi@paypal.com>
Date:   Mon Sep 18 16:36:03 2017 +0800

    [LIVY-396] Livy does not map YARN app states correctly
    
    Make sure that the invalid combinations of `state` and `finalStatus` do
    not occur, and if they do, put the application in the `FAILED` state.
    
    Task-Url: https://issues.apache.org/jira/browse/LIVY-396
    
    Author: Fathi Salmi, Meisam(mfathisalmi) <mfathisalmi@paypal.com>
    
    Closes #39 from meisam/LIVY-396.
    
    Change-Id: I839ef9f617cb08463f37eff803dbb99d681f852a

 .../scala/org/apache/livy/utils/SparkYarnApp.scala | 34 +++++-----
 .../org/apache/livy/utils/SparkYarnAppSpec.scala   | 78 +++++++++++++++++-----
 2 files changed, 78 insertions(+), 34 deletions(-)

commit 52c89a9c4a8d2d58bf51ecd9b0e049191ed7a0b6
Author: jerryshao <sshao@hortonworks.com>
Date:   Fri Sep 15 14:51:26 2017 +0800

    [MINOR] Update Travis Python Requests version to fix build error
    
    The issue is from #39 , seems like `requests` version doesn't meet, so here update `requests` version to fix it.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #46 from jerryshao/travis-python-fix.
    
    Change-Id: Id4713eaa3d72a68c776181542b0f9506924b6578

 .travis.yml | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 05bfa15ef3a1df1cd4b7dabdb5c7ce47d9d26d16
Author: Jeff Zhang <zjffdu@apache.org>
Date:   Wed Sep 6 06:48:50 2017 +0800

    [MINOR] Disable hive in integration test
    
    Straightforward change to disable hive in integration test, because there's no hive related setup in integration test, (no hive-site.xml and no datanulear jars uploaded)
    
    Author: Jeff Zhang <zjffdu@apache.org>
    
    Closes #43 from zjffdu/hive.

 .../src/main/scala/org/apache/livy/test/framework/MiniCluster.scala     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 64958260674b98eb4d2f56635628f3ab93724c69
Author: jerryshao <sshao@hortonworks.com>
Date:   Mon Sep 4 09:30:06 2017 +0800

    [LIVY-400][BUILD] Add script to handle Livy apache release process
    
    This PR adds script to handle Livy apache release process.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #42 from jerryshao/LIVY-400.
    
    Change-Id: Id1dca5bdec85012cf997a224cd34f5e54e286ac7

 dev/release-build.sh | 216 +++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 216 insertions(+)

commit a23969721ff5378a6206ace483c47e8062e21f88
Author: jerryshao <sshao@hortonworks.com>
Date:   Fri Sep 1 14:05:18 2017 +0800

    [LIVY-394][BUILD] Update Livy master to 0.5.0-incubating-SNAPSHOT
    
    This PR updates Livy master branch version to 0.5.0-incubating-SNAPSHOT, also changes the Livy package name to livy-<version>-bin.zip.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #40 from jerryshao/master-version-update.
    
    Change-Id: If76e823a740e5178bb1e0efb4d39c3ba95dba9de

 api/pom.xml                                                  | 4 ++--
 assembly/pom.xml                                             | 6 +++---
 client-common/pom.xml                                        | 4 ++--
 client-http/pom.xml                                          | 4 ++--
 core/pom.xml                                                 | 4 ++--
 core/scala-2.10/pom.xml                                      | 4 ++--
 core/scala-2.11/pom.xml                                      | 4 ++--
 coverage/pom.xml                                             | 4 ++--
 examples/pom.xml                                             | 4 ++--
 integration-test/minicluster-dependencies/pom.xml            | 4 ++--
 integration-test/minicluster-dependencies/scala-2.10/pom.xml | 4 ++--
 integration-test/minicluster-dependencies/scala-2.11/pom.xml | 4 ++--
 integration-test/pom.xml                                     | 4 ++--
 pom.xml                                                      | 2 +-
 python-api/pom.xml                                           | 4 ++--
 python-api/setup.py                                          | 2 +-
 repl/pom.xml                                                 | 4 ++--
 repl/scala-2.10/pom.xml                                      | 4 ++--
 repl/scala-2.11/pom.xml                                      | 4 ++--
 rsc/pom.xml                                                  | 4 ++--
 scala-api/pom.xml                                            | 4 ++--
 scala-api/scala-2.10/pom.xml                                 | 4 ++--
 scala-api/scala-2.11/pom.xml                                 | 4 ++--
 scala/pom.xml                                                | 4 ++--
 server/pom.xml                                               | 4 ++--
 test-lib/pom.xml                                             | 4 ++--
 26 files changed, 51 insertions(+), 51 deletions(-)

commit c1aafeb6cb87f2bd7f4cb7cf538822b59fb34a9c
Author: jerryshao <sshao@hortonworks.com>
Date:   Thu Aug 31 21:07:42 2017 +0800

    [LIVY-194][REPL] Add shared language support for Livy interactive session
    
    This is a ongoing work. Putting it here to leverage travis to test.
    
    In the current Livy when we create a new session we need to specify session kind, which represents the interpreter kind bound with this session. User could choose either `spark` or `pyspark` or `sparkr`, Livy internally will create a related interpreter with current session. Also in Livy each session represents a complete Spark application / SparkContext.
    
    This brings a limitation that user can only choose one language along with its own Spark application. Furthermore, data generated by `pyspark` interpreter cannot be shared with `spark` interpreter. So to improve the usability of Livy we propose to add multiple interpreters support in one session.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #28 from jerryshao/LIVY-194.
    
    Change-Id: I743871c80ccb5c16101236e052d5f31662382667

 .../apache/livy/client/common/HttpMessages.java    |   6 +-
 .../org/apache/livy/client/http/JobHandleImpl.java |   2 +-
 .../apache/livy/client/http/HttpClientSpec.scala   |   2 +-
 core/src/main/scala/org/apache/livy/msgs.scala     |   2 +-
 .../main/scala/org/apache/livy/sessions/Kind.scala |  10 +-
 integration-test/pom.xml                           |   2 +-
 python-api/src/main/python/livy/client.py          |   4 +-
 .../org/apache/livy/repl/SparkInterpreter.scala    |  28 ++--
 .../org/apache/livy/repl/SparkInterpreter.scala    |  26 ++--
 repl/src/main/resources/fake_shell.py              |  34 ++++-
 .../livy/repl/AbstractSparkInterpreter.scala       |  52 +++++++
 .../org/apache/livy/repl/BypassPySparkJob.scala    |   7 +-
 .../scala/org/apache/livy/repl/Interpreter.scala   |   5 +-
 .../org/apache/livy/repl/ProcessInterpreter.scala  |  10 +-
 .../org/apache/livy/repl/PythonInterpreter.scala   |  25 ++--
 .../scala/org/apache/livy/repl/ReplDriver.scala    |  48 +++----
 .../main/scala/org/apache/livy/repl/Session.scala  | 120 ++++++++++++-----
 .../apache/livy/repl/SparkContextInitializer.scala | 126 -----------------
 .../org/apache/livy/repl/SparkRInterpreter.scala   |  66 +++++----
 .../org/apache/livy/repl/BaseSessionSpec.scala     |  20 +--
 .../apache/livy/repl/PythonInterpreterSpec.scala   |  24 +++-
 .../org/apache/livy/repl/PythonSessionSpec.scala   |  21 +--
 .../org/apache/livy/repl/ReplDriverSuite.scala     |   2 +-
 .../scala/org/apache/livy/repl/SessionSpec.scala   |  61 ++++-----
 .../org/apache/livy/repl/SharedSessionSpec.scala   | 126 +++++++++++++++++
 .../apache/livy/repl/SparkRInterpreterSpec.scala   |  10 +-
 .../org/apache/livy/repl/SparkRSessionSpec.scala   |   7 +-
 .../org/apache/livy/repl/SparkSessionSpec.scala    |   7 +-
 .../java/org/apache/livy/rsc/BaseProtocol.java     |  12 +-
 .../java/org/apache/livy/rsc/ContextLauncher.java  |   8 +-
 .../main/java/org/apache/livy/rsc/RSCClient.java   |  13 +-
 .../org/apache/livy/rsc/driver/JobContextImpl.java |  65 ++-------
 .../java/org/apache/livy/rsc/driver/RSCDriver.java |  17 +--
 .../org/apache/livy/rsc/driver/SparkEntries.java   | 149 +++++++++++++++++++++
 .../java/org/apache/livy/rsc/TestSparkClient.java  |  15 ++-
 .../interactive/CreateInteractiveRequest.scala     |   7 +-
 .../server/interactive/InteractiveSession.scala    |  37 ++---
 .../interactive/InteractiveSessionServlet.scala    |   9 +-
 server/src/test/resources/log4j.properties         |   2 +-
 .../InteractiveSessionServletSpec.scala            |   2 +-
 .../interactive/InteractiveSessionSpec.scala       |  43 +++---
 .../livy/server/interactive/JobApiSpec.scala       |   6 +-
 42 files changed, 738 insertions(+), 500 deletions(-)

commit 317290d4b59b6304669a320158dbedf80072b835
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Thu Aug 24 14:43:42 2017 +0800

    [LIVY-393][MINOR] Update httpclient to 4.5.3
    
    Currently the httpclient version in the root pom is 4.5.2 and in the client-http module it is 4.5.1
    
    Now both use a common version and it's been updated to the latest version 4.5.3
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #37 from ajbozarth/hc-version.
    
    Change-Id: I986acdb633e3b67d5b6ac164fb3c0d7191f32ce1

 client-http/pom.xml | 4 ++--
 pom.xml             | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit ca5b1be777de1310d7a4ece96a8d77852af4796f
Author: jerryshao <sshao@hortonworks.com>
Date:   Tue Aug 15 16:01:09 2017 +0800

    [LIVY-389][BUILD][FOLLOWUP] Enable generating third-party license by profile
    
    Move `license-maven-plugin` to a specific profile which can only be enabled by `-Dlicense-maven-plugin` to avoid generating every time in packaging.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #35 from jerryshao/change-pom.

 pom.xml | 54 ++++++++++++++++++++++++++++++++++--------------------
 1 file changed, 34 insertions(+), 20 deletions(-)

commit 21380280677b2e284b1efc2c73654ec3fc538b42
Author: jerryshao <sshao@hortonworks.com>
Date:   Tue Aug 15 13:40:54 2017 +0800

    [LIVY-389][BUILD] Add maven plugin to generate license for all the dependencies
    
    This change will generate a THIRD-PARTY file with license of all dependencies in `${execution.root}` folder, and will copy it to release assembly's root dir.
    
    lresende ajbozarth can you please review the current solution, is it OK for an Apache way.
    
    Here is the snippet of this THIRD-PARTY file:
    
    ```
    ===============================================================================
    
    APACHE LIVY SUBCOMPONENTS:
    
    The Apache Livy binary distribution includes a number of subcomponents
    with separate copyright notices and license terms. Your use of the
    code for the these subcomponents is subject to the terms and
    conditions of the following licenses.
    
    ===============================================================================
    
    We have listed all of these third party libraries and their licenses
    below. This file can be regenerated at any time by simply running:
    
        mvn clean package
    
    ---------------------------------------------------
    Third party Java libraries listed by License type.
    
    PLEASE NOTE: Some dependencies may be listed under multiple licenses if they
    are dual-licensed. This is especially true of anything listed as
    "GNU General Public Library" below.
    ---------------------------------------------------
    
      ASL:
    
        * json4s-ast (org.json4s:json4s-ast_2.10:3.2.10 - https://github.com/json4s/json4s)
        * json4s-core (org.json4s:json4s-core_2.10:3.2.10 - https://github.com/json4s/json4s)
        * json4s-jackson (org.json4s:json4s-jackson_2.10:3.2.10 - https://github.com/json4s/json4s)
    
      Apache 2:
    
        * Apache Derby Database Engine and Embedded JDBC Driver (org.apache.derby:derby:10.10.2.0 - http://db.apache.org/derby/derby/)
        * JDO API (javax.jdo:jdo-api:3.0.1 - http://db.apache.org/jdo)
        * JavaEWAH (com.googlecode.javaewah:JavaEWAH:0.3.2 - http://code.google.com/p/javaewah/)
        * Joda-Convert (org.joda:joda-convert:1.6 - http://www.joda.org/joda-convert/)
        * Joda-Time (joda-time:joda-time:2.3 - http://www.joda.org/joda-time/)
        * Objenesis (org.objenesis:objenesis:1.2 - http://objenesis.googlecode.com/svn/docs/index.html)
        * RoaringBitmap (org.roaringbitmap:RoaringBitmap:0.5.11 - https://github.com/lemire/RoaringBitmap)
        * breeze (org.scalanlp:breeze_2.10:0.11.2 - http://scalanlp.org/)
        * breeze-macros (org.scalanlp:breeze-macros_2.10:0.11.2 - http://scalanlp.org/)
        * chill (com.twitter:chill_2.10:0.5.0 - https://github.com/twitter/chill)
        * chill-java (com.twitter:chill-java:0.5.0 - https://github.com/twitter/chill)
        * metrics-scala (nl.grons:metrics-scala_2.10:3.3.0_a2.3 - https://github.com/erikvanoosten/metrics-scala)
        * opencsv (net.sf.opencsv:opencsv:2.3 - http://opencsv.sf.net)
        * scala-ssh (com.decodified:scala-ssh_2.10:0.7.0 - https://github.com/sirthias/scala-ssh)
        * sshj (net.schmizz:sshj:0.10.0 - http://github.com/shikhar/sshj)
    
      Apache 2.0 License:
    
        * Spark Project Bagel (org.apache.spark:spark-bagel_2.10:1.6.2 - http://spark.apache.org/)
        * Spark Project Catalyst (org.apache.spark:spark-catalyst_2.10:1.6.2 - http://spark.apache.org/)
        * Spark Project Core (org.apache.spark:spark-core_2.10:1.6.2 - http://spark.apache.org/)
        * Spark Project GraphX (org.apache.spark:spark-graphx_2.10:1.6.2 - http://spark.apache.org/)
        * Spark Project Hive (org.apache.spark:spark-hive_2.10:1.6.2 - http://spark.apache.org/)
        * Spark Project Launcher (org.apache.spark:spark-launcher_2.10:1.6.2 - http://spark.apache.org/)
        * Spark Project ML Library (org.apache.spark:spark-mllib_2.10:1.6.2 - http://spark.apache.org/)
        * Spark Project Networking (org.apache.spark:spark-network-common_2.10:1.6.2 - http://spark.apache.org/)
        * Spark Project REPL (org.apache.spark:spark-repl_2.10:1.6.2 - http://spark.apache.org/)
        * Spark Project SQL (org.apache.spark:spark-sql_2.10:1.6.2 - http://spark.apache.org/)
        * Spark Project Shuffle Streaming Service (org.apache.spark:spark-network-shuffle_2.10:1.6.2 - http://spark.apache.org/)
        * Spark Project Streaming (org.apache.spark:spark-streaming_2.10:1.6.2 - http://spark.apache.org/)
        * Spark Project Unsafe (org.apache.spark:spark-unsafe_2.10:1.6.2 - http://spark.apache.org/)
        * Spark Project YARN (org.apache.spark:spark-yarn_2.10:1.6.2 - http://spark.apache.org/spark-yarn_2.10/)
    
      Apache License:
    
        * HttpClient (commons-httpclient:commons-httpclient:3.1 - http://jakarta.apache.org/httpcomponents/httpclient-3.x/)
        * Tachyon Clients - Distribution (org.tachyonproject:tachyon-client:0.8.2 - http://tachyon-project.org/tachyon-clients/tachyon-client/)
        * Tachyon Under File System - HDFS (org.tachyonproject:tachyon-underfs-hdfs:0.8.2 - http://tachyon-project.org/tachyon-underfs/tachyon-underfs-hdfs/)
        * Tachyon Under File System - Local FS (org.tachyonproject:tachyon-underfs-local:0.8.2 - http://tachyon-project.org/tachyon-underfs/tachyon-underfs-local/)
        * Tachyon Under File System - S3 (org.tachyonproject:tachyon-underfs-s3:0.8.2 - http://tachyon-project.org/tachyon-underfs/tachyon-underfs-s3/)
    ```
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #34 from jerryshao/LIVY-389-third-party.

 assembly/assembly.xml    |  1 +
 dev/third-party-file.ftl | 65 ++++++++++++++++++++++++++++++++++++++++++++++++
 pom.xml                  | 26 +++++++++++++++++++
 3 files changed, 92 insertions(+)

commit a4760c6683b4642fb388d2adbd4cd03ff557cb64
Author: jerryshao <sshao@hortonworks.com>
Date:   Tue Aug 8 09:44:13 2017 +0800

    [MINOR] Fix two version number issues in doc
    
    Two super nit fix regarding to version number, "incubating" should be added in version number.
    
    CC ajbozarth .
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #33 from jerryshao/fix-doc-issue.

 docs/_data/project.yml   | 2 +-
 docs/programmatic-api.md | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 1fcf93db66445ddeae1d1f92f3f2bd278df1c5d4
Author: jerryshao <sshao@hortonworks.com>
Date:   Mon Aug 7 09:05:17 2017 +0800

    [LIVY-389][BUILD] Change POM and packaging to meet Apache Criteria
    
    Change LIvy POM and assembly xml to meet Apache Criteria:
    
    1. Add Apache parent POM to Livy POM.
    2. Add LICENSE/NOTICE/DISCLAIMER to artifact's META-INF and package folder.
    
    CC ajbozarth lresende please help to review.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #32 from jerryshao/LIVY-389.

 assembly/assembly.xml |  9 +++++++++
 pom.xml               | 42 ++++++++++++++++++++++++++++++++++++++----
 2 files changed, 47 insertions(+), 4 deletions(-)

commit be3fe03457786f608d420563ee3a69ed445339ac
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Fri Aug 4 14:18:41 2017 +0800

    [LIVY-384][DOCS] Added ability to build Livy Docs
    
    [LIVY-384](https://issues.cloudera.org/browse/LIVY-384)
    
    Included a minimized copy of the Livy website template files so we can use Jekyll to build the Livy Documentation.
    I have also included a README that has instructions on how to build and deploy the Docs to the website.
    
    Paired with apache/incubator-livy-website#7
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #26 from ajbozarth/docs.

 .rat-excludes                                      |    4 +
 LICENSE                                            |  151 +
 docs/Gemfile                                       |   20 +
 docs/Gemfile.lock                                  |  209 +
 docs/README.md                                     |   58 +
 docs/_config.yml                                   |   22 +
 docs/_data/navigation.yml                          |   34 +
 docs/_data/project.yml                             |   21 +
 docs/_includes/JB/setup                            |   22 +
 docs/_includes/themes/apache/_navigation.html      |   43 +
 docs/_includes/themes/apache/default.html          |   50 +
 docs/_includes/themes/apache/footer.html           |   36 +
 docs/_includes/themes/apache/page.html             |   10 +
 docs/_includes/themes/apache/settings.yml          |   17 +
 docs/_layouts/default.html                         |    6 +
 docs/_layouts/page.html                            |    5 +
 docs/_layouts/post.html                            |    5 +
 .../apache/bootstrap/css/bootstrap-theme.css       |  459 ++
 .../apache/bootstrap/css/bootstrap-theme.min.css   |    9 +
 .../themes/apache/bootstrap/css/bootstrap.css      | 7100 ++++++++++++++++++++
 .../fonts/glyphicons-halflings-regular.eot         |  Bin 0 -> 20290 bytes
 .../fonts/glyphicons-halflings-regular.svg         |  229 +
 .../fonts/glyphicons-halflings-regular.ttf         |  Bin 0 -> 41236 bytes
 .../fonts/glyphicons-halflings-regular.woff        |  Bin 0 -> 23292 bytes
 .../bootstrap/img/glyphicons-halflings-white.png   |  Bin 0 -> 8777 bytes
 .../apache/bootstrap/img/glyphicons-halflings.png  |  Bin 0 -> 12799 bytes
 .../assets/themes/apache/bootstrap/js/bootstrap.js | 2002 ++++++
 .../themes/apache/bootstrap/js/bootstrap.min.js    |    9 +
 docs/assets/themes/apache/css/style.css            |  380 ++
 docs/assets/themes/apache/css/syntax.css           |   77 +
 docs/assets/themes/apache/img/egg-logo.png         |  Bin 0 -> 17961 bytes
 docs/assets/themes/apache/img/logo.png             |  Bin 0 -> 25120 bytes
 .../themes/apache/jquery/jquery-2.1.1.min.js       |    4 +
 docs/index.md                                      |   31 +
 docs/programmatic-api.md                           |   26 +
 docs/rest-api.md                                   |   26 +
 36 files changed, 11065 insertions(+)

commit 59dee632742a9e57960c2cab0b9fffb06dea3f4e
Author: Luciano Resende <lresende@apache.org>
Date:   Thu Aug 3 21:08:27 2017 -0700

    [MINOR] Add License header to configuration templates

 .rat-excludes                      |  1 -
 conf/livy-client.conf.template     | 17 +++++++++++++++++
 conf/livy.conf.template            | 18 +++++++++++++++++-
 conf/log4j.properties.template     |  1 +
 conf/spark-blacklist.conf.template | 16 ++++++++++++++++
 5 files changed, 51 insertions(+), 2 deletions(-)

commit 2898d82dd7d33fa5432f90e97f972bd99342688b
Author: Luciano Resende <lresende@apache.org>
Date:   Thu Aug 3 20:50:13 2017 -0700

    [MINOR] Add License header to extra configuration files

 .rat-excludes                                          |  2 --
 .travis.yml                                            | 17 +++++++++++++++++
 .../services/org.apache.livy.LivyClientFactory         | 18 +++++++++++++++++-
 .../services/org.apache.livy.LivyClientFactory         | 16 ++++++++++++++++
 .../services/org.apache.livy.LivyClientFactory         | 18 +++++++++++++++++-
 5 files changed, 67 insertions(+), 4 deletions(-)

commit 4219e1f2609319629f637049abfb5b5fa2bca885
Author: Luciano Resende <lresende@apache.org>
Date:   Thu Aug 3 20:47:41 2017 -0700

    [MINOR] Remove extension from NOTICE file

 NOTICE.txt => NOTICE | 0
 1 file changed, 0 insertions(+), 0 deletions(-)

commit cbed3b6a036c566be46c27570e453367042200d0
Author: Luciano Resende <lresende@apache.org>
Date:   Thu Aug 3 20:44:37 2017 -0700

    [MINOR] Add Incubating DISCLAIMER file

 DISCLAIMER | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit ff4002ca372e0c3cbd19ae54c958f4be598638fd
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Fri Aug 4 10:18:43 2017 +0800

    [LIVY-389][MINOR] Pom updates
    
    Updated pom.xml to match other Apache and Apache Incubator projects
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #31 from ajbozarth/pom.

 pom.xml | 73 +++++++++++++++++++++++++++++++++++++++++++++++++++++------------
 1 file changed, 60 insertions(+), 13 deletions(-)

commit e434d9e2060f9bee470f6960493ad36e3bdfbe5d
Author: jerryshao <sshao@hortonworks.com>
Date:   Thu Aug 3 11:23:28 2017 +0800

    [LIVY-390][BUILD] Only using JDK8 to build with Spark 2.2
    
    Because Spark 2.2 removes JDK7 support but Livy still supports JDK7, so updating travis file to use JDK8 to build against Spark 2.2, whereas still using JDK7 to build with Spark 2.2-.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #30 from jerryshao/LIVY-390.

 .travis.yml | 26 +++++++++++++++++---------
 pom.xml     |  1 +
 2 files changed, 18 insertions(+), 9 deletions(-)

commit fc4a9e60aac5672c134b6eafe27e049cca067897
Author: Min Shen <mshen@linkedin.com>
Date:   Thu Aug 3 08:48:04 2017 +0800

    [LIVY-380] Livy should overwrite spark.sql.catalogImplementation if Hive classes are not present on classpath
    
    In SparkContextInitializer.spark2CreateContext, livy checks for whether catalog implementation is "hive" or "in-memory" to properly initialize the SparkSession.
    If the config is set to "hive" (this is the case if livy.repl.enable-hive-context is set to "true"), livy will further check if hive classes are present or not.
    It only invokes the enableHiveSupport method of SparkSession.Builder if hive classes are found.
    If not, it proceeds to initializing a SparkSession without Hive support enabled.
    However, in Spark's code base, when creating SparkSession, it checks for spark.sql.catalogImplementation to determine which session state to initialize.
    If spark.sql.catalogImplementation is set to "hive", it will initialize a HiveSessionState.
    However, since Livy has already checked that hive classes are not present, it should not go ahead invoking SparkSession.builder.getOrCreate without overwriting spark.sql.catalogImplementation to "in-memory".
    
    Author: Min Shen <mshen@linkedin.com>
    
    Closes #24 from Victsm/master.

 repl/src/main/scala/org/apache/livy/repl/SparkContextInitializer.scala | 2 ++
 1 file changed, 2 insertions(+)

commit d4bd76f09690079c47364b3349f549e32db4d621
Author: jerryshao <sshao@hortonworks.com>
Date:   Thu Aug 3 08:46:57 2017 +0800

    [MINOR] Clean some old package name left in code and configuration file
    
    Looks like we still left some old package name uncleaned, so search and modify them again.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #29 from jerryshao/clean-code.

 client-http/src/test/resources/log4j.properties                      | 2 +-
 .../src/test/scala/org/apache/livy/client/http/HttpClientSpec.scala  | 2 +-
 .../test/scala/org/apache/livy/client/http/LivyConnectionSpec.scala  | 2 +-
 examples/src/main/scala/org/apache/livy/examples/WordCountApp.scala  | 2 +-
 integration-test/src/test/resources/log4j.properties                 | 4 ++--
 pom.xml                                                              | 5 -----
 scala-api/src/main/scala/org/apache/livy/scalaapi/package.scala      | 4 ++--
 server/src/main/scala/org/apache/livy/server/ApiVersions.scala       | 2 +-
 8 files changed, 9 insertions(+), 14 deletions(-)

commit d48c0243eb07999a2f61972198a430b68b622307
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Wed Aug 2 16:48:41 2017 +0800

    [LIVY-387][WEB UI] Update Log page to split apart different logs
    
    [LIVY-387](https://issues.cloudera.org/browse/LIVY-387)
    
    Added javascript string parsing that finds the stdout, stderr, and YARN Diagnostics sections of the log and displays them in separate scrollable `<pre>` tags.
    
    The `<pre>` tags are set to `max-height: 80%`, this makes scrolling down to each log easy so there is no need for an anchor link at the top of the page, also 80% allows a good sized viewing window. Each log is also set to scroll to the bottom on page load.
    
    Manually Tested
    
    Screenshots
    ![screen shot 2017-08-01 at 2 58 50 pm](https://user-images.githubusercontent.com/13952758/28849018-f873e4b2-76c9-11e7-8c3c-a7ffded90136.png)
    [more will be added tomorrow when I can use my desktop monitor for different sized screenshots, I'm currently working from my laptop]
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #27 from ajbozarth/log2.

 .../apache/livy/server/ui/static/css/livy-ui.css   |  9 +++++
 .../apache/livy/server/ui/static/js/session-log.js | 43 +++++++++++++++++++++-
 2 files changed, 50 insertions(+), 2 deletions(-)

commit 69300a2fe4c81d711369e4bf23db0847cc15a178
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Tue Aug 1 21:41:17 2017 +0800

    [LIVY-344][WEB UI] Create Session Log Page
    
    [LIVY-344](https://issues.cloudera.org/browse/LIVY-344)
    
    Created a Session Log page for viewing the session log.
    Updated All Sessions Page and Session Page with links to the Log Page.
    Log Page exists for both Interactive Sessions and Batches.
    
    Tested Manually, screenshots below
    
    ![screen shot 2017-07-26 at 1 30 35 pm](https://user-images.githubusercontent.com/13952758/28643916-4668a3f0-720c-11e7-8441-526547980e7b.png)
    ![screen shot 2017-07-26 at 1 30 40 pm](https://user-images.githubusercontent.com/13952758/28643917-467d50ca-720c-11e7-9c08-fab578d81ad5.png)
    ![screen shot 2017-07-26 at 1 30 44 pm](https://user-images.githubusercontent.com/13952758/28643918-467fcfe4-720c-11e7-8d95-72fb4c57c6a8.png)
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #25 from ajbozarth/log-ui.

 .../apache/livy/server/ui/static/css/livy-ui.css   |  4 +-
 .../livy/server/ui/static/js/all-sessions.js       |  4 +-
 .../org/apache/livy/server/ui/static/js/livy-ui.js | 12 +++++-
 .../apache/livy/server/ui/static/js/session-log.js | 43 ++++++++++++++++++++++
 .../org/apache/livy/server/ui/static/js/session.js |  2 +-
 .../org/apache/livy/server/SessionServlet.scala    |  5 ++-
 .../org/apache/livy/server/ui/UIServlet.scala      | 32 +++++++++++++++-
 .../scala/org/apache/livy/utils/SparkYarnApp.scala |  2 +-
 8 files changed, 94 insertions(+), 10 deletions(-)

commit 60ee047e98b93b50b2763594e9bd17ecc4d31563
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Thu Jul 27 11:12:19 2017 +0800

    [LIVY-376][DOCS] Update README with new naming and links and move Docs into separate files
    
    [LIVY-376](https://issues.cloudera.org/browse/LIVY-376)
    
     * The README has been updated to match our new Apache naming and links.
     * The API Documentation has been split into separate files
     * Examples have been moved to the website https://github.com/apache/incubator-livy-website/pull/5
    
    This PR will be followed up with a way to build out the Docs for the website
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #21 from ajbozarth/readme.

 NOTICE.txt               |   2 +-
 README.md                |  82 ++++
 README.rst               | 982 -----------------------------------------------
 docs/programmatic-api.md |  89 +++++
 docs/rest-api.md         | 726 +++++++++++++++++++++++++++++++++++
 5 files changed, 898 insertions(+), 983 deletions(-)

commit dcd29a0435b3bb87a34ddb457a4709c3977469ef
Author: jerryshao <sshao@hortonworks.com>
Date:   Thu Jul 27 10:54:17 2017 +0800

    [MINOR] Fix some potential security leak issue
    
    Fix two potential security leak issue based on the security code scan:
    
    1. Add file name checking code in `RSCDriverBootstrapper`'s main method argument to avoid malicious file.
    2. Avoid dumping exception stack to output.
    
    CC yanboliang zjffdu please help to review.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #22 from jerryshao/security-issue.

 rsc/src/main/java/org/apache/livy/rsc/RSCClient.java             | 2 +-
 .../java/org/apache/livy/rsc/driver/RSCDriverBootstrapper.java   | 9 ++++++++-
 .../livy/server/interactive/InteractiveSessionServlet.scala      | 1 -
 3 files changed, 9 insertions(+), 3 deletions(-)

commit 087adb64292e6a15323e02c2d9be872facc4a9d0
Author: Weiqing Yang <yangweiqing001@gmail.com>
Date:   Wed Jul 26 14:25:56 2017 +0800

    [LIVY-381] Bump supported Spark version to 2.2
    
    Spark 2.2 has been released. It's better for us to update the max version supported.
    
    Author: Weiqing Yang <yangweiqing001@gmail.com>
    
    Closes #18 from weiqingy/LIVY-381.

 .travis.yml                                                  |  4 +++-
 pom.xml                                                      | 12 ++++++++++++
 .../main/scala/org/apache/livy/utils/LivySparkUtils.scala    |  4 +++-
 .../scala/org/apache/livy/utils/LivySparkUtilsSuite.scala    |  2 ++
 4 files changed, 20 insertions(+), 2 deletions(-)

commit 8d14469814dcabaa9c4d1dee14f8bab29e4ebc48
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Wed Jul 26 09:35:59 2017 +0800

    [MINOR] Add LICENSE and NOTICE files
    
    Added Apache LICENSE and NOTICE files to the base directory of the repo.
    
    This was split off of https://github.com/apache/incubator-livy/pull/21 for commit clarity
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #23 from ajbozarth/license.

 LICENSE    | 202 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NOTICE.txt |   5 ++
 2 files changed, 207 insertions(+)

commit 75902ebf16bbe4eb03760023e35f02082747064c
Author: jerryshao <sshao@hortonworks.com>
Date:   Mon Jul 24 14:24:58 2017 +0800

    [LIVY-348] Improve the ACLs in Livy
    
    This PR propose to improve current Livy's access control mechanism with fine-grained control:
    
    1. If `livy.server.access-control.enabled` is disabled, which means ACLs is disabled, any user could send any request to Livy.
    2. If `livy.server.access-control.enabled` is enabled, then this ACL mechanism divides users into 3 groups:
        1. view accessible users: users could get session, statement data, but cannot POST any queries.
        2. modify accessible users: users could submit new statements, kill sessions.
        3. super users: this is the same as previous, super user could impersonate any user.
    
        In the meanwhile, modify accessible users automatically have the view accessibility, and super user has all the permissions.
    
    Also add new configuration `livy.server.access-control.allowed-users`, this is the same as previous `livy.server.access-control.users`, when ACLs is enabled only users in the allowed list could issue REST queries to Livy server, other users will get 403.
    
    Please review and comment.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #15 from jerryshao/LIVY-348.

 .../apache/livy/client/http/HttpClientSpec.scala   |   5 +-
 conf/livy.conf.template                            |  16 +++
 .../src/main/scala/org/apache/livy/LivyConf.scala  |  21 ++--
 .../org/apache/livy/server/AccessFilter.scala      |   8 +-
 .../org/apache/livy/server/AccessManager.scala     |  97 +++++++++++++++++
 .../scala/org/apache/livy/server/LivyServer.scala  |  22 ++--
 .../org/apache/livy/server/SessionServlet.scala    |  51 ++++++---
 .../livy/server/batch/BatchSessionServlet.scala    |   9 +-
 .../interactive/InteractiveSessionServlet.scala    |  44 ++++----
 .../livy/server/interactive/SessionHeartbeat.scala |  11 +-
 .../apache/livy/server/AccessManagerSuite.scala    | 119 +++++++++++++++++++++
 .../livy/server/BaseSessionServletSpec.scala       |   8 ++
 .../apache/livy/server/SessionServletSpec.scala    | 100 +++++++++++++----
 .../livy/server/batch/BatchServletSpec.scala       |   6 +-
 .../InteractiveSessionServletSpec.scala            |   9 +-
 .../livy/server/interactive/JobApiSpec.scala       |   6 +-
 16 files changed, 434 insertions(+), 98 deletions(-)

commit feeb8678f4a2f59a1ec3ebdd31a1c8c65cc613a2
Author: jerryshao <sshao@hortonworks.com>
Date:   Thu Jul 20 17:13:02 2017 -0700

    [MINOR] Change Livy commit message style from LIVY-xxx. to [LIVY-xxx]
    
    According to discussion, changing the commit message style from LIVY-xxx. to [LIVY-xxx].
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #17 from jerryshao/update-merge-script.

 dev/merge_livy_pr.py | 21 ++++++++++++++-------
 1 file changed, 14 insertions(+), 7 deletions(-)

commit 27625a0b2174c5d5d5c8c3ee7b274c94c825388a
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Mon Jul 17 21:21:22 2017 -0700

    LIVY-343. Web UI: Create Session Page
    
    [LIVY-343](https://issues.cloudera.org/browse/LIVY-343)
    
    Created a Session Summery Page for Interactive Sessions. Batch Sessions do not have Session Summery Pages because all relevant info is displayed on the All Sessions page Batches table.
    
    The Session Summery Page displays session info (same as in All Sessions table) at the top of the page similar to the Job or Stage Pages in Spark. Below the session info section is a statements table. The statements table contains statement information including statement output. The statement output columns account for empty, error, and data output.
    
    Other new features and updates include:
     - Added a link to the Session Page in the Interactive Sessions table on the All Sessions Page
     - Reorganized static files into a standard directory structure
     - Added bootstrap fonts to fix jQuery DataTables Column headers
     - Added link to the Yarn driver logs to All Sessions tables
     - Updated CSS to use full page width like Spark (was causing issues with statements table)
     - Added a 404 page to the UI
    
    Point of Discussion:
     - Should I change the column order in the Statements table? I played around with it for a while before setting on the current ordering.
    
    Tested manually and passed Livy tests locally.
    
    Screenshots:
    ![1-empty](https://user-images.githubusercontent.com/13952758/28145846-583eb6ce-672a-11e7-9f03-06f194516e7c.png)
    ![2-applist](https://user-images.githubusercontent.com/13952758/28145848-5857cb5a-672a-11e7-99a2-098f2c8baf7b.png)
    ![3-session0](https://user-images.githubusercontent.com/13952758/28145849-585841de-672a-11e7-9236-9d7d814c93c5.png)
    ![4-session1](https://user-images.githubusercontent.com/13952758/28145851-5859158c-672a-11e7-923b-f59412e7be35.png)
    ![5-session2](https://user-images.githubusercontent.com/13952758/28145852-585ca418-672a-11e7-9827-2ccafe02689f.png)
    ![6-session3](https://user-images.githubusercontent.com/13952758/28145850-5858b0b0-672a-11e7-90ee-eef17610080d.png)
    ![7-session4inprog](https://user-images.githubusercontent.com/13952758/28145847-584ef2e6-672a-11e7-95c8-ae1d86548cea.png)
    ![8-session4](https://user-images.githubusercontent.com/13952758/28145853-5864b52c-672a-11e7-887f-75a2b7081b39.png)
    ![9-session5](https://user-images.githubusercontent.com/13952758/28145854-586f1ae4-672a-11e7-9098-20c1df8b4c3d.png)
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #16 from ajbozarth/session-ui.

 .rat-excludes                                      |   1 +
 .../apache/livy/server/ui/static/bootstrap.min.css |  14 -
 .../livy/server/ui/static/css/bootstrap.min.css    |   6 +
 .../static/{ => css}/dataTables.bootstrap.min.css  |   0
 .../livy/server/ui/static/{ => css}/livy-ui.css    |  19 +-
 .../static/fonts/glyphicons-halflings-regular.eot  | Bin 0 -> 20127 bytes
 .../static/fonts/glyphicons-halflings-regular.svg  | 288 +++++++++++++++++++++
 .../static/fonts/glyphicons-halflings-regular.ttf  | Bin 0 -> 45404 bytes
 .../static/fonts/glyphicons-halflings-regular.woff | Bin 0 -> 23424 bytes
 .../fonts/glyphicons-halflings-regular.woff2       | Bin 0 -> 18028 bytes
 .../server/ui/static/{ => html}/batches-table.html |  12 +-
 .../ui/static/{ => html}/sessions-table.html       |  12 +-
 .../server/ui/static/html/statements-table.html    |  63 +++++
 .../server/ui/static/{ => img}/livy-mini-logo.png  | Bin
 .../livy/server/ui/static/{ => js}/all-sessions.js |  25 +-
 .../server/ui/static/{ => js}/bootstrap.min.js     |   0
 .../ui/static/{ => js}/dataTables.bootstrap.min.js |   0
 .../server/ui/static/{ => js}/jquery-3.2.1.min.js  |   0
 .../ui/static/{ => js}/jquery.dataTables.min.js    |   0
 .../org/apache/livy/server/ui/static/js/livy-ui.js |  88 +++++++
 .../org/apache/livy/server/ui/static/js/session.js | 101 ++++++++
 .../scala/org/apache/livy/server/LivyServer.scala  |   2 +-
 .../org/apache/livy/server/ui/UIServlet.scala      |  73 ++++--
 23 files changed, 647 insertions(+), 57 deletions(-)

commit 9d82f1fdf2d6591ae195074503222847c9333e62
Author: davidxdh <xu.donghui@zte.com.cn>
Date:   Wed Jul 12 09:41:20 2017 -0700

    LIVY-364. livy-server writes one log file when set LIVY_MAX_LOG_FILE…
    
    [https://issues.cloudera.org/browse/LIVY-364](https://issues.cloudera.org/browse/LIVY-364)
    When set LIVY_MAX_LOG_FILES to 0, livy-server renames old log file to livy-root-server.out.0 while startup. So there has one log file which is inconsistent with LIVY_MAX_LOG_FILES value 0.
    
    Author: davidxdh <xu.donghui@zte.com.cn>
    
    Closes #10 from davidxdh/dev364.

 bin/livy-server | 5 +++++
 1 file changed, 5 insertions(+)

commit caec75bd92d507e9f58ae7a2743a7d22d32313c2
Author: Praveen Kanamarlapudi <kpraveen@outlook.com>
Date:   Fri Jul 7 14:33:10 2017 -0700

    LIVY-359. Cache livy logs as config driven
    
    **Changes Made:**
    1. Added logs cacheing as config driven.
    2. Fixed adding driver process logs livy logs for local and client mode in interactive mode.
    
    Author: Praveen Kanamarlapudi <kpraveen@outlook.com>
    
    Closes #14 from praveenkanamarlapudi/LIVY359.

 conf/livy.conf.template                            |  3 +++
 .../src/main/scala/org/apache/livy/LivyConf.scala  |  3 +++
 .../server/interactive/InteractiveSession.scala    | 14 +++--------
 .../apache/livy/utils/LineBufferedProcess.scala    |  6 ++---
 .../org/apache/livy/utils/LineBufferedStream.scala | 27 ++++++++++++++--------
 .../org/apache/livy/utils/LivySparkUtils.scala     |  2 +-
 .../scala/org/apache/livy/utils/SparkProcApp.scala |  3 ++-
 .../apache/livy/utils/SparkProcessBuilder.scala    |  2 +-
 8 files changed, 33 insertions(+), 27 deletions(-)

commit 624bb07b29a7734645d3e8565d3436ab38ff07f6
Author: jerryshao <sshao@hortonworks.com>
Date:   Thu Jul 6 10:27:45 2017 +0800

    Minor. Fix deprecated conf warning log issue
    
    ```
    ./livy-sshao-server.out.5:17/05/08 16:50:44 WARN LivyConf: The configuration key livy.spark.deployMode has been deprecated as of Livy 0.4 and may be removed in the future. Please use the new key livy.spark.deploy-mode instead.
    ./livy-sshao-server.out.5:17/05/08 16:50:45 WARN LivyConf: The configuration key livy.spark.scalaVersion has been deprecated as of Livy 0.4 and may be removed in the future. Please use the new key livy.spark.scala-version instead.
    ./livy-sshao-server.out.5:17/05/08 16:51:04 WARN RSCConf: The configuration key livy.rsc.driver_class has been deprecated as of Livy 0.4 and may be removed in the future. Please use the new key livy.rsc.driver-class instead.
    ```
    
    This log is incorrect even if we use new configuration key. This is mainly because the logic in logDeprecationWarning to check alternative configurations is not correct.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #13 from jerryshao/fix-log.

 .../org/apache/livy/client/common/ClientConf.java  | 42 +++++++++++++++++-----
 1 file changed, 33 insertions(+), 9 deletions(-)

commit 412ccc8fcf96854fedbe76af8e5a6fec2c542d25
Author: jerryshao <sshao@hortonworks.com>
Date:   Wed Jul 5 11:06:17 2017 +0800

    LIVY-375. Change Livy code package name to org.apache.livy
    
    This PR propose to change Livy code package name to org.apache.livy. This is one part to move Livy to Apache.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #12 from jerryshao/LIVY-375.

 README.rst                                         |   2 +-
 api/pom.xml                                        |   8 +++---
 .../{com/cloudera => org/apache}/livy/Job.java     |   2 +-
 .../cloudera => org/apache}/livy/JobContext.java   |   2 +-
 .../cloudera => org/apache}/livy/JobHandle.java    |   2 +-
 .../cloudera => org/apache}/livy/LivyClient.java   |   2 +-
 .../apache}/livy/LivyClientBuilder.java            |   2 +-
 .../apache}/livy/LivyClientFactory.java            |   4 +--
 .../apache}/livy/annotations/Private.java          |   2 +-
 .../apache}/livy/TestClientFactory.java            |   2 +-
 .../apache}/livy/TestLivyClientBuilder.java        |   2 +-
 .../services/com.cloudera.livy.LivyClientFactory   |   1 -
 .../services/org.apache.livy.LivyClientFactory     |   1 +
 assembly/pom.xml                                   |   6 ++--
 bin/livy-server                                    |   2 +-
 checkstyle.xml                                     |   2 +-
 client-common/pom.xml                              |  10 +++----
 .../livy/client/common/AbstractJobHandle.java      |   6 ++--
 .../apache}/livy/client/common/BufferUtils.java    |   4 +--
 .../apache}/livy/client/common/ClientConf.java     |   4 +--
 .../apache}/livy/client/common/HttpMessages.java   |   6 ++--
 .../apache}/livy/client/common/Serializer.java     |   4 +--
 .../apache}/livy/client/common/TestUtils.java      |   4 +--
 .../livy/client/common/TestAbstractJobHandle.java  |   6 ++--
 .../livy/client/common/TestBufferUtils.java        |   2 +-
 .../apache}/livy/client/common/TestClientConf.java |   2 +-
 .../livy/client/common/TestHttpMessages.java       |   4 +--
 .../apache}/livy/client/common/TestSerializer.java |   2 +-
 .../apache}/livy/client/common/TestTestUtils.java  |   2 +-
 client-http/pom.xml                                |  28 +++++++++---------
 .../apache}/livy/client/http/HttpClient.java       |  14 ++++-----
 .../livy/client/http/HttpClientFactory.java        |   6 ++--
 .../apache}/livy/client/http/HttpConf.java         |   4 +--
 .../apache}/livy/client/http/JobHandleImpl.java    |  16 +++++------
 .../apache}/livy/client/http/LivyConnection.java   |   4 +--
 .../services/com.cloudera.livy.LivyClientFactory   |   1 -
 .../services/org.apache.livy.LivyClientFactory     |   1 +
 .../apache}/livy/client/http/HttpClientSpec.scala  |  20 ++++++-------
 .../livy/client/http/LivyConnectionSpec.scala      |   6 ++--
 core/pom.xml                                       |   8 +++---
 core/scala-2.10/pom.xml                            |   8 +++---
 core/scala-2.11/pom.xml                            |   8 +++---
 .../cloudera => org/apache}/livy/Logging.scala     |   2 +-
 .../{com/cloudera => org/apache}/livy/Utils.scala  |   2 +-
 .../{com/cloudera => org/apache}/livy/msgs.scala   |   2 +-
 .../apache}/livy/sessions/Kind.scala               |   2 +-
 .../apache}/livy/sessions/SessionState.scala       |   2 +-
 .../apache}/livy/LivyBaseUnitTestSuite.scala       |   2 +-
 coverage/pom.xml                                   |   6 ++--
 examples/pom.xml                                   |  14 ++++-----
 .../apache}/livy/examples/PiApp.java               |   6 ++--
 .../apache}/livy/examples/WordCountApp.scala       |   6 ++--
 integration-test/minicluster-dependencies/pom.xml  |   6 ++--
 .../minicluster-dependencies/scala-2.10/pom.xml    |   8 +++---
 .../minicluster-dependencies/scala-2.11/pom.xml    |   8 +++---
 integration-test/pom.xml                           |   6 ++--
 .../test/framework/BaseIntegrationTestSuite.scala  |   2 +-
 .../apache}/livy/test/framework/Cluster.scala      |   4 +--
 .../livy/test/framework/LivyRestClient.scala       |  10 +++----
 .../apache}/livy/test/framework/MiniCluster.scala  |   8 +++---
 .../apache}/livy/test/framework/RealCluster.scala  |   4 +--
 .../apache}/livy/test/BatchIT.scala                |   8 +++---
 .../apache}/livy/test/InteractiveIT.scala          |   8 +++---
 .../apache}/livy/test/JobApiIT.scala               |  14 ++++-----
 .../src/test/spark2/scala/Spark2JobApiIT.scala     |  12 ++++----
 pom.xml                                            |   4 +--
 python-api/pom.xml                                 |   8 +++---
 python-api/setup.py                                |   6 ++--
 repl/pom.xml                                       |  14 ++++-----
 repl/scala-2.10/pom.xml                            |   8 +++---
 .../apache}/livy/repl/SparkInterpreter.scala       |   2 +-
 .../apache}/livy/repl/SparkInterpreterSpec.scala   |   4 +--
 repl/scala-2.11/pom.xml                            |   8 +++---
 .../apache}/livy/repl/SparkInterpreter.scala       |   2 +-
 .../apache}/livy/repl/SparkInterpreterSpec.scala   |   4 +--
 repl/src/main/resources/fake_shell.py              |   2 +-
 .../livy/repl/AbstractSparkInterpreter.scala       |   4 +--
 .../apache}/livy/repl/BypassPySparkJob.scala       |   4 +--
 .../apache}/livy/repl/Interpreter.scala            |   2 +-
 .../apache}/livy/repl/ProcessInterpreter.scala     |   6 ++--
 .../apache}/livy/repl/PySparkJobProcessor.scala    |   2 +-
 .../apache}/livy/repl/PythonInterpreter.scala      |  14 ++++-----
 .../apache}/livy/repl/ReplDriver.scala             |  14 ++++-----
 .../apache}/livy/repl/Session.scala                |  10 +++----
 .../livy/repl/SparkContextInitializer.scala        |   4 +--
 .../apache}/livy/repl/SparkRInterpreter.scala      |   6 ++--
 .../apache}/livy/repl/package.scala                |   2 +-
 .../apache}/livy/repl/BaseInterpreterSpec.scala    |   4 +--
 .../apache}/livy/repl/BaseSessionSpec.scala        |  10 +++----
 .../apache}/livy/repl/PythonInterpreterSpec.scala  |   6 ++--
 .../apache}/livy/repl/PythonSessionSpec.scala      |   6 ++--
 .../apache}/livy/repl/ReplDriverSuite.scala        |   8 +++---
 .../apache}/livy/repl/ScalaInterpreterSpec.scala   |   4 +--
 .../apache}/livy/repl/SessionSpec.scala            |   8 +++---
 .../apache}/livy/repl/SparkRInterpreterSpec.scala  |   4 +--
 .../apache}/livy/repl/SparkRSessionSpec.scala      |   4 +--
 .../apache}/livy/repl/SparkSessionSpec.scala       |   6 ++--
 rsc/pom.xml                                        |  18 ++++++------
 .../apache}/livy/rsc/BaseProtocol.java             |   7 ++---
 .../apache}/livy/rsc/BypassJobStatus.java          |   6 ++--
 .../apache}/livy/rsc/ContextInfo.java              |   2 +-
 .../apache}/livy/rsc/ContextLauncher.java          |  15 +++++-----
 .../apache}/livy/rsc/DriverProcessInfo.java        |   2 +-
 .../apache}/livy/rsc/FutureListener.java           |   2 +-
 .../apache}/livy/rsc/JobHandleImpl.java            |   6 ++--
 .../cloudera => org/apache}/livy/rsc/PingJob.java  |   6 ++--
 .../apache}/livy/rsc/RSCClient.java                |  19 ++++++------
 .../apache}/livy/rsc/RSCClientFactory.java         |   8 +++---
 .../cloudera => org/apache}/livy/rsc/RSCConf.java  |   4 +--
 .../apache}/livy/rsc/ReplJobResults.java           |   4 +--
 .../cloudera => org/apache}/livy/rsc/Utils.java    |   2 +-
 .../apache}/livy/rsc/driver/AddFileJob.java        |   6 ++--
 .../apache}/livy/rsc/driver/AddJarJob.java         |   6 ++--
 .../apache}/livy/rsc/driver/BypassJob.java         |  10 +++----
 .../apache}/livy/rsc/driver/BypassJobWrapper.java  |  10 +++----
 .../apache}/livy/rsc/driver/JobContextImpl.java    |   6 ++--
 .../apache}/livy/rsc/driver/JobWrapper.java        |   4 +--
 .../livy/rsc/driver/MutableClassLoader.java        |   2 +-
 .../apache}/livy/rsc/driver/RSCDriver.java         |  24 ++++++++--------
 .../livy/rsc/driver/RSCDriverBootstrapper.java     |   6 ++--
 .../apache}/livy/rsc/driver/Statement.java         |   2 +-
 .../apache}/livy/rsc/driver/StatementState.java    |   2 +-
 .../apache}/livy/rsc/rpc/KryoMessageCodec.java     |   6 ++--
 .../cloudera => org/apache}/livy/rsc/rpc/README.md |   0
 .../cloudera => org/apache}/livy/rsc/rpc/Rpc.java  |   8 +++---
 .../apache}/livy/rsc/rpc/RpcDispatcher.java        |   4 +--
 .../apache}/livy/rsc/rpc/RpcException.java         |   2 +-
 .../apache}/livy/rsc/rpc/RpcServer.java            |   8 +++---
 .../apache}/livy/rsc/rpc/SaslHandler.java          |   4 +--
 .../services/com.cloudera.livy.LivyClientFactory   |   1 -
 .../services/org.apache.livy.LivyClientFactory     |   1 +
 .../apache}/livy/rsc/TestJobHandle.java            |   4 +--
 .../apache}/livy/rsc/TestSparkClient.java          |  32 ++++++++++-----------
 .../apache}/livy/rsc/rpc/TestKryoMessageCodec.java |   2 +-
 .../apache}/livy/rsc/rpc/TestRpc.java              |  10 +++----
 scala-api/pom.xml                                  |  14 ++++-----
 scala-api/scala-2.10/pom.xml                       |   8 +++---
 scala-api/scala-2.11/pom.xml                       |   8 +++---
 .../apache}/livy/scalaapi/LivyScalaClient.scala    |   4 +--
 .../apache}/livy/scalaapi/ScalaJobContext.scala    |   4 +--
 .../apache}/livy/scalaapi/ScalaJobHandle.scala     |   6 ++--
 .../apache}/livy/scalaapi/package.scala            |   2 +-
 .../apache}/livy/scalaapi/ScalaClientTest.scala    |   8 +++---
 .../livy/scalaapi/ScalaClientTestUtils.scala       |   4 +--
 .../apache}/livy/scalaapi/ScalaJobHandleTest.scala |   6 ++--
 scala/pom.xml                                      |   8 +++---
 scalastyle.xml                                     |   4 +--
 server/pom.xml                                     |  12 ++++----
 .../apache}/livy/server/ui/static/all-sessions.js  |   0
 .../livy/server/ui/static/batches-table.html       |   0
 .../livy/server/ui/static/bootstrap.min.css        |   0
 .../apache}/livy/server/ui/static/bootstrap.min.js |   0
 .../server/ui/static/dataTables.bootstrap.min.css  |   0
 .../server/ui/static/dataTables.bootstrap.min.js   |   0
 .../livy/server/ui/static/jquery-3.2.1.min.js      |   0
 .../livy/server/ui/static/jquery.dataTables.min.js |   0
 .../livy/server/ui/static/livy-mini-logo.png       | Bin
 .../apache}/livy/server/ui/static/livy-ui.css      |   0
 .../livy/server/ui/static/sessions-table.html      |   0
 .../cloudera => org/apache}/livy/LivyConf.scala    |   8 +++---
 .../cloudera => org/apache}/livy/package.scala     |   2 +-
 .../apache}/livy/server/AccessFilter.scala         |   4 +--
 .../apache}/livy/server/ApiVersioningSupport.scala |   2 +-
 .../apache}/livy/server/ApiVersions.scala          |   2 +-
 .../apache}/livy/server/CsrfFilter.scala           |   3 +-
 .../apache}/livy/server/JsonServlet.scala          |   2 +-
 .../apache}/livy/server/LivyServer.scala           |  20 ++++++-------
 .../apache}/livy/server/SessionServlet.scala       |   8 +++---
 .../apache}/livy/server/WebServer.scala            |   4 +--
 .../apache}/livy/server/batch/BatchSession.scala   |  12 ++++----
 .../livy/server/batch/BatchSessionServlet.scala    |  12 ++++----
 .../livy/server/batch/CreateBatchRequest.scala     |   2 +-
 .../interactive/CreateInteractiveRequest.scala     |   4 +--
 .../server/interactive/InteractiveSession.scala    |  23 +++++++--------
 .../interactive/InteractiveSessionServlet.scala    |  16 +++++------
 .../livy/server/interactive/SessionHeartbeat.scala |  10 +++----
 .../livy/server/recovery/BlackholeStateStore.scala |   4 +--
 .../server/recovery/FileSystemStateStore.scala     |   6 ++--
 .../livy/server/recovery/SessionStore.scala        |   6 ++--
 .../apache}/livy/server/recovery/StateStore.scala  |   8 +++---
 .../livy/server/recovery/ZooKeeperStateStore.scala |   6 ++--
 .../apache}/livy/server/ui/UIServlet.scala         |   4 +--
 .../apache}/livy/sessions/Session.scala            |   6 ++--
 .../apache}/livy/sessions/SessionManager.scala     |  12 ++++----
 .../cloudera => org/apache}/livy/utils/Clock.scala |   2 +-
 .../apache}/livy/utils/LineBufferedProcess.scala   |   4 +--
 .../apache}/livy/utils/LineBufferedStream.scala    |   4 +--
 .../apache}/livy/utils/LivySparkUtils.scala        |   7 ++---
 .../apache}/livy/utils/SparkApp.scala              |   5 ++--
 .../apache}/livy/utils/SparkProcApp.scala          |   5 ++--
 .../apache}/livy/utils/SparkProcessBuilder.scala   |   5 ++--
 .../apache}/livy/utils/SparkYarnApp.scala          |   5 ++--
 .../livy/server/ApiVersioningSupportSpec.scala     |   4 +--
 .../apache}/livy/server/BaseJsonServletSpec.scala  |   4 +--
 .../livy/server/BaseSessionServletSpec.scala       |   8 +++---
 .../apache}/livy/server/JsonServletSpec.scala      |   2 +-
 .../apache}/livy/server/SessionServletSpec.scala   |  11 ++++---
 .../livy/server/batch/BatchServletSpec.scala       |  12 ++++----
 .../livy/server/batch/BatchSessionSpec.scala       |  10 +++----
 .../livy/server/batch/CreateBatchRequestSpec.scala |   4 +--
 .../interactive/BaseInteractiveServletSpec.scala   |  10 +++----
 .../interactive/CreateInteractiveRequestSpec.scala |   6 ++--
 .../InteractiveSessionServletSpec.scala            |  14 ++++-----
 .../interactive/InteractiveSessionSpec.scala       |  14 ++++-----
 .../livy/server/interactive/JobApiSpec.scala       |  16 +++++------
 .../server/interactive/SessionHeartbeatSpec.scala  |  10 +++----
 .../server/recovery/BlackholeStateStoreSpec.scala  |   4 +--
 .../server/recovery/FileSystemStateStoreSpec.scala |   4 +--
 .../livy/server/recovery/SessionStoreSpec.scala    |   6 ++--
 .../livy/server/recovery/StateStoreSpec.scala      |   6 ++--
 .../server/recovery/ZooKeeperStateStoreSpec.scala  |   6 ++--
 .../apache}/livy/sessions/MockSession.scala        |   4 +--
 .../apache}/livy/sessions/SessionManagerSpec.scala |  12 ++++----
 .../apache}/livy/sessions/SessionSpec.scala        |   4 +--
 .../apache}/livy/utils/LivySparkUtilsSuite.scala   |   8 +++---
 .../apache}/livy/utils/SparkYarnAppSpec.scala      |   7 ++---
 test-lib/pom.xml                                   |  10 +++----
 .../apache}/livy/test/apps/FailingApp.java         |   2 +-
 .../apache}/livy/test/apps/SimpleSparkApp.java     |   2 +-
 .../apache}/livy/test/jobs/Echo.java               |   6 ++--
 .../apache}/livy/test/jobs/Failure.java            |   6 ++--
 .../apache}/livy/test/jobs/FileReader.java         |   6 ++--
 .../apache}/livy/test/jobs/GetCurrentUser.java     |   6 ++--
 .../apache}/livy/test/jobs/SQLGetTweets.java       |   6 ++--
 .../apache}/livy/test/jobs/Sleeper.java            |   6 ++--
 .../apache}/livy/test/jobs/SmallCount.java         |   6 ++--
 .../apache}/livy/test/jobs/VoidJob.java            |   6 ++--
 .../apache}/livy/test/jobs/ScalaEcho.scala         |   4 +--
 .../apache}/livy/test/jobs/spark2/DatasetTest.java |   6 ++--
 .../livy/test/jobs/spark2/SparkSessionTest.java    |   6 ++--
 230 files changed, 687 insertions(+), 703 deletions(-)

commit cb5b8aac505db58f17681fa44e875d9f0ac9e66a
Author: jerryshao <sshao@hortonworks.com>
Date:   Tue Jul 4 17:24:00 2017 +0800

    LIVY-374. Update and unify all the license header to Apache
    
    This PR aims to update the license header of all the codes to Apache.
    
    This is one task to move to Apache.
    
    Author: jerryshao <sshao@hortonworks.com>
    
    Closes #11 from jerryshao/LIVY-374.

 .rat-excludes                                      | 26 ++++++++++
 assembly/assembly.xml                              | 16 ++++++
 assembly/pom.xml                                   | 15 +++---
 bin/livy-server                                    | 15 +++---
 checkstyle-suppressions.xml                        | 15 +++---
 checkstyle.xml                                     | 15 +++---
 client-common/pom.xml                              | 15 +++---
 .../livy/client/common/AbstractJobHandle.java      | 15 +++---
 .../cloudera/livy/client/common/BufferUtils.java   | 15 +++---
 .../cloudera/livy/client/common/ClientConf.java    | 15 +++---
 .../cloudera/livy/client/common/HttpMessages.java  | 15 +++---
 .../cloudera/livy/client/common/Serializer.java    | 15 +++---
 .../com/cloudera/livy/client/common/TestUtils.java | 15 +++---
 .../livy/client/common/TestAbstractJobHandle.java  | 15 +++---
 .../livy/client/common/TestBufferUtils.java        | 15 +++---
 .../livy/client/common/TestClientConf.java         | 15 +++---
 .../livy/client/common/TestHttpMessages.java       | 15 +++---
 .../livy/client/common/TestSerializer.java         | 15 +++---
 .../cloudera/livy/client/common/TestTestUtils.java | 15 +++---
 client-http/pom.xml                                | 15 +++---
 .../com/cloudera/livy/client/http/HttpClient.java  | 15 +++---
 .../livy/client/http/HttpClientFactory.java        | 15 +++---
 .../com/cloudera/livy/client/http/HttpConf.java    | 15 +++---
 .../cloudera/livy/client/http/JobHandleImpl.java   | 15 +++---
 .../cloudera/livy/client/http/LivyConnection.java  | 15 +++---
 .../cloudera/livy/client/http/HttpClientSpec.scala | 15 +++---
 .../livy/client/http/LivyConnectionSpec.scala      | 15 +++---
 conf/livy-env.sh.template                          | 15 +++---
 conf/log4j.properties.template                     | 16 +++---
 core/pom.xml                                       | 15 +++---
 core/scala-2.10/pom.xml                            | 15 +++---
 core/scala-2.11/pom.xml                            | 15 +++---
 .../src/main/scala/com/cloudera/livy/Logging.scala | 15 +++---
 core/src/main/scala/com/cloudera/livy/Utils.scala  | 15 +++---
 core/src/main/scala/com/cloudera/livy/msgs.scala   | 15 +++---
 .../scala/com/cloudera/livy/sessions/Kind.scala    | 15 +++---
 .../com/cloudera/livy/sessions/SessionState.scala  | 15 +++---
 .../com/cloudera/livy/LivyBaseUnitTestSuite.scala  | 15 +++---
 coverage/pom.xml                                   | 15 +++---
 dev/livy-shell                                     | 15 ++++++
 dev/spark/bin/spark-submit                         | 15 ++++++
 dev/travis-upload-logs.sh                          | 16 ++++++
 examples/pom.xml                                   | 15 +++---
 .../java/com/cloudera/livy/examples/PiApp.java     | 15 +++---
 examples/src/main/python/pi_app.py                 | 15 +++---
 .../com/cloudera/livy/examples/WordCountApp.scala  | 15 +++---
 integration-test/minicluster-dependencies/pom.xml  | 15 +++---
 .../minicluster-dependencies/scala-2.10/pom.xml    | 15 +++---
 .../minicluster-dependencies/scala-2.11/pom.xml    | 15 +++---
 integration-test/pom.xml                           | 15 +++---
 .../test/framework/BaseIntegrationTestSuite.scala  | 15 +++---
 .../com/cloudera/livy/test/framework/Cluster.scala | 15 +++---
 .../livy/test/framework/LivyRestClient.scala       | 15 +++---
 .../cloudera/livy/test/framework/MiniCluster.scala | 15 +++---
 .../cloudera/livy/test/framework/RealCluster.scala | 15 +++---
 integration-test/src/test/resources/batch.py       | 15 +++---
 .../src/test/resources/log4j.properties            | 15 +++---
 .../src/test/resources/test_python_api.py          | 15 +++---
 .../scala/com/cloudera/livy/test/BatchIT.scala     | 15 +++---
 .../com/cloudera/livy/test/InteractiveIT.scala     | 15 +++---
 .../scala/com/cloudera/livy/test/JobApiIT.scala    | 15 +++---
 .../src/test/spark2/scala/Spark2JobApiIT.scala     | 15 +++---
 pom.xml                                            | 57 ++++++++++++----------
 python-api/pom.xml                                 | 16 ++++++
 python-api/setup.py                                | 15 +++---
 python-api/src/main/python/livy/__init__.py        | 15 +++---
 python-api/src/main/python/livy/client.py          | 15 +++---
 python-api/src/main/python/livy/job_context.py     | 15 +++---
 python-api/src/main/python/livy/job_handle.py      | 15 +++---
 .../src/test/python/livy-tests/client_test.py      | 15 +++---
 repl/pom.xml                                       | 15 +++---
 repl/scala-2.10/pom.xml                            | 15 +++---
 .../com/cloudera/livy/repl/SparkInterpreter.scala  | 15 +++---
 .../cloudera/livy/repl/SparkInterpreterSpec.scala  | 15 +++---
 repl/scala-2.11/pom.xml                            | 15 +++---
 .../com/cloudera/livy/repl/SparkInterpreter.scala  | 15 +++---
 .../cloudera/livy/repl/SparkInterpreterSpec.scala  | 15 +++---
 repl/src/main/resources/fake_shell.py              | 17 ++++---
 .../livy/repl/AbstractSparkInterpreter.scala       | 15 +++---
 .../com/cloudera/livy/repl/BypassPySparkJob.scala  | 15 +++---
 .../scala/com/cloudera/livy/repl/Interpreter.scala | 15 +++---
 .../cloudera/livy/repl/ProcessInterpreter.scala    | 15 +++---
 .../cloudera/livy/repl/PySparkJobProcessor.scala   | 15 +++---
 .../com/cloudera/livy/repl/PythonInterpreter.scala | 15 +++---
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  | 15 +++---
 .../scala/com/cloudera/livy/repl/Session.scala     | 15 +++---
 .../livy/repl/SparkContextInitializer.scala        | 15 +++---
 .../com/cloudera/livy/repl/SparkRInterpreter.scala | 15 +++---
 .../scala/com/cloudera/livy/repl/package.scala     | 15 +++---
 repl/src/test/resources/log4j.properties           | 15 +++---
 .../cloudera/livy/repl/BaseInterpreterSpec.scala   | 15 +++---
 .../com/cloudera/livy/repl/BaseSessionSpec.scala   | 15 +++---
 .../cloudera/livy/repl/PythonInterpreterSpec.scala | 15 +++---
 .../com/cloudera/livy/repl/PythonSessionSpec.scala | 15 +++---
 .../com/cloudera/livy/repl/ReplDriverSuite.scala   | 15 +++---
 .../cloudera/livy/repl/ScalaInterpreterSpec.scala  | 15 +++---
 .../scala/com/cloudera/livy/repl/SessionSpec.scala | 15 +++---
 .../cloudera/livy/repl/SparkRInterpreterSpec.scala | 15 +++---
 .../com/cloudera/livy/repl/SparkRSessionSpec.scala | 15 +++---
 .../com/cloudera/livy/repl/SparkSessionSpec.scala  | 15 +++---
 scala-api/pom.xml                                  | 15 +++---
 scala-api/scala-2.10/pom.xml                       | 15 +++---
 scala-api/scala-2.11/pom.xml                       | 15 +++---
 .../cloudera/livy/scalaapi/LivyScalaClient.scala   | 15 +++---
 .../cloudera/livy/scalaapi/ScalaJobContext.scala   | 15 +++---
 .../cloudera/livy/scalaapi/ScalaJobHandle.scala    | 15 +++---
 .../scala/com/cloudera/livy/scalaapi/package.scala | 15 +++---
 .../cloudera/livy/scalaapi/ScalaClientTest.scala   | 15 +++---
 .../livy/scalaapi/ScalaClientTestUtils.scala       | 15 +++---
 .../livy/scalaapi/ScalaJobHandleTest.scala         | 15 +++---
 scala/pom.xml                                      | 15 +++---
 scalastyle.xml                                     | 15 +++---
 server/pom.xml                                     | 15 +++---
 .../cloudera/livy/server/ui/static/all-sessions.js | 15 +++---
 .../livy/server/ui/static/batches-table.html       | 15 +++---
 .../com/cloudera/livy/server/ui/static/livy-ui.css | 15 +++---
 .../livy/server/ui/static/sessions-table.html      | 15 +++---
 .../main/scala/com/cloudera/livy/LivyConf.scala    | 15 +++---
 .../src/main/scala/com/cloudera/livy/package.scala | 15 +++---
 .../com/cloudera/livy/server/AccessFilter.scala    | 15 +++---
 .../livy/server/ApiVersioningSupport.scala         | 15 +++---
 .../com/cloudera/livy/server/ApiVersions.scala     | 15 +++---
 .../com/cloudera/livy/server/CsrfFilter.scala      | 15 +++---
 .../com/cloudera/livy/server/JsonServlet.scala     | 15 +++---
 .../com/cloudera/livy/server/LivyServer.scala      | 15 +++---
 .../com/cloudera/livy/server/SessionServlet.scala  | 15 +++---
 .../scala/com/cloudera/livy/server/WebServer.scala | 15 +++---
 .../cloudera/livy/server/batch/BatchSession.scala  | 15 +++---
 .../livy/server/batch/BatchSessionServlet.scala    | 15 +++---
 .../livy/server/batch/CreateBatchRequest.scala     | 15 +++---
 .../interactive/CreateInteractiveRequest.scala     | 15 +++---
 .../server/interactive/InteractiveSession.scala    | 15 +++---
 .../interactive/InteractiveSessionServlet.scala    | 15 +++---
 .../livy/server/interactive/SessionHeartbeat.scala | 15 +++---
 .../livy/server/recovery/BlackholeStateStore.scala | 15 +++---
 .../server/recovery/FileSystemStateStore.scala     | 15 +++---
 .../livy/server/recovery/SessionStore.scala        | 15 +++---
 .../cloudera/livy/server/recovery/StateStore.scala | 15 +++---
 .../livy/server/recovery/ZooKeeperStateStore.scala | 15 +++---
 .../com/cloudera/livy/server/ui/UIServlet.scala    | 15 +++---
 .../scala/com/cloudera/livy/sessions/Session.scala | 15 +++---
 .../cloudera/livy/sessions/SessionManager.scala    | 15 +++---
 .../main/scala/com/cloudera/livy/utils/Clock.scala | 15 +++---
 .../cloudera/livy/utils/LineBufferedProcess.scala  | 15 +++---
 .../cloudera/livy/utils/LineBufferedStream.scala   | 15 +++---
 .../com/cloudera/livy/utils/LivySparkUtils.scala   | 15 +++---
 .../scala/com/cloudera/livy/utils/SparkApp.scala   | 15 +++---
 .../com/cloudera/livy/utils/SparkProcApp.scala     | 15 +++---
 .../cloudera/livy/utils/SparkProcessBuilder.scala  | 15 +++---
 .../com/cloudera/livy/utils/SparkYarnApp.scala     | 15 +++---
 server/src/test/resources/log4j.properties         | 15 +++---
 .../livy/server/ApiVersioningSupportSpec.scala     | 15 +++---
 .../cloudera/livy/server/BaseJsonServletSpec.scala | 15 +++---
 .../livy/server/BaseSessionServletSpec.scala       | 15 +++---
 .../com/cloudera/livy/server/JsonServletSpec.scala | 15 +++---
 .../cloudera/livy/server/SessionServletSpec.scala  | 15 +++---
 .../livy/server/batch/BatchServletSpec.scala       | 15 +++---
 .../livy/server/batch/BatchSessionSpec.scala       | 15 +++---
 .../livy/server/batch/CreateBatchRequestSpec.scala | 15 +++---
 .../interactive/BaseInteractiveServletSpec.scala   | 15 +++---
 .../interactive/CreateInteractiveRequestSpec.scala | 15 +++---
 .../InteractiveSessionServletSpec.scala            | 15 +++---
 .../interactive/InteractiveSessionSpec.scala       | 15 +++---
 .../livy/server/interactive/JobApiSpec.scala       | 15 +++---
 .../server/interactive/SessionHeartbeatSpec.scala  | 15 +++---
 .../server/recovery/BlackholeStateStoreSpec.scala  | 15 +++---
 .../server/recovery/FileSystemStateStoreSpec.scala | 15 +++---
 .../livy/server/recovery/SessionStoreSpec.scala    | 15 +++---
 .../livy/server/recovery/StateStoreSpec.scala      | 15 +++---
 .../server/recovery/ZooKeeperStateStoreSpec.scala  | 15 +++---
 .../com/cloudera/livy/sessions/MockSession.scala   | 15 +++---
 .../livy/sessions/SessionManagerSpec.scala         | 15 +++---
 .../com/cloudera/livy/sessions/SessionSpec.scala   | 15 +++---
 .../cloudera/livy/utils/LivySparkUtilsSuite.scala  | 15 +++---
 .../com/cloudera/livy/utils/SparkYarnAppSpec.scala | 15 +++---
 test-lib/pom.xml                                   | 15 +++---
 .../com/cloudera/livy/test/apps/FailingApp.java    | 15 +++---
 .../cloudera/livy/test/apps/SimpleSparkApp.java    | 15 +++---
 .../java/com/cloudera/livy/test/jobs/Echo.java     | 15 +++---
 .../java/com/cloudera/livy/test/jobs/Failure.java  | 15 +++---
 .../com/cloudera/livy/test/jobs/FileReader.java    | 15 +++---
 .../cloudera/livy/test/jobs/GetCurrentUser.java    | 15 +++---
 .../com/cloudera/livy/test/jobs/SQLGetTweets.java  | 15 +++---
 .../java/com/cloudera/livy/test/jobs/Sleeper.java  | 15 +++---
 .../com/cloudera/livy/test/jobs/SmallCount.java    | 15 +++---
 .../java/com/cloudera/livy/test/jobs/VoidJob.java  | 15 +++---
 .../com/cloudera/livy/test/jobs/ScalaEcho.scala    | 15 +++---
 .../livy/test/jobs/spark2/DatasetTest.java         | 15 +++---
 .../livy/test/jobs/spark2/SparkSessionTest.java    | 15 +++---
 189 files changed, 1410 insertions(+), 1484 deletions(-)

commit c591fcce6ee9556d9bb60f27de1e6162aa4ee024
Author: davidxdh <xu.donghui@zte.com.cn>
Date:   Mon Jul 3 15:00:09 2017 +0800

    LIVY-363. Method toURL in Utils.scala is deprecated
    
    [https://issues.cloudera.org/browse/LIVY-363](https://issues.cloudera.org/browse/LIVY-363)
    Method toURL in Utils.scala is deprecated. The toURL() method of File does not properly escape characters that aren't valid in a URL.
    
    Author: davidxdh <xu.donghui@zte.com.cn>
    
    Closes #9 from davidxdh/dev363.

 core/src/main/scala/com/cloudera/livy/Utils.scala | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 26d69a496415bb743af65dc3dccd12a667660bcc
Author: davidxdh <xu.donghui@zte.com.cn>
Date:   Mon Jul 3 14:51:30 2017 +0800

    LIVY-361. If LIVY_PID_DIR contains space, stop livy-server failed
    
    [https://issues.cloudera.org/browse/LIVY-361](https://issues.cloudera.org/browse/LIVY-361)
    There is an error in cheking pid file existence while stop livy-server. If LIVY_PID_DIR contains space, It is unable to get the pid file within it, so stop livy-server failed.
    
    Author: davidxdh <xu.donghui@zte.com.cn>
    
    Closes #8 from davidxdh/dev361.

 bin/livy-server | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 424776128ef82c7bff21bf366fdfc1af3768cc13
Author: davidxdh <xu.donghui@zte.com.cn>
Date:   Mon Jul 3 14:44:01 2017 +0800

    LIVY-360. The usage of livy-server description is not correct
    
    [https://issues.cloudera.org/browse/LIVY-360](https://issues.cloudera.org/browse/LIVY-360)
    The description of the usage of livy-server contains the start and stop parameters, but missing status parameter.
    
    Author: davidxdh <xu.donghui@zte.com.cn>
    
    Closes #7 from davidxdh/dev360.

 bin/livy-server | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 31b1135d25ce684b8d0783b171e446937126f327
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Mon Jul 3 14:30:31 2017 +0800

    LIVY-365. Include statement code in statement object
    
    PR moved from old repo https://github.com/cloudera/livy/pull/339
    
    [LIVY-365](https://issues.cloudera.org/browse/LIVY-365)
    
    Based on a user list request and my work on the Livy Web UI including the code that was run in the statement return is useful. Currently there is no way for a user to check what code was run through the Livy REST API. This will be helpful when the Session Page in the Web UI is added in [LIVY-343](https://issues.cloudera.org/browse/LIVY-343) which will include a table of statements. Currently such a table could only display output without context.
    
    I choose to insert `code` between `id` and `state` because it does not change value during execution like `state` and `output`. Since it can also makes sense to include between `state` and `output` given the potential length of its value, I can make such a change if requested.
    
    Tested manually and passes current Livy UTs and ITs
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #5 from ajbozarth/statement_code.

 README.rst                                                        | 2 ++
 repl/src/main/scala/com/cloudera/livy/repl/Session.scala          | 2 +-
 rsc/src/main/java/com/cloudera/livy/rsc/driver/Statement.java     | 6 ++++--
 .../livy/server/interactive/InteractiveSessionServletSpec.scala   | 8 +++-----
 4 files changed, 10 insertions(+), 8 deletions(-)

commit 0d7d81b035779152ed04e7bcc6b2d3499e4c5674
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Mon Jul 3 14:26:56 2017 +0800

    LIVY-352. Web UI: Added pagination by updating to use JQuery DataTables
    
    PR moved from old repo https://github.com/cloudera/livy/pull/326
    
    [LIVY-352](https://issues.cloudera.org/browse/LIVY-352)
    
    Followup to https://github.com/cloudera/livy/pull/319 adding pagination and search by switching to use jQuery DataTables like the Spark Web UI.
    
    ![none](https://cloud.githubusercontent.com/assets/13952758/25873293/cdd1c466-34c2-11e7-95bd-67d24e775036.png)
    ![both](https://cloud.githubusercontent.com/assets/13952758/25873299/d02de820-34c2-11e7-93bf-af0b33e3c1f2.png)
    ![sessions](https://cloud.githubusercontent.com/assets/13952758/25873304/d582167a-34c2-11e7-9c0b-73620cf4bf80.png)
    ![batch](https://cloud.githubusercontent.com/assets/13952758/25873307/d71f7838-34c2-11e7-9d2b-1462af2f8f6e.png)
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #3 from ajbozarth/ui-pagination.

 .../cloudera/livy/server/ui/static/all-sessions.js |   6 +
 .../livy/server/ui/static/batches-table.html       |   2 +-
 .../server/ui/static/dataTables.bootstrap.min.css  |   1 +
 .../server/ui/static/dataTables.bootstrap.min.js   |   8 +
 .../livy/server/ui/static/jquery.dataTables.min.js | 167 +++++++++++++++++++++
 .../livy/server/ui/static/sessions-table.html      |   3 +-
 .../com/cloudera/livy/server/ui/UIServlet.scala    |   3 +
 7 files changed, 188 insertions(+), 2 deletions(-)

commit 9d08a58671c50ce9d24ec62d43b743c62926fc1b
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Fri Jun 30 15:36:39 2017 +0800

    LIVY-353. Web UI: Added link to Spark UI for Sessions running on Yarn
    
    PR moved from old repo https://github.com/cloudera/livy/pull/327
    
    [LIVY-353](https://issues.cloudera.org/browse/LIVY-353)
    
    Followup to https://github.com/cloudera/livy/pull/319 adding a link to the Application Id that links to the Spark UI. The link is grabbed from session.appInfo.sparkUiUrl if it exists, otherwise no link is created.
    
    Screenshots
    
    With an appId without link (in this case before the UI is generated):
    ![no-link](https://cloud.githubusercontent.com/assets/13952758/25873597/0307dd40-34c4-11e7-9993-925cbf7c749b.png)
    With an appId link:
    ![link](https://cloud.githubusercontent.com/assets/13952758/25873599/0454c69a-34c4-11e7-85d2-31ebe993c5a3.png)
    What it links to:
    ![spark](https://cloud.githubusercontent.com/assets/13952758/25873602/05864318-34c4-11e7-8e2c-2222ef7f6116.png)
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #4 from ajbozarth/ui-app-link.

 .../com/cloudera/livy/server/ui/static/all-sessions.js      | 13 +++++++++++--
 .../com/cloudera/livy/server/ui/static/batches-table.html   |  8 +++++++-
 .../com/cloudera/livy/server/ui/static/sessions-table.html  |  8 +++++++-
 3 files changed, 25 insertions(+), 4 deletions(-)

commit 257ccdfd693beaf4a415bf29b98119e066cbb762
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Fri Jun 30 15:27:06 2017 +0800

    LIVY-357. Web UI: Updated staticResourceServlet to return 404s and not throw WARNs
    
    PR moved from old repo https://github.com/cloudera/livy/pull/339
    
    [LIVY-357](https://issues.cloudera.org/browse/LIVY-357)
    
    Since https://github.com/cloudera/livy/pull/319 added the UI whenever a static resource is accessed a `MimeException` is thrown as a `WARN`. This was caused because a `InputStream` must be wrapped in a `BufferedInputStream` for a full implementation.
    
    I updated `staticResourceServlet` with the wrapper as well as adding a `404 File not found` return when a file does not exist (currently an empty file is returned in such a case)
    
    Tested manually
    
    Author: Alex Bozarth <ajbozart@us.ibm.com>
    
    Closes #2 from ajbozarth/ui-error.

 .../main/scala/com/cloudera/livy/server/LivyServer.scala | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

commit 92de371cf7b5f1f1cf38146f0e51433abfd74a39
Author: jerryshao <sshao@hortonworks.com>
Date:   Wed Jun 28 15:25:42 2017 +0800

    Add the document about how to use this script
    
    (cherry picked from commit 48606e805bbbf217cb637072e064717fb2f0312c)
    Signed-off-by: jerryshao <sshao@hortonworks.com>

 dev/merge_livy_pr.py | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 8cdd5ed4050f03457c2817c0b328a24ff456c3f6
Author: jerryshao <sshao@hortonworks.com>
Date:   Wed Jun 28 13:12:33 2017 +0800

    Create a python script to merge PR from Github to Apache Git
    
    (cherry picked from commit 3eef969f2c57dd324c81a682fc1b7bf04fb8be3b)
    Signed-off-by: jerryshao <sshao@hortonworks.com>

 dev/merge_livy_pr.py | 444 +++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 444 insertions(+)

commit 4758ecdcadd7b85f265fea58f4bea9eb35266315
Author: jerryshao <sshao@hortonworks.com>
Date:   Fri Jun 30 10:42:52 2017 +0800

    Minor. Fix travis build error due to unsupported oraclejdk7 in trusty container
    
    (cherry picked from commit 6d80c91953e796528ef23f031521fea7da73ad3a)
    Signed-off-by: jerryshao <sshao@hortonworks.com>

 .travis.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9ae24d08738652ba5fd817780711d01b110d74a9
Author: pralabhkumar <pralabhkumar@gmail.com>
Date:   Thu Jun 8 13:22:25 2017 +0530

    Livy:337 Binding RPCServer to user provided port and not random port (#334)
    
    * Code changes in RPCserver for user provided port
    
    * Indentation Changes
    
    * Indentation Changes
    
    * Indentation Changes
    
    * Indentation Changes
    
    * Configuring Port Range
    
    * Documentation Changed
    
    * launcher.port.range will take care of launching RPC
    
    * Checkstyle changes
    
    * Checkstyle changes
    
    * Dummy push
    
    * Code changes
    
    * Changed BindException Handling to SocketException Handling
    
    * Changed Import Order
    
    * Code changes to increase port range
    
    * Set Port isConntect to true
    
    * Indentation Changes & port range in livy-client.conf.template
    
    * Indentation changes
    
    * Changed visibilty of method private
    
    * Indentation Changes
    
    * Indenetation Changes
    
    * Unit test case to test port range
    
    * Checkstyle changes
    
    * Unit test case for port range
    
    * Added comment for Port Range Configuration and increase port range for unit test case

 conf/livy-client.conf.template                     |  5 +-
 .../main/java/com/cloudera/livy/rsc/RSCConf.java   |  4 +-
 .../java/com/cloudera/livy/rsc/rpc/RpcServer.java  | 86 ++++++++++++++++++----
 .../java/com/cloudera/livy/rsc/rpc/TestRpc.java    | 27 +++++++
 4 files changed, 104 insertions(+), 18 deletions(-)

commit 02eef9a5b22d42cf5837f1a0b4805775116e4885
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Jun 2 10:14:05 2017 +0800

    Make sure to install setuptools less then version 36.0.0 to avoid module six not found issue (#341)
    
    Change-Id: I7ba64be56354be5a03e6f6b349990af6b662e457

 .travis.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 2abb8a3d2850c506ffd2b8a210813f1b8353045f
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Thu May 18 11:24:38 2017 +0800

    LIVY-358. [Follow-up] Add unit test to verify header size configurations (#331)
    
    * Add unit test to verify large header size configuration
    
    Change-Id: I6c231f9fc9773d1ea40313661b7c49ccfaa44796
    
    * Style fix
    
    Change-Id: I24e617f95fd3e45a674a6b5a691428f0fdabcd89
    
    * Style fix
    
    Change-Id: I91e71979499da8ebba41223b6fe41862de168d03
    
    * Revert the changes
    
    Change-Id: Id7bbd1b2378867c8534b900bc7ba9b1234a9b985
    
    * Add configurations to livy.conf.template
    
    Change-Id: I84d428869bc5cc22aa7f00c6c603ea4a6b052964

 .../livy/client/http/LivyConnectionSpec.scala      | 53 ++++++++++++++--------
 conf/livy.conf.template                            |  4 ++
 2 files changed, 38 insertions(+), 19 deletions(-)

commit 59af39d7e7c85e10603fb66ad2997384cab1dcd0
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Sat May 13 00:45:42 2017 +0800

    LIVY-358. Make JettyServer Http request and response header size configurable (#329)
    
    * Provide Jetty Http Request/Response Header Size Configuration
    
    Kerberos over http requires larger header sizes than the default,
    or the HTTP Error 413 Request entity too large will be returned.
    This patch increases the default for Livy to 128K and also allows
    this to be configurable.
    
    * Change the conf key name
    
    Change-Id: Id274c8cc60d30e5d778f9c447502b7e7a789a8f0

 server/src/main/scala/com/cloudera/livy/LivyConf.scala | 18 +++++++++---------
 .../scala/com/cloudera/livy/server/WebServer.scala     |  7 ++++++-
 2 files changed, 15 insertions(+), 10 deletions(-)

commit d51e998204e3a10f9207280951f98edc8755c433
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri May 12 08:36:19 2017 +0800

    Minor. Add session information log when session is created (#325)
    
    * Add session information log when session is created
    
    Change-Id: I8702ebe1d893cf328b4490e5b5d09f3afd02b7ce
    
    * add more logs
    
    Change-Id: I969edf4e680e59e3ecfbaa50431ae61bd03d4795
    
    * simplify the code
    
    Change-Id: If2c7876ddb6020ace3872c9ae639d69d58b02f48
    
    * Address the comments
    
    Change-Id: Iba5f10ad73ff67b97af8292769b254346b8ef7c8

 .../com/cloudera/livy/server/batch/BatchSession.scala  | 11 ++++++++---
 .../livy/server/batch/CreateBatchRequest.scala         | 17 +++++++++++++++++
 .../server/interactive/CreateInteractiveRequest.scala  | 18 ++++++++++++++++++
 .../livy/server/interactive/InteractiveSession.scala   |  5 ++++-
 4 files changed, 47 insertions(+), 4 deletions(-)

commit 61b206e0adc0b3efa52ef91283238c85cbe117fd
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Tue May 9 14:02:22 2017 -0700

    LIVY-342. Create Livy UI: Create Web UI Servlet and All Sessions Page (#319)
    
    * squash of original ui poc code
    
    * Initial All Sessions Page code
    
    * finished all-sessions page and cleaned up code
    
    * Moved metrics and added ui redirect, added no sessions message
    
    * added conf to template, cleaned up missed code from last commit
    
    * UI enable/disable no long configureable, always on
    
    * nit
    
    * Address review and fixed some html/css errors
    
    * Fixed ITs and added a redirect to metrics when ui is disabled

 conf/livy.conf.template                            |   3 +
 .../cloudera/livy/test/framework/MiniCluster.scala |   2 +-
 server/pom.xml                                     |   3 +
 .../cloudera/livy/server/ui/static/all-sessions.js |  79 +++++++++++++++++++++
 .../livy/server/ui/static/batches-table.html       |  37 ++++++++++
 .../livy/server/ui/static/bootstrap.min.css        |  14 ++++
 .../livy/server/ui/static/bootstrap.min.js         |   7 ++
 .../livy/server/ui/static/jquery-3.2.1.min.js      |   4 ++
 .../livy/server/ui/static/livy-mini-logo.png       | Bin 0 -> 1121 bytes
 .../com/cloudera/livy/server/ui/static/livy-ui.css |  21 ++++++
 .../livy/server/ui/static/sessions-table.html      |  53 ++++++++++++++
 .../main/scala/com/cloudera/livy/LivyConf.scala    |   2 +
 .../com/cloudera/livy/server/LivyServer.scala      |  27 ++++++-
 .../com/cloudera/livy/server/ui/UIServlet.scala    |  76 ++++++++++++++++++++
 14 files changed, 326 insertions(+), 2 deletions(-)

commit 0ddcaf68d28a5120b1b74692bd92dde2301f5170
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Wed May 10 04:25:57 2017 +0800

    LIVY-355. Refactor statement progress tracker to fix binary compatible issue (#323)
    
    * Refactor statement progress tracker to fix binary compatible issue
    
    Change-Id: Ie91fd77472aeebe138bd6711a0baa82269a6b247
    
    * refactor again to simplify the code
    
    Change-Id: I9380bcb8dd2b594250783633a3c68e290ac7ea28
    
    * isolate statementId to job group logic
    
    Change-Id: If554aee2c0b3d96b54804f94cbb8df9af7843ab4

 .../com/cloudera/livy/repl/SparkInterpreter.scala  |   4 +-
 .../cloudera/livy/repl/SparkInterpreterSpec.scala  |   2 +-
 .../com/cloudera/livy/repl/SparkInterpreter.scala  |   4 +-
 .../cloudera/livy/repl/SparkInterpreterSpec.scala  |   2 +-
 .../scala/com/cloudera/livy/repl/Interpreter.scala |  10 -
 .../cloudera/livy/repl/ProcessInterpreter.scala    |   7 +-
 .../com/cloudera/livy/repl/PythonInterpreter.scala |   9 +-
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  |  10 +-
 .../scala/com/cloudera/livy/repl/Session.scala     |  40 +++-
 .../com/cloudera/livy/repl/SparkRInterpreter.scala |  10 +-
 .../livy/repl/StatementProgressListener.scala      | 162 ---------------
 .../cloudera/livy/repl/PythonInterpreterSpec.scala |   6 +-
 .../com/cloudera/livy/repl/PythonSessionSpec.scala |   6 +-
 .../cloudera/livy/repl/ScalaInterpreterSpec.scala  |   2 +-
 .../cloudera/livy/repl/SparkRInterpreterSpec.scala |   3 +-
 .../com/cloudera/livy/repl/SparkRSessionSpec.scala |   3 +-
 .../com/cloudera/livy/repl/SparkSessionSpec.scala  |  35 +++-
 .../livy/repl/StatementProgressListenerSpec.scala  | 227 ---------------------
 18 files changed, 93 insertions(+), 449 deletions(-)

commit f5ef489816bb55c9ee3a9008c82e9015dbe58478
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Apr 28 14:45:23 2017 +0800

    Fix two SparkR test issue regarding to different versions of R (#322)
    
    Change-Id: Id301749a5e678666df771aa8f02cce149b56ff93

 .../com/cloudera/livy/repl/SparkRInterpreterSpec.scala     |  8 ++++----
 .../scala/com/cloudera/livy/repl/SparkRSessionSpec.scala   | 14 +++++---------
 2 files changed, 9 insertions(+), 13 deletions(-)

commit e8c3e067782c98f9ceeb1b62e18ff676c3921fab
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Apr 28 11:48:31 2017 +0800

    Remove guava api in Livy (#321)
    
    Change-Id: Ia8b635dbb9e8ef8e55bbe566967c5abaa5e07020

 rsc/src/main/java/com/cloudera/livy/rsc/driver/StatementState.java | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 7212e3f3bbed07ab8ea372cd7a56ee1cd2b56693
Author: Praveen Kanamarlapudi <kpraveen@outlook.com>
Date:   Tue Apr 18 13:02:23 2017 -0700

    LIVY-340. Add YARN queue support to interactive sessions. (#314)

 .../com/cloudera/livy/server/interactive/InteractiveSession.scala      | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 511a05f2282cd85a457017cc5a739672aaed5238
Author: Alex Man <alex-the-man@users.noreply.github.com>
Date:   Tue Apr 18 12:59:57 2017 -0700

    Minor. Changed git clone command in README to use http instead of ssh. (#315)

 README.rst | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 07f6072f9d90ec970a1f9fbaccf0452f3a783538
Author: Alex Man <alex-the-man@users.noreply.github.com>
Date:   Sat Apr 8 17:12:37 2017 -0700

    LIVY-323. Fixed livy-repl doesn't start with a lot of spark packages. (#312)
    
    Some Spark packages are depending on scala-reflect 2.11.0 and it conflicts with Spark's scala version 2.11.8.
    This's not Livy's fault actually but doesn't hurt to make Livy more fault tolerant.
    Since the scala-reflect jar with the correct version must already be in CLASSPATH, fixed livy-repl to not load user supplied scala-reflect jars.

 .../src/main/scala/com/cloudera/livy/repl/SparkInterpreter.scala      | 4 ++++
 .../src/main/scala/com/cloudera/livy/repl/SparkInterpreter.scala      | 4 ++++
 2 files changed, 8 insertions(+)

commit 221aa9cf8f33b48fd9c792f67c61b78708bfae99
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Wed Apr 5 15:56:48 2017 -0700

    LIVY-287. Add Deprecation to Livy Configurations and update naming. (#300)
    
    Updates to Livy configurations
    
    - Added config deprecation with alternatives to ClientConf, HTTPConf, RSCConf, and LivyConf.
    - Added framework for deprecation without alternatives when the need arises.
    - Updated naming conventions in code and templates to use - instead of _ or camelCase and deprecated previous configs.
    - Updated TestClientConf and added a new test.

 client-common/pom.xml                              |  5 ++
 .../cloudera/livy/client/common/ClientConf.java    | 61 ++++++++++++++-
 .../livy/client/common/TestClientConf.java         | 75 +++++++++++++++++-
 .../com/cloudera/livy/client/http/HttpConf.java    | 59 +++++++++++++-
 conf/livy-client.conf.template                     | 18 ++---
 conf/livy.conf.template                            | 10 +--
 conf/spark-blacklist.conf.template                 |  2 +-
 .../cloudera/livy/test/framework/MiniCluster.scala |  4 +-
 .../livy/repl/SparkContextInitializer.scala        |  4 +-
 .../main/java/com/cloudera/livy/rsc/RSCConf.java   | 91 ++++++++++++++++++----
 .../main/scala/com/cloudera/livy/LivyConf.scala    | 65 +++++++++++++---
 .../com/cloudera/livy/server/LivyServer.scala      |  2 +-
 .../server/interactive/InteractiveSession.scala    |  2 +-
 13 files changed, 344 insertions(+), 54 deletions(-)

commit 0de0e28658d5490e289a290b3cdf8a9f12e19eb0
Author: Jonathan Alter <jonalter@users.noreply.github.com>
Date:   Wed Mar 22 23:56:57 2017 -0700

    LIVY-313. Fixed SparkRInterpreter always returning success. (#307)
    
    * LIVY-313. Fixed SparkRInterpreter always returning success.
    
    - Stopped redirecting stderr to stdout.
    - Continue to read ErrorStream (it was only being read once).
    - Checking for any errors returned by stderr before returning success.
    
    * Fixing scalastyle check error
    
    * Changing the way errors are handled in SparkRInterpreter
    
    * Fixing scalastyle check error
    
    * Updating SparkRSessionSpec

 .../com/cloudera/livy/repl/SparkRInterpreter.scala | 61 +++++++++++++++-------
 .../cloudera/livy/repl/SparkRInterpreterSpec.scala | 13 +++--
 .../com/cloudera/livy/repl/SparkRSessionSpec.scala |  8 +--
 3 files changed, 53 insertions(+), 29 deletions(-)

commit 5e6f9ed3fd2667599e52e3759d869ac535114145
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Fri Mar 17 00:48:34 2017 -0700

    LIVY-249. Update livy-server script to include status command and return 1 on error. (#311)
    
    Currently if livy-server fails to start it will still return 0 (success), this has been fixed. I also added a livy-server status command that will return a status output similar to that of livy-server start when it's already running or livy-server stop when it's already stopped. Lastly I updated all output text to use livy-server instead of livy_server since that's the actual name of the script.
    
    Tested manually.

 bin/livy-server | 22 ++++++++++++++++++----
 1 file changed, 18 insertions(+), 4 deletions(-)

commit b7cc00a947832568fed7110cb94affcdd067d375
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Thu Mar 16 09:58:03 2017 +0800

    Make several modules push-able to repo (#305)
    
    Change-Id: I9daec6ac7fdb2c9f727cbab6db042ec144c4edb8

 core/pom.xml   | 4 ----
 repl/pom.xml   | 4 ----
 server/pom.xml | 4 ----
 3 files changed, 12 deletions(-)

commit eb7e6ccfd1809e5738573ce7f0761cd8f879d121
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Wed Mar 15 05:37:08 2017 +0800

    LIVY-331. Fix flaky test 'interactive session should not gc-ed if session timeout check is off'. (#310)

 .../test/scala/com/cloudera/livy/sessions/SessionManagerSpec.scala    | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 2ff8f5c69f8d7ea05f445b8240945afe910c1ab5
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Tue Mar 14 03:52:02 2017 +0800

    LIVY-329. Fix two SSL issues. (#308)
    
    - Livy server url is exposed as http URL even https is enabled, so we should handle this.
    - Livy server SSL keystore password and key password currently set to same configurations, which should be separated.

 conf/livy.conf.template                                       |  3 +++
 server/src/main/scala/com/cloudera/livy/LivyConf.scala        |  4 ++++
 .../src/main/scala/com/cloudera/livy/server/LivyServer.scala  |  2 +-
 .../src/main/scala/com/cloudera/livy/server/WebServer.scala   | 11 +++--------
 4 files changed, 11 insertions(+), 9 deletions(-)

commit fbccb694d2f4eda8b82323b64cba12eea95edfac
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Mon Mar 13 14:12:10 2017 +0800

    LIVY-326. Change Hadoop dependencies to Apache Hadoop (#306)
    
    * Change Hadoop dependencies to Apache Hadoop
    
    Change-Id: I5500cc0061b03af1587700b7b0a7a147bbf0a333
    
    * Change to use Apache Hadoop 2.7.3
    
    Change-Id: Ied6a69e28fb4a9e4d1dcd97595c7ab253f1eaf82

 pom.xml                                                               | 2 +-
 server/src/main/scala/com/cloudera/livy/sessions/SessionManager.scala | 2 --
 2 files changed, 1 insertion(+), 3 deletions(-)

commit 70f23b90f9cc7fbe98663551a4cdff86a7c069dd
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Sun Mar 12 10:16:52 2017 +0800

    LIVY-272. Support Statement progress for interactive session. (#260)

 .../com/cloudera/livy/repl/SparkInterpreter.scala  |   4 +-
 .../cloudera/livy/repl/SparkInterpreterSpec.scala  |   2 +-
 .../com/cloudera/livy/repl/SparkInterpreter.scala  |   4 +-
 .../cloudera/livy/repl/SparkInterpreterSpec.scala  |   2 +-
 .../livy/repl/AbstractSparkInterpreter.scala       |  11 +-
 .../scala/com/cloudera/livy/repl/Interpreter.scala |  16 +-
 .../cloudera/livy/repl/ProcessInterpreter.scala    |  13 +-
 .../com/cloudera/livy/repl/PythonInterpreter.scala |  12 +-
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  |  15 +-
 .../scala/com/cloudera/livy/repl/Session.scala     |   3 +-
 .../com/cloudera/livy/repl/SparkRInterpreter.scala |  13 +-
 .../livy/repl/StatementProgressListener.scala      | 162 +++++++++++++++
 .../cloudera/livy/repl/PythonInterpreterSpec.scala |   7 +-
 .../com/cloudera/livy/repl/PythonSessionSpec.scala |   7 +-
 .../cloudera/livy/repl/ScalaInterpreterSpec.scala  |   5 +-
 .../cloudera/livy/repl/SparkRInterpreterSpec.scala |   5 +-
 .../com/cloudera/livy/repl/SparkRSessionSpec.scala |   5 +-
 .../com/cloudera/livy/repl/SparkSessionSpec.scala  |   6 +-
 .../livy/repl/StatementProgressListenerSpec.scala  | 227 +++++++++++++++++++++
 .../main/java/com/cloudera/livy/rsc/RSCConf.java   |   4 +
 .../com/cloudera/livy/rsc/driver/Statement.java    |  10 +
 .../InteractiveSessionServletSpec.scala            |   1 +
 .../interactive/InteractiveSessionSpec.scala       |  16 ++
 23 files changed, 509 insertions(+), 41 deletions(-)

commit 126b57e225dfe3c555644558c04f44e416a5c5ec
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Fri Mar 3 16:57:17 2017 -0800

    LIVY-319. Unify the indent for all POM files. (#302)
    
    Updated pom files that used 4 space indent to use 2 space indent to match the remaining pom files.

 examples/pom.xml  |  96 +++++-----
 repl/pom.xml      | 450 +++++++++++++++++++++++-----------------------
 scala-api/pom.xml | 114 ++++++------
 server/pom.xml    | 522 +++++++++++++++++++++++++++---------------------------
 4 files changed, 591 insertions(+), 591 deletions(-)

commit 76d969e58586f0fe2e707cc0bf81fdf595b01792
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Fri Mar 3 16:51:58 2017 -0800

    LIVY-90. Update conf dir to use templates (#301)
    
    - Added instructions to livy-client template.
    - Filled out livy-client.conf.template.
    - Updated conf naming to all camelCase, switched conf files to templates and updated .gitignore.

 .gitignore                                         |  4 +
 conf/livy-client.conf.template                     | 86 ++++++++++++++++++++++
 conf/{livy-env.sh => livy-env.sh.template}         |  0
 conf/{livy.conf => livy.conf.template}             |  0
 ...{log4j.properties => log4j.properties.template} |  0
 ...lacklist.conf => spark-blacklist.conf.template} |  0
 6 files changed, 90 insertions(+)

commit d74d5a9cdaf07fa9e6f7d1fe8ebfa161572fd81a
Author: Praveen Kanamarlapudi <kpraveen@outlook.com>
Date:   Mon Feb 27 14:39:16 2017 -0800

    LIVY-293: Redirect spark-submit log to REST response Log field for interactive sessions. (#297)
    
    Passing driverProcess to SparkApp for interactive sessions so session/log will return spark-submit log.

 .../com/cloudera/livy/rsc/ContextLauncher.java     | 62 +---------------------
 .../com/cloudera/livy/rsc/DriverProcessInfo.java   | 42 +++++++++++++++
 .../main/java/com/cloudera/livy/rsc/RSCClient.java |  8 ++-
 .../com/cloudera/livy/rsc/RSCClientFactory.java    |  7 ++-
 .../server/interactive/InteractiveSession.scala    |  5 +-
 .../cloudera/livy/utils/LineBufferedStream.scala   |  2 +-
 .../com/cloudera/livy/utils/SparkYarnApp.scala     |  4 +-
 .../com/cloudera/livy/utils/SparkYarnAppSpec.scala |  8 ++-
 8 files changed, 70 insertions(+), 68 deletions(-)

commit 932d397bf6d6fe7ed9df455f8230227cb0e3761b
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Sat Feb 25 02:24:05 2017 +0800

    LIVY-303. Add statement retention mechanism. (#279)
    
    To avoid OOM for long running sessions, introduce statement retention mechanism to remove old statements.
    
    Also refactor the statement state code to make it more clear.

 .../scala/com/cloudera/livy/repl/Session.scala     | 91 ++++++++++++----------
 .../scala/com/cloudera/livy/repl/SessionSpec.scala | 31 ++++++++
 .../main/java/com/cloudera/livy/rsc/RSCConf.java   |  4 +-
 .../com/cloudera/livy/rsc/driver/Statement.java    |  8 ++
 .../cloudera/livy/rsc/driver/StatementState.java   | 46 +++++++++++
 5 files changed, 140 insertions(+), 40 deletions(-)

commit 2aa910c9e148359b02965e5bc69341f7ac73b7b8
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Feb 24 04:18:05 2017 +0800

    Minor. Ignore empty string in configuration join. (#299)

 rsc/src/main/java/com/cloudera/livy/rsc/Utils.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bfdb5a1925327758b054d8f67191e2bf4bc2c2bb
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Thu Feb 23 06:05:54 2017 +0800

    LIVY-240. Improve the session gc mechanism. (#277)
    
    Current session gc mechanism has some issues:
    - Stopped session still needs to wait to timeout to gc-ed.
    -Batch session will be gc-ed unexpectedly in run-time when timing out, which makes long running application impossible.
    - Sometimes user doesn't want to stop idle sessions.
    
    Changes of this commit:
    - Never check the activity of batch session, which means batch session will only be gc-ed after stop.
    - Add a configuration to turn off activity check for interactive session, which meets some usage scenarios.
    - Add a configuration to control how long a finished session state will be kept in memory before cleaned out.

 conf/livy.conf                                     |  6 +++
 .../com/cloudera/livy/sessions/SessionState.scala  | 11 ++--
 .../main/scala/com/cloudera/livy/LivyConf.scala    |  8 +++
 .../cloudera/livy/sessions/SessionManager.scala    | 20 +++++++-
 .../livy/sessions/SessionManagerSpec.scala         | 58 +++++++++++++++++++++-
 5 files changed, 97 insertions(+), 6 deletions(-)

commit 6bfe17749c25da2145aac9eedbc6bedb1a4d33eb
Author: Alan Chin <akchin@us.ibm.com>
Date:   Tue Feb 21 17:30:12 2017 -0800

    LIVY-320. Livy python-api client test failing. (#298)
    
    Specified fields for client test. Travis CI looks to be defaulted to python 2.7, so it never came across this issue.

 python-api/src/test/python/livy-tests/client_test.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a72bbff6fbf961f7413f3ca87d2a244f182f98ff
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Tue Feb 21 17:29:33 2017 -0800

    LIVY-306. Removed hard-coded minimum timeout value. (#290)
    
    Currently a session timeout can't be configured below 1h. This is due to a hard-coded value that was missed in the clean up of LIVY-114 and LIVY-127.
    
    Removed the limit and the conf value (default of 1h) will be used.

 server/src/main/scala/com/cloudera/livy/sessions/Session.scala        | 1 -
 server/src/main/scala/com/cloudera/livy/sessions/SessionManager.scala | 2 +-
 server/src/test/scala/com/cloudera/livy/sessions/MockSession.scala    | 2 --
 3 files changed, 1 insertion(+), 4 deletions(-)

commit 14c29e4d425f44d1f3caad1469a2ea4e136f0f44
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Mon Feb 20 16:37:26 2017 +0800

    Fix issue for some parent poms (#295)
    
    Change-Id: Ibf549db71b0f6dfc2004c3ff602e92860a38a093

 core/pom.xml                                       | 16 --------
 core/scala-2.10/pom.xml                            | 17 +++++++++
 core/scala-2.11/pom.xml                            | 17 +++++++++
 core/src/main/resources/build.marker               |  0
 .../src/main/resources/build.marker                |  0
 pom.xml                                            | 44 +++++++++++++++++-----
 repl/src/main/resources/build.marker               |  0
 .../cloudera/livy/repl/ProcessInterpreter.scala    |  2 +-
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  |  2 +-
 .../com/cloudera/livy/repl/SparkRInterpreter.scala |  2 +-
 .../cloudera/livy/repl/PythonInterpreterSpec.scala |  2 +-
 scala-api/src/main/resources/build.marker          |  0
 scala/pom.xml                                      | 13 -------
 13 files changed, 72 insertions(+), 43 deletions(-)

commit ed1c86e874bee2d4323d6267cdf2a8d14b7db571
Author: Jeff Zhang <zjffdu@gmail.com>
Date:   Sat Feb 18 07:50:05 2017 +0800

    LIVY-315. Fixed SparkRInterpreter to respect config enableHiveContext. (#293)

 .../com/cloudera/livy/repl/ProcessInterpreter.scala   |  1 +
 .../com/cloudera/livy/repl/SparkRInterpreter.scala    | 19 ++++++++++++++-----
 2 files changed, 15 insertions(+), 5 deletions(-)

commit f7c434c87bd7ea6fd3a410669a3160c2d1c463f9
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Thu Feb 16 06:04:12 2017 +0800

    Minor. Relax the permission constraint of recovery state store folder. (#291)
    
    Emit warnings instead of throwing fatal errors.

 .../cloudera/livy/server/recovery/FileSystemStateStore.scala   | 10 ++++++----
 .../livy/server/recovery/FileSystemStateStoreSpec.scala        |  6 +++---
 2 files changed, 9 insertions(+), 7 deletions(-)

commit b872978cd7e0cd1e794233fbba958da805da98ab
Author: Jeff Zhang <zjffdu@gmail.com>
Date:   Wed Feb 15 17:31:39 2017 +0800

    LIVY-316. NPE when starting kinit thread (#292)

 server/src/main/scala/com/cloudera/livy/server/LivyServer.scala | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 693a79594675e3c9cc19756ce5aca4a435f8ba8d
Author: Alex Bozarth <ajbozart@us.ibm.com>
Date:   Tue Feb 14 17:31:54 2017 -0800

    Fixed a typo in the README (#289)

 README.rst | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a36e44f405dae0409815f6872762b1a38f9bffa9
Author: Jonathan Alter <jonalter@users.noreply.github.com>
Date:   Tue Feb 14 13:58:52 2017 -0800

    LIVY-274. Add travis CI status in README (#288)

 README.rst | 3 +++
 1 file changed, 3 insertions(+)

commit 663c6130a5f576965b74e4448e68bc7b7668ad48
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Mon Feb 13 15:08:21 2017 +0800

    LIVY-308. Avoid enabling Hive by default in Spark2. (#287)
    
    Fixed broken integration test on Spark 2.1.

 .travis.yml                                                  |  2 ++
 pom.xml                                                      | 12 ++++++++++++
 .../com/cloudera/livy/repl/SparkContextInitializer.scala     |  2 +-
 3 files changed, 15 insertions(+), 1 deletion(-)

commit 807036afe2d5aa8ff64ffb8f70632e993b626fcb
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Mon Feb 13 10:28:06 2017 +0800

    LIVY-310. Kinit should be called before doing recovery check. (#285)

 .../com/cloudera/livy/server/LivyServer.scala      | 55 ++++++++++++----------
 1 file changed, 29 insertions(+), 26 deletions(-)

commit 9575d8f7597c55918635760da6d6916720f5dad6
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Feb 10 12:07:19 2017 +0800

    Bump to 0.4.0-SNAPSHOT for master branch (#282)
    
    Change-Id: I32dd970bfa1150e3b47ecbfd7c1a7c348bb7e259

 api/pom.xml                                                  | 4 ++--
 assembly/pom.xml                                             | 4 ++--
 client-common/pom.xml                                        | 4 ++--
 client-http/pom.xml                                          | 4 ++--
 core/pom.xml                                                 | 4 ++--
 core/scala-2.10/pom.xml                                      | 4 ++--
 core/scala-2.11/pom.xml                                      | 4 ++--
 coverage/pom.xml                                             | 4 ++--
 examples/pom.xml                                             | 4 ++--
 integration-test/minicluster-dependencies/pom.xml            | 4 ++--
 integration-test/minicluster-dependencies/scala-2.10/pom.xml | 4 ++--
 integration-test/minicluster-dependencies/scala-2.11/pom.xml | 4 ++--
 integration-test/pom.xml                                     | 4 ++--
 pom.xml                                                      | 2 +-
 python-api/pom.xml                                           | 4 ++--
 python-api/setup.py                                          | 2 +-
 repl/pom.xml                                                 | 4 ++--
 repl/scala-2.10/pom.xml                                      | 4 ++--
 repl/scala-2.11/pom.xml                                      | 4 ++--
 rsc/pom.xml                                                  | 4 ++--
 scala-api/pom.xml                                            | 4 ++--
 scala-api/scala-2.10/pom.xml                                 | 4 ++--
 scala-api/scala-2.11/pom.xml                                 | 4 ++--
 scala/pom.xml                                                | 4 ++--
 server/pom.xml                                               | 4 ++--
 test-lib/pom.xml                                             | 4 ++--
 26 files changed, 50 insertions(+), 50 deletions(-)

commit 34f6c7f9e46a656dd129057173994016b000df00
Author: Jeff Zhang <zjffdu@gmail.com>
Date:   Thu Feb 9 01:16:56 2017 +0800

    LIVY-311. Set classpath in MiniCluster only when it is not in real cluster (#286)

 .../com/cloudera/livy/test/framework/MiniCluster.scala   | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 69462b9315cb652a5d19aa4d5104b210d06fb10f
Author: StephenBoesch <javadba@gmail.com>
Date:   Fri Jan 20 17:06:02 2017 -0800

    Minor. Remove backslash textwrap.dedent heredoc breaks python interpreter. (#280)

 README.rst | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 5418a18823f34d28110521cdc22c5435414c8b83
Author: hyunwoo cho <purechoc.en@gmail.com>
Date:   Fri Jan 20 08:56:18 2017 +0900

    LIVY-302. Failed to parse Spark version with suffix like -CDH or -SNAPSHOT. (#278)

 .../main/scala/com/cloudera/livy/utils/LivySparkUtils.scala    | 10 +++++-----
 .../scala/com/cloudera/livy/utils/LivySparkUtilsSuite.scala    |  3 +++
 2 files changed, 8 insertions(+), 5 deletions(-)

commit dc496a396be220b818ddfd5a9ae7bbe8b7b18312
Author: Alex Man <tc.technetium@gmail.com>
Date:   Fri Jan 13 11:42:45 2017 -0800

    LIVY-300. Fixed a race condition in rsc's RPC channel. (#274)
    
    In `Rpc.call()`, RPC function call messages are enqueued to the send buffer of the Channel on `Channel.write()` call because it's called outside of the netty Channel IO event loop.
    RPC replies are handled by `RpcDispatcher.channelRead0`. It calls `RpcDispatcher.writeMessage()` which calls `Channel.write()` to send RPC reply messages to the Channel. `RpcDispatcher.channelRead0` is executed in the event loop which means `Channel.write()` writes messages directly to the socket and bypassing the send buffer.
    When one side of the RPC channel is making a RPC call but at the same time received another RPC call from the other side. Then this race condition might happen:
    - Send call header
    - Send reply header
    - Send reply payload
    - Send call payload
    This means RPC reply messages might preempt the on going RPC call and messages will be sent out of order.
    
    To fix this, we have to prevent`RpcDispatcher.channelRead0` from being called while `Rpc.call()` is sending messages. One of the solutions is changing Rpc.call()` to write messages in the event loop.

 rsc/src/main/java/com/cloudera/livy/rsc/rpc/Rpc.java   | 18 ++++++++++--------
 .../test/java/com/cloudera/livy/rsc/rpc/TestRpc.java   |  3 +++
 2 files changed, 13 insertions(+), 8 deletions(-)

commit c50fb1ce33e3a37f062d4ed6b0133f3273ef7050
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Jan 13 05:56:47 2017 +0800

    LIVY-292. Fix Python Job API issue and add Java/python Job API example. (#269)

 .../java/com/cloudera/livy/examples/PiApp.java     | 102 +++++++++++++++++++++
 examples/src/main/python/pi_app.py                 |  59 ++++++++++++
 .../com/cloudera/livy/repl/BypassPySparkJob.scala  |   8 +-
 .../com/cloudera/livy/repl/PythonInterpreter.scala |   8 +-
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  |   7 +-
 5 files changed, 174 insertions(+), 10 deletions(-)

commit 4024f14bc5ebb31f3fd24cca670feefa64093296
Author: Alex Man <tc.technetium@gmail.com>
Date:   Thu Jan 12 12:42:52 2017 -0800

    Minor. Document statement state "waiting". (#275)

 README.rst | 28 +++++++++++++++-------------
 1 file changed, 15 insertions(+), 13 deletions(-)

commit 354e47dc35315318d22d6d11bda606e5b3b2e068
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Thu Jan 12 14:30:29 2017 +0800

    code should be re-escaped in R interpreter (#276)
    
    Change-Id: I014b79102c0759b96c89a5c9177abd286903402a

 repl/src/main/scala/com/cloudera/livy/repl/SparkRInterpreter.scala | 3 ++-
 .../test/scala/com/cloudera/livy/repl/SparkRInterpreterSpec.scala  | 7 +++++++
 2 files changed, 9 insertions(+), 1 deletion(-)

commit dc0bc1df69efcc1b1e9c18c1d5265928d1447a7a
Author: Jeff Zhang <zjffdu@gmail.com>
Date:   Thu Jan 12 09:20:18 2017 +0800

    LIVY-280. Livy session leakage issue when app submission timeout (#259)
    
    * LIVY-280. Livy session leakage issue when submitting app timeout
    
    * address comments
    
    * address comments

 conf/livy.conf                                     |  8 ++-
 .../main/scala/com/cloudera/livy/LivyConf.scala    |  7 ++-
 .../com/cloudera/livy/server/LivyServer.scala      |  1 +
 .../com/cloudera/livy/utils/SparkYarnApp.scala     | 57 +++++++++++++++++++++-
 4 files changed, 69 insertions(+), 4 deletions(-)

commit b75bc11b65f72414607458e659d23f00990c6747
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Wed Jan 11 17:40:43 2017 +0800

    LIVY-273. Add Spnego support for Java/scala and Python Job API client (#265)
    
    * Add Spnego support for Java Job API client
    
    Change-Id: I8cce80d75a549e573da70be9ef1aeb94457829a4
    
    * Add Python Job API kerberos support
    
    Change-Id: I022b3c14a439321deda3ae5e0cacbc2b18ef9830
    
    * Fix python style
    
    Change-Id: I9e9f00dde93c471c6fa1fd5f71842945f527c73b
    
    * Address the comments
    
    Change-Id: I4994122e8e28276efe4f00fc7ff8e02e0a7a6c60

 .travis.yml                                        |  5 ++--
 README.rst                                         |  1 +
 .../com/cloudera/livy/client/http/HttpConf.java    | 29 +++++++++++++++++++++-
 .../cloudera/livy/client/http/LivyConnection.java  | 17 ++++++++++---
 python-api/setup.py                                |  1 +
 python-api/src/main/python/livy/client.py          | 21 +++++++++++++---
 6 files changed, 63 insertions(+), 11 deletions(-)

commit 89099b0d5d21c93932fb3fd4cfbe5533a851e7b1
Author: Jeff Zhang <zjffdu@gmail.com>
Date:   Wed Jan 11 04:25:51 2017 +0800

    LIVY-294. HiveContext is always created instead of SQLContext for pyspark. (#270)
    
    HiveContext is always created no matter whether we enable hiveContext through spark.repl.enableHiveContext. The root cause is that we depends on shell.py of spark. and unfortunately HiveContext would not initialize itself when created, but defer its initialization until any methods is called. This change would call sqlContext.tables() to check whether hiveContext can work properly.

 repl/src/main/resources/fake_shell.py | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit 6215413da71c0f5175ec99af3037da319096fac0
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Wed Jan 11 04:20:07 2017 +0800

    LIVY-295. Make livy.rsc.jars a LivyConf. (#271)
    
    Currently livy.rsc.jars is a RSC configuration, which means user should specify this configuration each time when creating a session, this is semantically incorrect and inconvenient, also equivalent to livy.repl.jars, we should change this to Livy configuration.
    
    Besides current doc uses livy.jars as a configuration name, no code honors this configuration name, this should also be updated.

 conf/livy.conf                                     |  2 +-
 .../main/scala/com/cloudera/livy/LivyConf.scala    |  5 ++++
 .../server/interactive/InteractiveSession.scala    |  7 +++--
 .../interactive/BaseInteractiveServletSpec.scala   |  2 +-
 .../interactive/InteractiveSessionSpec.scala       | 31 ++++++++++++++++++++--
 5 files changed, 41 insertions(+), 6 deletions(-)

commit 95f14593e44a9396d0d3311c18b514bef2af1a44
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Jan 6 07:16:42 2017 +0800

    LIVY-285. Run unit tests and integration tests in parallel on Travis. (#264)

 .travis.yml | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 9974aac523e2692f7e8fcfd2c9cc999106142bba
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Jan 6 06:59:13 2017 +0800

    LIVY-286. Update the doc to align with 0.3 code. (#267)

 README.rst | 329 +++++++++++++++++++++++++++++++++++++++++++------------------
 1 file changed, 234 insertions(+), 95 deletions(-)

commit f5dea605bc53ed6ee420e0cc66a3e17457ef6613
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Wed Jan 4 16:47:38 2017 +0800

    LIYV-289. Fix NPE in ContextLauncher when Driver is not successfully started and expose the state of RSCClient (#268)
    
    Change-Id: Iae8b04393c4c52d87e87bd451916d6191007db08

 .../main/java/com/cloudera/livy/rsc/ContextLauncher.java   | 14 +++++++++-----
 rsc/src/main/java/com/cloudera/livy/rsc/RSCClient.java     |  4 ++++
 2 files changed, 13 insertions(+), 5 deletions(-)

commit 6077628612296215ba3a22f561d68414595513f8
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Tue Dec 27 11:20:02 2016 +0800

    LIVY-284. Make Livy server request log configurable (#263)
    
    * Make Livy server request log configurable
    
    Change-Id: If880908aa1afb02522a9278ddda185715a1f98f0
    
    * Address the comments
    
    Change-Id: I04bb29bf873d7f6341afb42ad4aad34cab35900c

 conf/livy.conf                                                 | 3 +++
 server/src/main/scala/com/cloudera/livy/LivyConf.scala         | 3 +++
 server/src/main/scala/com/cloudera/livy/server/WebServer.scala | 1 +
 3 files changed, 7 insertions(+)

commit c9f947efc7e1a6792f55cd2c6b0f7cb25592de94
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Mon Dec 26 08:26:10 2016 +0800

    LIVY-275. Add livy REST API to detect Livy version info (#262)
    
    * Add livy REST API to get Livy build info
    
    Change-Id: I56c5116f6f74357d06ceabcad38ac5988003ccf5
    
    * Change some typos
    
    Change-Id: If47570766e19b98b88de521aa57dfae1ae5b48d9
    
    * Address the comments
    
    Change-Id: I961979534281e7bb5030a8c471e5245c7dedca82

 dev/livy-build-info.sh                             | 38 +++++++++++
 server/pom.xml                                     | 31 +++++++++
 .../src/main/scala/com/cloudera/livy/package.scala | 74 ++++++++++++++++++++++
 .../com/cloudera/livy/server/LivyServer.scala      | 16 +++++
 4 files changed, 159 insertions(+)

commit 01f3b982ebabf586a0a59d4de59d3748e8f43f6b
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Dec 23 04:54:42 2016 +0800

    LIVY-282. Fixed pyspark doesn't start with Spark 1.x. (#261)

 repl/src/main/resources/fake_shell.py                            | 2 +-
 .../main/scala/com/cloudera/livy/repl/ProcessInterpreter.scala   | 9 +++++++--
 2 files changed, 8 insertions(+), 3 deletions(-)

commit 69ac11e2aff77cc80e135bdf9b3cb88fee861ae3
Author: Alex Man <tc.technetium@gmail.com>
Date:   Wed Dec 21 12:43:25 2016 -0800

    LIVY-165. Added session heartbeat to help notebooks to prevent leakage. (#247)
    
    Notebook applications like Jupyter might crash while livy is running. No one will clean up its corresponding Livy session and will be leaked.
    Heartbeat is added to address this. To keep a session alive, the notebook application must continously make GET requests to the interactive session. If no GET request is made within the heartbeat interval, livy-server will delete the session regardless to its state (busy, idle).
    
    Heartbeat is per session and is controlled by session property "heartbeatTimeoutInSecond". Its default is 0 and it means heartbeat is disabled. To enable heartbeat, please create the session with non-zero "heartbeatTimeoutInSecond" in the create request.

 .../livy/test/framework/LivyRestClient.scala       |   6 +-
 .../cloudera/livy/test/framework/MiniCluster.scala |   1 +
 .../com/cloudera/livy/test/InteractiveIT.scala     |  20 +++-
 .../main/scala/com/cloudera/livy/LivyConf.scala    |   2 +
 .../interactive/CreateInteractiveRequest.scala     |   3 +-
 .../server/interactive/InteractiveSession.scala    |  15 ++-
 .../interactive/InteractiveSessionServlet.scala    |   1 +
 .../livy/server/interactive/SessionHeartbeat.scala | 114 +++++++++++++++++++++
 .../cloudera/livy/sessions/SessionManager.scala    |   8 +-
 .../interactive/InteractiveSessionSpec.scala       |   6 +-
 .../server/interactive/SessionHeartbeatSpec.scala  |  88 ++++++++++++++++
 11 files changed, 253 insertions(+), 11 deletions(-)

commit 678839c18ecd45d56dc09db2255015f236969fb9
Author: Alex Man <tc.technetium@gmail.com>
Date:   Wed Dec 21 12:42:40 2016 -0800

    LIVY-276. Fixed test to timeout when Livy failed to restart. (#256)
    
    Travis will upload logs for diagnosis.

 .../livy/test/framework/BaseIntegrationTestSuite.scala       | 12 ++++++++++++
 .../src/test/scala/com/cloudera/livy/test/BatchIT.scala      |  4 +---
 .../test/scala/com/cloudera/livy/test/InteractiveIT.scala    |  8 ++------
 3 files changed, 15 insertions(+), 9 deletions(-)

commit 4eec41b44181c72f223f8f732ff7e939f3da4c38
Author: Alex Man <tc.technetium@gmail.com>
Date:   Wed Dec 21 12:42:35 2016 -0800

    LIVY-269. Fixed SparkRInterpreter hangs forever on executing `x[`. (#255)

 .../scala/com/cloudera/livy/repl/SparkRInterpreter.scala    |  2 +-
 .../com/cloudera/livy/repl/SparkRInterpreterSpec.scala      | 13 ++++++++++++-
 .../scala/com/cloudera/livy/repl/SparkRSessionSpec.scala    |  2 +-
 3 files changed, 14 insertions(+), 3 deletions(-)

commit f6829a5b7d9117cb8ec30943d2c3fd1a7818b88a
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Wed Dec 21 09:43:53 2016 +0800

    Bump supported Spark version to 2.1.x (#258)
    
    Change-Id: I1ff274c189212ad7c92dbaa597af68e947364b22

 server/src/main/scala/com/cloudera/livy/utils/LivySparkUtils.scala   | 4 +++-
 .../src/test/scala/com/cloudera/livy/utils/LivySparkUtilsSuite.scala | 5 ++++-
 2 files changed, 7 insertions(+), 2 deletions(-)

commit e0b0b80ee43af5c886a3b2c60ab84c64a52e3618
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Sat Dec 17 07:03:25 2016 +0800

    Minor. Fixed flaky unit test. (#257)
    
    InteractiveSessionSpec.should report an error if accessing an unknown variable

 .../com/cloudera/livy/server/interactive/InteractiveSessionSpec.scala | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit d3cc09b0c849e237dc13843079a72a78a39f8d7b
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Dec 16 13:20:18 2016 +0800

    LIVY-215. Support statement canceling in interactive sessions. (#230)

 .../cloudera/livy/repl/ProcessInterpreter.scala    |   6 +-
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  |   8 +-
 .../scala/com/cloudera/livy/repl/Session.scala     | 105 ++++++++++++++++++---
 .../com/cloudera/livy/repl/SparkRInterpreter.scala |   9 +-
 .../com/cloudera/livy/repl/BaseSessionSpec.scala   |  11 ++-
 .../scala/com/cloudera/livy/repl/SessionSpec.scala |  25 ++++-
 .../com/cloudera/livy/repl/SparkSessionSpec.scala  |  44 +++++++++
 .../java/com/cloudera/livy/rsc/BaseProtocol.java   |  11 +++
 .../main/java/com/cloudera/livy/rsc/RSCClient.java |   4 +
 .../main/java/com/cloudera/livy/rsc/RSCConf.java   |   5 +-
 .../com/cloudera/livy/rsc/driver/Statement.java    |   8 +-
 .../cloudera/livy/rsc/driver/StatementState.java   |   4 +-
 .../server/interactive/InteractiveSession.scala    |   6 ++
 .../interactive/InteractiveSessionServlet.scala    |   7 ++
 .../InteractiveSessionServletSpec.scala            |  20 +++-
 .../interactive/InteractiveSessionSpec.scala       |   2 +-
 16 files changed, 236 insertions(+), 39 deletions(-)

commit 2ae091db6ee46d48e9a59bb56a043ac40cfcabfe
Author: Alex Man <tc.technetium@gmail.com>
Date:   Thu Dec 15 15:34:57 2016 -0800

    LIVY-260. repl is stuck in busy state if Scala interpreter returns some specific error. (#243)
    
    - Instead of using regex, parse for internal frames manually.
    - Repl in Scala 2.11 cleans internal frames internally. Skip internal frames cleaning.

 .../com/cloudera/livy/repl/SparkInterpreter.scala  | 37 +++++++++
 .../cloudera/livy/repl/SparkInterpreterSpec.scala  | 87 ++++++++++++++++++++++
 .../cloudera/livy/repl/SparkInterpreterSpec.scala  | 69 +++++++++++++++++
 .../livy/repl/AbstractSparkInterpreter.scala       | 43 +++++------
 4 files changed, 215 insertions(+), 21 deletions(-)

commit de816f5164cdb4717401502815b2310d5998289b
Author: Alex Man <tc.technetium@gmail.com>
Date:   Wed Dec 14 22:29:17 2016 -0800

    LIVY-252. HTTP auth support for Scala LivyClient. (#245)

 .../cloudera/livy/client/http/LivyConnection.java  |  43 ++++++---
 .../livy/client/http/LivyConnectionSpec.scala      | 104 +++++++++++++++++++++
 2 files changed, 136 insertions(+), 11 deletions(-)

commit e4a52bf7d46e8e1673f6b060fbdd9afab9875856
Author: hyunwoo cho <purechoc.en@gmail.com>
Date:   Thu Dec 15 11:16:34 2016 +0900

    LIVY-270. %table shouldn't treat None as its own type. (#250)

 repl/src/main/resources/fake_shell.py              | 13 ++++---
 .../cloudera/livy/repl/PythonInterpreterSpec.scala | 42 +++++++++++++++++++++-
 2 files changed, 49 insertions(+), 6 deletions(-)

commit fe062993e3c0e08ce10ea3649334a13962ed777e
Author: Alex Man <tc.technetium@gmail.com>
Date:   Wed Dec 14 00:54:49 2016 -0800

    Minor. Fixed flaky unit test. (#254)
    
    - InteractiveSessionSpec.should error out the session if the interpreter dies.

 .../livy/server/interactive/InteractiveSessionSpec.scala         | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit 4cc999a3b75be60d7266578d6a9999e0ef29c5cc
Author: Jeff Zhang <zjffdu@gmail.com>
Date:   Tue Dec 13 13:30:48 2016 +0800

    LIVY-271. traceback could be json list or json object which is misleading (#252)
    
    * LIVY-271. traceback could be json list or json object which is misleading

 repl/src/main/scala/com/cloudera/livy/repl/Session.scala | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit e4586cb234c9f8241d0c8ecee9b56b0028bc41d5
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Tue Dec 13 10:00:38 2016 +0800

    LIVY-250. Change livy.repl.jars to work with different scala interpreter (#235)
    
    Users can list both livy-repl_2.10 and livy-repl_2.11 jars and their dependencies in livy.repl.jars. Livy automatically picks the right jars according to Spark's Scala version and Scala jar versioning convention.

 conf/livy.conf                                     |  4 ++-
 .../server/interactive/InteractiveSession.scala    | 16 ++++++++++--
 .../interactive/BaseInteractiveServletSpec.scala   |  2 +-
 .../interactive/InteractiveSessionSpec.scala       | 30 +++++++++++++++++++++-
 4 files changed, 47 insertions(+), 5 deletions(-)

commit 6e427ca01fe98fc28269a8c74922ad33978e173a
Author: Alex Man <tc.technetium@gmail.com>
Date:   Mon Dec 12 15:50:54 2016 -0800

    LIVY-261. Fixed SparkRInterpreter failed to include error message randomly. (#251)
    
    - Redirect stderr to stdout to avoid synchronization between stdout and stderr.

 .../main/scala/com/cloudera/livy/repl/SparkRInterpreter.scala    | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit e82780b96affc4d1cf8a1d08d41ac98844c2af62
Author: Lin Chan <linchan@microsoft.com>
Date:   Mon Dec 12 15:17:13 2016 -0800

    LIVY-251. YARN session leaked if RSC connection times out (#234)
    
    - When RSC connection times out, it should kill the application thru cluster manager to make sure nothing is leaked.

 .../scala/com/cloudera/livy/test/InteractiveIT.scala   | 18 ++++++++++++++++--
 rsc/src/main/java/com/cloudera/livy/rsc/RSCConf.java   |  3 ++-
 .../java/com/cloudera/livy/rsc/driver/RSCDriver.java   | 13 +++++++++++++
 .../livy/server/interactive/InteractiveSession.scala   |  4 ++++
 4 files changed, 35 insertions(+), 3 deletions(-)

commit 1b72ce9c5da99cae722ef5d8e03fa2d8ed9bf94b
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Tue Dec 13 06:46:45 2016 +0800

    LIVY-233. SparkSession support for Job API. (#217)
    
    Added sparkSession to expose Spark 2.0 SparkSession in JobContext. If SparkSession is not supported, it will throw an exception.
    
    Example:
    JobHandle<String> handler = client.submit(new Job<String>() {
      @Override
      public String call(JobContext jc) throws Exception {
            SparkSession session = jc.sparkSession();
            return session.version();
      }
    });

 .../main/java/com/cloudera/livy/JobContext.java    |   8 +-
 integration-test/pom.xml                           |  29 ++++++
 .../scala/com/cloudera/livy/test/JobApiIT.scala    |   6 +-
 .../src/test/spark2/scala/Spark2JobApiIT.scala     | 107 +++++++++++++++++++++
 python-api/src/main/python/livy/job_context.py     |  20 ++++
 repl/src/main/resources/fake_shell.py              |   4 +
 .../cloudera/livy/rsc/driver/JobContextImpl.java   |  27 ++++++
 .../cloudera/livy/scalaapi/ScalaJobContext.scala   |   2 +
 test-lib/pom.xml                                   |  32 +++++-
 .../livy/test/jobs/spark2/DatasetTest.java         |  64 ++++++++++++
 .../livy/test/jobs/spark2/SparkSessionTest.java    |  39 ++++++++
 11 files changed, 332 insertions(+), 6 deletions(-)

commit 1ee2ed8dd2ae70daac6fa763d3a07507c03cd395
Author: Alex Man <tc.technetium@gmail.com>
Date:   Thu Dec 8 17:42:26 2016 -0800

    LIVY-268. Fixed flaky unit test. (#249)
    
    - SparkYarnAppSpec.can kill spark-submit while it's running.

 .../test/scala/com/cloudera/livy/utils/SparkYarnAppSpec.scala  | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit 923d96c0c323238b6cce990bf5a5859eddd4274f
Author: hyunwoo cho <purechoc.en@gmail.com>
Date:   Fri Dec 9 10:42:08 2016 +0900

    LIVY-264. Fixed PySpark %table magic returning wrong header. (#244)
    
    %table returns wrong header if input is a list of rows. Workaround the issue by converting row to dict.

 .../scala/com/cloudera/livy/test/framework/LivyRestClient.scala    | 7 ++++++-
 .../src/test/scala/com/cloudera/livy/test/InteractiveIT.scala      | 5 ++++-
 repl/src/main/resources/fake_shell.py                              | 3 +++
 3 files changed, 13 insertions(+), 2 deletions(-)

commit 8cf0eff7d05ae2bda553dfd3aaedce3c15d6a9fc
Author: Lin Chan <linchan@microsoft.com>
Date:   Mon Dec 5 15:22:19 2016 -0800

    LIVY-259. Name of interactive sessions are not override-able. (#242)

 .../com/cloudera/livy/server/interactive/InteractiveSession.scala   | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit a89630537328abd56b28d4420c64a2e7da01a4a8
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Sat Dec 3 11:11:07 2016 +0800

    LIVY-256. Add Gzip support for HTTP response (#238)

 .../src/main/java/com/cloudera/livy/client/http/HttpConf.java      | 6 ++++--
 .../main/java/com/cloudera/livy/client/http/LivyConnection.java    | 7 ++++++-
 .../src/main/scala/com/cloudera/livy/server/SessionServlet.scala   | 1 +
 3 files changed, 11 insertions(+), 3 deletions(-)

commit 2a8e9cfbeeb1dd0d7bc2c56ea8a30fcd043a9847
Author: Jeff Zhang <zjffdu@gmail.com>
Date:   Sat Dec 3 07:51:26 2016 +0800

    LIVY-257. Added access log (#239)

 pom.xml                                                        |  3 +++
 server/src/main/scala/com/cloudera/livy/server/WebServer.scala | 10 +++++-----
 2 files changed, 8 insertions(+), 5 deletions(-)

commit f52c0d9735a5801b7f70a3b46bf45083cf89c126
Author: Alex Man <tc.technetium@gmail.com>
Date:   Thu Dec 1 15:29:07 2016 -0500

    LIVY-248. Clean up how PySpark python intepreters are set. (#233)
    
    Also added documentation for pyspark.

 README.rst                                         | 41 ++++++++++++++++------
 .../com/cloudera/livy/repl/PythonInterpreter.scala |  5 +--
 2 files changed, 34 insertions(+), 12 deletions(-)

commit cd10eed3b0192fadba59359c2f8e2aad1bb816c7
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Wed Nov 30 17:46:05 2016 +0800

    LIVY-255. Update the docs for Livy build and Spark2 support (#241)
    
    * Update the docs related Livy build and Spark 2 support
    
    Change-Id: Id59c628e73da46a124f718b192fc92336ac8eace
    
    * Updating the doc
    
    Change-Id: Ibdeb06fde53d359e77aace780a6093b2cc6a70b7

 README.rst | 25 +++++++++++++------------
 1 file changed, 13 insertions(+), 12 deletions(-)

commit b8a0839fc19f5ada13faab1a0cbafe22889df733
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Sat Nov 19 09:36:02 2016 +0800

    LIVY-219. Follow-up. Disabled `JobApiIT.run scala jobs` in Scala 2.11 test run. (#216)
    
    Skip integration test `JobApiIT.run scala jobs` in Scala 2.11 test run because the job is compiled in Scala 2.10.

 integration-test/pom.xml                                   | 14 ++++----------
 .../src/test/scala/com/cloudera/livy/test/JobApiIT.scala   | 14 ++++++++++++--
 2 files changed, 16 insertions(+), 12 deletions(-)

commit fe9286825cd55d001c6cb9fc1642a310b17562b3
Author: Alex Man <tc.technetium@gmail.com>
Date:   Wed Nov 16 18:55:08 2016 -0800

    LIVY-244. Replace livy-server repl state polling thread with RPC. (#231)
    
    - Remove repl state polling thread in InteractiveSession.
    - Modified Rpc protocol between livy-server and livy-repl to push repl state changes using a Rpc call from repl to server.
    - Changed InteractiveSession's state to reflect repl state returned from Rpc protocol.

 .../com/cloudera/livy/sessions/SessionState.scala  | 16 +++++
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  | 33 +++++----
 .../scala/com/cloudera/livy/repl/Session.scala     | 56 ++++++++-------
 .../com/cloudera/livy/repl/BaseSessionSpec.scala   |  9 ++-
 .../com/cloudera/livy/repl/ReplDriverSuite.scala   |  4 +-
 .../scala/com/cloudera/livy/repl/SessionSpec.scala | 81 ++++++++++++++++++++++
 .../java/com/cloudera/livy/rsc/BaseProtocol.java   | 12 +++-
 .../com/cloudera/livy/rsc/ContextLauncher.java     |  4 ++
 .../main/java/com/cloudera/livy/rsc/RSCClient.java | 13 +++-
 .../java/com/cloudera/livy/rsc/ReplJobResults.java |  6 +-
 .../com/cloudera/livy/rsc/driver/RSCDriver.java    | 29 +++++---
 .../java/com/cloudera/livy/rsc/rpc/RpcServer.java  | 15 ++--
 .../java/com/cloudera/livy/rsc/rpc/TestRpc.java    | 23 +++---
 .../server/interactive/InteractiveSession.scala    | 75 ++++++--------------
 14 files changed, 251 insertions(+), 125 deletions(-)

commit 950d8a003a17fd3910a4e9be0d778e655964afe4
Author: meisam <meisam@users.noreply.github.com>
Date:   Tue Nov 15 12:25:32 2016 -0800

    LIVY-243. ZooKeeperStateStore ignores settings for RetryPolicy. (#228)
    
    Use the retry times value the sleep time value specified in the config to create the retry policy for the curator client.
    
    Also elevates `retryPolicy` from a local val into a field that can be used in other places in the same class.

 .../livy/server/recovery/ZooKeeperStateStore.scala   | 20 +++++++++++---------
 .../server/recovery/ZooKeeperStateStoreSpec.scala    | 10 ++++++++++
 2 files changed, 21 insertions(+), 9 deletions(-)

commit 975005080ff67f20d78adf7ba19b0c1776638081
Author: Alex Man <tc.technetium@gmail.com>
Date:   Fri Nov 11 16:59:34 2016 -0800

    Minor. Added links to Livy development Slack team. (#229)

 README.rst | 3 +++
 1 file changed, 3 insertions(+)

commit a82c9028cc7d8b979f5e754140d0d974dbd7be6f
Author: Alex Man <tc.technetium@gmail.com>
Date:   Fri Nov 11 11:51:18 2016 -0800

    LIVY-242. Fixed build break.

 .../scala/com/cloudera/livy/server/interactive/InteractiveSession.scala | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fcd79b3abbbab45c70c33ca6e7389e1834130906
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Nov 11 15:40:42 2016 +0800

    LIVY-242. Shorten the time to get RSC driver URI.
    
    Closes #227.

 .../livy/server/interactive/InteractiveSession.scala       | 14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)

commit b4642b193956b287bb1c1b32bafe4c5a15e71eac
Author: Alex Man <tc.technetium@gmail.com>
Date:   Thu Nov 10 21:37:56 2016 -0800

    LIVY-213. Implemented interactive statement results recovery.
    
    - Removed statement results history cache in livy-server.
    - Proxy statement results history requests to livy-repl.
    - Modified RSC repl API:
     - ReplJobRequest to be synchronous and return the id of new statement.
     - GetReplJobResults to return all or some statements in sorted order. Also return current repl state.
     - Moved definition of Statement and StatementState to repl-rsc to avoid unnecessary parsing.
    - livy-server polls only repl state but not statement results from repl.
    - New StatementState "waiting" to show a statement that's submitted to repl but hasn't been executed.
    - Send statement results to server in JSON instead of JValue to avoid Kryo issue.

 .../livy/test/framework/LivyRestClient.scala       |   9 ++
 .../com/cloudera/livy/test/InteractiveIT.scala     |   9 +-
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  |  42 +++---
 .../scala/com/cloudera/livy/repl/Session.scala     |  53 +++++---
 .../com/cloudera/livy/repl/BaseSessionSpec.scala   |  16 ++-
 .../com/cloudera/livy/repl/PythonSessionSpec.scala |  38 +++---
 .../com/cloudera/livy/repl/ReplDriverSuite.scala   |   9 +-
 .../com/cloudera/livy/repl/SparkRSessionSpec.scala |  35 +++--
 .../com/cloudera/livy/repl/SparkSessionSpec.scala  |  42 +++---
 .../java/com/cloudera/livy/rsc/BaseProtocol.java   |  26 ++--
 .../main/java/com/cloudera/livy/rsc/RSCClient.java |  14 +-
 .../java/com/cloudera/livy/rsc/ReplJobResults.java |  33 +++++
 .../com/cloudera/livy/rsc/driver/RSCDriver.java    |   2 +-
 .../com/cloudera/livy/rsc/driver/Statement.java    |  37 ++++++
 .../cloudera/livy/rsc/driver/StatementState.java   |  38 ++++++
 .../server/interactive/InteractiveSession.scala    | 141 ++++++++++++---------
 .../interactive/InteractiveSessionServlet.scala    |  31 +----
 .../livy/server/interactive/Statement.scala        |  66 ----------
 .../livy/server/interactive/StatementState.scala   |  35 -----
 .../InteractiveSessionServletSpec.scala            |   8 +-
 .../interactive/InteractiveSessionSpec.scala       |  25 ++--
 .../livy/server/interactive/StatementSpec.scala    |  77 -----------
 22 files changed, 382 insertions(+), 404 deletions(-)

commit 805dcf26eb0155a54014829b44aa9bccf3778136
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Thu Nov 10 17:10:05 2016 +0800

    Minor. Remove hidden crc file in FileSystemStateStore.
    
    Closes #225.

 .../com/cloudera/livy/server/recovery/FileSystemStateStore.scala  | 8 ++++++++
 .../cloudera/livy/server/recovery/FileSystemStateStoreSpec.scala  | 1 +
 2 files changed, 9 insertions(+)

commit 8af487350350cec6cf4cac487ad0ba684c8aaeb8
Author: Lin Chan <linchan@microsoft.com>
Date:   Thu Nov 10 01:00:17 2016 -0800

    LIVY-241. Return HTTP 400 Bad Request on bad user input.
    
    Closes #226.

 .../scala/com/cloudera/livy/server/JsonServlet.scala   |  8 +++++++-
 .../com/cloudera/livy/server/SessionServlet.scala      |  6 +-----
 .../com/cloudera/livy/server/JsonServletSpec.scala     | 18 ++++++++++++++++++
 3 files changed, 26 insertions(+), 6 deletions(-)

commit 1158c1612e367c32f2d4602b6b0ee7b00b99fa7b
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Wed Nov 9 09:43:29 2016 +0800

    LIVY-232. Remove Max Spark version cap in LivyServer.
    
    With this change, if Spark version detected from spark-submit is greater than the specified one, Livy will log warning instead of throwing the exception. Also change the Scala version check with the same way.
    
    Closes #221

 .../cloudera/livy/client/http/HttpClientSpec.scala |  2 +-
 .../com/cloudera/livy/utils/LivySparkUtils.scala   | 32 ++++++++++++++++------
 .../cloudera/livy/utils/LivySparkUtilsSuite.scala  |  4 ---
 3 files changed, 24 insertions(+), 14 deletions(-)

commit ff5a5bff80baa97d94468fdce0edcca686459043
Author: Alex Man <tc.technetium@gmail.com>
Date:   Tue Nov 8 17:38:06 2016 -0800

    Minor. Upload test logs when test fails.
    
    Build log will show where the log is uploaded to.
    
    Closes #223

 .travis.yml               |  5 +++++
 dev/travis-upload-logs.sh | 23 +++++++++++++++++++++++
 2 files changed, 28 insertions(+)

commit ded5b9ad2e24124169c4426fdbfd31e10ace1b73
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Thu Nov 3 09:52:12 2016 +0800

    Minor. Fix build error and add some missing dependencies for report aggregation.
    
    Closes #219

 coverage/pom.xml | 24 +++++++++++++++++++++---
 1 file changed, 21 insertions(+), 3 deletions(-)

commit 41735988983f589912e2fdc141c30d0d463d60c4
Author: Alex Man <tc.technetium@gmail.com>
Date:   Wed Nov 2 15:01:27 2016 -0700

    LIVY-237. Fixed JaCoCo is randomly throwing EOFException on Travis.
    
    - Disabled JaCoCo for `InteractiveIT.should kill RSCDriver if it doesn't respond to end session`. This test doesn't shutdown RSCDriver's JVM gracefully. JaCoCo might generate a corrupted exec dump and cause EOFException.
    
    Closes #218

 rsc/src/main/java/com/cloudera/livy/rsc/ContextLauncher.java | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 5de6cf21c61db4093646a23c65c37c8b52202dc8
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Tue Nov 1 17:13:09 2016 +0800

    LIVY-236. Fix NPE issue in Job API when return value is Void
    
    Closes #215

 .../cloudera/livy/client/http/JobHandleImpl.java   |  8 +++---
 .../scala/com/cloudera/livy/test/JobApiIT.scala    |  7 ++++++
 .../java/com/cloudera/livy/test/jobs/VoidJob.java  | 29 ++++++++++++++++++++++
 3 files changed, 41 insertions(+), 3 deletions(-)

commit 3c5cf7961d4989c3031cc4d618c49ccfa5382498
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Sat Oct 29 14:32:30 2016 +0800

    LIVY-234. Add Scala 2.11 support to livy-scala-api.
    
    Closes #212

 examples/pom.xml             |  2 +-
 pom.xml                      |  3 ++-
 scala-api/pom.xml            |  8 ++++----
 scala-api/scala-2.10/pom.xml | 37 +++++++++++++++++++++++++++++++++++++
 scala-api/scala-2.11/pom.xml | 37 +++++++++++++++++++++++++++++++++++++
 5 files changed, 81 insertions(+), 6 deletions(-)

commit 8ebc5bd73ef1a649ff8531c6db10e3a9158f6c8d
Author: Alex Man <tc.technetium@gmail.com>
Date:   Fri Oct 28 22:07:37 2016 -0700

    LIVY-219. Support Scala-2.11 integration test for Livy IT.
    
    - Added Maven submodules (minicluster-dependencies) to write Spark classpath of different Scala version to files for MiniCluster.
    - Writing classpath to a file instead of Maven properties to maintain ability to run integration tests from IDEs.
    - MiniCluster picks and reads the correct Spark classpath and pass it to MiniLivy via spark-default.conf.
    - Dependency changes to make sure both repl is built when Maven runs integration-test.
    - Verify "ensure Livy internal configurations are not exposed" in InteractiveIT instead of JobsApiIT to avoid job incompatibility issue between Scala 2.10 and 2.11.
    - Changed Maven pom.xml to start integration tests in 2.10 and 2.11.
    - MiniCluster sets env. var. to tell LivyServer what Spark Scala version it should use.
    - Changed Travis to launch 2 builds for Spark 1.6 and Spark 2.0 with Scala 2.10 and 2.11.
    - During development, to skip integration test for a Scala version, use `-DskipITs-2.10` or `-DskipITs-2.11`. `-DskipITs` will skip both.
    - Fixed JaCoCo EOFException by disabling JaCoCo for `InteractiveIT.should kill RSCDriver if it doesn't respond to end session`.
    
    Closes #211

 .travis.yml                                        |   8 +-
 integration-test/minicluster-dependencies/pom.xml  | 136 +++++++++++++++++++++
 .../minicluster-dependencies/scala-2.10/pom.xml    |  37 ++++++
 .../minicluster-dependencies/scala-2.11/pom.xml    |  37 ++++++
 integration-test/pom.xml                           |  63 +++++++++-
 .../cloudera/livy/test/framework/MiniCluster.scala |  22 +++-
 .../com/cloudera/livy/test/InteractiveIT.scala     |   8 +-
 .../scala/com/cloudera/livy/test/JobApiIT.scala    |  17 ---
 pom.xml                                            |   4 +-
 .../com/cloudera/livy/server/LivyServer.scala      |  16 +--
 .../com/cloudera/livy/utils/LivySparkUtils.scala   |  66 +++++++---
 .../cloudera/livy/utils/LivySparkUtilsSuite.scala  |  62 ++++++++--
 12 files changed, 411 insertions(+), 65 deletions(-)

commit e7e929fa1d304ada19e00f052223747af15f9d42
Author: Alex Man <tc.technetium@gmail.com>
Date:   Thu Oct 27 17:40:51 2016 -0700

    LIVY-225. Fix two issues running integration test with Spark 2.0.
    
    1. Create a dummy jar to let Spark yarn#client correctly launch the application.
    2. Since `SQLContext` is deprecated in Spark 2.0, so additional information will be printed out when creating. Changing the regex pattern.
    
    Closes #213

 .../main/scala/com/cloudera/livy/test/framework/MiniCluster.scala | 8 +++++++-
 .../src/test/scala/com/cloudera/livy/test/InteractiveIT.scala     | 4 ++--
 2 files changed, 9 insertions(+), 3 deletions(-)

commit 5e8474e32d81d794d2d7eca7cfa7c81c9be689aa
Author: Alex Man <tc.technetium@gmail.com>
Date:   Thu Oct 27 15:46:57 2016 -0700

    LIVY-212. Implemented session recovery for interactive session. Only work with YARN.
    
    livy-server can now recover interactive sessions after restart.
    There are some special cases:
    - If livy-server crashes while an interactive session is starting, there's a chance the session is unrecoverable, depending on timing (whether livy-repl has registered to livy-server).
    - If livy-server is down longer than the value of server.idle_timeout (default: 10min), livy-repl will timeout and quit.
    
    Note: All previous statements are lost after recovery. This will be fixed in a different commit.
    
    Closes #208

 .../cloudera/livy/client/http/HttpClientSpec.scala |   8 +-
 .../test/framework/BaseIntegrationTestSuite.scala  |   6 +-
 .../livy/test/framework/LivyRestClient.scala       |  12 +-
 .../com/cloudera/livy/test/InteractiveIT.scala     |  35 +-
 .../main/java/com/cloudera/livy/rsc/RSCClient.java |  10 +
 .../com/cloudera/livy/server/LivyServer.scala      |   7 +-
 .../com/cloudera/livy/server/SessionServlet.scala  |   5 +-
 .../livy/server/batch/BatchSessionServlet.scala    |   6 +-
 .../server/interactive/InteractiveSession.scala    | 484 +++++++++++++--------
 .../interactive/InteractiveSessionServlet.scala    |  19 +-
 .../livy/server/recovery/ZooKeeperStateStore.scala |   7 +-
 .../cloudera/livy/sessions/SessionManager.scala    | 123 +++---
 .../livy/server/BaseSessionServletSpec.scala       |   7 +-
 .../cloudera/livy/server/SessionServletSpec.scala  |  17 +-
 .../livy/server/batch/BatchServletSpec.scala       |   9 +-
 .../interactive/BaseInteractiveServletSpec.scala   |   5 +-
 .../InteractiveSessionServletSpec.scala            |  14 +-
 .../interactive/InteractiveSessionSpec.scala       |  61 ++-
 .../livy/server/interactive/JobApiSpec.scala       |  16 +-
 .../livy/sessions/SessionManagerSpec.scala         |   8 +-
 20 files changed, 548 insertions(+), 311 deletions(-)

commit e5796deacb66208a8457daf86ef91bde71169b99
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Wed Oct 26 16:21:14 2016 +0800

    LIVY-227. Include both repl-2.10 and repl-2.11 bundles in Livy assembly.
    
    Closes #205

 assembly/assembly.xml                              | 13 +++-
 assembly/pom.xml                                   | 48 ++++-----------
 integration-test/pom.xml                           |  7 ---
 .../main/scala/com/cloudera/livy/LivyConf.scala    |  7 +++
 .../com/cloudera/livy/server/LivyServer.scala      | 30 ++++++++-
 .../server/interactive/InteractiveSession.scala    | 18 ++++--
 .../com/cloudera/livy/utils/LivySparkUtils.scala   | 71 +++++++++++++++++-----
 .../interactive/BaseInteractiveServletSpec.scala   |  2 +
 .../interactive/InteractiveSessionSpec.scala       |  2 +
 .../cloudera/livy/utils/LivySparkUtilsSuite.scala  | 22 ++++++-
 10 files changed, 150 insertions(+), 70 deletions(-)

commit 33b20f5d656b41096b618975c0726eebaf10f083
Author: OferE <ofer.eliassaf@gmail.com>
Date:   Wed Oct 26 00:14:56 2016 +0300

    LIVY-220. Workaround SPARK-17512 for Spark 2.0.0.
    
    SparkConf "spark.submit.pyFiles" doesn't work in Spark 2.0.0. Use Spark argument "--py-files" instead to workaround the Spark bug.
    
    https://issues.apache.org/jira/browse/SPARK-17512
    
    Closes #197

 .../main/scala/com/cloudera/livy/utils/SparkProcessBuilder.scala | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit eeb6d01cc00cb0da2b0bf26f16a58762e3aa34df
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Tue Oct 25 09:21:28 2016 +0800

    LIVY-228. Shade json4s and py4j in repl.
    
    Version of dependencies are different between Spark 1 and Spark 2 (e.g. json4s, py4j). Shade them to make supporting multiple versions simultaneously easier.
    
    Closes #207

 pom.xml                                            |  4 --
 repl/pom.xml                                       | 52 ++++++++++++++++++++--
 .../com/cloudera/livy/repl/PythonInterpreter.scala |  8 +++-
 3 files changed, 55 insertions(+), 9 deletions(-)

commit 9bf35a6153658bce77860f93a2e6008a774595c4
Author: Jeff Zhang <zjffdu@gmail.com>
Date:   Fri Oct 21 18:09:21 2016 +0800

    LIVY-230. SparkSession is not avalible for PySparkInterperter and SparkRInterperter
    
    Closes  #210

 repl/src/main/resources/fake_shell.py                |  3 +++
 .../com/cloudera/livy/repl/PythonInterpreter.scala   |  2 +-
 .../com/cloudera/livy/repl/SparkRInterpreter.scala   | 20 ++++++++++++++------
 .../livy/server/interactive/InteractiveSession.scala |  3 ++-
 4 files changed, 20 insertions(+), 8 deletions(-)

commit f3d6cd551473e80b38ca19387b0f5932ea7b5a40
Author: Alex Man <tc.technetium@gmail.com>
Date:   Wed Oct 19 17:47:41 2016 -0700

    LIVY-229. Spark version check fails when it's used with HDP built Spark.
    
    Fixed Spark version regex to support version like 2.0.0.2.5.1.0-56.
    
    Closes #209

 server/src/main/scala/com/cloudera/livy/utils/LivySparkUtils.scala  | 2 +-
 .../test/scala/com/cloudera/livy/utils/LivySparkUtilsSuite.scala    | 6 +++++-
 2 files changed, 6 insertions(+), 2 deletions(-)

commit f1aaa148ad448db4a2cb165c2a7bfa6abdac4a41
Author: Jeff Zhang <zjffdu@gmail.com>
Date:   Tue Oct 18 15:30:43 2016 +0800

    LIVY-224. Datanucleus jars are not detected for Spark 2.x
    
    Closes #204

 .../server/interactive/InteractiveSession.scala    | 33 ++++++++++++++--------
 1 file changed, 22 insertions(+), 11 deletions(-)

commit 39a66ec8dca31862750e3bc398c0eca873373d30
Author: Alex Man <tc.technetium@gmail.com>
Date:   Mon Oct 17 16:14:32 2016 -0700

    Minor. Fixed a flaky Batch integration test.
    
    - For short running batch session, its driver log url might not be populated before the session finishes. Which causes random test failure.

 integration-test/src/test/scala/com/cloudera/livy/test/BatchIT.scala | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 5f8cca2f36cdd63d9ad2bf0ebc7fa29eddfe24a6
Author: Alex Man <tc.technetium@gmail.com>
Date:   Mon Oct 17 12:15:52 2016 -0700

    Minor. Fixed rsc shaded jar isn't regenrated after its dependency is updated.
    
    Closes #206

 rsc/pom.xml | 9 ++-------
 1 file changed, 2 insertions(+), 7 deletions(-)

commit 7c2138d74e56e46e2d39975d705d1141a6043fa8
Author: Alex Man <tc.technetium@gmail.com>
Date:   Mon Oct 17 10:23:48 2016 -0700

    LIVY-211. Integration test for batch session recovery.
    
    - Refactored LivyRestClient.
    - Added Batch recovery integration test.
    
    Closes #198

 .../test/framework/BaseIntegrationTestSuite.scala  | 155 ++-----------
 .../com/cloudera/livy/test/framework/Cluster.scala |   2 +
 .../livy/test/framework/LivyRestClient.scala       | 236 ++++++++++++++++++++
 .../cloudera/livy/test/framework/MiniCluster.scala |  19 +-
 .../scala/com/cloudera/livy/test/BatchIT.scala     | 232 +++++++-------------
 .../com/cloudera/livy/test/InteractiveIT.scala     | 241 ++++++---------------
 .../scala/com/cloudera/livy/test/JobApiIT.scala    |  15 +-
 7 files changed, 428 insertions(+), 472 deletions(-)

commit 0134baf740e974a66a891a42258afb40b96ed9bd
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Oct 14 05:42:27 2016 +0800

    Upgrade Netty version.
    
    To mitigate the difference between building against Spark 1 and 2, propose to upgrade Netty to 4.0.29.Final.
    
    Closes #203

 pom.xml | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 3606870ad23863beb8440658befbf952539e0149
Author: Alex Man <tc.technetium@gmail.com>
Date:   Tue Oct 11 18:16:18 2016 -0700

    Added an override for hadoop.scope to Hadoop dependencies in pom.xml.
    
    - Default to compile.
    - Users who want to exclude Hadoop jars in their Livy build can set it to provided.
    
    Closes #199

 pom.xml        | 1 +
 server/pom.xml | 2 ++
 2 files changed, 3 insertions(+)

commit 14ed125553b0eae3190fae99213b3ffaf8bfd1d4
Author: Lin Chan <linchan@microsoft.com>
Date:   Tue Oct 11 18:15:19 2016 -0700

    LIVY-221. Default Livy name is overwriting spark.app.name.
    
    Removed default value for name parameter for batch.
    
    Closes #200

 server/src/main/scala/com/cloudera/livy/utils/SparkProcessBuilder.scala | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8b546dc95ba215b6b8f3f9c7d4106e8ce564a006
Author: Alex Man <tc.technetium@gmail.com>
Date:   Wed Oct 5 21:49:04 2016 -0700

    LIVY-211. Implemented session recovery for batch session. Only work with YARN.
    
    livy-server can now recover batch sessions after restart.
    
    Added a few new LivyConf:
    livy.server.recovery.mode: Possible values: ["off", "recovery"]. Default is "off".
     off: Sessions are not persisted. Every time Livy server restarts, it loses all previous sessions. It also stops all batch sessions before shutting down.
     recovery: Sessions are persisted to the state store. Requires YARN.
    
    livy.server.recovery.state-store: Possible values: ["filesystem", "zookeeper"].
     filesystem: Store state on a file system.
     zookeeper: Store state in a Zookeeper instance.
    
    livy.server.recovery.state-store.url
     For filesystem state store, the path of the state store directory. e.g. file:///tmp/livy or hdfs:///
     For zookeeper, the address to the Zookeeper servers. e.g. zk://host1:port1,host2:port2
    
    Added a new session state "recovering".
    
    Closes #195

 .travis.yml                                        |   2 +-
 conf/livy.conf                                     |  19 ++
 .../com/cloudera/livy/sessions/SessionState.scala  |   6 +
 .../cloudera/livy/test/framework/MiniCluster.scala |   3 +-
 .../main/scala/com/cloudera/livy/LivyConf.scala    |  23 +++
 .../com/cloudera/livy/server/LivyServer.scala      |  24 ++-
 .../com/cloudera/livy/server/SessionServlet.scala  |   7 +-
 .../cloudera/livy/server/batch/BatchSession.scala  | 143 +++++++++++----
 .../livy/server/batch/BatchSessionServlet.scala    |  12 +-
 .../server/interactive/InteractiveSession.scala    |  15 +-
 .../interactive/InteractiveSessionServlet.scala    |   4 +-
 .../livy/server/recovery/BlackholeStateStore.scala |  37 ++++
 .../server/recovery/FileSystemStateStore.scala     | 123 +++++++++++++
 .../livy/server/recovery/SessionStore.scala        |  97 +++++++++++
 .../cloudera/livy/server/recovery/StateStore.scala | 112 ++++++++++++
 .../livy/server/recovery/ZooKeeperStateStore.scala | 112 ++++++++++++
 .../scala/com/cloudera/livy/sessions/Session.scala | 185 ++++++++++----------
 .../cloudera/livy/sessions/SessionManager.scala    |  71 +++++++-
 .../main/scala/com/cloudera/livy/utils/Clock.scala |   4 +-
 .../scala/com/cloudera/livy/utils/SparkApp.scala   |   3 +-
 .../com/cloudera/livy/utils/SparkYarnApp.scala     |  14 +-
 .../cloudera/livy/server/SessionServletSpec.scala  |  10 +-
 .../livy/server/batch/BatchServletSpec.scala       |  11 +-
 .../livy/server/batch/BatchSessionSpec.scala       |  34 +++-
 .../server/recovery/BlackholeStateStoreSpec.scala  |  48 ++++++
 .../server/recovery/FileSystemStateStoreSpec.scala | 192 +++++++++++++++++++++
 .../livy/server/recovery/SessionStoreSpec.scala    | 109 ++++++++++++
 .../livy/server/recovery/StateStoreSpec.scala      |  66 +++++++
 .../server/recovery/ZooKeeperStateStoreSpec.scala  | 165 ++++++++++++++++++
 .../com/cloudera/livy/sessions/MockSession.scala   |  17 +-
 .../livy/sessions/SessionManagerSpec.scala         | 127 ++++++++++++--
 .../com/cloudera/livy/sessions/SessionSpec.scala   |  32 ++--
 .../cloudera/livy/utils/LivySparkUtilsSuite.scala  |   8 +
 .../com/cloudera/livy/utils/SparkYarnAppSpec.scala |  23 ++-
 34 files changed, 1635 insertions(+), 223 deletions(-)

commit 0fa2120a2444ec4f7f6277372b1aca71598275c5
Author: jerryshao <sshao@hortonworks.com>
Date:   Mon Oct 3 10:30:53 2016 -0700

    LIVY-162. Livy to support Spark 2.0 + Scala 2.11 cross build
    
    This PR adds support to build against Spark 2.0 and Scala 2.11, what this PR addressed:
    
    1. Support building against different Spark version with profile like -Pspark-1.6, -Pspark-2.0.
    2. Support building against different version of Scala through profile: -Pscala-2.10 -Pscala-2.11.
    3. Refactor SparkInterpret to support different Scala version + Spark version.
    
    What this PR doesn't address:
    
    1. Batch API to support SparkSession. Currently batch API still uses old API for `SparkContext`, `SQLContext` and `HiveContext`.
    
    This PR is tested with following scenarios:
    
    1. Spark 1.6 + Scala 2.10
    2. Spark 1.6 + Scala 2.11
    3. Spark 2.0 + Scala 2.10
    3. Spark 2.0 + Scala 2.11
    
    Please suggest and comment, any feedback is greatly appreciated.
    
    Closes #186

 assembly/assembly.xml                              |   2 +-
 assembly/pom.xml                                   |  60 ++++++--
 client-http/pom.xml                                |   2 +-
 core/pom.xml                                       |   8 +-
 core/scala-2.10/pom.xml                            |  37 +++++
 core/scala-2.11/pom.xml                            |  37 +++++
 coverage/pom.xml                                   |   4 +-
 integration-test/pom.xml                           |   2 +-
 pom.xml                                            |  51 +++++-
 repl/pom.xml                                       |  32 ++--
 repl/scala-2.10/pom.xml                            |  40 +++++
 .../com/cloudera/livy/repl/SparkInterpreter.scala  | 138 +++++++++++++++++
 repl/scala-2.11/pom.xml                            |  40 +++++
 .../com/cloudera/livy/repl/SparkInterpreter.scala  | 171 +++++++++++++++++++++
 ...preter.scala => AbstractSparkInterpreter.scala} | 150 +++---------------
 .../com/cloudera/livy/repl/PythonInterpreter.scala |  18 ++-
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  |   6 +-
 .../livy/repl/SparkContextInitializer.scala        | 125 +++++++++++++++
 .../com/cloudera/livy/repl/BaseSessionSpec.scala   |   2 +-
 .../com/cloudera/livy/repl/ReplDriverSuite.scala   |   4 +-
 .../cloudera/livy/repl/ScalaInterpreterSpec.scala  |  12 +-
 .../com/cloudera/livy/repl/SparkSessionSpec.scala  |   5 +-
 rsc/pom.xml                                        |  10 ++
 .../com/cloudera/livy/rsc/TestSparkClient.java     |   2 +-
 scala-api/pom.xml                                  |   4 +-
 scala/pom.xml                                      | 119 ++++++++++++++
 server/pom.xml                                     |  14 +-
 .../com/cloudera/livy/server/LivyServer.scala      |  76 +--------
 .../server/interactive/InteractiveSession.scala    |  17 +-
 .../com/cloudera/livy/utils/LivySparkUtils.scala   | 115 ++++++++++++++
 .../LivySparkUtilsSuite.scala}                     |  41 ++---
 .../com/cloudera/livy/test/jobs/SQLGetTweets.java  |  11 +-
 32 files changed, 1054 insertions(+), 301 deletions(-)

commit c9a7a898f9aa0dff7039141f634ebe7db6756a69
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Sep 23 18:46:28 2016 +0800

    LIVY-216. Fix wrong executor number configuration in interactive session.
    
    Closes #196

 .../com/cloudera/livy/test/framework/BaseIntegrationTestSuite.scala    | 1 +
 .../src/test/scala/com/cloudera/livy/test/InteractiveIT.scala          | 3 ++-
 .../com/cloudera/livy/server/interactive/InteractiveSession.scala      | 2 +-
 3 files changed, 4 insertions(+), 2 deletions(-)

commit acac87a8af9541550625ec30416374a58206a9f1
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Fri Sep 23 17:11:42 2016 +0800

    LIVY-210. Add test context for Livy unit test
    
    Closes #190

 client-http/pom.xml                                |  8 +++++
 .../cloudera/livy/client/http/HttpClientSpec.scala |  3 +-
 core/pom.xml                                       | 16 ++++++++++
 .../com/cloudera/livy/LivyBaseUnitTestSuite.scala  | 35 ++++++++++++++++++++++
 repl/pom.xml                                       |  8 +++++
 .../cloudera/livy/repl/BaseInterpreterSpec.scala   |  4 ++-
 .../com/cloudera/livy/repl/BaseSessionSpec.scala   |  3 +-
 .../com/cloudera/livy/repl/ReplDriverSuite.scala   |  2 +-
 .../cloudera/livy/repl/SparkRInterpreterSpec.scala |  2 +-
 .../com/cloudera/livy/repl/SparkRSessionSpec.scala |  2 +-
 scala-api/pom.xml                                  | 13 ++++++++
 .../cloudera/livy/scalaapi/ScalaClientTest.scala   | 15 ++++++----
 .../livy/scalaapi/ScalaClientTestUtils.scala       |  7 +++--
 .../livy/scalaapi/ScalaJobHandleTest.scala         | 16 ++++++----
 server/pom.xml                                     |  8 +++++
 .../livy/server/ApiVersioningSupportSpec.scala     |  4 ++-
 .../cloudera/livy/server/BaseJsonServletSpec.scala |  6 ++--
 .../com/cloudera/livy/server/LivyServerSuite.scala |  4 +--
 .../livy/server/batch/BatchSessionSpec.scala       |  5 ++--
 .../livy/server/batch/CreateBatchRequestSpec.scala |  4 ++-
 .../interactive/CreateInteractiveRequestSpec.scala |  3 +-
 .../interactive/InteractiveSessionSpec.scala       |  5 ++--
 .../livy/server/interactive/StatementSpec.scala    |  4 +--
 .../livy/sessions/SessionManagerSpec.scala         |  4 +--
 .../com/cloudera/livy/sessions/SessionSpec.scala   |  4 +--
 .../com/cloudera/livy/utils/SparkYarnAppSpec.scala |  4 +--
 26 files changed, 150 insertions(+), 39 deletions(-)

commit 91058d29846a82b9d006390a6521bcba11bf56bd
Author: Jeff Zhang <zjffdu@gmail.com>
Date:   Tue Sep 20 22:04:21 2016 +0800

    Minor. Fixed bug in SparkApp that merges user YARN tags and Livy YARN tags incorrectly.
    
    Closes #193

 server/src/main/scala/com/cloudera/livy/utils/SparkApp.scala | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4e85c499b80f7d79edd7f76b28e6247c87abd720
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Tue Sep 20 22:03:48 2016 +0800

    Update gitignore to ignore egg files
    
    Closes #192

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit 35dee3702f0f1ef57216ae3c9e0cc9efd6f4090d
Author: Alex Man <tc.technetium@gmail.com>
Date:   Tue Sep 20 19:14:10 2016 +0800

    LIVY-208. Exposing YARN driver log url and Spark UI url for YARN sessions.
    
    Only work in yarn-cluster mode.
    They are exposed as:
    - appInfo.driverLogUrl
    - appInfo.sparkUiUrl
    
    Closes  #189

 .../cloudera/livy/client/common/HttpMessages.java  |   6 +-
 .../cloudera/livy/client/http/HttpClientSpec.scala |   2 +
 .../scala/com/cloudera/livy/test/BatchIT.scala     |   5 +
 .../com/cloudera/livy/test/InteractiveIT.scala     |  11 +-
 .../cloudera/livy/server/batch/BatchSession.scala  |  11 +-
 .../livy/server/batch/BatchSessionServlet.scala    |  14 ++-
 .../server/interactive/InteractiveSession.scala    |  25 ++--
 .../interactive/InteractiveSessionServlet.scala    |   4 +-
 .../scala/com/cloudera/livy/sessions/Session.scala |   3 +
 .../scala/com/cloudera/livy/utils/SparkApp.scala   |  16 +++
 .../com/cloudera/livy/utils/SparkYarnApp.scala     |  49 ++++++--
 .../livy/server/batch/BatchServletSpec.scala       |  30 +++++
 .../livy/server/batch/BatchSessionSpec.scala       |  17 +++
 .../InteractiveSessionServletSpec.scala            |  46 ++++++-
 .../interactive/InteractiveSessionSpec.scala       |  19 ++-
 .../com/cloudera/livy/utils/SparkYarnAppSpec.scala | 139 ++++++++++++++++++++-
 16 files changed, 357 insertions(+), 40 deletions(-)

commit 9d84905bae15d15a290035d0d4a5c7d811af2360
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Sat Sep 10 00:17:22 2016 +0800

    LIVY-161. Avoid exposing Livy internal configurations to Spark
    
    Closes #188

 .../scala/com/cloudera/livy/test/JobApiIT.scala    | 22 ++++++++++++++++++++--
 .../livy/rsc/driver/RSCDriverBootstrapper.java     |  1 +
 2 files changed, 21 insertions(+), 2 deletions(-)

commit c7a9a10e2b57feb5c657a325821fae03a6ad8304
Author: Saisai Shao <sai.sai.shao@gmail.com>
Date:   Thu Sep 8 14:19:40 2016 +0800

    LIVY-209. Fixed getRequestPathInfo returning path with 'null'
    
    Fixed getRequestPathInfo returning path with 'null' when the request's path info is null.

 .../main/scala/com/cloudera/livy/server/SessionServlet.scala  |  2 +-
 .../scala/com/cloudera/livy/server/SessionServletSpec.scala   | 11 +++++++++++
 2 files changed, 12 insertions(+), 1 deletion(-)

commit 0284148713a9e21666992519d70cb797312ae9a8
Author: Jeff Zhang <zjffdu@apache.org>
Date:   Wed Sep 7 16:34:47 2016 -0700

    LIVY-205. sparkr.zip is unzipped on executor side
    
    This PR is to unzipped sparkr.zip on executor side.
    
    Closes #181

 .../src/main/scala/com/cloudera/livy/repl/SparkRInterpreter.scala | 8 +++-----
 .../com/cloudera/livy/server/interactive/InteractiveSession.scala | 2 +-
 2 files changed, 4 insertions(+), 6 deletions(-)

commit 2d6e0267f344c2cd7c9df779ec788160a1c7014b
Author: Alex Man <tc.technetium@gmail.com>
Date:   Tue Aug 2 19:02:02 2016 -0700

    LIVY-186. Better YARN integration for Interactive Session.
    
    - Transit to dead state when the YARN application dies.
    - If RSCClient.stop() fails to stop RSCDriver, kill the YARN application using YARN API.
    - Expose YARN app id.
    - Show YARN diagnosis in session log.
    - Fixed flaky SparkYarnAppSpec.should kill yarn app.
    - Increased some integration test timeout when running on Travis.
    
    Closes #179

 .../cloudera/livy/client/http/HttpClientSpec.scala |  1 +
 conf/livy.conf                                     | 18 ++---
 .../test/framework/BaseIntegrationTestSuite.scala  | 29 +++++--
 .../cloudera/livy/test/framework/MiniCluster.scala |  7 +-
 .../scala/com/cloudera/livy/test/BatchIT.scala     |  9 +--
 .../com/cloudera/livy/test/InteractiveIT.scala     | 91 ++++++++++++++++------
 .../main/java/com/cloudera/livy/rsc/RSCClient.java | 18 ++---
 .../main/java/com/cloudera/livy/rsc/RSCConf.java   |  4 +-
 .../com/cloudera/livy/rsc/driver/RSCDriver.java    |  8 +-
 .../cloudera/livy/server/batch/BatchSession.scala  |  2 +-
 .../server/interactive/InteractiveSession.scala    | 89 ++++++++++++++++-----
 .../interactive/InteractiveSessionServlet.scala    |  2 +-
 .../scala/com/cloudera/livy/utils/SparkApp.scala   |  7 +-
 .../com/cloudera/livy/utils/SparkYarnApp.scala     |  5 +-
 .../InteractiveSessionServletSpec.scala            |  1 +
 .../com/cloudera/livy/utils/SparkYarnAppSpec.scala |  2 +-
 16 files changed, 209 insertions(+), 84 deletions(-)

commit 4a681a2f3f2b6de3fcb5de80f55dbbf9fafbf733
Author: manikandan.nagarajan <manikandan.n2010@gmail.com>
Date:   Tue Aug 30 10:22:11 2016 -0700

    LIVY-171. Client side Python Job API.
    
    Closes #183

 .gitignore                                         |   5 +
 .travis.yml                                        |   6 +-
 README.rst                                         |   8 +-
 pom.xml                                            |   5 +-
 python-api/.gitattributes                          |   2 +
 python-api/MANIFEST.in                             |   3 +
 python-api/pom.xml                                 | 138 ++++++
 python-api/setup.cfg                               |   6 +
 python-api/setup.py                                |  58 +++
 python-api/src/main/python/livy/__init__.py        |  17 +
 python-api/src/main/python/livy/client.py          | 489 +++++++++++++++++++++
 python-api/src/main/python/livy/job_context.py     | 154 +++++++
 python-api/src/main/python/livy/job_handle.py      | 251 +++++++++++
 .../src/test/python/livy-tests/client_test.py      | 227 ++++++++++
 .../test/python/livy-tests/resources/jar_file.jar  |   0
 .../python/livy-tests/resources/livy-client.conf   |   2 +
 .../livy-tests/resources/spark-defaults.conf       |   1 +
 .../test/python/livy-tests/resources/text_file.txt |   1 +
 .../test/python/livy-tests/resources/zip_file.zip  |   0
 19 files changed, 1362 insertions(+), 11 deletions(-)

commit c49ee5ae24477bdd33b554df3356267f051d5585
Author: manikandan.nagarajan <manikandan.n2010@gmail.com>
Date:   Thu Aug 25 14:26:28 2016 -0700

    LIVY-192. Python Client API - Server side changes
    
    - Server side changes to handle requests from the Python Client API
    - Added Integration tests
    
    Closes #182

 .travis.yml                                        |  12 +-
 README.rst                                         |  11 +
 .../src/test/resources/{pytest.py => batch.py}     |   0
 .../src/test/resources/test_python_api.py          | 224 +++++++++++++++++++++
 .../scala/com/cloudera/livy/test/BatchIT.scala     |   2 +-
 .../scala/com/cloudera/livy/test/JobApiIT.scala    |  69 ++++++-
 repl/src/main/resources/fake_shell.py              | 118 ++++++++++-
 .../com/cloudera/livy/repl/BypassPySparkJob.scala  |  37 ++++
 .../cloudera/livy/repl/PySparkJobProcessor.scala   |  28 +++
 .../com/cloudera/livy/repl/PythonInterpreter.scala |  94 ++++++++-
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  |  35 +++-
 .../java/com/cloudera/livy/rsc/BaseProtocol.java   |   2 +-
 .../main/java/com/cloudera/livy/rsc/RSCClient.java |  26 +--
 .../com/cloudera/livy/rsc/driver/AddFileJob.java   |  40 ++++
 .../com/cloudera/livy/rsc/driver/AddJarJob.java    |  35 +---
 .../cloudera/livy/rsc/driver/BypassJobWrapper.java |   8 +-
 .../cloudera/livy/rsc/driver/JobContextImpl.java   |  11 +-
 .../com/cloudera/livy/rsc/driver/JobWrapper.java   |   2 +-
 .../com/cloudera/livy/rsc/driver/RSCDriver.java    |  56 +++++-
 .../interactive/InteractiveSessionServlet.scala    |  30 ++-
 20 files changed, 740 insertions(+), 100 deletions(-)

commit 6a32fd55a4e552c309253b3d6c7460ba95c9bcd3
Author: Alex Man <tc.technetium@gmail.com>
Date:   Tue Aug 16 11:19:11 2016 -0700

    LIVY-184. Better YARN integration for Batch Session.
    
    When livy is running with YARN master:
    - Stop and log session using YARN API.
    - Exposed app id.
    - Livy now requires Spark 1.6+. Added a check so Livy won't start if it's running with older Spark.
    
    Test changes:
    - Added a test to verify killing the batch session will kill its YARN app.
    - Added a test to verify killing the YARN app will change the batch session state.
    - Added YarnClient integration in test framework.
    - Added halt mode in SimpleSparkApp in test lib for kill session test.
    - Added a method to dump logs when Batch test fails.
    - Added a Clock interface to allow unit testing to mock out time.
    
    Closes #163

 README.rst                                         |   2 +-
 .../cloudera/livy/client/common/HttpMessages.java  |   8 +-
 conf/livy.conf                                     |   6 +
 core/src/main/scala/com/cloudera/livy/Utils.scala  |   9 +
 .../test/framework/BaseIntegrationTestSuite.scala  |  11 +-
 .../com/cloudera/livy/test/framework/Cluster.scala |  13 ++
 .../scala/com/cloudera/livy/test/BatchIT.scala     | 164 ++++++++++++---
 .../main/scala/com/cloudera/livy/LivyConf.scala    |   9 +
 .../com/cloudera/livy/server/LivyServer.scala      |  32 ++-
 .../cloudera/livy/server/batch/BatchSession.scala  |  55 +++--
 .../livy/server/batch/BatchSessionServlet.scala    |   4 +-
 .../interactive/InteractiveSessionServlet.scala    |   4 +-
 .../scala/com/cloudera/livy/sessions/Session.scala |  18 +-
 .../main/scala/com/cloudera/livy/utils/Clock.scala |  39 ++++
 .../scala/com/cloudera/livy/utils/SparkApp.scala   |  89 ++++++++
 .../com/cloudera/livy/utils/SparkProcApp.scala     |  61 ++++++
 .../com/cloudera/livy/utils/SparkYarnApp.scala     | 232 +++++++++++++++++++++
 .../com/cloudera/livy/server/LivyServerSuite.scala |  21 ++
 .../com/cloudera/livy/utils/SparkYarnAppSpec.scala | 208 ++++++++++++++++++
 .../cloudera/livy/test/apps/SimpleSparkApp.java    |  16 +-
 20 files changed, 919 insertions(+), 82 deletions(-)

commit 741defdf388f77d1433b135b5c9354e1b37ed074
Author: Jeff Zhang <zjffdu@apache.org>
Date:   Mon Aug 15 10:19:53 2016 -0700

    LIVY-201. Pick up R executable from configuration first
    
    For now, I can not run sparkr in cluster mode as livy pick up R executable from environment variable DRIVER_R, but spark didn't pass DRIVER_R to AM in yarn-cluster mode (This can be fixed in spark side). And since spark introduce spark.sparkr.r.command & spark.r.command for configuring R executable. Livy should also take this configuration over environment variable DRIVER_R.
    
    Closes #177

 repl/src/main/scala/com/cloudera/livy/repl/SparkRInterpreter.scala | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 200086e4bd11b8131f1e9301acd24a77c0e6e977
Author: manikandan.nagarajan <manikandan.n2010@gmail.com>
Date:   Thu Aug 11 11:38:14 2016 -0700

    LIVY-173. Examples module
    
    Simple WordCount example using Scala-API
    
    Closes #176

 examples/pom.xml                                   |  76 +++++++
 .../com/cloudera/livy/examples/WordCountApp.scala  | 219 +++++++++++++++++++++
 pom.xml                                            |   1 +
 3 files changed, 296 insertions(+)

commit eaf99f53563f732a2001b4301a2defd23f7b24e7
Author: manikandan.nagarajan <manikandan.n2010@gmail.com>
Date:   Tue Aug 9 10:50:48 2016 -0700

    LIVY-180. Add docs to the Scala-API
    
    Closes #175

 .../cloudera/livy/scalaapi/LivyScalaClient.scala   | 80 ++++++++++++++++++-
 .../cloudera/livy/scalaapi/ScalaJobContext.scala   | 20 +++++
 .../cloudera/livy/scalaapi/ScalaJobHandle.scala    | 93 +++++++++++++++++++++-
 .../scala/com/cloudera/livy/scalaapi/package.scala | 14 +++-
 4 files changed, 200 insertions(+), 7 deletions(-)

commit d1386405f1ada8be5e899594cecbd34fffdba244
Author: Alex Man <tc.technetium@gmail.com>
Date:   Thu Jul 28 16:45:14 2016 -0700

    LIVY-195. Killing interactive session while spark-submit is running.
    
    Closes #170

 .../com/cloudera/livy/rsc/ContextLauncher.java     | 17 ++++-
 .../main/java/com/cloudera/livy/rsc/RSCClient.java |  6 +-
 .../com/cloudera/livy/rsc/TestSparkClient.java     | 74 +++++++++++++++++-----
 rsc/src/test/resources/log4j.properties            |  2 +-
 4 files changed, 81 insertions(+), 18 deletions(-)

commit d561562178f5a6c18a64818bef7d8dff4b27bf3a
Author: Paul Wilkinson <paulw@cloudera.com>
Date:   Thu Jul 28 13:36:45 2016 -0700

    LIVY-199. Add a simple user whitelist capability.
    
    Adding allowed users to LivyConf.
    Adding a servlet filter to control who has access.
    Validating auth type when enabling access control.
    
    Closes #173

 .../main/scala/com/cloudera/livy/LivyConf.scala    |  7 ++++
 .../com/cloudera/livy/server/AccessFilter.scala    | 46 ++++++++++++++++++++++
 .../com/cloudera/livy/server/LivyServer.scala      | 11 ++++++
 3 files changed, 64 insertions(+)

commit 14eddd14f0d6dfb13850478fd4548341e7556ab1
Author: Paul Wilkinson <paulw@cloudera.com>
Date:   Thu Jul 28 13:26:58 2016 -0700

    LIVY-198. Remove forced impersonation when using Kerberos.
    
    Changing file upload to run as current user if impersonation is disabled.
    
    Closes #172

 server/src/main/scala/com/cloudera/livy/server/LivyServer.scala | 4 ----
 server/src/main/scala/com/cloudera/livy/sessions/Session.scala  | 6 +++++-
 2 files changed, 5 insertions(+), 5 deletions(-)

commit ef8e6304cc0b6f3f627443bc15706fa214c79fcb
Author: Jeff Zhang <zjffdu@apache.org>
Date:   Wed Jul 27 16:55:52 2016 -0700

    LIVY-98. Run kinit thread periodically in secure mode
    
    The solution here is always execute kinit command periodically as long as the refresh interval is less than the ticket lifetime which is specified in /etc/krb5.conf
    
    Closes #145

 .../main/scala/com/cloudera/livy/LivyConf.scala    | 15 +++-
 .../com/cloudera/livy/server/LivyServer.scala      | 81 ++++++++++++++++++++--
 2 files changed, 87 insertions(+), 9 deletions(-)

commit 8ab212818553afda07dff584cbcba47cc619c0e3
Author: Alex Man <tc.technetium@gmail.com>
Date:   Mon Jul 11 16:19:05 2016 -0700

    LIVY-153. Upgraded Spark from 1.5 to 1.6.2.
    
    Changed default Spark version to 1.6.2 (Apache build).
    
    Closes #169

 pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a685ecc9e07803bb4ef1660c1daff3dd0274e5cd
Author: purechoc <purechoc.en@gmail.com>
Date:   Wed Jul 13 15:06:47 2016 -0700

    LIVY-188.       change kryo serde method usage
    
    currently kryo serde method usage has bug when SerDe long string include unicode.
    
    may be this is kryo bug.
    but, may be this is wrong method usage.
    
    so using byte array instead of ByteBufferInputStream.
    
    Closes #168

 checkstyle.xml                                                |  1 +
 .../main/java/com/cloudera/livy/client/common/Serializer.java |  7 ++++---
 .../java/com/cloudera/livy/client/common/TestSerializer.java  | 11 +++++++++++
 3 files changed, 16 insertions(+), 3 deletions(-)

commit 903d2d5fda1efb1c05b2c8bd0e7a1f8f347b9cb1
Author: Alex Man <tc.technetium@gmail.com>
Date:   Fri Jul 8 22:39:03 2016 -0700

    Fixed Travis config
    
    - Don't run integration test during Travis's dependency install step.
    - Fixed TestSparkClient to not dump tons of debug logs.
    - Use Travis cache.
    
    Closes #166

 .travis.yml | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit 4dcfbadd15e69c96aabf9251f0253aa24f4da705
Author: Jeff Zhang <zjffdu@apache.org>
Date:   Fri Jul 8 14:29:43 2016 -0700

    LIVY-189. Rest api for getting all sessions should order sessions by id
    
    Change default HashMap to LinkedHashMap to make the sessions ordered.
    
    Closes #162

 server/src/main/scala/com/cloudera/livy/sessions/SessionManager.scala | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 38343cc680254c6c0870b1ad69f62b2d534f3658
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Jul 7 14:03:11 2016 -0700

    LIVY-185. Update jacoco and generate aggregate reports.
    
    To account for coverage added by integration tests, generate aggregate reports,
    and hook up the jacoco command line arguments to the Livy server run as part of
    the integration tests.
    
    Closes #161

 .travis.yml                                        |   2 +-
 .../com/cloudera/livy/client/common/TestUtils.java |  80 ++++++++++++++
 .../cloudera/livy/client/common/TestTestUtils.java |  39 +++++++
 coverage/pom.xml                                   | 123 +++++++++++++++++++++
 .../test/framework/BaseIntegrationTestSuite.scala  |   2 +-
 .../cloudera/livy/test/framework/MiniCluster.scala |  31 ++++--
 pom.xml                                            |  30 +----
 .../com/cloudera/livy/rsc/ContextLauncher.java     |  16 +--
 8 files changed, 277 insertions(+), 46 deletions(-)

commit d3d203160436abb37b1136035d534f3d1c1a0533
Author: purechoc <purechoc.en@gmail.com>
Date:   Thu Jul 7 11:10:28 2016 -0700

    LIVY-85. support pyspark with python3
    
    support python3 using pyspark3
    
    added kind type 'pyspark3'
    `kind = [pyspark, pyspark3, spark, sparkr]`
    
    Hue Notebook using like this
    ```
      [[interpreters]]
        [[[pyspark]]]
          name=PySpark
          interface=livy
        [[[pyspark3]]]
          name=PySpark3
          interface=livy
    ```
    
    if user want to using python3, all cluster node need to be installed python3.
    
    Closes #93

 .../scala/com/cloudera/livy/sessions/Kind.scala    |  5 ++
 pom.xml                                            |  5 ++
 repl/src/main/resources/fake_shell.py              | 80 ++++++++++++++--------
 .../com/cloudera/livy/repl/PythonInterpreter.scala | 16 +++--
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  |  3 +-
 .../cloudera/livy/repl/PythonInterpreterSpec.scala | 37 ++++++++--
 .../com/cloudera/livy/repl/PythonSessionSpec.scala | 39 ++++++++++-
 .../server/interactive/InteractiveSession.scala    |  2 +-
 8 files changed, 141 insertions(+), 46 deletions(-)

commit 14aedd94b7435a19c3752112768a699e2b5a3592
Author: Jeff Zhang <zjffdu@apache.org>
Date:   Wed Jul 6 15:43:38 2016 -0700

    LIVY-94. SQLContext/HiveContext is not available in Interpreter
    
    It is straightforward to add SQLContext. But for HiveContext is a little complicated, because it require hive-site.xml and datanucleus jars. There's 2 ways to specify that
    1. Ask the client to specify that in rest api, but client should have no idea where the hive-site.xml and datanucleus jars are located in the livy server machine. Although they put these files on hdfs and specify them using hdfs path. But this way still have one issue in yarn-cluster mode due to SPARK-14845
    2. Add a option like enableHiveContext in rest api and livy server pick up the hive-site.xml and datanucleus jars automatically. But this way has limitation that it always use the same hive-site.xml, prevent user to user another custom hive-site.xml if he want to connect to another hive metastore.
    In this PR, I will combine option 1 and option 2. First check hive-site.ml in user request and then look for it in classpath. And will always detect datanucleus jars automatically.
    
    Closes #132

 conf/livy.conf                                     |   4 +
 integration-test/pom.xml                           |   1 +
 .../cloudera/livy/test/framework/MiniCluster.scala |   2 +-
 .../com/cloudera/livy/test/InteractiveIT.scala     |   3 +
 pom.xml                                            |   4 +-
 repl/src/main/resources/fake_shell.py              |   1 +
 .../com/cloudera/livy/repl/SparkInterpreter.scala  |  34 ++++++-
 .../com/cloudera/livy/repl/SparkRInterpreter.scala |   1 +
 .../main/scala/com/cloudera/livy/LivyConf.scala    |   1 +
 .../com/cloudera/livy/server/LivyServer.scala      |   4 +-
 .../server/interactive/InteractiveSession.scala    | 105 ++++++++++++++++++---
 11 files changed, 138 insertions(+), 22 deletions(-)

commit a5a09746c162c0e3ae5fb2bf6f53023f92722f35
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Jul 5 10:26:23 2016 -0700

    LIVY-183. Deploy livy-main pom to maven repo.
    
    This requires changing the default value of "skipDeploy" since it
    cannot be overridden just for the root pom. Ah, maven.
    
    Closes #160

 api/pom.xml              | 1 -
 assembly/pom.xml         | 1 +
 client-common/pom.xml    | 4 ----
 client-http/pom.xml      | 4 ----
 core/pom.xml             | 4 ++++
 integration-test/pom.xml | 1 +
 pom.xml                  | 6 +++---
 repl/pom.xml             | 4 ++++
 rsc/pom.xml              | 1 -
 server/pom.xml           | 4 ++++
 test-lib/pom.xml         | 4 ++++
 11 files changed, 21 insertions(+), 13 deletions(-)

commit 52be3a6d753b215fbbe980ffee61aaa6a13e98ed
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Jun 30 15:05:39 2016 -0700

    Fix integration tests on real clusters.
    
    Spark was being run in local mode after recent changes, which made a few
    tests fail. So update things to run in yarn-cluster mode, and also reuse
    existing constants in a few places.
    
    Closes #159

 .../cloudera/livy/test/framework/MiniCluster.scala    |  6 +++---
 .../cloudera/livy/test/framework/RealCluster.scala    |  9 +++++----
 .../src/main/scala/com/cloudera/livy/LivyConf.scala   | 19 ++++++++++++++++---
 .../scala/com/cloudera/livy/server/LivyServer.scala   | 10 +---------
 4 files changed, 25 insertions(+), 19 deletions(-)

commit 7448c7cd9634d6e03e8964fcb10820c555f1db9b
Author: Alex Man <tc.technetium@gmail.com>
Date:   Wed Jun 15 16:43:57 2016 -0700

    LIVY-157. Specifying Spark master and Spark deploy mode for Livy sess…
    
    …ion recovery.
    
    Added 2 new Livy configs to specify master and deploy mode for Livy sessions:
    - livy.spark.master (Default is local)
    - livy.spark.deployMode (Default left empty)
    
    Session.prepareConf() add them to SparkConf as spark.master and spark.submit.deployMode. Spark 1.x does not support spark.submit.deployMode. ContextLauncher and BatchSession will map it back to spark-submit argument.
    
    Also fixed issues in integration test framework:
    - Moved integration test from maven test phase to maven integration test phase.
    - Cleanup files and processes from previous test run before running the test.
    - Added ability to set LivyConf.
    - Write MiniLivyServer's endpoint to new file serverUrl.conf instead of livy.conf.
    
    Closes #156

 conf/livy.conf                                     |  6 +++++
 integration-test/pom.xml                           | 21 +++++++++++++++-
 .../test/framework/BaseIntegrationTestSuite.scala  | 11 ++++++---
 .../cloudera/livy/test/framework/MiniCluster.scala | 28 +++++++++++++++-------
 .../com/cloudera/livy/rsc/ContextLauncher.java     |  8 +++++++
 .../main/scala/com/cloudera/livy/LivyConf.scala    | 13 +++++++---
 .../cloudera/livy/server/batch/BatchSession.scala  |  5 ++++
 .../scala/com/cloudera/livy/sessions/Session.scala |  5 +++-
 .../com/cloudera/livy/sessions/SessionSpec.scala   |  2 +-
 9 files changed, 82 insertions(+), 17 deletions(-)

commit d69394431538a2a1a36be9b875aab09674e54fd5
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Jun 28 11:51:31 2016 -0700

    Remove unused files.
    
    - Logback is not used for logging, so conf files are not needed.
    - Stale pyspark shell script

 repl/src/main/resources/fake_pyspark.sh      | 39 ----------------------------
 repl/src/main/resources/logback-access.xml   | 13 ----------
 repl/src/main/resources/logback.xml          | 12 ---------
 server/src/main/resources/logback-access.xml | 13 ----------
 server/src/main/resources/logback.xml        | 12 ---------
 5 files changed, 89 deletions(-)

commit dd9b036e15724354bc3f88cb647454a43f266f2d
Author: Jeff Zhang <zjffdu@apache.org>
Date:   Tue Jun 21 20:45:38 2016 -0700

    LIVY-174. CSRF protection in livy rest api
    
    Add CSRFFilter in livy server. By default it is false, so it won't bring incomptability and break the existing application.
    
    Closes #154

 .../cloudera/livy/client/http/LivyConnection.java  | 12 +++---
 conf/livy.conf                                     |  4 ++
 .../com/cloudera/livy/server/CsrfFilter.scala      | 50 ++++++++++++++++++++++
 .../com/cloudera/livy/server/LivyServer.scala      |  8 +++-
 4 files changed, 67 insertions(+), 7 deletions(-)

commit 9071339f5c1a508c66d33b8651dd5bcc0fe48764
Author: Alex Man <tc.technetium@gmail.com>
Date:   Thu Jun 16 06:12:50 2016 -0700

    LIVY-177. Added unicode support output for PySpark session.
    
    fake_shell is using cStringIO to capture stdout and stderr.
    cStringIO doesn't support unicode. Replacing it with io.StringIO.
    io.StringIO supports unicode only, convert every output to utf8.
    
    Closes #155

 repl/src/main/resources/fake_shell.py              | 41 +++++++++++++---------
 .../cloudera/livy/repl/PythonInterpreterSpec.scala | 14 ++++++++
 2 files changed, 38 insertions(+), 17 deletions(-)

commit 485a03185e9a3feb38a5d1588b5baa1b29163c01
Author: Manikandan Nagarajan <manikandan.nagarajan@cloudera.com>
Date:   Thu Jun 16 15:09:16 2016 -0700

    LIVY-92. Scala-friendly API for Livy client sessions
    
    - Added a Scala API which is a wrapper over the existing Java API
    - Jobs can be submitted with a Scala-friendly JobContext eliminating the overhead of creating new job instances
    - The submit API returns a Scala JobHandle which supports the existing Java Listener callbacks
    
    Closes #151

 pom.xml                                            |   1 +
 scala-api/pom.xml                                  |  70 +++++++
 .../cloudera/livy/scalaapi/LivyScalaClient.scala   |  94 +++++++++
 .../cloudera/livy/scalaapi/ScalaJobContext.scala   |  46 +++++
 .../cloudera/livy/scalaapi/ScalaJobHandle.scala    | 115 +++++++++++
 .../scala/com/cloudera/livy/scalaapi/package.scala |  41 ++++
 scala-api/src/test/resources/log4j.properties      |  34 ++++
 .../cloudera/livy/scalaapi/ScalaClientTest.scala   | 212 +++++++++++++++++++++
 .../livy/scalaapi/ScalaClientTestUtils.scala       |  55 ++++++
 .../livy/scalaapi/ScalaJobHandleTest.scala         | 187 ++++++++++++++++++
 10 files changed, 855 insertions(+)

commit c6c12e02edecb50ed4a280eb236ab99d7ae32559
Author: Lin Chan <linchan@microsoft.com>
Date:   Mon Jun 13 10:15:09 2016 -0700

    LIVY-167. Fixed last line of interactive statements cannot be comments.
    
    [LIVY-167] (https://issues.cloudera.org/projects/LIVY/issues/LIVY-167)
    
    Closes #152

 .../com/cloudera/livy/repl/SparkInterpreter.scala  | 19 ++++--
 .../cloudera/livy/repl/ScalaInterpreterSpec.scala  | 69 ++++++++++++++++++++++
 2 files changed, 83 insertions(+), 5 deletions(-)

commit a8af54cae23a34e7575e445d371414d65ee16213
Author: Alex Man <tc.technetium@gmail.com>
Date:   Thu Jun 16 13:55:49 2016 -0700

    LIVY-164. Fixed and cleaned up stack trace return from SparkInterpreter.
    
    - Moved stack trace from "evalue" to "traceback".
    - Filtered out internal frames from stack trace.
    
    Closes #150

 .../com/cloudera/livy/repl/SparkInterpreter.scala  | 24 +++++++++++++++++++++-
 .../com/cloudera/livy/repl/SparkSessionSpec.scala  | 19 ++++++++++-------
 2 files changed, 35 insertions(+), 8 deletions(-)

commit 230e3d08b1ae293f0c12a63726da6f568a70880c
Author: Alex Man <tc.technetium@gmail.com>
Date:   Mon Jun 13 11:51:51 2016 -0700

    LIVY-163. Fixed missing Python traceback in interactive mode.
    
    - Also stripped the frame of fake_shell in the traceback. It should be transparent to users.
    
    Closes #147

 repl/src/main/resources/fake_shell.py                 | 10 +++++++++-
 .../cloudera/livy/repl/PythonInterpreterSpec.scala    |  1 -
 .../com/cloudera/livy/repl/PythonSessionSpec.scala    | 19 ++++++++++---------
 .../server/interactive/InteractiveSessionSpec.scala   |  2 --
 4 files changed, 19 insertions(+), 13 deletions(-)

commit 18911ba193d51fa69c1d9c10e2c6992edc702894
Author: Alex Man <tc.technetium@gmail.com>
Date:   Fri Jun 10 11:51:10 2016 -0700

    Adding user jars to Scala interpreter's class path.
    
    Without this fix, if user imports a package using SparkConf: "spark.jars.packages": "com.databricks:spark-csv_2.10:1.4.0"
    Then "import com.databricks.spark.csv._" in the interpreter, it will throw an error because the Scala interpreter cannot see the Spark CSV package.
    
    Also made some small changes in the test framework.
    
    Closes #146

 .../test/framework/BaseIntegrationTestSuite.scala  |  3 +-
 .../cloudera/livy/test/framework/MiniCluster.scala | 10 +++++++
 .../com/cloudera/livy/test/InteractiveIT.scala     | 22 ++++++++++++++
 .../com/cloudera/livy/repl/SparkInterpreter.scala  | 35 ++++++++++++++++++++--
 4 files changed, 67 insertions(+), 3 deletions(-)

commit 6bfd6e2165f07c9d056ed35fe58875035389191c
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri Jun 3 11:45:24 2016 -0700

    LIVY-154. Don't reuse connections in client-http.
    
    Either the current client code is doing something wrong when setting
    up the http client, or there's a bug in the http client library, but
    the result is that a connection ends up being closed while still in
    use, causing errors when the client is talking to Livy.
    
    While investigating that I found a couple of other issues that I also
    fixed here:
    
    - the client-http packaging was relocating too much stuff, which broke
      logging for the relocated classes, making it hard to debug things.
    
    - the server wasn't configuring multipart request handling for servlets;
      fixing that means that we can't use asynchronous tasks, since Jetty
      (at least the version we use) does not allow that. Async tasks weren't
      really needed anyway, since they're either pretty quick or, otherwise,
      would block a thread in another shared thread pool anyway, so there
      wasn't really any gain.
    
    Closes #144

 client-http/pom.xml                                |  8 +++--
 .../cloudera/livy/client/http/LivyConnection.java  |  6 ++--
 client-http/src/test/resources/log4j.properties    |  4 +--
 .../src/test/resources/log4j.properties            |  1 +
 .../com/cloudera/livy/server/LivyServer.scala      | 15 ++++++--
 .../com/cloudera/livy/server/SessionServlet.scala  | 40 ++++++++--------------
 .../scala/com/cloudera/livy/server/WebServer.scala |  2 --
 .../interactive/InteractiveSessionServlet.scala    | 32 ++++++-----------
 8 files changed, 48 insertions(+), 60 deletions(-)

commit b99bc14c9f0214785b77b3a245e6a4014fcf5dda
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue May 31 16:50:02 2016 -0700

    Add some documentation about the Java API.

 README.rst | 107 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 107 insertions(+)

commit 8b949e1e57b3ff8c5c09418d61733658c2910b47
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue May 31 11:38:22 2016 -0700

    Add distributionManagement so that maven artifacts can be deployed.

 pom.xml | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit fe565cc30af2e1da2c1638774dc264f0208182d1
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue May 31 10:39:19 2016 -0700

    LIVY-156. Fix propagation of driver memory config.
    
    Closes #143

 .../com/cloudera/livy/server/interactive/InteractiveSession.scala    | 2 +-
 .../cloudera/livy/server/interactive/InteractiveSessionSpec.scala    | 5 +++++
 2 files changed, 6 insertions(+), 1 deletion(-)

commit 06c995614b626b0761fa5835ab5cdd77926eda52
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue May 24 15:16:37 2016 -0700

    LIVY-155. Make sure original context class loader is restored after calling REPL.
    
    Anytime the Spark REPL is called, it may mess with the thread's context
    class loader. There was code to restore the original one after the
    interpreter is stopped, but that only applied to a single thread, which
    might not even be the right one.
    
    The issue showed up mainly during unit tests, where multiple REPL instances
    were created in the same VM. The REPL's class loader would remain as the
    active context class loader in many threads in the global executor, and
    that would prevent the GC from collecting a whole lot of unused memory
    referenced from the REPL.
    
    With this patch, the heap size after a full GC remains constant at around
    300M while the repl unit tests are running (while it would balloon to more
    than 1G before).
    
    I also added some explicit shut down code to the R interpreter, to make sure
    that its backend thread is cleaned up.
    
    Closes #142

 .../com/cloudera/livy/repl/SparkInterpreter.scala  | 37 +++++++++++++---------
 .../com/cloudera/livy/repl/SparkRInterpreter.scala | 27 ++++++++++++----
 2 files changed, 42 insertions(+), 22 deletions(-)

commit f6a3a27f454aa948ede3a7435e6b50ddb46c9ba8
Author: Stephanie Bodoff <sbodoff@cloudera.com>
Date:   Tue May 24 15:53:45 2016 -0700

    Fix sample indentation.
    
    Closes #141

 README.rst | 108 ++++++++++++++++++++++++++++++++++---------------------------
 1 file changed, 61 insertions(+), 47 deletions(-)

commit 17ec0e90e4e6f0ad7899145794acc4588955018d
Author: Stephanie Bodoff <sbodoff@cloudera.com>
Date:   Mon May 23 13:30:42 2016 -0700

    Change code samples to be copyable. Fix grammar and conventions.

 README.rst | 313 ++++++++++++++++++++++++++++++-------------------------------
 1 file changed, 156 insertions(+), 157 deletions(-)

commit a794bce7fb79b8b7506bc89040dceb7501e09d1e
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon May 23 11:32:18 2016 -0700

    Update version to 0.3.0-SNAPSHOT.

 api/pom.xml              | 4 ++--
 assembly/pom.xml         | 4 ++--
 client-common/pom.xml    | 4 ++--
 client-http/pom.xml      | 4 ++--
 core/pom.xml             | 4 ++--
 integration-test/pom.xml | 4 ++--
 pom.xml                  | 2 +-
 repl/pom.xml             | 4 ++--
 rsc/pom.xml              | 4 ++--
 server/pom.xml           | 4 ++--
 test-lib/pom.xml         | 4 ++--
 11 files changed, 21 insertions(+), 21 deletions(-)

commit 06165cce1ee99504b6ead12daae0cb34b8e3ea32
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Sat May 21 20:07:10 2016 -0700

    Update readme to properly reference ASF projects.

 README.rst | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 5043215914d0334acdf66ddc47e6f66dfb155000
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu May 19 16:04:00 2016 -0700

    LIVY-151. Make sure handle state is updated before result can be returned.
    
    Closes #140

 .../com/cloudera/livy/client/http/JobHandleImpl.java    | 17 +++++++----------
 .../com/cloudera/livy/client/http/HttpClientSpec.scala  |  2 +-
 2 files changed, 8 insertions(+), 11 deletions(-)

commit df9e98239dd985b5a3ed5bfb864195aeddacbfde
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu May 19 10:27:32 2016 -0700

    Add property to skip R tests in the whole build.
    
    Our internal build machines don't have R, so we need a way to disable
    those tests in our CI jobs.
    
    Closes #139

 .../com/cloudera/livy/test/framework/BaseIntegrationTestSuite.scala | 1 +
 pom.xml                                                             | 5 +++++
 .../test/scala/com/cloudera/livy/repl/SparkRInterpreterSpec.scala   | 6 ++++++
 repl/src/test/scala/com/cloudera/livy/repl/SparkRSessionSpec.scala  | 6 ++++++
 4 files changed, 18 insertions(+)

commit 816976f57e6ceeea615205f94df55993345fd58e
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon May 16 17:03:22 2016 -0700

    LIVY-149. Add idle timeout to RSC server.
    
    The RSC server currently listens indefinitely waiting for a Livy server
    to connect to it. That can result in sessions that never go away and need
    to be manually cleaned up when the Livy server crashes or is otherwise
    uncleanly shut down.
    
    So add a timeout, default 10 minutes, that allows sessions to shut themselves
    down if the Livy server goes away and doesn't come back.
    
    Closes #137

 conf/spark-blacklist.conf                          |  3 +
 .../main/java/com/cloudera/livy/rsc/RSCConf.java   |  9 ++-
 .../com/cloudera/livy/rsc/driver/RSCDriver.java    | 78 ++++++++++++++++++----
 .../com/cloudera/livy/rsc/TestSparkClient.java     | 58 +++++++++++++---
 .../java/com/cloudera/livy/test/jobs/Sleeper.java  | 38 +++++++++++
 5 files changed, 162 insertions(+), 24 deletions(-)

commit 386663d7752a62aeed1e880e3eede113daaba1fa
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon May 16 15:40:37 2016 -0700

    LIVY-150. Use "livy-server start|stop" in RealCluster ITs.
    
    This makes sure those code paths are tested too. While at it, I did some
    small clean up in the server script, and added documentation for some more
    env variables.
    
    Closes #136

 bin/livy-server                                    | 39 ++++++++++------------
 conf/livy-env.sh                                   | 17 +++++++---
 .../cloudera/livy/test/framework/RealCluster.scala | 36 ++++++++++++--------
 3 files changed, 54 insertions(+), 38 deletions(-)

commit 7f10ed0bba08b2d20ca5c1f3122e6e9318a0260e
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri May 13 16:25:52 2016 -0700

    LIVY-148. Add explicit whitelist for local files users can read.
    
    This makes it so by default users cannot provide local URIs as input
    to their jobs; this prevents users from using Livy to read arbitrary
    files on the Livy server's file system.
    
    It's possible to add explicit directories that users can read, though;
    adding "/", for example, would open up the whole file system to users.
    
    There are some extra changes to merge the code that processes file lists
    in the Spark configuration into a single shared method used by both
    batches and interactive sessions; this makes sure that both modes perform
    the appropriate checks and translations before starting Spark. This
    new code also looks at all known file lists that Spark processes (as
    of the current 2.0 branch) and performs validaton on those.
    
    Closes #135

 conf/livy.conf                                     |   5 +
 conf/spark-blacklist.conf                          |   5 +
 .../main/scala/com/cloudera/livy/LivyConf.scala    |  47 ++++++++-
 .../com/cloudera/livy/server/SessionServlet.scala  |  18 +---
 .../cloudera/livy/server/batch/BatchSession.scala  |   8 +-
 .../livy/server/batch/BatchSessionServlet.scala    |   1 -
 .../server/interactive/InteractiveSession.scala    |  44 +++++----
 .../interactive/InteractiveSessionServlet.scala    |   1 -
 .../scala/com/cloudera/livy/sessions/Session.scala |  81 ++++++++++++++--
 .../cloudera/livy/utils/SparkProcessBuilder.scala  |  50 ----------
 .../livy/server/BaseSessionServletSpec.scala       |   1 +
 .../livy/server/batch/BatchServletSpec.scala       |   4 +-
 .../livy/server/batch/BatchSessionSpec.scala       |   3 +-
 .../com/cloudera/livy/sessions/MockSession.scala   |  48 ++++++++++
 .../livy/sessions/SessionManagerSpec.scala         |  12 ---
 .../com/cloudera/livy/sessions/SessionSpec.scala   | 105 +++++++++++++++++++++
 16 files changed, 310 insertions(+), 123 deletions(-)

commit e454969c137482806cf4468cbd3a5cdd3b21f59e
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri May 13 12:52:01 2016 -0700

    LIVY-80. Add blurb in README about upgrading from 0.1.
    
    Closes #134

 README.rst | 31 ++++++++++++++++++++++++++++---
 1 file changed, 28 insertions(+), 3 deletions(-)

commit a385cbdf17184dd5b9ee9f8d7d078f819f01ab2c
Author: Jeff Zhang <zjffdu@apache.org>
Date:   Mon May 16 10:55:46 2016 -0700

    LIVY-97. Improve livy launch script
    
    using command "livy-server start" to start livy server and "livy-server stop" to stop livy server.
    LIVY_LOG_DIR is for log directory location and LIVY_PID_DIR is for pid location.
    
    Closes #95

 bin/livy-server  | 164 ++++++++++++++++++++++++++++++++++++++++++++++---------
 conf/livy-env.sh |  24 ++++++++
 2 files changed, 163 insertions(+), 25 deletions(-)

commit 24e10b265572b9666d329e0b2f275f5c836a0a7e
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu May 12 14:41:52 2016 -0700

    LIVY-147. Prepend default FS to user-provided paths when needed.
    
    Spark's default behavior is to treat schema-less URIs as local, which
    doesn't make a whole lot of sense for Livy (since clients most probably
    don't share Livy's local filesystem).
    
    So, instead, prepend Hadoop's default FS to paths when they don't already
    have a scheme, so that users don't have to figure that out by themselves.
    This should also make session requests more backwards compatible with v0.1,
    since a similar functionality existed there in certain cases.
    
    Closes #133

 .../main/java/com/cloudera/livy/LivyClient.java    | 10 +++++--
 .../com/cloudera/livy/client/http/HttpClient.java  |  4 ---
 .../test/framework/BaseIntegrationTestSuite.scala  | 10 +++++++
 .../scala/com/cloudera/livy/test/BatchIT.scala     | 17 +++++------
 .../scala/com/cloudera/livy/test/JobApiIT.scala    | 19 +++++++++++-
 .../main/java/com/cloudera/livy/rsc/RSCClient.java |  6 ++--
 .../main/scala/com/cloudera/livy/LivyConf.scala    |  4 +++
 .../cloudera/livy/server/batch/BatchSession.scala  |  9 +++---
 .../server/interactive/InteractiveSession.scala    | 18 ++++++-----
 .../interactive/InteractiveSessionServlet.scala    |  4 +--
 .../scala/com/cloudera/livy/sessions/Session.scala | 35 +++++++++++++++++++---
 .../com/cloudera/livy/test/jobs/FileReader.java    |  6 +++-
 12 files changed, 105 insertions(+), 37 deletions(-)

commit 174851da3e22fbe14647654c775197112ef80dc8
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed May 11 17:05:35 2016 -0700

    LIVY-31. Close sessions when server shuts down.
    
    Without HA or recovery, not doing this means leaving orphan sessions
    that will just hog resources and cannot be used, requiring people to
    use YARN's (or other) tools to shut them down.
    
    This change adds a shutdown hook that stops all the active sessions
    when the server shuts down. This requires doing more work in a shutdown
    hook than is generally palatable, but the alternative is to have some
    explicit command (via REST API? monitoring local file? something else?)
    to shut down the server, which we don't have.
    
    Closes #131

 server/src/main/scala/com/cloudera/livy/server/LivyServer.scala   | 7 +++++++
 .../main/scala/com/cloudera/livy/sessions/SessionManager.scala    | 8 ++++++--
 2 files changed, 13 insertions(+), 2 deletions(-)

commit ed8585c45061c8f2d4128dc3d23b5d007062755d
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed May 11 15:05:37 2016 -0700

    LIVY-140. Change RSC's URI scheme from "local" to "rsc".
    
    Closes #130

 repl/src/test/scala/com/cloudera/livy/repl/ReplDriverSuite.scala      | 2 +-
 rsc/src/main/java/com/cloudera/livy/rsc/RSCClientFactory.java         | 4 ++--
 rsc/src/test/java/com/cloudera/livy/rsc/TestSparkClient.java          | 4 ++--
 .../com/cloudera/livy/server/interactive/InteractiveSession.scala     | 2 +-
 4 files changed, 6 insertions(+), 6 deletions(-)

commit 7e5e4f3b7f4a6f2be9be9b4ec64559982d24652e
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon May 9 11:43:51 2016 -0700

    Add a simple "livy-shell" script.
    
    I'm adding this in 'dev' since it's not meant for public consumption; it's
    just a super simple shell that can talk to a Livy server, and is very
    helpful when testing and debugging things.

 dev/livy-shell | 172 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 172 insertions(+)

commit bcdfd60154cd5aec5edd1dc6d31b712e7da4fe34
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed May 11 13:17:52 2016 -0700

    LIVY-142. Update Jetty version.
    
    Closes #129

 pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 94561388bcdcebaaf78d78f8fc6159da182c63bf
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue May 10 14:49:07 2016 -0700

    LIVY-138. Update documentation and clean up some code.
    
    Bring the documentation up to speed with the code, removing references
    to removed functionality, and adding missing things. Here's a list of
    specific changes:
    
    - Removed mentions of "YARN" mode since now there's just "whatever the
      Spark config says" mode.
    - Renamed the config file to "livy.conf"; the "defaults" suffix didn't
      make a ton of sense, and it's ok to have the file there without the
      ".template" extension - all settings are commented out.
    - Removed outdated configs and added new configs to the config file.
    - Renamed "spark-blacklist.properties" to ".conf" for consistency.
    - Removed the verbose, specific options from the create session / batch
      REST documentation; users should use the "conf" map instead (as per
      LIVY-28). The code itself still handles the old parameters, but we
      really shouldn't encourage using them.
    - Stopped using env variables for configuration in several places. Some
      were just not used, so they're removed. Others already had equivalents
      in the config file, so the code was changed to reflect that.
    - Restore support for LIVY_CONF_DIR.
    
    Closes #128

 README.rst                                         | 288 ++++++++-------------
 bin/livy-server                                    |   5 +-
 conf/livy-defaults.conf.template                   |  40 ---
 conf/livy.conf                                     |  35 +++
 ...k-blacklist.properties => spark-blacklist.conf} |   0
 .../cloudera/livy/test/framework/MiniCluster.scala |   6 +-
 .../cloudera/livy/test/framework/RealCluster.scala |   2 +-
 .../com/cloudera/livy/rsc/ContextLauncher.java     |   5 +-
 .../main/java/com/cloudera/livy/rsc/RSCConf.java   |   1 +
 .../com/cloudera/livy/server/LivyServer.scala      |   2 +-
 .../com/cloudera/livy/server/SessionServlet.scala  |   2 +-
 .../server/interactive/InteractiveSession.scala    |  42 +--
 ...k-blacklist.properties => spark-blacklist.conf} |   0
 .../interactive/InteractiveSessionSpec.scala       |   2 +-
 14 files changed, 171 insertions(+), 259 deletions(-)

commit 43b153fdbb04bd702d302b87cbf3eb764960abfd
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed May 11 13:22:16 2016 -0700

    LIVY-129. Add tests for errors in interactive sessions.
    
    The largest portion of this change is a slight refactoring of
    how statements are tested in InteractiveIT, to make it easier to
    test for errors. With that done, I added a few tests to check error
    statement in Scala and Python, and also a test to make sure that
    Livy behaves properly when the Spark context dies unexpectedly.
    
    That last one required a fix in the code that handles interactive
    sessions, so that errors are properly propagated.
    
    Closes #127

 .../test/framework/BaseIntegrationTestSuite.scala  |  42 +++++--
 .../src/test/resources/log4j.properties            |   1 +
 .../com/cloudera/livy/test/InteractiveIT.scala     | 127 +++++++++++++++------
 .../scala/com/cloudera/livy/test/JobApiIT.scala    |  15 +++
 .../main/java/com/cloudera/livy/rsc/rpc/Rpc.java   |   3 +-
 .../server/interactive/InteractiveSession.scala    |  45 +++++---
 6 files changed, 166 insertions(+), 67 deletions(-)

commit 304cc46e8fd520b3a0d61aa80466c191f4372f8c
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu May 5 13:46:52 2016 -0700

    LIVY-134. Fix real cluster support for integration tests.
    
    This change bring real cluster support back to integration tests,
    by fixing and simplifying the code that starts Livy on a remote
    machine. Since the tests now need that, there's also support to
    download the Hadoop configuration from the cluster so that tests
    can write directly to HDFS. At the moment, that means kerberized
    cluster do not work.
    
    The change also cleans up a lot of unused features of the test
    framework; unused methods were removed, and the ClusterPool type
    was removed, since right now there's only ever a single cluster.
    I also removed the "withClue" calls since log fetching is now
    done differently, and logs end up in local files in the build
    directory.
    
    Closes #126

 .../test/framework/BaseIntegrationTestSuite.scala  |  89 +++--
 .../com/cloudera/livy/test/framework/Cluster.scala | 116 ++++++-
 .../cloudera/livy/test/framework/ClusterPool.scala |  89 -----
 .../cloudera/livy/test/framework/MiniCluster.scala |  83 +----
 .../cloudera/livy/test/framework/RealCluster.scala | 368 +++++++++++----------
 .../src/test/resources/log4j.properties            |   6 +-
 .../scala/com/cloudera/livy/test/BatchIT.scala     |  44 +--
 pom.xml                                            |   2 +
 .../scala/com/cloudera/livy/sessions/Session.scala |   3 +-
 .../com/cloudera/livy/test/jobs/SQLGetTweets.java  |  24 +-
 10 files changed, 402 insertions(+), 422 deletions(-)

commit 3ae23e6c67b10157d9e128ffebafd2bed37070a8
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu May 5 10:11:42 2016 -0700

    LIVY-135. Add Scala-based tests to integration suite.
    
    These tests are mostly targeted at making sure that Scala classes
    (standard library types, case classes, etc) are properly serialized
    by the Livy RPC code. They also show a little bit how to use the
    Livy API in Scala, although it's not really optimal right now.
    
    I also moved around some code in the test suite so that certain
    errors don't cause subsequent tests to throw nasty exceptions,
    causing them to be skipped instead.
    
    Closes #125

 .travis.yml                                        |  1 +
 .../test/framework/BaseIntegrationTestSuite.scala  |  2 +-
 .../cloudera/livy/test/framework/MiniCluster.scala | 10 ++++-
 .../scala/com/cloudera/livy/test/JobApiIT.scala    | 46 ++++++++++++++++------
 pom.xml                                            |  4 +-
 .../com/cloudera/livy/test/jobs/ScalaEcho.scala    | 33 ++++++++++++++++
 6 files changed, 78 insertions(+), 18 deletions(-)

commit d306a73c87a985e443b0b41d982233bcdc980f31
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue May 3 11:35:53 2016 -0700

    LIVY-133. Remove default master from interactive session config.
    
    This makes it so that admins have to provide a proper Spark config
    to start things up in yarn cluster mode, which is really the only
    recommended way to run things.
    
    I also removed setting the master from tests that allow that (those
    that run through spark-submit); tests that create a SparkContext
    in-process still need to define the master manually.
    
    While testing I found out that the code that caused RSCClient initialization
    to fail fast was not working anymore, so I fixed that too. Also, found a
    race in the integration tests, where an assert might fail because a session
    from a previous test was still in the process of shutting down.
    
    Closes #124

 .../test/framework/BaseIntegrationTestSuite.scala  |  8 +++-
 .../scala/com/cloudera/livy/test/JobApiIT.scala    | 19 +++++---
 repl/pom.xml                                       | 14 +-----
 .../com/cloudera/livy/repl/ReplDriverSuite.scala   |  1 -
 .../com/cloudera/livy/rsc/ContextLauncher.java     | 56 +++++++++-------------
 .../main/java/com/cloudera/livy/rsc/RSCClient.java |  7 +--
 .../com/cloudera/livy/rsc/TestSparkClient.java     |  1 -
 .../server/interactive/InteractiveSession.scala    |  1 -
 .../interactive/InteractiveSessionSpec.scala       |  3 +-
 9 files changed, 49 insertions(+), 61 deletions(-)

commit 7fe445429a4d603c975000a37254cf2ac21c37f4
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue May 3 10:15:46 2016 -0700

    LIVY-130. Run pyspark and sparkr tests if a real Spark is available.
    
    A new setting was added to allow a real Spark installation to be used
    for integration tests. When set, this allows pyspark and sparkr to run;
    this also allows testing different versions of Spark than the one
    referenced in the pom easily. I tested this with 1.6.1.
    
    Closes #123

 integration-test/pom.xml                           | 15 ++++++
 .../test/framework/BaseIntegrationTestSuite.scala  | 42 ++++++++++------
 .../com/cloudera/livy/test/framework/Cluster.scala |  1 +
 .../cloudera/livy/test/framework/MiniCluster.scala | 24 +++++++--
 .../cloudera/livy/test/framework/RealCluster.scala |  2 +
 .../src/test/resources/log4j.properties            |  5 +-
 integration-test/src/test/resources/pytest.py      | 28 +++++++++++
 integration-test/src/test/resources/rtest.R        | 34 +++++++++++++
 .../scala/com/cloudera/livy/test/BatchIT.scala     | 48 ++++++++++++++++--
 .../com/cloudera/livy/test/InteractiveIT.scala     | 57 +++++++++++++++++-----
 pom.xml                                            |  6 ++-
 .../cloudera/livy/utils/SparkProcessBuilder.scala  |  2 -
 12 files changed, 224 insertions(+), 40 deletions(-)

commit 0e7145352ed52510977f2d90fd088b9f1f87ec3f
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Apr 28 15:18:43 2016 -0700

    LIVY-81. Monitor start of remote context asynchronously.
    
    The remote context can take a while to start, and doing it
    synchronously in the builder call makes it possible, even
    likely, that you'll get ugly timeouts from the Livy server,
    and cause contexts to stay around and be lost while still
    consuming resources.
    
    Instead, just start the submission process synchronously, but
    wait for the context to connect back asynchronously. This makes
    the client create call return much more quickly, but, as with
    anything done asynchronously, requires a lot of code to be moved
    around and placed in listeners, and to use promises instead of
    actual instances in a few places.
    
    The first tricky change was to support submitting jobs before
    the context was up. This was done by chaining listeners so that
    the actual submission only happens when the context's RPC channel
    is actually created; for clients of the API, nothing changes.
    
    The trickier part was monitoring context shut down; this mostly
    affected unit tests, since you can't run two Spark contexts in
    the same VM (so tests need to make sure the contexts are really
    stopped when the stop call returns). That is now done by waiting
    for the RPC socket to close, instead of explicitly waiting for
    the context thread or process to go away.
    
    As part of the above change I also removed Rpc.Listener since it
    can be implemented by adding a listener to the channel's close
    future.
    
    Another unrelated thing I ran into while testing was that jobs
    can jump directly from SENT to STARTED, and tests were expecting
    them to go through QUEUED first. I fixed the test and wrote a
    clarification in the API docs.
    
    Closes #120

 api/src/main/java/com/cloudera/livy/JobHandle.java |   5 +
 .../java/com/cloudera/livy/rsc/ContextInfo.java    |  18 +-
 .../com/cloudera/livy/rsc/ContextLauncher.java     |  98 +++++-----
 .../java/com/cloudera/livy/rsc/FutureListener.java |  27 +++
 .../main/java/com/cloudera/livy/rsc/RSCClient.java | 207 +++++++++++++++------
 .../com/cloudera/livy/rsc/RSCClientFactory.java    |  45 ++---
 rsc/src/main/java/com/cloudera/livy/rsc/Utils.java |  16 ++
 .../com/cloudera/livy/rsc/driver/RSCDriver.java    |  47 +++--
 .../main/java/com/cloudera/livy/rsc/rpc/Rpc.java   |  33 +---
 .../com/cloudera/livy/rsc/TestSparkClient.java     |  15 +-
 .../java/com/cloudera/livy/rsc/rpc/TestRpc.java    |  12 +-
 .../server/interactive/InteractiveSession.scala    |   6 +-
 12 files changed, 318 insertions(+), 211 deletions(-)

commit d609977de2c124520cd14776de658ce5509a759c
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Apr 27 14:25:04 2016 -0700

    LIVY-126. Add integration tests for batches.
    
    Run a couple of simple apps using the batch API. Some adjustment was
    needed to make things work; mainly, "spark.submit.deployMode" is not
    supported by the default Spark dependency (1.5.0 from CDH), so we need
    to use the old style "yarn-cluster" otherwise batches will fail to
    launch.
    
    For the tests to work I also needed explicit access to the HDFS cluster,
    which means I broke RealCluster in the process. Need to figure out how
    to implement that kind of functionality when not using a mini cluster.
    
    Closes #119

 .../test/framework/BaseIntegrationTestSuite.scala  |   7 ++
 .../com/cloudera/livy/test/framework/Cluster.scala |   3 +
 .../cloudera/livy/test/framework/MiniCluster.scala |   9 +-
 .../cloudera/livy/test/framework/RealCluster.scala |   2 +
 .../scala/com/cloudera/livy/test/BatchIT.scala     | 119 +++++++++++++++++++++
 .../scala/com/cloudera/livy/test/JobApiIT.scala    |   6 --
 .../cloudera/livy/utils/SparkProcessBuilder.scala  |   2 +
 .../com/cloudera/livy/test/apps/FailingApp.java    |  40 +++++++
 .../cloudera/livy/test/apps/SimpleSparkApp.java    |  60 +++++++++++
 9 files changed, 238 insertions(+), 10 deletions(-)

commit cf73a6604ae490bbf50ce2f03fc07a08a3f24522
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri Apr 29 17:30:33 2016 -0700

    LIVY-136. Put tests on a memory diet.
    
    Reduce the amount of memory requested by tests so that they
    don't put too much pressure on the machines used by CI builds,
    and avoid triggering the kernel's OOM killer.
    
    Closes #122

 .../src/main/scala/com/cloudera/livy/test/framework/MiniCluster.scala | 4 +++-
 pom.xml                                                               | 4 ++--
 repl/src/test/scala/com/cloudera/livy/repl/ReplDriverSuite.scala      | 3 ++-
 rsc/src/test/java/com/cloudera/livy/rsc/TestSparkClient.java          | 1 +
 4 files changed, 8 insertions(+), 4 deletions(-)

commit 55aba4bdaadf2a6d5a9750c712042f597d5dccee
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Apr 26 12:30:33 2016 -0700

    LIVY-127. Add integration tests for the public job API.
    
    A few changes in other areas were made:
    
    - Always overwrite the URI used to create the RSC in InteractiveSession,
      otherwise things fail.
    - Removed the "timeout" from the session creation structure, because the
      existing interactive session API doesn't have it. We'll add it back
      somehow (probably as a configuration stuck in the "conf" map).
    - Removed the logging from LivyClientBuilder and just let exceptions from
      the factories propagate; this removes the logging dependency, which also
      avoids having to install the jul-to-slf4j bridge to avoid ugly log messages
      in test output. As a bonus, it makes the exceptions from the builder less
      cryptic.
    - Renamed a few classes and methods to make things cleaner and also to avoid
      a naming clash.
    - Removed some dead code and dependencies.
    
    Closes #118

 .../java/com/cloudera/livy/LivyClientBuilder.java  |  15 +-
 .../com/cloudera/livy/TestLivyClientBuilder.java   |   9 +-
 .../cloudera/livy/client/common/HttpMessages.java  |   6 +-
 .../com/cloudera/livy/client/http/HttpClient.java  |   4 +-
 .../com/cloudera/livy/client/http/HttpConf.java    |   4 +-
 integration-test/pom.xml                           |  14 ++
 .../test/framework/BaseIntegrationTestSuite.scala  |  38 +++--
 .../cloudera/livy/test/framework/ClusterPool.scala |  13 +-
 .../cloudera/livy/test/framework/MiniCluster.scala |  24 ++-
 .../com/cloudera/livy/test/InteractiveIT.scala     |  37 +----
 .../scala/com/cloudera/livy/test/JobApiIT.scala    | 168 +++++++++++++++++++++
 pom.xml                                            |   7 -
 repl/pom.xml                                       |   6 -
 .../interactive/CreateInteractiveRequest.scala     |   4 +-
 .../server/interactive/InteractiveSession.scala    |  10 +-
 15 files changed, 259 insertions(+), 100 deletions(-)

commit a5f3cfc9ebf1a5b3caf9ac23583c105fcf49aa6a
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Apr 27 11:26:25 2016 -0700

    LIVY-114. Merge interactive and client sessions.
    
    The code to handle both session types was very, very similar. So instead
    of having two completely separate endpoints, merge them, and allow sessions
    to be used both in interactive mode and to run pre-compiled jobs. Note
    that pre-compiled jobs are still restricted to Scala sessions.
    
    Most of this change is code motion; I also cleaned up the repl package
    hierarchy since there was no need to a bunch of different packages containing
    a single class each.
    
    The unit tests for interactive and pre-compiled jobs are still kept separate
    in the server module, since the former uses mock sessions while the latter
    requires a proper running Spark to run.
    
    Closes #117

 .../cloudera/livy/client/common/HttpMessages.java  |   9 +-
 .../com/cloudera/livy/client/http/HttpClient.java  |   2 +-
 .../cloudera/livy/client/http/LivyConnection.java  |   4 +-
 .../cloudera/livy/client/http/HttpClientSpec.scala |  20 +-
 .../scala/com/cloudera/livy/repl/Interpreter.scala |   9 +-
 .../repl/{process => }/ProcessInterpreter.scala    |  14 +-
 .../livy/repl/{python => }/PythonInterpreter.scala |   9 +-
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  |  33 ++--
 .../scala/com/cloudera/livy/repl/Session.scala     |  22 ++-
 .../repl/{scalaRepl => }/SparkInterpreter.scala    |  29 ++-
 .../livy/repl/{sparkr => }/SparkRInterpreter.scala |  11 +-
 .../com/cloudera/livy/repl/BaseSessionSpec.scala   |  14 +-
 .../cloudera/livy/repl/PythonInterpreterSpec.scala |  26 ++-
 .../com/cloudera/livy/repl/PythonSessionSpec.scala |   5 +-
 .../com/cloudera/livy/repl/ReplDriverSuite.scala   |   2 +-
 .../cloudera/livy/repl/ScalaInterpreterSpec.scala  |  24 ++-
 .../cloudera/livy/repl/SparkRInterpreterSpec.scala |  22 +--
 .../com/cloudera/livy/repl/SparkRSessionSpec.scala |   5 +-
 .../com/cloudera/livy/repl/SparkSessionSpec.scala  |   5 +-
 .../com/cloudera/livy/rsc/ContextLauncher.java     |   5 +-
 .../main/java/com/cloudera/livy/rsc/RSCConf.java   |   3 +-
 .../com/cloudera/livy/rsc/driver/JobWrapper.java   |   2 +-
 server/pom.xml                                     |   6 +
 .../com/cloudera/livy/server/LivyServer.scala      |   2 -
 .../cloudera/livy/server/batch/BatchSession.scala  |  10 +-
 .../livy/server/client/ClientSession.scala         | 217 ---------------------
 .../livy/server/client/ClientSessionServlet.scala  | 153 ---------------
 .../server/interactive/InteractiveSession.scala    | 145 +++++++++-----
 .../interactive/InteractiveSessionServlet.scala    | 123 ++++++++++--
 .../scala/com/cloudera/livy/sessions/Session.scala | 104 +++++++++-
 .../cloudera/livy/server/SessionServletSpec.scala  |  18 +-
 .../interactive/BaseInteractiveServletSpec.scala   |  72 +++++++
 .../InteractiveSessionServletSpec.scala            |  17 +-
 .../JobApiSpec.scala}                              |  77 +++-----
 .../livy/sessions/SessionManagerSpec.scala         |  10 +-
 35 files changed, 564 insertions(+), 665 deletions(-)

commit 37cf46a1c5a354ff1d918271f34b6fc1565a5b2e
Author: Bernardo Gomez Palacio <bernardo.gomezpalacio@gmail.com>
Date:   Wed Apr 13 15:26:11 2016 -0700

    The README file doesn't reflect the actual endpoint implemented to GE…
    
    …T the Batch Logs as well as the response to GET all Batches.
    
    The current documentation has the following mistakes:
    1. Points to `GET /batches/{batchId}/logs` when in fact is `GET /batches/{batchId}/log`.
    2. The `GET /batches` refers to a response that contains `batches` when in fact returns `sessions`.
    
    Closes #106

 README.rst | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit af28e7b1f73c6cbcfc864c3901935951a85c6370
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri Apr 22 11:02:14 2016 -0700

    LIVY-125. Refactor existing test jobs into a new library.
    
    This will help with writing integration tests, by avoiding
    having to create new versions of these simple jobs. It also
    serves as a nice cleanup of the existing code.
    
    I also removed the async job from the rsc tests, since the
    support code for dealing with async Spark jobs has been
    removed from Livy.
    
    Closes #115

 client-http/pom.xml                                |   7 +
 .../cloudera/livy/client/http/HttpClientSpec.scala |  13 +-
 pom.xml                                            |   1 +
 rsc/pom.xml                                        |   6 +
 rsc/src/main/java/com/cloudera/livy/rsc/Utils.java |   5 +-
 .../com/cloudera/livy/rsc/TestSparkClient.java     | 211 +++------------------
 server/pom.xml                                     |   7 +
 .../livy/server/client/ClientServletSpec.scala     |  34 +---
 test-lib/pom.xml                                   |  87 +++++++++
 .../java/com/cloudera/livy/test/jobs/Echo.java     |  37 ++++
 .../java/com/cloudera/livy/test/jobs/Failure.java  |  35 ++++
 .../com/cloudera/livy/test/jobs/FileReader.java    |  76 ++++++++
 .../cloudera/livy/test/jobs/GetCurrentUser.java    |  33 ++++
 .../com/cloudera/livy/test/jobs/SQLGetTweets.java  |  64 +++++++
 .../com/cloudera/livy/test/jobs/SmallCount.java    |  49 +++++
 .../src/main}/resources/testweet.json              |   0
 16 files changed, 440 insertions(+), 225 deletions(-)

commit 55faccd286f2d5bb7daed12bdf5287ba80d814f1
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Apr 25 11:30:58 2016 -0700

    Remove period from env variable name.
    
    I upgraded my OS and the new kernel seems to dislike the periods. So
    use a more usual-looking name for the env variable that tracks whether
    unit tests are running.

 .../src/main/java/com/cloudera/livy/client/common/ClientConf.java   | 2 +-
 pom.xml                                                             | 6 ++++--
 repl/src/main/resources/fake_shell.py                               | 4 ++--
 3 files changed, 7 insertions(+), 5 deletions(-)

commit c3d570933d3cd280fe59b759f475dea6aabd6add
Author: Jeff Zhang <zjffdu@apache.org>
Date:   Mon Apr 25 16:43:11 2016 +0800

    LIVY-131. NPE in LivyServer when starting LivyServer
    
    Closes #116

 server/src/main/scala/com/cloudera/livy/server/LivyServer.scala | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 03209b4f42820e5cfaebdeb2a8b3562a1c7d21c9
Author: Alex Man <tc.technetium@gmail.com>
Date:   Thu Apr 21 15:16:49 2016 -0700

    LIVY-123. Initial framework for integration tests.
    
    This change adds an initial framework for integration tests, based on the code
    from https://github.com/hdinsight/livy/tree/int-test/.
    
    It allows both real clusters and "mini" clusters (managed by the framework) to be
    used. The default is to run a small mini cluster. The code also allows defining your
    own cluster config file without having to modify files in the repo for that; that could be
    used to run different invocations of the tests as part of the build later on, for example.
    
    There's probably code that needs to be cleaned up or fixed up, but this provides
    the basic functionality, at least for mini clusters. I haven't (or hope I haven't) modified
    the real cluster code so it should be working as well as it was in the original branch.
    
    Two blatant shortcomings of the current mini cluster is the inability to run pyspark
    or SparkR tests. Because it uses a fake Spark installation, it doesn't have access
    to the needed python / R libraries. That will be taken care of in separate changes.
    
    Closes #114

 assembly/pom.xml                                   |   7 -
 bin/livy-server                                    |   2 +-
 dev/spark/bin/spark-submit                         |   8 +
 integration-test/pom.xml                           | 203 +++++++++++++
 .../test/framework/BaseIntegrationTestSuite.scala  | 130 +++++++++
 .../com/cloudera/livy/test/framework/Cluster.scala |  36 +++
 .../cloudera/livy/test/framework/ClusterPool.scala |  80 +++++
 .../cloudera/livy/test/framework/MiniCluster.scala | 324 +++++++++++++++++++++
 .../cloudera/livy/test/framework/RealCluster.scala | 259 ++++++++++++++++
 .../src/test/resources/log4j.properties            |  38 +++
 .../com/cloudera/livy/test/InteractiveIT.scala     |  97 ++++++
 pom.xml                                            |  43 ++-
 repl/pom.xml                                       |   1 -
 .../com/cloudera/livy/rsc/ContextLauncher.java     |  47 ++-
 .../livy/server/{Main.scala => LivyServer.scala}   |  44 ++-
 .../{MainSuite.scala => LivyServerSuite.scala}     |   6 +-
 16 files changed, 1281 insertions(+), 44 deletions(-)

commit ee7fca358c30da20a4e07b897016d4c687101094
Author: Jeff Zhang <zjffdu@apache.org>
Date:   Thu Mar 31 17:54:06 2016 +0800

    LIVY-99. Support _HOST pattern for principal
    
    Closes #97

 server/src/main/scala/com/cloudera/livy/server/Main.scala    |  7 +++++--
 .../src/main/scala/com/cloudera/livy/server/WebServer.scala  | 12 ++++++------
 2 files changed, 11 insertions(+), 8 deletions(-)

commit 430135af45a88532c346e278f2a31c642e352c0c
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Apr 14 15:08:14 2016 -0700

    LIVY-119. Move LivyConf to the server module.
    
    The core module is small and, after some other adjustments to dependencies,
    can probably be removed. LivyConf is only used in the server module (except
    for a single static field, now moved to ClientConf), so move it there.
    
    Closes #111

 .../java/com/cloudera/livy/client/common/ClientConf.java  |  2 ++
 core/src/main/scala/com/cloudera/livy/Utils.scala         | 11 -----------
 .../com/cloudera/livy/repl/python/PythonInterpreter.scala |  6 +++---
 .../com/cloudera/livy/repl/sparkr/SparkRInterpreter.scala |  6 +++---
 .../src/main/scala/com/cloudera/livy/LivyConf.scala       | 15 +++++++++++++--
 5 files changed, 21 insertions(+), 19 deletions(-)

commit dfdcbc2cc013c14e6dcdaf1fed84aecad0d9d28d
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Apr 14 04:44:11 2016 -0700

    LIVY-108. Remove Guava dependency from RSC.
    
    This avoids two sets of issues: the first is the need to localize the
    Guava jar every time an app is started, in case the jars haven't been
    cached in HDFS. The second is that we can't really know which version
    of Guava will be used; most of the time it will be Hadoop's, but user
    configuration and dependencies might change that, and since Guava is
    a very common dependency, let's not make user's lives more difficult.
    
    Guava is not explicitly excluded from dependencies, because it's needed
    to run the tests (and in some cases is even provided by different
    transitive dependencies, such as hive-exec). The patch was tested with
    the exclusions in place, to make sure the module compiles without Guava.
    
    Closes #110

 pom.xml                                            |   7 --
 rsc/pom.xml                                        |   4 -
 .../java/com/cloudera/livy/rsc/BaseProtocol.java   |   6 +-
 .../com/cloudera/livy/rsc/ContextLauncher.java     |  22 ++---
 .../java/com/cloudera/livy/rsc/JobHandleImpl.java  |   1 -
 .../main/java/com/cloudera/livy/rsc/RSCClient.java |  16 +---
 .../com/cloudera/livy/rsc/RSCClientFactory.java    |  10 +-
 .../main/java/com/cloudera/livy/rsc/RSCConf.java   |  14 +--
 rsc/src/main/java/com/cloudera/livy/rsc/Utils.java | 105 +++++++++++++++++++++
 .../cloudera/livy/rsc/driver/BypassJobWrapper.java |   6 +-
 .../livy/rsc/driver/DriverSparkListener.java       |  81 ----------------
 .../cloudera/livy/rsc/driver/JobContextImpl.java   |   8 +-
 .../com/cloudera/livy/rsc/driver/JobWrapper.java   |  32 +------
 .../com/cloudera/livy/rsc/driver/RSCDriver.java    |  11 +--
 .../cloudera/livy/rsc/rpc/KryoMessageCodec.java    |   6 +-
 .../main/java/com/cloudera/livy/rsc/rpc/Rpc.java   |  23 ++---
 .../com/cloudera/livy/rsc/rpc/RpcDispatcher.java   |  13 +--
 .../java/com/cloudera/livy/rsc/rpc/RpcServer.java  |  19 ++--
 .../com/cloudera/livy/rsc/TestSparkClient.java     |  19 +++-
 .../livy/rsc/rpc/TestKryoMessageCodec.java         |  12 +--
 .../java/com/cloudera/livy/rsc/rpc/TestRpc.java    |   7 +-
 21 files changed, 191 insertions(+), 231 deletions(-)

commit f76596c922b020115d6f537d22459084d4806263
Author: Erick Tryzelaar <erickt@cloudera.com>
Date:   Thu Apr 14 15:33:49 2016 -0700

    LIVY-120. The RSC should use fully qualified hostnames for the localhost

 rsc/src/main/java/com/cloudera/livy/rsc/RSCConf.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0206d392be6d0c495e8b70f383538b3849d36efb
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Apr 14 03:48:20 2016 -0700

    LIVY-112. Rename "client-local" to "rsc".
    
    "Local" is becoming more and more confusing as more work is done
    on the RSC. Let's just call it by its usual name.
    
    Closes #109

 assembly/assembly.xml                              |  4 +-
 assembly/pom.xml                                   |  2 +-
 .../services/com.cloudera.livy.LivyClientFactory   |  1 -
 pom.xml                                            |  6 +--
 repl/pom.xml                                       |  4 +-
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  |  8 ++--
 .../com/cloudera/livy/repl/ReplDriverSuite.scala   |  8 ++--
 {client-local => rsc}/pom.xml                      |  2 +-
 .../java/com/cloudera/livy/rsc}/BaseProtocol.java  |  4 +-
 .../com/cloudera/livy/rsc}/BypassJobStatus.java    |  2 +-
 .../java/com/cloudera/livy/rsc}/ContextInfo.java   |  2 +-
 .../com/cloudera/livy/rsc}/ContextLauncher.java    | 46 +++++++++++-----------
 .../java/com/cloudera/livy/rsc}/JobHandleImpl.java |  6 +--
 .../main/java/com/cloudera/livy/rsc}/PingJob.java  |  2 +-
 .../main/java/com/cloudera/livy/rsc/RSCClient.java | 20 +++++-----
 .../com/cloudera/livy/rsc/RSCClientFactory.java    | 14 +++----
 .../main/java/com/cloudera/livy/rsc/RSCConf.java   |  8 ++--
 .../com/cloudera/livy/rsc}/driver/AddJarJob.java   |  2 +-
 .../com/cloudera/livy/rsc}/driver/BypassJob.java   |  2 +-
 .../livy/rsc}/driver/BypassJobWrapper.java         |  4 +-
 .../livy/rsc}/driver/DriverSparkListener.java      |  2 +-
 .../cloudera/livy/rsc}/driver/JobContextImpl.java  |  2 +-
 .../com/cloudera/livy/rsc}/driver/JobWrapper.java  |  2 +-
 .../livy/rsc}/driver/MutableClassLoader.java       |  2 +-
 .../com/cloudera/livy/rsc}/driver/RSCDriver.java   | 20 +++++-----
 .../livy/rsc}/driver/RSCDriverBootstrapper.java    | 18 ++++-----
 .../cloudera/livy/rsc}/rpc/KryoMessageCodec.java   |  2 +-
 .../main/java/com/cloudera/livy/rsc}/rpc/README.md |  0
 .../main/java/com/cloudera/livy/rsc}/rpc/Rpc.java  | 20 +++++-----
 .../com/cloudera/livy/rsc}/rpc/RpcDispatcher.java  |  2 +-
 .../com/cloudera/livy/rsc}/rpc/RpcException.java   |  2 +-
 .../java/com/cloudera/livy/rsc}/rpc/RpcServer.java | 12 +++---
 .../com/cloudera/livy/rsc}/rpc/SaslHandler.java    |  8 ++--
 .../services/com.cloudera.livy.LivyClientFactory   |  1 +
 .../java/com/cloudera/livy/rsc}/TestJobHandle.java |  4 +-
 .../com/cloudera/livy/rsc}/TestSparkClient.java    | 14 +++----
 .../livy/rsc}/rpc/TestKryoMessageCodec.java        |  2 +-
 .../java/com/cloudera/livy/rsc}/rpc/TestRpc.java   | 14 +++----
 .../src/test/resources/log4j.properties            |  0
 .../src/test/resources/testweet.json               |  0
 server/pom.xml                                     |  2 +-
 .../livy/server/client/ClientSession.scala         |  8 ++--
 .../livy/server/client/ClientSessionServlet.scala  |  4 +-
 .../server/interactive/InteractiveSession.scala    | 10 ++---
 .../livy/server/client/ClientServletSpec.scala     | 10 ++---
 .../interactive/InteractiveSessionSpec.scala       |  4 +-
 46 files changed, 156 insertions(+), 156 deletions(-)

commit 14c594cc50360bc568ab4a0a3792980e83b90887
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Apr 14 02:51:37 2016 -0700

    LIVY-115. Allow Livy to be run from the build directory.
    
    Add extra code so that jar files that need to be added to Spark
    apps can be retrieved from the build directories when not found
    in the expected location.
    
    Closes #107

 .../src/main/java/com/cloudera/livy/client/local/ContextLauncher.java  | 3 +++
 .../com/cloudera/livy/server/interactive/InteractiveSession.scala      | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

commit 9da7bb4a443c48f015b09eaf29778362ecddb268
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Apr 11 12:45:13 2016 -0700

    LIVY-107. Add config blacklist file.
    
    This file lists Spark (and Livy) settings that cannot be set by users,
    to avoid security issues (and possibly other runtime issues). For example,
    Livy can only start sessions really securely in YARN cluster mode, so admins
    should blacklist options that would allow users to override that.
    
    Closes #105

 conf/spark-blacklist.properties                        | 11 +++++++++++
 core/src/main/scala/com/cloudera/livy/Utils.scala      |  8 +++++++-
 .../com/cloudera/livy/server/SessionServlet.scala      | 18 +++++++++++++++++-
 .../livy/server/batch/BatchSessionServlet.scala        |  1 +
 .../livy/server/client/ClientSessionServlet.scala      |  3 +++
 .../server/interactive/InteractiveSessionServlet.scala |  1 +
 server/src/test/resources/spark-blacklist.properties   |  1 +
 .../cloudera/livy/server/BaseSessionServletSpec.scala  |  3 +++
 .../cloudera/livy/server/batch/BatchServletSpec.scala  |  9 +++++++++
 .../livy/server/client/ClientServletSpec.scala         | 11 ++++++++++-
 10 files changed, 63 insertions(+), 3 deletions(-)

commit e36145f6a3bf4c501b4e919d9f9afed150342349
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Sun Apr 10 22:27:38 2016 -0700

    LIVY-102. Set the config to dispose of the yarn-cluster launcher.
    
    This saves resources on the Livy server by not keeping the launcher
    process around; Livy is already connected to the driver so it knows
    how to monitor its status.
    
    Closes #104

 .../src/main/java/com/cloudera/livy/client/local/ContextLauncher.java | 4 ++++
 1 file changed, 4 insertions(+)

commit e1a9282ca627c99872f2cf86948b639c1d0568bf
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Sun Apr 10 22:14:47 2016 -0700

    LIVY-111. Remove async job monitoring API.
    
    This API was a lot more useful when the RSC collected metrics
    about running jobs. Since it doesn't do that anymore, this API
    is kinda out of place, and there's a lot of hacky code to support
    it, so let's just remove it.
    
    Because the HTTP-based client is poll-based, there's no benefit
    in having these callback-based APIs. Users can implement the same
    functionality by collecting the data they need themselves, and
    submitting a job to retrieve that data when desired.
    
    Closes #103

 .../main/java/com/cloudera/livy/JobContext.java    | 10 -------
 api/src/main/java/com/cloudera/livy/JobHandle.java | 11 --------
 .../livy/client/common/AbstractJobHandle.java      | 31 ----------------------
 .../cloudera/livy/client/common/HttpMessages.java  |  7 ++---
 .../livy/client/common/TestAbstractJobHandle.java  | 16 -----------
 .../livy/client/common/TestHttpMessages.java       |  4 +--
 .../cloudera/livy/client/http/JobHandleImpl.java   |  6 -----
 .../cloudera/livy/client/http/HttpClientSpec.scala | 26 ++++++++----------
 .../cloudera/livy/client/local/BaseProtocol.java   | 17 ------------
 .../livy/client/local/BypassJobStatus.java         |  7 ++---
 .../cloudera/livy/client/local/LocalClient.java    | 10 -------
 .../livy/client/local/driver/BypassJobWrapper.java | 19 +------------
 .../livy/client/local/driver/JobContextImpl.java   | 12 ---------
 .../livy/client/local/driver/JobWrapper.java       | 16 -----------
 .../livy/client/local/driver/MonitorCallback.java  | 26 ------------------
 .../livy/client/local/driver/RSCDriver.java        | 18 +------------
 .../cloudera/livy/client/local/TestJobHandle.java  |  8 +-----
 .../livy/client/local/TestSparkClient.java         | 10 ++-----
 .../livy/server/client/ClientSession.scala         |  2 +-
 .../livy/server/client/ClientSessionServlet.scala  |  4 +--
 .../server/interactive/InteractiveSession.scala    |  1 -
 .../livy/server/client/ClientServletSpec.scala     | 10 -------
 22 files changed, 25 insertions(+), 246 deletions(-)

commit 7aef009521f09fff3dcb7ae1e2dfc5c7d2d802c5
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri Apr 8 17:03:45 2016 -0700

    LIVY-101. Remove message about unsupported Spark versions.
    
    We've actually tested on 1.6; instead of a white list, let's just
    print the found Spark version in the code. Also added a couple of
    small tests just to exercise that code during the build.
    
    Closes #102

 dev/spark/bin/spark-submit                         |  4 +++
 .../main/scala/com/cloudera/livy/server/Main.scala | 31 +++++-------------
 .../scala/com/cloudera/livy/server/MainSuite.scala | 37 ++++++++++++++++++++++
 3 files changed, 49 insertions(+), 23 deletions(-)

commit 8cdc4590a5e477feab0fd30dc00894bc6389f642
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri Apr 8 13:14:48 2016 -0700

    LIVY-110, LIVY-93. Simplify RSC driver class hierarchy.
    
    The separation between "client-mode" driver and REPL driver was a little
    hacky after recent changes. This patch aims at simplifying things.
    
    Now, there is a single entry point to the RSC (RSCDriverBootstrapper),
    and the actual driver implementation (which must extend RSCDriver, the
    new name of RemoteDriver) can be configured.
    
    The driver is responsible for handling RPC messages, so it must provide
    "handle()" methods for any messages that might arrive. RSCDriver handles
    all messages directed at the client-mode driver. The REPL driver extends
    it and adds handlers to REPL-specific messages, and re-uses the client-mode
    logic for running the PingJob used to detect when the session is ready.
    This simplified code a lot.
    
    On top of that I made some other clean up changes:
    
    - the code that launches the driver in-process and out-of-process was
      slightly modified to share more setup code.
    - when jobs send results back to the client, all clients now receive
      the message. This code path is mostly unused in Livy (most uses are in
      the unit tests), since the Livy API uses bypass jobs which have different
      logic. In any case, there should be very few, if any, situations when
      there are two clients connected to a remote driver.
    - fixed some sketchy error handling code, especially in the shutdown
      path of the driver.
    
    Closes #101

 .../java/com/cloudera/livy/LivyClientBuilder.java  |   6 +-
 .../cloudera/livy/client/local/BaseProtocol.java   |  14 +
 .../livy/client/local/ContextLauncher.java         | 169 ++++-----
 .../cloudera/livy/client/local/LocalClient.java    |   4 +-
 .../com/cloudera/livy/client/local/LocalConf.java  |   6 +-
 .../livy/client/local/driver/BypassJobWrapper.java |   4 +-
 .../cloudera/livy/client/local/driver/Driver.java  | 231 ------------
 .../livy/client/local/driver/DriverProtocol.java   | 165 ---------
 .../client/local/driver/DriverSparkListener.java   |   4 +-
 .../livy/client/local/driver/JobContextImpl.java   |   4 +-
 .../livy/client/local/driver/JobWrapper.java       |  20 +-
 .../livy/client/local/driver/RSCDriver.java        | 392 +++++++++++++++++++++
 .../client/local/driver/RSCDriverBootstrapper.java |  88 +++++
 .../livy/client/local/driver/RemoteDriver.java     | 145 --------
 .../livy/client/local/TestSparkClient.java         |   2 +-
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  |  90 ++---
 .../com/cloudera/livy/repl/ReplDriverSuite.scala   |   2 +-
 .../livy/server/client/ClientSession.scala         |   2 +-
 .../server/interactive/InteractiveSession.scala    |   2 +-
 19 files changed, 623 insertions(+), 727 deletions(-)

commit 8b6352023b9bef2d158763cd4da49bbef336a0e0
Author: purechoc <purechoc.en@gmail.com>
Date:   Thu Apr 7 11:45:41 2016 -0700

    LIVY-12. R + Yarn support
    
    using SparkR in yarn cluster mode
    
    **Changes**
    - remove fake_R and SPARKR_DRIVER_R
    
    **How to work**
    - ContextLauncher launch SparkRInterpreter  with sparkRArchive file ($SPARK_HOME/R/lib/sparkr.zip)
    - SparkRInterpreter Launch a SparkR backend server for the R process
    - exec R (all cluster node must installed R and R in $PATH)
    - load SparkR library
    
    Closes #96

 .../livy/client/local/ContextLauncher.java         |  16 ++-
 .../com/cloudera/livy/client/local/LocalConf.java  |   1 +
 .../main/scala/com/cloudera/livy/LivyConf.scala    |   1 +
 dev/spark/bin/sparkR                               |   9 --
 repl/src/main/resources/fake_R.sh                  |  18 ----
 .../livy/repl/sparkr/SparkRInterpreter.scala       | 109 +++++++++++++--------
 .../server/interactive/InteractiveSession.scala    |  20 +++-
 7 files changed, 102 insertions(+), 72 deletions(-)

commit 340a6c9fa10532d86fe6b1320a3141a5128ae4b3
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Apr 5 11:21:31 2016 -0700

    LIVY-103. Make repl session see user jars, correctly report idle state.
    
    Because of how Spark's REPL deals with class loaders, it's necessary to
    poke inside of it to make jars distributed by Livy be seen. This fix is
    the same as in the patch below:
      https://github.com/hdinsight/livy/commit/f11cdcb5357046fe555a4ee53c85fb1bccf646b5
    
    Aside from that, the REPL sessions were reporting "idle" state too early.
    I had to shuffle a little bit of code around so that the REPL can execute
    basic RSC commands, so that the client side can know when it's safe to
    send commands. This is a little bit hacky at the moment until we can spend
    more time working on LIVY-93.
    
    Finally, I included some changes to propagate jacoco configuration to child
    processes, so that we can run code coverage analysis when we run the RSC
    driver in a child process too.
    
    Closes #100

 .../livy/client/local/ContextLauncher.java         | 15 +++++
 .../com/cloudera/livy/client/local/PingJob.java    | 31 ++++++++++
 .../cloudera/livy/client/local/driver/Driver.java  |  5 ++
 .../livy/client/local/driver/DriverProtocol.java   | 15 +++--
 .../livy/client/local/driver/JobWrapper.java       | 10 ++--
 .../livy/client/local/driver/RemoteDriver.java     |  9 ++-
 .../livy/client/local/TestSparkClient.java         |  3 +
 dev/spark/bin/spark-submit                         | 28 +++++++--
 pom.xml                                            | 20 +++++++
 repl/pom.xml                                       |  6 ++
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  | 32 +++++++++-
 .../scala/com/cloudera/livy/repl/Session.scala     |  6 +-
 .../livy/repl/scalaRepl/SparkInterpreter.scala     | 13 ++++
 .../com/cloudera/livy/repl/ReplDriverSuite.scala   | 70 ++++++++++++++++++++++
 .../server/interactive/InteractiveSession.scala    | 25 ++++++--
 .../cloudera/livy/server/BaseJsonServletSpec.scala | 19 +++++-
 16 files changed, 276 insertions(+), 31 deletions(-)

commit dff04a77a30625777fcfbd44e34b79a9adf15ca4
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Mar 31 17:16:49 2016 -0700

    LIVY-100. Make jars uploaded by the user available in RSC's driver.
    
    Spark's "addJar" only applies to executors, so we need more code to get
    jars uploaded by users using the RSC API available to the driver. This
    change sets up a new class loader that is used by the "add jar" job to
    add uploaded files to the driver's class path.
    
    Closes #99

 .../cloudera/livy/client/common/Serializer.java    |  1 +
 .../cloudera/livy/client/local/LocalClient.java    | 25 +-------
 .../livy/client/local/driver/AddJarJob.java        | 73 ++++++++++++++++++++++
 .../cloudera/livy/client/local/driver/Driver.java  |  6 ++
 .../client/local/driver/MutableClassLoader.java    | 34 ++++++++++
 .../livy/client/local/TestSparkClient.java         |  3 +-
 6 files changed, 119 insertions(+), 23 deletions(-)

commit 410adf40d7098fa27846ea05536c0a94997299c1
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Apr 4 10:44:33 2016 -0700

    LIVY-71. Write session files to HDFS as the correct user.
    
    When uploading files using `LivyClient.uploadJar` (or `uploadFile`),
    the user files should not be readable by other users. Since we know
    who the session is running as, impersonate that user before uploading
    the file to HDFS. The file is stored in a session-specific staging
    directory, which is deleted when the session is stopped.
    
    The staging directory, by default, is under the user's home directory
    (under the ".livy-sessions" subdirectory); the location can be modified
    in the config file. When setting a custom location, the directory needs
    to be world-writable, so that all users can create directories, since
    Livy cannot change ownership of directories it creates as its own user.
    
    Two other minor changes are included (found during testing):
    
    - bin/livy-server now adds config directories (Spark and Hadoop) do Livy's
      classpath, so that Livy can read the correct Hadoop configuration (and
      Spark's, if needed later).
    - client-http/pom.xml now shades livy-client-common since we need to relocate
      kryo classes in that artifact too.
    
    Closes #98

 bin/livy-server                                    |  15 ++-
 client-http/pom.xml                                |   1 -
 .../main/scala/com/cloudera/livy/LivyConf.scala    |  14 +--
 .../livy/server/client/ClientSession.scala         | 102 ++++++++++++++++-----
 .../livy/server/client/ClientSessionServlet.scala  |   2 +-
 server/src/test/resources/log4j.properties         |   6 +-
 .../cloudera/livy/server/BaseJsonServletSpec.scala |   6 +-
 .../livy/server/client/ClientServletSpec.scala     |  35 ++++++-
 8 files changed, 138 insertions(+), 43 deletions(-)

commit 0af8a274f6a09683d9625cdb11620db1208d1368
Author: Hari Shreedharan <hshreedharan@apache.org>
Date:   Wed Mar 23 13:57:29 2016 -0700

    LIVY-46. Use the RSC to drive REPL sessions.
    
    This change modifies interactive sessions so they use the RSC (livy-client-local) to
    run the REPL driver. This removes the embedded Jetty server in the REPL process,
    so it solves other issues too; namely, LIVY-95, LIVY-84, and maybe others that I have
    forgotten about.
    
    The change works by having the RSC instantiate a REPL-specific driver when a certain
    config option is set. This is currently a little hacky and not very extensible, but we can work
    on those parts later if there's a need. The `LocalClient` class exposes some REPL-specific
    methods so that its main client (the "server" module) doesn't need REPL jars in its classpath.
    These methods just send RPCs to the REPL driver and return their results.
    
    One notable loss of functionality is that the interactive session servlet does not expose REPL
    logs anymore.  But because those logs were the output of "spark-submit", they're not very useful.
    In yarn-cluster mode, there's only app status information there, nothing related about what's
    really happening in Spark. LIVY-55 is the proper way of exposing logs. Another loss is the removal of the `bin/livy-repl` script; if that functionality is desired, a new module that brings back the HTTP frontend to the repl will have to be created, to avoid the issues in LIVY-84.
    
    Closes #94

 bin/livy-repl                                      |  47 ----
 .../cloudera/livy/client/http/HttpClientSpec.scala |   1 +
 .../cloudera/livy/client/local/BaseProtocol.java   |  33 +++
 .../livy/client/local/BypassJobStatus.java         |   4 -
 .../livy/client/local/ContextLauncher.java         |  21 +-
 .../cloudera/livy/client/local/LocalClient.java    |  15 +-
 .../com/cloudera/livy/client/local/LocalConf.java  |   1 +
 .../livy/client/local/driver/BypassJobWrapper.java |   2 +-
 .../cloudera/livy/client/local/driver/Driver.java  | 220 +++++++++++++++
 .../livy/client/local/driver/DriverProtocol.java   |  30 +-
 .../livy/client/local/driver/JobContextImpl.java   |   2 +-
 .../livy/client/local/driver/JobWrapper.java       |   9 +-
 .../livy/client/local/driver/MonitorCallback.java  |   2 +-
 .../livy/client/local/driver/RemoteDriver.java     | 204 ++------------
 .../livy/client/local/rpc/RpcDispatcher.java       |  36 ++-
 core/pom.xml                                       |  51 ----
 core/src/main/scala/com/cloudera/livy/Utils.scala  |   7 -
 .../scala/com/cloudera/livy/sessions/Kind.scala    |  18 +-
 pom.xml                                            |   7 -
 repl/pom.xml                                       |  66 +----
 .../main/scala/com/cloudera/livy/repl/Main.scala   | 170 -----------
 .../scala/com/cloudera/livy/repl/ReplDriver.scala  |  94 +++++++
 .../scala/com/cloudera/livy/repl/Session.scala     |  16 +-
 .../main/scala/com/cloudera/livy/repl/WebApp.scala | 147 ----------
 .../livy/repl/python/PythonInterpreter.scala       |   3 +-
 .../livy/repl/scalaRepl/SparkInterpreter.scala     |   1 -
 .../com/cloudera/livy/repl/BaseSessionSpec.scala   |  21 +-
 .../com/cloudera/livy/repl/PythonSessionSpec.scala |  16 +-
 .../com/cloudera/livy/repl/SparkRSessionSpec.scala |  14 +-
 .../com/cloudera/livy/repl/SparkSessionSpec.scala  |  20 +-
 .../scala/com/cloudera/livy/repl/WebAppSpec.scala  | 117 --------
 .../com/cloudera/livy/server}/WebServer.scala      |   4 +-
 .../livy/server/client/ClientSession.scala         |   1 +
 .../server/interactive/InteractiveSession.scala    | 312 ++++++---------------
 .../interactive/InteractiveSessionServlet.scala    |  16 --
 .../livy/server}/interactive/Statement.scala       |   2 +-
 .../livy/server}/interactive/StatementState.scala  |   2 +-
 server/src/test/resources/log4j.properties         |   2 +-
 .../livy/server/client/ClientServletSpec.scala     |   2 +-
 .../InteractiveSessionServletSpec.scala            |   1 -
 .../interactive/InteractiveSessionSpec.scala       |  50 ++--
 .../livy/server}/interactive/StatementSpec.scala   |   2 +-
 42 files changed, 651 insertions(+), 1138 deletions(-)

commit 761599f9fa08b4e2ce73c4d848b5d2b2690ff455
Author: Jeff Zhang <zjffdu@apache.org>
Date:   Thu Mar 17 12:14:22 2016 -0700

    LIVY-88. Replace net.databinder.dispatch with com.ning.async-http-client
    
    Closes #87

 core/pom.xml                                       |  9 +++
 core/src/main/scala/com/cloudera/livy/Utils.scala  | 17 +++++-
 pom.xml                                            | 20 +++----
 repl/pom.xml                                       |  5 --
 .../main/scala/com/cloudera/livy/repl/Main.scala   | 29 ++++-----
 server/pom.xml                                     | 10 ----
 .../main/scala/com/cloudera/livy/server/Main.scala |  3 -
 .../com/cloudera/livy/server/SessionServlet.scala  |  1 -
 .../server/interactive/InteractiveSession.scala    | 68 +++++++++++++---------
 9 files changed, 86 insertions(+), 76 deletions(-)

commit 011cc985ba93366f49e377fac6d4a1d9a95f4332
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri Mar 11 15:13:45 2016 -0800

    LIVY-58. Allow connections between Livy and RSC to be re-established.
    
    This change modifies the direction of connections between Livy and the RSC,
    so that it's Livy connecting to the RSC instead of the other way around.
    This makes the RSC behave sort of like the current REPL code, where the
    context will connect back to Livy to tell its listen address so that Livy
    can connect to it.
    
    For that to work, the RemoteDriver now runs an RpcServer, and does not
    kill itself when client connections go away. It also allows multiple
    concurrent client connections to exist, although it should be rare for
    that situation to exist in the real world.
    
    The code to launch Spark was refactored into a separate class, since
    when connecting to an existing RSC it needs to be bypassed altogether.
    
    Closes #90

 .../java/com/cloudera/livy/LivyClientBuilder.java  |  12 +
 .../com/cloudera/livy/TestLivyClientBuilder.java   |  11 +
 .../cloudera/livy/client/local/BaseProtocol.java   |  16 +
 .../cloudera/livy/client/local/ContextInfo.java    |  31 ++
 .../livy/client/local/ContextLauncher.java         | 447 +++++++++++++++++++++
 .../cloudera/livy/client/local/LocalClient.java    | 284 ++-----------
 .../livy/client/local/LocalClientFactory.java      |  61 ++-
 .../com/cloudera/livy/client/local/LocalConf.java  |   1 +
 .../livy/client/local/driver/BypassJobWrapper.java |   4 +-
 .../livy/client/local/driver/DriverProtocol.java   |  16 +-
 .../livy/client/local/driver/JobWrapper.java       |  14 +-
 .../livy/client/local/driver/RemoteDriver.java     |  86 ++--
 .../com/cloudera/livy/client/local/rpc/Rpc.java    |   9 +-
 .../livy/client/local/rpc/RpcDispatcher.java       |   2 +
 .../cloudera/livy/client/local/rpc/RpcServer.java  | 116 ++----
 .../livy/client/local/TestSparkClient.java         |  51 ++-
 .../cloudera/livy/client/local/rpc/TestRpc.java    |  64 ++-
 17 files changed, 813 insertions(+), 412 deletions(-)

commit 5ad1b37639908fc10c47936a50c3385659a70ca4
Author: Jeff Zhang <zjffdu@apache.org>
Date:   Fri Mar 11 14:32:36 2016 +0800

    Specify java version in maven-compiler-plugin
    
    The purpose is that it can help intellij recognize the java version and set the language level correctly in intellij. Otherwise intellij always use java 5 which is very annoying.
    
    Closes #91

 pom.xml | 4 ++++
 1 file changed, 4 insertions(+)

commit 03fe9aa286dab8a6d5594393149ed9ee360f906c
Author: Jeff Zhang <zjffdu@apache.org>
Date:   Fri Mar 11 10:20:33 2016 -0800

    LIVY-89. PySparkInterpreter doesn't work
    
    Closes #88

 repl/src/main/resources/fake_shell.py | 8 ++++++++
 1 file changed, 8 insertions(+)

commit b0771202d0fb027908cb6ac77da0867afc776aae
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Mar 8 14:02:05 2016 -0800

    Add explicit dependency to spark-launcher in client-local.
    
    The code now needs that library to run, so it needs to be packaged
    with Livy. It's not needed on the driver side of the RSC, so avoid
    packaging it under the client-jars directory.
    
    Closes #86

 client-local/pom.xml | 10 +++++++++-
 pom.xml              | 12 ++++++++++++
 2 files changed, 21 insertions(+), 1 deletion(-)

commit d6e3adb5c937db409f471a23d378f29c6d2d20cc
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Mar 9 17:31:28 2016 -0800

    Partial revert of d884210.
    
    Remove the Hadoop scope overrides, which were causing the packaged
    jars and zips to be much larger than needed, but keep the extra
    test dependencies that get rid of build-time warnings.

 pom.xml | 7 -------
 1 file changed, 7 deletions(-)

commit e9d8595704577742adb8ae2f74a469793362a1f2
Author: hyunwoo cho <purechoc.en@gmail.com>
Date:   Wed Mar 9 17:21:08 2016 -0800

    LIVY-13. Send back plots from the interpreter
    
    send back matplotlib plots imgage from the python interpretor
     - use likes %matplot plt
     - working with Hue master branch
     - plan to support another plot library..
    
    Closes #73

 repl/src/main/resources/fake_shell.py | 20 ++++++++++++++++++++
 1 file changed, 20 insertions(+)

commit d8842102dd151f7568b0a6a9feb0a0064dbc32bf
Author: Alex Man <tc.technetium@gmail.com>
Date:   Fri Jan 15 19:48:37 2016 -0800

    LIVY-47. Added an override for the scope of Hadoop and Spark dependencies.
    
    In most environment, users already have Hadoop & Spark's jars available on their clusters.
    This change added an override so users can exclude them in Livy assembly and provide them to Livy at runtime using CLASSPATH.
    To use it, build with: mvn -Dhadoop.scope=provided -Dspark.scope=provided package
    
    Closes #72

 client-http/pom.xml | 15 +++++++++++++++
 pom.xml             |  7 +++++++
 server/pom.xml      | 18 ++++++++++++++++++
 3 files changed, 40 insertions(+)

commit d65156275a668bf0cd7f50cdc4ec460121000ac1
Author: GayathriMurali <gayathri.m.softie@gmail.com>
Date:   Wed Mar 2 10:29:23 2016 -0800

    LIVY-39. Migrate Livy to use Spark Launcher Library
    
    Removed Hashmap and modified code for values to be added directly to launcher.Fixed style issues
    
    Closes #79

 .../cloudera/livy/client/local/LocalClient.java    | 128 +++++----------------
 1 file changed, 26 insertions(+), 102 deletions(-)

commit b1da0abfa2bb8148aa02ce240aecc87465e10b56
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Feb 23 10:36:31 2016 -0800

    LIVY-66. Allow http client to authenticate using SPNEGO.
    
    The httpclient documentation is kinda off, but this seems to work.
    The default value for "RequestConfig.isAuthenticationEnabled" is
    actually false (docs say it's "true"), and the SPNEGO auth handler
    is installed by default in client instances, so the only thing left
    is to register the dummy credentials provider.
    
    Note this requires that the user logs in through some other means
    (either using kinit or by performing a JAAS login in their application).
    
    Closes #80

 .../cloudera/livy/client/http/LivyConnection.java  | 30 ++++++++++++++++++++++
 1 file changed, 30 insertions(+)

commit 7d92cb7b23ff58a687d4d015c5cef9c4a7aab998
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Feb 23 15:09:05 2016 -0800

    LIVY-73. Allow http client to connect to existing sessions.
    
    This change makes the URI parsing in the HTTP client detect when
    the user is trying to reuse an existing session instead of creating
    a new one. A new method was added to the client servlet that is
    used by the client to ensure the session exists and the user has
    permission to use it.
    
    To properly support the functionality, the public API needed to be
    changed so that it's possible to clean up a client's state without
    shutting down the underlying session.
    
    On slightly related changes, I updated some spots where the code
    was failing to update the last activity time of a session, and
    changed an internal method name to be more descriptive.
    
    Closes #81

 .../main/java/com/cloudera/livy/LivyClient.java    |  6 ++-
 .../java/com/cloudera/livy/TestClientFactory.java  |  2 +-
 .../com/cloudera/livy/client/http/HttpClient.java  | 45 +++++++++++++++++-----
 .../cloudera/livy/client/http/LivyConnection.java  | 10 +++--
 .../cloudera/livy/client/http/HttpClientSpec.scala | 14 +++++--
 .../cloudera/livy/client/local/LocalClient.java    |  5 ++-
 .../livy/client/local/TestSparkClient.java         |  2 +-
 .../livy/server/client/ClientSession.scala         |  8 +++-
 .../livy/server/client/ClientSessionServlet.scala  | 13 ++++++-
 .../livy/server/client/ClientServletSpec.scala     |  8 ++++
 10 files changed, 90 insertions(+), 23 deletions(-)

commit 94976863f843eb709ed343d4b336b3de1e43b45c
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Feb 24 13:43:30 2016 -0800

    LIVY-76. Fix propagation of Livy config in cluster mode.
    
    Go back to embedding the Livy configuration in the Spark config so
    that it's properly propagated to the driver in cluster mode. This
    is a little ugly since it requires using Scala APIs in Java code,
    but we can't use "--files" and SparkFiles because that class needs
    the SparkContext to be initialized, and we need this config before
    that.
    
    Also, while testing, I noticed after some debugging that the RPC
    code was failing; that's because it was using Spark's Kryo, which
    is not binary compatible with the version we compile against. So
    now Kryo is shaded. I also added a "sync()" call when sending the
    initial SASL message so that if it errors out, we actually get to see the
    exception.
    
    Closes #82

 client-local/pom.xml                               | 41 ++++++++++++++++++++++
 .../cloudera/livy/client/local/LocalClient.java    | 32 ++++++++---------
 .../com/cloudera/livy/client/local/LocalConf.java  |  1 +
 .../livy/client/local/driver/RemoteDriver.java     | 25 +++++++------
 .../com/cloudera/livy/client/local/rpc/Rpc.java    |  2 +-
 5 files changed, 70 insertions(+), 31 deletions(-)

commit 959cb4139b924107b64bf0d6f4666fe3237a77b4
Author: Hari Shreedharan <hshreedharan@apache.org>
Date:   Wed Feb 24 17:33:48 2016 -0800

    Fix assembly naming
    
    Closes #83

 assembly/pom.xml | 1 +
 1 file changed, 1 insertion(+)

commit 8287f4c7156b67edad0d3fa4f3afc1059b0baea6
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Feb 24 13:53:47 2016 -0800

    LIVY-67. Support impersonation in client sessions.
    
    There are a few different things going on here to reach that goal:
    
    - client-local now supports spark submit's --proxy-user command line
      argument, and a new configuration to define the user to be proxied.
    
    - the Livy server now has a list of "super users" who can do anything;
      relevant to this change, super users can impersonate anyone.
    
    - SessionServlet now has a helper method to figure out who should be
      impersonated and check for appropriate permissions.
    
    - The three session servlets now use that method; the semantics are:
    
      * if there is no user information (i.e. auth is off), users are
        allowed to impersonate anyone
      * when users are authenticated, normal users can only impersonate
        themselves; even if they don't specify a proxy user, the server
        will impersonate the calling user.
      * super users can impersonate anyone; if a specific proxy user is not
        requested, the session will run as the super user.
    
    The rest of the changes are mostly test code, and a small tweak to
    JsonServlet to be able to serialize raw String into a JSON object
    until LIVY-54 is fixed.
    
    Closes #74

 .../cloudera/livy/client/common/HttpMessages.java  |  8 +-
 .../cloudera/livy/client/http/HttpClientSpec.scala |  1 +
 .../cloudera/livy/client/local/LocalClient.java    |  5 ++
 .../com/cloudera/livy/client/local/LocalConf.java  |  2 +
 .../livy/client/local/TestSparkClient.java         | 31 +++++++-
 .../main/scala/com/cloudera/livy/LivyConf.scala    |  6 ++
 .../com/cloudera/livy/server/JsonServlet.scala     | 12 +--
 .../main/scala/com/cloudera/livy/server/Main.scala |  4 +
 .../com/cloudera/livy/server/SessionServlet.scala  | 40 +++++++---
 .../cloudera/livy/server/batch/BatchSession.scala  |  9 ++-
 .../livy/server/batch/BatchSessionServlet.scala    |  5 +-
 .../livy/server/client/ClientSession.scala         | 15 +++-
 .../livy/server/client/ClientSessionServlet.scala  | 14 +++-
 .../server/interactive/InteractiveSession.scala    |  5 +-
 .../interactive/InteractiveSessionServlet.scala    |  6 +-
 .../cloudera/livy/server/BaseJsonServletSpec.scala | 23 +++---
 .../livy/server/BaseSessionServletSpec.scala       | 36 +++++++++
 .../cloudera/livy/server/SessionServletSpec.scala  | 42 +++++++---
 .../livy/server/batch/BatchSessionSpec.scala       |  2 +-
 .../livy/server/client/ClientServletSpec.scala     | 92 ++++++++++++++++++----
 .../interactive/InteractiveSessionSpec.scala       |  2 +-
 21 files changed, 292 insertions(+), 68 deletions(-)

commit 00819210e72d70dff1b7a8b757a9967276ac1ceb
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Feb 23 11:41:54 2016 -0800

    LIVY-59. Remove MetricsCollection from the public API.
    
    This was inherited from Hive, and it's used there; but let's wait
    until there's an actual need in Livy for this, especially since
    the API is highly coupled with APIs that have changed in Spark,
    and applications can still write code themselves to gather metrics
    if they need to.
    
    Closes #78

 api/src/main/java/com/cloudera/livy/JobHandle.java |   8 -
 .../java/com/cloudera/livy/MetricsCollection.java  | 318 ---------------------
 .../com/cloudera/livy/metrics/DataReadMethod.java  |  26 --
 .../com/cloudera/livy/metrics/InputMetrics.java    |  47 ---
 .../java/com/cloudera/livy/metrics/Metrics.java    | 108 -------
 .../cloudera/livy/metrics/ShuffleReadMetrics.java  |  71 -----
 .../cloudera/livy/metrics/ShuffleWriteMetrics.java |  49 ----
 .../com/cloudera/livy/TestMetricsCollection.java   | 174 -----------
 .../livy/client/common/AbstractJobHandle.java      |  14 -
 .../livy/client/common/TestAbstractJobHandle.java  |   1 -
 .../cloudera/livy/client/local/BaseProtocol.java   |  23 --
 .../livy/client/local/BypassJobStatus.java         |   7 +-
 .../cloudera/livy/client/local/JobHandleImpl.java  |   1 -
 .../cloudera/livy/client/local/LocalClient.java    |   9 -
 .../livy/client/local/driver/BypassJobWrapper.java |  17 +-
 .../livy/client/local/driver/DriverProtocol.java   |   6 -
 .../client/local/driver/DriverSparkListener.java   |  22 --
 .../livy/client/local/driver/JobWrapper.java       |   5 -
 .../livy/client/local/TestSparkClient.java         |  33 ---
 19 files changed, 3 insertions(+), 936 deletions(-)

commit cbc31ed2ff032dd399609820a05a3917375aa37d
Author: Hari Shreedharan <hshreedharan@apache.org>
Date:   Tue Feb 23 11:33:11 2016 -0800

    Add support for tar.gz assembly files.
    
    Closes #77

 assembly/pom.xml | 19 ++++++++++++++-----
 1 file changed, 14 insertions(+), 5 deletions(-)

commit f6156956c14e9e310dc2caa602689e9bd20c57ae
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri Feb 19 10:36:45 2016 -0800

    Move some classes out of core/.
    
    There are only used in the server module so it's better to have
    them there. Also remove "SparkProcess" which did not have any
    useful functionality over its parent class.
    
    I also removed the remnants of 'ConfigOptionNotAllowed'; we should
    instead document how to deploy Livy securely, and that does not
    require blocking users from changing any Spark configuration.
    
    Closes #76

 .../main/scala/com/cloudera/livy/server/Main.scala |  1 +
 .../com/cloudera/livy/server/SessionServlet.scala  |  2 -
 .../cloudera/livy/server/batch/BatchSession.scala  |  4 +-
 .../server/interactive/InteractiveSession.scala    |  5 +--
 .../scala/com/cloudera/livy/sessions/Session.scala |  0
 .../cloudera/livy/sessions/SessionManager.scala    |  0
 .../livy/spark/ConfigOptionNotAllowed.scala        | 32 ----------------
 .../com/cloudera/livy/spark/SparkProcess.scala     | 30 ---------------
 .../cloudera/livy/utils}/LineBufferedProcess.scala |  4 +-
 .../cloudera/livy/utils}/LineBufferedStream.scala  |  4 +-
 .../{spark => utils}/SparkProcessBuilder.scala     | 19 +++-------
 .../livy/sessions/SessionManagerSpec.scala         |  0
 .../livy/spark/SparkProcessBuilderSpec.scala       | 44 ----------------------
 13 files changed, 17 insertions(+), 128 deletions(-)

commit 4e76f1572f9166568302f74ee2c6d72191e61b59
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Feb 18 17:41:42 2016 -0800

    Increase test coverage of client-common module.
    
    Some of these paths are tested indirectly in other modules, but it's better
    to have more targeted unit tests.
    
    Closes #75

 .../cloudera/livy/client/common/ClientConf.java    |   6 +-
 .../livy/client/common/TestAbstractJobHandle.java  | 110 +++++++++++++++++++++
 .../livy/client/common/TestBufferUtils.java        |  62 ++++++++++++
 .../livy/client/common/TestClientConf.java         |  80 ++++++++++++++-
 .../livy/client/common/TestHttpMessages.java       |  10 ++
 5 files changed, 260 insertions(+), 8 deletions(-)

commit d4e114655c070138f21f9d7a3084e21693be3b31
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Feb 23 10:56:24 2016 -0800

    LIVY-34. Sessions API Location Http Header is fixed.
    
    **JIRA =>** https://issues.cloudera.org/browse/LIVY-34
    
    Sessions API Location Http Header needs to be fixed.
    
    Current Response returns as follows :
    **Location:** /0
    
    Expected Response :
    http POST localhost:8998/sessions kind:='"spark"'
    HTTP/1.1 201 Created
    Content-Length: 69
    Content-Type: application/json; charset=UTF-8
    Date: Fri, 05 Feb 2016 23:08:25 GMT
    **Location:** /sessions/0
    Server: Jetty(9.2.10.v20150310)
    
    {
        "id": 0,
        "kind": "spark",
        "logs": [],
        "proxyUser": null,
        "state": "starting"
    }
    
    Closes #57

 .../main/scala/com/cloudera/livy/server/SessionServlet.scala  | 11 ++++++++++-
 .../com/cloudera/livy/server/client/ClientServletSpec.scala   |  3 ---
 2 files changed, 10 insertions(+), 4 deletions(-)

commit 4ff2e0936732639077b3daa76af62a7f27ae2754
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Feb 17 11:36:06 2016 -0800

    Fix session manager test.
    
    The main cause was that the mock session used by the test was not
    overriding the default timeout (1 hour), so the test was failing.
    
    I used the opportunity to clean things up a bit: lastActivity now
    always returns something, and activity is recorded as soon as the
    session is created. The test also tries a few times to avoid issues
    with thread scheduling.
    
    This means that sessions can timeout before they're returned to
    clients, but that should be rare (and at the same time, desired,
    since sessions should have an upper bound on the time it takes for
    them to be created).
    
    Closes #71

 .../main/scala/com/cloudera/livy/sessions/Session.scala  | 16 ++++++----------
 .../com/cloudera/livy/sessions/SessionManager.scala      |  9 ++-------
 .../com/cloudera/livy/sessions/SessionManagerSpec.scala  | 14 ++++++++++----
 .../scala/com/cloudera/livy/server/SessionServlet.scala  |  3 +++
 4 files changed, 21 insertions(+), 21 deletions(-)

commit 10e86c7776026db95b4c5b048835958537dfd986
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Feb 17 10:08:33 2016 -0800

    LIVY-70. Simplify Livy type and module hierarchy.
    
    Fasten your seatbelts; lots going on here.
    
    The first big change is the removal of the manager / factory / session
    hierarchy. Instead, each session servlet knows how to create their own
    sessions. There's no need for a "manager" concept anymore, and factories
    are all replaced with a single method in each servlet.
    
    This leads to the loss of two existing functions:
    
    - the whole "yarn" module, which wasn't very helpful anyway. All it did
      was monitor the stdout of spark-submit; we should instead switch to
      Spark 1.6 and use the enhanced launcher API for that.
    
    - the Spark config whitelist; that was touted as a security feature, but
      there's really no security if you're running use code as the same
      user as the Livy server. So it didn't really serve any real purpose.
    
    The second big change is the removal of the "spark" module; well, it isn't
    really removed, but actually merged with the "server" module which was its
    only consumer. This makes development easier since you just need to rebuild
    one module when you touch those files. For the same reason, backend-specific
    session classes were moved from the "core" module to the "server" module.
    
    There is still more code in "core" that could potentially be cleaned up or
    moved, but that's left for the future.
    
    Third but not last, the change removes the concept of absolute or relative
    paths, and filesystem root. Clients should always provide paths as they would
    for a "spark-submit" invocation; the difference being that local paths
    wouldn't really work. There are probably extra enhancements to be made in
    this area, but those wouldn't be related to this cleanup.
    
    Finally, some intermediary classes (like "InteractiveWebSession" and
    "BaseInteractiveSessionSpec") were merged with their (single) concrete
    implementations. That also allowed the removal of the livy-core test
    jar.
    
    Closes #64

 README.rst                                         |  25 --
 client-http/pom.xml                                |   5 +
 .../cloudera/livy/client/http/HttpClientSpec.scala |  37 ++-
 conf/spark-user-configurable-options.template      | 123 ---------
 core/pom.xml                                       |  16 --
 .../main/scala/com/cloudera/livy/LivyConf.scala    |  27 +-
 .../cloudera/livy/sessions/SessionFactory.scala    |  32 ---
 .../cloudera/livy/sessions/SessionManager.scala    |  59 ++---
 .../livy/sessions/batch/BatchSession.scala         |  23 --
 .../sessions/interactive/InteractiveSession.scala  |  57 ----
 .../livy/sessions/SessionManagerSpec.scala         |  12 +-
 pom.xml                                            |   2 -
 server/pom.xml                                     |  39 +--
 .../com/cloudera/livy/server/JsonServlet.scala     |  31 ++-
 .../main/scala/com/cloudera/livy/server/Main.scala |  17 +-
 .../com/cloudera/livy/server/SessionServlet.scala  |  27 +-
 .../cloudera/livy/server/batch/BatchSession.scala  |  39 ++-
 .../livy/server/batch/BatchSessionServlet.scala    |  13 +-
 .../livy/server}/batch/CreateBatchRequest.scala    |   2 +-
 .../livy/server}/client/ClientSession.scala        |   3 +-
 .../livy/server/client/ClientSessionServlet.scala  |  14 +-
 .../interactive/CreateInteractiveRequest.scala     |   2 +-
 .../server/interactive/InteractiveSession.scala    | 292 +++++++++++++++------
 .../interactive/InteractiveSessionServlet.scala    |  15 +-
 .../livy/spark/ConfigOptionNotAllowed.scala        |   0
 .../com/cloudera/livy/spark/SparkProcess.scala     |   0
 .../cloudera/livy/spark/SparkProcessBuilder.scala  |  64 ++---
 .../livy/server/BaseSessionServletSpec.scala       |  14 +-
 .../cloudera/livy/server/SessionServletSpec.scala  |  17 +-
 .../livy/server/batch/BatchServletSpec.scala       |  22 +-
 .../livy/server/batch/BatchSessionSpec.scala       |   9 +-
 .../server}/batch/CreateBatchRequestSpec.scala     |   2 +-
 .../livy/server/client/ClientServletSpec.scala     |  14 +-
 .../interactive/CreateInteractiveRequestSpec.scala |   2 +-
 .../InteractiveSessionServletSpec.scala            | 111 ++++----
 .../interactive/InteractiveSessionSpec.scala       |  23 +-
 .../livy/spark/SparkProcessBuilderSpec.scala       |   0
 spark/pom.xml                                      | 160 -----------
 .../default-spark-user-configurable-options.conf   | 122 ---------
 .../com/cloudera/livy/spark/SparkManager.scala     | 111 --------
 .../livy/spark/SparkProcessBuilderFactory.scala    |  31 ---
 .../livy/spark/SparkUserConfigurableOptions.scala  |  42 ---
 .../livy/spark/batch/BatchSessionFactory.scala     |  64 -----
 .../spark/batch/BatchSessionProcessFactory.scala   |  30 ---
 .../livy/spark/batch/BatchSessionYarn.scala        |  94 -------
 .../livy/spark/batch/BatchSessionYarnFactory.scala |  36 ---
 .../livy/spark/client/ClientSessionFactory.scala   |  30 ---
 .../cloudera/livy/spark/client/SessionCache.scala  | 129 ---------
 .../interactive/InteractiveSessionFactory.scala    | 161 ------------
 .../interactive/InteractiveSessionProcess.scala    |  68 -----
 .../InteractiveSessionProcessFactory.scala         |  38 ---
 .../spark/interactive/InteractiveSessionYarn.scala |  64 -----
 .../InteractiveSessionYarnFactory.scala            |  47 ----
 spark/src/test/resources/log4j.properties          |  38 ---
 .../InteractiveSessionProcessSpec.scala            |  42 ---
 yarn/pom.xml                                       |  83 ------
 yarn/src/main/resources/logback.xml                |  12 -
 .../com/cloudera/livy/yarn/ApplicationState.scala  |  29 --
 .../main/scala/com/cloudera/livy/yarn/Job.scala    | 108 --------
 .../com/cloudera/livy/yarn/LivyYarnClient.scala    |  80 ------
 60 files changed, 524 insertions(+), 2285 deletions(-)

commit 2e41eefcfc5590096ccb77b1b461479309159789
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Feb 16 16:14:59 2016 -0800

    Fix name of "log" property in interactive session JSON view.
    
    Closes #70

 .../cloudera/livy/server/interactive/InteractiveSessionServlet.scala    | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3c314b11777459e10984ab408aaf2cbd47edf6db
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Feb 16 14:34:50 2016 -0800

    Create a fake SPARK_HOME so tests that fork Spark can run.
    
    This change adds fake "spark-submit" and fake "sparkR" so that tests
    can run them as if they were a proper Spark installation. This works
    well for Scala / Java, but for python and R it means no pyspark or
    SparkR code can actually be tested - just the interaction with the
    underlying shell. So a few tests that tried to run Spark code were
    removed.
    
    Closes #69

 .travis.yml                                        |  9 +++-
 .../livy/client/local/TestSparkClient.java         |  2 -
 dev/spark/bin/spark-submit                         | 43 ++++++++++++++++++
 dev/spark/bin/sparkR                               |  9 ++++
 pom.xml                                            |  2 +
 repl/src/main/resources/fake_shell.py              |  6 ---
 .../livy/repl/python/PythonInterpreter.scala       |  6 +--
 .../cloudera/livy/repl/PythonInterpreterSpec.scala | 15 ------
 .../com/cloudera/livy/repl/PythonSessionSpec.scala | 41 -----------------
 .../cloudera/livy/repl/SparkRInterpreterSpec.scala | 25 ----------
 .../com/cloudera/livy/repl/SparkRSessionSpec.scala | 53 ++--------------------
 .../livy/server/BaseSessionServletSpec.scala       |  9 +---
 .../cloudera/livy/server/SessionServletSpec.scala  |  2 +-
 .../livy/server/batch/BatchServletSpec.scala       |  1 +
 .../livy/server/client/ClientServletSpec.scala     |  2 +-
 spark/pom.xml                                      |  6 +++
 .../cloudera/livy/spark/SparkProcessBuilder.scala  |  3 +-
 .../interactive/InteractiveSessionFactory.scala    |  4 +-
 .../livy/spark/batch/BatchProcessSpec.scala        |  6 +--
 .../InteractiveSessionProcessSpec.scala            |  1 -
 20 files changed, 84 insertions(+), 161 deletions(-)

commit 52e2cf8285db621457d833930cc5b3a7d8f33656
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Feb 8 12:37:01 2016 -0800

    LIVY-65. Dependency and package cleanup.
    
    A few changes to the build and packaging:
    
    - Drop the "_2.10" prefix from Livy artifacts. The version of Scala does
      not matter for Livy; the server can talk to backends running whatever
      version of Scala (or no Scala at all). So it doesn't make sense to
      expose that.
    
    - Remove Spark classes that leaked through the public API paths; this makes
      sure clients can run without Spark classes in the classpath.
    
    - Clean up the module poms and assembly descriptor a bit.
    
    - Make deployment to a maven repo "opt in", so that we control artifacts that
      should be published.
    
    Note that Scala dependencies are still stuck at 2.10. This means Livy cannot
    currently run (or even compile) its repl against a Spark that's using 2.11.
    That's a separate future enhancement, though.
    
    Closes #61

 api/pom.xml                                        |  5 +-
 assembly/assembly.xml                              | 29 ++++------
 assembly/pom.xml                                   | 64 ++++------------------
 bin/livy-server                                    |  2 +-
 client-common/pom.xml                              | 10 +++-
 client-http/pom.xml                                | 36 ++++++------
 client-local/pom.xml                               | 18 ++----
 .../cloudera/livy/client/local/LocalClient.java    |  6 +-
 .../livy/client/local/TestSparkClient.java         |  2 -
 core/pom.xml                                       |  6 +-
 pom.xml                                            | 32 ++++++++++-
 repl/pom.xml                                       | 15 +----
 server/pom.xml                                     | 60 ++++++++++----------
 spark/pom.xml                                      | 29 ++++------
 .../interactive/CreateInteractiveRequest.scala     |  4 +-
 yarn/pom.xml                                       |  6 +-
 16 files changed, 142 insertions(+), 182 deletions(-)

commit f9137effcdbcd6dd838ab8dc636686c5140bad67
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Jan 28 17:08:07 2016 -0800

    Make sure HTTP client handles null returns.
    
    Just add a test to make sure that works.
    
    Closes #66

 .../scala/com/cloudera/livy/client/http/HttpClientSpec.scala   | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit 71b2260444d7900cf9c206f20b906751e17c1d60
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Feb 10 20:36:21 2016 -0800

    Codecov test.
    
    Closes #67

 .travis.yml |  6 ++++-
 pom.xml     | 85 ++++++++++++++++++++++++++++++++++---------------------------
 2 files changed, 53 insertions(+), 38 deletions(-)

commit 78c22f07e5eaad1b0589143fe52608cc6eb4d6c3
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Feb 11 09:26:39 2016 -0800

    Demote RPC channel log level during tests to reduce noise in travis.
    
    Closes #68

 .../src/test/java/com/cloudera/livy/client/local/rpc/TestRpc.java        | 1 -
 1 file changed, 1 deletion(-)

commit cdd375c2b2472e6f3379bae273d42801dff2bc25
Author: Kostas Sakellis <kostas@cloudera.com>
Date:   Wed Feb 10 17:13:45 2016 -0800

    Update .travis.yml
    
    Added codecov

 .travis.yml | 5 +++++
 1 file changed, 5 insertions(+)

commit f2c5dcc206ce8128ac0e4bfeea2590053be2c014
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Feb 9 10:35:49 2016 -0800

    LIVY-64, LIVY-69. Make JsonServlet process all route outputs.
    
    This change makes JsonServlet map the output object to JSON
    whenever the result's type is json, not just when one of the
    "j*" methods are used. This means that "get", "post" and friends
    also use Jackson to map their results.
    
    As a result, "jget" and "jdelete" are not needed anymore, and
    the other methods don't need the weird syntax used to bypass
    deserialization of the body. It also fixes existing routes that
    were missed when JsonServlet was introduced.
    
    Closes #62

 .../com/cloudera/livy/server/JsonServlet.scala     | 68 ++++++++--------------
 .../com/cloudera/livy/server/SessionServlet.scala  | 14 ++---
 .../livy/server/client/ClientSessionServlet.scala  |  8 +--
 .../com/cloudera/livy/server/JsonServletSpec.scala |  6 +-
 .../InteractiveSessionServletSpec.scala            |  5 ++
 5 files changed, 41 insertions(+), 60 deletions(-)

commit b4e16c37bf77beda44a1eb1c3a7e108ec384db48
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Feb 9 15:00:49 2016 -0800

    Fix potential race in local client driver shutdown.
    
    I believe this is the cause of the timeouts that sometimes show up
    in travis runs. Looking at logs from previous runs, it seems that
    a new SparkContext is being instantiated while the old one is still
    shutting down, meaning that both operations can run into each other
    (there was an NPE in the logs that seems caused by that).
    
    The reason seems to be that the client side requests a shutdown of
    the driver, but doesn't wait until it actually shuts down completely
    before tearing down RPC channels; that could cause the client to think
    the driver was shut down when it was still in the process of doing it,
    among other issues in the code.
    
    The change makes the client wait for the driver to shutdown before
    closing the RPC channel, and also changes the shutdown order in the
    driver to be a little safer. Also, a small change to silence logs
    that aren't really useful.
    
    Closes #63

 .../com/cloudera/livy/client/local/LocalClient.java | 21 ++++++++++-----------
 .../livy/client/local/driver/JobContextImpl.java    |  5 ++++-
 .../livy/client/local/driver/RemoteDriver.java      | 17 ++++++++++-------
 client-local/src/test/resources/log4j.properties    |  3 +++
 4 files changed, 27 insertions(+), 19 deletions(-)

commit 7d026970a5fcc60b47fea94cbf71c7d3ae9617d4
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Feb 4 15:54:41 2016 -0800

    Enable style checks for Scala tests.
    
    Hopefully the last of the noisy commits.
    
    Closes #55

 .../com/cloudera/livy/client/http/HttpClientSpec.scala  |  2 +-
 .../livy/sessions/BaseInteractiveSessionSpec.scala      |  9 +++++----
 .../com/cloudera/livy/sessions/SessionManagerSpec.scala |  7 ++++---
 .../livy/sessions/interactive/StatementSpec.scala       | 14 +++++++-------
 pom.xml                                                 |  2 +-
 .../com/cloudera/livy/repl/BaseInterpreterSpec.scala    |  2 +-
 .../scala/com/cloudera/livy/repl/BaseSessionSpec.scala  |  8 +++++---
 .../com/cloudera/livy/repl/PythonInterpreterSpec.scala  | 17 ++++++++++-------
 .../com/cloudera/livy/repl/PythonSessionSpec.scala      | 12 +++++++-----
 .../com/cloudera/livy/repl/ScalaInterpreterSpec.scala   |  7 ++++---
 .../com/cloudera/livy/repl/SparkRInterpreterSpec.scala  |  7 ++++---
 .../com/cloudera/livy/repl/SparkRSessionSpec.scala      | 13 +++++++------
 .../scala/com/cloudera/livy/repl/SparkSessionSpec.scala | 12 +++++++-----
 .../test/scala/com/cloudera/livy/repl/WebAppSpec.scala  | 17 +++++++++--------
 .../cloudera/livy/server/ApiVersioningSupportSpec.scala |  4 ++--
 .../cloudera/livy/server/batch/BatchServletSpec.scala   |  2 +-
 .../cloudera/livy/server/client/ClientServletSpec.scala |  6 +++---
 .../interactive/InteractiveSessionServletSpec.scala     | 16 ++++++++--------
 .../cloudera/livy/spark/SparkProcessBuilderSpec.scala   |  3 ++-
 .../cloudera/livy/spark/batch/BatchProcessSpec.scala    |  9 +++++----
 .../interactive/InteractiveSessionProcessSpec.scala     |  6 ++++--
 21 files changed, 97 insertions(+), 78 deletions(-)

commit 49b19960ffd2d9b28e332a0670bafeb24f23391d
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Feb 4 10:26:55 2016 -0800

    LIVY-68. Add SPNEGO authentication, basic authorization.
    
    This change adds support for SPNEGO authentication (a.k.a.
    Kerberos) using the hadoop-auth library; it also adds basic
    authorization to SessionServlet, so that only owners of
    sessions can modify them.
    
    The changes to implement the above are kinda small. To see them,
    filter through all the noise by looking at these files directly.
    
    - Main.scala: configure and install the SPNEGO filter.
    - SessionServlet.scala: do authorization checks when performing
      actions on sessions.
    - SessionServletSpec.scala: test suite for the authorization part.
    
    There were minor changes to the batch and interactive servlets to
    use the APIs that do auth checks, instead of the copy & pasted code
    they currently were using.
    
    Everything else is noise needed to plumb the owner info through all
    the different session factories and types...
    
    Closes #60

 .../cloudera/livy/client/http/HttpClientSpec.scala |   2 +-
 .../main/scala/com/cloudera/livy/LivyConf.scala    |   2 +
 .../scala/com/cloudera/livy/sessions/Session.scala |   5 +-
 .../cloudera/livy/sessions/SessionFactory.scala    |   2 +-
 .../cloudera/livy/sessions/SessionManager.scala    |   7 +-
 .../livy/sessions/batch/BatchSession.scala         |   2 +-
 .../sessions/interactive/InteractiveSession.scala  |   4 +-
 .../livy/sessions/SessionManagerSpec.scala         |   9 +-
 pom.xml                                            |   6 +
 server/pom.xml                                     |   4 +-
 .../main/scala/com/cloudera/livy/server/Main.scala |  33 +++++
 .../com/cloudera/livy/server/SessionServlet.scala  | 107 ++++++++++------
 .../livy/server/batch/BatchSessionServlet.scala    |  22 ++--
 .../livy/server/client/ClientSessionServlet.scala  |   3 +-
 .../interactive/InteractiveSessionServlet.scala    | 142 ++++++++++-----------
 .../cloudera/livy/server/BaseJsonServletSpec.scala |  41 ++++--
 .../livy/server/BaseSessionServletSpec.scala       |   6 +-
 .../com/cloudera/livy/server/JsonServletSpec.scala |  10 +-
 .../cloudera/livy/server/SessionServletSpec.scala  | 110 ++++++++++++++++
 .../livy/server/client/ClientServletSpec.scala     |  10 +-
 .../InteractiveSessionServletSpec.scala            |  17 ++-
 .../livy/spark/batch/BatchSessionFactory.scala     |   6 +-
 .../livy/spark/batch/BatchSessionProcess.scala     |   9 +-
 .../spark/batch/BatchSessionProcessFactory.scala   |   4 +-
 .../livy/spark/batch/BatchSessionYarn.scala        |   9 +-
 .../livy/spark/batch/BatchSessionYarnFactory.scala |   4 +-
 .../cloudera/livy/spark/client/ClientSession.scala |  15 +--
 .../livy/spark/client/ClientSessionFactory.scala   |   5 +-
 .../interactive/InteractiveSessionFactory.scala    |   8 +-
 .../interactive/InteractiveSessionProcess.scala    |  21 +--
 .../InteractiveSessionProcessFactory.scala         |   3 +-
 .../spark/interactive/InteractiveSessionYarn.scala |  29 ++---
 .../InteractiveSessionYarnFactory.scala            |  10 +-
 .../spark/interactive/InteractiveWebSession.scala  |  10 +-
 .../livy/spark/batch/BatchProcessSpec.scala        |   2 +-
 .../InteractiveSessionProcessSpec.scala            |   2 +-
 36 files changed, 428 insertions(+), 253 deletions(-)

commit 631ced0aec542ebcffb46cef15b08295291cef8b
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri Feb 5 10:55:08 2016 -0800

    Fix detection of sparkR's location.
    
    It tends to be under SPARK_HOME if it's defined...
    
    Closes #56

 .../livy/repl/sparkr/SparkRInterpreter.scala        | 21 +++++----------------
 1 file changed, 5 insertions(+), 16 deletions(-)

commit 7f16ef6c4e50d8812a5fb8c720ad672fcd7eae6a
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Feb 2 15:04:11 2016 -0800

    LIVY-61. Simplify LivyConf by extending ClientConf.
    
    That reuses a lot of the type conversion logic; also, declare
    some constants in the form of "ConfEntry" objects so that it's
    easier to spot their names and default values.
    
    I also changed the server's Main to use a listener instead of
    a ScalaBootstrap since that allows using the same LivyConf instance,
    instead of having both places initialize the conf object in
    different ways.
    
    Finally, I changed the default value for the "environment" config
    to "production", since well, the default should not be "development".
    The unit tests will set it to "development" explicitly; although it's
    all kinda moot since that's not used anywhere.
    
    Closes #52

 .../cloudera/livy/client/common/ClientConf.java    |  12 ++-
 conf/livy-defaults.conf.template                   |   2 +-
 core/pom.xml                                       |   6 ++
 .../main/scala/com/cloudera/livy/LivyConf.scala    | 100 ++++++++-------------
 core/src/main/scala/com/cloudera/livy/Utils.scala  |  25 ------
 .../main/scala/com/cloudera/livy/WebServer.scala   |   6 +-
 .../cloudera/livy/sessions/SessionManager.scala    |   4 +-
 pom.xml                                            |   2 +
 .../main/scala/com/cloudera/livy/server/Main.scala |  91 +++++++++----------
 .../livy/server/client/ClientSessionServlet.scala  |   4 +-
 .../cloudera/livy/spark/SparkProcessBuilder.scala  |   2 +-
 .../interactive/InteractiveSessionFactory.scala    |   4 +-
 12 files changed, 106 insertions(+), 152 deletions(-)

commit 315f7dee0b26a5dc2e38d82bc35019b2ffdbcf66
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri Jan 29 12:54:58 2016 -0800

    LIVY-53. Implement job cancellation, Spark job monitoring in http client.
    
    These two features were missing from the HTTP client. Some changes
    were made to the local client implementation to send diffs of the
    Spark jobs being monitored back to the client; previously, only the
    first job started by Spark would be reported.
    
    Closes #48

 .../cloudera/livy/client/common/HttpMessages.java  |  8 +-
 .../livy/client/common/TestHttpMessages.java       | 33 ++++++--
 .../com/cloudera/livy/client/http/HttpClient.java  |  5 +-
 .../cloudera/livy/client/http/JobHandleImpl.java   | 88 +++++++++++++++++-----
 .../cloudera/livy/client/http/HttpClientSpec.scala | 53 ++++++++++---
 .../livy/client/local/BypassJobStatus.java         |  8 +-
 .../cloudera/livy/client/local/LocalClient.java    |  2 +-
 .../livy/client/local/driver/BypassJobWrapper.java | 22 +++++-
 .../livy/client/local/driver/JobWrapper.java       |  4 +
 .../livy/client/local/TestSparkClient.java         |  6 ++
 .../livy/server/client/ClientSessionServlet.scala  | 11 ++-
 .../livy/server/client/ClientServletSpec.scala     | 48 +++++++++++-
 .../cloudera/livy/spark/client/ClientSession.scala |  6 +-
 13 files changed, 242 insertions(+), 52 deletions(-)

commit 5d0897e184b89bf5b857a91f0abbbdfb8efe25c6
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Feb 4 12:04:58 2016 -0800

    LIVY-60. Work around Jackson/Scala bug by not using case classes.
    
    Jackson doesn't deal well with Scala case classes; the default values
    tend to be ignored. I tried a few workarounds (such as special constructors
    annotated with @JsonCreator), but those don't always work (same code
    sometimes works and sometimes doesn't - maybe because Scala reflection is
    not thread-safe in 2.10?).
    
    So, the less ugly fix was to make the offending types not case classes.
    The only affected types seem to be the batch and interactive session
    requests, so they were modified to be normal classes with mutable fields.
    I added unit tests to make sure the default values are there when the
    properties are not provided in the JSON payload.
    
    Closes #54

 .../livy/server/batch/BatchServletSpec.scala       |  5 +-
 .../InteractiveSessionServletSpec.scala            |  5 +-
 spark/pom.xml                                      | 11 +++++
 .../livy/spark/batch/BatchSessionFactory.scala     |  1 +
 .../livy/spark/batch/CreateBatchRequest.scala      | 37 ++++++++-------
 .../interactive/CreateInteractiveRequest.scala     | 35 ++++++++------
 .../interactive/InteractiveSessionFactory.scala    |  1 +
 .../livy/spark/batch/BatchProcessSpec.scala        |  5 +-
 .../livy/spark/batch/CreateBatchRequestSpec.scala  | 54 +++++++++++++++++++++
 .../interactive/CreateInteractiveRequestSpec.scala | 55 ++++++++++++++++++++++
 .../InteractiveSessionProcessSpec.scala            |  5 +-
 11 files changed, 176 insertions(+), 38 deletions(-)

commit 6948b1eb333fad77f55be1bf01b801dc071b2985
Author: Alex Man <tc.technetium@gmail.com>
Date:   Fri Jan 15 19:40:21 2016 -0800

    LIVY-15. Added support for API versioning.
    
    - Added a new trait ApiVersioningSupport to provide versioning support for Scalatra Servlet.
    - Added an enum to define Livy's API versions.
    
    Closes #44

 .../livy/server/ApiVersioningSupport.scala         |  94 ++++++++++++++++
 .../com/cloudera/livy/server/ApiVersions.scala     |  36 ++++++
 .../com/cloudera/livy/server/SessionServlet.scala  |   1 +
 .../livy/server/ApiVersioningSupportSpec.scala     | 123 +++++++++++++++++++++
 4 files changed, 254 insertions(+)

commit 1f713a00b9908b0d23ace8d281a271d005eb61bb
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Feb 3 14:42:16 2016 -0800

    Print test output to stdout in Travis runs.
    
    Hopefully can help with debugging flaky tests. Also run the "verify"
    target to run the style checker during builds.
    
    Closes #53

 .travis.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 427457324e3b260b83ee563a6e22396649218f6b
Author: Hari Shreedharan <hshreedharan@apache.org>
Date:   Fri Jan 29 11:33:37 2016 -0800

    Support file/jar upload.
    
    - Modified the servlet to add upload support
    - Add 2 new APIs: `uploadFile` and `uploadJar` which upload the files from the client to Livy
    - Added tests for the client and the servlet.
    
    Closes #46

 .../main/java/com/cloudera/livy/LivyClient.java    | 15 ++++++++
 .../java/com/cloudera/livy/TestClientFactory.java  | 11 ++++++
 client-http/pom.xml                                |  5 +++
 .../com/cloudera/livy/client/http/HttpClient.java  | 20 ++++++++++
 .../cloudera/livy/client/http/LivyConnection.java  | 43 ++++++++++++++++------
 .../cloudera/livy/client/http/HttpClientSpec.scala | 27 ++++++++++++++
 .../cloudera/livy/client/local/LocalClient.java    | 10 +++++
 .../main/scala/com/cloudera/livy/LivyConf.scala    |  3 ++
 .../cloudera/livy/sessions/SessionFactory.scala    |  6 +++
 .../cloudera/livy/sessions/SessionManager.scala    | 16 +++++++-
 pom.xml                                            | 23 +++++++++++-
 .../main/scala/com/cloudera/livy/server/Main.scala |  2 +
 .../livy/server/client/ClientSessionServlet.scala  | 40 ++++++++++++++++++--
 .../cloudera/livy/server/BaseJsonServletSpec.scala |  5 +++
 .../livy/server/BaseSessionServletSpec.scala       |  3 +-
 .../livy/server/client/ClientServletSpec.scala     | 31 ++++++++++++++++
 .../com/cloudera/livy/spark/SparkManager.scala     | 16 +++++++-
 .../livy/spark/batch/BatchSessionYarn.scala        |  2 +-
 .../livy/spark/batch/BatchSessionYarnFactory.scala |  4 +-
 .../cloudera/livy/spark/client/ClientSession.scala | 38 ++++++++++++++++++-
 .../livy/spark/client/ClientSessionFactory.scala   |  6 +--
 .../interactive/InteractiveSessionFactory.scala    |  4 +-
 .../spark/interactive/InteractiveSessionYarn.scala |  6 +--
 .../InteractiveSessionYarnFactory.scala            |  8 ++--
 .../yarn/{Client.scala => LivyYarnClient.scala}    |  6 +--
 25 files changed, 308 insertions(+), 42 deletions(-)

commit deb195e1658a48c331151282dfa71eca6238fb27
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Feb 2 13:32:29 2016 -0800

    Add style checker for copyright header.
    
    Because we have different headers in different modules, some hackery
    is needed to pre-process the style checker configuration. And because
    maven makes it oh so impossible to figure out the root dir of the
    project, this change requires that maven is always executed from the
    top-level project directory (otherwise things will fail).
    
    Closes #51

 api/pom.xml                                        |  4 ++
 checkstyle.xml                                     |  6 +-
 .../livy/client/common/AbstractJobHandle.java      | 15 ++---
 client-local/pom.xml                               |  4 ++
 .../com/cloudera/livy/client/local/LocalConf.java  | 27 ++++----
 pom.xml                                            | 73 +++++++++++++++++++++-
 scalastyle.xml                                     |  6 ++
 .../com/cloudera/livy/spark/SparkProcess.scala     | 18 ++++++
 8 files changed, 129 insertions(+), 24 deletions(-)

commit b4c270680067485ec3c8c7a483ad88f7e35c4619
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Feb 1 20:38:01 2016 -0800

    Add Java and Scala style checkers.
    
    Let's get this out of the way and enforce some style rules during the
    build. The rules are mostly borrowed from Spark, with some very minor
    tweaks.
    
    Most changes are to break long lines and reorder imports; notable exception
    is the renaming of the "scala" repl session package, because some very
    wise person involved in defining Scala decided that relative imports were
    a good idea.
    
    Closes #50

 .../java/com/cloudera/livy/LivyClientBuilder.java  |   2 +-
 .../java/com/cloudera/livy/MetricsCollection.java  |   4 +-
 .../com/cloudera/livy/TestMetricsCollection.java   |   6 +-
 checkstyle-suppressions.xml                        |  23 ++++
 checkstyle.xml                                     | 120 ++++++++++++++++++
 .../com/cloudera/livy/client/http/HttpClient.java  |   2 +-
 .../cloudera/livy/client/http/JobHandleImpl.java   |   2 +-
 .../cloudera/livy/client/http/LivyConnection.java  |   2 +-
 .../cloudera/livy/client/local/BaseProtocol.java   |   2 +-
 .../cloudera/livy/client/local/JobHandleImpl.java  |   8 --
 .../cloudera/livy/client/local/LocalClient.java    |   7 +-
 .../livy/client/local/driver/RemoteDriver.java     |   4 +-
 .../com/cloudera/livy/client/local/rpc/Rpc.java    |   4 +-
 .../cloudera/livy/client/local/rpc/RpcServer.java  |   2 +-
 .../livy/client/local/TestSparkClient.java         |  17 ++-
 .../cloudera/livy/client/local/rpc/TestRpc.java    |   5 +-
 .../com/cloudera/livy/LineBufferedStream.scala     |   2 +-
 .../main/scala/com/cloudera/livy/LivyConf.scala    |  12 +-
 .../src/main/scala/com/cloudera/livy/Logging.scala |  12 +-
 core/src/main/scala/com/cloudera/livy/Utils.scala  |  10 +-
 .../main/scala/com/cloudera/livy/WebServer.scala   |  20 +--
 .../scala/com/cloudera/livy/sessions/Kind.scala    |   6 +-
 .../cloudera/livy/sessions/SessionManager.scala    |   4 +-
 .../com/cloudera/livy/sessions/SessionState.scala  |  36 +++---
 .../sessions/interactive/InteractiveSession.scala  |   8 +-
 .../livy/sessions/interactive/Statement.scala      |  11 +-
 .../livy/sessions/interactive/StatementState.scala |   6 +-
 pom.xml                                            |  51 ++++++++
 .../main/scala/com/cloudera/livy/repl/Main.scala   |  24 ++--
 .../scala/com/cloudera/livy/repl/Session.scala     |  20 +--
 .../main/scala/com/cloudera/livy/repl/WebApp.scala |   9 +-
 .../livy/repl/process/ProcessInterpreter.scala     |  13 +-
 .../livy/repl/python/PythonInterpreter.scala       |  25 ++--
 .../{scala => scalaRepl}/SparkInterpreter.scala    |  26 ++--
 .../livy/repl/sparkr/SparkRInterpreter.scala       |  19 +--
 .../cloudera/livy/repl/ScalaInterpreterSpec.scala  |   2 +-
 .../com/cloudera/livy/repl/SparkSessionSpec.scala  |   2 +-
 scalastyle.xml                                     | 137 +++++++++++++++++++++
 .../main/scala/com/cloudera/livy/server/Main.scala |  35 +++---
 .../com/cloudera/livy/server/SessionServlet.scala  |   2 +-
 .../livy/server/batch/BatchSessionServlet.scala    |   2 +-
 .../interactive/InteractiveSessionServlet.scala    |  11 +-
 .../com/cloudera/livy/spark/SparkManager.scala     |   8 +-
 .../cloudera/livy/spark/SparkProcessBuilder.scala  |  12 +-
 .../livy/spark/SparkProcessBuilderFactory.scala    |   2 +-
 .../livy/spark/SparkUserConfigurableOptions.scala  |   4 +-
 .../livy/spark/batch/BatchSessionFactory.scala     |   5 +-
 .../livy/spark/batch/BatchSessionProcess.scala     |   4 +-
 .../livy/spark/batch/BatchSessionYarn.scala        |  11 +-
 .../livy/spark/batch/BatchSessionYarnFactory.scala |   9 +-
 .../cloudera/livy/spark/client/ClientSession.scala |   2 +-
 .../cloudera/livy/spark/client/SessionCache.scala  |   9 +-
 .../interactive/InteractiveSessionFactory.scala    |  20 +--
 .../interactive/InteractiveSessionProcess.scala    |   6 +-
 .../InteractiveSessionProcessFactory.scala         |   9 +-
 .../spark/interactive/InteractiveSessionYarn.scala |   8 +-
 .../InteractiveSessionYarnFactory.scala            |   8 +-
 .../spark/interactive/InteractiveWebSession.scala  |  26 ++--
 .../com/cloudera/livy/yarn/ApplicationState.scala  |   2 +-
 .../main/scala/com/cloudera/livy/yarn/Client.scala |  12 +-
 .../main/scala/com/cloudera/livy/yarn/Job.scala    |   9 +-
 61 files changed, 630 insertions(+), 251 deletions(-)

commit 1f4c108e5827e3f4e722565045868626070c55bb
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Feb 1 15:31:53 2016 -0800

    Add link to the contributions page of the Wiki.
    
    Closes #49

 README.rst | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d5e84079878dcfd6e10952ec7cb2acca2cc7c895
Author: Alex Man <tc.technetium@gmail.com>
Date:   Tue Jan 12 14:07:22 2016 -0800

    Fixed NoSuchMethodError when livy-repl starts up.
    
    Downgrade json4s from 3.2.11 to 3.2.10. json4s 3.2.11 removed a required API without bumping minor version.
    
    Closes #23

 pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1810f150e4d46da3ce70efc0fb4f82343055c50e
Author: Alex Man <tc.technetium@gmail.com>
Date:   Wed Jan 6 14:43:42 2016 -0800

    Fixed random startup failure.
    
    Sometimes Livy fails to start with error "Unable to determine spark-submit version(0)".
    sparkSubmitVersion() is calling "spark-submit --version" and using LineBufferedProcess to get its console output and parse for the version.
    However, LineBufferedProcess has a race condition where LineBufferedProcess.waitFor() doesn't wait for LineBufferedStream to read everything in console output before returning. Hence sometimes LineBufferedStream will not capture the whole output.
    In this case, Spark-version will be missing in the caputred output and cause the fatal error "Unable to determine spark-submit version(0)".
    
    Added a fix in LineBufferedProcess.waitFor() to wait for LineBufferedStream to read everything before returning.

 core/src/main/scala/com/cloudera/livy/LineBufferedProcess.scala | 5 ++++-
 core/src/main/scala/com/cloudera/livy/LineBufferedStream.scala  | 2 ++
 2 files changed, 6 insertions(+), 1 deletion(-)

commit f825047dc6161d55c7a01c8ddb54cce4057a4d0c
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Jan 20 21:22:38 2016 -0800

    Replace JsonSupport with a Jackson-based servlet.
    
    I don't like json4s; it makes it hard to work with proper types,
    and it doesn't understand Java types. This change replaces Scalatra's
    JsonSupport, which is based on json4s, with a new 'JsonServlet', which
    is based on Jackson.
    
    The new servlet provides routing methods that give the handlers access
    to the deserialized type directly, without the need to interact with
    Jackson at all; just define the expected type and the servlet handles
    the rest.
    
    A corresponding base test class was added to help with writing tests
    for these new methods.
    
    As for the existing code, a few changes had to be made:
    
    - The session class hierarchy had to be modified to take a new
      type argument (the Scala/Java type of the request object, so
      that SessionServlet can automatically deserialize it). Methods
      that depended on json4s APIs were modified accordingly.
    
    - The custom serializer for Kind was converted to a Jackson module.
    
    - The json4s Jackson module is still used by the interactive session
      servlet; I added a new unit tests to make sure it's doing what I
      hope is the right thing, but given the previous complete lack of
      tests for that part of the code, it's hard to tell.
    
    In the process, the hacks to be able to use Java types in the client
    session backend were completely removed.

 .../cloudera/livy/client/http/HttpClientSpec.scala |  28 ++---
 core/pom.xml                                       |  10 ++
 .../scala/com/cloudera/livy/sessions/Kind.scala    |  33 +++--
 .../cloudera/livy/sessions/SessionFactory.scala    |   8 +-
 .../cloudera/livy/sessions/SessionManager.scala    |   5 +-
 .../livy/sessions/SessionManagerSpec.scala         |   4 +-
 .../com/cloudera/livy/server/JsonServlet.scala     | 129 +++++++++++++++++++
 .../com/cloudera/livy/server/SessionServlet.scala  |  61 +++++----
 .../livy/server/batch/BatchSessionServlet.scala    |  50 ++------
 .../livy/server/client/ClientSessionServlet.scala  |  77 ++----------
 .../interactive/InteractiveSessionServlet.scala    | 138 ++++++---------------
 .../cloudera/livy/server/BaseJsonServletSpec.scala |  88 +++++++++++++
 .../livy/server/BaseSessionServletSpec.scala       |  41 ++----
 .../com/cloudera/livy/server/JsonServletSpec.scala | 132 ++++++++++++++++++++
 .../livy/server/batch/BatchServletSpec.scala       |  31 ++---
 .../livy/server/client/ClientServletSpec.scala     |  44 +++----
 .../InteractiveSessionServletSpec.scala            |  35 +++---
 .../com/cloudera/livy/spark/SparkManager.scala     |   8 +-
 .../livy/spark/batch/BatchSessionFactory.scala     |   5 +-
 .../livy/spark/client/ClientSessionFactory.scala   |  10 +-
 .../interactive/InteractiveSessionFactory.scala    |  10 +-
 21 files changed, 564 insertions(+), 383 deletions(-)

commit 6ff1188acf5571677dde46cad2f972833c44990e
Author: Alex Man <tc.technetium@gmail.com>
Date:   Thu Jan 28 16:53:02 2016 -0800

    Fixed server and repl to quit if they fail to bind ports.
    
    server.start() will throw an exception when it fails to bind port. It also starts some non-daemon thread even if it throws.
    Without calling server.stop(), those non-daemon threads will block JVM shutdown.

 repl/src/main/scala/com/cloudera/livy/repl/Main.scala     | 6 +++---
 server/src/main/scala/com/cloudera/livy/server/Main.scala | 7 ++++---
 2 files changed, 7 insertions(+), 6 deletions(-)

commit 237bda27388d22b70bf2879aaffbb50a6f5b5ba1
Author: Alex Man <tc.technetium@gmail.com>
Date:   Mon Jan 25 19:24:18 2016 -0800

    Added error handling for startup timeout in repl.
    
    Before this fix, if repl didn't transit from STARTING to another state within 30 seconds, session.waitForStateChange() will throw a TimeoutException. Thus repl will not call server's callback. The exception is swallowed by ExecutionService as it's in a Future. repl will keep running.
    As server's callback wasn't called, and repl's YARN process is in RUNNING state, the session is stuck in "STARTING" state on server. If user attempts to delete the session, server would stuck.
    
    With this fix, if repl startup times out, repl will quit with a non zero exit code. YARN will restart repl. If all restart attempts fail, repl's YARN state will transit to FAILED. server will see that and delete won't stuck.
    
    Closes #45

 .../main/scala/com/cloudera/livy/repl/Main.scala   | 33 +++++++++++++---------
 1 file changed, 20 insertions(+), 13 deletions(-)

commit 20f8aea3db092749299fb9c2895c4f07b13be5f1
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Jan 26 11:28:09 2016 -0800

    Fix packaging, REPL.
    
    After some directory renaming, the final package was missing some jars.
    Also, the REPL was not working after changes were made to stop using
    fat jars.
    
    To fix the REPL, I'm using a similar approach to that used by the local
    client: copy the needed REPL jars to a repl-specific directory, and add
    all jars to the Spark application using "--jars". The list of jars can
    be configured so that they can point at cached locations (e.g. local: or
    hdfs:).
    
    Since setup-classpath was not useful for the livy-repl script, I inlined
    it into livy-server; in fact, the livy-repl script is not used anywhere,
    so maybe we could remove it.

 assembly/assembly.xml                              |  9 +++++-
 assembly/pom.xml                                   |  6 ----
 bin/livy-repl                                      | 13 ++++++--
 bin/livy-server                                    | 11 ++++++-
 bin/setup-classpath                                | 28 ----------------
 core/pom.xml                                       |  6 ----
 core/src/main/scala/com/cloudera/livy/Utils.scala  | 14 --------
 repl/pom.xml                                       | 35 ++++++++++++++++++++
 spark/pom.xml                                      |  6 ++++
 .../cloudera/livy/spark/SparkProcessBuilder.scala  |  4 +--
 .../livy/spark/batch/BatchSessionFactory.scala     |  2 +-
 .../interactive/InteractiveSessionFactory.scala    | 37 ++++++++++++++--------
 .../InteractiveSessionProcessSpec.scala            |  1 +
 13 files changed, 98 insertions(+), 74 deletions(-)

commit 35b96d092b47c7d31078892dc64bde18e811b63d
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Jan 25 15:25:59 2016 -0800

    Automatically load default configuration from the classpath.
    
    To make it easier to manage client configurations, allow LivyClientBuilder
    to load configuration from files present in the classpath, mimicking what
    other Hadoop APIs also do. The class will look for two files (livy-client.conf
    and spark-defaults.conf) and load their contents if they're present.
    
    On the server side, the ClientSession implementation was changed to
    use this instead of trying to load Spark configuration from the system
    properties. This should allow server-specific defaults to be configured
    while allowing clients to override individual configs using the
    session create request.
    
    In the client-local implementation, I broke Spark and Livy configurations
    into two separate files, to (arguably) simplify the code a bit. This is
    not strictly related to the client configs change; but I also changed the
    fact that client-local was loading spark-defaults.conf on its own, and
    that's not needed anymore.

 .../java/com/cloudera/livy/LivyClientBuilder.java  |  84 +++++++++++++----
 .../com/cloudera/livy/TestLivyClientBuilder.java   |  18 ++--
 api/src/test/resources/livy-client.conf            |   2 +
 api/src/test/resources/spark-defaults.conf         |   1 +
 .../cloudera/livy/client/http/HttpClientSpec.scala |   2 +-
 .../cloudera/livy/client/local/LocalClient.java    | 100 +++++++++------------
 .../com/cloudera/livy/client/local/LocalConf.java  |   8 +-
 .../livy/client/local/driver/RemoteDriver.java     |  40 ++++++---
 .../livy/client/local/TestSparkClient.java         |   2 +-
 .../livy/server/client/ClientServletSpec.scala     |   2 +-
 .../cloudera/livy/spark/client/ClientSession.scala |   9 +-
 11 files changed, 161 insertions(+), 107 deletions(-)

commit 75bc8a879376ed1163198cc024714c8bf2dbaaab
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Jan 13 11:39:16 2016 -0800

    An HTTP client for Livy Client sessions.
    
    The HTTP client talks to the client servlet in the Livy server
    to control client sessions. The library tries to keep a single
    connection to the server, and implements a background polling
    mechanism to fetch data from the server while implementing the
    asynchronous interface of the Livy API.

 .gitignore                                         |   1 +
 client-http/pom.xml                                | 106 ++++++++++
 .../com/cloudera/livy/client/http/HttpClient.java  | 156 ++++++++++++++
 .../livy/client/http/HttpClientFactory.java        |  41 ++++
 .../com/cloudera/livy/client/http/HttpConf.java    |  56 +++++
 .../cloudera/livy/client/http/JobHandleImpl.java   | 233 +++++++++++++++++++++
 .../cloudera/livy/client/http/LivyConnection.java  | 148 +++++++++++++
 .../services/com.cloudera.livy.LivyClientFactory   |   1 +
 client-http/src/test/resources/log4j.properties    |  37 ++++
 .../cloudera/livy/client/http/HttpClientSpec.scala | 225 ++++++++++++++++++++
 10 files changed, 1004 insertions(+)

commit 17a66c4c995f380c7c6aef252ed4ece92a200875
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Jan 19 17:02:52 2016 -0800

    Code refactor in preparation for HTTP-based client.
    
    This change includes three different refactorings that will help with
    the implementation of the HTTP client for Livy.
    
    - Move declarations of messages expected by the client servlet into
      the client-common package.
    
    This is probably the nastiest change, not because it's controvertial,
    but because json4s, which is used heavily by Scalatra, completely
    ignores Java types, and in fact has serious issues with them. So a few
    hacks are needed on the livy-server module to work around limitations of
    json4s. I'd really prefer an alternate API where json4s was completely
    bypassed, but that will be left for another day.
    
    As part of that, a few messages were slightly modified or merged with
    others, to simplify the handling of the on-the-wire types.
    
    - Move shared code in JobHandleImpl into an abstract class.
    
    A lot of that class needs to be replicated in the HTTP client, so the
    parts that could be shared now live in an abstract class in client-common.
    
    - Slight changes to the poms to automatically include scala testing code.
    
    For reasons that will be clear later, the tests for the HTTP client are
    written in Scala, even though the library is in Java. The changes in the
    poms make more of the boilerplate test setup code shared in the root pom.

 api/src/main/java/com/cloudera/livy/JobHandle.java |   6 -
 client-common/pom.xml                              |   5 +
 .../livy/client/common/AbstractJobHandle.java      | 150 +++++++++++++++++++++
 .../cloudera/livy/client/common/HttpMessages.java  | 131 ++++++++++++++++++
 .../livy/client/common/TestHttpMessages.java       | 100 ++++++++++++++
 .../cloudera/livy/client/local/JobHandleImpl.java  | 121 +----------------
 .../livy/client/local/driver/BypassJobWrapper.java |   8 +-
 .../cloudera/livy/client/local/TestJobHandle.java  |   4 +-
 core/pom.xml                                       |   6 -
 pom.xml                                            |  29 ++--
 repl/pom.xml                                       |  13 --
 server/pom.xml                                     |  12 --
 .../com/cloudera/livy/server/SessionServlet.scala  |   2 +-
 .../livy/server/batch/BatchSessionServlet.scala    |   2 +-
 .../livy/server/client/ClientSessionServlet.scala  |  74 ++++++++--
 .../interactive/InteractiveSessionServlet.scala    |   2 +-
 .../livy/server/BaseSessionServletSpec.scala       |   2 +-
 .../livy/server/batch/BatchServletSpec.scala       |   3 +
 .../livy/server/client/ClientServletSpec.scala     |  34 +++--
 .../InteractiveSessionServletSpec.scala            |   4 +-
 spark/pom.xml                                      |   7 -
 .../cloudera/livy/spark/client/ClientMessage.scala |  44 ------
 .../cloudera/livy/spark/client/ClientSession.scala |  18 +--
 .../livy/spark/client/ClientSessionFactory.scala   |  14 +-
 24 files changed, 521 insertions(+), 270 deletions(-)

commit 47c64a0032324af8ae69ffb4cdeff70dffbcdaa1
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Jan 13 15:09:57 2016 -0800

    Add helper class for config data, clean up unused public API.
    
    I'll need something like LocalConf for the HTTP client also, so
    break the useful parts into an abstract class and modify LocalConf
    to inherit from it; the new class does not inherit from Hadoop's
    Configuration, so some code needed to be reimplemented.
    
    Also removed "clientId()" from the public API since that is not
    really important for users. At least not now.

 .../main/java/com/cloudera/livy/LivyClient.java    |   2 -
 .../java/com/cloudera/livy/TestClientFactory.java  |   5 -
 .../cloudera/livy/client/common/ClientConf.java    | 186 +++++++++++++++++++++
 .../livy/client/common/TestClientConf.java         |  88 ++++++++++
 .../cloudera/livy/client/local/LocalClient.java    |  14 +-
 .../com/cloudera/livy/client/local/LocalConf.java  |  99 ++---------
 .../livy/client/local/driver/RemoteDriver.java     |   4 +-
 .../livy/client/local/rpc/SaslHandler.java         |   2 +-
 .../livy/client/local/TestSparkClient.java         |   4 +-
 .../cloudera/livy/client/local/rpc/TestRpc.java    |   2 +-
 .../cloudera/livy/spark/client/SessionCache.scala  |   2 +-
 11 files changed, 299 insertions(+), 109 deletions(-)

commit 3564ce75ce110d92079f0d93222d19e4d66dadab
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Jan 12 18:05:15 2016 -0800

    Implement client methods to retrieve job status, results.
    
    Use the new APIs in the local-client module to fetch job status and
    send results back to the requester. A lot of the changes here are
    cleanup so that code doesn't need to be repeated all the time.

 .../com/cloudera/livy/server/SessionServlet.scala  | 28 ++++++++++--
 .../livy/server/client/ClientSessionServlet.scala  | 53 +++++++++-------------
 .../livy/server/client/ClientServletSpec.scala     | 40 ++++++++++------
 .../cloudera/livy/spark/client/ClientMessage.scala | 14 ++----
 .../cloudera/livy/spark/client/ClientSession.scala | 26 +++++++----
 5 files changed, 93 insertions(+), 68 deletions(-)

commit 4218a47a7cdacfc9684f713a72aac9278e66ed71
Author: Hari Shreedharan <hshreedharan@apache.org>
Date:   Fri Jan 15 14:17:32 2016 -0800

    Garbage collect sessions on timeout. Stop LocalClient on session timeouts.

 .../main/scala/com/cloudera/livy/LivyConf.scala    |  3 +
 .../scala/com/cloudera/livy/sessions/Session.scala | 13 +++-
 .../cloudera/livy/sessions/SessionManager.scala    |  9 ++-
 .../com/cloudera/livy/sessions/SessionState.scala  |  6 +-
 .../scala/com/cloudera/livy/repl/Session.scala     |  2 +-
 .../cloudera/livy/spark/client/ClientSession.scala | 52 +++++++------
 .../livy/spark/client/SessionClientTracker.scala   | 90 ----------------------
 .../spark/interactive/InteractiveWebSession.scala  |  9 +--
 8 files changed, 56 insertions(+), 128 deletions(-)

commit 53c21e4afb25626ee42b3d5ae8d622d9f7261b03
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Jan 14 11:46:14 2016 -0800

    Fix process leak in interactive session test.
    
    The session could be in an error state with the underlying process
    still alive; need to explicitly kill the process in that case, so
    that it doesn't linger around.

 .../com/cloudera/livy/sessions/BaseInteractiveSessionSpec.scala   | 2 +-
 .../cloudera/livy/spark/interactive/InteractiveWebSession.scala   | 8 +++++++-
 .../livy/spark/interactive/InteractiveSessionProcessSpec.scala    | 6 +-----
 3 files changed, 9 insertions(+), 7 deletions(-)

commit 1bcc6df4a4506c2feb17dd8c66646c4270a5298c
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Jan 14 10:56:44 2016 -0800

    Fix license headers.
    
    Everything but the code under api/ and client-local/ is Cloudera code,
    so should have a Cloudera header, not the ASF one. Code from those two
    modules comes primarily from Hive, so should retain the ASF headers.
    
    I also removed a few files that were not used.

 api/pom.xml                                        |  3 +-
 assembly/pom.xml                                   | 17 ++++++++
 client-common/pom.xml                              | 18 ++++----
 .../cloudera/livy/client/common/BufferUtils.java   | 15 ++++---
 .../cloudera/livy/client/common/Serializer.java    | 15 ++++---
 .../livy/client/common/TestSerializer.java         | 15 ++++---
 client-http/pom.xml                                | 18 ++++----
 conf/log4j.properties                              | 17 ++++++++
 core/pom.xml                                       | 17 ++++++++
 dist.xml                                           | 37 ----------------
 pom.xml                                            | 30 ++++++-------
 repl/pom.xml                                       | 17 ++++++++
 repl/src/test/resources/log4j.properties           | 15 ++++---
 server/pom.xml                                     | 30 ++++++-------
 .../livy/server/client/ClientSessionServlet.scala  | 16 ++++---
 server/src/test/resources/log4j.properties         | 15 ++++---
 spark/pom.xml                                      | 30 ++++++-------
 .../cloudera/livy/spark/client/ClientMessage.scala | 16 ++++---
 .../cloudera/livy/spark/client/ClientSession.scala | 16 ++++---
 .../livy/spark/client/ClientSessionFactory.scala   | 16 ++++---
 .../cloudera/livy/spark/client/SessionCache.scala  | 16 ++++---
 .../livy/spark/client/SessionClientTracker.scala   | 18 ++++----
 spark/src/test/resources/log4j.properties          | 15 ++++---
 yarn/pom.xml                                       | 17 ++++++++
 yarn/src/main/assembly/dist.xml                    | 51 ----------------------
 yarn/src/main/bash/run-am.sh                       | 21 ---------
 yarn/src/main/bash/run-class.sh                    | 40 -----------------
 yarn/src/main/bash/run-job.sh                      | 19 --------
 28 files changed, 251 insertions(+), 319 deletions(-)

commit c26417c1b6639fbf6c6ae8e1ddeda4db1d6e0880
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Jan 11 16:33:44 2016 -0800

    Modify bypass jobs to use polling to fetch status.
    
    Right now, bypass jobs work like normal jobs; they return data to the
    client as they make progress, and return the results at the end.
    
    When the client in the picture is the Livy server, that's not desirable.
    That means that the Livy server would have to store all data generated
    by client jobs until the client decides to poll for it; meaning that jobs
    could consume lots of memory on the Livy server just by returning a lot
    of data.
    
    This change modifies the local client, where the bypass API is implemented,
    to store job data in the driver process until it's polled by the client.
    This means no data about a job is transferred back to the client until
    the client explicitly asks for it. So in Livy's case, instead of a job
    consuming memory in the server process, it would do so in the driver
    process, which is owned by the user, and wouldn't affect other users.
    
    Note this change does not implement an API for the data to be retrived
    through the Livy server's servlet yet; that will be added separately.

 .../cloudera/livy/client/local/BaseProtocol.java   | 34 ++++----
 .../livy/client/local/BypassJobStatus.java         | 46 +++++++++++
 .../cloudera/livy/client/local/LocalClient.java    | 43 +++++-----
 .../livy/client/local/driver/BypassJobWrapper.java | 93 ++++++++++++++++++++++
 .../livy/client/local/driver/DriverProtocol.java   | 81 +++++++++++++------
 .../livy/client/local/driver/JobWrapper.java       | 28 +++++--
 .../livy/client/local/driver/RemoteDriver.java     |  8 +-
 .../livy/client/local/TestSparkClient.java         | 69 +++++++++++-----
 .../cloudera/livy/spark/client/ClientSession.scala | 39 +++++----
 9 files changed, 326 insertions(+), 115 deletions(-)

commit a3df5821e6e3713b2a9dd63b91915c532656f8bf
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Jan 13 10:25:01 2016 -0800

    LIVY-42. Generate assembly in zip format.
    
    Hopefully fixes #20.

 assembly/pom.xml | 3 +++
 1 file changed, 3 insertions(+)

commit 35c9541b8f6ea50773061f89fe67f80ae40ce1dd
Author: Hari Shreedharan <hshreedharan@apache.org>
Date:   Fri Dec 11 23:49:57 2015 +0530

    Add servlet to handle livy client sessions.
    
    This is not complete; it allows creating / tearing down sessions and
    submitting synchronous / asynchronous jobs, but there's currently no
    way to retrieve a job's results (or even monitoring it's state, since
    the backend code for that is not implemented).
    
    Also includes a new base test class for the servlets that does away
    with a lot of copy & paste.

 .../java/com/cloudera/livy/LivyClientBuilder.java  |   7 ++
 .../cloudera/livy/client/local/LocalClient.java    |   2 +-
 .../com/cloudera/livy/server/SessionServlet.scala  |   2 +-
 .../livy/server/client/ClientSessionServlet.scala  |  91 ++++++++++++++++++
 .../livy/server/BaseSessionServletSpec.scala       |  77 +++++++++++++++
 .../livy/server/batch/BatchServletSpec.scala       |  89 ++++++-----------
 .../livy/server/client/ClientServletSpec.scala     | 105 +++++++++++++++++++++
 .../InteractiveSessionServletSpec.scala            |  68 +++++--------
 ...eateClientRequest.scala => ClientMessage.scala} |  29 +++++-
 .../cloudera/livy/spark/client/ClientSession.scala |  61 +++++++++++-
 .../livy/spark/client/SessionClientTracker.scala   |   2 +-
 11 files changed, 416 insertions(+), 117 deletions(-)

commit d29892122ee5a54e33a1d7a85831157218c64d27
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Jan 11 14:27:17 2016 -0800

    Break RemoteDriver into multiple source files.
    
    RemoteDriver was kind of a mess, and because I'll need to add more features
    to it, was becoming harder and harder to change. This change breaks the file
    into multiple sources, which doesn't necessarily makes it easier to understand,
    but at least makes it easier to add new things and eventually do a proper
    cleanup.

 .../cloudera/livy/client/local/BaseProtocol.java   |  76 +--
 .../cloudera/livy/client/local/LocalClient.java    |   1 +
 .../com/cloudera/livy/client/local/LocalConf.java  |   2 +-
 .../cloudera/livy/client/local/RemoteDriver.java   | 521 ---------------------
 .../livy/client/local/driver/BypassJob.java        |  51 ++
 .../livy/client/local/driver/DriverProtocol.java   | 133 ++++++
 .../client/local/driver/DriverSparkListener.java   | 103 ++++
 .../client/local/{ => driver}/JobContextImpl.java  |   2 +-
 .../livy/client/local/driver/JobWrapper.java       | 133 ++++++
 .../client/local/{ => driver}/MonitorCallback.java |   2 +-
 .../livy/client/local/driver/RemoteDriver.java     | 236 ++++++++++
 11 files changed, 698 insertions(+), 562 deletions(-)

commit b7a8efe5bc3a52900b1490d022712b93f955d860
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Jan 6 13:07:49 2016 -0800

    Add support to bypass pre-serialized jobs in client-local.
    
    To implement the HTTP-based protocol for Spark client API, the
    Livy server needs to be able to bypass data serialized in the
    client to the remote driver, without trying to deserialize it
    in the process, because it doesn't have the necessary client
    classes to do that.
    
    This change adds a private api in client-local and some shared
    helper code to implement this bypass; the remote driver will
    deserialize these jobs as part of executing them. The code
    running inside the Livy server becomes a dumb bypass for the
    job and its result.
    
    - Removed "Serializable" from API, since it only adds noise when
      using Kryo.
    - Added a "client-common" package with shared serde code to implement
      bypass jobs.
    - Added "private" API to client-local to send already serialized jobs
      to the remote context.

 api/pom.xml                                        |  5 --
 api/src/main/java/com/cloudera/livy/Job.java       |  2 +-
 api/src/main/java/com/cloudera/livy/JobHandle.java |  5 +-
 .../main/java/com/cloudera/livy/LivyClient.java    |  5 +-
 .../com/cloudera/livy/metrics/InputMetrics.java    |  4 +-
 .../java/com/cloudera/livy/metrics/Metrics.java    |  4 +-
 .../cloudera/livy/metrics/ShuffleReadMetrics.java  |  4 +-
 .../cloudera/livy/metrics/ShuffleWriteMetrics.java |  4 +-
 .../java/com/cloudera/livy/TestClientFactory.java  |  5 +-
 client-common/pom.xml                              | 44 +++++++++++
 .../cloudera/livy/client/common/BufferUtils.java   | 42 ++++++++++
 .../cloudera/livy/client/common/Serializer.java    | 83 ++++++++++++++++++++
 .../livy/client/common/TestSerializer.java         | 67 ++++++++++++++++
 client-local/pom.xml                               | 14 ++--
 .../cloudera/livy/client/local/BaseProtocol.java   | 50 +++++++++---
 .../cloudera/livy/client/local/JobHandleImpl.java  |  3 +-
 .../cloudera/livy/client/local/LocalClient.java    | 82 +++++++++++---------
 .../cloudera/livy/client/local/RemoteDriver.java   | 81 +++++++++++++++----
 .../livy/client/local/rpc/KryoMessageCodec.java    | 90 ++++++++++------------
 .../com/cloudera/livy/client/local/rpc/README.md   |  1 -
 .../cloudera/livy/client/local/TestJobHandle.java  | 18 ++---
 .../livy/client/local/TestSparkClient.java         | 35 ++++++++-
 pom.xml                                            | 31 ++++----
 23 files changed, 501 insertions(+), 178 deletions(-)

commit dd57f03963e1b2fd364c41955fcffffb9d033d93
Author: Kostas Sakellis <kostas@cloudera.com>
Date:   Fri Dec 18 13:39:41 2015 -0800

    Removed all the livy prefixes from directories
    
    It seemed redundant to have the livy prefixes
    on all the directories. We are still keeping
    the livy- prefix for the jar files.

 {livy-api => api}/pom.xml                              |  0
 .../src/main/java/com/cloudera/livy/Job.java           |  0
 .../src/main/java/com/cloudera/livy/JobContext.java    |  0
 .../src/main/java/com/cloudera/livy/JobHandle.java     |  0
 .../src/main/java/com/cloudera/livy/LivyClient.java    |  0
 .../main/java/com/cloudera/livy/LivyClientBuilder.java |  0
 .../main/java/com/cloudera/livy/LivyClientFactory.java |  0
 .../main/java/com/cloudera/livy/MetricsCollection.java |  0
 .../java/com/cloudera/livy/annotations/Private.java    |  0
 .../java/com/cloudera/livy/metrics/DataReadMethod.java |  0
 .../java/com/cloudera/livy/metrics/InputMetrics.java   |  0
 .../main/java/com/cloudera/livy/metrics/Metrics.java   |  0
 .../com/cloudera/livy/metrics/ShuffleReadMetrics.java  |  0
 .../com/cloudera/livy/metrics/ShuffleWriteMetrics.java |  0
 .../test/java/com/cloudera/livy/TestClientFactory.java |  0
 .../java/com/cloudera/livy/TestLivyClientBuilder.java  |  0
 .../java/com/cloudera/livy/TestMetricsCollection.java  |  0
 .../services/com.cloudera.livy.LivyClientFactory       |  0
 {livy-assembly => assembly}/assembly.xml               |  0
 {livy-assembly => assembly}/pom.xml                    |  0
 bin/setup-classpath                                    |  2 +-
 {livy-client-http => client-http}/pom.xml              |  0
 {livy-client-local => client-local}/pom.xml            |  0
 .../com/cloudera/livy/client/local/BaseProtocol.java   |  0
 .../com/cloudera/livy/client/local/JobContextImpl.java |  0
 .../com/cloudera/livy/client/local/JobHandleImpl.java  |  0
 .../com/cloudera/livy/client/local/LocalClient.java    |  0
 .../cloudera/livy/client/local/LocalClientFactory.java |  0
 .../java/com/cloudera/livy/client/local/LocalConf.java |  0
 .../cloudera/livy/client/local/MonitorCallback.java    |  0
 .../com/cloudera/livy/client/local/RemoteDriver.java   |  0
 .../livy/client/local/rpc/KryoMessageCodec.java        |  0
 .../java/com/cloudera/livy/client/local/rpc/README.md  |  0
 .../java/com/cloudera/livy/client/local/rpc/Rpc.java   |  0
 .../cloudera/livy/client/local/rpc/RpcDispatcher.java  |  0
 .../cloudera/livy/client/local/rpc/RpcException.java   |  0
 .../com/cloudera/livy/client/local/rpc/RpcServer.java  |  0
 .../cloudera/livy/client/local/rpc/SaslHandler.java    |  0
 .../services/com.cloudera.livy.LivyClientFactory       |  0
 .../com/cloudera/livy/client/local/TestJobHandle.java  |  0
 .../cloudera/livy/client/local/TestSparkClient.java    |  0
 .../livy/client/local/rpc/TestKryoMessageCodec.java    |  0
 .../com/cloudera/livy/client/local/rpc/TestRpc.java    |  0
 .../src/test/resources/log4j.properties                |  0
 .../src/test/resources/testweet.json                   |  0
 {livy-core => core}/pom.xml                            |  0
 .../scala/com/cloudera/livy/LineBufferedProcess.scala  |  0
 .../scala/com/cloudera/livy/LineBufferedStream.scala   |  0
 .../src/main/scala/com/cloudera/livy/LivyConf.scala    |  0
 .../src/main/scala/com/cloudera/livy/Logging.scala     |  0
 .../src/main/scala/com/cloudera/livy/Utils.scala       |  0
 .../src/main/scala/com/cloudera/livy/WebServer.scala   |  0
 .../src/main/scala/com/cloudera/livy/msgs.scala        |  0
 .../main/scala/com/cloudera/livy/sessions/Kind.scala   |  0
 .../scala/com/cloudera/livy/sessions/Session.scala     |  0
 .../com/cloudera/livy/sessions/SessionFactory.scala    |  0
 .../com/cloudera/livy/sessions/SessionManager.scala    |  0
 .../com/cloudera/livy/sessions/SessionState.scala      |  0
 .../cloudera/livy/sessions/batch/BatchSession.scala    |  0
 .../livy/sessions/interactive/InteractiveSession.scala |  0
 .../cloudera/livy/sessions/interactive/Statement.scala |  0
 .../livy/sessions/interactive/StatementState.scala     |  0
 .../livy/sessions/BaseInteractiveSessionSpec.scala     |  0
 .../cloudera/livy/sessions/SessionManagerSpec.scala    |  0
 .../livy/sessions/interactive/StatementSpec.scala      |  0
 pom.xml                                                | 18 +++++++++---------
 {livy-repl => repl}/pom.xml                            |  0
 {livy-repl => repl}/src/main/resources/fake_R.sh       |  0
 {livy-repl => repl}/src/main/resources/fake_pyspark.sh |  0
 {livy-repl => repl}/src/main/resources/fake_shell.py   |  0
 .../src/main/resources/logback-access.xml              |  0
 {livy-repl => repl}/src/main/resources/logback.xml     |  0
 .../scala/com/cloudera/livy/repl/Interpreter.scala     |  0
 .../src/main/scala/com/cloudera/livy/repl/Main.scala   |  0
 .../main/scala/com/cloudera/livy/repl/Session.scala    |  0
 .../src/main/scala/com/cloudera/livy/repl/WebApp.scala |  0
 .../main/scala/com/cloudera/livy/repl/package.scala    |  0
 .../livy/repl/process/ProcessInterpreter.scala         |  0
 .../cloudera/livy/repl/python/PythonInterpreter.scala  |  0
 .../cloudera/livy/repl/scala/SparkInterpreter.scala    |  0
 .../cloudera/livy/repl/sparkr/SparkRInterpreter.scala  |  0
 .../src/test/resources/log4j.properties                |  0
 .../com/cloudera/livy/repl/BaseInterpreterSpec.scala   |  0
 .../scala/com/cloudera/livy/repl/BaseSessionSpec.scala |  0
 .../com/cloudera/livy/repl/PythonInterpreterSpec.scala |  0
 .../com/cloudera/livy/repl/PythonSessionSpec.scala     |  0
 .../com/cloudera/livy/repl/ScalaInterpreterSpec.scala  |  0
 .../com/cloudera/livy/repl/SparkRInterpreterSpec.scala |  0
 .../com/cloudera/livy/repl/SparkRSessionSpec.scala     |  0
 .../com/cloudera/livy/repl/SparkSessionSpec.scala      |  0
 .../test/scala/com/cloudera/livy/repl/WebAppSpec.scala |  0
 {livy-server => server}/pom.xml                        |  0
 .../src/main/resources/logback-access.xml              |  0
 {livy-server => server}/src/main/resources/logback.xml |  0
 .../src/main/scala/com/cloudera/livy/server/Main.scala |  0
 .../com/cloudera/livy/server/SessionServlet.scala      |  0
 .../livy/server/batch/BatchSessionServlet.scala        |  0
 .../server/interactive/InteractiveSessionServlet.scala |  0
 .../src/test/resources/log4j.properties                |  0
 .../cloudera/livy/server/batch/BatchServletSpec.scala  |  0
 .../interactive/InteractiveSessionServletSpec.scala    |  0
 {livy-spark => spark}/pom.xml                          |  0
 .../spark/default-spark-user-configurable-options.conf |  0
 .../cloudera/livy/spark/ConfigOptionNotAllowed.scala   |  0
 .../scala/com/cloudera/livy/spark/SparkManager.scala   |  0
 .../scala/com/cloudera/livy/spark/SparkProcess.scala   |  0
 .../com/cloudera/livy/spark/SparkProcessBuilder.scala  |  0
 .../livy/spark/SparkProcessBuilderFactory.scala        |  0
 .../livy/spark/SparkUserConfigurableOptions.scala      |  0
 .../livy/spark/batch/BatchSessionFactory.scala         |  0
 .../livy/spark/batch/BatchSessionProcess.scala         |  0
 .../livy/spark/batch/BatchSessionProcessFactory.scala  |  0
 .../cloudera/livy/spark/batch/BatchSessionYarn.scala   |  0
 .../livy/spark/batch/BatchSessionYarnFactory.scala     |  0
 .../cloudera/livy/spark/batch/CreateBatchRequest.scala |  0
 .../com/cloudera/livy/spark/client/ClientSession.scala |  0
 .../livy/spark/client/ClientSessionFactory.scala       |  0
 .../livy/spark/client/CreateClientRequest.scala        |  0
 .../com/cloudera/livy/spark/client/SessionCache.scala  |  0
 .../livy/spark/client/SessionClientTracker.scala       |  0
 .../spark/interactive/CreateInteractiveRequest.scala   |  0
 .../spark/interactive/InteractiveSessionFactory.scala  |  0
 .../spark/interactive/InteractiveSessionProcess.scala  |  0
 .../interactive/InteractiveSessionProcessFactory.scala |  0
 .../spark/interactive/InteractiveSessionYarn.scala     |  0
 .../interactive/InteractiveSessionYarnFactory.scala    |  0
 .../livy/spark/interactive/InteractiveWebSession.scala |  0
 .../src/test/resources/log4j.properties                |  0
 .../cloudera/livy/spark/SparkProcessBuilderSpec.scala  |  0
 .../cloudera/livy/spark/batch/BatchProcessSpec.scala   |  0
 .../interactive/InteractiveSessionProcessSpec.scala    |  0
 {livy-yarn => yarn}/pom.xml                            |  0
 {livy-yarn => yarn}/src/main/assembly/dist.xml         |  0
 {livy-yarn => yarn}/src/main/bash/run-am.sh            |  0
 {livy-yarn => yarn}/src/main/bash/run-class.sh         |  0
 {livy-yarn => yarn}/src/main/bash/run-job.sh           |  0
 {livy-yarn => yarn}/src/main/resources/logback.xml     |  0
 .../com/cloudera/livy/yarn/ApplicationState.scala      |  0
 .../src/main/scala/com/cloudera/livy/yarn/Client.scala |  0
 .../src/main/scala/com/cloudera/livy/yarn/Job.scala    |  0
 140 files changed, 10 insertions(+), 10 deletions(-)

commit 8fa05f989027b96783bfd60cac406bd23e27706e
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri Dec 18 14:41:19 2015 -0800

    Add config for location of local client jars, don't use "jarOfClass".
    
    This allows Livy client jars to be cached somewhere (e.g. HDFS) instead
    of always being uploaded to the cluster. It also removed the use of sketchy
    API to figure out what jar to use (since it didn't include dependencies).

 .../cloudera/livy/client/local/LocalClient.java    | 33 ++++++++++++++++++----
 .../com/cloudera/livy/client/local/LocalConf.java  |  2 ++
 .../livy/client/local/TestSparkClient.java         |  1 +
 3 files changed, 30 insertions(+), 6 deletions(-)

commit 5a8a8e2fbb2ddcb7f3b7aea63767a9f2b143d2a1
Merge: d19e2ad 13c333e
Author: Kostas Sakellis <kostas@cloudera.com>
Date:   Fri Dec 18 13:16:25 2015 -0800

    Merge pull request #10 from ksakellis/fixReadMe
    
    [Doc] Modified the Readme to strip out old links to Hue

commit d19e2ad8b57a903d0ba6959545eefdafb19b54d0
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Fri Dec 18 12:46:07 2015 -0800

    Avoid process leak in session test.
    
    The underlying repl process was leaking sometimes; since the test
    doesn't need that process, just avoid its creation by overriding
    the right method.
    
    Extra: add logging config for the test, and speed up the scala
    maven plugin.

 livy-server/src/test/resources/log4j.properties    | 37 ++++++++++++++++++++++
 .../InteractiveSessionServletSpec.scala            |  6 +++-
 pom.xml                                            |  1 +
 3 files changed, 43 insertions(+), 1 deletion(-)

commit 13c333e4f9c3c854463e1ccc880585bd6fa5c01d
Author: Kostas Sakellis <kostas@cloudera.com>
Date:   Fri Dec 18 10:41:38 2015 -0800

    [Doc] Modified the Readme to strip out old links to Hue
    
    Initial stab cleaning up README. Might need more work later.

 README.rst | 25 ++++++++++---------------
 1 file changed, 10 insertions(+), 15 deletions(-)

commit 2b5edf860be3399b0673e6fa85d724f2ca2665b1
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Dec 17 17:07:54 2015 -0800

    Generate a tarball for the Livy server.
    
    The tarball contains all needed code to run Livy plus a separate
    packaging for the local client, used to run the remote Spark
    context; those jars are not yet used because we'll need to fix
    a bug in the code.
    
    Adjustments in the bin/ scripts were made (including removing
    unneeded scripts), and a default logging config was added (to
    avoid ugly messages during startup).

 bin/livy-server            |   2 +-
 bin/livy-yarn-client       |  29 ------
 bin/livy-yarn-server       |  24 -----
 bin/setup-classpath        |  19 ++--
 conf/log4j.properties      |   8 ++
 livy-assembly/assembly.xml |  44 +++++++++
 livy-assembly/pom.xml      | 224 ++++++++++++++++++++++-----------------------
 livy-client-local/pom.xml  |  85 ++++++++++++-----
 pom.xml                    |   2 +-
 9 files changed, 232 insertions(+), 205 deletions(-)

commit 791c451dcfb672dbabc789d55b4636b69978a77a
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Thu Dec 17 15:44:41 2015 -0800

    Cleanup some of the public API.
    
    This change removes some methods from the public API that don't serve
    a clear purpose, and can be implemented by users on top of the API if
    they really need them.
    
    The whole "MetricsCollection" part kinda falls into that category, but
    I decided to leave it in for now, pending more discussions about the
    API.
    
    I also cleaned up unchecked warnings and turned on the flag to generate
    them during compilation.

 .../main/java/com/cloudera/livy/JobContext.java    |  20 ++--
 .../com/cloudera/livy/TestMetricsCollection.java   |   3 +-
 .../cloudera/livy/client/local/JobContextImpl.java |  21 +----
 .../cloudera/livy/client/local/JobHandleImpl.java  |  10 +-
 .../cloudera/livy/client/local/LocalClient.java    |  10 +-
 .../livy/client/local/MonitorCallback.java         |   4 +-
 .../cloudera/livy/client/local/RemoteDriver.java   | 104 +++------------------
 .../livy/client/local/rpc/RpcDispatcher.java       |   9 +-
 .../livy/client/local/TestSparkClient.java         |   2 +-
 pom.xml                                            |   1 +
 10 files changed, 38 insertions(+), 146 deletions(-)

commit fdd07be873c5d2eefd14524768557d3f770abf4e
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Wed Dec 16 15:07:20 2015 -0800

    Refactor livy-client-local on top of livy-api.
    
    This change makes the local client into an implementation of
    LivyClientFactory / LivyClient. This allows it to be used solely
    by using the public livy-api interfaces (livy-client-local still
    needs to be in the classpath, obviously).
    
    A lot of the changes were to un-break the mess that became the
    configuration code of the RSC. Now there's a single class used
    by everybody. The changes to use the public API instead of the
    old SparkClientFactory were very trivial.
    
    Minor build change: maven-compiler-plugin was disabled, since the
    Scala plugin also compiles Java classes.

 .../java/com/cloudera/livy/LivyClientBuilder.java  |   6 +
 .../cloudera/livy/client/local/JobHandleImpl.java  |   4 +-
 .../{SparkClientImpl.java => LocalClient.java}     |  93 +++-------
 .../livy/client/local/LocalClientFactory.java      |  95 ++++++++++
 .../com/cloudera/livy/client/local/LocalConf.java  | 202 +++++++++++++++++++++
 .../cloudera/livy/client/local/RemoteDriver.java   |  26 +--
 .../livy/client/local/SparkClientFactory.java      |  82 ---------
 .../livy/client/local/SparkClientUtilities.java    |  92 ----------
 .../cloudera/livy/client/local/conf/RscConf.java   |  92 ----------
 .../com/cloudera/livy/client/local/rpc/Rpc.java    |  38 ++--
 .../livy/client/local/rpc/RpcConfiguration.java    | 188 -------------------
 .../cloudera/livy/client/local/rpc/RpcServer.java  |  31 ++--
 .../livy/client/local/rpc/SaslHandler.java         |   6 +-
 .../services/com.cloudera.livy.LivyClientFactory   |   1 +
 .../cloudera/livy/client/local/TestJobHandle.java  |   2 +-
 .../livy/client/local/TestSparkClient.java         |  20 +-
 .../cloudera/livy/client/local/rpc/TestRpc.java    |  26 ++-
 .../cloudera/livy/spark/client/ClientSession.scala |   2 +-
 .../livy/spark/client/CreateClientRequest.scala    |   2 +-
 .../livy/spark/client/SessionClientTracker.scala   |  39 ++--
 pom.xml                                            |  28 ++-
 21 files changed, 457 insertions(+), 618 deletions(-)

commit 4ba66651ef3f7f6f492554466d1fe70f8586234f
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Tue Dec 15 11:31:34 2015 -0800

    Add a public api (livy-api).
    
    This change moves the public API out of livy-client-local and into the
    livy-api module, making package name adjustments as necessary. In the
    process, the counters feature was dropped (mostly because it relies on
    accumulators which are a bad idea for this).
    
    The livy-api supports a service model for instantiating clients; right
    now, there are no implementations, but a subsequent change will make
    livy-client-local available as a livy-api implementation.

 livy-api/pom.xml                                   |   6 +
 .../src/main/java/com/cloudera/livy}/Job.java      |   2 +-
 .../main/java/com/cloudera/livy}/JobContext.java   |   7 +-
 .../main/java/com/cloudera/livy}/JobHandle.java    |   8 +-
 .../main/java/com/cloudera/livy/LivyClient.java    |  15 +-
 .../java/com/cloudera/livy/LivyClientBuilder.java  |  91 ++++++++++++
 .../java/com/cloudera/livy/LivyClientFactory.java  |  44 ++++++
 .../java/com/cloudera/livy}/MetricsCollection.java |  92 ++++++++----
 .../com/cloudera/livy/annotations/Private.java     |  30 ++++
 .../com/cloudera/livy}/metrics/DataReadMethod.java |   2 +-
 .../com/cloudera/livy}/metrics/InputMetrics.java   |   2 +-
 .../java/com/cloudera/livy}/metrics/Metrics.java   |   2 +-
 .../cloudera/livy}/metrics/ShuffleReadMetrics.java |   2 +-
 .../livy}/metrics/ShuffleWriteMetrics.java         |   2 +-
 .../java/com/cloudera/livy/TestClientFactory.java  |  81 +++++++++++
 .../com/cloudera/livy/TestLivyClientBuilder.java   |  67 +++++++++
 .../com/cloudera/livy}/TestMetricsCollection.java  |  32 +++--
 .../services/com.cloudera.livy.LivyClientFactory   |   1 +
 livy-client-local/pom.xml                          |  40 ++++--
 .../cloudera/livy/client/local/BaseProtocol.java   |  14 +-
 .../cloudera/livy/client/local/JobContextImpl.java |  11 +-
 .../cloudera/livy/client/local/JobHandleImpl.java  |  15 +-
 .../livy/client/local/MonitorCallback.java         |   4 +-
 .../cloudera/livy/client/local/RemoteDriver.java   |  58 +++-----
 .../livy/client/local/SparkClientFactory.java      |   3 +-
 .../livy/client/local/SparkClientImpl.java         |  48 +++----
 .../livy/client/local/counter/SparkCounter.java    | 109 --------------
 .../client/local/counter/SparkCounterGroup.java    |  85 -----------
 .../livy/client/local/counter/SparkCounters.java   | 159 ---------------------
 .../cloudera/livy/client/local/TestJobHandle.java  |   2 +
 .../livy/client/local/TestSparkClient.java         |  77 +++-------
 .../cloudera/livy/spark/client/ClientSession.scala |   4 +-
 .../cloudera/livy/spark/client/SessionCache.scala  |  22 +--
 .../livy/spark/client/SessionClientTracker.scala   |  16 +--
 pom.xml                                            |   3 +
 35 files changed, 542 insertions(+), 614 deletions(-)

commit 6fe1e80cfc72327c28107e0de20c818c1f13e027
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Dec 14 17:24:01 2015 -0800

    Rename packages and artifacts.
    
    This is a mechanical change that:
    
    - Removes "hue" from the package names, since it was a needless
      extra path.
    - Adds "_2.10" to all artifacts where it was missing, since we need
      that for Scala-based projects.
    - Makes sure all groups IDs are "com.cloudera.livy".
    - Rename livy-remote-spark-context to livy-client-local.
    - Add empty livy-api and livy-client-http modules.
    
    On top of it, there are some very minor test changes.

 bin/livy-repl                                      |  2 +-
 bin/livy-server                                    |  2 +-
 bin/livy-yarn-client                               |  2 +-
 livy-api/pom.xml                                   | 60 ++++++++++++++++++++++
 livy-assembly/pom.xml                              |  6 +--
 livy-client-http/pom.xml                           | 31 +++++++++++
 .../pom.xml                                        |  8 +--
 .../cloudera/livy/client/local}/BaseProtocol.java  |  8 +--
 .../java/com/cloudera/livy/client/local}/Job.java  |  2 +-
 .../cloudera/livy/client/local}/JobContext.java    |  4 +-
 .../livy/client/local}/JobContextImpl.java         |  4 +-
 .../com/cloudera/livy/client/local}/JobHandle.java |  4 +-
 .../cloudera/livy/client/local}/JobHandleImpl.java |  4 +-
 .../livy/client/local}/MetricsCollection.java      | 12 ++---
 .../livy/client/local}/MonitorCallback.java        |  4 +-
 .../cloudera/livy/client/local}/RemoteDriver.java  | 10 ++--
 .../cloudera/livy/client/local}/SparkClient.java   |  2 +-
 .../livy/client/local}/SparkClientFactory.java     |  6 +--
 .../livy/client/local}/SparkClientImpl.java        |  8 +--
 .../livy/client/local}/SparkClientUtilities.java   |  2 +-
 .../cloudera/livy/client/local}/conf/RscConf.java  |  2 +-
 .../livy/client/local}/counter/SparkCounter.java   |  2 +-
 .../client/local}/counter/SparkCounterGroup.java   |  2 +-
 .../livy/client/local}/counter/SparkCounters.java  |  2 +-
 .../livy/client/local}/metrics/DataReadMethod.java |  2 +-
 .../livy/client/local}/metrics/InputMetrics.java   |  2 +-
 .../livy/client/local}/metrics/Metrics.java        |  2 +-
 .../client/local}/metrics/ShuffleReadMetrics.java  |  2 +-
 .../client/local}/metrics/ShuffleWriteMetrics.java |  2 +-
 .../livy/client/local}/rpc/KryoMessageCodec.java   |  2 +-
 .../com/cloudera/livy/client/local}/rpc/README.md  |  0
 .../com/cloudera/livy/client/local}/rpc/Rpc.java   |  2 +-
 .../livy/client/local}/rpc/RpcConfiguration.java   |  4 +-
 .../livy/client/local}/rpc/RpcDispatcher.java      |  2 +-
 .../livy/client/local}/rpc/RpcException.java       |  2 +-
 .../cloudera/livy/client/local}/rpc/RpcServer.java |  2 +-
 .../livy/client/local}/rpc/SaslHandler.java        |  2 +-
 .../cloudera/livy/client/local}/TestJobHandle.java |  2 +-
 .../livy/client/local}/TestMetricsCollection.java  | 12 ++---
 .../livy/client/local}/TestSparkClient.java        | 10 ++--
 .../client/local}/rpc/TestKryoMessageCodec.java    |  2 +-
 .../cloudera/livy/client/local}/rpc/TestRpc.java   |  4 +-
 .../src/test/resources/log4j.properties            |  0
 .../src/test/resources/testweet.json               |  0
 livy-core/pom.xml                                  |  8 +--
 .../{hue => }/livy/LineBufferedProcess.scala       |  2 +-
 .../{hue => }/livy/LineBufferedStream.scala        |  2 +-
 .../com/cloudera/{hue => }/livy/LivyConf.scala     |  2 +-
 .../com/cloudera/{hue => }/livy/Logging.scala      |  2 +-
 .../scala/com/cloudera/{hue => }/livy/Utils.scala  |  2 +-
 .../com/cloudera/{hue => }/livy/WebServer.scala    |  2 +-
 .../scala/com/cloudera/{hue => }/livy/msgs.scala   |  2 +-
 .../cloudera/{hue => }/livy/sessions/Kind.scala    |  2 +-
 .../cloudera/{hue => }/livy/sessions/Session.scala |  2 +-
 .../{hue => }/livy/sessions/SessionFactory.scala   |  2 +-
 .../{hue => }/livy/sessions/SessionManager.scala   |  4 +-
 .../{hue => }/livy/sessions/SessionState.scala     |  2 +-
 .../livy/sessions/batch/BatchSession.scala         |  4 +-
 .../sessions/interactive/InteractiveSession.scala  |  6 +--
 .../livy/sessions/interactive/Statement.scala      |  4 +-
 .../livy/sessions/interactive/StatementState.scala |  2 +-
 .../livy/sessions/BaseInteractiveSessionSpec.scala |  6 +--
 .../livy/sessions/SessionManagerSpec.scala         |  4 +-
 .../livy/sessions/interactive/StatementSpec.scala  |  4 +-
 livy-repl/pom.xml                                  |  7 ++-
 .../cloudera/{hue => }/livy/repl/Interpreter.scala |  2 +-
 .../com/cloudera/{hue => }/livy/repl/Main.scala    | 14 ++---
 .../com/cloudera/{hue => }/livy/repl/Session.scala |  6 +--
 .../com/cloudera/{hue => }/livy/repl/WebApp.scala  |  6 +--
 .../com/cloudera/{hue => }/livy/repl/package.scala |  2 +-
 .../livy/repl/process/ProcessInterpreter.scala     |  6 +--
 .../livy/repl/python/PythonInterpreter.scala       |  8 +--
 .../livy/repl/scala/SparkInterpreter.scala         |  8 +--
 .../livy/repl/sparkr/SparkRInterpreter.scala       |  8 +--
 .../{hue => }/livy/repl/BaseInterpreterSpec.scala  |  8 +--
 .../{hue => }/livy/repl/BaseSessionSpec.scala      | 10 ++--
 .../livy/repl/PythonInterpreterSpec.scala          |  6 +--
 .../{hue => }/livy/repl/PythonSessionSpec.scala    |  4 +-
 .../{hue => }/livy/repl/ScalaInterpreterSpec.scala |  6 +--
 .../livy/repl/SparkRInterpreterSpec.scala          |  6 +--
 .../{hue => }/livy/repl/SparkRSessionSpec.scala    |  4 +-
 .../{hue => }/livy/repl/SparkSessionSpec.scala     |  4 +-
 .../cloudera/{hue => }/livy/repl/WebAppSpec.scala  |  6 +--
 livy-server/pom.xml                                |  7 ++-
 .../com/cloudera/{hue => }/livy/server/Main.scala  | 12 ++---
 .../{hue => }/livy/server/SessionServlet.scala     | 10 ++--
 .../livy/server/batch/BatchSessionServlet.scala    | 10 ++--
 .../interactive/InteractiveSessionServlet.scala    | 12 ++---
 .../livy/server/batch/BatchServletSpec.scala       | 10 ++--
 .../InteractiveSessionServletSpec.scala            | 12 ++---
 livy-spark/pom.xml                                 | 13 +++--
 .../default-spark-user-configurable-options.conf   |  0
 .../livy/spark/ConfigOptionNotAllowed.scala        |  2 +-
 .../{hue => }/livy/spark/SparkManager.scala        | 20 ++++----
 .../{hue => }/livy/spark/SparkProcess.scala        |  4 +-
 .../{hue => }/livy/spark/SparkProcessBuilder.scala |  4 +-
 .../livy/spark/SparkProcessBuilderFactory.scala    |  4 +-
 .../livy/spark/SparkUserConfigurableOptions.scala  |  4 +-
 .../livy/spark/batch/BatchSessionFactory.scala     | 10 ++--
 .../livy/spark/batch/BatchSessionProcess.scala     | 10 ++--
 .../spark/batch/BatchSessionProcessFactory.scala   |  6 +--
 .../livy/spark/batch/BatchSessionYarn.scala        | 12 ++---
 .../livy/spark/batch/BatchSessionYarnFactory.scala |  6 +--
 .../livy/spark/batch/CreateBatchRequest.scala      |  2 +-
 .../livy/spark/client/ClientSession.scala          |  6 +--
 .../livy/spark/client/ClientSessionFactory.scala   |  4 +-
 .../livy/spark/client/CreateClientRequest.scala    |  2 +-
 .../{hue => }/livy/spark/client/SessionCache.scala |  6 +--
 .../livy/spark/client/SessionClientTracker.scala   | 10 ++--
 .../interactive/CreateInteractiveRequest.scala     |  4 +-
 .../interactive/InteractiveSessionFactory.scala    | 14 ++---
 .../interactive/InteractiveSessionProcess.scala    |  8 +--
 .../InteractiveSessionProcessFactory.scala         |  6 +--
 .../spark/interactive/InteractiveSessionYarn.scala | 10 ++--
 .../InteractiveSessionYarnFactory.scala            |  8 +--
 .../spark/interactive/InteractiveWebSession.scala  | 12 ++---
 livy-spark/src/test/resources/log4j.properties     | 37 +++++++++++++
 .../livy/spark/SparkProcessBuilderSpec.scala       |  4 +-
 .../livy/spark/batch/BatchProcessSpec.scala        |  8 +--
 .../InteractiveSessionProcessSpec.scala            |  8 +--
 livy-yarn/pom.xml                                  |  4 +-
 livy-yarn/src/main/bash/run-am.sh                  |  2 +-
 livy-yarn/src/main/bash/run-job.sh                 |  2 +-
 .../{hue => }/livy/yarn/ApplicationState.scala     |  2 +-
 .../com/cloudera/{hue => }/livy/yarn/Client.scala  |  4 +-
 .../com/cloudera/{hue => }/livy/yarn/Job.scala     |  2 +-
 pom.xml                                            | 50 +++++++++++++++---
 127 files changed, 488 insertions(+), 325 deletions(-)

commit 68356cf31176b4e526af5e5cc65d247ae735c4c9
Author: Marcelo Vanzin <vanzin@cloudera.com>
Date:   Mon Dec 14 15:13:08 2015 -0800

    CDH-35359, CDH-35360. Fix RSC pom, skip tests that require a Spark installation.
    
    Make sure the RSC pom integrates with the rest of the build and uses the
    same dependencies; exclude some dependencies that were causing test
    failures.
    
    And for tests that need to fork Spark, check whether SPARK_HOME is set,
    and skip them when it's not available.
    
    Finally, SparkInterpreter was using internal APIs that were removed in 1.6;
    added code to detect which method to use via reflection, although now we
    have two cases of using internal APIs...

 livy-core/pom.xml                                  |   2 +-
 .../livy/sessions/BaseInteractiveSessionSpec.scala |  23 +++--
 livy-remote-spark-client/pom.xml                   | 107 +++------------------
 .../cloudera/hue/livy/client/TestSparkClient.java  |   3 +
 .../hue/livy/repl/scala/SparkInterpreter.scala     |  17 +++-
 livy-repl/src/test/resources/log4j.properties      |  37 +++++++
 .../hue/livy/repl/PythonInterpreterSpec.scala      |   5 +
 .../cloudera/hue/livy/repl/PythonSessionSpec.scala |   6 ++
 .../hue/livy/repl/ScalaInterpreterSpec.scala       |  16 +--
 .../cloudera/hue/livy/repl/SparkSessionSpec.scala  |  17 ++--
 .../hue/livy/server/batch/BatchServletSpec.scala   |   5 +
 .../InteractiveSessionServletSpec.scala            |   5 +
 .../hue/livy/spark/batch/BatchProcessSpec.scala    |   5 +
 .../InteractiveSessionProcessSpec.scala            |   1 +
 pom.xml                                            |  95 ++++++++++++++++--
 15 files changed, 212 insertions(+), 132 deletions(-)

commit 74288c4cf21f5c98e480276fdc1ccb067c6dee97
Author: Hari Shreedharan <hshreedharan@apache.org>
Date:   Thu Dec 10 07:32:24 2015 +0530

    Consolidate .gitignore

 .gitignore                          | 2 ++
 livy-remote-spark-client/.gitignore | 6 ------
 2 files changed, 2 insertions(+), 6 deletions(-)

commit be923cdedc77e15816554d492b3882bc9f73b7db
Author: Hari Shreedharan <hshreedharan@apache.org>
Date:   Thu Dec 10 07:15:33 2015 +0530

    Adding Travis build file.

 .travis.yml | 4 ++++
 1 file changed, 4 insertions(+)

commit d169429d654397dbaef9ab8fdeff661abae3ebb4
Author: Hari Shreedharan <hshreedharan@apache.org>
Date:   Thu Dec 10 07:08:38 2015 +0530

    Adding Remote Spark Client. Following changes have been added:
    * Pulled in Remote Spark Client.
    * Removed Logback dependency from Livy and standardized on slf4j.
    * Added a new class that can be used to track sessions and their clients. It times out sessions and can use them to submit jobs from the servlet.
    
    Todo, here or in a followup PR:
    - Harmozine dependencies, including Spark
    - Change configs from `hive.spark` to `livy.`

 livy-core/pom.xml                                  | 189 +++---
 .../scala/com/cloudera/hue/livy/WebServer.scala    |  10 +-
 livy-remote-spark-client/.gitignore                |   6 +
 livy-remote-spark-client/pom.xml                   | 173 ++++++
 .../com/cloudera/hue/livy/client/BaseProtocol.java | 169 ++++++
 .../java/com/cloudera/hue/livy/client/Job.java     |  29 +
 .../com/cloudera/hue/livy/client/JobContext.java   |  87 +++
 .../cloudera/hue/livy/client/JobContextImpl.java   | 136 +++++
 .../com/cloudera/hue/livy/client/JobHandle.java    | 103 ++++
 .../cloudera/hue/livy/client/JobHandleImpl.java    | 235 ++++++++
 .../hue/livy/client/MetricsCollection.java         | 284 +++++++++
 .../cloudera/hue/livy/client/MonitorCallback.java  |  30 +
 .../com/cloudera/hue/livy/client/RemoteDriver.java | 562 ++++++++++++++++++
 .../com/cloudera/hue/livy/client/SparkClient.java  |  96 ++++
 .../hue/livy/client/SparkClientFactory.java        |  81 +++
 .../cloudera/hue/livy/client/SparkClientImpl.java  | 633 +++++++++++++++++++++
 .../hue/livy/client/SparkClientUtilities.java      |  92 +++
 .../com/cloudera/hue/livy/client/conf/RscConf.java |  92 +++
 .../hue/livy/client/counter/SparkCounter.java      | 109 ++++
 .../hue/livy/client/counter/SparkCounterGroup.java |  85 +++
 .../hue/livy/client/counter/SparkCounters.java     | 159 ++++++
 .../hue/livy/client/metrics/DataReadMethod.java    |  26 +
 .../hue/livy/client/metrics/InputMetrics.java      |  49 ++
 .../cloudera/hue/livy/client/metrics/Metrics.java  | 110 ++++
 .../livy/client/metrics/ShuffleReadMetrics.java    |  73 +++
 .../livy/client/metrics/ShuffleWriteMetrics.java   |  51 ++
 .../hue/livy/client/rpc/KryoMessageCodec.java      | 174 ++++++
 .../com/cloudera/hue/livy/client/rpc/README.md     |  33 ++
 .../java/com/cloudera/hue/livy/client/rpc/Rpc.java | 490 ++++++++++++++++
 .../hue/livy/client/rpc/RpcConfiguration.java      | 188 ++++++
 .../hue/livy/client/rpc/RpcDispatcher.java         | 201 +++++++
 .../cloudera/hue/livy/client/rpc/RpcException.java |  26 +
 .../cloudera/hue/livy/client/rpc/RpcServer.java    | 333 +++++++++++
 .../cloudera/hue/livy/client/rpc/SaslHandler.java  | 114 ++++
 .../cloudera/hue/livy/client/TestJobHandle.java    | 104 ++++
 .../hue/livy/client/TestMetricsCollection.java     | 171 ++++++
 .../cloudera/hue/livy/client/TestSparkClient.java  | 523 +++++++++++++++++
 .../hue/livy/client/rpc/TestKryoMessageCodec.java  | 232 ++++++++
 .../com/cloudera/hue/livy/client/rpc/TestRpc.java  | 311 ++++++++++
 .../src/test/resources/log4j.properties            |  23 +
 .../src/test/resources/testweet.json               |   1 +
 livy-spark/pom.xml                                 | 247 ++++----
 .../hue/livy/spark/client/ClientSession.scala      |  52 ++
 .../livy/spark/client/ClientSessionFactory.scala   |  27 +
 .../livy/spark/client/CreateClientRequest.scala    |  21 +
 .../hue/livy/spark/client/SessionCache.scala       | 126 ++++
 .../livy/spark/client/SessionClientTracker.scala   |  89 +++
 pom.xml                                            |  16 +-
 48 files changed, 6943 insertions(+), 228 deletions(-)

commit 6f5961f403bad75247921de6129d885f0ad91489
Author: Hari Shreedharan <hshreedharan@apache.org>
Date:   Mon Nov 16 23:27:04 2015 -0800

    Initial code import from Hue.

 .gitignore                                         |  17 +
 README.rst                                         | 755 +++++++++++++++++++++
 bin/livy-repl                                      |  38 ++
 bin/livy-server                                    |  31 +
 bin/livy-yarn-client                               |  29 +
 bin/livy-yarn-server                               |  24 +
 bin/setup-classpath                                |  31 +
 conf/livy-defaults.conf.template                   |  40 ++
 conf/spark-user-configurable-options.template      | 123 ++++
 dist.xml                                           |  37 +
 livy-assembly/pom.xml                              | 118 ++++
 livy-core/pom.xml                                  |  99 +++
 .../cloudera/hue/livy/LineBufferedProcess.scala    |  47 ++
 .../com/cloudera/hue/livy/LineBufferedStream.scala |  94 +++
 .../scala/com/cloudera/hue/livy/LivyConf.scala     | 120 ++++
 .../main/scala/com/cloudera/hue/livy/Logging.scala |  55 ++
 .../main/scala/com/cloudera/hue/livy/Utils.scala   | 135 ++++
 .../scala/com/cloudera/hue/livy/WebServer.scala    | 111 +++
 .../main/scala/com/cloudera/hue/livy/msgs.scala    |  64 ++
 .../com/cloudera/hue/livy/sessions/Kind.scala      |  45 ++
 .../com/cloudera/hue/livy/sessions/Session.scala   |  42 ++
 .../hue/livy/sessions/SessionFactory.scala         |  30 +
 .../hue/livy/sessions/SessionManager.scala         | 110 +++
 .../cloudera/hue/livy/sessions/SessionState.scala  |  81 +++
 .../hue/livy/sessions/batch/BatchSession.scala     |  23 +
 .../sessions/interactive/InteractiveSession.scala  |  59 ++
 .../hue/livy/sessions/interactive/Statement.scala  |  65 ++
 .../livy/sessions/interactive/StatementState.scala |  35 +
 .../livy/sessions/BaseInteractiveSessionSpec.scala | 102 +++
 .../hue/livy/sessions/SessionManagerSpec.scala     |  51 ++
 .../livy/sessions/interactive/StatementSpec.scala  |  77 +++
 livy-repl/pom.xml                                  | 218 ++++++
 livy-repl/src/main/resources/fake_R.sh             |  18 +
 livy-repl/src/main/resources/fake_pyspark.sh       |  39 ++
 livy-repl/src/main/resources/fake_shell.py         | 446 ++++++++++++
 livy-repl/src/main/resources/logback-access.xml    |  13 +
 livy-repl/src/main/resources/logback.xml           |  12 +
 .../com/cloudera/hue/livy/repl/Interpreter.scala   |  50 ++
 .../scala/com/cloudera/hue/livy/repl/Main.scala    | 158 +++++
 .../scala/com/cloudera/hue/livy/repl/Session.scala | 144 ++++
 .../scala/com/cloudera/hue/livy/repl/WebApp.scala  | 146 ++++
 .../scala/com/cloudera/hue/livy/repl/package.scala |  30 +
 .../hue/livy/repl/process/ProcessInterpreter.scala | 131 ++++
 .../hue/livy/repl/python/PythonInterpreter.scala   | 189 ++++++
 .../hue/livy/repl/scala/SparkInterpreter.scala     | 260 +++++++
 .../hue/livy/repl/sparkr/SparkRInterpreter.scala   | 250 +++++++
 .../hue/livy/repl/BaseInterpreterSpec.scala        |  34 +
 .../cloudera/hue/livy/repl/BaseSessionSpec.scala   |  50 ++
 .../hue/livy/repl/PythonInterpreterSpec.scala      | 213 ++++++
 .../cloudera/hue/livy/repl/PythonSessionSpec.scala | 204 ++++++
 .../hue/livy/repl/ScalaInterpreterSpec.scala       | 128 ++++
 .../hue/livy/repl/SparkRInterpreterSpec.scala      | 111 +++
 .../cloudera/hue/livy/repl/SparkRSessionSpec.scala | 185 +++++
 .../cloudera/hue/livy/repl/SparkSessionSpec.scala  | 197 ++++++
 .../com/cloudera/hue/livy/repl/WebAppSpec.scala    | 116 ++++
 livy-server/pom.xml                                | 230 +++++++
 livy-server/src/main/resources/logback-access.xml  |  13 +
 livy-server/src/main/resources/logback.xml         |  12 +
 .../scala/com/cloudera/hue/livy/server/Main.scala  | 179 +++++
 .../cloudera/hue/livy/server/SessionServlet.scala  | 146 ++++
 .../livy/server/batch/BatchSessionServlet.scala    |  74 ++
 .../interactive/InteractiveSessionServlet.scala    | 223 ++++++
 .../hue/livy/server/batch/BatchServletSpec.scala   | 135 ++++
 .../InteractiveSessionServletSpec.scala            | 142 ++++
 livy-spark/pom.xml                                 | 145 ++++
 .../default-spark-user-configurable-options.conf   | 122 ++++
 .../hue/livy/spark/ConfigOptionNotAllowed.scala    |  32 +
 .../com/cloudera/hue/livy/spark/SparkManager.scala |  99 +++
 .../com/cloudera/hue/livy/spark/SparkProcess.scala |  12 +
 .../hue/livy/spark/SparkProcessBuilder.scala       | 291 ++++++++
 .../livy/spark/SparkProcessBuilderFactory.scala    |  31 +
 .../livy/spark/SparkUserConfigurableOptions.scala  |  42 ++
 .../hue/livy/spark/batch/BatchSessionFactory.scala |  63 ++
 .../hue/livy/spark/batch/BatchSessionProcess.scala |  75 ++
 .../spark/batch/BatchSessionProcessFactory.scala   |  30 +
 .../hue/livy/spark/batch/BatchSessionYarn.scala    |  90 +++
 .../livy/spark/batch/BatchSessionYarnFactory.scala |  35 +
 .../hue/livy/spark/batch/CreateBatchRequest.scala  |  37 +
 .../interactive/CreateInteractiveRequest.scala     |  37 +
 .../interactive/InteractiveSessionFactory.scala    | 149 ++++
 .../interactive/InteractiveSessionProcess.scala    |  77 +++
 .../InteractiveSessionProcessFactory.scala         |  34 +
 .../spark/interactive/InteractiveSessionYarn.scala |  77 +++
 .../InteractiveSessionYarnFactory.scala            |  43 ++
 .../spark/interactive/InteractiveWebSession.scala  | 244 +++++++
 .../hue/livy/spark/SparkProcessBuilderSpec.scala   |  43 ++
 .../hue/livy/spark/batch/BatchProcessSpec.scala    |  71 ++
 .../InteractiveSessionProcessSpec.scala            |  40 ++
 livy-yarn/pom.xml                                  |  66 ++
 livy-yarn/src/main/assembly/dist.xml               |  51 ++
 livy-yarn/src/main/bash/run-am.sh                  |  21 +
 livy-yarn/src/main/bash/run-class.sh               |  40 ++
 livy-yarn/src/main/bash/run-job.sh                 |  19 +
 livy-yarn/src/main/resources/logback.xml           |  12 +
 .../cloudera/hue/livy/yarn/ApplicationState.scala  |  29 +
 .../scala/com/cloudera/hue/livy/yarn/Client.scala  |  78 +++
 .../scala/com/cloudera/hue/livy/yarn/Job.scala     | 105 +++
 pom.xml                                            | 597 ++++++++++++++++
 98 files changed, 10121 insertions(+)

