commit d29838b30d62b3e09a646ba967dfcc055b6f4eaa
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Nov 20 20:19:51 2019 -0800

    HDDS-2536. Add ozone.om.internal.service.id to OM HA configuration. (#218)

 .../common/src/main/resources/ozone-default.xml     | 11 ++++++++++-
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java    |  3 +++
 .../apache/hadoop/ozone/MiniOzoneHAClusterImpl.java |  6 +++++-
 .../apache/hadoop/ozone/om/ha/OMHANodeDetails.java  | 21 +++++++++++++++++++--
 4 files changed, 37 insertions(+), 4 deletions(-)

commit bcb13d4ba4155df36a3c10d2436b26e5b54ae602
Author: Siddharth <swagle@apache.org>
Date:   Wed Nov 20 18:58:03 2019 -0800

    HDDS-2538. Fix issues found in DatabaseHelper. (#221)

 .../ozone/audit/parser/common/DatabaseHelper.java  | 157 +++++++++------------
 .../audit/parser/handler/LoadCommandHandler.java   |  11 +-
 .../audit/parser/handler/QueryCommandHandler.java  |  11 +-
 .../parser/handler/TemplateCommandHandler.java     |  11 +-
 4 files changed, 85 insertions(+), 105 deletions(-)

commit b557aec5e183cc5df680e47e594ca40a035cd18a
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Nov 20 18:50:03 2019 -0800

    HDDS-2594. S3 RangeReads failing with NumberFormatException. (#242)

 .../java/org/apache/hadoop/ozone/s3/util/RangeHeaderParserUtil.java | 4 ++--
 .../org/apache/hadoop/ozone/s3/util/TestRangeHeaderParserUtil.java  | 6 +++++-
 2 files changed, 7 insertions(+), 3 deletions(-)

commit fab0242bdbefbdf2628ba792018769f11d41b737
Author: Abhishek Purohit <15132313+abhishekaypurohit@users.noreply.github.com>
Date:   Wed Nov 20 18:48:16 2019 -0800

    HDDS-2597. Remove toString() as log calls it implicitly (#240)

 .../org/apache/hadoop/hdds/scm/client/ContainerOperationClient.java     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e7fd407f775425856b25eb8f8b0b9e59eb7ff078
Author: Abhishek Purohit <15132313+abhishekaypurohit@users.noreply.github.com>
Date:   Wed Nov 20 18:43:26 2019 -0800

    HDDS-2598. Remove unused private field "LOG" (#241)

 .../main/java/org/apache/hadoop/hdds/scm/client/HddsClientUtils.java | 5 -----
 1 file changed, 5 deletions(-)

commit 26ffa6bc368eb9f093e494cbe7c2b8e2f13ffdfc
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Nov 20 22:00:45 2019 +0100

    HDDS-2522. Fix TestSecureOzoneCluster (#207)

 .../hadoop/ozone/TestSecureOzoneCluster.java       | 399 +++++++++------------
 1 file changed, 166 insertions(+), 233 deletions(-)

commit bdc11fcaecfa2fd119f80cb50b8d150762785bd8
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Nov 20 21:48:00 2019 +0100

    HDDS-2523. BufferPool.releaseBuffer may release a buffer different than the head of the list (#232)

 .../main/java/org/apache/hadoop/hdds/scm/storage/BufferPool.java | 2 +-
 .../java/org/apache/hadoop/hdds/scm/storage/CommitWatcher.java   | 4 +++-
 .../org/apache/hadoop/ozone/client/rpc/TestCommitWatcher.java    | 9 +++------
 3 files changed, 7 insertions(+), 8 deletions(-)

commit 3c334f6a7b344e0e5f52fec95071c369286cfdcb
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Wed Nov 20 11:21:36 2019 -0800

    HDDS-2241. Optimize the refresh pipeline logic used by KeyManagerImpl… (#194)

 .../hadoop/ozone/om/exceptions/OMException.java    |   6 +-
 .../src/main/proto/OzoneManagerProtocol.proto      |   1 +
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java | 133 ++++++++++++++++++++-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  66 ++++++----
 4 files changed, 178 insertions(+), 28 deletions(-)

commit e47acd129380dc0b570a38f1767a9c388d45c09f
Author: Matthew Sharp <56448373+mbsharp@users.noreply.github.com>
Date:   Wed Nov 20 14:15:15 2019 -0500

    HDDS-2512 Sonar TraceAllMethod NPE Could be Thrown (#193)

 .../src/main/java/org/apache/hadoop/hdds/tracing/TraceAllMethod.java | 5 +++++
 1 file changed, 5 insertions(+)

commit b1ac520ed95fe35b454e55695a05ed71299d8797
Author: Siddharth <swagle@hortonworks.com>
Date:   Wed Nov 20 07:56:08 2019 -0800

    HDDS-2498. Fix sonar issues found in StorageContainerManager. (#178)

 .../hdds/scm/server/StorageContainerManager.java   | 74 ++++++++++------------
 1 file changed, 35 insertions(+), 39 deletions(-)

commit 92dcfdb3dacbf74a5bc1bb4c06d59cbeda204a9e
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Nov 20 16:50:49 2019 +0100

    HDDS-2580. Ensure resources are closed in Get/PutKeyHandler (#235)

 .../ozone/web/ozShell/keys/GetKeyHandler.java      | 44 ++++++++++------------
 .../ozone/web/ozShell/keys/PutKeyHandler.java      | 35 ++++++++---------
 2 files changed, 38 insertions(+), 41 deletions(-)

commit 2134decdc826b34acd17340be4a2f42a4edf8c14
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Nov 20 14:39:06 2019 +0100

    HDDS-2485. Disable XML external entity processing
    
    Closes #204

 .../hadoop/hdds/scm/net/NodeSchemaLoader.java      |  27 ++--
 .../hadoop/hdds/scm/net/TestNodeSchemaLoader.java  | 151 +++++++++++++--------
 .../common/src/test/resources/log4j.properties     |  23 ++++
 .../networkTopologyTestFiles/external-entity.xml   |  52 +++++++
 .../hadoop/hdds/conf/ConfigFileAppender.java       |  21 +--
 .../endpoint/MultiDeleteRequestUnmarshaller.java   |   8 +-
 6 files changed, 195 insertions(+), 87 deletions(-)

commit e68b1139ab2f0bf3c0dd3f65f6d428354f0f667e
Author: Siddharth <swagle@hortonworks.com>
Date:   Tue Nov 19 22:48:01 2019 -0800

    HDDS-2493. Sonar: Locking on a parameter in NetUtils.removeOutscope. (#174)

 .../org/apache/hadoop/hdds/scm/net/NetUtils.java   | 22 +---------------------
 .../hadoop/hdds/scm/net/NetworkTopologyImpl.java   | 10 ++++++----
 2 files changed, 7 insertions(+), 25 deletions(-)

commit f29de784b7a4aacd475e288c84a171fe40311aad
Author: Dinesh Chitlangia <dineshchitlangia@gmail.com>
Date:   Wed Nov 20 01:09:05 2019 -0500

    HDDS-2247. Delete FileEncryptionInfo from KeyInfo when a Key is deleted (#200)

 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  5 +-
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  | 11 +++
 .../client/rpc/TestOzoneAtRestEncryption.java      | 82 ++++++++++++++++++++++
 3 files changed, 96 insertions(+), 2 deletions(-)

commit 2fea0af6a9276c66d9ca0119f56952699d8d0b86
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Nov 20 06:35:13 2019 +0100

    HDDS-2467. Allow running Freon validators with limited memory (#152)

 .../hadoop/ozone/freon/BaseFreonGenerator.java     | 10 +--
 .../hadoop/ozone/freon/ContentGenerator.java       |  6 +-
 .../ozone/freon/OzoneClientKeyGenerator.java       | 15 ++--
 .../ozone/freon/OzoneClientKeyValidator.java       | 93 +++++++++++++++++++---
 .../apache/hadoop/ozone/freon/SameKeyReader.java   | 65 +--------------
 5 files changed, 100 insertions(+), 89 deletions(-)

commit 8ad88ce47145d1a8b994dcc22eb78bc6c8af5ee2
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Nov 20 06:31:39 2019 +0100

    HDDS-2516. Code cleanup in EventQueue (#196)

 .../java/org/apache/hadoop/ozone/lease/Lease.java  | 46 +++++++++++++---------
 .../hadoop/ozone/lease/LeaseCallbackExecutor.java  |  5 ++-
 .../apache/hadoop/ozone/lease/LeaseManager.java    | 20 +++++-----
 .../apache/hadoop/ozone/lease/package-info.java    |  6 +--
 .../hadoop/ozone/lease/TestLeaseManager.java       |  7 +---
 .../apache/hadoop/ozone/lease/package-info.java    |  8 ++--
 .../hadoop/hdds/server/events/EventExecutor.java   |  2 +-
 .../hadoop/hdds/server/events/EventHandler.java    |  4 +-
 .../hadoop/hdds/server/events/EventPublisher.java  |  2 +-
 .../hadoop/hdds/server/events/EventQueue.java      | 13 +++---
 .../hadoop/hdds/server/events/EventWatcher.java    | 46 ++++++++--------------
 .../hdds/server/events/EventWatcherMetrics.java    | 11 +++---
 .../hdds/server/events/SingleThreadExecutor.java   | 36 ++++++++---------
 .../hadoop/hdds/server/events/TypedEvent.java      |  4 +-
 .../hadoop/hdds/server/events/package-info.java    |  7 ++--
 .../hdds/server/events/EventHandlerStub.java       |  4 +-
 16 files changed, 101 insertions(+), 120 deletions(-)

commit b10ac6b35f875d08777e02792015ce5b6e6b23b3
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Nov 19 21:25:18 2019 -0800

    HDDS-2535. TestOzoneManagerDoubleBufferWithOMResponse is flaky. (#216)

 .../om/ratis/TestOzoneManagerDoubleBufferWithOMResponse.java  | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit ba76d233acdc78c5485c6958389f23649978ba2e
Author: Abhishek Purohit <15132313+abhishekaypurohit@users.noreply.github.com>
Date:   Tue Nov 19 18:14:02 2019 -0800

    HDDS-2549. Invoke method(s) only conditionally (#230)
    
    Refactored PreCondition and remove early formatting since internally it uses its own formatting and if expression is false, then only it calls for formatting.

 .../apache/hadoop/hdds/scm/client/ContainerOperationClient.java  | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit d7ef77904daae818b56ec19fbe145e37968ae862
Author: Abhishek Purohit <15132313+abhishekaypurohit@users.noreply.github.com>
Date:   Tue Nov 19 18:10:20 2019 -0800

    HDDS-2545. Remove empty statement (#226)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit da36b09a9faa51ce7b3ad847212e613f700f95c4
Author: prashantpogde <prashant.pogde@gmail.com>
Date:   Tue Nov 19 18:01:03 2019 -0800

    HDDS-2550. Sonar: OzoneClient should be closed in GetAclKeyHandler (#231)

 .../ozone/web/ozShell/keys/GetAclKeyHandler.java   | 44 +++++++++++-----------
 1 file changed, 23 insertions(+), 21 deletions(-)

commit 6186cf92c47a2e63311beea187a3ff72c0147974
Author: Stephen O'Donnell <stephen.odonnell@gmail.com>
Date:   Tue Nov 19 22:30:32 2019 +0000

    HDDS-2448 Delete container command should used a thread pool (#142)
    
    * Datanode container delete commands will not run in a threadpool rather than on the main commandDispatcher thread
    
    * Make delete container thread count configurable
    
    * Removed references to handlers no longer in use
    
    * Updates related to review comments

 .../common/statemachine/DatanodeConfiguration.java | 34 ++++++++++-
 .../common/statemachine/DatanodeStateMachine.java  |  7 ++-
 .../commandhandler/CommandDispatcher.java          |  6 ++
 .../commandhandler/CommandHandler.java             |  8 +++
 .../DeleteContainerCommandHandler.java             | 70 ++++++++++++++++------
 5 files changed, 104 insertions(+), 21 deletions(-)

commit 1d66049aee3f3df0a46b240fc6356bf5d463ded1
Author: Abhishek Purohit <15132313+abhishekaypurohit@users.noreply.github.com>
Date:   Tue Nov 19 14:12:53 2019 -0800

    HDDS-2543. Refactored for log format. (#224)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit eda4575288b7e37914063dcf11b284035d23cd45
Author: Abhishek Purohit <15132313+abhishekaypurohit@users.noreply.github.com>
Date:   Tue Nov 19 14:11:50 2019 -0800

    HDDS-2544. Refactored for unnecessary toString (#225)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cb7e1468d2e3a51742940fd036b2ff78f1cc99d1
Author: Abhishek Purohit <15132313+abhishekaypurohit@users.noreply.github.com>
Date:   Tue Nov 19 14:09:44 2019 -0800

    HDDS-2546. Reorder the modifiers to comply (#227)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientManager.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 83c66a76607bfa4108bfd80c23f5eacc1775d3b6
Author: Abhishek Purohit <15132313+abhishekaypurohit@users.noreply.github.com>
Date:   Tue Nov 19 14:08:18 2019 -0800

    HDDS-2548. Refactored return type as interface rather then impl. (#228)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientRatis.java   | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit c3b14f6287c0a668d73df81cf0d666de267b22c4
Author: Abhishek Purohit <15132313+abhishekaypurohit@users.noreply.github.com>
Date:   Tue Nov 19 14:01:57 2019 -0800

    HDDS-2442. Added support for service name in OM for CSR (#177)

 .../certificates/TestCertificateSignRequest.java   | 33 ++++++++++++++++++++++
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 10 +++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  9 ++++++
 3 files changed, 52 insertions(+)

commit 814cb726b0bb934a33b100d38f648d2f13383c8c
Author: Mohammad J. Khan <mohammad.j.khan@target.com>
Date:   Tue Nov 19 15:57:34 2019 -0600

    HDDS-2547. Sonar: remove volatile keyword from BlockOutputStream bloc… (#229)

 .../apache/hadoop/hdds/scm/storage/BlockOutputStream.java  | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 87d5a5a97d0d2203922b81f2beb469e6a3cd5bd3
Author: Márton Elek <elek@apache.org>
Date:   Tue Nov 19 14:03:08 2019 +0100

    HDDS-2533. Disable failing acceptance and unit tests
    
    Closes #212

 .../test/java/org/apache/hadoop/hdds/scm/node/TestDeadNodeHandler.java  | 2 ++
 hadoop-ozone/dist/src/main/compose/ozone-om-ha/{test.sh => run.sh}      | 0
 .../ozone/om/ratis/TestOzoneManagerDoubleBufferWithOMResponse.java      | 2 ++
 3 files changed, 4 insertions(+)

commit dcfe5f34d79473def14f25812d77c6c685b92e58
Author: Márton Elek <elek@apache.org>
Date:   Tue Nov 19 11:53:41 2019 +0100

    Revert "HDDS-2034. Async RATIS pipeline creation and destroy through heartbeat commands (#29)"
    
    This reverts commit 89d11ad88ee9fa705e3e57e81215067c6f187493.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  12 +-
 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  |   5 -
 .../org/apache/hadoop/hdds/utils/Scheduler.java    |   7 +-
 .../common/src/main/resources/ozone-default.xml    |  30 +--
 .../common/statemachine/DatanodeStateMachine.java  |   6 -
 .../CloseContainerCommandHandler.java              |  11 +-
 .../ClosePipelineCommandHandler.java               | 120 ------------
 .../commandhandler/CommandHandler.java             |   2 +-
 .../CreatePipelineCommandHandler.java              | 135 -------------
 .../states/endpoint/HeartbeatEndpointTask.java     |  22 ---
 .../common/transport/server/XceiverServerSpi.java  |  18 --
 .../transport/server/ratis/XceiverServerRatis.java |  36 ----
 .../protocol/commands/ClosePipelineCommand.java    |  73 -------
 .../protocol/commands/CreatePipelineCommand.java   | 100 ----------
 .../proto/StorageContainerDatanodeProtocol.proto   |  23 ---
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |   3 -
 .../hdds/scm/container/ContainerStateManager.java  |   1 -
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  12 +-
 .../scm/pipeline/BackgroundPipelineCreator.java    |   9 +-
 .../hadoop/hdds/scm/pipeline/PipelineFactory.java  |  13 +-
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  |  15 +-
 .../hadoop/hdds/scm/pipeline/PipelineProvider.java |   2 -
 .../hdds/scm/pipeline/PipelineReportHandler.java   |  54 +++---
 .../hdds/scm/pipeline/PipelineStateManager.java    |   4 +-
 .../hdds/scm/pipeline/RatisPipelineProvider.java   | 137 +++++++++-----
 .../hdds/scm/pipeline/RatisPipelineUtils.java      | 103 ++++++++++
 .../hdds/scm/pipeline/SCMPipelineManager.java      |  82 ++------
 .../hdds/scm/pipeline/SCMPipelineMetrics.java      |  10 -
 .../hdds/scm/pipeline/SimplePipelineProvider.java  |   5 -
 .../scm/safemode/HealthyPipelineSafeModeRule.java  |  83 ++++----
 .../safemode/OneReplicaPipelineSafeModeRule.java   |  65 ++++---
 .../hdds/scm/safemode/SCMSafeModeManager.java      |  16 +-
 .../hadoop/hdds/scm/safemode/SafeModeHandler.java  |   5 +-
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java |   1 -
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  20 --
 .../hdds/scm/server/StorageContainerManager.java   |   3 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  12 --
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  44 +----
 .../container/TestCloseContainerEventHandler.java  |  11 +-
 .../scm/container/TestSCMContainerManager.java     |   4 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   2 +-
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  |  11 +-
 .../hadoop/hdds/scm/node/TestSCMNodeManager.java   |   9 +-
 .../scm/pipeline/MockRatisPipelineProvider.java    |  10 +-
 .../scm/pipeline/TestRatisPipelineProvider.java    |  26 +--
 .../safemode/TestHealthyPipelineSafeModeRule.java  |  44 +++--
 .../TestOneReplicaPipelineSafeModeRule.java        |  36 +++-
 .../hdds/scm/safemode/TestSCMSafeModeManager.java  |  50 +++--
 hadoop-ozone/dist/src/main/compose/testlib.sh      |  35 ----
 .../TestContainerStateManagerIntegration.java      |   6 +-
 .../metrics/TestSCMContainerManagerMetrics.java    |   3 -
 .../hdds/scm/pipeline/TestPipelineClose.java       |   4 +-
 .../scm/pipeline/TestRatisPipelineProvider.java    | 210 ---------------------
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  |  93 ++-------
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   2 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  43 +++--
 .../hadoop/ozone/TestContainerOperations.java      |   2 +-
 .../TestContainerStateMachineIdempotency.java      |   2 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   6 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  18 +-
 .../apache/hadoop/ozone/client/rpc/TestBCSID.java  |   3 -
 .../client/rpc/TestContainerStateMachine.java      |   3 -
 .../rpc/TestContainerStateMachineFailures.java     |   9 +-
 .../ozone/container/TestContainerReplication.java  |   2 +-
 .../commandhandler/TestBlockDeletion.java          |   6 +-
 .../commandhandler/TestCloseContainerHandler.java  |   2 -
 .../commandhandler/TestDeleteContainerHandler.java |   2 -
 .../hadoop/ozone/dn/scrubber/TestDataScrubber.java |   2 -
 .../org/apache/hadoop/ozone/om/TestKeyPurging.java |   2 +-
 .../apache/hadoop/ozone/om/TestScmSafeMode.java    |   2 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |   2 +-
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  |   2 +-
 .../org/apache/hadoop/ozone/scm/TestSCMMXBean.java |   2 +-
 .../hadoop/ozone/scm/node/TestSCMNodeMetrics.java  |   4 +-
 .../hadoop/fs/ozone/TestOzoneFsRenameDir.java      |   2 +-
 .../hadoop/ozone/fsck/TestContainerMapper.java     |   2 +-
 76 files changed, 570 insertions(+), 1403 deletions(-)

commit e5a3b0cf0ba9f4ce1c214e4aa31f008f37d4e018
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Tue Nov 19 11:44:16 2019 +0100

    HDDS-2509. Code cleanup in replication package (#185)

 .../replication/ContainerStreamingOutput.java      |   5 +-
 .../replication/GrpcReplicationClient.java         |  24 ++-
 .../OnDemandContainerReplicationSource.java        |  13 +-
 .../replication/ReplicationSupervisor.java         |  61 ++++--
 .../replication/TestReplicationSupervisor.java     | 218 ++++++++++++++++-----
 .../ozone/container/replication/package-info.java  |  18 --
 .../ozone/container/TestContainerReplication.java  |   2 +-
 7 files changed, 228 insertions(+), 113 deletions(-)

commit ac59c4fdf1aec49556d95c439f59ca447bfb8120
Author: Dinesh Chitlangia <dineshchitlangia@gmail.com>
Date:   Tue Nov 19 01:19:30 2019 -0500

    HDDS-2486. Sonar: Avoid empty test methods (#220)

 .../test/java/org/apache/hadoop/hdds/utils/db/TestRDBTableStore.java  | 4 ----
 .../java/org/apache/hadoop/hdds/utils/db/TestTypedRDBTableStore.java  | 4 ----
 2 files changed, 8 deletions(-)

commit 287f9c19b273307e35da547e9fd3cad72dfca912
Author: Abhishek Purohit <15132313+abhishekaypurohit@users.noreply.github.com>
Date:   Mon Nov 18 20:56:58 2019 -0800

    HDDS-2514. removed unused method param (#189)

 .../java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java     | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit b8819c35eb98c17ca19797a04f73e1588e3bec24
Author: Abhishek Purohit <15132313+abhishekaypurohit@users.noreply.github.com>
Date:   Mon Nov 18 20:52:55 2019 -0800

    HDDS-2517. Immediately return rather than holding to variable and then returning (#192)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 4a4b03c668e3d1d1a78bb1556912302f34390a13
Author: Shweta Yakkali <shwetayakkali@cloudera.com>
Date:   Mon Nov 18 20:36:12 2019 -0800

    HDDS-2527. Sonar: remove redundant temporary assignment in HddsVersionProvider (#219)

 .../src/main/java/org/apache/hadoop/hdds/cli/HddsVersionProvider.java  | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit ecb5bf4df1d80723835a1500d595102f3f861708
Author: prashantpogde <prashant.pogde@gmail.com>
Date:   Mon Nov 18 20:33:36 2019 -0800

    HDDS-2490. Fixing sonarcloud errors. (#217)

 .../web/ozShell/bucket/AddAclBucketHandler.java    | 44 +++++------
 .../web/ozShell/bucket/CreateBucketHandler.java    | 64 ++++++++--------
 .../web/ozShell/bucket/DeleteBucketHandler.java    | 20 ++---
 .../web/ozShell/bucket/GetAclBucketHandler.java    | 37 ++++-----
 .../web/ozShell/bucket/InfoBucketHandler.java      | 22 +++---
 .../web/ozShell/bucket/ListBucketHandler.java      | 44 ++++++-----
 .../web/ozShell/bucket/RemoveAclBucketHandler.java | 43 ++++++-----
 .../ozone/web/ozShell/bucket/S3BucketMapping.java  | 26 ++++---
 .../web/ozShell/bucket/SetAclBucketHandler.java    | 35 ++++-----
 .../ozone/web/ozShell/keys/AddAclKeyHandler.java   | 59 +++++++-------
 .../ozone/web/ozShell/keys/DeleteKeyHandler.java   | 25 +++---
 .../ozone/web/ozShell/keys/GetKeyHandler.java      | 78 ++++++++++---------
 .../ozone/web/ozShell/keys/InfoKeyHandler.java     | 39 +++++-----
 .../ozone/web/ozShell/keys/ListKeyHandler.java     | 76 +++++++++---------
 .../ozone/web/ozShell/keys/PutKeyHandler.java      | 89 +++++++++++-----------
 .../web/ozShell/keys/RemoveAclKeyHandler.java      | 59 +++++++-------
 .../ozone/web/ozShell/keys/RenameKeyHandler.java   | 26 ++++---
 .../ozone/web/ozShell/keys/SetAclKeyHandler.java   | 39 +++++-----
 .../ozone/web/ozShell/s3/GetS3SecretHandler.java   | 25 +++---
 .../web/ozShell/token/CancelTokenHandler.java      | 34 +++++----
 .../ozone/web/ozShell/token/GetTokenHandler.java   | 38 ++++-----
 .../ozone/web/ozShell/token/RenewTokenHandler.java | 38 ++++-----
 .../web/ozShell/volume/AddAclVolumeHandler.java    | 37 ++++-----
 .../web/ozShell/volume/CreateVolumeHandler.java    | 55 ++++++-------
 .../web/ozShell/volume/DeleteVolumeHandler.java    | 15 ++--
 .../web/ozShell/volume/GetAclVolumeHandler.java    | 30 ++++----
 .../web/ozShell/volume/InfoVolumeHandler.java      | 11 ++-
 .../web/ozShell/volume/ListVolumeHandler.java      | 62 +++++++--------
 .../web/ozShell/volume/RemoveAclVolumeHandler.java | 37 ++++-----
 .../web/ozShell/volume/SetAclVolumeHandler.java    | 43 ++++++-----
 .../web/ozShell/volume/UpdateVolumeHandler.java    | 22 +++---
 31 files changed, 667 insertions(+), 605 deletions(-)

commit 0b5df11a34bae221962666080435079f5f56aa36
Author: Sammi Chen <sammichen@apache.org>
Date:   Tue Nov 19 10:21:22 2019 +0800

    HDDS-2499. IsLeader information is lost when update pipeline state. (#180)

 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  |  1 +
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  9 ++++
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  | 63 +++++++++-------------
 3 files changed, 36 insertions(+), 37 deletions(-)

commit d52fb260c9f47d2de715782f93ea0cba9c3d221f
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Mon Nov 18 02:20:49 2019 -0800

    HDDS-2488. Not enough arguments for log messages in GrpcXceiverService. (#191)

 .../container/common/transport/server/GrpcXceiverService.java     | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit b411439f5d7f1a8babff2eb12a8c45766ed9d6e0
Author: Dinesh Chitlangia <dineshchitlangia@gmail.com>
Date:   Mon Nov 18 04:58:18 2019 -0500

    HDDS-2520. Sonar: Avoid temporary variable scmSecurityClient (#208)

 .../org/apache/hadoop/hdds/scm/client/HddsClientUtils.java   | 12 +++++-------
 1 file changed, 5 insertions(+), 7 deletions(-)

commit 4ba40651fa3313b474cead342a01e5e356ae533a
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Mon Nov 18 15:26:05 2019 +0530

    HDDS-2526. Sonar : use format specifiers in Log inside HddsConfServlet (#211)

 .../src/main/java/org/apache/hadoop/hdds/conf/HddsConfServlet.java      | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6be3c848f7a6a2f4003bfa4327de5994f58e8e95
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Mon Nov 18 15:24:27 2019 +0530

    HDDS-2524. Sonar : clumsy error handling in BlockOutputStream validateResponse. (#209)

 .../org/apache/hadoop/hdds/scm/storage/BlockOutputStream.java     | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 89bdb6a69e6314384e79f76e509cf99437877780
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Mon Nov 18 10:06:58 2019 +0100

    HDDS-2521. Multipart upload failing with NPE
    
    Closes #206

 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   | 141 ++++++++++-----------
 .../hadoop/ozone/client/OzoneOutputStreamStub.java |   8 +-
 2 files changed, 74 insertions(+), 75 deletions(-)

commit 8af5ab8dacdea4e882491ea0d9ebe81806ebf9fa
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Mon Nov 18 14:53:28 2019 +0530

    HDDS-2525. Sonar : replace lambda with method reference in SCM BufferPool. (#210)

 .../src/main/java/org/apache/hadoop/hdds/scm/storage/BufferPool.java    | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a9a9f4fdfe0a2bf04eab3fc22541186fc0587d27
Author: Siddharth <swagle@hortonworks.com>
Date:   Sun Nov 17 14:53:37 2019 -0800

    HDDS-2489. Change anonymous class based initialization in HddsUtils. (#172)

 .../hadoop/hdds/scm/client/HddsClientUtils.java    | 25 +++++++++++-----------
 1 file changed, 12 insertions(+), 13 deletions(-)

commit 1b72718dcab7f83ebdac67b6242c729f03a8f103
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Sat Nov 16 05:11:36 2019 +0100

    HDDS-2503. Close FlushOptions in RDBStore (#181)

 .../org/apache/hadoop/hdds/utils/db/RDBStore.java  | 38 ++++++++++------------
 1 file changed, 18 insertions(+), 20 deletions(-)

commit b01c7c9da32c1e5c9469b8f9b14052ebcd342243
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Sat Nov 16 05:08:12 2019 +0100

    HDDS-2461. Logging by ChunkUtils is misleading (#144)

 .../container/keyvalue/helpers/ChunkUtils.java     | 30 ++++++++++------------
 .../keyvalue/impl/ChunkManagerDummyImpl.java       | 11 ++++----
 .../container/keyvalue/impl/ChunkManagerImpl.java  |  5 +++-
 .../container/keyvalue/helpers/TestChunkUtils.java | 19 ++++++++++++++
 4 files changed, 43 insertions(+), 22 deletions(-)

commit dba972d0f5cb1da36708740c5ed0fdc9c947ab03
Author: Abhishek Purohit <15132313+abhishekaypurohit@users.noreply.github.com>
Date:   Fri Nov 15 19:57:03 2019 -0800

    HDDS-2513. Removed unused private field (#187)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java      | 1 -
 1 file changed, 1 deletion(-)

commit 493a9164f975a25fb3462fdd1df1ff75ba032b8a
Author: Siddharth <swagle@hortonworks.com>
Date:   Fri Nov 15 19:34:12 2019 -0800

    HDDS-2501. Sonar: Fix issues found in the ObjectEndpoint class. (#198)

 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   | 110 ++++++++++-----------
 1 file changed, 52 insertions(+), 58 deletions(-)

commit 79e3ff9a4bc2691426c0e15249effc066f86b7e2
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Sat Nov 16 04:28:12 2019 +0100

    HDDS-2405. int2ByteString unnecessary byte array allocation (#197)

 .../main/java/org/apache/hadoop/ozone/common/Checksum.java   | 12 ++----------
 1 file changed, 2 insertions(+), 10 deletions(-)

commit ee6f22dd9cbcae9eb6f6f73c0a1c08c2577522bd
Author: Siddharth <swagle@hortonworks.com>
Date:   Fri Nov 15 19:25:56 2019 -0800

    HDDS-2502. Close ScmClient in RatisInsight. (#199)

 .../apache/hadoop/ozone/insight/LogSubcommand.java |  2 +-
 .../ozone/insight/datanode/RatisInsight.java       | 32 ++++++++++++----------
 2 files changed, 19 insertions(+), 15 deletions(-)

commit 5d513851de7ed89d8acd569a74f981f2172e2793
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Sat Nov 16 01:15:41 2019 +0100

    HDDS-2507. Remove the hard-coded exclusion of TestMiniChaosOzoneCluster (#182)

 hadoop-ozone/dev-support/checks/integration.sh | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 6fd2ef0159e71f62abdddaaee3b36fdbff411862
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Fri Nov 15 16:10:02 2019 -0800

    HDDS-2511. Fix Sonar issues in OzoneManagerServiceProviderImpl. (#188)

 .../recon/spi/impl/OzoneManagerServiceProviderImpl.java    | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

commit baf6cef0db7459241ed62b0020a112d09f6a6a56
Author: Abhishek Purohit <15132313+abhishekaypurohit@users.noreply.github.com>
Date:   Fri Nov 15 16:07:51 2019 -0800

    HDDS-2515. no need of toString since log formatter can intatnally handles that. (#190)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit faedad711b83a1221b16019101874c9f65e682c7
Author: Craig Condit <apache@craigcondit.com>
Date:   Fri Nov 15 16:24:29 2019 -0600

    HDDS-2500. Avoid fall-through in CloseContainerCommandHandler (#186)

 .../statemachine/commandhandler/CloseContainerCommandHandler.java      | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 9f57785b7ddd9046c0f56c6a79ac6aa610420b04
Author: Tsz-Wo Nicholas Sze <szetszwo@apache.org>
Date:   Fri Nov 15 14:19:24 2019 -0800

    HDDS-2375. Refactor BlockOutputStream to allow flexible buffering. (#97)

 .../hadoop/hdds/scm/storage/BlockOutputStream.java |  31 ++---
 .../apache/hadoop/hdds/scm/storage/BufferPool.java |  19 +--
 .../hadoop/hdds/scm/storage/CommitWatcher.java     |  19 ++-
 .../hdds/ratis/ContainerCommandRequestMessage.java |   3 +-
 .../org/apache/hadoop/hdds/ratis/RatisHelper.java  |  12 --
 .../org/apache/hadoop/ozone/common/Checksum.java   |  17 ++-
 .../apache/hadoop/ozone/common/ChunkBuffer.java    |  87 +++++++++++++
 .../common/ChunkBufferImplWithByteBuffer.java      | 108 +++++++++++++++++
 .../ratis/TestContainerCommandRequestMessage.java  |   8 +-
 .../hadoop/ozone/common/TestChunkBuffer.java       | 134 +++++++++++++++++++++
 .../hadoop/ozone/client/rpc/TestCommitWatcher.java |  14 +--
 11 files changed, 381 insertions(+), 71 deletions(-)

commit bd0d873baa19e3fa0c6852f37d275fd34718e800
Author: Matthew Sharp <56448373+mbsharp@users.noreply.github.com>
Date:   Fri Nov 15 15:10:30 2019 -0500

    HDDS-2418 Add the list trash command to the server side handling (#143)

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  4 +++
 .../common/src/main/resources/ozone-default.xml    |  8 ++++++
 .../apache/hadoop/ozone/om/OMMetadataManager.java  | 18 +++++++++++++
 .../org/apache/hadoop/ozone/om/KeyManager.java     | 19 +++++++++++++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 21 +++++++++++++++
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  9 +++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 31 +++++++++++++++++++---
 .../protocolPB/OzoneManagerRequestHandler.java     | 28 +++++++++++++++++++
 8 files changed, 135 insertions(+), 3 deletions(-)

commit 2f94fec2c93001fb1bf8b334b5e46d3f574db51f
Author: Craig Condit <github@craigcondit.com>
Date:   Fri Nov 15 13:02:01 2019 -0600

    Fix sonar warnings in HddsUtils (#184)

 .../common/src/main/java/org/apache/hadoop/hdds/HddsUtils.java      | 6 ++++++
 1 file changed, 6 insertions(+)

commit 43be5c8c39358dd80f45a596834636247ab8ad1e
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Fri Nov 15 09:19:11 2019 -0800

    HDDS-2472. Use try-with-resources while creating FlushOptions in RDBStore (#161)

 .../main/java/org/apache/hadoop/hdds/utils/db/RDBStore.java | 13 +++++--------
 1 file changed, 5 insertions(+), 8 deletions(-)

commit 52648825f11fb4970f27fbd9953016f1bdcfe67a
Author: Matthew Sharp <mbsharp85@gmail.com>
Date:   Fri Nov 15 14:35:23 2019 +0100

    HDDS-2495. Sonar - "notify" may not wake up the appropriate thread
    
    Closes #176

 .../java/org/apache/hadoop/hdds/scm/container/ReplicationManager.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit aa828b123de5fc1697111c2537ec649716811c9b
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Nov 15 13:57:31 2019 +0100

    HDDS-2470. Add partName, partNumber for CommitMultipartUpload
    
    Closes #155

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  2 ++
 .../S3MultipartUploadCommitPartRequest.java        | 23 ++++++++++++++++++----
 2 files changed, 21 insertions(+), 4 deletions(-)

commit d05ff4e39604c8c819a861402329dd190dfa8cb2
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Nov 15 13:22:36 2019 +0100

    HDDS-2471. Improve exception message for CompleteMultipartUpload
    
    Closes #156

 .../om/request/s3/multipart/S3MultipartUploadCompleteRequest.java   | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit a1ea8a4ecb1fd53b5638d02fbe8249069bf8482b
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Nov 15 12:26:05 2019 +0100

    HDDS-2468. scmcli close pipeline command not working
    
    Closes #169

 ...eContainerLocationProtocolServerSideTranslatorPB.java | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

commit 3ca37b1e542be2dbaf6c1f79c4ca55c04230a254
Author: Li Cheng <bloodhell2004@gmail.com>
Date:   Fri Nov 15 17:01:30 2019 +0800

    HDDS-2492 Fix test clean up issue in TestSCMPipelineManager. (#179)

 .../org/apache/hadoop/hdds/scm/pipeline/TestSCMPipelineManager.java  | 5 +++++
 1 file changed, 5 insertions(+)

commit 3869296e976a07f55c1510185ad9b27866c011d8
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Fri Nov 15 06:16:34 2019 +0100

    HDDS-2487. Ensure streams are closed (#173)

 .../ozone/container/common/impl/ContainerDataYaml.java |  5 ++++-
 .../src/main/java/org/apache/hadoop/ozone/OmUtils.java | 18 ++++++++++--------
 2 files changed, 14 insertions(+), 9 deletions(-)

commit 37dc306f26bacf33c35ad11cff68f87a5b11e81f
Author: Matthew Sharp <56448373+mbsharp@users.noreply.github.com>
Date:   Fri Nov 15 00:11:33 2019 -0500

    HDDS-2494 Sonar BigDecimal Cleanup (#175)

 .../common/src/main/java/org/apache/hadoop/hdds/utils/db/DBProfile.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0e403a517d6a160f68c24d35289184cee2d02ef9
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Nov 15 03:18:30 2019 +0100

    HDDS-2482. Enable github worflow actions full pull requests (#171)

 .github/workflows/main.yml | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 89d11ad88ee9fa705e3e57e81215067c6f187493
Author: Sammi Chen <sammichen@apache.org>
Date:   Fri Nov 15 09:06:43 2019 +0800

    HDDS-2034. Async RATIS pipeline creation and destroy through heartbeat commands (#29)

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  12 +-
 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  |   5 +
 .../org/apache/hadoop/hdds/utils/Scheduler.java    |   7 +-
 .../common/src/main/resources/ozone-default.xml    |  30 ++-
 .../common/statemachine/DatanodeStateMachine.java  |   6 +
 .../CloseContainerCommandHandler.java              |  11 +-
 .../ClosePipelineCommandHandler.java               | 120 ++++++++++++
 .../commandhandler/CommandHandler.java             |   2 +-
 .../CreatePipelineCommandHandler.java              | 135 +++++++++++++
 .../states/endpoint/HeartbeatEndpointTask.java     |  22 +++
 .../common/transport/server/XceiverServerSpi.java  |  18 ++
 .../transport/server/ratis/XceiverServerRatis.java |  36 ++++
 .../protocol/commands/ClosePipelineCommand.java    |  73 +++++++
 .../protocol/commands/CreatePipelineCommand.java   | 100 ++++++++++
 .../proto/StorageContainerDatanodeProtocol.proto   |  23 +++
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |   3 +
 .../hdds/scm/container/ContainerStateManager.java  |   1 +
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  12 +-
 .../scm/pipeline/BackgroundPipelineCreator.java    |   9 +-
 .../hadoop/hdds/scm/pipeline/PipelineFactory.java  |  13 +-
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  |  15 +-
 .../hadoop/hdds/scm/pipeline/PipelineProvider.java |   2 +
 .../hdds/scm/pipeline/PipelineReportHandler.java   |  54 +++---
 .../hdds/scm/pipeline/PipelineStateManager.java    |   4 +-
 .../hdds/scm/pipeline/RatisPipelineProvider.java   | 137 +++++---------
 .../hdds/scm/pipeline/RatisPipelineUtils.java      | 103 ----------
 .../hdds/scm/pipeline/SCMPipelineManager.java      |  82 ++++++--
 .../hdds/scm/pipeline/SCMPipelineMetrics.java      |  10 +
 .../hdds/scm/pipeline/SimplePipelineProvider.java  |   5 +
 .../scm/safemode/HealthyPipelineSafeModeRule.java  |  83 ++++----
 .../safemode/OneReplicaPipelineSafeModeRule.java   |  65 +++----
 .../hdds/scm/safemode/SCMSafeModeManager.java      |  16 +-
 .../hadoop/hdds/scm/safemode/SafeModeHandler.java  |   5 +-
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java |   1 +
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  20 ++
 .../hdds/scm/server/StorageContainerManager.java   |   3 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  13 ++
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  44 ++++-
 .../container/TestCloseContainerEventHandler.java  |  11 +-
 .../scm/container/TestSCMContainerManager.java     |   4 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   2 +-
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  |  11 +-
 .../hadoop/hdds/scm/node/TestSCMNodeManager.java   |   9 +-
 .../scm/pipeline/MockRatisPipelineProvider.java    |  10 +-
 .../scm/pipeline/TestRatisPipelineProvider.java    |  26 ++-
 .../safemode/TestHealthyPipelineSafeModeRule.java  |  44 ++---
 .../TestOneReplicaPipelineSafeModeRule.java        |  36 +---
 .../hdds/scm/safemode/TestSCMSafeModeManager.java  |  50 ++---
 hadoop-ozone/dist/src/main/compose/testlib.sh      |  35 ++++
 .../TestContainerStateManagerIntegration.java      |   6 +-
 .../metrics/TestSCMContainerManagerMetrics.java    |   3 +
 .../hdds/scm/pipeline/TestPipelineClose.java       |   4 +-
 .../scm/pipeline/TestRatisPipelineProvider.java    | 210 +++++++++++++++++++++
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  |  97 ++++++++--
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   2 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  43 ++---
 .../hadoop/ozone/TestContainerOperations.java      |   2 +-
 .../TestContainerStateMachineIdempotency.java      |   2 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   6 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  18 +-
 .../apache/hadoop/ozone/client/rpc/TestBCSID.java  |   3 +
 .../client/rpc/TestContainerStateMachine.java      |   3 +
 .../rpc/TestContainerStateMachineFailures.java     |   9 +-
 .../ozone/container/TestContainerReplication.java  |   2 +-
 .../commandhandler/TestBlockDeletion.java          |   6 +-
 .../commandhandler/TestCloseContainerHandler.java  |   2 +
 .../commandhandler/TestDeleteContainerHandler.java |   2 +
 .../hadoop/ozone/dn/scrubber/TestDataScrubber.java |   2 +
 .../org/apache/hadoop/ozone/om/TestKeyPurging.java |   2 +-
 .../apache/hadoop/ozone/om/TestScmSafeMode.java    |   2 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |   2 +-
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  |   2 +-
 .../org/apache/hadoop/ozone/scm/TestSCMMXBean.java |   2 +-
 .../hadoop/ozone/scm/node/TestSCMNodeMetrics.java  |   4 +-
 .../hadoop/fs/ozone/TestOzoneFsRenameDir.java      |   2 +-
 .../hadoop/ozone/fsck/TestContainerMapper.java     |   2 +-
 76 files changed, 1408 insertions(+), 570 deletions(-)

commit 0d86870c3c12c1b155aac30f22ed23b06c26423e
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Thu Nov 14 18:25:04 2019 +0100

    HDDS-2481. Close streams in TarContainerPacker (#167)

 .../container/keyvalue/TarContainerPacker.java     | 170 ++++++++++-----------
 1 file changed, 85 insertions(+), 85 deletions(-)

commit d0fd848eb9a85da9b4e93eec2ee92a8b1eb4d662
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Thu Nov 14 09:20:54 2019 -0800

    HDDS-2473. Fix code reliability issues found by Sonar in Ozone Recon module. (#162)

 .../org/apache/hadoop/ozone/recon/ReconUtils.java  | 22 +++++++++++++---------
 .../ozone/recon/api/ContainerKeyService.java       | 22 +++++-----------------
 .../hadoop/ozone/recon/api/types/KeyMetadata.java  |  6 ++++--
 .../spi/impl/OzoneManagerServiceProviderImpl.java  | 19 ++++++++++---------
 4 files changed, 32 insertions(+), 37 deletions(-)

commit 8a11fe3206c7801ddb0f31ef57e6e00521005407
Author: Stephen O'Donnell <stephen.odonnell@gmail.com>
Date:   Thu Nov 14 17:12:49 2019 +0000

    HDDS-2450 Datanode ReplicateContainer thread pool should be configurable (#134)

 .../org/apache/hadoop/hdds/conf/ConfigTag.java     |  3 +-
 .../common/statemachine/DatanodeConfiguration.java | 61 ++++++++++++++++++++++
 .../common/statemachine/DatanodeStateMachine.java  |  9 +++-
 3 files changed, 70 insertions(+), 3 deletions(-)

commit 287b32235c4feedf9c668f1cd078be931e65752d
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Thu Nov 14 22:31:07 2019 +0530

    HDDS-2479. Sonar : replace instanceof with catch block in XceiverClientGrpc sendCommandWithRetry (#168)

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java    | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

commit 49dbb188358f9ed2551f03556ceba03b96bd4a86
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Thu Nov 14 22:23:59 2019 +0530

    HDDS-2480. Sonar : remove log spam for exceptions inside XceiverClientGrpc reconnect (#170)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java    | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit e350aef67eec15437032ab713ae3d882c2bff61c
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Thu Nov 14 22:19:31 2019 +0530

    HDDS-2478. Sonar : remove temporary variable in XceiverClientGrpc sendCommand (#165)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit 528cea3a7df6c96cb2ba633d4cd5ac35b1a6391b
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Nov 14 06:56:20 2019 +0530

    HDDS-1940. Closing open container via scmcli gives false error message. (#153)

 .../hdds/scm/client/ContainerOperationClient.java  | 65 ++--------------------
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |  9 ---
 .../protocol/StorageContainerLocationProtocol.java | 18 ++----
 ...inerLocationProtocolClientSideTranslatorPB.java | 37 +++++-------
 .../org/apache/hadoop/ozone/audit/SCMAction.java   |  1 +
 .../proto/StorageContainerLocationProtocol.proto   | 30 +++-------
 ...inerLocationProtocolServerSideTranslatorPB.java | 19 +++----
 .../hdds/scm/server/SCMClientProtocolServer.java   | 49 ++++++++--------
 8 files changed, 63 insertions(+), 165 deletions(-)

commit 659385ec5c2c2aa90e9bc71841a59cec3611774f
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Thu Nov 14 00:47:25 2019 +0100

    HDDS-2469. Avoid changing client-side key metadata (#154)

 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 31 +++++++++++-----------
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  5 ++--
 2 files changed, 18 insertions(+), 18 deletions(-)

commit e39134d373ce2405224ddad3e42b417edfc66caa
Author: Chris <teoh_csp@hotmail.com>
Date:   Thu Nov 14 09:01:42 2019 +1100

    HDDS-1847: Datanode Kerberos principal and keytab config key looks inconsistent (#115)

 .../hadoop/hdds/protocol/SCMSecurityProtocol.java  |  4 +-
 .../hdds/protocolPB/SCMSecurityProtocolPB.java     |  5 +-
 .../java/org/apache/hadoop/hdds/scm/ScmConfig.java | 76 ++++++++++++++++++++
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  | 11 +--
 .../scm/protocol/ScmBlockLocationProtocol.java     |  5 +-
 .../protocol/StorageContainerLocationProtocol.java |  5 +-
 .../scm/protocolPB/ScmBlockLocationProtocolPB.java |  4 +-
 .../StorageContainerLocationProtocolPB.java        |  4 +-
 .../common/src/main/resources/ozone-default.xml    | 26 -------
 .../protocol/StorageContainerDatanodeProtocol.java |  5 +-
 .../StorageContainerDatanodeProtocolPB.java        |  4 +-
 .../hdds/scm/server/SCMHTTPServerConfig.java       | 82 ++++++++++++++++++++++
 .../hdds/scm/server/SCMSecurityProtocolServer.java |  3 +-
 .../hdds/scm/server/StorageContainerManager.java   | 14 ++--
 .../server/StorageContainerManagerHttpServer.java  |  6 +-
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 30 +++++---
 16 files changed, 213 insertions(+), 71 deletions(-)

commit c83d5bcc85aec4cfe321906adb36ca7a98ca5f13
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Wed Nov 13 13:58:58 2019 -0800

    HDDS-2364. Add OM metrics to find the false positive rate for the keyMayExist. (#101)

 .../apache/hadoop/hdds/utils/db/RDBMetrics.java    | 75 ++++++++++++++++++++++
 .../org/apache/hadoop/hdds/utils/db/RDBStore.java  | 10 ++-
 .../org/apache/hadoop/hdds/utils/db/RDBTable.java  | 18 +++++-
 .../hadoop/hdds/utils/db/TestRDBTableStore.java    | 49 ++++++++++++--
 .../org/apache/hadoop/ozone/recon/ReconServer.java |  3 +
 .../recon/spi/OzoneManagerServiceProvider.java     |  2 +-
 .../spi/impl/OzoneManagerServiceProviderImpl.java  |  3 +-
 7 files changed, 148 insertions(+), 12 deletions(-)

commit cb66b48217ea4a62296c9a0fcf0c8e2b6a635503
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Wed Nov 13 22:48:41 2019 +0100

    HDDS-2412. Define description/topics/merge strategy for the github repository (#125)
    
    Co-Authored-By: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>

 .asf.yaml | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)

commit 86c76ff5b030d93e7d6d08a647065e81a800989e
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Wed Nov 13 22:45:07 2019 +0100

    HDDS-2400. Enable github actions based builds for Ozone (#122)

 .github/buildenv/Dockerfile                        |  20 ++++
 .github/buildenv/entrypoint.sh                     |  18 ++++
 .github/workflows/main.yml                         | 113 +++++++++++++++++++++
 .../src/main/smoketest/basic/ozone-shell.robot     |   6 +-
 .../dist/src/main/smoketest/ozonefs/ozonefs.robot  |  14 +--
 5 files changed, 161 insertions(+), 10 deletions(-)

commit 42b69093dd800501481714d7154ddbad68e392f6
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Nov 13 18:19:11 2019 +0100

    HDDS-2458. Avoid list copy in ChecksumData. (#141)

 .../org/apache/hadoop/ozone/common/Checksum.java   |  8 ++-----
 .../apache/hadoop/ozone/common/ChecksumData.java   | 28 ++++++----------------
 2 files changed, 9 insertions(+), 27 deletions(-)

commit fe85445e15f02f2fe34f5267eecdbcc80b2f455c
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Nov 13 18:10:55 2019 +0100

    HDDS-2464. Avoid unnecessary allocations for FileChannel.open call. (#147)

 .../container/keyvalue/helpers/ChunkUtils.java     | 25 ++++++++++++++++------
 1 file changed, 19 insertions(+), 6 deletions(-)

commit 1f8c66ac25ffe9df1bf9c97d85436e316b1f9acc
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Nov 13 08:49:57 2019 -0800

    HDDS-2463. Reduce unnecessary getServiceInfo calls. Contributed by Xiaoyu Yao. (#146)

 .../hadoop/ozone/protocolPB/OzoneManagerRequestHandler.java       | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit d816b642e265ae4d296c8cdfb7df67b97a2cabab
Author: Sandeep Nemuri <snemuri@cloudera.com>
Date:   Wed Nov 13 22:14:40 2019 +0530

    HDDS-2452: Wrong condition for re-scheduling in ReportPublisher (#151)

 .../apache/hadoop/ozone/container/common/report/ReportPublisher.java    | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ef2a9f4b9bcbaa7855fbaa0a9b124c2924417055
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Nov 13 15:01:15 2019 +0100

    HDDS-2445. Replace ToStringBuilder in BlockData
    
    Closes #132

 .../org/apache/hadoop/hdds/client/BlockID.java     |  12 +-
 .../hadoop/hdds/client/ContainerBlockID.java       |  13 +-
 .../ozone/container/common/helpers/BlockData.java  |  32 ++--
 .../container/common/helpers/TestBlockData.java    |  12 ++
 .../ozone/genesis/BenchmarkBlockDataToString.java  | 166 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/genesis/Genesis.java   |   2 +
 6 files changed, 219 insertions(+), 18 deletions(-)

commit 4337bb0c8ac959a5b5c6c68bbeda22d5e0e13a8f
Author: Sandeep Nemuri <snemuri@cloudera.com>
Date:   Wed Nov 13 14:45:16 2019 +0100

    HDDS-2403. Remove leftover reference to OUTPUT_FILE from shellcheck.sh
    
    Closes #149

 hadoop-ozone/dev-support/checks/shellcheck.sh | 1 -
 1 file changed, 1 deletion(-)

commit c199a293c3971082ec8c6c3e048ef670f00584a2
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Nov 13 14:36:27 2019 +0100

    HDDS-2451. Use lazy string evaluation in preconditions
    
    Closes #135

 .../common/src/main/java/org/apache/hadoop/hdds/HddsUtils.java    | 2 +-
 .../commandhandler/ReplicateContainerCommandHandler.java          | 4 ++--
 .../common/transport/server/ratis/ContainerStateMachine.java      | 8 ++++----
 .../protocolPB/OzoneManagerProtocolServerSideTranslatorPB.java    | 2 +-
 4 files changed, 8 insertions(+), 8 deletions(-)

commit 2211d63574c29baf8142ece312fa3d17c30b6e55
Author: Sandeep Nemuri <snemuri@cloudera.com>
Date:   Wed Nov 13 13:39:36 2019 +0100

    HDDS-2460. Default checksum type is wrong in description
    
    Closes #150

 hadoop-hdds/common/src/main/resources/ozone-default.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1e71b63e806b31eb49643d54dd0f187d141d67b7
Author: Istvan Fajth <pifta@cloudera.com>
Date:   Tue Nov 12 21:57:29 2019 +0100

    HDDS-2462. Add jq dependency in Contribution guideline (#145)

 CONTRIBUTION.md | 1 +
 1 file changed, 1 insertion(+)

commit 1c1aecf825ff6df3addd816d9a15640bf7cfaff6
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Tue Nov 12 17:15:03 2019 +0100

    HDDS-2456. Add explicit base image version for images derived from ozone-runner
    
    Closes #139

 .../dist/src/main/compose/ozone-om-ha/Dockerfile   |  4 ++-
 .../main/compose/ozone-om-ha/docker-compose.yaml   | 30 ++++++++++++++++++----
 .../dist/src/main/compose/ozonescripts/Dockerfile  |  6 ++++-
 .../dist/src/main/compose/ozonescripts/README.md   |  6 ++---
 .../main/compose/ozonescripts/docker-compose.yaml  | 18 ++++++++++---
 5 files changed, 51 insertions(+), 13 deletions(-)

commit ee8b89a421def7fa426cd760eed7deee7d03f52a
Author: Siddharth <swagle@hortonworks.com>
Date:   Tue Nov 12 07:54:40 2019 -0800

    HDDS-1868. Ozone pipelines should be marked as ready only after the leader election is complete. (#23)

 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  |  54 ++++++--
 hadoop-hdds/common/src/main/proto/hdds.proto       |  12 +-
 .../common/report/PipelineReportPublisher.java     |   4 +-
 .../server/ratis/ContainerStateMachine.java        |   8 ++
 .../transport/server/ratis/XceiverServerRatis.java |  27 +++-
 .../proto/StorageContainerDatanodeProtocol.proto   |   1 +
 .../hdds/scm/pipeline/PipelineReportHandler.java   |  50 +++----
 .../hdds/scm/pipeline/PipelineStateManager.java    |   8 +-
 .../hdds/scm/pipeline/RatisPipelineProvider.java   |  13 +-
 .../scm/safemode/HealthyPipelineSafeModeRule.java  |  75 +++++-----
 .../hadoop/hdds/scm/safemode/SafeModeHandler.java  |   5 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |   4 +-
 .../scm/pipeline/MockRatisPipelineProvider.java    |  15 ++
 .../safemode/TestHealthyPipelineSafeModeRule.java  |   3 +-
 .../TestOneReplicaPipelineSafeModeRule.java        |   3 +-
 .../hdds/scm/safemode/TestSCMSafeModeManager.java  |   6 +-
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  | 151 +++++++++++----------
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  58 +++++++-
 .../ozone/scm/pipeline/TestSCMPipelineMetrics.java |   3 +
 19 files changed, 314 insertions(+), 186 deletions(-)

commit 3b0a49edcec015136f49aebcf2bb14459d4b3fd3
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Tue Nov 12 16:28:00 2019 +0100

    HDDS-2415. Completely disable tracer if hdds.tracing.enabled=false
    
    Closes #128

 .../apache/hadoop/hdds/tracing/StringCodec.java    | 17 +++---
 .../apache/hadoop/hdds/tracing/TracingUtil.java    | 64 ++++++++++------------
 .../apache/hadoop/ozone/HddsDatanodeService.java   |  2 +-
 .../scm/server/StorageContainerManagerStarter.java |  5 +-
 .../hadoop/ozone/om/OzoneManagerStarter.java       |  3 +-
 .../hadoop/ozone/web/ozShell/OzoneShell.java       |  2 +-
 .../hadoop/ozone/web/ozShell/s3/S3Shell.java       |  5 +-
 .../java/org/apache/hadoop/ozone/freon/Freon.java  |  9 ++-
 8 files changed, 51 insertions(+), 56 deletions(-)

commit a6f80c096b5320f50b6e9e9b4ba5f7c7e3544385
Author: Márton Elek <elek@apache.org>
Date:   Mon Nov 11 19:09:55 2019 +0100

    HDDS-2325. BenchMarkDatanodeDispatcher genesis test is failing with NPE
    
    Closes #60

 .../container/common/impl/HddsDispatcher.java      |  5 ++
 .../ozone/container/common/interfaces/Handler.java | 60 ++++++++--------
 .../ozone/container/keyvalue/KeyValueHandler.java  | 12 ++--
 .../ozone/container/ozoneimpl/OzoneContainer.java  | 59 ++++++++++------
 .../container/common/impl/TestHddsDispatcher.java  | 16 +++--
 .../container/common/interfaces/TestHandler.java   |  8 ++-
 .../container/keyvalue/TestKeyValueHandler.java    | 10 ++-
 .../TestKeyValueHandlerWithUnhealthyContainer.java |  7 +-
 .../container/metrics/TestContainerMetrics.java    |  9 ++-
 .../container/server/TestContainerServer.java      |  7 +-
 .../server/TestSecureContainerServer.java          |  7 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java | 82 ++++++++++++----------
 .../org/apache/hadoop/ozone/genesis/Genesis.java   |  3 +-
 13 files changed, 169 insertions(+), 116 deletions(-)

commit f7ba61684460dbeff67886c6b7cbfcda7688ec2c
Author: Matthew Sharp <56448373+mbsharp@users.noreply.github.com>
Date:   Sun Nov 10 20:31:09 2019 -0500

    HDDS-2417 Add the list trash command to the client side (#138)

 .../ozone/client/protocol/ClientProtocol.java      | 20 +++++++++++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 12 +++++++
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  1 +
 .../ozone/om/protocol/OzoneManagerProtocol.java    | 19 ++++++++++
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 42 ++++++++++++++++++++++
 .../src/main/proto/OzoneManagerProtocol.proto      | 21 +++++++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 11 ++++++
 7 files changed, 126 insertions(+)

commit 93d0db46a36132e2ececc449b7d4f102ab7b818c
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Nov 8 20:49:43 2019 +0100

    HDDS-2410. Ozoneperf docker cluster should use privileged containers (#124)

 hadoop-ozone/dist/src/main/compose/ozoneperf/docker-compose.yaml | 4 ++++
 1 file changed, 4 insertions(+)

commit f928a0bdb4ea2e5195da39256c6dda9f1c855649
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Fri Nov 8 16:27:57 2019 +0100

    HDDS-2273. Avoid buffer copying in GrpcReplicationService. Contributed by Attila Doroszlai

 .../container/replication/GrpcOutputStream.java    | 129 +++++++++++++
 .../replication/GrpcReplicationService.java        |  94 ++-------
 .../replication/TestGrpcOutputStream.java          | 213 +++++++++++++++++++++
 3 files changed, 356 insertions(+), 80 deletions(-)

commit 9ce2dd703cb43e5e81ba8b3a25d4ad33a156f810
Author: cxorm <lianp964@gmail.com>
Date:   Fri Nov 8 15:31:25 2019 +0100

    HDDS-1701. Move dockerbin script to libexec
    
    Closes #80

 hadoop-ozone/dist/dev-support/bin/dist-layout-stitching               | 4 +++-
 hadoop-ozone/dist/pom.xml                                             | 2 +-
 hadoop-ozone/dist/src/main/docker/Dockerfile                          | 2 ++
 hadoop-ozone/dist/src/main/{dockerbin => dockerlibexec}/entrypoint.sh | 0
 hadoop-ozone/dist/src/main/{dockerbin => dockerlibexec}/envtoconf.py  | 0
 .../dist/src/main/{dockerbin => dockerlibexec}/transformation.py      | 0
 6 files changed, 6 insertions(+), 2 deletions(-)

commit 6a450fbf59ef8f9c5005eb856ed9a4c38b5bcc10
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Nov 8 10:24:40 2019 +0100

    HDDS-2427. Exclude webapps from hadoop-ozone-filesystem-lib-current uber jar
    
    Closes #129

 hadoop-ozone/ozonefs-lib-current/pom.xml | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

commit f2f97ea9bb68a177166ebc50c4e5ccb09c12922a
Author: Neo Yang <cku328@gmail.com>
Date:   Fri Nov 8 13:36:43 2019 +0800

    HDDS-2399. Update mailing list information. (#126)

 CONTRIBUTION.md | 4 ++--
 README.md       | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 8e00c2efdab98dc654bf5e63bcc166f647865310
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Nov 7 21:23:40 2019 -0800

    HDDS-2395. Handle completeMPU scenarios to match with aws s3 behavior. (#109)

 .../hadoop/ozone/om/exceptions/OMException.java    |   8 +-
 .../om/helpers/OmMultipartUploadCompleteList.java  |   8 +-
 .../src/main/proto/OzoneManagerProtocol.proto      |   3 +
 .../src/main/smoketest/s3/MultipartUpload.robot    |  31 ++-
 .../client/rpc/TestOzoneRpcClientAbstract.java     |   6 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 119 +----------
 .../S3MultipartUploadCompleteRequest.java          | 235 +++++++++++----------
 .../S3MultipartUploadCompleteResponse.java         |  29 ++-
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   |  29 ++-
 .../hadoop/ozone/client/OzoneBucketStub.java       |  26 +--
 .../s3/endpoint/TestMultipartUploadComplete.java   |   8 +-
 11 files changed, 233 insertions(+), 269 deletions(-)

commit ab7987c0de2a06f14603f726c441491454ce13ba
Author: Abhishek Purohit <apurohit@cloudera.com>
Date:   Mon Nov 4 10:05:48 2019 -0800

    HDDS-2404. Added support for Registered id as service identifier for CSR. Based on the discussion with reviewer, otherName field make more sence then registeredId.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../authority/PKIProfiles/DefaultProfile.java      |  4 +++
 .../certificates/utils/CertificateSignRequest.java | 41 +++++++++++++++++++++-
 .../certificate/authority/TestDefaultCAServer.java |  1 +
 .../certificate/authority/TestDefaultProfile.java  |  3 +-
 4 files changed, 47 insertions(+), 2 deletions(-)

commit d893cd374032d9e9ea1517c8a1ba6af9b3440bdc
Author: luhuachao <14054766+chimney-lee@users.noreply.github.com>
Date:   Thu Nov 7 10:16:50 2019 +0100

    HDDS-2370. Support Ozone HddsDatanodeService run as plugin with HDFS Datanode
    
    Closes #105

 .../src/main/java/org/apache/hadoop/hdds/HddsUtils.java       | 11 ++++++++---
 .../java/org/apache/hadoop/ozone/HddsDatanodeService.java     |  3 +++
 hadoop-hdds/docs/content/beyond/RunningWithHDFS.md            |  4 ++--
 .../dist/src/main/compose/ozone-hdfs/docker-compose.yaml      |  2 +-
 hadoop-ozone/dist/src/main/compose/ozone-hdfs/docker-config   |  1 -
 5 files changed, 14 insertions(+), 7 deletions(-)

commit dc3a3c39dc350eed5a46cb5fce61de3cfc187355
Author: Márton Elek <elek@apache.org>
Date:   Thu Nov 7 10:12:14 2019 +0100

    HDDS-2327. Provide new Freon test to test Ratis pipeline with pure XceiverClientRatis
    
    Closes #59

 .../hadoop/ozone/freon/BaseFreonGenerator.java     |  28 +++
 .../hadoop/ozone/freon/DatanodeChunkGenerator.java | 190 +++++++++++++++++++++
 .../java/org/apache/hadoop/ozone/freon/Freon.java  |   3 +-
 3 files changed, 220 insertions(+), 1 deletion(-)

commit 384fee0b054268d3f3a86db856d4dce95c9286e7
Author: Neo <cku328@gmail.com>
Date:   Thu Nov 7 09:56:53 2019 +0100

    HDDS-2369. Fix typo in param description.
    
    Closes #123

 .../src/main/java/org/apache/hadoop/ozone/client/ObjectStore.java       | 2 +-
 .../java/org/apache/hadoop/ozone/client/protocol/ClientProtocol.java    | 2 +-
 .../src/main/java/org/apache/hadoop/ozone/client/rpc/RpcClient.java     | 2 +-
 .../java/org/apache/hadoop/ozone/om/protocol/OzoneManagerProtocol.java  | 2 +-
 .../ozone/om/protocolPB/OzoneManagerProtocolClientSideTranslatorPB.java | 2 +-
 .../src/main/java/org/apache/hadoop/ozone/om/BucketManagerImpl.java     | 2 +-
 .../src/main/java/org/apache/hadoop/ozone/om/IOzoneAcl.java             | 2 +-
 .../src/main/java/org/apache/hadoop/ozone/om/KeyManagerImpl.java        | 2 +-
 .../src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java          | 2 +-
 .../src/main/java/org/apache/hadoop/ozone/om/PrefixManagerImpl.java     | 2 +-
 .../src/main/java/org/apache/hadoop/ozone/om/VolumeManagerImpl.java     | 2 +-
 11 files changed, 11 insertions(+), 11 deletions(-)

commit 06c70f7cbc001f88275089ceb8aa71681105babd
Author: Siyao Meng <50227127+smengcl@users.noreply.github.com>
Date:   Wed Nov 6 21:55:14 2019 -0800

    HDDS-2377. Speed up TestOzoneManagerHA#testOMRetryProxy and #testTwoOMNodesDown (#99)

 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 38 +++++++++++++++++-----
 1 file changed, 29 insertions(+), 9 deletions(-)

commit 615571ec80eb148e2294c7cfee74e5b3ffc364b4
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Nov 6 10:10:30 2019 +0100

    HDDS-2270. Avoid buffer copying in ContainerStateMachine.loadSnapshot/persistContainerSet (#118)

 .../common/transport/server/ratis/ContainerStateMachine.java        | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit a0dd918e37948bc7fd4c5c83e83706b1e89af6f1
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Nov 6 09:54:59 2019 +0100

    HDDS-2407. Reduce log level of per-node failure in XceiverClientGrpc (#120)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java   | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 33b374ad159abaa67f958cf55ac25a36da336ede
Author: Yi Sheng <lianp964@gmail.com>
Date:   Wed Nov 6 13:49:34 2019 +0800

    HDDS-1643. Send hostName also part of OMRequest. (#70)

 .../common/src/main/proto/OzoneManagerProtocol.proto   |  1 +
 .../java/org/apache/hadoop/ozone/om/OzoneManager.java  |  7 +++++--
 .../hadoop/ozone/om/request/OMClientRequest.java       | 18 +++++++++++++++++-
 .../om/request/TestOMClientRequestWithUserInfo.java    | 13 ++++++++++---
 4 files changed, 33 insertions(+), 6 deletions(-)

commit 21e57618e20bb2c4898a4b7c42c53c29e1a4d69b
Author: Siyao Meng <50227127+smengcl@users.noreply.github.com>
Date:   Tue Nov 5 21:29:48 2019 -0800

    HDDS-2064. Add tests for incorrect OM HA config when node ID or RPC address is not configured (#119)

 .../ozone/om/TestOzoneManagerConfiguration.java    | 51 ++++++++++++++++++++++
 1 file changed, 51 insertions(+)

commit 9565cc56444e5daa151591a4fa6992db0ac12a6f
Author: bshashikant <shashikant@apache.org>
Date:   Wed Nov 6 10:56:16 2019 +0530

    HDDS-2359. Seeking randomly in a key with more than 2 blocks of data leads to inconsistent reads (#82)

 .../hadoop/hdds/scm/storage/BlockInputStream.java  |  11 ++-
 .../hadoop/hdds/scm/storage/ChunkInputStream.java  |   6 +-
 .../hadoop/ozone/client/io/KeyInputStream.java     |  13 ++-
 .../ozone/client/rpc/TestKeyInputStream.java       | 104 ++++++++++++++++++++-
 4 files changed, 125 insertions(+), 9 deletions(-)

commit f162c0581256d9e9291663a4fe0f3d1098bbdd88
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Nov 5 10:00:43 2019 -0800

    HDDS-2321. Ozone Block Token verify should not apply to all datanode … (#110)

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |   5 +-
 .../java/org/apache/hadoop/hdds/HddsUtils.java     |  68 ++++++++
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |   2 +-
 .../hdds/security/token/BlockTokenVerifier.java    | 114 +++++++------
 .../security/token/OzoneBlockTokenIdentifier.java  |   3 +-
 .../hadoop/hdds/security/token/TokenVerifier.java  |  13 +-
 .../container/common/impl/HddsDispatcher.java      |  41 ++++-
 .../transport/server/GrpcXceiverService.java       |  16 --
 .../server/ServerCredentialInterceptor.java        |  74 --------
 .../common/transport/server/XceiverServer.java     |  89 ----------
 .../common/transport/server/XceiverServerGrpc.java |  18 +-
 .../server/ratis/ContainerStateMachine.java        |  28 +--
 .../transport/server/ratis/XceiverServerRatis.java |  13 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |   7 +-
 .../container/common/impl/TestHddsDispatcher.java  |   4 +-
 .../container/common/interfaces/TestHandler.java   |   2 +-
 .../hdds/scm/pipeline/RatisPipelineUtils.java      |   2 +-
 .../TestContainerStateMachineIdempotency.java      |   2 +-
 .../hadoop/ozone/client/rpc/TestCommitWatcher.java |   4 +-
 .../rpc/TestContainerStateMachineFailures.java     |   2 +-
 .../ozone/container/ContainerTestHelper.java       |  34 +++-
 .../transport/server/ratis/TestCSMMetrics.java     |   2 +-
 .../container/metrics/TestContainerMetrics.java    |   6 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   2 +-
 .../container/server/TestContainerServer.java      |   2 +-
 .../server/TestSecureContainerServer.java          | 189 ++++++++++-----------
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  |   4 +-
 .../security/TestOzoneBlockTokenSecretManager.java |  48 ++++++
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |   2 +-
 29 files changed, 380 insertions(+), 416 deletions(-)

commit d71814675bd063ecbe2a0b6c820931a6c49f3032
Author: Yi Sheng <lianp964@gmail.com>
Date:   Tue Nov 5 15:16:58 2019 +0800

    HDDS-2255. Improve Acl Handler Messages (#94)

 .../hadoop/ozone/web/ozShell/bucket/AddAclBucketHandler.java      | 6 +++++-
 .../hadoop/ozone/web/ozShell/bucket/RemoveAclBucketHandler.java   | 6 +++++-
 .../hadoop/ozone/web/ozShell/bucket/SetAclBucketHandler.java      | 6 ++----
 .../apache/hadoop/ozone/web/ozShell/keys/AddAclKeyHandler.java    | 6 +++++-
 .../apache/hadoop/ozone/web/ozShell/keys/RemoveAclKeyHandler.java | 6 +++++-
 .../apache/hadoop/ozone/web/ozShell/keys/SetAclKeyHandler.java    | 6 ++----
 .../hadoop/ozone/web/ozShell/volume/AddAclVolumeHandler.java      | 6 +++++-
 .../hadoop/ozone/web/ozShell/volume/RemoveAclVolumeHandler.java   | 6 +++++-
 .../hadoop/ozone/web/ozShell/volume/SetAclVolumeHandler.java      | 8 ++++++--
 9 files changed, 40 insertions(+), 16 deletions(-)

commit 6b2cda125b3647870ef5b01cf64e3b3e4cdc55db
Author: Akshesh Doshi <aksheshdoshi@gmail.com>
Date:   Mon Nov 4 17:54:56 2019 +0100

    HDDS-1515. Create ozone dev-support script to check hadolint violiations
    
    Closes #114

 hadoop-ozone/dev-support/checks/hadolint.sh | 41 +++++++++++++++++++++++++++++
 1 file changed, 41 insertions(+)

commit 9857b0c416798c7879bb74164da336a16e6b4724
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Mon Nov 4 14:58:32 2019 +0100

    HDDS-2291. Acceptance tests for OM HA
    
    Closes #11

 .../main/compose/ozone-om-ha/.ssh/authorized_keys  |  16 ++
 .../dist/src/main/compose/ozone-om-ha/.ssh/config  |  18 +++
 .../src/main/compose/ozone-om-ha/.ssh/environment  |  16 ++
 .../dist/src/main/compose/ozone-om-ha/.ssh/id_rsa  |  42 +++++
 .../src/main/compose/ozone-om-ha/.ssh/id_rsa.pub   |  16 ++
 .../dist/src/main/compose/ozone-om-ha/Dockerfile   |  47 ++++++
 .../main/compose/ozone-om-ha/docker-compose.yaml   |  20 +--
 .../src/main/compose/ozone-om-ha/docker-config     |  58 ++++++-
 .../dist/src/main/compose/ozone-om-ha/startOM.sh   |  28 ++++
 .../dist/src/main/compose/ozone-om-ha/stopOM.sh    |  20 +++
 .../dist/src/main/compose/ozone-om-ha/test.sh      |  40 +++++
 .../dist/src/main/smoketest/omha/testOMHA.robot    | 176 +++++++++++++++++++++
 12 files changed, 481 insertions(+), 16 deletions(-)

commit e91cc323a50612b095b74e193405a50c213e2ae2
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Mon Nov 4 13:32:57 2019 +0100

    HDDS-2272. Avoid buffer copying in GrpcReplicationClient
    
    Closes #88

 .../replication/GrpcReplicationClient.java         | 39 +++++++++++-----------
 1 file changed, 20 insertions(+), 19 deletions(-)

commit c47aaa128fc28a55c6996d53cd641928641dcabe
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Nov 2 09:38:46 2019 -0700

    HDDS-2398. Remove usage of LogUtils class from ratis-common. (#113)

 .../test/java/org/apache/hadoop/ozone/MiniOzoneChaosCluster.java    | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit feedc6a1c2716132d72ef5bdcabc56c2107f0bc8
Author: Arpit Agarwal <aagarwal@cloudera.com>
Date:   Fri Nov 1 13:18:16 2019 -0700

    Revert "HDDS-1847: Datanode Kerberos principal and keytab config key looks inconsistent"
    
    This reverts commit 8527a9d9ceb0e1b2ba3bfc8ebc06e7589135f7f3.

 .../hadoop/hdds/protocol/SCMSecurityProtocol.java  |  3 +-
 .../hdds/protocolPB/SCMSecurityProtocolPB.java     |  4 +-
 .../java/org/apache/hadoop/hdds/scm/ScmConfig.java | 41 --------------
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  | 11 +++-
 .../scm/protocol/ScmBlockLocationProtocol.java     |  4 +-
 .../protocol/StorageContainerLocationProtocol.java |  4 +-
 .../scm/protocolPB/ScmBlockLocationProtocolPB.java |  4 +-
 .../StorageContainerLocationProtocolPB.java        |  4 +-
 .../protocol/StorageContainerDatanodeProtocol.java |  5 +-
 .../StorageContainerDatanodeProtocolPB.java        |  4 +-
 .../hdds/scm/server/SCMHTTPServerConfig.java       | 63 ----------------------
 .../hdds/scm/server/SCMSecurityProtocolServer.java |  3 +-
 .../hdds/scm/server/StorageContainerManager.java   | 12 ++---
 .../server/StorageContainerManagerHttpServer.java  |  9 +---
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 25 ++++-----
 15 files changed, 44 insertions(+), 152 deletions(-)

commit 6ba71150662d7a02b4c5c28754f4c98bf61be7ff
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Nov 1 11:33:44 2019 -0700

    HDDS-2397. Fix calling cleanup for few missing tables in OM. (#112)

 .../org/apache/hadoop/ozone/om/ratis/OzoneManagerDoubleBuffer.java   | 5 +++++
 1 file changed, 5 insertions(+)

commit a04a5d8d3b7018b76e4f822e08c2f7e48c97b4b4
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Oct 31 21:39:41 2019 -0700

    HDDS-2311. Fix logic of RetryPolicy in OzoneClientSideTranslatorPB. (#51)

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  4 --
 .../common/src/main/resources/ozone-default.xml    | 13 ++--
 .../ozone/om/exceptions/NotLeaderException.java    | 45 ++++++++++---
 .../ozone/om/ha/OMFailoverProxyProvider.java       | 67 +++++++++++++------
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 76 +++++++++++++++-------
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 20 +++---
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  8 +--
 7 files changed, 152 insertions(+), 81 deletions(-)

commit 59224200328fe58089b76360b97362d3452da032
Author: Sammi Chen <sammichen@apache.org>
Date:   Fri Nov 1 10:33:35 2019 +0800

    HDDS-2363. Failed to create Ratis container. (#98)

 .../java/org/apache/hadoop/hdds/utils/MetadataStoreBuilder.java  | 4 ++--
 .../src/main/java/org/apache/hadoop/hdds/utils/RocksDBStore.java | 8 ++++++--
 .../src/main/java/org/apache/hadoop/hdds/utils/db/RDBStore.java  | 9 +++++++--
 .../hadoop/ozone/container/common/helpers/ContainerUtils.java    | 2 +-
 .../hadoop/ozone/container/keyvalue/KeyValueContainer.java       | 4 +++-
 .../hadoop/ozone/container/common/impl/TestHddsDispatcher.java   | 2 +-
 6 files changed, 20 insertions(+), 9 deletions(-)

commit 8527a9d9ceb0e1b2ba3bfc8ebc06e7589135f7f3
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Oct 31 11:19:54 2019 -0700

    HDDS-1847: Datanode Kerberos principal and keytab config key looks inconsistent
    Contributed by christeoh.

 .../hadoop/hdds/protocol/SCMSecurityProtocol.java  |  3 +-
 .../hdds/protocolPB/SCMSecurityProtocolPB.java     |  4 +-
 .../java/org/apache/hadoop/hdds/scm/ScmConfig.java | 41 ++++++++++++++
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  | 11 +---
 .../scm/protocol/ScmBlockLocationProtocol.java     |  4 +-
 .../protocol/StorageContainerLocationProtocol.java |  4 +-
 .../scm/protocolPB/ScmBlockLocationProtocolPB.java |  4 +-
 .../StorageContainerLocationProtocolPB.java        |  4 +-
 .../protocol/StorageContainerDatanodeProtocol.java |  5 +-
 .../StorageContainerDatanodeProtocolPB.java        |  4 +-
 .../hdds/scm/server/SCMHTTPServerConfig.java       | 63 ++++++++++++++++++++++
 .../hdds/scm/server/SCMSecurityProtocolServer.java |  3 +-
 .../hdds/scm/server/StorageContainerManager.java   | 12 ++---
 .../server/StorageContainerManagerHttpServer.java  |  9 +++-
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 25 +++++----
 15 files changed, 152 insertions(+), 44 deletions(-)

commit 629ab5da83f872e1d310ebaede734e56de52bd3d
Author: Aravindan Vijayan <avijayan@cloudera.com>
Date:   Tue Oct 29 13:56:54 2019 -0700

    HDDS-2380. OMFileRequest should use the isExist API while checking for pre-existing files in the directory path.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../java/org/apache/hadoop/ozone/om/request/file/OMFileRequest.java   | 4 ++--
 .../hadoop/ozone/recon/spi/impl/ContainerDBServiceProviderImpl.java   | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 5b082e724031952c44d99b58103f99f3023d8eec
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Thu Oct 31 18:53:05 2019 +0100

    HDDS-2293. Create a new CONTRIBUTION.md for the new repository (#58)

 BUILDING.txt    | 511 --------------------------------------------------------
 CONTRIBUTION.md | 206 +++++++++++++++++++++++
 2 files changed, 206 insertions(+), 511 deletions(-)

commit cbb8b661f22f54fc117928ae9a2d7ee9cae019da
Author: cxorm <lianp964@gmail.com>
Date:   Thu Oct 31 14:38:51 2019 +0100

    HDDS-2219. Move all the ozone dist scripts/configs to one location
    
    Closes #85

 .../dist/dev-support/bin/dist-layout-stitching     | 33 +++++++++++-----------
 .../conf/dn-audit-log4j2.properties                |  0
 .../dist/src/{main => shell}/conf/log4j.properties |  0
 .../conf/om-audit-log4j2.properties                |  0
 .../conf/ozone-shell-log4j.properties              |  0
 .../dist/src/{main => shell}/conf/ozone-site.xml   |  0
 .../conf/scm-audit-log4j2.properties               |  0
 .../dist/src/shell/hdds}/hadoop-config.cmd         |  0
 .../dist/src/shell/hdds}/hadoop-config.sh          |  0
 .../dist/src/shell/hdds}/hadoop-daemons.sh         |  0
 .../dist/src/shell/hdds}/hadoop-functions.sh       |  0
 .../dist/src/shell/hdds}/workers.sh                |  0
 .../src/main/bin => dist/src/shell/ozone}/ozone    |  0
 .../bin => dist/src/shell/ozone}/ozone-config.sh   |  0
 .../bin => dist/src/shell/ozone}/start-ozone.sh    |  0
 .../bin => dist/src/shell/ozone}/stop-ozone.sh     |  0
 .../shell}/shellprofile.d/hadoop-ozone-manager.sh  |  0
 .../src/shell}/shellprofile.d/hadoop-ozone.sh      |  0
 18 files changed, 17 insertions(+), 16 deletions(-)

commit b6704fda72bfb6f5ea2f110cb3d4334498efdec4
Author: sdeka <sdeka@hortonworks.com>
Date:   Thu Oct 31 13:43:43 2019 +0100

    HDDS-2208. Propagate System Exceptions from OM transaction apply phase
    
    Closes #47

 .../apache/hadoop/ozone/om/request/OMClientRequest.java    | 14 ++++++++++++--
 1 file changed, 12 insertions(+), 2 deletions(-)

commit e16c7ed4098378a23666b08416a438a82a01b11e
Author: luhuachao <1170432550@qq.com>
Date:   Thu Oct 31 13:23:04 2019 +0100

    HDDS-2348. remove log4j properties for org.apache.hadoop.ozone
    
    Closes #74

 hadoop-ozone/dist/src/main/conf/log4j.properties | 21 ---------------------
 1 file changed, 21 deletions(-)

commit 11ff08f3f748c153260cdf2d95a6fa579f07ef70
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Oct 30 16:44:28 2019 -0700

    HDDS-2381. In ExcludeList, add if not exist only. (#104)

 .../hdds/scm/container/common/helpers/ExcludeList.java     | 14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)

commit e8576433b30e64a9844a34d39acfd434eba9ad05
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Thu Oct 31 00:22:15 2019 +0100

    HDDS-2292. Create Ozone specific README.md to the new hadoop-ozone repository (#106)
    
    * HDDS-2292. Create Ozone specific README.md to the new hadoop-ozone repository

 README.md                                          | 98 ++++++++++++++++++++++
 README.txt                                         |  8 --
 .../dist/dev-support/bin/dist-layout-stitching     |  2 +-
 3 files changed, 99 insertions(+), 9 deletions(-)

commit 69aa475eb2827c01e88e487d54bbba5523bf4a9b
Author: Siddharth <swagle@hortonworks.com>
Date:   Wed Oct 30 09:34:28 2019 -0700

    HDDS-2366. Remove ozone.enabled as a flag and config item. (#90)

 .../java/org/apache/hadoop/hdds/HddsUtils.java     |   9 +-
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   3 -
 .../common/src/main/resources/ozone-default.xml    |  14 ---
 .../apache/hadoop/ozone/HddsDatanodeService.java   | 106 ++++++++++-----------
 .../hadoop/ozone/TestHddsDatanodeService.java      |   2 -
 .../hadoop/ozone/TestHddsSecureDatanodeInit.java   |   1 -
 hadoop-hdds/docs/content/beyond/Containers.md      |   1 -
 hadoop-hdds/docs/content/start/OnPrem.md           |  16 ----
 .../src/main/resources/webapps/datanode/dn.js      |   2 -
 .../hdds/scm/server/StorageContainerManager.java   |  10 +-
 .../org/apache/hadoop/hdds/scm/HddsTestUtils.java  |   3 -
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |   3 -
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |   2 -
 hadoop-ozone/common/src/main/bin/start-ozone.sh    |   9 --
 hadoop-ozone/common/src/main/bin/stop-ozone.sh     |   9 --
 .../apache/hadoop/ozone/web/utils/OzoneUtils.java  |   8 +-
 hadoop-ozone/dev-support/intellij/ozone-site.xml   |   8 --
 .../dist/src/main/compose/ozone-hdfs/docker-config |   1 -
 .../dist/src/main/compose/ozone-mr/common-config   |   1 -
 .../src/main/compose/ozone-om-ha-s3/docker-config  |   1 -
 .../src/main/compose/ozone-om-ha/docker-config     |   1 -
 .../src/main/compose/ozone-recon/docker-config     |   1 -
 .../src/main/compose/ozone-topology/docker-config  |   1 -
 .../dist/src/main/compose/ozone/docker-config      |   1 -
 .../src/main/compose/ozoneblockade/docker-config   |   1 -
 .../dist/src/main/compose/ozoneperf/docker-config  |   1 -
 .../src/main/compose/ozones3-haproxy/docker-config |   1 -
 .../dist/src/main/compose/ozones3/docker-config    |   1 -
 .../src/main/compose/ozonescripts/docker-config    |   1 -
 .../src/main/compose/ozonesecure-mr/docker-config  |   1 -
 .../src/main/compose/ozonesecure/docker-config     |   1 -
 .../src/main/k8s/definitions/ozone/config.yaml     |   1 -
 .../examples/getting-started/config-configmap.yaml |   1 -
 .../k8s/examples/minikube/config-configmap.yaml    |   1 -
 .../k8s/examples/ozone-dev/config-configmap.yaml   |   1 -
 .../main/k8s/examples/ozone/config-configmap.yaml  |   1 -
 .../network-tests/src/test/compose/docker-config   |   1 -
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |  13 +--
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   1 -
 .../hadoop/ozone/TestSecureOzoneCluster.java       |   3 -
 .../hadoop/ozone/TestStorageContainerManager.java  |   2 -
 .../ozone/om/TestOzoneManagerConfiguration.java    |   2 -
 .../ozone/ozShell/TestOzoneDatanodeShell.java      | 104 ++++----------------
 .../apache/hadoop/fs/ozone/TestOzoneFsHAURLs.java  |   2 -
 .../GenerateOzoneRequiredConfigurations.java       |   4 +-
 .../hadoop/ozone/genesis/BenchMarkOMClient.java    |  30 +++---
 .../ozone/genesis/BenchMarkOzoneManager.java       |  33 ++++---
 .../apache/hadoop/ozone/genesis/BenchMarkSCM.java  |  18 ++--
 48 files changed, 130 insertions(+), 308 deletions(-)

commit 9f75e5ab49f5ed6b5aaaca2acab840e365b69522
Author: Istvan Fajth <pifta@cloudera.com>
Date:   Wed Oct 30 15:58:47 2019 +0100

    HDDS-2378 - Change OZONE as string used in the code where OzoneConsts.OZONE is suitable (#103)
    
    * HDDS-2378 - Change OZONE as string used in the code where OzoneConsts.OZONE is suitable

 .../common/impl/TestContainerDataYaml.java         | 21 ++++---
 .../container/keyvalue/TestBlockManagerImpl.java   | 11 ++--
 .../container/keyvalue/TestKeyValueContainer.java  | 12 ++--
 .../metrics/SCMContainerManagerMetrics.java        |  3 +-
 .../algorithms/SCMContainerPlacementMetrics.java   |  3 +-
 .../hadoop/hdds/scm/node/SCMNodeMetrics.java       |  3 +-
 .../hdds/scm/pipeline/SCMPipelineMetrics.java      |  3 +-
 .../hdds/scm/server/SCMContainerMetrics.java       |  3 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    | 27 +++++----
 .../container/TestCloseContainerEventHandler.java  |  5 +-
 .../scm/container/TestSCMContainerManager.java     | 15 ++---
 .../hdds/scm/node/TestContainerPlacement.java      |  3 +-
 .../apache/hadoop/ozone/util/OzoneVersionInfo.java |  3 +-
 .../TestContainerStateManagerIntegration.java      | 69 ++++++++++++----------
 .../metrics/TestSCMContainerManagerMetrics.java    |  6 +-
 .../hadoop/ozone/TestContainerOperations.java      |  2 +-
 .../TestContainerStateMachineIdempotency.java      |  3 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  4 +-
 .../ozone/client/rpc/Test2WayCommitInRatis.java    |  4 +-
 .../hadoop/ozone/client/rpc/TestCommitWatcher.java |  5 +-
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  2 +-
 .../ozone/client/rpc/TestWatchForCommit.java       | 10 ++--
 .../apache/hadoop/ozone/ozShell/TestS3Shell.java   |  4 +-
 .../hadoop/ozone/scm/TestAllocateContainer.java    |  4 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   | 10 ++--
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  |  8 +--
 .../hadoop/ozone/scm/TestXceiverClientManager.java | 22 ++++---
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java |  8 ++-
 .../hadoop/ozone/om/TestS3BucketManager.java       |  2 +-
 ...TestOzoneManagerDoubleBufferWithOMResponse.java |  3 +-
 .../om/request/key/TestOMAllocateBlockRequest.java |  4 +-
 .../om/request/key/TestOMKeyCommitRequest.java     |  4 +-
 .../om/request/key/TestOMKeyCreateRequest.java     |  4 +-
 .../s3/bucket/TestS3BucketDeleteRequest.java       |  3 +-
 .../s3/bucket/TestS3BucketDeleteResponse.java      |  3 +-
 .../s3/endpoint/TestAbortMultipartUpload.java      |  7 ++-
 .../hadoop/ozone/s3/endpoint/TestBucketDelete.java | 11 ++--
 .../hadoop/ozone/s3/endpoint/TestBucketHead.java   |  5 +-
 .../s3/endpoint/TestInitiateMultipartUpload.java   |  9 +--
 .../hadoop/ozone/s3/endpoint/TestListParts.java    | 29 +++++----
 .../s3/endpoint/TestMultipartUploadComplete.java   | 33 ++++++-----
 .../s3/endpoint/TestMultipartUploadWithCopy.java   | 32 +++++-----
 .../hadoop/ozone/s3/endpoint/TestObjectPut.java    |  3 +-
 .../hadoop/ozone/s3/endpoint/TestPartUpload.java   | 24 +++++---
 .../hadoop/ozone/s3/endpoint/TestRootList.java     |  3 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java  | 11 ++--
 46 files changed, 263 insertions(+), 200 deletions(-)

commit d3021fb2bc895b0dfa25b0d562e4a2664164532a
Author: Istvan Fajth <pifta@cloudera.com>
Date:   Wed Oct 30 08:02:12 2019 +0100

    HDDS-2347 XCeiverClientGrpc's parallel use leads to NPE (#81)

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 38 +++++++++++++---------
 .../hadoop/hdds/scm/XceiverClientManager.java      |  2 +-
 2 files changed, 24 insertions(+), 16 deletions(-)

commit 27b6042f0e99ebcfdbbe21ee905084be3aadd6b1
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Oct 29 21:09:20 2019 -0700

    HDDS-2379. OM terminates with RocksDB error while continuously writing keys. (#100)

 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java   | 31 +++++++++++-----------
 1 file changed, 16 insertions(+), 15 deletions(-)

commit 112d1fbe1c283214e1695521af9c51c6db5a03bf
Author: Arpit Agarwal <aagarwal@cloudera.com>
Date:   Tue Oct 29 20:48:17 2019 -0700

    Revert "HDDS-2292. Create Ozone specific README.md to the new hadoop-ozone re… (#55)"
    
    This reverts commit aea6c377d7caadf76ce236f2ac88f98a365ef745.

 README.md  | 98 --------------------------------------------------------------
 README.txt |  8 +++++
 2 files changed, 8 insertions(+), 98 deletions(-)

commit 86925de6ad934589162c012a1fdb9460305542d4
Author: Istvan Fajth <pifta@cloudera.com>
Date:   Wed Oct 30 00:56:40 2019 +0100

    HDDS-2373 Move isUseRatis getFactor and getType from XCeiverClientManager (#95)
    
    * HDDS-2373 Move isUseRatis getFactor and getType from XCeiverClientManager

 .../hadoop/hdds/scm/XceiverClientManager.java      |  36 -------
 .../hdds/scm/client/ContainerOperationClient.java  | 111 +++++++++++++++------
 .../ozone/container/common/SCMTestUtils.java       |  22 ++++
 .../scm/container/TestSCMContainerManager.java     |  27 +++--
 .../hdds/scm/node/TestContainerPlacement.java      |   9 +-
 .../org/apache/hadoop/hdds/scm/cli/SCMCLI.java     |  89 ++++-------------
 .../hadoop/ozone/insight/BaseInsightPoint.java     |  41 +-------
 .../TestContainerStateManagerIntegration.java      |  87 +++++++++-------
 .../hadoop/ozone/TestContainerOperations.java      |  18 +---
 .../hadoop/ozone/TestStorageContainerManager.java  |   5 +-
 .../hadoop/ozone/scm/TestAllocateContainer.java    |   9 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |   7 +-
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  |   5 +-
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  30 ++++--
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java |   5 +-
 .../hadoop/ozone/scm/node/TestQueryNode.java       |   5 +-
 16 files changed, 231 insertions(+), 275 deletions(-)

commit e3e6dc50e6dc180aa3b0d38bcbdf50adac526c0b
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Oct 29 15:26:58 2019 -0700

    HDDS-2322. DoubleBuffer flush termination and OM shutdown's after that. Make entry returned from cache a new copy. (#89)

 .../hadoop/ozone/om/codec/OmKeyInfoCodec.java      |  2 +-
 .../ozone/om/codec/OmMultipartKeyInfoCodec.java    |  2 +-
 .../hadoop/ozone/om/codec/OmPrefixInfoCodec.java   |  2 +-
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      | 19 +++--
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  | 53 +++++++++++++-
 .../ozone/om/helpers/OmMultipartKeyInfo.java       |  7 ++
 .../hadoop/ozone/om/helpers/OmPrefixInfo.java      | 18 +++++
 .../hadoop/ozone/om/helpers/TestOmKeyInfo.java     | 83 ++++++++++++++++++++++
 .../ozone/om/helpers/TestOmMultipartKeyInfo.java   | 64 +++++++++++++++++
 .../hadoop/ozone/om/helpers/TestOmPrefixInfo.java  | 56 +++++++++++++++
 10 files changed, 297 insertions(+), 9 deletions(-)

commit aea6c377d7caadf76ce236f2ac88f98a365ef745
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Tue Oct 29 23:14:26 2019 +0100

    HDDS-2292. Create Ozone specific README.md to the new hadoop-ozone re… (#55)

 README.md  | 98 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 README.txt |  8 -----
 2 files changed, 98 insertions(+), 8 deletions(-)

commit 7b043e9fdb828cf1cf09d76c6e787e259253a4be
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Tue Oct 29 12:40:44 2019 -0700

    HDDS-2240. Ozone Admin OM command line tool. (#9)

 .../ozone/client/protocol/ClientProtocol.java      |  8 +++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 19 ++++++
 hadoop-ozone/common/src/main/bin/ozone             |  5 ++
 .../hadoop/ozone/om/helpers/ServiceInfo.java       | 32 ++++++++--
 .../src/main/proto/OzoneManagerProtocol.proto      |  6 ++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 39 +++++++++++++
 .../org/apache/hadoop/ozone/admin/OzoneAdmin.java  | 68 ++++++++++++++++++++++
 .../ozone/admin/om/GetServiceRolesSubcommand.java  | 60 +++++++++++++++++++
 .../org/apache/hadoop/ozone/admin/om/OMAdmin.java  | 63 ++++++++++++++++++++
 .../apache/hadoop/ozone/admin/om/package-info.java | 24 ++++++++
 .../apache/hadoop/ozone/admin/package-info.java    | 24 ++++++++
 11 files changed, 343 insertions(+), 5 deletions(-)

commit 19f0044a67c10b19aa1befe7c5c9ccd6df2410ca
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Oct 28 17:29:58 2019 -0700

    HDDS-2374. Make Ozone Readme.txt point to the Ozone websites instead of Hadoop. (#96)

 README.txt | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 9dd2f059f31c31a29531087cb607826e34ee68a6
Author: Yi Sheng <lianp964@gmail.com>
Date:   Tue Oct 29 06:40:52 2019 +0800

    HDDS-2345. Add a UT for newly added clone() in OmBucketInfo (#92)

 .../hadoop/ozone/om/helpers/TestOmBucketInfo.java  | 56 +++++++++++++++++++++-
 1 file changed, 55 insertions(+), 1 deletion(-)

commit 41b51b974bde99d3190ebd7b06a3ddff1600a4fb
Merge: 8541c569 758bd09e
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Mon Oct 28 11:10:05 2019 -0700

    Merge pull request #40 from hanishakoneru/HDDS-2285
    
    HDDS-2285. GetBlock and ReadChunk commands should be sent to the same datanode.

commit 8541c5694efebb58f53cf4665d3e4e6e4a12845c
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Sun Oct 27 08:13:06 2019 +0100

    HDDS-2368. TestOzoneManagerDoubleBufferWithDummyResponse failing intermittently (#93)

 ...tOzoneManagerDoubleBufferWithDummyResponse.java | 69 ++++++++++------------
 1 file changed, 30 insertions(+), 39 deletions(-)

commit 6a6558025ec35203bfd61839aadf7b2a26520222
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Sat Oct 26 16:32:49 2019 +0200

    HDDS-2365. Fix TestRatisPipelineProvider#testCreatePipelinesDnExclude (#84)

 .../hadoop/hdds/scm/container/MockNodeManager.java |   5 +-
 .../scm/pipeline/TestRatisPipelineProvider.java    | 180 ++++++++++++++++++
 .../scm/pipeline/TestRatisPipelineProvider.java    | 207 ---------------------
 3 files changed, 183 insertions(+), 209 deletions(-)

commit 82833a09d14d0d1418b02a0a14f7a35b97b44ee3
Author: Yi Sheng <lianp964@gmail.com>
Date:   Sat Oct 26 22:21:55 2019 +0800

    HDDS-2361. Ozone Manager init & start command prints out unnecessary line in the beginning. (#91)

 .../common/src/main/shellprofile.d/hadoop-ozone-manager.sh        | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 758bd09eb2a25807d420e90a7b346f3b83e2c527
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Oct 25 10:27:36 2019 -0700

    concurrent hash map for dn cache

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java    | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit d1f57f84cf2cb02aab3c6a7d6c298917b95c3d30
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Fri Oct 25 19:21:56 2019 +0200

    HDDS-2341. Validate tar entry path during extraction (#72)

 .../java/org/apache/hadoop/hdds/HddsUtils.java     |  23 +++
 .../java/org/apache/hadoop/hdds/TestHddsUtils.java |  21 +++
 .../container/keyvalue/TarContainerPacker.java     |  31 ++--
 .../container/keyvalue/TestTarContainerPacker.java | 204 +++++++++++++++++----
 .../org/apache/hadoop/ozone/recon/ReconUtils.java  |  11 +-
 5 files changed, 236 insertions(+), 54 deletions(-)

commit e1641fb602991eee2407086f8386f18f09b4e862
Author: Arpit Agarwal <aagarwal@cloudera.com>
Date:   Fri Oct 25 09:57:28 2019 -0700

    Revert "HDDS-2206. Separate handling for OMException and IOException in the Ozone Manager. Contributed by Supratim Deka (#12)"
    
    This reverts commit 445fe6231db370d21887cbbcc7c3e26c197dc74a.

 .../OzoneManagerProtocolServerSideTranslatorPB.java       | 15 ++-------------
 1 file changed, 2 insertions(+), 13 deletions(-)

commit d7e2fb19759b7d447bc92558f2ab5504e047f5db
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Oct 24 20:28:54 2019 -0700

    HDDS-2344. Add immutable entries in to the DoubleBuffer for Volume requests. (#71)

 .../org/apache/hadoop/hdds/utils/db/Codec.java     |  6 ++
 .../apache/hadoop/hdds/utils/db/CodecRegistry.java | 16 ++++
 .../apache/hadoop/hdds/utils/db/IntegerCodec.java  |  5 ++
 .../org/apache/hadoop/hdds/utils/db/LongCodec.java |  5 ++
 .../apache/hadoop/hdds/utils/db/StringCodec.java   |  5 ++
 .../apache/hadoop/hdds/utils/db/TypedTable.java    |  3 +-
 .../hadoop/hdds/scm/metadata/BigIntegerCodec.java  |  5 ++
 .../metadata/DeletedBlocksTransactionCodec.java    |  5 ++
 .../apache/hadoop/hdds/scm/metadata/LongCodec.java |  5 ++
 .../hdds/scm/metadata/X509CertificateCodec.java    |  5 ++
 .../hadoop/ozone/om/codec/OmBucketInfoCodec.java   |  4 +
 .../hadoop/ozone/om/codec/OmKeyInfoCodec.java      |  5 ++
 .../ozone/om/codec/OmMultipartKeyInfoCodec.java    |  5 ++
 .../hadoop/ozone/om/codec/OmPrefixInfoCodec.java   |  5 ++
 .../hadoop/ozone/om/codec/OmVolumeArgsCodec.java   |  4 +
 .../ozone/om/codec/RepeatedOmKeyInfoCodec.java     |  5 ++
 .../hadoop/ozone/om/codec/S3SecretValueCodec.java  |  5 ++
 .../ozone/om/codec/TokenIdentifierCodec.java       |  4 +
 .../hadoop/ozone/om/codec/UserVolumeInfoCodec.java |  4 +
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      |  9 ++-
 .../hadoop/ozone/om/helpers/OmOzoneAclMap.java     | 31 ++++++++
 .../hadoop/ozone/om/helpers/OmVolumeArgs.java      | 29 +++++--
 .../hadoop/ozone/om/helpers/TestOmVolumeArgs.java  | 87 +++++++++++++++++++++
 .../security/acl/TestOzoneNativeAuthorizer.java    | 91 +++++++++++++++++++---
 .../om/request/bucket/OMBucketCreateRequest.java   |  3 +-
 .../request/bucket/OMBucketSetPropertyRequest.java |  3 +-
 .../om/request/bucket/acl/OMBucketAclRequest.java  |  3 +-
 .../recon/spi/impl/ContainerKeyPrefixCodec.java    |  5 ++
 28 files changed, 335 insertions(+), 27 deletions(-)

commit 682599ef845d5325e081a52f0bd7f0de306612d4
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Fri Oct 25 05:13:15 2019 +0200

    HDDS-2360. Update Ratis snapshot to d6d58d0 (#83)

 pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit faf10fec5664a274de0b545a00433c43b55b526f
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Thu Oct 24 23:55:09 2019 +0200

    HDDS-2071. Support filters in ozone insight point (#4)

 .../server/OzoneProtocolMessageDispatcher.java     |  4 +-
 .../hadoop/hdds/server/events/EventQueue.java      |  4 +-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 50 ++++++++-------
 .../hadoop/ozone/insight/BaseInsightPoint.java     | 15 +++++
 .../apache/hadoop/ozone/insight/InsightPoint.java  |  6 +-
 .../apache/hadoop/ozone/insight/LogSubcommand.java | 26 ++++++--
 .../ozone/insight/datanode/RatisInsight.java       |  5 ++
 .../hadoop/ozone/insight/TestBaseInsightPoint.java | 73 ++++++++++++++++++++++
 8 files changed, 152 insertions(+), 31 deletions(-)

commit 91e0c02c195421c2ab0b0bb0bdac791f71683b79
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Oct 24 10:08:12 2019 -0700

    HDDS-2285. GetBlock and ReadChunk command from the client should be sent to the same datanode to re-use the same connection.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 40 ++++++++++++++++++----
 .../ozone/web/ozShell/keys/GetKeyHandler.java      |  2 +-
 2 files changed, 35 insertions(+), 7 deletions(-)

commit da01364205dbca2f9f513457ab355488293dc6de
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Thu Oct 24 16:20:21 2019 +0200

    HDDS-2357. Add replication factor option to new Freon tests (#79)

 .../main/java/org/apache/hadoop/ozone/freon/OmKeyGenerator.java   | 8 +++++++-
 .../org/apache/hadoop/ozone/freon/OzoneClientKeyGenerator.java    | 8 +++++++-
 2 files changed, 14 insertions(+), 2 deletions(-)

commit 28170e54e2fa6255852d643b782aa58471aa7683
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Thu Oct 24 16:18:18 2019 +0200

    HDDS-2358. Change to replication factor THREE in acceptance tests (#78)

 hadoop-ozone/dist/src/main/compose/ozone-mr/common-config        | 2 +-
 hadoop-ozone/dist/src/main/compose/ozone-om-ha-s3/docker-config  | 2 +-
 hadoop-ozone/dist/src/main/compose/ozone-recon/docker-config     | 2 +-
 hadoop-ozone/dist/src/main/compose/ozone-topology/docker-config  | 2 +-
 hadoop-ozone/dist/src/main/compose/ozone/docker-config           | 2 +-
 hadoop-ozone/dist/src/main/compose/ozoneperf/docker-config       | 2 +-
 hadoop-ozone/dist/src/main/compose/ozones3-haproxy/docker-config | 2 +-
 hadoop-ozone/dist/src/main/compose/ozones3/docker-config         | 2 +-
 hadoop-ozone/dist/src/main/compose/ozonesecure-mr/docker-config  | 2 +-
 hadoop-ozone/dist/src/main/compose/ozonesecure/docker-config     | 2 +-
 hadoop-ozone/dist/src/main/smoketest/basic/basic.robot           | 2 +-
 11 files changed, 11 insertions(+), 11 deletions(-)

commit 4d1e8110e657852ecd569b4441031a90885745dd
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Thu Oct 24 16:14:13 2019 +0200

    HDDS-1228. Chunk Scanner Checkpoints (#7)

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 +
 .../ozone/container/common/impl/ContainerData.java |  41 +++++-
 .../common/impl/ContainerDataScanOrder.java        |  57 +++++++++
 .../container/common/impl/ContainerDataYaml.java   |  15 ++-
 .../ozone/container/common/impl/ContainerSet.java  |   2 +
 .../container/common/interfaces/Container.java     |   4 +
 .../container/keyvalue/KeyValueContainer.java      |  12 ++
 .../container/ozoneimpl/ContainerController.java   |   7 ++
 .../container/ozoneimpl/ContainerDataScanner.java  |  31 ++++-
 .../common/impl/TestContainerDataYaml.java         |  12 ++
 .../container/common/impl/TestContainerSet.java    |  59 ++++++++-
 .../ozoneimpl/TestContainerScrubberMetrics.java    | 138 ++++++++++++---------
 12 files changed, 311 insertions(+), 68 deletions(-)

commit c0cbdd2d47d8e1b4a3785c0f71b4177b093de4a1
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Oct 23 22:06:25 2019 -0700

    HDDS-2354. SCM log is full of AllocateBlock logs. (#77)
    
    @bharatviswa504 thanks for the contribution. Merged this to master.

 .../org/apache/hadoop/hdds/scm/server/SCMBlockProtocolServer.java  | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit e16275d097613f56f56d32208ea0049aa9ea2bd4
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Thu Oct 24 06:51:04 2019 +0200

    HDDS-2297. Enable Opentracing for new Freon tests (#16)

 .../org/apache/hadoop/ozone/freon/BaseFreonGenerator.java    | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 1c6b02a84136d59c9a2f145787da4d59e6dff2e6
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Thu Oct 24 02:44:59 2019 +0200

    HDDS-2296. ozoneperf compose cluster shouln't start freon by default (#15)

 .../dist/src/main/compose/ozoneperf/README.md      | 20 ++++++++++++++++-
 .../src/main/compose/ozoneperf/docker-compose.yaml |  9 --------
 .../src/main/compose/ozoneperf/freon-ockg.yaml     | 25 ++++++++++++++++++++++
 .../dist/src/main/compose/ozoneperf/freon-rk.yaml  | 25 ++++++++++++++++++++++
 4 files changed, 69 insertions(+), 10 deletions(-)

commit 9475d26cc7d461b27733c9074c6420ca71effd7a
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Thu Oct 24 02:19:29 2019 +0200

    HDDS-2352. Client gets internal error instead of volume not found in secure cluster (#76)

 hadoop-ozone/dist/src/main/smoketest/basic/ozone-shell.robot           | 2 ++
 .../src/main/java/org/apache/hadoop/ozone/om/VolumeManagerImpl.java    | 3 +++
 2 files changed, 5 insertions(+)

commit 59d078605fd54b320412f4882af9f90ffaea9456
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Oct 23 13:19:51 2019 +0200

    HDDS-2334. Dummy chunk manager fails with length mismatch error. Contributed by Attila Doroszlai. (#65)

 .../container/keyvalue/helpers/ChunkUtils.java     |  23 +++--
 .../keyvalue/impl/ChunkManagerDummyImpl.java       |  17 +---
 .../container/keyvalue/TestChunkManagerImpl.java   | 113 ++++++++++++++-------
 3 files changed, 94 insertions(+), 59 deletions(-)

commit 1baa5a158d13f469c12bef86ef288d60ef0eee85
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Oct 22 17:27:45 2019 -0700

    HDDS-2278. Run S3 test suite on OM HA cluste. (#27)

 .../dist/src/main/compose/ozone-om-ha-s3/.env      | 18 +++++
 .../compose/ozone-om-ha-s3/docker-compose.yaml     | 89 ++++++++++++++++++++++
 .../src/main/compose/ozone-om-ha-s3/docker-config  | 34 +++++++++
 .../dist/src/main/compose/ozone-om-ha-s3/test.sh   | 32 ++++++++
 hadoop-ozone/dist/src/main/compose/ozones3/test.sh |  2 +
 .../dist/src/main/smoketest/s3/commonawslib.robot  | 13 ++--
 .../main/smoketest/security/ozone-secure-s3.robot  |  2 +-
 7 files changed, 183 insertions(+), 7 deletions(-)

commit 4bfad907307adf2a712a36be5eb8e072d6dc1af8
Author: Siddharth <swagle@hortonworks.com>
Date:   Tue Oct 22 11:58:09 2019 -0700

    HDDS-2131. Optimize replication type and creation time calculation in S3 MPU list call. (#50)

 .../ozone/om/helpers/OmMultipartKeyInfo.java       | 49 ++++++++++++++++------
 .../src/main/proto/OzoneManagerProtocol.proto      |  5 ++-
 .../om/codec/TestOmMultipartKeyInfoCodec.java      |  8 +++-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 29 ++++++-------
 .../S3InitiateMultipartUploadRequest.java          |  3 +-
 .../s3/multipart/TestS3MultipartResponse.java      |  4 +-
 6 files changed, 67 insertions(+), 31 deletions(-)

commit fdd1b155e2c53ddd70c36c785160ce16184eb49a
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Tue Oct 22 19:32:06 2019 +0200

    HDDS-2214. TestSCMContainerPlacementRackAware has an intermittent failure. (#6)

 .../TestSCMContainerPlacementRackAware.java        | 67 ++++++++++++----------
 1 file changed, 36 insertions(+), 31 deletions(-)

commit d92223a42d26606971b83150c843f2f523114ef7
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Tue Oct 22 18:24:54 2019 +0200

    HDDS-2346. Replication manager config has wrong description (#73)

 .../hadoop/hdds/scm/container/ReplicationManager.java | 19 ++++---------------
 1 file changed, 4 insertions(+), 15 deletions(-)

commit eb1d77e3206fab1a4ac0573507c9deb2b56b9ea1
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Tue Oct 22 04:40:58 2019 +0200

    HDDS-2330. Random key generator can get stuck (#53)

 .../org/apache/hadoop/ozone/freon/RandomKeyGenerator.java    | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit 599b0d9158524eb40e874b82547dda9e1c102b2e
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Oct 21 19:37:43 2019 -0700

    HDDS-2343. Add immutable entries in to the DoubleBuffer for Bucket requests. (#69)

 .../hadoop/ozone/om/helpers/OmBucketInfo.java      | 25 +++++++++++++++++++++-
 .../om/request/bucket/OMBucketCreateRequest.java   |  3 ++-
 .../request/bucket/OMBucketSetPropertyRequest.java |  5 +++--
 .../om/request/bucket/acl/OMBucketAclRequest.java  |  3 ++-
 4 files changed, 31 insertions(+), 5 deletions(-)

commit c6c9794fc590371ad9c3b8fdcd7a36ed42909b40
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Oct 21 19:32:41 2019 -0700

    HDDS-2333. Enable sync option for OM non-HA. (#61)

 .../hadoop/hdds/utils/db/DBStoreBuilder.java       | 21 ++++++++++++++++++---
 .../org/apache/hadoop/hdds/utils/db/RDBStore.java  |  8 ++++----
 .../hadoop/hdds/utils/db/RocksDBConfiguration.java | 16 ++++++++++++++++
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     | 22 ++++++++++++++++++++--
 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java   | 19 ++++++++++++-------
 5 files changed, 70 insertions(+), 16 deletions(-)

commit d47fe4ead87996e1cdc4d5679de9a9b5cb08a6ff
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Mon Oct 21 16:42:57 2019 -0700

    HDDS-2310. Add support to add ozone ranger plugin to Ozone Manager cl… (#49)

 .../main/shellprofile.d/hadoop-ozone-manager.sh    | 26 ++++++++++++++++++++++
 1 file changed, 26 insertions(+)

commit e61e71d56e772de406bfa4822f02faa06a619980
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Mon Oct 21 16:36:52 2019 -0700

    HDDS-2320. Negative value seen for OM NumKeys Metric in JMX. (#68)

 .../om/request/file/OMDirectoryCreateRequest.java  |  1 +
 .../request/file/TestOMDirectoryCreateRequest.java | 39 ++++++++++++++++++++++
 2 files changed, 40 insertions(+)

commit 02d2eb7c4d94484c325e0e75155a7f4bc06a0cd7
Author: Siddharth <swagle@hortonworks.com>
Date:   Mon Oct 21 14:56:20 2019 -0700

    HDDS-2340. Updated ratis.version to get latest snapshot. (#67)

 pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 445fe6231db370d21887cbbcc7c3e26c197dc74a
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Mon Oct 21 10:30:00 2019 +0530

    HDDS-2206. Separate handling for OMException and IOException in the Ozone Manager. Contributed by Supratim Deka (#12)

 .../OzoneManagerProtocolServerSideTranslatorPB.java       | 15 +++++++++++++--
 1 file changed, 13 insertions(+), 2 deletions(-)

commit 636df4393c4bd2849b7309d81f3ab2a8eb948117
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Mon Oct 21 06:45:57 2019 +0200

    HDDS-2326. Http server of Freon is not started for new Freon tests (#52)

 .../org/apache/hadoop/ozone/freon/BaseFreonGenerator.java     | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

commit 40f57a56505b1b6ddc1f0219724f9aa514842fcc
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Mon Oct 21 06:19:32 2019 +0200

    HDDS-2335. Params not included in AuditMessage. Contributed by Attila Doroszlai. (#62)

 .../apache/hadoop/ozone/audit/AuditMessage.java    |  2 +-
 .../hadoop/ozone/audit/TestOzoneAuditLogger.java   | 29 ++++++++++++++++------
 2 files changed, 22 insertions(+), 9 deletions(-)

commit 65a1d000771771a787dd2b094c02bb1fd77a10b9
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Mon Oct 21 05:57:25 2019 +0200

    HDDS-2337. Fix checkstyle errors. Contributed by Attila Doroszlai. (#64)

 .../common/transport/server/ratis/ContainerStateMachine.java |  2 +-
 .../ozone/client/rpc/TestContainerStateMachineFailures.java  |  5 ++---
 .../apache/hadoop/ozone/container/ContainerTestHelper.java   | 12 +++++-------
 3 files changed, 8 insertions(+), 11 deletions(-)

commit aaa333c886660b2a4e698ccc500aaa9febeb78d0
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Mon Oct 21 02:57:59 2019 +0200

    HDDS-2336. Fix TestKeyValueContainer#testRocksDBCreateUsesCachedOptions. Contributed by  Attila Doroszlai.  (#63)

 .../container/keyvalue/TestKeyValueContainer.java  | 23 +++++++++++-----------
 1 file changed, 12 insertions(+), 11 deletions(-)

commit 29cd37db9f712844403f1d0bb5af94e2d72712a5
Author: bshashikant <shashikant@apache.org>
Date:   Sun Oct 20 16:50:12 2019 +0530

    HDDS-2280. HddsUtils#CheckForException should not return null in case the ratis exception cause is not set. Contributed by  Shashikant Banerjee. (#57)

 .../main/java/org/apache/hadoop/hdds/scm/client/HddsClientUtils.java | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit bfaa640b57efbbf880ea1098de0a16d96e31ddca
Author: bshashikant <shashikant@apache.org>
Date:   Sun Oct 20 16:46:42 2019 +0530

    HDDS-2281. ContainerStateMachine#handleWriteChunk should ignore close container exception. Contributed by  Shashikant Banerjee. (#54)

 .../server/ratis/ContainerStateMachine.java        |  12 ++-
 .../rpc/TestContainerStateMachineFailures.java     | 119 +++++++++++++++++++++
 .../ozone/container/ContainerTestHelper.java       |  19 +++-
 3 files changed, 148 insertions(+), 2 deletions(-)

commit 18c4cabdaa64a059dd22a4c6690ad9e933e758c1
Author: Siddharth <swagle@hortonworks.com>
Date:   Sat Oct 19 23:42:44 2019 -0700

    HDDS-2283. Container creation on datanodes take time because of Rocksdb option creation. Contributed by  Siddharth Wagle.(#41)

 .../hadoop/hdds/utils/MetadataStoreBuilder.java    | 59 +++++++++++++---------
 .../org/apache/hadoop/hdds/utils/RocksDBStore.java | 11 ++--
 .../container/keyvalue/TestKeyValueContainer.java  | 38 ++++++++++----
 3 files changed, 66 insertions(+), 42 deletions(-)

commit 7651aec22acd6c3e89cdd0a90911d82d9b0b822d
Author: Siddharth <swagle@hortonworks.com>
Date:   Sat Oct 19 23:26:12 2019 -0700

    HDDS-2286. Add a log info in ozone client and scm to print the exclusion list during allocate block. Contributed by Siddharth Wagle. (#46)

 .../hadoop/hdds/scm/container/common/helpers/ExcludeList.java    | 9 +++++++++
 .../apache/hadoop/hdds/scm/server/SCMBlockProtocolServer.java    | 2 ++
 .../hadoop/ozone/client/io/BlockOutputStreamEntryPool.java       | 1 +
 3 files changed, 12 insertions(+)

commit 25cfd0c3669d10be31ace22d45ddce5589ac086d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Oct 18 13:40:50 2019 -0700

    HDDS-2318. Avoid proto::tostring in preconditions to save CPU cycles. (#48)

 .../om/ratis/utils/OzoneManagerRatisUtils.java     |  3 +-
 .../OzoneManagerHARequestHandlerImpl.java          | 61 +++-------------------
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  2 -
 3 files changed, 8 insertions(+), 58 deletions(-)

commit b9618834c9902fc8fd9ae12872092cfb1e5c1be3
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Oct 18 10:47:01 2019 -0700

    HDDS-2323. Mem allocation: Optimise AuditMessage::build().
    Contributed by Siddharth Wagle.

 .../src/main/java/org/apache/hadoop/ozone/audit/AuditMessage.java  | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

commit 2529cee1a7dd27c51cb9aed0dc57af283ff24e26
Author: Aravindan Vijayan <avijayan@cloudera.com>
Date:   Wed Oct 16 10:00:43 2019 -0700

    HDDS-2254 : Fix flaky unit test TestContainerStateMachine#testRatisSnapshotRetention.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../client/rpc/TestContainerStateMachine.java      | 26 +++++++++++-----------
 1 file changed, 13 insertions(+), 13 deletions(-)

commit bcd04c2ab8da475b4479662ccde43973c96886c5
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Thu Oct 17 12:13:47 2019 -0700

    HDDS-2181. Ozone Manager should send correct ACL type in ACL requests to Authorizer (#43)

 ...OzoneManagerProtocolClientSideTranslatorPB.java |  2 +-
 .../ozone/security/acl/IAccessAuthorizer.java      |  2 +-
 .../org/apache/hadoop/ozone/om/TestOmAcls.java     |  6 +--
 .../security/acl/TestOzoneNativeAuthorizer.java    | 23 ++++++++--
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 37 +++++++--------
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 10 +++++
 .../om/request/bucket/OMBucketCreateRequest.java   |  2 +-
 .../om/request/bucket/OMBucketDeleteRequest.java   |  2 +-
 .../om/request/file/OMDirectoryCreateRequest.java  |  5 ++-
 .../ozone/om/request/file/OMFileCreateRequest.java |  5 ++-
 .../om/request/key/OMAllocateBlockRequest.java     |  4 +-
 .../ozone/om/request/key/OMKeyCommitRequest.java   | 17 ++++---
 .../ozone/om/request/key/OMKeyCreateRequest.java   |  5 ++-
 .../ozone/om/request/key/OMKeyDeleteRequest.java   |  5 ++-
 .../ozone/om/request/key/OMKeyRenameRequest.java   | 10 ++++-
 .../hadoop/ozone/om/request/key/OMKeyRequest.java  | 39 +++++++++++++---
 .../ozone/security/acl/OzoneNativeAuthorizer.java  | 52 +++++++++++++++++-----
 .../ozone/om/request/key/TestOMKeyRequest.java     |  1 +
 18 files changed, 171 insertions(+), 56 deletions(-)

commit 37f48c40ee8397fae13b697213fd42eb22905ef1
Author: Márton Elek <elek@apache.org>
Date:   Thu Oct 17 15:59:49 2019 +0200

    HDDS-2221. Monitor datanodes in ozoneperf compose cluster
    
    Closes #1

 .../dist/src/main/compose/ozoneperf/docker-compose.yaml        |  2 +-
 .../compose/{common/prometheus => ozoneperf}/prometheus.yml    | 10 ++++++++++
 2 files changed, 11 insertions(+), 1 deletion(-)

commit b04105010af301782a2a228b8854e51402a8b797
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Oct 17 15:53:43 2019 +0200

    HDDS-1985. Fix listVolumes API
    
    Closes #33

 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 46 ++++++++++++++++++++++
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  4 +-
 2 files changed, 48 insertions(+), 2 deletions(-)

commit 61f4aa30f502b34fd778d9b37b1168721abafb2f
Merge: 47f0bf57 6c575f27
Author: Tsz-Wo Nicholas Sze <szetszwo@apache.org>
Date:   Thu Oct 17 17:27:26 2019 +0800

    Merge pull request #45 from szetszwo/HDDS-2275
    
    HDDS-2275. In BatchOperation.SingleOperation, do not clone byte[].

commit 6c575f2733c70a95bf24c456e7b16668629da32a
Author: Tsz Wo Nicholas Sze <szetszwo@apache.org>
Date:   Thu Oct 17 12:13:56 2019 +0800

    HDDS-2275. In BatchOperation.SingleOperation, do not clone byte[].

 .../apache/hadoop/hdds/utils/BatchOperation.java   | 22 ++++++++++------------
 1 file changed, 10 insertions(+), 12 deletions(-)

commit 47f0bf571a50aeb3c4475fece2d2fa3905409448
Merge: 85ba6439 38ec79e2
Author: Tsz-Wo Nicholas Sze <szetszwo@apache.org>
Date:   Thu Oct 17 12:04:30 2019 +0800

    Merge pull request #44 from szetszwo/HDDS-2271
    
    HDDS-2271. Avoid buffer copying in KeyValueHandler.

commit 85ba643990f10bbb5da3a8ed7c735d79f7c2a989
Author: Márton Elek <elek@apache.org>
Date:   Mon Oct 14 15:46:06 2019 +0200

    HDDS-2302. Manage common pom versions in one common place.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-hdds/pom.xml                           |  8 --------
 hadoop-ozone/dev-support/checks/acceptance.sh |  2 +-
 hadoop-ozone/pom.xml                          |  8 --------
 pom.xml                                       | 15 ++++++++++++---
 4 files changed, 13 insertions(+), 20 deletions(-)

commit 61c161ce054f8a071ec86fd8be4c9a5ccd2dab9e
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Oct 16 15:36:14 2019 -0700

    Revert "HDDS-2032. Ozone client should retry writes in case of any ratis/stateMachine exceptions"
    
    This reverts commit 9f88f427644bcf71a4916239e585d67805228cae.

 hadoop-hdds/pom.xml                           |  8 ++++++++
 hadoop-ozone/dev-support/checks/acceptance.sh |  2 +-
 hadoop-ozone/pom.xml                          |  8 ++++++++
 pom.xml                                       | 15 +++------------
 4 files changed, 20 insertions(+), 13 deletions(-)

commit 9f88f427644bcf71a4916239e585d67805228cae
Author: Márton Elek <elek@apache.org>
Date:   Mon Oct 14 15:46:06 2019 +0200

    HDDS-2032. Ozone client should retry writes in case of any ratis/stateMachine exceptions
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-hdds/pom.xml                           |  8 --------
 hadoop-ozone/dev-support/checks/acceptance.sh |  2 +-
 hadoop-ozone/pom.xml                          |  8 --------
 pom.xml                                       | 15 ++++++++++++---
 4 files changed, 13 insertions(+), 20 deletions(-)

commit 0f5f7bafb18c925067450a975370809b1c6f3363
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Wed Oct 16 23:06:56 2019 +0200

    HDDS-2289. Put testing information and a problem description to the g… (#5)

 .github/pull_request_template.md | 18 ++++++++++++++----
 1 file changed, 14 insertions(+), 4 deletions(-)

commit 01e24e8dde479d3b18ab5000c2fffc0a93f6af85
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Wed Oct 16 15:54:05 2019 +0200

    HDDS-2316. Support to skip recon and/or ozonefs during the build (#39)

 hadoop-ozone/dist/pom.xml | 90 ++++++++++++++++++++++++++++++++++++-----------
 hadoop-ozone/pom.xml      | 30 +++++++++++++---
 2 files changed, 94 insertions(+), 26 deletions(-)

commit 96f1dcc4351ebf818ffb1a9856bbeab98ad37041
Author: cxorm <lianp964@gmail.com>
Date:   Wed Oct 16 14:55:46 2019 +0200

    HDDS-1737. Add Volume check in KeyManager and File Operations
    
    Closes #2

 .../om/request/file/OMDirectoryCreateRequest.java  | 16 +++-------
 .../ozone/om/request/file/OMFileCreateRequest.java | 11 ++-----
 .../ozone/om/request/key/OMKeyDeleteRequest.java   | 11 +++----
 .../ozone/om/request/key/OMKeyRenameRequest.java   |  6 ++--
 .../request/file/TestOMDirectoryCreateRequest.java | 34 +++++++++++++++++++++-
 .../om/request/file/TestOMFileCreateRequest.java   | 21 +++++++++++++
 .../om/request/key/TestOMKeyDeleteRequest.java     | 26 +++++++++++++----
 .../om/request/key/TestOMKeyRenameRequest.java     | 28 ++++++++++++++----
 8 files changed, 110 insertions(+), 43 deletions(-)

commit 17081c2e7d94914daa1b01a4e1d4ee52d0a614d3
Author: Márton Elek <elek@apache.org>
Date:   Wed Oct 16 13:41:14 2019 +0200

    Revert "HDDS 2181. Ozone Manager should send correct ACL type in ACL requests to Authorizer"
    
    This reverts commit b4a1afd60e3a3c7319a1ffa97d5ace3a95ed26f6.

 ...OzoneManagerProtocolClientSideTranslatorPB.java |  2 +-
 .../ozone/security/acl/IAccessAuthorizer.java      |  2 +-
 .../org/apache/hadoop/ozone/om/TestOmAcls.java     |  6 ++--
 .../security/acl/TestOzoneNativeAuthorizer.java    | 23 ++-----------
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 12 ++-----
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 10 ------
 .../om/request/bucket/OMBucketCreateRequest.java   |  2 +-
 .../om/request/bucket/OMBucketDeleteRequest.java   |  2 +-
 .../om/request/file/OMDirectoryCreateRequest.java  |  5 +--
 .../ozone/om/request/file/OMFileCreateRequest.java |  5 +--
 .../om/request/key/OMAllocateBlockRequest.java     |  4 +--
 .../ozone/om/request/key/OMKeyCommitRequest.java   | 14 ++------
 .../ozone/om/request/key/OMKeyCreateRequest.java   |  5 +--
 .../ozone/om/request/key/OMKeyDeleteRequest.java   |  5 +--
 .../ozone/om/request/key/OMKeyRenameRequest.java   | 10 ++----
 .../hadoop/ozone/om/request/key/OMKeyRequest.java  | 39 +++-------------------
 .../ozone/security/acl/OzoneNativeAuthorizer.java  |  3 --
 .../ozone/om/request/key/TestOMKeyRequest.java     |  1 -
 18 files changed, 27 insertions(+), 123 deletions(-)

commit 34df0bffec313144e348842f11d64705b26175db
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Oct 16 13:15:24 2019 +0200

    HDDS-2312. Fix typo in ozone command
    
    Closes #34

 hadoop-ozone/common/src/main/bin/ozone | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fecdba713eb21b67c8abf544c84c146ef986cca9
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Oct 16 12:46:03 2019 +0200

    HDDS-2267. Container metadata scanner interval mismatch
    
    Closes #8

 .../hadoop/ozone/container/ozoneimpl/ContainerMetadataScanner.java | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 5adf6a1e3175e2a583eea0d2384ed1f8e11da57b
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Oct 16 12:32:56 2019 +0200

    HDDS-1988. Fix listParts API
    
    Closes #30

 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 89 ++++++++++++++++++++++
 1 file changed, 89 insertions(+)

commit f1835dd440fece3c6dc909b7b56be3afdbc802ae
Author: Márton Elek <elek@apache.org>
Date:   Wed Oct 16 12:27:53 2019 +0200

    Revert "HDDS-1998. TestSecureContainerServer#testClientServerRatisGrpc is failing"
    
    This reverts commit 59d66bc339deb6dbad3fd754039e6d5393d0b064.

 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 89 ----------------------
 1 file changed, 89 deletions(-)

commit 59d66bc339deb6dbad3fd754039e6d5393d0b064
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Oct 16 12:14:24 2019 +0200

    HDDS-1998. TestSecureContainerServer#testClientServerRatisGrpc is failing
    
    Closes #1328

 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 89 ++++++++++++++++++++++
 1 file changed, 89 insertions(+)

commit b4a1afd60e3a3c7319a1ffa97d5ace3a95ed26f6
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Oct 15 15:26:38 2019 -0700

    HDDS 2181. Ozone Manager should send correct ACL type in ACL requests to Authorizer
    Contributed by Vivek Ratnavel Subramanian.

 ...OzoneManagerProtocolClientSideTranslatorPB.java |  2 +-
 .../ozone/security/acl/IAccessAuthorizer.java      |  2 +-
 .../org/apache/hadoop/ozone/om/TestOmAcls.java     |  6 ++--
 .../security/acl/TestOzoneNativeAuthorizer.java    | 23 +++++++++++--
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 12 +++++--
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 10 ++++++
 .../om/request/bucket/OMBucketCreateRequest.java   |  2 +-
 .../om/request/bucket/OMBucketDeleteRequest.java   |  2 +-
 .../om/request/file/OMDirectoryCreateRequest.java  |  5 ++-
 .../ozone/om/request/file/OMFileCreateRequest.java |  5 ++-
 .../om/request/key/OMAllocateBlockRequest.java     |  4 ++-
 .../ozone/om/request/key/OMKeyCommitRequest.java   | 14 ++++++--
 .../ozone/om/request/key/OMKeyCreateRequest.java   |  5 ++-
 .../ozone/om/request/key/OMKeyDeleteRequest.java   |  5 ++-
 .../ozone/om/request/key/OMKeyRenameRequest.java   | 10 ++++--
 .../hadoop/ozone/om/request/key/OMKeyRequest.java  | 39 +++++++++++++++++++---
 .../ozone/security/acl/OzoneNativeAuthorizer.java  |  3 ++
 .../ozone/om/request/key/TestOMKeyRequest.java     |  1 +
 18 files changed, 123 insertions(+), 27 deletions(-)

commit 616d7a4a6bb362d8c5e3120e8812f37c9edce01a
Author: Márton Elek <elek@apache.org>
Date:   Mon Oct 14 10:43:06 2019 +0200

    HDDS-2295. Display log of freon on the standard output
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-ozone/common/src/main/bin/ozone | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 546e36bff9303c6f7ee601c755c8cdd50714335b
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Oct 15 18:20:18 2019 +0530

    HDDS-2305. Update Ozone to latest ratis snapshot(0.5.0-3f446aa-SNAPSHOT). Contributed by  Mukul Kumar Singh. (#26)

 hadoop-hdds/pom.xml  | 2 +-
 hadoop-ozone/pom.xml | 2 +-
 pom.xml              | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 8868d4e85a7f09490a650505583fec3248691495
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Oct 15 05:44:52 2019 -0700

    HDDS-2194. Replication of Container fails with "Only closed containers could be exported" (#25)

 .../hadoop/ozone/container/keyvalue/KeyValueContainer.java  | 13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)

commit 44a6a3f08c1b01dbf2cba84868e37e59329b4a1d
Author: Lokesh Jain <ljain@apache.org>
Date:   Tue Oct 15 17:13:33 2019 +0530

    BlockManager should allocate a block in excluded pipelines if none other left (#19)

 .../scm/container/common/helpers/ExcludeList.java  |  5 ++
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 12 +++++
 .../hadoop/hdds/scm/block/TestBlockManager.java    | 61 +++++++++++++++++-----
 3 files changed, 66 insertions(+), 12 deletions(-)

commit b3322b56fd6b4f0eda16d6d0b0d260618dd55794
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Oct 15 09:20:28 2019 +0530

    HDDS-2204. Avoid buffer coping in checksum verification. Contributed by Tsz Wo Nicholas Sze.

 .../hdds/scm/storage/ContainerProtocolCalls.java   |   2 +-
 .../org/apache/hadoop/ozone/common/Checksum.java   | 218 ++++++++++-----------
 .../apache/hadoop/ozone/common/ChecksumData.java   |   4 +-
 .../apache/hadoop/ozone/common/TestChecksum.java   |   6 +-
 4 files changed, 108 insertions(+), 122 deletions(-)

commit 83b5a67c1b3d741912bfbf2f7d38819eb812da76
Merge: 920dde90 e227ba42
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Oct 14 20:17:36 2019 -0700

    HDDS-2220. HddsVolume needs a toString method.

commit 920dde90e9d28743628b2bf42655b0e3a09152d8
Merge: e722e4d3 f59d3597
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Oct 14 11:25:48 2019 -0700

    HDDS-2298. Fix maven warning about duplicated metrics-core jar.
    
    Closes #18.

commit f59d35971d3d61563a04a4a2f85d831cd3ccb475
Author: Márton Elek <elek@apache.org>
Date:   Mon Oct 14 12:24:01 2019 +0200

    HDDS-2298. Fix maven warning about duplicated metrics-core jar

 hadoop-ozone/tools/pom.xml | 5 -----
 1 file changed, 5 deletions(-)

commit e722e4d3a73b4eb6f92b678be83ba32590edc085
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Oct 14 10:01:24 2019 +0200

    HDDS-2290. Rename pom.ozone.xml to pom.xml
    
    Closes #10

 hadoop-hdds/docs/content/beyond/Containers.md       | 2 +-
 hadoop-hdds/docs/content/start/FromSource.md        | 2 +-
 hadoop-hdds/pom.xml                                 | 1 -
 hadoop-ozone/dev-support/checks/build.sh            | 2 +-
 hadoop-ozone/dev-support/checks/checkstyle.sh       | 2 +-
 hadoop-ozone/dev-support/checks/findbugs.sh         | 4 ++--
 hadoop-ozone/dev-support/checks/integration.sh      | 4 ++--
 hadoop-ozone/dev-support/checks/unit.sh             | 2 +-
 hadoop-ozone/dist/src/main/assemblies/ozone-src.xml | 7 +------
 hadoop-ozone/pom.xml                                | 1 -
 pom.ozone.xml => pom.xml                            | 0
 11 files changed, 10 insertions(+), 17 deletions(-)

commit e227ba42a966fffe7fe84bf21107e84c32e5b87b
Author: cxorm <lianp964@gmail.com>
Date:   Sun Oct 13 15:52:02 2019 +0800

    HDDS-2220. HddsVolume needs a toString method.
    
    Override toString to show the path of HddsVolume.

 .../apache/hadoop/ozone/container/common/volume/HddsVolume.java   | 8 ++++++++
 1 file changed, 8 insertions(+)

commit c8f14a560beb9a83c7d98388614a5ba36d7638f6
Author: Márton Elek <elek@apache.org>
Date:   Sat Oct 12 09:54:15 2019 +0000

    HDDS-2287. Import common utility scripts and txt files from Hadoop without history.

 BUILDING.txt                      | 511 ++++++++++++++++++++++++++++++++++++++
 LICENSE.txt                       | 258 +++++++++++++++++++
 NOTICE.txt                        |  34 +++
 README.txt                        |   7 +
 dev-support/bin/qbt               |  18 ++
 dev-support/bin/smart-apply-patch |  18 ++
 dev-support/bin/test-patch        |  18 ++
 dev-support/bin/yetus-wrapper     | 188 ++++++++++++++
 dev-support/byteman/README.md     |  31 +++
 dev-support/byteman/hadooprpc.btm |  44 ++++
 10 files changed, 1127 insertions(+)

commit 21ef389f92fbc92a7da71a4fd57c42391feaa3b5
Author: Shweta Yakkali <shwetayakkali@cloudera.com>
Date:   Fri Oct 11 10:23:19 2019 -0700

    HDDS-2213.Reduce key provider loading log level in OzoneFileSystem#getAdditionalTokenIssuers (#1556)

 .../src/main/java/org/apache/hadoop/fs/ozone/OzoneFileSystem.java       | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2862cddabec7913e2bbca234ce48a3dbe5eadd24
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Oct 10 22:33:59 2019 -0700

    HDDS-2282. scmcli pipeline list command throws NullPointerException. Contributed by Xiaoyu Yao. (#1642)

 .../hadoop/hdds/scm/XceiverClientManager.java      |  4 +++-
 .../org/apache/hadoop/hdds/scm/cli/SCMCLI.java     | 21 ++++++++++++++--
 .../dist/src/main/compose/ozonesecure/test.sh      |  2 ++
 .../dist/src/main/smoketest/scmcli/pipeline.robot  | 28 ++++++++++++++++++++++
 4 files changed, 52 insertions(+), 3 deletions(-)

commit 640255a2dea6e8292494d18e6fb890ba5a198c15
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Oct 10 16:49:06 2019 -0700

    HDDS-1986. Fix listkeys API. (#1588)

 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  89 +++++++-
 .../hadoop/ozone/om/TestOmMetadataManager.java     | 226 +++++++++++++++++++++
 .../ozone/om/request/TestOMRequestUtils.java       |  60 ++++--
 3 files changed, 352 insertions(+), 23 deletions(-)

commit f89eda1a68f728e9521052b4a8f5171ad72a928d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Oct 10 12:33:55 2019 -0700

    HDDS-1984. Fix listBucket API. (#1555)

 .../hadoop/hdds/utils/db/cache/CacheKey.java       |  11 +-
 .../hadoop/hdds/utils/db/cache/TableCacheImpl.java |  12 +-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  36 ++--
 .../hadoop/ozone/om/TestOmMetadataManager.java     | 191 +++++++++++++++++++++
 4 files changed, 233 insertions(+), 17 deletions(-)

commit 9ff77cd5d2ca95c34bc2cccd6ed48bf24b623eb4
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Oct 10 10:58:19 2019 -0700

    HDDS-2269. Provide config for fair/non-fair for OM RW Lock. (#1623)

 .../java/org/apache/hadoop/ozone/OzoneConfigKeys.java |  3 +++
 .../java/org/apache/hadoop/ozone/lock/ActiveLock.java | 11 +++++++----
 .../org/apache/hadoop/ozone/lock/LockManager.java     | 19 ++++++++++++++++---
 .../apache/hadoop/ozone/lock/PooledLockFactory.java   |  7 ++++++-
 .../common/src/main/resources/ozone-default.xml       | 11 +++++++++++
 .../apache/hadoop/ozone/om/lock/OzoneManagerLock.java |  7 ++++++-
 6 files changed, 49 insertions(+), 9 deletions(-)

commit 253faeda53b1b72200cf6ddbd9cdf75a54cc630c
Author: Siddharth <swagle@hortonworks.com>
Date:   Thu Oct 10 03:00:11 2019 -0700

    HDDS-2266. Avoid evaluation of LOG.trace and LOG.debug statement in the read/write path. (#1633)

 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  |  3 +-
 .../client/io/BlockOutputStreamEntryPool.java      | 10 ++--
 .../hadoop/ozone/client/io/KeyInputStream.java     |  6 ++-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 10 ++--
 .../hadoop/ozone/om/S3SecretManagerImpl.java       |  4 +-
 .../ozone/om/ha/OMFailoverProxyProvider.java       |  6 ++-
 .../hadoop/ozone/om/helpers/OMRatisHelper.java     |  4 +-
 .../hadoop/ozone/om/lock/OzoneManagerLock.java     | 24 ++++++----
 .../security/OzoneBlockTokenSecretManager.java     |  2 +-
 .../OzoneDelegationTokenSecretManager.java         |  6 ++-
 .../security/OzoneDelegationTokenSelector.java     |  8 +++-
 .../hadoop/ozone/security/OzoneSecretManager.java  |  6 ++-
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  6 ++-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 27 +++++++----
 .../hadoop/ozone/om/OpenKeyCleanupService.java     |  4 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 10 ++--
 .../apache/hadoop/ozone/om/PrefixManagerImpl.java  | 11 +++--
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  | 16 +++++--
 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java   |  8 ++--
 .../ozone/om/ratis/OzoneManagerRatisClient.java    | 53 ++++++++++++----------
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |  6 ++-
 .../request/bucket/acl/OMBucketSetAclRequest.java  |  4 +-
 .../request/volume/acl/OMVolumeSetAclRequest.java  |  6 ++-
 .../OzoneManagerHARequestHandlerImpl.java          |  4 +-
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  4 +-
 .../protocolPB/OzoneManagerRequestHandler.java     |  4 +-
 .../ozone/security/acl/OzoneNativeAuthorizer.java  |  8 ++--
 .../hadoop/fs/ozone/BasicOzoneFileSystem.java      |  4 +-
 .../apache/hadoop/ozone/s3/AWSV4AuthParser.java    | 10 ++--
 .../hadoop/ozone/s3/OzoneClientProducer.java       |  5 +-
 .../ozone/s3/exception/OS3ExceptionMapper.java     |  4 +-
 31 files changed, 182 insertions(+), 101 deletions(-)

commit 28e62036287ece5b4612956ebbdc8919fd605a83
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Oct 9 16:17:40 2019 +0200

    HDDS-2265. integration.sh may report false negative
    
    Closes #1608

 hadoop-ozone/dev-support/checks/_mvn_unit_report.sh | 5 +++++
 1 file changed, 5 insertions(+)

commit 71cc36f691e219f9c1605f4a9c840af259c16ec6
Author: Márton Elek <elek@apache.org>
Date:   Wed Oct 9 16:16:44 2019 +0200

    Squashed commit of the following:
    
    commit 9d6a1b97f365b22392ceac8d958cf041c3515bd6
    Author: Doroszlai, Attila <adoroszlai@apache.org>
    Date:   Mon Oct 7 13:42:35 2019 +0200
    
        HDDS-2265. integration.sh may report false negative
    Revert "HDDS-2217. Remove log4j and audit configuration from the docker-config files"
    
    This reverts commit 4b0a5bca465c84265b8305e001809fd1f986e8da.

 hadoop-ozone/dev-support/checks/_mvn_unit_report.sh | 5 -----
 1 file changed, 5 deletions(-)

commit 3d5e915b41bba07a9a72f3222ad94bcf8abd7610
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Oct 9 15:51:00 2019 +0200

    HDDS-2217. Remove log4j and audit configuration from the docker-config files
    
    Closes #1582

 hadoop-ozone/dev-support/checks/_mvn_unit_report.sh | 5 +++++
 1 file changed, 5 insertions(+)

commit a15782ad0aed0553378e19293b7ec9c4cfa7de52
Author: Chris Teoh <cteoh@cloudera.com>
Date:   Wed Oct 9 14:14:47 2019 +0200

    HDDS-2217. Remove log4j and audit configuration from the docker-config files
    
    Closes #1582

 .../dist/src/main/compose/ozone-hdfs/docker-config | 46 -------------------
 .../dist/src/main/compose/ozone-mr/common-config   |  9 ----
 .../src/main/compose/ozone-om-ha/docker-config     | 45 ------------------
 .../src/main/compose/ozone-recon/docker-config     | 47 +------------------
 .../src/main/compose/ozone-topology/docker-config  | 49 --------------------
 .../dist/src/main/compose/ozone/docker-config      | 45 ------------------
 .../src/main/compose/ozoneblockade/docker-config   | 45 ------------------
 .../dist/src/main/compose/ozoneperf/docker-config  | 13 ------
 .../src/main/compose/ozones3-haproxy/docker-config | 48 --------------------
 .../dist/src/main/compose/ozones3/docker-config    | 48 --------------------
 .../src/main/compose/ozonescripts/docker-config    |  7 +--
 .../src/main/compose/ozonesecure-mr/docker-config  | 46 -------------------
 .../src/main/compose/ozonesecure/docker-config     | 53 ----------------------
 13 files changed, 2 insertions(+), 499 deletions(-)

commit 38ec79e26f38bc690950a9102012386e46bcd3df
Author: Tsz Wo Nicholas Sze <szetszwo@apache.org>
Date:   Wed Oct 9 17:02:48 2019 +0800

    HDDS-2271. Avoid buffer copying in KeyValueHandler.

 .../apache/hadoop/ozone/container/common/helpers/BlockData.java  | 5 +++++
 .../hadoop/ozone/container/keyvalue/KeyValueContainerCheck.java  | 3 +--
 .../apache/hadoop/ozone/container/keyvalue/KeyValueHandler.java  | 9 ++++-----
 .../hadoop/ozone/container/keyvalue/helpers/SmallFileUtils.java  | 4 ++--
 4 files changed, 12 insertions(+), 9 deletions(-)

commit 8ec4ba2b5a00374b69ae7d3b59dc7d8233374330
Author: Istvan Fajth <pifta@cloudera.com>
Date:   Wed Oct 9 07:58:47 2019 +0200

    HDDS-2233 - Remove ByteStringHelper and refactor the code to the place where it used (#1596)

 .../hadoop/hdds/scm/XceiverClientManager.java      |  7 +++
 .../hadoop/hdds/scm/storage/BlockOutputStream.java |  3 +-
 .../apache/hadoop/hdds/scm/storage/BufferPool.java | 15 +++++
 .../hadoop/hdds/scm/ByteStringConversion.java      | 62 +++++++++++++++++++
 .../apache/hadoop/hdds/scm/ByteStringHelper.java   | 69 ----------------------
 .../ozone/container/keyvalue/KeyValueHandler.java  | 33 +++++++----
 .../container/keyvalue/helpers/ChunkUtils.java     | 34 +----------
 .../keyvalue/impl/ChunkManagerDummyImpl.java       |  6 +-
 .../container/keyvalue/impl/ChunkManagerImpl.java  | 60 ++++++++-----------
 .../keyvalue/interfaces/ChunkManager.java          |  2 +-
 .../container/keyvalue/TestChunkManagerImpl.java   | 69 +++++++++++-----------
 .../client/io/BlockOutputStreamEntryPool.java      | 12 +++-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  5 --
 .../ozone/container/ContainerTestHelper.java       | 11 ++--
 .../common/impl/TestContainerPersistence.java      | 53 +++++++++--------
 15 files changed, 217 insertions(+), 224 deletions(-)

commit 70cf448ad315351b562987487dfaf1119485a372
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Oct 8 13:03:14 2019 -0700

    HDDS-2244. Use new ReadWrite lock in OzoneManager. (#1589)

 .../hadoop/ozone/om/lock/OzoneManagerLock.java     | 118 ++++++++++++++++++---
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  13 +--
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  38 ++++---
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  |  12 +--
 .../om/request/bucket/OMBucketCreateRequest.java   |  12 +--
 .../om/request/bucket/OMBucketDeleteRequest.java   |  16 ++-
 .../request/bucket/OMBucketSetPropertyRequest.java |  13 ++-
 .../om/request/bucket/acl/OMBucketAclRequest.java  |   6 +-
 .../om/request/file/OMDirectoryCreateRequest.java  |   4 +-
 .../ozone/om/request/file/OMFileCreateRequest.java |   4 +-
 .../ozone/om/request/key/OMKeyCommitRequest.java   |   4 +-
 .../ozone/om/request/key/OMKeyCreateRequest.java   |   4 +-
 .../ozone/om/request/key/OMKeyDeleteRequest.java   |   4 +-
 .../ozone/om/request/key/OMKeyRenameRequest.java   |   4 +-
 .../ozone/om/request/key/acl/OMKeyAclRequest.java  |   6 +-
 .../request/key/acl/prefix/OMPrefixAclRequest.java |   4 +-
 .../request/s3/bucket/S3BucketCreateRequest.java   |  22 ++--
 .../request/s3/bucket/S3BucketDeleteRequest.java   |  13 +--
 .../S3InitiateMultipartUploadRequest.java          |   4 +-
 .../multipart/S3MultipartUploadAbortRequest.java   |   4 +-
 .../S3MultipartUploadCommitPartRequest.java        |   4 +-
 .../S3MultipartUploadCompleteRequest.java          |   4 +-
 .../om/request/s3/security/S3GetSecretRequest.java |   6 +-
 .../om/request/volume/OMVolumeCreateRequest.java   |  10 +-
 .../om/request/volume/OMVolumeDeleteRequest.java   |  10 +-
 .../om/request/volume/OMVolumeSetOwnerRequest.java |   6 +-
 .../om/request/volume/OMVolumeSetQuotaRequest.java |   6 +-
 .../om/request/volume/acl/OMVolumeAclRequest.java  |   4 +-
 28 files changed, 232 insertions(+), 123 deletions(-)

commit 6a580fd27a22e393568823e86266a9721ab0fda4
Author: Siddharth <swagle@hortonworks.com>
Date:   Tue Oct 8 11:13:54 2019 -0700

    HDDS-2260. Avoid evaluation of LOG.trace and LOG.debug statement in the read/write path (HDDS). (#1612)

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 17 +++--
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 28 +++++---
 .../hdds/scm/client/ContainerOperationClient.java  | 10 ++-
 .../hadoop/hdds/scm/storage/BlockInputStream.java  |  6 +-
 .../hadoop/hdds/scm/storage/BlockOutputStream.java | 40 ++++++-----
 .../hadoop/hdds/scm/storage/CommitWatcher.java     |  8 ++-
 .../java/org/apache/hadoop/hdds/HddsUtils.java     |  6 +-
 .../apache/hadoop/hdds/conf/HddsConfServlet.java   |  4 +-
 .../org/apache/hadoop/hdds/ratis/RatisHelper.java  |  5 +-
 .../hadoop/hdds/scm/net/NetworkTopologyImpl.java   | 21 ++++--
 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  | 12 ++--
 .../hdds/security/token/BlockTokenVerifier.java    |  4 +-
 .../security/token/OzoneBlockTokenSelector.java    |  8 ++-
 .../authority/PKIProfiles/DefaultProfile.java      |  4 +-
 .../hdds/security/x509/keys/HDDSKeyGenerator.java  |  6 +-
 .../apache/hadoop/hdds/tracing/StringCodec.java    |  4 +-
 .../hadoop/hdds/utils/BackgroundService.java       |  9 ++-
 .../apache/hadoop/hdds/utils/HddsVersionInfo.java  |  6 +-
 .../org/apache/hadoop/hdds/utils/LevelDBStore.java | 20 ++++--
 .../helpers/ContainerCommandRequestPBHelper.java   | 16 +++--
 .../hadoop/ozone/lease/LeaseCallbackExecutor.java  |  2 +-
 .../apache/hadoop/ozone/lease/LeaseManager.java    |  6 +-
 .../ozone/container/common/impl/ContainerSet.java  | 10 +--
 .../container/common/impl/HddsDispatcher.java      | 11 ++-
 .../RandomContainerDeletionChoosingPolicy.java     | 11 +--
 ...TopNOrderedContainerDeletionChoosingPolicy.java | 13 ++--
 .../common/statemachine/EndpointStateMachine.java  |  4 +-
 .../CloseContainerCommandHandler.java              |  6 +-
 .../commandhandler/DeleteBlocksCommandHandler.java | 28 +++++---
 .../server/ratis/ContainerStateMachine.java        | 40 +++++++----
 .../container/common/volume/HddsVolumeChecker.java | 14 ++--
 .../common/volume/ThrottledAsyncChecker.java       |  8 ++-
 .../container/keyvalue/KeyValueBlockIterator.java  |  6 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  | 84 ++++++++++++++--------
 .../container/keyvalue/helpers/ChunkUtils.java     |  6 +-
 .../container/keyvalue/impl/BlockManagerImpl.java  |  8 ++-
 .../container/keyvalue/impl/ChunkManagerImpl.java  |  9 +--
 .../background/BlockDeletingService.java           |  6 +-
 .../container/ozoneimpl/ContainerDataScanner.java  |  4 +-
 .../hadoop/hdds/server/events/EventQueue.java      |  2 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 10 ++-
 .../hdds/scm/block/SCMBlockDeletingService.java    | 12 ++--
 .../scm/command/CommandStatusReportHandler.java    | 12 ++--
 .../container/AbstractContainerReportHandler.java  |  6 +-
 .../scm/container/ContainerActionsHandler.java     |  6 +-
 .../hdds/scm/container/ContainerStateManager.java  |  4 +-
 .../IncrementalContainerReportHandler.java         |  6 +-
 .../algorithms/SCMContainerPlacementRackAware.java |  6 +-
 .../scm/container/states/ContainerAttribute.java   | 22 ++++--
 .../scm/container/states/ContainerStateMap.java    |  6 +-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 10 ++-
 .../hdds/scm/pipeline/PipelineReportHandler.java   |  4 +-
 .../hdds/scm/pipeline/RatisPipelineProvider.java   |  4 +-
 .../hdds/scm/pipeline/RatisPipelineUtils.java      |  4 +-
 .../hdds/scm/server/StorageContainerManager.java   | 18 ++---
 55 files changed, 420 insertions(+), 222 deletions(-)

commit e1eb29d5659e0e4bf0ad1b5ee890cec399bbaccd
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Oct 7 15:41:42 2019 -0700

    HDDS-2245. Use dynamic ports for SCM in TestSecureOzoneCluster
    Contributed by kevin su.

 .../org/apache/hadoop/ozone/TestSecureOzoneCluster.java     | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit a7fdbf2bdb1404ff58a284286b3388889b06c9ee
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Mon Oct 7 12:07:33 2019 +0200

    HDDS-2262. SLEEP_SECONDS: command not found
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-ozone/dist/src/main/dockerbin/entrypoint.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 796c057dfd9b23f5c678ed1cc488d37023601cfd
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Sun Oct 6 08:45:37 2019 +0200

    HDDS-2259. Container Data Scrubber computes wrong checksum
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../container/keyvalue/KeyValueContainerCheck.java | 34 +++++------
 .../keyvalue/TestKeyValueContainerCheck.java       | 69 +++++++++-------------
 2 files changed, 43 insertions(+), 60 deletions(-)

commit dd2bafad8e66f38f872e7f0011f1278e306d8039
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Mon Oct 7 13:08:14 2019 +0200

    HDDS-2264. Improve output of TestOzoneContainer
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../container/ozoneimpl/TestOzoneContainer.java    | 23 ++++++++++++----------
 1 file changed, 13 insertions(+), 10 deletions(-)

commit 719240c618413e0dfe3738891c80ac81fda02cc6
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Fri Oct 4 08:08:05 2019 +0200

    HDDS-2238. Container Data Scrubber spams log in empty cluster
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../ozone/container/common/impl/ContainerSet.java  | 54 ++++++++++------------
 .../container/ozoneimpl/ContainerController.java   |  6 +--
 .../container/ozoneimpl/ContainerDataScanner.java  | 46 ++++++++++--------
 .../ozoneimpl/ContainerDataScrubberMetrics.java    |  4 +-
 .../ozoneimpl/ContainerMetadataScanner.java        | 19 ++++----
 .../ContainerMetadataScrubberMetrics.java          |  5 +-
 .../ozoneimpl/ContainerScrubberConfiguration.java  | 17 +++++++
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  8 +---
 .../container/common/impl/TestContainerSet.java    | 18 ++++----
 .../ozoneimpl/TestContainerScrubberMetrics.java    | 25 +++++-----
 .../container/common/TestBlockDeletingService.java | 24 +++++-----
 .../hadoop/ozone/dn/scrubber/TestDataScrubber.java |  7 ++-
 12 files changed, 120 insertions(+), 113 deletions(-)

commit 83a571595017c2e1bfc24447ed0957b94e768953
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Mon Oct 7 19:17:25 2019 +0200

    HDDS-2239. Fix TestOzoneFsHAUrls (#1600)

 .../fs/ozone/BasicOzoneClientAdapterImpl.java      | 59 ++++++++++++----------
 1 file changed, 31 insertions(+), 28 deletions(-)

commit ed47ffe68bac3ecd418b4bcebe8b37136c4f8e0f
Author: dchitlangia <dineshchitlangia@gmail.com>
Date:   Mon Oct 7 11:35:39 2019 +0200

    HDDS-2252. Enable gdpr robot test in daily build
    
    Closes #1602

 hadoop-ozone/dist/src/main/compose/ozone/test.sh | 2 ++
 1 file changed, 2 insertions(+)

commit e70ea7b66ca3326c3b00ddc3e4af7144d48ea5f5
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Mon Oct 7 09:34:36 2019 +0530

    HDDS-2169. Avoid buffer copies while submitting client requests in Ratis. Contributed by Tsz-wo Sze(#1517).

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  43 ++----
 .../hdds/ratis/ContainerCommandRequestMessage.java | 107 +++++++++++++++
 .../org/apache/hadoop/hdds/ratis/RatisHelper.java  |  12 ++
 .../ratis/TestContainerCommandRequestMessage.java  | 152 +++++++++++++++++++++
 .../server/ratis/ContainerStateMachine.java        |  12 +-
 .../transport/server/ratis/XceiverServerRatis.java |   5 +-
 .../container/keyvalue/helpers/ChunkUtils.java     |   2 +-
 7 files changed, 294 insertions(+), 39 deletions(-)

commit 4d285c6857779d205d5a00effefef76929487097
Author: Márton Elek <elek@apache.org>
Date:   Sat Oct 5 13:40:02 2019 +0200

    HDDS-2251. Add an option to customize unit.sh and integration.sh parameters
    
    Closes #1598

 hadoop-ozone/dev-support/checks/integration.sh | 2 +-
 hadoop-ozone/dev-support/checks/unit.sh        | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 37bc8b07ab826b4f5848931f4525b773fd879f61
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Fri Oct 4 16:36:32 2019 -0700

    HDDS-2257. Fix checkstyle issues in ChecksumByteBuffer (#1603)

 .../hadoop/ozone/common/ChecksumByteBuffer.java    | 24 ++++++++++++++--------
 1 file changed, 16 insertions(+), 8 deletions(-)

commit 5583014a48782b5a23c9adaa64f9b07bf8a9f5c3
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Fri Oct 4 23:31:22 2019 +0200

    HDDS-2250. Generated configs missing from ozone-filesystem-lib jars
    
    Closes #1597

 hadoop-ozone/ozonefs-lib-current/pom.xml | 3 +++
 1 file changed, 3 insertions(+)

commit e87d6df72b020d52cbd35020e4b033deab7874c7
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Oct 4 12:52:29 2019 -0700

    HDDS-2158. Fixing Json Injection Issue in JsonUtils. (#1486)

 .../java/org/apache/hadoop/hdds/scm/container/ContainerInfo.java   | 2 +-
 .../src/main/java/org/apache/hadoop/ozone/web/utils/JsonUtils.java | 5 ++---
 .../org/apache/hadoop/hdds/scm/cli/container/ListSubcommand.java   | 4 +---
 .../java/org/apache/hadoop/ozone/web/ozShell/ObjectPrinter.java    | 3 +--
 .../hadoop/ozone/web/ozShell/bucket/AddAclBucketHandler.java       | 5 ++---
 .../hadoop/ozone/web/ozShell/bucket/GetAclBucketHandler.java       | 4 ++--
 .../hadoop/ozone/web/ozShell/bucket/RemoveAclBucketHandler.java    | 7 +++----
 .../hadoop/ozone/web/ozShell/bucket/SetAclBucketHandler.java       | 5 ++---
 .../org/apache/hadoop/ozone/web/ozShell/keys/AddAclKeyHandler.java | 5 ++---
 .../org/apache/hadoop/ozone/web/ozShell/keys/GetAclKeyHandler.java | 4 ++--
 .../apache/hadoop/ozone/web/ozShell/keys/RemoveAclKeyHandler.java  | 7 +++----
 .../org/apache/hadoop/ozone/web/ozShell/keys/SetAclKeyHandler.java | 5 ++---
 .../org/apache/hadoop/ozone/web/ozShell/token/GetTokenHandler.java | 2 +-
 .../apache/hadoop/ozone/web/ozShell/token/PrintTokenHandler.java   | 2 +-
 .../hadoop/ozone/web/ozShell/volume/AddAclVolumeHandler.java       | 5 ++---
 .../hadoop/ozone/web/ozShell/volume/GetAclVolumeHandler.java       | 4 ++--
 .../hadoop/ozone/web/ozShell/volume/RemoveAclVolumeHandler.java    | 7 +++----
 .../hadoop/ozone/web/ozShell/volume/SetAclVolumeHandler.java       | 5 ++---
 18 files changed, 34 insertions(+), 47 deletions(-)

commit c7232bbf34eccda98050067827b741ae61663f5c
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Fri Oct 4 12:44:21 2019 -0700

    HDDS-2164 : om.db.checkpoints is getting filling up fast. (#1536)

 .../hadoop/hdds/utils/db/RDBCheckpointManager.java |  2 +-
 .../hadoop/hdds/utils/db/RocksDBCheckpoint.java    |  3 +-
 .../main/java/org/apache/hadoop/ozone/OmUtils.java | 97 ++++++++++------------
 .../java/org/apache/hadoop/ozone/TestOmUtils.java  | 79 ++++++++++++++----
 .../hadoop/ozone/om/TestOMDbCheckpointServlet.java |  4 -
 .../hadoop/ozone/om/OMDBCheckpointServlet.java     | 59 +++++--------
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java | 10 ---
 .../org/apache/hadoop/ozone/recon/ReconUtils.java  | 61 ++++++++++++++
 .../apache/hadoop/ozone/recon/TestReconUtils.java  | 44 +++++++++-
 .../impl/TestOzoneManagerServiceProviderImpl.java  |  6 +-
 10 files changed, 240 insertions(+), 125 deletions(-)

commit b6461c37eb27032440182ab4e990a94f458d827c
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Oct 4 18:48:49 2019 +0200

    HDDS-2237. KeyDeletingService throws NPE if it's started too early (#1584)

 .../src/main/java/org/apache/hadoop/ozone/om/KeyManagerImpl.java       | 1 -
 .../test/java/org/apache/hadoop/ozone/om/TestKeyDeletingService.java   | 3 +++
 2 files changed, 3 insertions(+), 1 deletion(-)

commit 693440200895ee451dfe3fc724a0312679d71c19
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Fri Oct 4 17:37:51 2019 +0200

    HDDS-2230. Invalid entries in ozonesecure-mr config. (Addendum)

 hadoop-ozone/dist/src/main/compose/ozonesecure-mr/docker-compose.yaml | 3 +++
 1 file changed, 3 insertions(+)

commit a6b8b16ad76000e624253fb0ced54f6acafaa307
Author: Tsz-Wo Nicholas Sze <szetszwo@apache.org>
Date:   Fri Oct 4 21:16:28 2019 +0800

    HDDS-2222. Add a method to update ByteBuffer in PureJavaCrc32/PureJavaCrc32C. (#1595)

 .../common/dev-support/findbugsExcludeFile.xml     |   5 +
 .../hadoop/ozone/common/ChecksumByteBuffer.java    | 114 +++++
 .../ozone/common/PureJavaCrc32ByteBuffer.java      | 556 ++++++++++++++++++++
 .../ozone/common/PureJavaCrc32CByteBuffer.java     | 559 +++++++++++++++++++++
 .../ozone/common/TestChecksumByteBuffer.java       | 102 ++++
 5 files changed, 1336 insertions(+)

commit 5119799f73568390bc5b37e4c9bab3afc811fb97
Author: cxorm <lianp964@gmail.com>
Date:   Thu Oct 3 20:47:36 2019 +0800

    HDDS-2216. Rename HADOOP_RUNNER_VERSION to OZONE_RUNNER_VERSION in compose .env files.
    
    Closes #1570.

 hadoop-ozone/dev-support/checks/blockade.sh                  |  2 +-
 hadoop-ozone/dist/src/main/compose/ozone-hdfs/.env           |  2 +-
 .../dist/src/main/compose/ozone-hdfs/docker-compose.yaml     |  6 +++---
 hadoop-ozone/dist/src/main/compose/ozone-mr/hadoop27/.env    |  2 +-
 .../src/main/compose/ozone-mr/hadoop27/docker-compose.yaml   |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozone-mr/hadoop31/.env    |  2 +-
 .../src/main/compose/ozone-mr/hadoop31/docker-compose.yaml   |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozone-mr/hadoop32/.env    |  2 +-
 .../src/main/compose/ozone-mr/hadoop32/docker-compose.yaml   |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozone-om-ha/.env          |  2 +-
 .../dist/src/main/compose/ozone-om-ha/docker-compose.yaml    | 10 +++++-----
 hadoop-ozone/dist/src/main/compose/ozone-recon/.env          |  2 +-
 .../dist/src/main/compose/ozone-recon/docker-compose.yaml    |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozone-topology/.env       |  2 +-
 .../dist/src/main/compose/ozone-topology/docker-compose.yaml | 12 ++++++------
 hadoop-ozone/dist/src/main/compose/ozone/.env                |  2 +-
 hadoop-ozone/dist/src/main/compose/ozone/docker-compose.yaml |  6 +++---
 hadoop-ozone/dist/src/main/compose/ozoneblockade/.env        |  2 +-
 .../dist/src/main/compose/ozoneblockade/docker-compose.yaml  |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozoneperf/.env            |  2 +-
 .../dist/src/main/compose/ozoneperf/docker-compose.yaml      | 10 +++++-----
 hadoop-ozone/dist/src/main/compose/ozones3-haproxy/.env      |  2 +-
 .../src/main/compose/ozones3-haproxy/docker-compose.yaml     | 12 ++++++------
 hadoop-ozone/dist/src/main/compose/ozones3/.env              |  2 +-
 .../dist/src/main/compose/ozones3/docker-compose.yaml        |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozonescripts/.env         |  2 +-
 hadoop-ozone/dist/src/main/compose/ozonesecure-mr/.env       |  2 +-
 .../dist/src/main/compose/ozonesecure-mr/docker-compose.yaml |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozonesecure/.env          |  2 +-
 .../dist/src/main/compose/ozonesecure/docker-compose.yaml    | 10 +++++-----
 .../network-tests/src/test/blockade/ozone/cluster.py         |  4 ++--
 31 files changed, 79 insertions(+), 79 deletions(-)

commit 49ed51637ef21ad694eb67b099d5c85084dd1fa7
Author: S O'Donnell <sodonnell@cloudera.com>
Date:   Fri Oct 4 14:00:06 2019 +0200

    HDDS-2199. In SCMNodeManager dnsToUuidMap cannot track multiple DNs on the same host
    
    Closes #1551

 .../apache/hadoop/hdds/scm/node/NodeManager.java   |  8 +--
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 51 ++++++++++++----
 .../hdds/scm/server/SCMBlockProtocolServer.java    |  7 ++-
 .../hadoop/hdds/scm/container/MockNodeManager.java | 36 ++++++++++--
 .../hadoop/hdds/scm/node/TestSCMNodeManager.java   | 67 +++++++++++++++++++++-
 .../testutils/ReplicationNodeManagerMock.java      |  5 +-
 6 files changed, 149 insertions(+), 25 deletions(-)

commit 55f92336a346e59b824cb526b0fc1e56ce3eff05
Author: dchitlangia <dineshchitlangia@gmail.com>
Date:   Fri Oct 4 13:51:57 2019 +0200

    HDDS-2140. Add robot test for GDPR feature
    
    Closes #1542

 .../dist/src/main/smoketest/gdpr/gdpr.robot        | 89 ++++++++++++++++++++++
 1 file changed, 89 insertions(+)

commit a2ebf5ad1ae1555b016ff54fd767fb6033635b49
Author: Márton Elek <elek@apache.org>
Date:   Fri Oct 4 13:18:00 2019 +0200

    HDDS-2230. Invalid entries in ozonesecure-mr config
    
    Doroszlai, Attila <adoroszlai@apache.org>

 .../compose/ozonesecure-mr/docker-compose.yaml     | 29 ++++++++++++++++++----
 .../src/main/compose/ozonesecure-mr/docker-config  | 28 +++++++++++----------
 2 files changed, 39 insertions(+), 18 deletions(-)

commit 1534e3549e0832a861297a49739333ffbdfc472f
Author: Tsz-Wo Nicholas Sze <szetszwo@apache.org>
Date:   Fri Oct 4 19:19:45 2019 +0800

    Revert "HDDS-2222 (#1578)" (#1594)
    
    This reverts commit 4cf0b3660f620dd8a67201b75f4c88492c9adfb3.

 .../hadoop/ozone/common/ChecksumByteBuffer.java    | 114 -----
 .../ozone/common/PureJavaCrc32ByteBuffer.java      | 556 --------------------
 .../ozone/common/PureJavaCrc32CByteBuffer.java     | 559 ---------------------
 .../ozone/common/TestChecksumByteBuffer.java       | 102 ----
 4 files changed, 1331 deletions(-)

commit 80ac60000f0b76a0f508032cf4c76024c11cd2d3
Author: Tsz-Wo Nicholas Sze <szetszwo@apache.org>
Date:   Fri Oct 4 17:50:21 2019 +0800

    HDDS-2222 (#1578)
    
    Thanks @jnp  for reviewing this.  Merging now.

 .../hadoop/ozone/common/ChecksumByteBuffer.java    | 114 +++++
 .../ozone/common/PureJavaCrc32ByteBuffer.java      | 556 ++++++++++++++++++++
 .../ozone/common/PureJavaCrc32CByteBuffer.java     | 559 +++++++++++++++++++++
 .../ozone/common/TestChecksumByteBuffer.java       | 102 ++++
 4 files changed, 1331 insertions(+)

commit 7fbee752da548818678d5d9c7e04eda98541cd8f
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Fri Oct 4 08:50:13 2019 +0200

    HDDS-2225. SCM fails to start in most unsecure environments due to leftover secure config
    
    Closes #1568

 .../dist/src/main/compose/ozonesecure-mr/docker-compose.yaml   | 10 ----------
 1 file changed, 10 deletions(-)

commit 2cd18641ca87f3760085bafb4207723a6185b7af
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Oct 4 08:32:43 2019 +0530

    HDDS-2223. Support ReadWrite lock in LockManager. (#1564)

 .../org/apache/hadoop/ozone/lock/ActiveLock.java   |  63 ++++++--
 .../org/apache/hadoop/ozone/lock/LockManager.java  | 166 ++++++++++++++++++---
 .../apache/hadoop/ozone/lock/TestLockManager.java  | 145 +++++++++++++++---
 3 files changed, 323 insertions(+), 51 deletions(-)

commit 1135b7c2b951ce7294671e9a17a7fb050a0498cc
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Oct 4 08:20:58 2019 +0530

    HDDS-2198. SCM should not consider containers in CLOSING state to come out of safemode. (#1540)

 .../hdds/scm/safemode/ContainerSafeModeRule.java   | 26 +++++++++++-----------
 .../hdds/scm/safemode/TestSCMSafeModeManager.java  |  6 +++--
 2 files changed, 17 insertions(+), 15 deletions(-)

commit 86ce58dd8154484a178b14f75b1167b9868f01ed
Author: Aravindan Vijayan <avijayan@cloudera.com>
Date:   Wed Oct 2 12:50:25 2019 -0700

    HDDS-2200 : Recon does not handle the NULL snapshot from OM DB cleanly.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../org/apache/hadoop/ozone/recon/ReconUtils.java  |  35 ++++++
 .../recon/recovery/ReconOmMetadataManagerImpl.java |  21 +++-
 .../spi/impl/ContainerDBServiceProviderImpl.java   |  28 +++--
 .../spi/impl/OzoneManagerServiceProviderImpl.java  |  33 +++--
 .../recon/spi/impl/ReconContainerDBProvider.java   |  32 ++++-
 .../ozone/recon/AbstractOMMetadataManagerTest.java |   2 +-
 .../apache/hadoop/ozone/recon/TestReconUtils.java  |  31 +++++
 .../recovery/TestReconOmMetadataManagerImpl.java   | 133 ++++++++++++++-------
 .../impl/TestOzoneManagerServiceProviderImpl.java  |  29 ++++-
 .../spi/impl/TestReconContainerDBProvider.java     |  13 --
 10 files changed, 268 insertions(+), 89 deletions(-)

commit 751c8d02987187aacbee1299215c83899320b0b5
Author: Aravindan Vijayan <avijayan@cloudera.com>
Date:   Fri Sep 27 00:10:08 2019 -0700

    HDDS-1720 : Add ability to configure RocksDB logs for Ozone Manager.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../hadoop/hdds/utils/db/DBStoreBuilder.java       | 24 +++++-
 .../hadoop/hdds/utils/db/RocksDBConfiguration.java | 62 ++++++++++++++
 .../hadoop/hdds/utils/db/TestDBStoreBuilder.java   | 16 ++--
 .../ozone/om/TestOzoneManagerRocksDBLogging.java   | 97 ++++++++++++++++++++++
 4 files changed, 189 insertions(+), 10 deletions(-)

commit 5249f99e41939275399fd864a30b09492934fa9f
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Thu Oct 3 23:50:04 2019 +0200

    HDDS-2231. test-single.sh cannot copy results (#1575)

 hadoop-ozone/dist/src/main/compose/test-single.sh | 2 ++
 1 file changed, 2 insertions(+)

commit 2aace9e97a9bd1e2d71a375da47c384eabd1217a
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Thu Oct 3 23:46:50 2019 +0200

    HDDS-2234. rat.sh fails due to ozone-recon-web/build files (#1580)

 hadoop-ozone/pom.xml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8560edfd9f541ae71c1673ab8db7e5b7baf271fb
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Thu Oct 3 21:44:04 2019 +0200

    HDDS-2211. Collect docker logs if env fails to start (#1553)

 hadoop-ozone/dist/src/main/compose/test-all.sh |  4 ++--
 hadoop-ozone/dist/src/main/compose/testlib.sh  | 12 +++++++-----
 2 files changed, 9 insertions(+), 7 deletions(-)

commit c8d3ca11adebb166c04effbfdc892408fc3c24f3
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Oct 3 09:28:41 2019 -0700

    HDDS-2226. S3 Secrets should use a strong RNG. (#1572)

 .../common/src/main/java/org/apache/hadoop/ozone/OmUtils.java     | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 67100ff6cf1becdfc51a4bf75907e97acf12a635
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Oct 2 23:09:06 2019 -0700

    HDDS-2228. Fix NPE in OzoneDelegationTokenManager#addPersistedDelegat… (#1571)

 .../OzoneDelegationTokenSecretManager.java         |  5 +++-
 .../hadoop/ozone/security/OzoneSecretManager.java  |  7 +++++-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  2 +-
 .../TestOzoneDelegationTokenSecretManager.java     | 29 +++++++++++++++++++---
 4 files changed, 37 insertions(+), 6 deletions(-)

commit 2be51cf94b0666bbce8fed32cd83a3d59fa468cd
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Oct 2 16:15:31 2019 -0700

    HDDS-2072. Make StorageContainerLocationProtocolService message based
    Contributed by Elek, Marton.

 ...inerLocationProtocolClientSideTranslatorPB.java | 411 +++++++++---------
 .../src/main/proto/ScmBlockLocationProtocol.proto  |   2 +-
 .../proto/StorageContainerLocationProtocol.proto   | 185 ++++----
 ...inerLocationProtocolServerSideTranslatorPB.java | 476 +++++++++++----------
 .../hdds/scm/server/SCMClientProtocolServer.java   |  12 +-
 .../ozone/insight/BaseInsightSubCommand.java       |   3 +
 .../scm/ScmProtocolBlockLocationInsight.java       |   2 +-
 .../scm/ScmProtocolContainerLocationInsight.java   |  71 +++
 8 files changed, 630 insertions(+), 532 deletions(-)

commit bd304bcea9b3aed1e020186ceaad7bad72b5a642
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Oct 2 15:41:54 2019 -0700

    HDDS-2019. Handle Set DtService of token in S3Gateway for OM HA. (#1489)

 .../hadoop/ozone/s3/OzoneClientProducer.java       |  11 +-
 .../hadoop/ozone/s3/OzoneServiceProvider.java      |  50 +++++++-
 .../apache/hadoop/ozone/s3/util/OzoneS3Util.java   |  44 +++++++
 .../hadoop/ozone/s3/util/TestOzoneS3Util.java      | 130 +++++++++++++++++++++
 4 files changed, 230 insertions(+), 5 deletions(-)

commit 1754b321a49549fb8466fae7a484b3cb86a5a67b
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Oct 2 15:18:43 2019 -0700

    HDDS-2224. Fix loadup cache for cache cleanup policy NEVER. (#1567)

 .../main/java/org/apache/hadoop/hdds/utils/db/TypedTable.java    | 2 +-
 .../java/org/apache/hadoop/hdds/utils/db/cache/TableCache.java   | 9 +++++++++
 .../org/apache/hadoop/hdds/utils/db/cache/TableCacheImpl.java    | 7 +++++++
 3 files changed, 17 insertions(+), 1 deletion(-)

commit 3a7bbdd23a3aa3596649260b4fefe48fd902024f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Oct 2 15:09:33 2019 -0700

    HDDS-2162. Make OM Generic related configuration support HA style config. (#1511)

 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  10 +-
 .../ozone/om/TestOzoneManagerConfiguration.java    |   9 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 230 ++--------------
 .../apache/hadoop/ozone/om/ha/OMHANodeDetails.java | 306 +++++++++++++++++++++
 .../hadoop/ozone/om/{ => ha}/OMNodeDetails.java    |   2 +-
 .../apache/hadoop/ozone/om/ha/package-info.java    |  23 ++
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |   2 +-
 .../om/snapshot/OzoneManagerSnapshotProvider.java  |   2 +-
 .../om/ratis/TestOzoneManagerRatisServer.java      |   2 +-
 9 files changed, 370 insertions(+), 216 deletions(-)

commit 3d013c5c3941ecf1e039a3256f7145fe509c844f
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Oct 2 12:34:53 2019 -0700

    HDDS-2227. GDPR key generation could benefit from secureRandom. (#1574)

 .../main/java/org/apache/hadoop/ozone/client/rpc/RpcClient.java   | 3 ++-
 .../java/org/apache/hadoop/ozone/security/GDPRSymmetricKey.java   | 8 +++++---
 .../org/apache/hadoop/ozone/security/TestGDPRSymmetricKey.java    | 4 +++-
 3 files changed, 10 insertions(+), 5 deletions(-)

commit cf69043794815a749016e7f3592302de3addc7d1
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Oct 2 12:19:58 2019 -0700

    HDDS-2073. Make SCMSecurityProtocol message based.
    Contributed by Elek, Marton.

 .../SCMSecurityProtocolClientSideTranslatorPB.java | 104 +++++++-----
 .../SCMSecurityProtocolServerSideTranslatorPB.java | 132 ---------------
 .../src/main/proto/SCMSecurityProtocol.proto       |  96 +++++++----
 .../SCMSecurityProtocolServerSideTranslatorPB.java | 186 +++++++++++++++++++++
 .../hdds/scm/server/SCMSecurityProtocolServer.java |  27 ++-
 .../ozone/insight/BaseInsightSubCommand.java       |   6 +-
 .../insight/scm/ScmProtocolSecurityInsight.java    |  71 ++++++++
 7 files changed, 401 insertions(+), 221 deletions(-)

commit 0334f45ade7a37102dcc2e5ca208599f758d09bb
Author: Márton Elek <elek@apache.org>
Date:   Mon Sep 23 16:40:08 2019 +0200

    HDDS-2068. Make StorageContainerDatanodeProtocolService message based
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 ...inerDatanodeProtocolClientSideTranslatorPB.java |  60 ++++++-----
 ...inerDatanodeProtocolServerSideTranslatorPB.java | 115 ++++++++++++---------
 .../proto/StorageContainerDatanodeProtocol.proto   |  58 ++++++++---
 .../ozone/container/common/SCMTestUtils.java       |   4 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 102 ++++++++----------
 .../ozone/insight/BaseInsightSubCommand.java       |   4 +-
 .../scm/ScmProtocolBlockLocationInsight.java       |   6 +-
 .../insight/scm/ScmProtocolDatanodeInsight.java    |  72 +++++++++++++
 8 files changed, 265 insertions(+), 156 deletions(-)

commit bdb308192dac4e1c9bae7ff8ee258c42efdf3e64
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Oct 2 09:25:47 2019 -0700

    HDDS-2201. Rename VolumeList to UserVolumeInfo. (#1566)

 .../apache/hadoop/ozone/om/OMMetadataManager.java  |  4 +--
 ...lumeListCodec.java => UserVolumeInfoCodec.java} | 13 ++++----
 .../src/main/proto/OzoneManagerProtocol.proto      |  2 +-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     | 25 ++++++++--------
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  | 35 ++++++++++++----------
 .../request/s3/bucket/S3BucketCreateRequest.java   |  5 ++--
 .../om/request/volume/OMVolumeCreateRequest.java   |  5 ++--
 .../om/request/volume/OMVolumeDeleteRequest.java   |  2 +-
 .../ozone/om/request/volume/OMVolumeRequest.java   | 14 ++++-----
 .../om/request/volume/OMVolumeSetOwnerRequest.java |  4 +--
 .../om/response/volume/OMVolumeCreateResponse.java | 11 ++++---
 .../om/response/volume/OMVolumeDeleteResponse.java |  8 ++---
 .../response/volume/OMVolumeSetOwnerResponse.java  |  8 ++---
 .../ozone/om/request/TestOMRequestUtils.java       |  6 ++--
 .../hadoop/ozone/om/request/package-info.java      | 22 ++++++++++++++
 .../request/volume/TestOMVolumeCreateRequest.java  |  6 ++--
 .../volume/TestOMVolumeSetOwnerRequest.java        |  4 +--
 .../ozone/om/response/TestOMResponseUtils.java     |  6 ++--
 .../hadoop/ozone/om/response/package-info.java     | 22 ++++++++++++++
 .../volume/TestOMVolumeCreateResponse.java         |  6 ++--
 .../volume/TestOMVolumeDeleteResponse.java         |  8 ++---
 .../volume/TestOMVolumeSetOwnerResponse.java       | 10 +++----
 .../ozone/om/response/volume/package-info.java     | 21 +++++++++++++
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  4 +--
 24 files changed, 159 insertions(+), 92 deletions(-)

commit 56d28739aee4071b69033b6557e3fa3d0c31ffed
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Oct 2 12:57:23 2019 +0200

    HDDS-2187. ozone-mr test fails with No FileSystem for scheme "o3fs"
    
    Closes #1537

 .../dist/src/main/compose/ozonesecure-mr/docker-config   |  3 +--
 .../META-INF/services/org.apache.hadoop.fs.FileSystem    | 16 ++++++++++++++++
 2 files changed, 17 insertions(+), 2 deletions(-)

commit 911f8b8c34035f308ee9ea850858e6a5d371ea8a
Author: bshashikant <shashikant@apache.org>
Date:   Wed Oct 2 10:11:01 2019 +0530

    HDDS-2210. ContainerStateMachine should not be marked unhealthy if applyTransaction fails with closed container exception(#1552).

 .../server/ratis/ContainerStateMachine.java        | 20 +++++--
 .../rpc/TestContainerStateMachineFailures.java     | 65 ++++++++++++++++++++++
 2 files changed, 79 insertions(+), 6 deletions(-)

commit 6062a1a8a2de74282af883cf9136aa224da2ae09
Author: Márton Elek <elek@apache.org>
Date:   Tue Oct 1 17:41:45 2019 +0200

    HDDS-2166. Some RPC metrics are missing from SCM prometheus endpoint
    
    Closes #1505

 .../hadoop/hdds/server/PrometheusMetricsSink.java  | 16 +++--
 .../hdds/server/TestPrometheusMetricsSink.java     | 77 ++++++++++++++++++++--
 2 files changed, 84 insertions(+), 9 deletions(-)

commit 3582431b73b6caf972f1cfac8ffebfbee6690f64
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Oct 1 14:31:15 2019 +0530

    HDDS-1615. ManagedChannel references are being leaked in ReplicationSupervisor.java. Contributed by  Mukul Kumar Singh. (#1547)

 .../hadoop/ozone/container/replication/GrpcReplicationClient.java   | 6 ++++++
 1 file changed, 6 insertions(+)

commit ffd2f8b5e49cf1e36e0a5d1cc24a1db511ac48b1
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Mon Sep 30 09:35:14 2019 +0200

    HDDS-2205. checkstyle.sh reports wrong failure count
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-ozone/dev-support/checks/checkstyle.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 737546bca61994903acb99ad75c74ade0a0ffbd1
Author: bshashikant <shashikant@apache.org>
Date:   Mon Sep 30 20:36:27 2019 +0530

    HDDS-2207. Update Ratis to latest snapshot. Contributed by Shashikant Bannerjee. (#1550)

 .../container/common/transport/server/ratis/XceiverServerRatis.java     | 2 +-
 hadoop-hdds/pom.xml                                                     | 2 +-
 hadoop-ozone/pom.xml                                                    | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit b889902c80ebbc7cc37449d14596836464950cbb
Author: dchitlangia <dineshchitlangia@gmail.com>
Date:   Mon Sep 30 16:02:30 2019 +0200

    HDDS-2202. Remove unused import in OmUtils
    
    Closes #1543

 hadoop-ozone/common/src/main/java/org/apache/hadoop/ozone/OmUtils.java | 1 -
 1 file changed, 1 deletion(-)

commit 1f7d8bf2e2398fda80da5fb67da7e717b750fe13
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Mon Sep 30 15:42:04 2019 +0200

    HDDS-2153. Add a config to tune max pending requests in Ratis leader
    
    Closes #1474

 .../src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java   | 5 +++++
 .../src/main/java/org/apache/hadoop/ozone/OzoneConfigKeys.java    | 5 +++++
 hadoop-hdds/common/src/main/resources/ozone-default.xml           | 8 ++++++++
 .../common/transport/server/ratis/XceiverServerRatis.java         | 6 ++++++
 4 files changed, 24 insertions(+)

commit 57dfd7c615a578d910558f5820e500824b689ac0
Author: cxorm <lianp964@gmail.com>
Date:   Mon Sep 30 14:38:01 2019 +0200

    HDDS-2183. Container and pipline subcommands of scmcli should be grouped
    
    Closes #1532

 .../org/apache/hadoop/hdds/scm/cli/SCMCLI.java     | 22 ++-------
 .../hdds/scm/cli/container/CloseSubcommand.java    |  7 ++-
 .../hdds/scm/cli/container/ContainerCommands.java  | 57 ++++++++++++++++++++++
 .../hdds/scm/cli/container/CreateSubcommand.java   |  5 +-
 .../hdds/scm/cli/container/DeleteSubcommand.java   |  7 ++-
 .../hdds/scm/cli/container/InfoSubcommand.java     |  5 +-
 .../hdds/scm/cli/container/ListSubcommand.java     |  5 +-
 .../cli/pipeline/ActivatePipelineSubcommand.java   | 11 ++---
 .../scm/cli/pipeline/ClosePipelineSubcommand.java  | 11 ++---
 .../cli/pipeline/DeactivatePipelineSubcommand.java | 11 ++---
 .../scm/cli/pipeline/ListPipelinesSubcommand.java  | 11 ++---
 .../hdds/scm/cli/pipeline/PipelineCommands.java    | 56 +++++++++++++++++++++
 12 files changed, 149 insertions(+), 59 deletions(-)

commit 90d7cc42e2c21a4e271264641471c24cc8d3d114
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Sep 27 15:24:30 2019 -0700

    HDDS-1146. Adding container related metrics in SCM. (#1541)

 .../container/AbstractContainerReportHandler.java  |  8 +++
 .../hdds/scm/container/ContainerManager.java       |  8 +++
 .../hdds/scm/container/ContainerReportHandler.java |  2 +
 .../IncrementalContainerReportHandler.java         | 10 ++++
 .../hdds/scm/container/SCMContainerManager.java    | 17 ++++++
 .../metrics/SCMContainerManagerMetrics.java        | 54 +++++++++++++++++++
 .../metrics/TestSCMContainerManagerMetrics.java    | 63 ++++++++++++++++++++--
 7 files changed, 158 insertions(+), 4 deletions(-)

commit 1a93d9df2d88a395352759541cf12fd84f568e03
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Fri Sep 27 12:47:25 2019 +0200

    HDDS-2185. createmrenv failure not reflected in acceptance test result
    
    Closes #1533

 hadoop-ozone/dist/src/main/compose/testlib.sh | 15 ++++++++++-----
 1 file changed, 10 insertions(+), 5 deletions(-)

commit abdd2bd9ee5a0870b491ed7b22724d93ac9f6a84
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Tue Sep 24 09:23:48 2019 +0200

    HDDS-2149. Replace findbugs with spotbugs
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-hdds/common/pom.xml                  |  4 ++--
 hadoop-hdds/container-service/pom.xml       |  9 ++++-----
 hadoop-hdds/pom.xml                         | 15 ---------------
 hadoop-hdds/server-scm/pom.xml              |  4 ++--
 hadoop-ozone/common/pom.xml                 |  4 ++--
 hadoop-ozone/csi/pom.xml                    |  4 ++--
 hadoop-ozone/dev-support/checks/findbugs.sh | 12 +++++++++---
 hadoop-ozone/insight/pom.xml                |  9 ++++-----
 hadoop-ozone/ozone-manager/pom.xml          |  5 ++---
 hadoop-ozone/ozonefs-lib-current/pom.xml    |  4 ++--
 hadoop-ozone/ozonefs-lib-legacy/pom.xml     |  4 ++--
 hadoop-ozone/ozonefs/pom.xml                |  5 ++---
 hadoop-ozone/pom.xml                        |  8 --------
 hadoop-ozone/recon/pom.xml                  |  4 ++--
 hadoop-ozone/s3gateway/pom.xml              |  5 ++---
 hadoop-ozone/tools/pom.xml                  |  9 ++++-----
 hadoop-ozone/upgrade/pom.xml                |  5 ++---
 pom.ozone.xml                               | 29 ++++++++++++++---------------
 18 files changed, 57 insertions(+), 82 deletions(-)

commit 5f6db5d308d688c8605d6917d7dffad90004b900
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Sep 25 21:43:33 2019 +0200

    HDDS-2179. ConfigFileGenerator fails with Java 10 or newer
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../main/java/org/apache/hadoop/hdds/conf/ConfigFileGenerator.java   | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 4eafc11e7c7d9635a426b337613495826d7150cb
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Sep 26 15:22:32 2019 -0700

    HDD-2193. Adding container related metrics in SCM.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../hdds/scm/container/SCMContainerManager.java    |  31 +++++-
 .../metrics/SCMContainerManagerMetrics.java        |  90 +++++++++++++++++
 .../hdds/scm/container/metrics/package-info.java   |  22 ++++
 .../metrics/TestSCMContainerManagerMetrics.java    | 112 +++++++++++++++++++++
 4 files changed, 252 insertions(+), 3 deletions(-)

commit 861fae28b067fc8a901e27b6e00a5742a5e626fc
Author: dchitlangia <dineshchitlangia@gmail.com>
Date:   Tue Sep 24 23:39:34 2019 -0400

    HDDS-2174. Delete GDPR Encryption Key from metadata when a Key is deleted
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../main/java/org/apache/hadoop/ozone/OmUtils.java | 40 ++++++++++--
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 76 +++++++++++++++++++++-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 49 ++++++--------
 .../ozone/om/response/key/OMKeyDeleteResponse.java |  8 +--
 .../multipart/S3MultipartUploadAbortResponse.java  |  9 ++-
 .../S3MultipartUploadCommitPartResponse.java       | 34 +++++-----
 .../ozone/om/request/TestOMRequestUtils.java       | 11 ++--
 7 files changed, 158 insertions(+), 69 deletions(-)

commit f7d9fbd8a288d687e65bd198e96f64b5dcff2214
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Sep 26 09:41:03 2019 -0700

    HDDS-2180. Add Object ID and update ID on VolumeList Object. (#1526)

 .../common/src/main/proto/OzoneManagerProtocol.proto   |  2 ++
 .../om/request/s3/bucket/S3BucketCreateRequest.java    |  3 ++-
 .../ozone/om/request/volume/OMVolumeCreateRequest.java |  2 +-
 .../ozone/om/request/volume/OMVolumeDeleteRequest.java |  3 ++-
 .../ozone/om/request/volume/OMVolumeRequest.java       | 18 ++++++++++++++----
 .../om/request/volume/OMVolumeSetOwnerRequest.java     |  6 ++++--
 .../hadoop/ozone/om/request/TestOMRequestUtils.java    |  8 ++++++--
 .../hadoop/ozone/om/response/TestOMResponseUtils.java  |  2 ++
 .../om/response/volume/TestOMVolumeCreateResponse.java |  1 +
 .../om/response/volume/TestOMVolumeDeleteResponse.java |  5 ++++-
 .../response/volume/TestOMVolumeSetOwnerResponse.java  |  9 ++++++++-
 11 files changed, 46 insertions(+), 13 deletions(-)

commit adec66f6e221219e007922a1c6469ff67be891d3
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Thu Sep 26 12:09:28 2019 +0200

    HDDS-2182. Fix checkstyle violations introduced by HDDS-1738
    
    Closes #1529

 .../ozone/om/response/bucket/OMBucketDeleteResponse.java       |  1 -
 .../hadoop/ozone/om/response/key/OMKeyCommitResponse.java      |  3 ++-
 .../hadoop/ozone/om/response/key/OMKeyDeleteResponse.java      | 10 +++++++---
 .../hadoop/ozone/om/response/key/OMKeyPurgeResponse.java       |  3 ++-
 .../hadoop/ozone/om/response/key/OMKeyRenameResponse.java      |  4 ++--
 .../response/s3/multipart/S3MultipartUploadAbortResponse.java  |  3 ++-
 6 files changed, 15 insertions(+), 9 deletions(-)

commit 84c03a774d7affd3c2df7f5562e2441170ec7544
Author: Márton Elek <elek@apache.org>
Date:   Mon Sep 23 13:08:04 2019 +0200

    HDDS-2067. Create generic service facade with tracing/metrics/logging support
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>
    Co-Authored-By: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>

 .../function/FunctionWithServiceException.java     | 36 ++++++++
 .../apache/hadoop/hdds/function/package-info.java  | 22 +++++
 .../server/OzoneProtocolMessageDispatcher.java     | 88 ++++++++++++++++++++
 ...lockLocationProtocolServerSideTranslatorPB.java | 56 ++++---------
 ...inerLocationProtocolServerSideTranslatorPB.java | 96 ++++++++--------------
 .../hadoop/hdds/scm/protocol/package-info.java     | 21 +++++
 .../hdds/scm/server/SCMBlockProtocolServer.java    |  2 +-
 .../hdds/scm/server/SCMClientProtocolServer.java   |  3 +-
 .../scm/server/TestSCMBlockProtocolServer.java     |  3 +-
 .../scm/ScmProtocolBlockLocationInsight.java       |  2 +-
 ...OzoneManagerProtocolServerSideTranslatorPB.java | 41 ++-------
 11 files changed, 231 insertions(+), 139 deletions(-)

commit 191d4f22358a507865709d7f7c4bfce269986bf0
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Sep 25 12:19:10 2019 +0200

    HDDS-2165. Freon fails if bucket does not exists
    
    Closes #1503

 .../main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java    | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 17cbae1c604823b20d5fb4b06833cf19c69d48d6
Author: Yi Sheng <lianp964@gmail.com>
Date:   Wed Sep 25 12:14:07 2019 +0200

    HDDS-1738. Add nullable annotation for OMResponse classes
    
    Closes #1499

 .../ozone/om/response/bucket/OMBucketCreateResponse.java      |  8 ++++++--
 .../ozone/om/response/bucket/OMBucketDeleteResponse.java      |  5 ++++-
 .../ozone/om/response/bucket/OMBucketSetPropertyResponse.java |  7 +++++--
 .../ozone/om/response/file/OMDirectoryCreateResponse.java     |  3 ++-
 .../hadoop/ozone/om/response/file/OMFileCreateResponse.java   |  3 ++-
 .../hadoop/ozone/om/response/key/OMAllocateBlockResponse.java |  6 ++++--
 .../hadoop/ozone/om/response/key/OMKeyCommitResponse.java     |  6 ++++--
 .../hadoop/ozone/om/response/key/OMKeyCreateResponse.java     |  3 ++-
 .../hadoop/ozone/om/response/key/OMKeyDeleteResponse.java     |  7 +++++--
 .../hadoop/ozone/om/response/key/OMKeyPurgeResponse.java      |  3 ++-
 .../hadoop/ozone/om/response/key/OMKeyRenameResponse.java     |  6 ++++--
 .../response/s3/multipart/S3MultipartUploadAbortResponse.java |  4 +++-
 .../s3/multipart/S3MultipartUploadCommitPartResponse.java     | 11 +++++++----
 .../s3/multipart/S3MultipartUploadCompleteResponse.java       |  3 ++-
 .../ozone/om/response/volume/OMVolumeAclOpResponse.java       |  3 ++-
 .../ozone/om/response/volume/OMVolumeCreateResponse.java      |  4 +++-
 .../ozone/om/response/volume/OMVolumeDeleteResponse.java      |  4 +++-
 .../ozone/om/response/volume/OMVolumeSetOwnerResponse.java    |  4 +++-
 .../ozone/om/response/volume/OMVolumeSetQuotaResponse.java    |  4 +++-
 19 files changed, 66 insertions(+), 28 deletions(-)

commit ea36385f0959b4ba63b7b5e4021d7002e15d4797
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Sep 25 12:02:42 2019 +0200

    HDDS-2171. Dangling links in test report due to incompatible realpath
    
    Closes #1515

 hadoop-ozone/dev-support/checks/_mvn_unit_report.sh | 16 +++++++++++++---
 1 file changed, 13 insertions(+), 3 deletions(-)

commit 8bfbc71d8ecbefdf7e1fe86b9c65f28bb045bd06
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Tue Sep 24 16:28:25 2019 -0700

    HDDS-2168. TestOzoneManagerDoubleBufferWithOMResponse sometimes fails with out of memory error (#1509)

 .../TestOzoneManagerDoubleBufferWithOMResponse.java | 21 +++++++--------------
 1 file changed, 7 insertions(+), 14 deletions(-)

commit 06661b893289f23d459d2271330b54fc417d8ec5
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Sep 24 16:06:10 2019 -0700

    HDDS-2172.Ozone shell should remove description about REST protocol support. Contributed by Siddharth Wagle.

 .../src/main/java/org/apache/hadoop/ozone/web/ozShell/Shell.java       | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit bd1b9e569143d574ce98b7d5886a1bdf1a4b3920
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Sep 24 11:01:05 2019 -0700

    HDDS-2170. Add Object IDs and Update ID to Volume Object (#1510)

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   2 +
 .../hadoop/ozone/om/helpers/OmVolumeArgs.java      | 100 ++++++++++++++++++---
 .../src/main/proto/OzoneManagerProtocol.proto      |  10 +--
 .../om/request/volume/OMVolumeCreateRequest.java   |   5 ++
 .../request/volume/TestOMVolumeCreateRequest.java  |  10 ++-
 5 files changed, 105 insertions(+), 22 deletions(-)

commit 1da6dd0925acb57fb4c8368757b0a44e6b894aeb
Author: Márton Elek <elek@apache.org>
Date:   Tue Sep 24 17:52:36 2019 +0200

    HDDS-2167. Hadoop31-mr acceptance test is failing due to the shading
    
    Closes #1507

 hadoop-ozone/ozonefs/pom.xml | 4 ++++
 1 file changed, 4 insertions(+)

commit f07b13339b158fd16d1c2e503cae852bc57f509d
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Tue Sep 24 00:29:51 2019 -0700

    HDDS-2081. Fix TestRatisPipelineProvider#testCreatePipelinesDnExclude. Contributed by Aravindan Vijayan. (#1506)

 .../scm/pipeline/TestRatisPipelineProvider.java    | 26 +++++++++++++---------
 1 file changed, 16 insertions(+), 10 deletions(-)

commit 98fc3f1b3041645f2e62fe57fd92d41adb8a1ea9
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Sep 20 13:06:29 2019 -0700

    HDDS-2159. Fix Race condition in ProfileServlet#pid.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../java/org/apache/hadoop/hdds/server/ProfileServlet.java     | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 207844043961193c8b2991d64b1341281bd377ab
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Sep 23 13:28:38 2019 -0700

    HDDS-2160. Add acceptance test for ozonesecure-mr compose. Contributed by Xiaoyu Yao. (#1490)

 .../dist/src/main/compose/ozonesecure-mr/test.sh   | 44 ++++++++++++++++++++++
 .../dist/src/main/smoketest/kinit-hadoop.robot     | 25 ++++++++++++
 hadoop-ozone/dist/src/main/smoketest/kinit.robot   |  5 ++-
 .../dist/src/main/smoketest/mapreduce.robot        |  2 +-
 4 files changed, 74 insertions(+), 2 deletions(-)

commit 085af1a28de177cf64fbf52a498ae46b4e05b25e
Author: dchitlangia <dineshchitlangia@gmail.com>
Date:   Fri Sep 20 18:06:30 2019 -0400

    HDDS-2161. Create RepeatedKeyInfo structure to be saved in deletedTable
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../apache/hadoop/ozone/om/OMMetadataManager.java  |  6 +-
 .../ozone/om/codec/RepeatedOmKeyInfoCodec.java     | 52 +++++++++++++
 .../hadoop/ozone/om/helpers/RepeatedOmKeyInfo.java | 91 ++++++++++++++++++++++
 .../src/main/proto/OzoneManagerProtocol.proto      |  4 +
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 47 +++++++++--
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     | 90 +++++++++++----------
 .../ozone/om/request/key/OMKeyDeleteRequest.java   |  3 +-
 .../multipart/S3MultipartUploadAbortRequest.java   |  5 +-
 .../S3MultipartUploadCommitPartRequest.java        |  4 +-
 .../ozone/om/response/key/OMKeyDeleteResponse.java | 27 ++++---
 .../multipart/S3MultipartUploadAbortResponse.java  | 21 +++--
 .../S3MultipartUploadCommitPartResponse.java       | 34 +++++---
 .../ozone/om/request/TestOMRequestUtils.java       | 14 +++-
 .../om/response/key/TestOMKeyDeleteResponse.java   | 20 ++---
 .../s3/multipart/TestS3MultipartResponse.java      |  3 +-
 .../TestS3MultipartUploadAbortResponse.java        | 19 ++---
 16 files changed, 324 insertions(+), 116 deletions(-)

commit edd6daad5c0d47b1afcf23fa939bc3e3d64ef582
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Sep 20 23:21:53 2019 -0700

    HDDS-2150. Update dependency versions to avoid security vulnerabilities. (#1472)

 hadoop-hdds/common/pom.xml |  2 +-
 pom.ozone.xml              | 50 ++++------------------------------------------
 2 files changed, 5 insertions(+), 47 deletions(-)

commit c4765a2e67e62f7ee97ddc639802bdc1f3e221ca
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Fri Sep 20 22:59:45 2019 -0700

    HDDS-2163. Add 'Replication factor' to the output of list keys (#1493)

 .../java/org/apache/hadoop/ozone/client/OzoneKey.java   | 17 ++++++++++++++++-
 .../org/apache/hadoop/ozone/client/OzoneKeyDetails.java |  4 ++--
 .../org/apache/hadoop/ozone/client/rpc/RpcClient.java   |  5 +++--
 .../org/apache/hadoop/ozone/client/OzoneBucketStub.java |  3 ++-
 4 files changed, 23 insertions(+), 6 deletions(-)

commit 24a25dd5b358fe9218386bd7ba955f9bfb3a00f9
Author: Siyao Meng <50227127+smengcl@users.noreply.github.com>
Date:   Fri Sep 20 14:22:55 2019 -0700

    HDDS-2128. Make ozone sh command work with OM HA service ids (#1445)

 .../hadoop/ozone/ozShell/TestOzoneShellHA.java     | 343 +++++++++++++++++++++
 .../hadoop/ozone/web/ozShell/OzoneAddress.java     |  17 +-
 2 files changed, 359 insertions(+), 1 deletion(-)

commit b15c847e5204c0e5023b141663636d6a05a68d07
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Fri Sep 20 23:05:35 2019 +0200

    HDDS-2157. checkstyle: print filenames relative to project root (#1485)

 hadoop-ozone/dev-support/checks/checkstyle.sh | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 70938b9da9107084ff65b859df1ccc9f1701a97e
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Sep 20 16:30:06 2019 +0530

    HDDS-2001. Update Ratis version to 0.4.0.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-hdds/pom.xml  | 2 +-
 hadoop-ozone/pom.xml | 2 +-
 pom.ozone.xml        | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit a089694a1b057e50d55806e837c68246e51a7b96
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Sep 20 09:55:57 2019 -0700

    HDDS-1949. Missing or error-prone test cleanup.
    Contributed by Doroszlai, Attila.

 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   8 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  | 101 ++++++---
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |  16 +-
 .../hadoop/ozone/TestStorageContainerManager.java  | 240 +++++++++++----------
 .../ozone/container/TestContainerReplication.java  |  25 ++-
 .../commandhandler/TestBlockDeletion.java          |   8 +
 .../commandhandler/TestCloseContainerHandler.java  |  33 ++-
 .../apache/hadoop/ozone/om/TestScmSafeMode.java    |   2 +-
 .../hadoop/ozone/scm/TestSCMNodeManagerMXBean.java |   8 +
 9 files changed, 273 insertions(+), 168 deletions(-)

commit e52922f2567008fdefb074ca437032cca350d161
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Aug 28 08:56:33 2019 -0700

    HDDS-2020. Remove mTLS from Ozone GRPC. Contributed by Xiaoyu Yao.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  32 +++--
 .../hadoop/hdds/scm/XceiverClientManager.java      |  28 ++++-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |   9 +-
 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  26 +---
 .../org/apache/hadoop/hdds/ratis/RatisHelper.java  |  60 ++++++---
 .../hadoop/hdds/security/x509/SecurityConfig.java  | 137 ---------------------
 .../x509/certificate/client/CertificateClient.java |   6 +
 .../client/DefaultCertificateClient.java           |  31 ++++-
 .../common/src/main/resources/ozone-default.xml    |  27 ----
 .../container/common/helpers/ContainerMetrics.java |   9 +-
 .../common/transport/server/XceiverServerGrpc.java |  16 +--
 .../transport/server/ratis/XceiverServerRatis.java |   4 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |   1 +
 .../apache/hadoop/hdds/server/ProfileServlet.java  |   1 -
 .../hadoop/hdds/server/TestProfileServlet.java     |  11 +-
 .../hadoop/hdds/scm/pipeline/PipelineFactory.java  |   5 +-
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  |   2 +
 .../hdds/scm/pipeline/PipelineReportHandler.java   |   3 +-
 .../hdds/scm/pipeline/RatisPipelineProvider.java   |   9 +-
 .../hdds/scm/pipeline/RatisPipelineUtils.java      |  15 +--
 .../hdds/scm/pipeline/SCMPipelineManager.java      |  15 ++-
 .../hdds/scm/server/StorageContainerManager.java   |  13 +-
 .../container/TestCloseContainerEventHandler.java  |   2 +-
 .../scm/container/TestSCMContainerManager.java     |   2 +-
 .../hdds/scm/node/TestContainerPlacement.java      |  10 +-
 .../scm/pipeline/MockRatisPipelineProvider.java    |   2 +-
 .../safemode/TestHealthyPipelineSafeModeRule.java  |   6 +-
 .../TestOneReplicaPipelineSafeModeRule.java        |   2 +-
 .../hdds/scm/safemode/TestSCMSafeModeManager.java  |  10 +-
 .../ozone/client/OzoneMultipartUploadList.java     |   1 -
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  54 ++------
 .../apache/hadoop/ozone/om/OMMetadataManager.java  |   1 -
 .../ozone/om/helpers/OmMultipartKeyInfo.java       |   3 -
 .../ozone/om/helpers/OmMultipartUploadList.java    |   3 -
 .../om/helpers/OmMultipartUploadListParts.java     |   1 -
 .../hadoop/ozone/om/helpers/ServiceInfoEx.java     |  47 +++++++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |   9 +-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  21 +++-
 .../src/main/proto/OzoneManagerProtocol.proto      |   3 +
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  |  15 ++-
 .../hadoop/ozone/TestStorageContainerManager.java  |  23 ++--
 .../ozone/client/CertificateClientTestImpl.java    |   7 +-
 .../rpc/TestContainerReplicationEndToEnd.java      |  10 +-
 .../ozoneimpl/TestOzoneContainerWithTLS.java       | 104 +++++++++-------
 .../hadoop/ozone/scm/TestXceiverClientManager.java |   6 +-
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |   1 -
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  11 ++
 .../protocolPB/OzoneManagerRequestHandler.java     |   6 +-
 48 files changed, 407 insertions(+), 413 deletions(-)

commit 88fabf9b4e4f10383dcffd9a8821ca05f373cbd4
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Thu Sep 19 16:41:00 2019 -0700

    HDDS-2156. Fix alignment issues in HDDS doc pages
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-hdds/docs/content/security/SecurityAcls.md  |  3 +-
 hadoop-hdds/docs/content/security/_index.md        |  2 +-
 .../themes/ozonedoc/layouts/_default/section.html  | 69 +++++++++++++---------
 .../themes/ozonedoc/layouts/_default/single.html   |  2 +
 .../docs/themes/ozonedoc/static/css/ozonedoc.css   |  3 +
 5 files changed, 48 insertions(+), 31 deletions(-)

commit 882f7a65b5abcdef02ffdb1d7813a7fb4a8e5ad4
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Thu Sep 19 16:28:29 2019 -0700

    HDDS-2101. Ozone filesystem provider doesn't exist (#1473)

 .../src/main/compose/ozone-mr/hadoop27/docker-config     |  1 -
 .../src/main/compose/ozone-mr/hadoop31/docker-config     |  1 -
 .../src/main/compose/ozone-mr/hadoop32/docker-config     |  1 -
 .../META-INF/services/org.apache.hadoop.fs.FileSystem    | 16 ++++++++++++++++
 .../META-INF/services/org.apache.hadoop.fs.FileSystem    | 16 ++++++++++++++++
 5 files changed, 32 insertions(+), 3 deletions(-)

commit d37a855106e183d31701a8001280517c03755272
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Thu Sep 19 20:30:33 2019 +0200

    HDDS-2154. Fix Checkstyle issues (#1475)

 .../hadoop/hdds/scm/client/HddsClientUtils.java    |  9 ++++--
 .../hadoop/hdds/utils/LevelDBStoreIterator.java    |  3 +-
 .../hadoop/hdds/utils/RocksDBStoreIterator.java    |  8 +++--
 .../hadoop/hdds/utils/db/cache/TableCache.java     |  3 +-
 .../hadoop/hdds/utils/TestMetadataStore.java       | 10 ++++---
 .../server/ratis/ContainerStateMachine.java        |  3 +-
 .../apache/hadoop/ozone/web/utils/OzoneUtils.java  |  3 +-
 .../org/apache/hadoop/fs/ozone/OzoneFsShell.java   | 34 ++++++++--------------
 .../ozone/freon/OzoneClientKeyValidator.java       |  1 -
 .../apache/hadoop/ozone/freon/S3KeyGenerator.java  |  1 -
 .../apache/hadoop/ozone/freon/SameKeyReader.java   |  1 -
 11 files changed, 37 insertions(+), 39 deletions(-)

commit 12a6b3b45d963337930ae1261137ca2729a1b821
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Thu Sep 19 20:06:02 2019 +0200

    HDDS-1054. List Multipart uploads in a bucket (#1277)

 .../hadoop/hdds/client/ReplicationFactor.java      |  18 ++
 .../apache/hadoop/hdds/client/ReplicationType.java |  22 +-
 .../apache/hadoop/ozone/client/OzoneBucket.java    |  10 +
 .../hadoop/ozone/client/OzoneMultipartUpload.java  |  89 +++++++
 .../ozone/client/OzoneMultipartUploadList.java     |  47 ++++
 .../client/OzoneMultipartUploadPartListParts.java  |  10 +
 .../ozone/client/protocol/ClientProtocol.java      |   5 +
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  32 ++-
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |   1 +
 .../org/apache/hadoop/ozone/audit/OMAction.java    |   1 +
 .../apache/hadoop/ozone/om/OMMetadataManager.java  |   8 +
 .../ozone/om/helpers/OmMultipartKeyInfo.java       |   5 +-
 .../hadoop/ozone/om/helpers/OmMultipartUpload.java | 149 ++++++++++++
 .../om/helpers/OmMultipartUploadCompleteList.java  |  63 +++++
 .../ozone/om/helpers/OmMultipartUploadList.java    |  44 ++--
 .../om/helpers/OmMultipartUploadListParts.java     |  14 ++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |   8 +-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  46 +++-
 .../src/main/proto/OzoneManagerProtocol.proto      |  38 ++-
 .../ozone/om/helpers/TestOmMultipartUpload.java    |  39 +++
 .../src/main/smoketest/s3/MultipartUpload.robot    |  20 ++
 .../org/apache/hadoop/ozone/om/KeyManager.java     |   6 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 114 ++++++---
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |  13 +-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  53 ++--
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  32 ++-
 .../S3MultipartUploadCompleteRequest.java          |  33 +--
 .../protocolPB/OzoneManagerRequestHandler.java     |  45 +++-
 .../apache/hadoop/ozone/om/TestKeyManagerUnit.java |  71 +++++-
 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java   |  30 ++-
 .../s3/endpoint/ListMultipartUploadsResult.java    | 268 +++++++++++++++++++++
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   |  10 +-
 .../apache/hadoop/ozone/s3/util/S3StorageType.java |  11 +-
 .../hadoop/ozone/client/OzoneBucketStub.java       |   7 +-
 .../hadoop/ozone/s3/endpoint/TestBucketGet.java    |  39 ++-
 35 files changed, 1253 insertions(+), 148 deletions(-)

commit bd1b605b1095bebede9eedf494909014be99730c
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Thu Sep 19 19:58:33 2019 +0200

    HDDS-2151. Ozone client logs the entire request payload at DEBUG level (#1477)

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 25 +++++++++++++++++++++-
 1 file changed, 24 insertions(+), 1 deletion(-)

commit f361a9be5cea972d0f2abab51a6bd5e976574ecc
Author: Márton Elek <elek@apache.org>
Date:   Thu Sep 19 14:42:33 2019 +0200

    HDDS-2127. Detailed Tools doc not reachable
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-hdds/docs/content/recipe/_index.md          |  2 +-
 hadoop-hdds/docs/content/tools/AuditParser.md      |  2 +-
 hadoop-hdds/docs/content/tools/Freon.md            | 62 ----------------------
 hadoop-hdds/docs/content/tools/Genconf.md          |  2 +-
 hadoop-hdds/docs/content/tools/SCMCLI.md           |  2 +-
 hadoop-hdds/docs/content/tools/TestTools.md        |  2 +-
 hadoop-hdds/docs/content/tools/Tools.md            | 19 -------
 .../content/{beyond/Tools.md => tools/_index.md}   | 40 +++++++++-----
 8 files changed, 33 insertions(+), 98 deletions(-)

commit 704303e4e5ec56a213195cdec7a65b7ef9c885ca
Author: Márton Elek <elek@apache.org>
Date:   Sat Sep 14 06:18:33 2019 +0200

    HDDS-2110. Arbitrary file can be downloaded with the help of ProfilerServlet
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../apache/hadoop/hdds/server/ProfileServlet.java  | 60 ++++++++++++++++-----
 .../hadoop/hdds/server/TestProfileServlet.java     | 63 ++++++++++++++++++++++
 2 files changed, 109 insertions(+), 14 deletions(-)

commit f9fc8e7d627e5551ed782be205f131b7693df0bb
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Thu Sep 19 14:11:44 2019 +0200

    HDDS-2141. Missing total number of operations
    
    Closes #1462

 .../src/main/resources/webapps/ozoneManager/om-metrics.html           | 2 +-
 .../src/main/resources/webapps/ozoneManager/ozoneManager.js           | 4 +++-
 2 files changed, 4 insertions(+), 2 deletions(-)

commit 39ec340aee52e308b91e6c3f952055b66dfae6cd
Author: dchitlangia <dineshchitlangia@gmail.com>
Date:   Thu Sep 19 12:26:53 2019 +0200

    HDDS-2148. Remove redundant code in CreateBucketHandler.java
    
    Closes #1471

 .../org/apache/hadoop/ozone/web/ozShell/bucket/CreateBucketHandler.java  | 1 -
 1 file changed, 1 deletion(-)

commit aa1e0a310e9cf22ab91d2d965b3c6aeb79d51ccc
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Sep 19 11:14:59 2019 +0200

    HDDS-2119. Use checkstyle.xml and suppressions.xml in hdds/ozone projects for checkstyle validation
    
    Closes #1435

 .../checkstyle/checkstyle-noframes-sorted.xsl      | 189 ++++++++++++++++++++
 hadoop-hdds/dev-support/checkstyle/checkstyle.xml  | 196 +++++++++++++++++++++
 .../dev-support/checkstyle/suppressions.xml        |  21 +++
 hadoop-hdds/pom.xml                                |   1 -
 pom.ozone.xml                                      |  26 ++-
 5 files changed, 429 insertions(+), 4 deletions(-)

commit 9badf1e117cdf4b1c0a9ab953bff8673d65c94a6
Author: dchitlangia <dineshchitlangia@gmail.com>
Date:   Thu Sep 19 10:58:01 2019 +0200

    HDDS-2016. Add option to enforce GDPR in Bucket Create command
    
    Closes #1458

 hadoop-hdds/docs/content/gdpr/GDPR in Ozone.md     | 42 ++++++++++++++++++++++
 hadoop-hdds/docs/content/gdpr/_index.md            | 38 ++++++++++++++++++++
 hadoop-hdds/docs/content/shell/BucketCommands.md   |  2 ++
 .../hadoop/ozone/om/helpers/OmBucketArgs.java      |  2 ++
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      |  2 ++
 .../web/ozShell/bucket/CreateBucketHandler.java    | 14 ++++++++
 .../ozone/web/ozShell/keys/InfoKeyHandler.java     |  6 ++++
 7 files changed, 106 insertions(+)

commit c6850484fd065768bb1f83ea928bdc7b8f78cc28
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Thu Sep 19 10:41:00 2019 +0200

    HDDS-2147. Include dumpstream in test report
    
    Closes #1470

 hadoop-ozone/dev-support/checks/_mvn_unit_report.sh | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit cc2f067d7da9da8e1dd23a097112c4ed54b34403
Author: cxorm <lianp964@gmail.com>
Date:   Thu Sep 19 09:16:12 2019 +0200

    HDDS-730. ozone fs cli prints hadoop fs in usage
    
    Closes #1464

 hadoop-ozone/common/src/main/bin/ozone             |   2 +-
 .../org/apache/hadoop/fs/ozone/OzoneFsShell.java   | 100 +++++++++++++++++++++
 2 files changed, 101 insertions(+), 1 deletion(-)

commit a1ebbf0d0d054e2ebe1ba083b63a0234e6b28ee0
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Sep 18 13:27:08 2019 -0700

    HDDS-2144. MR job failing on secure Ozone cluster. (#1466)

 .../java/org/apache/hadoop/ozone/om/ha/OMFailoverProxyProvider.java    | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 15a951e1af9f75e439e84d66644a24a96c3ead9e
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Wed Sep 18 22:25:15 2019 +0200

    HDDS-2121. Create a shaded ozone filesystem (client) jar (#1452)

 hadoop-ozone/ozonefs-lib-current/pom.xml | 145 ++++++++++++++++++++++++++-----
 1 file changed, 125 insertions(+), 20 deletions(-)

commit cd434f0288fe1835287e6daf2c508b96ff396bc2
Author: bshashikant <shashikant@apache.org>
Date:   Wed Sep 18 22:30:41 2019 +0530

    HDDS-2032. Ozone client should retry writes in case of any ratis/stateMachine exceptions. Contributed by Shashikant Banerjee (#1420).

 .../hadoop/hdds/scm/client/HddsClientUtils.java    |  9 +++----
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 29 +++++++++++-----------
 2 files changed, 19 insertions(+), 19 deletions(-)

commit c7b050a6ea4dcdbce259450d08eae5c4ebfd1d55
Author: Siyao Meng <smeng@cloudera.com>
Date:   Wed Sep 18 17:10:26 2019 +0200

    HDDS-2065. Implement OMNodeDetails#toString
    
    Closes #1387

 .../main/java/org/apache/hadoop/ozone/om/OMNodeDetails.java | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 1723f3619b57131fd35768dd38cd229bb4979109
Author: Márton Elek <elek@apache.org>
Date:   Wed Sep 18 17:09:27 2019 +0200

    Wrong commit message: Revert second "HDDS-2143. Rename classes under package org.apache.hadoop.utils"
    
    This reverts commit 111b08a330cd463f377375f12413cee3673d4d51.

 .../main/java/org/apache/hadoop/ozone/om/OMNodeDetails.java | 13 -------------
 1 file changed, 13 deletions(-)

commit 6d8de9c72dda2e7ceab3de4f995e1db48ccb2696
Author: Siyao Meng <smeng@cloudera.com>
Date:   Wed Sep 18 17:00:26 2019 +0200

    HDDS-2143. Rename classes under package org.apache.hadoop.utils
    
    Closes #1465

 .../main/java/org/apache/hadoop/ozone/om/OMNodeDetails.java | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 6f99a519d5901876ec7cbbe5ba1378675fcec9ab
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Sep 18 16:51:39 2019 +0200

    HDDS-2143. Rename classes under package org.apache.hadoop.utils
    
    Closes #1465

 .../java/org/apache/hadoop/hdds/HddsConfigKeys.java  |  2 +-
 .../apache/hadoop/hdds/cli/HddsVersionProvider.java  |  2 +-
 .../hadoop/{ => hdds}/utils/BackgroundService.java   |  2 +-
 .../hadoop/{ => hdds}/utils/BackgroundTask.java      |  2 +-
 .../hadoop/{ => hdds}/utils/BackgroundTaskQueue.java |  2 +-
 .../{ => hdds}/utils/BackgroundTaskResult.java       |  2 +-
 .../hadoop/{ => hdds}/utils/BatchOperation.java      |  2 +-
 .../hadoop/{ => hdds}/utils/EntryConsumer.java       |  2 +-
 .../hadoop/{ => hdds}/utils/HddsVersionInfo.java     |  2 +-
 .../apache/hadoop/{ => hdds}/utils/LevelDBStore.java |  4 ++--
 .../{ => hdds}/utils/LevelDBStoreIterator.java       | 11 ++++-------
 .../hadoop/{ => hdds}/utils/MetaStoreIterator.java   |  2 +-
 .../hadoop/{ => hdds}/utils/MetadataKeyFilters.java  |  2 +-
 .../hadoop/{ => hdds}/utils/MetadataStore.java       |  4 ++--
 .../{ => hdds}/utils/MetadataStoreBuilder.java       |  2 +-
 .../hadoop/{ => hdds}/utils/RetriableTask.java       |  2 +-
 .../apache/hadoop/{ => hdds}/utils/RocksDBStore.java |  2 +-
 .../{ => hdds}/utils/RocksDBStoreIterator.java       | 10 ++++------
 .../hadoop/{ => hdds}/utils/RocksDBStoreMBean.java   |  2 +-
 .../apache/hadoop/{ => hdds}/utils/Scheduler.java    |  2 +-
 .../org/apache/hadoop/{ => hdds}/utils/UniqueId.java |  2 +-
 .../apache/hadoop/{ => hdds}/utils/VersionInfo.java  |  2 +-
 .../hadoop/{ => hdds}/utils/db/BatchOperation.java   |  2 +-
 .../{ => hdds}/utils/db/ByteArrayKeyValue.java       |  4 ++--
 .../org/apache/hadoop/{ => hdds}/utils/db/Codec.java |  2 +-
 .../hadoop/{ => hdds}/utils/db/CodecRegistry.java    |  2 +-
 .../hadoop/{ => hdds}/utils/db/DBCheckpoint.java     |  2 +-
 .../hadoop/{ => hdds}/utils/db/DBConfigFromFile.java |  2 +-
 .../apache/hadoop/{ => hdds}/utils/db/DBProfile.java |  2 +-
 .../apache/hadoop/{ => hdds}/utils/db/DBStore.java   |  4 ++--
 .../hadoop/{ => hdds}/utils/db/DBStoreBuilder.java   |  2 +-
 .../hadoop/{ => hdds}/utils/db/DBUpdatesWrapper.java |  2 +-
 .../hadoop/{ => hdds}/utils/db/IntegerCodec.java     |  2 +-
 .../apache/hadoop/{ => hdds}/utils/db/LongCodec.java |  2 +-
 .../{ => hdds}/utils/db/RDBBatchOperation.java       |  2 +-
 .../{ => hdds}/utils/db/RDBCheckpointManager.java    |  2 +-
 .../apache/hadoop/{ => hdds}/utils/db/RDBStore.java  |  6 +++---
 .../hadoop/{ => hdds}/utils/db/RDBStoreIterator.java |  2 +-
 .../apache/hadoop/{ => hdds}/utils/db/RDBTable.java  |  2 +-
 .../{ => hdds}/utils/db/RocksDBCheckpoint.java       |  2 +-
 .../utils/db/SequenceNumberNotFoundException.java    |  2 +-
 .../hadoop/{ => hdds}/utils/db/StringCodec.java      |  2 +-
 .../org/apache/hadoop/{ => hdds}/utils/db/Table.java |  6 +++---
 .../hadoop/{ => hdds}/utils/db/TableConfig.java      |  2 +-
 .../hadoop/{ => hdds}/utils/db/TableIterator.java    |  2 +-
 .../hadoop/{ => hdds}/utils/db/TypedTable.java       | 20 ++++++++++----------
 .../hadoop/{ => hdds}/utils/db/cache/CacheKey.java   |  2 +-
 .../{ => hdds}/utils/db/cache/CacheResult.java       |  2 +-
 .../hadoop/{ => hdds}/utils/db/cache/CacheValue.java |  2 +-
 .../hadoop/{ => hdds}/utils/db/cache/EpochEntry.java |  2 +-
 .../hadoop/{ => hdds}/utils/db/cache/TableCache.java | 11 +++++------
 .../{ => hdds}/utils/db/cache/TableCacheImpl.java    |  2 +-
 .../{ => hdds}/utils/db/cache/package-info.java      |  2 +-
 .../hadoop/{ => hdds}/utils/db/package-info.java     |  2 +-
 .../apache/hadoop/{ => hdds}/utils/package-info.java |  2 +-
 .../hadoop/{ => hdds}/utils/TestHddsIdFactory.java   |  2 +-
 .../hadoop/{ => hdds}/utils/TestMetadataStore.java   | 11 +++++------
 .../hadoop/{ => hdds}/utils/TestRetriableTask.java   |  2 +-
 .../{ => hdds}/utils/TestRocksDBStoreMBean.java      |  2 +-
 .../{ => hdds}/utils/db/TestDBConfigFromFile.java    |  4 ++--
 .../{ => hdds}/utils/db/TestDBStoreBuilder.java      |  2 +-
 .../hadoop/{ => hdds}/utils/db/TestRDBStore.java     |  2 +-
 .../{ => hdds}/utils/db/TestRDBTableStore.java       |  2 +-
 .../{ => hdds}/utils/db/TestTypedRDBTableStore.java  |  8 ++++----
 .../utils/db/cache/TestTableCacheImpl.java           |  2 +-
 .../{ => hdds}/utils/db/cache/package-info.java      |  2 +-
 .../hadoop/{ => hdds}/utils/db/package-info.java     |  2 +-
 .../apache/hadoop/{ => hdds}/utils/package-info.java |  2 +-
 .../commandhandler/DeleteBlocksCommandHandler.java   |  2 +-
 .../ozone/container/common/utils/ContainerCache.java |  4 ++--
 .../container/common/utils/ReferenceCountedDB.java   |  2 +-
 .../container/keyvalue/KeyValueBlockIterator.java    |  8 ++++----
 .../keyvalue/helpers/KeyValueContainerUtil.java      |  6 +++---
 .../container/keyvalue/impl/BlockManagerImpl.java    |  4 ++--
 .../background/BlockDeletingService.java             | 12 ++++++------
 .../ozone/container/ozoneimpl/ContainerReader.java   |  2 +-
 .../ozone/container/common/TestContainerCache.java   |  4 ++--
 .../keyvalue/TestKeyValueBlockIterator.java          |  2 +-
 .../hadoop/hdds/server/PrometheusMetricsSink.java    |  2 +-
 .../hadoop/hdds/server/ServiceRuntimeInfoImpl.java   |  2 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java      |  2 +-
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java   |  6 +++---
 .../hdds/scm/block/SCMBlockDeletingService.java      |  8 ++++----
 .../hdds/scm/container/SCMContainerManager.java      |  6 +++---
 .../replication/ReplicationActivityStatus.java       |  2 +-
 .../hadoop/hdds/scm/metadata/BigIntegerCodec.java    |  2 +-
 .../scm/metadata/DeletedBlocksTransactionCodec.java  |  2 +-
 .../apache/hadoop/hdds/scm/metadata/LongCodec.java   |  2 +-
 .../hadoop/hdds/scm/metadata/SCMMetadataStore.java   |  6 +++---
 .../hdds/scm/metadata/SCMMetadataStoreRDBImpl.java   | 10 +++++-----
 .../hdds/scm/metadata/X509CertificateCodec.java      |  2 +-
 .../hdds/scm/pipeline/BackgroundPipelineCreator.java |  2 +-
 .../hadoop/hdds/scm/pipeline/SCMPipelineManager.java |  8 ++++----
 .../apache/hadoop/hdds/scm/server/SCMCertStore.java  |  2 +-
 .../hdds/scm/server/StorageContainerManager.java     |  2 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java   |  6 +++---
 .../apache/hadoop/ozone/om/OMMetadataManager.java    |  4 ++--
 .../hadoop/ozone/om/codec/OmBucketInfoCodec.java     |  2 +-
 .../apache/hadoop/ozone/om/codec/OmKeyInfoCodec.java |  2 +-
 .../ozone/om/codec/OmMultipartKeyInfoCodec.java      |  2 +-
 .../hadoop/ozone/om/codec/OmPrefixInfoCodec.java     |  2 +-
 .../hadoop/ozone/om/codec/OmVolumeArgsCodec.java     |  2 +-
 .../hadoop/ozone/om/codec/S3SecretValueCodec.java    |  2 +-
 .../hadoop/ozone/om/codec/TokenIdentifierCodec.java  |  2 +-
 .../hadoop/ozone/om/codec/VolumeListCodec.java       |  2 +-
 .../ozone/om/protocol/OzoneManagerProtocol.java      |  4 ++--
 .../OzoneManagerProtocolClientSideTranslatorPB.java  |  2 +-
 .../hadoop/ozone/security/OzoneSecretStore.java      |  4 ++--
 .../apache/hadoop/ozone/util/OzoneVersionInfo.java   |  4 ++--
 .../hadoop/ozone/TestStorageContainerManager.java    |  2 +-
 .../ozone/TestStorageContainerManagerHelper.java     |  4 ++--
 .../container/common/TestBlockDeletingService.java   |  4 ++--
 .../apache/hadoop/ozone/om/TestOMRatisSnapshots.java |  2 +-
 .../snapshot/TestOzoneManagerSnapshotProvider.java   |  2 +-
 .../apache/hadoop/ozone/om/KeyDeletingService.java   | 16 ++++++++--------
 .../java/org/apache/hadoop/ozone/om/KeyManager.java  |  2 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java   | 16 ++++++++--------
 .../hadoop/ozone/om/OMDBCheckpointServlet.java       |  4 ++--
 .../hadoop/ozone/om/OmMetadataManagerImpl.java       | 18 +++++++++---------
 .../hadoop/ozone/om/OpenKeyCleanupService.java       |  8 ++++----
 .../org/apache/hadoop/ozone/om/OzoneManager.java     | 10 +++++-----
 .../apache/hadoop/ozone/om/PrefixManagerImpl.java    |  4 ++--
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java    |  2 +-
 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java     |  2 +-
 .../om/request/bucket/OMBucketCreateRequest.java     |  4 ++--
 .../om/request/bucket/OMBucketDeleteRequest.java     |  4 ++--
 .../request/bucket/OMBucketSetPropertyRequest.java   |  4 ++--
 .../om/request/bucket/acl/OMBucketAclRequest.java    |  4 ++--
 .../om/request/file/OMDirectoryCreateRequest.java    |  4 ++--
 .../ozone/om/request/file/OMFileCreateRequest.java   | 10 +++++-----
 .../ozone/om/request/key/OMAllocateBlockRequest.java |  4 ++--
 .../ozone/om/request/key/OMKeyCommitRequest.java     |  4 ++--
 .../ozone/om/request/key/OMKeyCreateRequest.java     |  2 +-
 .../ozone/om/request/key/OMKeyDeleteRequest.java     |  4 ++--
 .../ozone/om/request/key/OMKeyRenameRequest.java     |  6 +++---
 .../hadoop/ozone/om/request/key/OMKeyRequest.java    |  4 ++--
 .../ozone/om/request/key/acl/OMKeyAclRequest.java    |  4 ++--
 .../request/key/acl/prefix/OMPrefixAclRequest.java   |  4 ++--
 .../om/request/s3/bucket/S3BucketCreateRequest.java  |  4 ++--
 .../om/request/s3/bucket/S3BucketDeleteRequest.java  |  4 ++--
 .../multipart/S3InitiateMultipartUploadRequest.java  |  6 +++---
 .../s3/multipart/S3MultipartUploadAbortRequest.java  |  4 ++--
 .../S3MultipartUploadCommitPartRequest.java          |  4 ++--
 .../multipart/S3MultipartUploadCompleteRequest.java  |  4 ++--
 .../om/request/s3/security/S3GetSecretRequest.java   |  4 ++--
 .../security/OMCancelDelegationTokenRequest.java     |  4 ++--
 .../security/OMGetDelegationTokenRequest.java        |  4 ++--
 .../security/OMRenewDelegationTokenRequest.java      |  4 ++--
 .../om/request/volume/OMVolumeDeleteRequest.java     |  4 ++--
 .../ozone/om/request/volume/OMVolumeRequest.java     |  4 ++--
 .../om/request/volume/OMVolumeSetOwnerRequest.java   |  4 ++--
 .../om/request/volume/OMVolumeSetQuotaRequest.java   |  4 ++--
 .../om/request/volume/acl/OMVolumeAclRequest.java    |  4 ++--
 .../hadoop/ozone/om/response/OMClientResponse.java   |  2 +-
 .../om/response/bucket/OMBucketCreateResponse.java   |  2 +-
 .../om/response/bucket/OMBucketDeleteResponse.java   |  2 +-
 .../response/bucket/OMBucketSetPropertyResponse.java |  2 +-
 .../om/response/bucket/acl/OMBucketAclResponse.java  |  2 +-
 .../om/response/file/OMDirectoryCreateResponse.java  |  2 +-
 .../om/response/key/OMAllocateBlockResponse.java     |  2 +-
 .../ozone/om/response/key/OMKeyCommitResponse.java   |  2 +-
 .../ozone/om/response/key/OMKeyCreateResponse.java   |  2 +-
 .../ozone/om/response/key/OMKeyDeleteResponse.java   |  2 +-
 .../ozone/om/response/key/OMKeyPurgeResponse.java    |  2 +-
 .../ozone/om/response/key/OMKeyRenameResponse.java   |  2 +-
 .../ozone/om/response/key/acl/OMKeyAclResponse.java  |  2 +-
 .../response/key/acl/prefix/OMPrefixAclResponse.java |  2 +-
 .../response/s3/bucket/S3BucketCreateResponse.java   |  2 +-
 .../response/s3/bucket/S3BucketDeleteResponse.java   |  2 +-
 .../multipart/S3InitiateMultipartUploadResponse.java |  2 +-
 .../s3/multipart/S3MultipartUploadAbortResponse.java |  2 +-
 .../S3MultipartUploadCommitPartResponse.java         |  2 +-
 .../multipart/S3MultipartUploadCompleteResponse.java |  2 +-
 .../om/response/s3/security/S3GetSecretResponse.java |  2 +-
 .../security/OMCancelDelegationTokenResponse.java    |  4 ++--
 .../security/OMGetDelegationTokenResponse.java       |  4 ++--
 .../security/OMRenewDelegationTokenResponse.java     |  4 ++--
 .../om/response/volume/OMVolumeAclOpResponse.java    |  2 +-
 .../om/response/volume/OMVolumeCreateResponse.java   |  2 +-
 .../om/response/volume/OMVolumeDeleteResponse.java   |  2 +-
 .../om/response/volume/OMVolumeSetOwnerResponse.java |  2 +-
 .../om/response/volume/OMVolumeSetQuotaResponse.java |  2 +-
 .../om/snapshot/OzoneManagerSnapshotProvider.java    |  4 ++--
 .../ozone/protocolPB/OzoneManagerRequestHandler.java |  4 ++--
 .../hadoop/ozone/om/TestKeyDeletingService.java      |  2 +-
 ...estOzoneManagerDoubleBufferWithDummyResponse.java |  2 +-
 .../hadoop/ozone/om/request/TestOMRequestUtils.java  |  4 ++--
 .../request/file/TestOMDirectoryCreateRequest.java   |  2 +-
 .../key/TestOMKeyPurgeRequestAndResponse.java        |  2 +-
 .../response/bucket/TestOMBucketCreateResponse.java  |  4 ++--
 .../response/bucket/TestOMBucketDeleteResponse.java  |  2 +-
 .../bucket/TestOMBucketSetPropertyResponse.java      |  4 ++--
 .../response/file/TestOMDirectoryCreateResponse.java |  2 +-
 .../ozone/om/response/key/TestOMKeyResponse.java     |  2 +-
 .../s3/bucket/TestS3BucketCreateResponse.java        |  2 +-
 .../s3/bucket/TestS3BucketDeleteResponse.java        |  2 +-
 .../s3/multipart/TestS3MultipartResponse.java        |  2 +-
 .../response/volume/TestOMVolumeCreateResponse.java  |  2 +-
 .../response/volume/TestOMVolumeDeleteResponse.java  |  2 +-
 .../volume/TestOMVolumeSetOwnerResponse.java         |  4 ++--
 .../volume/TestOMVolumeSetQuotaResponse.java         |  4 ++--
 .../hadoop/ozone/recon/ReconControllerModule.java    |  2 +-
 .../recon/recovery/ReconOmMetadataManagerImpl.java   |  4 ++--
 .../ozone/recon/spi/ContainerDBServiceProvider.java  |  2 +-
 .../spi/impl/ContainerDBServiceProviderImpl.java     |  8 ++++----
 .../recon/spi/impl/ContainerKeyPrefixCodec.java      |  2 +-
 .../spi/impl/OzoneManagerServiceProviderImpl.java    | 10 +++++-----
 .../recon/spi/impl/ReconContainerDBProvider.java     |  8 ++++----
 .../ozone/recon/tasks/ContainerKeyMapperTask.java    |  4 ++--
 .../hadoop/ozone/recon/tasks/FileSizeCountTask.java  |  4 ++--
 .../hadoop/ozone/recon/tasks/OMDBUpdatesHandler.java |  2 +-
 .../ozone/recon/AbstractOMMetadataManagerTest.java   |  2 +-
 .../apache/hadoop/ozone/recon/TestReconCodecs.java   |  4 ++--
 .../ozone/recon/api/TestContainerKeyService.java     |  2 +-
 .../recovery/TestReconOmMetadataManagerImpl.java     |  2 +-
 .../impl/TestOzoneManagerServiceProviderImpl.java    |  6 +++---
 .../recon/spi/impl/TestReconContainerDBProvider.java |  2 +-
 .../recon/tasks/TestContainerKeyMapperTask.java      |  2 +-
 .../ozone/recon/tasks/TestFileSizeCountTask.java     |  2 +-
 .../ozone/recon/tasks/TestOMDBUpdatesHandler.java    |  2 +-
 .../recon/types/GuiceInjectorUtilsForTests.java      |  2 +-
 .../apache/hadoop/ozone/fsck/ContainerMapper.java    |  4 ++--
 .../ozone/genesis/BenchMarkMetadataStoreReads.java   |  2 +-
 .../ozone/genesis/BenchMarkMetadataStoreWrites.java  |  2 +-
 .../hadoop/ozone/genesis/BenchMarkRocksDbStore.java  |  4 ++--
 .../org/apache/hadoop/ozone/genesis/GenesisUtil.java |  4 ++--
 .../java/org/apache/hadoop/ozone/scm/cli/SQLCLI.java |  4 ++--
 227 files changed, 393 insertions(+), 400 deletions(-)

commit 07f20d92be11f702c75d2238071c3c3f51de1c05
Author: Viraj Jasani <virajjasani007@gmail.com>
Date:   Wed Sep 18 16:43:24 2019 +0200

    HDDS-2137. HddsClientUtils and OzoneUtils have duplicate verifyResourceName()
    
    Closes #1455

 .../hadoop/hdds/scm/client/HddsClientUtils.java    | 40 +++++-------
 .../apache/hadoop/ozone/web/utils/OzoneUtils.java  | 73 +---------------------
 2 files changed, 17 insertions(+), 96 deletions(-)

commit 8a77c604164e02a3d17d8a03de7804d310ac227f
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Sep 18 15:23:27 2019 +0200

    HDDS-2138. OM bucket operations do not add up
    
    Closes #1468

 .../java/org/apache/hadoop/ozone/om/OMMetrics.java | 28 +++++++++++-----------
 1 file changed, 14 insertions(+), 14 deletions(-)

commit a84dc5e931bff28b6496aea8da2612b26d7cbd08
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Sep 18 14:09:15 2019 +0200

    HDDS-2134. OM Metrics graphs include empty request type
    
    Closes #1451

 .../src/main/resources/webapps/ozoneManager/ozoneManager.js             | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 673fb353d39a329b7839dfc011ab166ac71902f0
Author: Márton Elek <elek@apache.org>
Date:   Wed Sep 18 13:28:43 2019 +0200

    HDDS-2022. Add additional freon tests
    
    Closes #1341

 hadoop-ozone/tools/pom.xml                         |   9 +
 .../hadoop/ozone/freon/BaseFreonGenerator.java     | 333 +++++++++++++++++++++
 .../hadoop/ozone/freon/ContentGenerator.java       |  62 ++++
 .../java/org/apache/hadoop/ozone/freon/Freon.java  |  11 +-
 .../hadoop/ozone/freon/HadoopFsGenerator.java      |  99 ++++++
 .../hadoop/ozone/freon/HadoopFsValidator.java      | 100 +++++++
 .../hadoop/ozone/freon/OmBucketGenerator.java      |  85 ++++++
 .../apache/hadoop/ozone/freon/OmKeyGenerator.java  | 100 +++++++
 .../ozone/freon/OzoneClientKeyGenerator.java       | 114 +++++++
 .../ozone/freon/OzoneClientKeyValidator.java       | 100 +++++++
 .../org/apache/hadoop/ozone/freon/PathSchema.java  |  38 +++
 .../apache/hadoop/ozone/freon/S3KeyGenerator.java  | 110 +++++++
 .../apache/hadoop/ozone/freon/SameKeyReader.java   | 105 +++++++
 13 files changed, 1265 insertions(+), 1 deletion(-)

commit f4337df2f5ae70a97aac760b5ab2c72079c01875
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Tue Sep 17 17:39:30 2019 -0700

    HDDS-2139. Update BeanUtils and Jackson Databind dependency versions (#1456)

 pom.ozone.xml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7d480472263b515c06a7fc41dfe45a6dc7e33d64
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Sep 18 02:31:08 2019 +0200

    HDDS-2136. OM block allocation metric not paired with its failures (#1460)

 .../src/main/java/org/apache/hadoop/ozone/om/OMMetrics.java  | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 09d16713d21c6f8c665e16f63371a1c4234b0b72
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Sep 18 02:27:08 2019 +0200

    HDDS-2142. OM metrics mismatch (abort multipart request) (#1461)

 .../src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java          | 2 +-
 .../ozone/om/request/s3/multipart/S3MultipartUploadAbortRequest.java    | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 4d1d267b73d8a9b2041856030a33fb8225d1a9e2
Author: bshashikant <shashikant@apache.org>
Date:   Tue Sep 17 16:49:25 2019 +0530

    HDDS-2117. ContainerStateMachine#writeStateMachineData times out. (#1430)

 .../container/common/impl/HddsDispatcher.java      |  9 ++++---
 .../server/ratis/ContainerStateMachine.java        | 31 ++++++++++++++++------
 2 files changed, 29 insertions(+), 11 deletions(-)

commit d4c0284f0f89c718768bd3585122409d2bc7794f
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Tue Sep 17 12:37:55 2019 +0200

    HDDS-2135. OM Metric mismatch (MultipartUpload failures)
    
    Closes #1453

 .../src/main/java/org/apache/hadoop/ozone/om/OMMetrics.java          | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 7116b5146e0dab6b921736c23566d9a9356e1156
Author: Márton Elek <elek@apache.org>
Date:   Tue Sep 17 12:20:51 2019 +0200

    HDDS-2120. Remove hadoop classes from ozonefs-current jar
    
    Closes #1434

 hadoop-ozone/ozonefs-lib-current/pom.xml | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit f50386bd512da9b1879f1758eb84f0b2203fc83a
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Tue Sep 17 11:01:33 2019 +0200

    HDDS-2132. TestKeyValueContainer is failing (#1457).

 .../ozone/container/keyvalue/helpers/KeyValueContainerUtil.java      | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit a5b27ff3eac1a3d45f8f5dfd6951bb09688ada5a
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Mon Sep 16 22:36:53 2019 -0700

    HDDS-2098 : Ozone shell command prints out ERROR when the log4j file … (#1411)

 hadoop-ozone/common/src/main/bin/ozone | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit 6ad42c7564b05163960895b27dc2a995c784a8e7
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Sep 17 10:47:00 2019 +0530

    HDDS-2114. Rename does not preserve non-explicitly created interim directories. Contributed by Lokesh Jain & Istvan Fajth.

 .../hadoop/fs/ozone/BasicOzoneFileSystem.java      | 24 ++++++++++++++++-----
 .../hadoop/fs/ozone/TestOzoneFileSystem.java       | 25 ++++++++++++++++++++++
 2 files changed, 44 insertions(+), 5 deletions(-)

commit 710a8a93d24bd7e3a871fb0582928b4b931e3e61
Author: Márton Elek <elek@apache.org>
Date:   Sat Sep 14 05:33:05 2019 +0200

    HDDS-2111. XSS fragments can be injected to the S3g landing page
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../src/main/resources/webapps/static/index.html   |  8 ++++++--
 .../src/main/resources/webapps/static/s3g.js       | 23 ++++++++++++++++++++++
 2 files changed, 29 insertions(+), 2 deletions(-)

commit 5d1388cfc647acfba77aa181c0bfc06bf4c810bb
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Mon Sep 16 12:58:16 2019 -0700

    HDDS-2107. Datanodes should retry forever to connect to SCM in an unsecure environment (#1424)

 .../container/common/statemachine/SCMConnectionManager.java   | 11 +++++++++--
 .../om/ratis/TestOzoneManagerDoubleBufferWithOMResponse.java  |  6 +++---
 2 files changed, 12 insertions(+), 5 deletions(-)

commit d5e348644dc3e38d48992f55733c4eca6052e095
Author: Sammi Chen <sammichen@apache.org>
Date:   Tue Sep 17 03:57:41 2019 +0800

    HDDS-1879.  Support multiple excluded scopes when choosing datanodes in NetworkTopology (#1194)

 .../org/apache/hadoop/hdds/scm/net/InnerNode.java  |   5 +-
 .../apache/hadoop/hdds/scm/net/InnerNodeImpl.java  |  56 +++++----
 .../org/apache/hadoop/hdds/scm/net/NetUtils.java   |  41 ++++---
 .../hadoop/hdds/scm/net/NetworkTopology.java       |  35 +-----
 .../hadoop/hdds/scm/net/NetworkTopologyImpl.java   | 136 ++++++++++-----------
 .../hdds/scm/net/TestNetworkTopologyImpl.java      |  74 +++++++----
 .../algorithms/SCMContainerPlacementMetrics.java   |   8 +-
 .../algorithms/SCMContainerPlacementRackAware.java |  22 ++--
 .../TestSCMContainerPlacementRackAware.java        |  65 ++++++++--
 9 files changed, 247 insertions(+), 195 deletions(-)

commit be799c6b77a49c6b3dfaa8d8b519f489d7a3936b
Author: Márton Elek <elek@apache.org>
Date:   Sat Aug 24 23:57:29 2019 +0200

    HDDS-2030. Generate simplifed reports by the dev-support/checks/*.sh scripts
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>
    Co-Authored-By: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>

 hadoop-ozone/dev-support/checks/README.md          | 27 +++++++++
 .../dev-support/checks/_mvn_unit_report.sh         | 66 ++++++++++++++++++++++
 hadoop-ozone/dev-support/checks/acceptance.sh      | 17 +++++-
 hadoop-ozone/dev-support/checks/author.sh          | 16 ++++--
 hadoop-ozone/dev-support/checks/checkstyle.sh      | 16 ++++--
 hadoop-ozone/dev-support/checks/findbugs.sh        | 20 +++----
 hadoop-ozone/dev-support/checks/integration.sh     | 12 ++--
 hadoop-ozone/dev-support/checks/rat.sh             | 11 +++-
 hadoop-ozone/dev-support/checks/shellcheck.sh      | 12 ++--
 hadoop-ozone/dev-support/checks/unit.sh            | 17 ++++--
 10 files changed, 174 insertions(+), 40 deletions(-)

commit 27871092359d4f1689f4513bdc20c69c9bd6db3b
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Sep 16 16:58:10 2019 +0200

    HDDS-2078. Get/Renew DelegationToken NPE after HDDS-1909
    
    Closes #1444

 .../hadoop/ozone/om/request/security/OMGetDelegationTokenRequest.java | 4 ++--
 .../ozone/om/request/security/OMRenewDelegationTokenRequest.java      | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit b0859b49c4a196bbdc16605f38ff51a59968b718
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Mon Sep 16 15:41:17 2019 +0200

    HDDS-2124. Random next links
    
    Closes #1443

 hadoop-hdds/docs/content/shell/BucketCommands.md     | 2 +-
 hadoop-hdds/docs/content/start/FromSource.md         | 1 +
 hadoop-hdds/docs/content/start/Kubernetes.md         | 1 +
 hadoop-hdds/docs/content/start/Minikube.md           | 1 +
 hadoop-hdds/docs/content/start/OnPrem.md             | 1 +
 hadoop-hdds/docs/content/start/RunningViaDocker.md   | 1 +
 hadoop-hdds/docs/content/start/StartFromDockerHub.md | 1 +
 7 files changed, 7 insertions(+), 1 deletion(-)

commit 96c5eb710c6c060993a06dc77c7155d6551f822b
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Mon Sep 16 15:11:20 2019 +0200

    HDDS-2109. Refactor scm.container.client config
    
    Closes #1426

 .../hadoop/hdds/scm/XceiverClientManager.java      | 91 ++++++++++++++++++----
 .../hadoop/hdds/scm/client/HddsClientUtils.java    |  9 +--
 .../hadoop/hdds/conf/OzoneConfiguration.java       |  9 +++
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  | 15 ----
 .../common/src/main/resources/ozone-default.xml    | 33 --------
 .../hadoop/ozone/scm/TestXceiverClientManager.java | 21 +++--
 .../fs/ozone/BasicOzoneClientAdapterImpl.java      |  7 +-
 .../hadoop/fs/ozone/BasicOzoneFileSystem.java      |  1 -
 8 files changed, 103 insertions(+), 83 deletions(-)

commit 57fdb00cb870ef09bb7fd9517928e118091b1f1e
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Sep 16 14:54:20 2019 +0200

    HDDS-2096. Ozone ACL document missing AddAcl API
    
    Closes #1427

 hadoop-hdds/docs/content/security/SecurityAcls.md | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 1b4c7ece5df295e5e90d98d09a1abd7bdb65cb9d
Author: shwetayakkali@cloudera.com <shwetayakkali@cloudera.com>
Date:   Sat Aug 31 01:01:19 2019 -0600

    HDDS-2044.Remove 'ozone' from the recon module names.

 hadoop-ozone/dist/dev-support/bin/dist-layout-stitching     |   2 +-
 hadoop-ozone/pom.xml                                        |   8 ++++----
 hadoop-ozone/{ozone-recon-codegen => recon-codegen}/pom.xml |   0
 .../org/hadoop/ozone/recon/codegen/JooqCodeGenerator.java   |   0
 .../ozone/recon/codegen/ReconSchemaGenerationModule.java    |   0
 .../org/hadoop/ozone/recon/codegen/TableNamingStrategy.java |   0
 .../java/org/hadoop/ozone/recon/codegen/package-info.java   |   0
 .../ozone/recon/schema/ReconInternalSchemaDefinition.java   |   0
 .../hadoop/ozone/recon/schema/ReconSchemaDefinition.java    |   0
 .../hadoop/ozone/recon/schema/StatsSchemaDefinition.java    |   0
 .../ozone/recon/schema/UtilizationSchemaDefinition.java     |   0
 .../java/org/hadoop/ozone/recon/schema/package-info.java    |   0
 .../dev-support/findbugsExcludeFile.xml                     |   0
 hadoop-ozone/{ozone-recon => recon}/pom.xml                 |   0
 .../apache/hadoop/ozone/recon/ConfigurationProvider.java    |   0
 .../java/org/apache/hadoop/ozone/recon/ReconConstants.java  |   0
 .../apache/hadoop/ozone/recon/ReconControllerModule.java    |   0
 .../ozone/recon/ReconGuiceServletContextListener.java       |   0
 .../java/org/apache/hadoop/ozone/recon/ReconHttpServer.java |   0
 .../apache/hadoop/ozone/recon/ReconRestServletModule.java   |   0
 .../java/org/apache/hadoop/ozone/recon/ReconServer.java     |   0
 .../apache/hadoop/ozone/recon/ReconServerConfigKeys.java    |   0
 .../apache/hadoop/ozone/recon/ReconTaskBindingModule.java   |   0
 .../main/java/org/apache/hadoop/ozone/recon/ReconUtils.java |   0
 .../apache/hadoop/ozone/recon/api/ContainerKeyService.java  |   0
 .../apache/hadoop/ozone/recon/api/UtilizationService.java   |   0
 .../org/apache/hadoop/ozone/recon/api/package-info.java     |   0
 .../hadoop/ozone/recon/api/types/ContainerKeyPrefix.java    |   0
 .../hadoop/ozone/recon/api/types/ContainerMetadata.java     |   0
 .../hadoop/ozone/recon/api/types/ContainersResponse.java    |   0
 .../apache/hadoop/ozone/recon/api/types/IsoDateAdapter.java |   0
 .../apache/hadoop/ozone/recon/api/types/KeyMetadata.java    |   0
 .../apache/hadoop/ozone/recon/api/types/KeysResponse.java   |   0
 .../apache/hadoop/ozone/recon/api/types/package-info.java   |   0
 .../java/org/apache/hadoop/ozone/recon/package-info.java    |   0
 .../ozone/recon/persistence/DataSourceConfiguration.java    |   0
 .../ozone/recon/persistence/DefaultDataSourceProvider.java  |   0
 .../ozone/recon/persistence/JooqPersistenceModule.java      |   0
 .../recon/persistence/TransactionalMethodInterceptor.java   |   0
 .../apache/hadoop/ozone/recon/persistence/package-info.java |   0
 .../hadoop/ozone/recon/recovery/ReconOMMetadataManager.java |   0
 .../ozone/recon/recovery/ReconOmMetadataManagerImpl.java    |   0
 .../apache/hadoop/ozone/recon/recovery/package-info.java    |   0
 .../hadoop/ozone/recon/spi/ContainerDBServiceProvider.java  |   0
 .../hadoop/ozone/recon/spi/HddsDatanodeServiceProvider.java |   0
 .../hadoop/ozone/recon/spi/OzoneManagerServiceProvider.java |   0
 .../ozone/recon/spi/StorageContainerServiceProvider.java    |   0
 .../recon/spi/impl/ContainerDBServiceProviderImpl.java      |   0
 .../ozone/recon/spi/impl/ContainerKeyPrefixCodec.java       |   0
 .../recon/spi/impl/OzoneManagerServiceProviderImpl.java     |   0
 .../ozone/recon/spi/impl/ReconContainerDBProvider.java      |   0
 .../apache/hadoop/ozone/recon/spi/impl/package-info.java    |   0
 .../org/apache/hadoop/ozone/recon/spi/package-info.java     |   0
 .../hadoop/ozone/recon/tasks/ContainerKeyMapperTask.java    |   0
 .../apache/hadoop/ozone/recon/tasks/FileSizeCountTask.java  |   0
 .../apache/hadoop/ozone/recon/tasks/OMDBUpdateEvent.java    |   0
 .../apache/hadoop/ozone/recon/tasks/OMDBUpdatesHandler.java |   0
 .../apache/hadoop/ozone/recon/tasks/OMUpdateEventBatch.java |   0
 .../apache/hadoop/ozone/recon/tasks/ReconDBUpdateTask.java  |   0
 .../hadoop/ozone/recon/tasks/ReconTaskController.java       |   0
 .../hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java   |   0
 .../org/apache/hadoop/ozone/recon/tasks/package-info.java   |   0
 .../src/main/resources/webapps/recon/WEB-INF/web.xml        |   0
 .../main/resources/webapps/recon/ozone-recon-web/.gitignore |   0
 .../main/resources/webapps/recon/ozone-recon-web/LICENSE    |   0
 .../src/main/resources/webapps/recon/ozone-recon-web/NOTICE |   0
 .../main/resources/webapps/recon/ozone-recon-web/README.md  |   0
 .../webapps/recon/ozone-recon-web/config-overrides.js       |   0
 .../resources/webapps/recon/ozone-recon-web/package.json    |   0
 .../webapps/recon/ozone-recon-web/public/favicon.ico        | Bin
 .../webapps/recon/ozone-recon-web/public/index.html         |   0
 .../webapps/recon/ozone-recon-web/public/manifest.json      |   0
 .../resources/webapps/recon/ozone-recon-web/src/App.less    |   0
 .../webapps/recon/ozone-recon-web/src/App.test.tsx          |   0
 .../resources/webapps/recon/ozone-recon-web/src/App.tsx     |   0
 .../src/components/Breadcrumbs/Breadcrumbs.tsx              |   0
 .../recon/ozone-recon-web/src/components/NavBar/NavBar.less |   0
 .../recon/ozone-recon-web/src/components/NavBar/NavBar.tsx  |   0
 .../ozone-recon-web/src/constants/breadcrumbs.constants.tsx |   0
 .../resources/webapps/recon/ozone-recon-web/src/index.less  |   0
 .../resources/webapps/recon/ozone-recon-web/src/index.tsx   |   0
 .../resources/webapps/recon/ozone-recon-web/src/logo.png    | Bin
 .../recon/ozone-recon-web/src/makeRouteWithSubRoutes.tsx    |   0
 .../webapps/recon/ozone-recon-web/src/react-app-env.d.ts    |   0
 .../resources/webapps/recon/ozone-recon-web/src/routes.tsx  |   0
 .../webapps/recon/ozone-recon-web/src/routes.types.tsx      |   0
 .../webapps/recon/ozone-recon-web/src/serviceWorker.ts      |   0
 .../src/views/ContainerBrowser/ContainerBrowser.tsx         |   0
 .../recon/ozone-recon-web/src/views/Dashboard/Dashboard.tsx |   0
 .../recon/ozone-recon-web/src/views/NotFound/NotFound.tsx   |   0
 .../resources/webapps/recon/ozone-recon-web/tsconfig.json   |   0
 .../main/resources/webapps/recon/ozone-recon-web/yarn.lock  |   0
 .../hadoop/ozone/recon/AbstractOMMetadataManagerTest.java   |   0
 .../hadoop/ozone/recon/GuiceInjectorUtilsForTestsImpl.java  |   0
 .../java/org/apache/hadoop/ozone/recon/TestReconCodecs.java |   0
 .../java/org/apache/hadoop/ozone/recon/TestReconUtils.java  |   0
 .../hadoop/ozone/recon/api/TestContainerKeyService.java     |   0
 .../hadoop/ozone/recon/api/TestUtilizationService.java      |   0
 .../org/apache/hadoop/ozone/recon/api/package-info.java     |   0
 .../java/org/apache/hadoop/ozone/recon/package-info.java    |   0
 .../ozone/recon/persistence/AbstractSqlDatabaseTest.java    |   0
 .../persistence/TestReconInternalSchemaDefinition.java      |   0
 .../ozone/recon/persistence/TestStatsSchemaDefinition.java  |   0
 .../recon/persistence/TestUtilizationSchemaDefinition.java  |   0
 .../apache/hadoop/ozone/recon/persistence/package-info.java |   0
 .../recon/recovery/TestReconOmMetadataManagerImpl.java      |   0
 .../apache/hadoop/ozone/recon/recovery/package-info.java    |   0
 .../recon/spi/impl/TestContainerDBServiceProviderImpl.java  |   0
 .../recon/spi/impl/TestOzoneManagerServiceProviderImpl.java |   0
 .../ozone/recon/spi/impl/TestReconContainerDBProvider.java  |   0
 .../apache/hadoop/ozone/recon/spi/impl/package-info.java    |   0
 .../apache/hadoop/ozone/recon/tasks/DummyReconDBTask.java   |   0
 .../ozone/recon/tasks/TestContainerKeyMapperTask.java       |   0
 .../hadoop/ozone/recon/tasks/TestFileSizeCountTask.java     |   0
 .../hadoop/ozone/recon/tasks/TestOMDBUpdatesHandler.java    |   0
 .../ozone/recon/tasks/TestReconTaskControllerImpl.java      |   0
 .../org/apache/hadoop/ozone/recon/tasks/package-info.java   |   0
 .../ozone/recon/types/GuiceInjectorUtilsForTests.java       |   0
 .../mockito-extensions/org.mockito.plugins.MockMaker        |   0
 119 files changed, 5 insertions(+), 5 deletions(-)

commit a3b69199d46e513bc7ee6a4fea62f9e47f809570
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Sun Sep 15 17:22:17 2019 +0200

    HDDS-2129. Using dist profile fails with pom.ozone.xml as parent pom (#1449)

 pom.ozone.xml | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit e7e2f64c471228ba8b9957ace549b9f9b50225f7
Author: Nanda kumar <nanda@apache.org>
Date:   Sat Sep 14 06:32:11 2019 +0200

    HDDS-2125. maven-javadoc-plugin.version is missing in pom.ozone.xml
    
    Closes #1439

 pom.ozone.xml | 1 +
 1 file changed, 1 insertion(+)

commit 532c648ab31d5347169599c36d0441c69c7e5fb3
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Sep 13 11:40:42 2019 -0700

    Revert "HDDS-2057. Incorrect Default OM Port in Ozone FS URI Error Message."
    
    This reverts commit 95010a41fcea6ecf5dfd46d6e6f6f38c8b3e2a66.

 .../hadoop/fs/ozone/BasicOzoneFileSystem.java      | 26 +++++++---------------
 1 file changed, 8 insertions(+), 18 deletions(-)

commit d9f65598b5924b79c148a57ca71ba33d4aa99dfe
Author: Siyao Meng <50227127+smengcl@users.noreply.github.com>
Date:   Fri Sep 13 11:22:00 2019 -0700

    HDDS-2007. Make ozone fs shell command work with OM HA service ids       (#1360)

 .../hadoop/ozone/client/OzoneClientFactory.java    |  69 +++-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |   7 +-
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  24 ++
 .../ozone/om/ha/OMFailoverProxyProvider.java       |  26 +-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |   6 +-
 .../src/main/compose/ozone-om-ha/docker-config     |  11 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   7 +
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   5 +
 .../hadoop/ozone/MiniOzoneHAClusterImpl.java       |  19 +-
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |   2 +-
 .../client/rpc/TestOzoneRpcClientAbstract.java     |   2 +-
 .../hadoop/ozone/om/TestOMRatisSnapshots.java      |   5 +-
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java |   9 +-
 .../snapshot/TestOzoneManagerSnapshotProvider.java |   7 +-
 .../apache/hadoop/ozone/ozShell/TestS3Shell.java   |   2 +-
 .../hadoop/ozone/recon/ReconControllerModule.java  |   2 +-
 .../fs/ozone/BasicOzoneClientAdapterImpl.java      |  31 +-
 .../hadoop/fs/ozone/BasicOzoneFileSystem.java      |  10 +-
 .../apache/hadoop/fs/ozone/TestOzoneFsHAURLs.java  | 348 +++++++++++++++++++++
 19 files changed, 553 insertions(+), 39 deletions(-)

commit 4ff0341cec95d05826698baa89cc9e00edfdefb6
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Fri Sep 13 10:50:31 2019 -0700

    HDDS-1786 : Datanodes takeSnapshot should delete previously created snapshots (#1163)

 .../server/ratis/RatisServerConfiguration.java     | 48 +++++++++++++++++
 .../transport/server/ratis/XceiverServerRatis.java | 15 ++++--
 .../client/rpc/TestContainerStateMachine.java      | 62 +++++++++++++++++++++-
 3 files changed, 120 insertions(+), 5 deletions(-)

commit 6313aa64d9ad722089dfb45cb4e96353cccf60d3
Author: sdeka <sdeka@hortonworks.com>
Date:   Thu Aug 29 21:23:50 2019 +0530

    HDDS-2057. Incorrect Default OM Port in Ozone FS URI Error Message.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../hadoop/fs/ozone/BasicOzoneFileSystem.java      | 26 +++++++++++++++-------
 1 file changed, 18 insertions(+), 8 deletions(-)

commit 01f40067c31bc63816446d62b5ba67e5100271d0
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Fri Sep 13 16:11:00 2019 +0530

    HDDS-2122. Broken logo image on category sub-pages (#1437)
    
    Signed-off-by: Nanda kumar <nanda@apache.org>

 hadoop-hdds/docs/themes/ozonedoc/layouts/partials/navbar.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bd6c825a4b950b96bfe92f44f38b383c652a0247
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Sep 12 21:16:39 2019 +0530

    HDDS-2076. Read fails because the block cannot be located in the container (#1410)
    
    Signed-off-by: Nanda kumar <nanda@apache.org>

 .../keyvalue/helpers/KeyValueContainerUtil.java    |   7 +
 .../rpc/TestContainerReplicationEndToEnd.java      | 215 +++++++++++++++++++++
 2 files changed, 222 insertions(+)

commit 831c7019aaea7194dd2bff3dfe65f66b06c6508a
Author: Márton Elek <elek@apache.org>
Date:   Thu Sep 12 02:38:41 2019 +0200

    HDDS-2106. Avoid usage of hadoop projects as parent of hdds/ozone
    
    Closes #1423

 hadoop-hdds/pom.xml  |    7 +-
 hadoop-ozone/pom.xml |    7 +-
 pom.ozone.xml        | 1818 +++++++++++++++++++++++++++++++++++++++++++++++++-
 3 files changed, 1820 insertions(+), 12 deletions(-)

commit b521787a53be5f0621c555b3cac6496c57ce0c2a
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Sep 11 20:59:01 2019 +0200

    HDDS-2075. Tracing in OzoneManager call is propagated with wrong parent (#1415)

 .../main/java/org/apache/hadoop/ozone/client/rpc/RpcClient.java    | 7 +++++--
 .../om/protocolPB/OzoneManagerProtocolClientSideTranslatorPB.java  | 5 ++---
 2 files changed, 7 insertions(+), 5 deletions(-)

commit 65e2db3a6cad116bcb522b35ee15ca71bcce1c65
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Sep 11 16:19:10 2019 +0200

    HDDS-2103. TestContainerReplication fails due to unhealthy container (#1421)

 .../ozone/container/TestContainerReplication.java  | 30 +++++-----------------
 1 file changed, 7 insertions(+), 23 deletions(-)

commit ba002df55ad1edb37c86be13208d689218d6da05
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Wed Sep 11 11:10:11 2019 +0900

    HADOOP-15184. Add GitHub pull request template. (#1419)

 .github/pull_request_template.md | 6 ++++++
 1 file changed, 6 insertions(+)

commit 1bf85c140ac3f2b9d25badf7b2b4bb891283f640
Author: Lokesh Jain <ljain@apache.org>
Date:   Tue Sep 10 14:14:52 2019 +0530

    HDDS-2048: State check during container state transition in datanode should be lock protected (#1375)

 .../container/keyvalue/KeyValueContainer.java      |   6 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  | 120 ++++++++++++---------
 .../container/keyvalue/impl/BlockManagerImpl.java  |  32 +++---
 3 files changed, 94 insertions(+), 64 deletions(-)

commit 748068b383b2850e3e8225c66a131da11ad9fb3c
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Sep 9 15:38:11 2019 -0700

    HDDS-2053. Fix TestOzoneManagerRatisServer failure. Contributed by Xiaoyu Yao. (#1373)

 .../org/apache/hadoop/ozone/om/ratis/TestOzoneManagerRatisServer.java   | 2 ++
 1 file changed, 2 insertions(+)

commit 4a0151c5be9f75e103fb228f2027c5aaba3296e8
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Sep 10 02:47:28 2019 +0530

    HDDS-2102. HddsVolumeChecker should use java optional in place of Guava optional. Contributed by Mukul Kumar Singh. (#1416)

 .../container/common/volume/AsyncChecker.java      | 65 ++++++++++++++++++++++
 .../container/common/volume/HddsVolumeChecker.java |  3 +-
 .../common/volume/ThrottledAsyncChecker.java       |  7 +--
 .../common/volume/TestHddsVolumeChecker.java       |  3 +-
 4 files changed, 70 insertions(+), 8 deletions(-)

commit b3b58009f139497ac073f61bc84839209153f9c1
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Mon Sep 9 22:43:20 2019 +0530

    HDDS-1843. Undetectable corruption after restart of a datanode. Contributed by Shashikant Banerjee(#1364).

 .../src/main/proto/DatanodeContainerProtocol.proto |  5 +-
 .../ozone/container/common/impl/ContainerSet.java  | 44 +++++++++--
 .../container/common/impl/HddsDispatcher.java      | 45 ++++++++---
 .../container/common/interfaces/Container.java     |  7 ++
 .../common/interfaces/ContainerDispatcher.java     |  6 +-
 .../server/ratis/ContainerStateMachine.java        | 37 ++++-----
 .../transport/server/ratis/DispatcherContext.java  | 24 +++---
 .../container/keyvalue/KeyValueContainer.java      |  5 ++
 .../container/keyvalue/impl/BlockManagerImpl.java  |  3 +-
 .../rpc/TestContainerStateMachineFailures.java     | 88 ++++++++++++++++++++++
 .../transport/server/ratis/TestCSMMetrics.java     |  5 +-
 .../container/server/TestContainerServer.java      |  4 +-
 .../server/TestSecureContainerServer.java          |  6 +-
 13 files changed, 218 insertions(+), 61 deletions(-)

commit 74a9ad6cfe588f56c94c56c28f95c671831ece44
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Sun Sep 8 20:44:07 2019 -0700

    HDDS-2087. Remove the hard coded config key in ChunkManager (#1409)

 .../src/main/java/org/apache/hadoop/hdds/HddsConfigKeys.java      | 4 ++++
 hadoop-hdds/common/src/main/resources/ozone-default.xml           | 2 +-
 .../hadoop/ozone/container/keyvalue/impl/ChunkManagerFactory.java | 8 +++++---
 .../org/apache/hadoop/ozone/TestOzoneConfigurationFields.java     | 1 -
 4 files changed, 10 insertions(+), 5 deletions(-)

commit 349d29de2f266e32174fee5e73e7948b29257c24
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Sep 7 12:55:17 2019 -0700

    HDDS-2100. Ozone TokenRenewer provider is incorrectly configured. Contributed by Jitendra Nath Pandey.

 .../META-INF/services/org.apache.hadoop.security.token.TokenRenewer     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d53ee7d38727dbbf04e511c40bd47673674f61ec
Author: Sammi Chen <sammichen@apache.org>
Date:   Sat Sep 7 08:11:54 2019 +0800

    HDDS-1553. Add metrics in rack aware container placement policy. (#1361)

 .../hdds/scm/container/ReplicationManager.java     |   2 +-
 .../ContainerPlacementPolicyFactory.java           |   9 +-
 .../algorithms/SCMContainerPlacementCapacity.java  |   2 +-
 .../algorithms/SCMContainerPlacementMetrics.java   | 111 +++++++++++++++
 .../algorithms/SCMContainerPlacementRackAware.java |  15 +-
 .../algorithms/SCMContainerPlacementRandom.java    |   2 +-
 .../hdds/scm/server/StorageContainerManager.java   |   6 +-
 .../algorithms/TestContainerPlacementFactory.java  |   9 +-
 .../TestSCMContainerPlacementCapacity.java         |   3 +-
 .../TestSCMContainerPlacementRackAware.java        |  76 ++++++++--
 .../TestSCMContainerPlacementRandom.java           |   3 +-
 .../placement/TestContainerPlacement.java          |   4 +-
 .../TestSCMContainerPlacementPolicyMetrics.java    | 156 +++++++++++++++++++++
 13 files changed, 368 insertions(+), 30 deletions(-)

commit 37b17c6c6324ed6539999b191380e631bf5fbdeb
Author: dchitlangia <dineshchitlangia@gmail.com>
Date:   Fri Aug 30 17:17:53 2019 -0400

    HDDS-2015. Encrypt/decrypt key using symmetric key while writing/reading
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  3 +-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 54 ++++++++++++++
 .../hadoop/ozone/security/GDPRSymmetricKey.java    | 10 ++-
 .../ozone/security/TestGDPRSymmetricKey.java       |  7 +-
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 86 ++++++++++++++++++++++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 11 ++-
 .../hadoop/ozone/om/request/key/OMKeyRequest.java  |  5 +-
 .../protocolPB/OzoneManagerRequestHandler.java     |  2 +
 .../ozone/web/ozShell/keys/PutKeyHandler.java      |  8 +-
 9 files changed, 175 insertions(+), 11 deletions(-)

commit 7cc03e89801376a5056c3db1e40a8b21dab66ba5
Author: Lokesh Jain <ljain@apache.org>
Date:   Fri Sep 6 13:15:49 2019 +0530

    HDDS-1561: Mark OPEN containers as QUASI_CLOSED as part of Ratis groupRemove (#1401)

 .../ozone/container/common/impl/ContainerData.java |  8 ++
 .../CloseContainerCommandHandler.java              | 55 +++++++-------
 .../server/ratis/ContainerStateMachine.java        | 26 ++++++-
 .../transport/server/ratis/XceiverServerRatis.java | 48 +++++++-----
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  3 +-
 .../TestCloseContainerCommandHandler.java          | 10 ++-
 hadoop-hdds/pom.xml                                |  2 +-
 .../TestCloseContainerByPipeline.java              | 86 +++++++++++++++++++---
 .../transport/server/ratis/TestCSMMetrics.java     |  4 +
 .../container/server/TestContainerServer.java      |  5 +-
 .../server/TestSecureContainerServer.java          |  6 +-
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |  2 +-
 hadoop-ozone/pom.xml                               |  2 +-
 13 files changed, 188 insertions(+), 69 deletions(-)

commit 42ff9d5b8cfd5cdec405a1feba4748d71eb7eb0e
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Sep 5 14:33:06 2019 -0700

    HDDS-1708. Add container scrubber metrics.
    Contributed by Hrishikesh Gadre.

 .../keyvalue/impl/ChunkManagerFactory.java         |   1 -
 .../container/ozoneimpl/ContainerDataScanner.java  |  94 +++++++++++++----
 .../ozoneimpl/ContainerDataScrubberMetrics.java    | 115 +++++++++++++++++++++
 .../ozoneimpl/ContainerMetadataScanner.java        |  59 ++++++++---
 .../ContainerMetadataScrubberMetrics.java          |  93 +++++++++++++++++
 .../ozone/container/ozoneimpl/OzoneContainer.java  |   4 +-
 .../ozoneimpl/TestContainerScrubberMetrics.java    | 113 ++++++++++++++++++++
 .../hadoop/ozone/dn/scrubber/TestDataScrubber.java |   2 +-
 8 files changed, 442 insertions(+), 39 deletions(-)

commit 2177e0995d4bc22bc7833e51cdfa89d667182e1c
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Sep 5 18:12:36 2019 +0530

    HDDS-1898. GrpcReplicationService#download cannot replicate the container. (#1326)

 .../ozone/container/common/interfaces/Handler.java | 16 ++++++++++---
 .../commandhandler/DeleteBlocksCommandHandler.java |  7 +++++-
 .../container/keyvalue/KeyValueContainer.java      |  9 +++----
 .../ozone/container/keyvalue/KeyValueHandler.java  | 28 +++++++++++++++++-----
 .../background/BlockDeletingService.java           |  6 +++++
 .../container/ozoneimpl/ContainerController.java   | 12 ++++++++--
 .../OnDemandContainerReplicationSource.java        | 18 ++++----------
 .../ozone/container/TestContainerReplication.java  |  8 +++++++
 8 files changed, 75 insertions(+), 29 deletions(-)

commit f7943ada633591025f7ec8f62351cae296f99db9
Author: Hrishikesh Gadre <hgadre@cloudera.com>
Date:   Thu Jul 11 15:08:56 2019 -0700

    Add support for checksum verification in data scrubber
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   5 +-
 .../apache/hadoop/ozone/common/ChecksumData.java   |   7 +-
 .../container/common/interfaces/Container.java     |  26 +++-
 .../container/keyvalue/KeyValueContainer.java      |  57 +++-----
 .../container/keyvalue/KeyValueContainerCheck.java |  99 ++++++++-----
 .../keyvalue/impl/ChunkManagerFactory.java         |   6 +-
 .../container/ozoneimpl/ContainerDataScanner.java  | 108 ++++++++++++++
 .../ozoneimpl/ContainerMetadataScanner.java        | 110 ++++++++++++++
 .../container/ozoneimpl/ContainerScrubber.java     | 158 ---------------------
 .../ozoneimpl/ContainerScrubberConfiguration.java  |  74 ++++++++++
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  41 ++++--
 .../keyvalue/TestKeyValueContainerCheck.java       | 101 +++++++++++--
 .../hadoop/ozone/TestOzoneConfigurationFields.java |   4 +-
 .../hadoop/ozone/dn/scrubber/TestDataScrubber.java |   6 +-
 .../freon/TestDataValidateWithDummyContainers.java |   5 +-
 15 files changed, 542 insertions(+), 265 deletions(-)

commit fd6b93d6a9505cc75524b748738e44113c6ab822
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Sep 4 14:03:38 2019 -0700

    HDDS-2079. Fix TestSecureOzoneManager. Contributed by Xiaoyu Yao. (#1400)

 .../hadoop/ozone/om/TestSecureOzoneManager.java    | 54 ++++++----------------
 1 file changed, 14 insertions(+), 40 deletions(-)

commit 2d823ac32d63923909b765794b900b65b3c13fa7
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Sep 4 15:28:59 2019 +0530

    HDDS-2077. Add maven-gpg-plugin.version to pom.ozone.xml. (#1396)

 pom.ozone.xml | 1 +
 1 file changed, 1 insertion(+)

commit 4381d80b377e96f5b8ed3bf74594cd09192f8a69
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Sep 3 14:06:14 2019 -0700

    HDDS-2018. Handle Set DtService of token for OM HA. (#1371)

 .../ozone/om/ha/OMFailoverProxyProvider.java       | 26 ++++++-
 .../security/OzoneDelegationTokenSelector.java     | 18 ++++-
 .../security/TestOzoneDelegationTokenSelector.java | 87 ++++++++++++++++++++++
 3 files changed, 127 insertions(+), 4 deletions(-)

commit c238fd9e611a10d72a1f69821aba6ede347374cc
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Sep 3 13:24:32 2019 -0700

    HDDS-1909. Use new HA code for Non-HA in OM. (#1225)

 .../hadoop/utils/db/cache/TableCacheImpl.java      |  12 --
 .../dist/src/main/compose/ozone-topology/test.sh   |   3 +-
 hadoop-ozone/dist/src/main/compose/ozone/test.sh   |   3 +-
 .../rpc/TestOzoneRpcClientForAclAuditLog.java      |   3 +
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java |  10 +-
 .../org/apache/hadoop/ozone/om/TestOmAcls.java     |   2 +-
 .../org/apache/hadoop/ozone/om/TestOmMetrics.java  |   2 +
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java |   4 +
 .../apache/hadoop/ozone/om/TestScmSafeMode.java    |  51 +++----
 .../security/acl/TestOzoneNativeAuthorizer.java    |   5 +-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |   7 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   7 +
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |   4 +-
 .../om/request/bucket/OMBucketCreateRequest.java   |   2 +-
 .../om/request/file/OMDirectoryCreateRequest.java  |   2 +-
 .../ozone/om/request/key/OMKeyRenameRequest.java   |   1 +
 .../hadoop/ozone/om/request/key/OMKeyRequest.java  |   4 +-
 .../security/OMGetDelegationTokenRequest.java      |  67 +++++---
 .../om/request/volume/OMVolumeCreateRequest.java   |  17 ++-
 .../om/request/volume/OMVolumeSetOwnerRequest.java |   2 +-
 .../security/OMGetDelegationTokenResponse.java     |   3 +-
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  76 ++++++---
 .../hadoop/ozone/om/TestBucketManagerImpl.java     |  12 +-
 .../hadoop/ozone/om/TestKeyDeletingService.java    |   9 +-
 .../apache/hadoop/ozone/om/TestKeyManagerUnit.java |  18 +--
 .../hadoop/ozone/om/TestS3BucketManager.java       |  70 ++-------
 ...TestOzoneManagerDoubleBufferWithOMResponse.java | 169 ++++++++++++++-------
 .../ozone/om/request/TestOMRequestUtils.java       |  82 +++++++++-
 .../request/bucket/TestOMBucketCreateRequest.java  |   4 +-
 .../request/volume/TestOMVolumeDeleteRequest.java  |   6 +-
 .../volume/acl/TestOMVolumeAddAclRequest.java      |   1 -
 .../volume/acl/TestOMVolumeSetAclRequest.java      |   1 -
 .../bucket/TestOMBucketCreateResponse.java         |  15 +-
 .../bucket/TestOMBucketSetPropertyResponse.java    |  13 +-
 .../s3/bucket/TestS3BucketCreateResponse.java      |  15 +-
 .../volume/TestOMVolumeCreateResponse.java         |   6 +-
 .../volume/TestOMVolumeSetOwnerResponse.java       |  13 +-
 .../volume/TestOMVolumeSetQuotaResponse.java       |  13 +-
 .../ozone/recon/AbstractOMMetadataManagerTest.java |   9 +-
 .../recovery/TestReconOmMetadataManagerImpl.java   |  17 ++-
 40 files changed, 473 insertions(+), 287 deletions(-)

commit 36ea335a39660deaa19a606e27a0c318b631c814
Author: Sammi Chen <sammichen@apache.org>
Date:   Tue Sep 3 20:28:48 2019 +0800

    HDDS-2069. Default values of properties hdds.datanode.storage.utilization.{critical | warning}.threshold are not reasonable. (#1393)

 .../common/src/main/java/org/apache/hadoop/ozone/OzoneConfigKeys.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 3986559100bc706c180575a1c5746db7b1c48d16
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Sep 3 16:50:57 2019 +0530

    HDDS-1810. SCM command to Activate and Deactivate pipelines. (#1224)

 .../hdds/scm/client/ContainerOperationClient.java  | 12 +++++
 .../apache/hadoop/hdds/scm/client/ScmClient.java   | 16 ++++++
 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  |  4 +-
 .../protocol/StorageContainerLocationProtocol.java | 16 ++++++
 ...inerLocationProtocolClientSideTranslatorPB.java | 32 ++++++++++++
 .../org/apache/hadoop/ozone/audit/SCMAction.java   |  2 +
 ...inerLocationProtocolServerSideTranslatorPB.java | 34 +++++++++++++
 .../proto/StorageContainerLocationProtocol.proto   | 22 ++++++++
 hadoop-hdds/common/src/main/proto/hdds.proto       |  3 +-
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  | 17 +++++++
 .../hdds/scm/pipeline/PipelineStateManager.java    | 24 +++++++++
 .../hadoop/hdds/scm/pipeline/PipelineStateMap.java |  2 +-
 .../hdds/scm/pipeline/RatisPipelineProvider.java   |  1 +
 .../hdds/scm/pipeline/SCMPipelineManager.java      | 26 ++++++++++
 .../hdds/scm/server/SCMClientProtocolServer.java   | 18 +++++++
 .../org/apache/hadoop/hdds/scm/cli/SCMCLI.java     |  4 ++
 .../cli/pipeline/ActivatePipelineSubcommand.java   | 53 ++++++++++++++++++++
 .../cli/pipeline/DeactivatePipelineSubcommand.java | 53 ++++++++++++++++++++
 .../scm/pipeline/TestPipelineStateManager.java     |  7 +++
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  | 58 +++++++++++++++++++---
 20 files changed, 395 insertions(+), 9 deletions(-)

commit 0aa6a292956a3fb29ddf161577dee1088463eff1
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Tue Sep 3 02:48:50 2019 -0700

    HDDS-1783 : Latency metric for applyTransaction in ContainerStateMachine (#1363).

 .../common/transport/server/ratis/CSMMetrics.java        | 14 ++++++++++++++
 .../transport/server/ratis/ContainerStateMachine.java    | 15 ++++++++++++---
 .../dist/src/main/compose/ozonesecure-mr/docker-config   |  2 +-
 .../common/transport/server/ratis/TestCSMMetrics.java    | 16 ++++++++++++++++
 4 files changed, 43 insertions(+), 4 deletions(-)

commit c916c758b53617dc82a891d6b9260a3d411fc39d
Author: Márton Elek <elek@apache.org>
Date:   Fri Aug 30 16:29:55 2019 +0200

    HDDS-2060. Create Ozone specific LICENSE file for the Ozone source package
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../src/main/resources/webapps/static/dfs-dust.js  | 133 ----
 hadoop-ozone/assemblies/pom.xml                    |  82 ---
 .../dist/dev-support/bin/dist-layout-stitching     |   8 +-
 .../src/main}/assemblies/ozone-src.xml             |  44 +-
 hadoop-ozone/dist/src/main/license/bin/LICENSE.txt | 443 ++++++++++++
 hadoop-ozone/dist/src/main/license/bin/NOTICE.txt  | 520 ++++++++++++++
 .../license/bin/licenses/LICENSE-angular-nvd3.txt  |  16 +
 .../main/license/bin/licenses/LICENSE-angular.txt  |  21 +
 .../LICENSE-com.google.code.findbugs-jsr305.txt    |   8 +
 .../bin/licenses/LICENSE-com.google.re2j-re2j.txt  |  32 +
 .../bin/licenses/LICENSE-com.jcraft-jsch.txt       |  30 +
 .../bin/licenses/LICENSE-com.sun.jersey.txt        | 274 ++++++++
 .../bin/licenses/LICENSE-com.sun.xml.bind.txt      | 759 +++++++++++++++++++++
 ...ICENSE-com.thoughtworks.paranamer-paranamer.txt |  29 +
 .../src/main/license/bin/licenses/LICENSE-d3.txt   |  26 +
 .../bin/licenses/LICENSE-dnsjava-dnsjava.txt       |  24 +
 ...E-jakarta.annotation-jakarta.annotation-api.txt | 277 ++++++++
 .../LICENSE-javax.activation-activation.txt        | 134 ++++
 ...CENSE-javax.annotation-javax.annotation-api.txt | 263 +++++++
 .../bin/licenses/LICENSE-javax.el-javax.el-api.txt | 263 +++++++
 ...NSE-javax.interceptor-javax.interceptor-api.txt | 263 +++++++
 .../LICENSE-javax.servlet-javax.servlet-api.txt    | 263 +++++++
 .../licenses/LICENSE-javax.servlet.jsp-jsp-api.txt | 759 +++++++++++++++++++++
 .../LICENSE-javax.ws.rs-javax.ws.rs-api.txt        | 759 +++++++++++++++++++++
 .../licenses/LICENSE-javax.ws.rs-jsr311-api.txt    | 759 +++++++++++++++++++++
 .../licenses/LICENSE-javax.xml.bind-jaxb-api.txt   | 274 ++++++++
 .../main/license/bin/licenses/LICENSE-jersey.txt   | 759 +++++++++++++++++++++
 .../main/license/bin/licenses/LICENSE-jetty.txt    | 415 +++++++++++
 .../main/license/bin/licenses/LICENSE-jquery.txt   |  20 +
 .../LICENSE-net.sf.jopt-simple-jopt-simple.txt     |  24 +
 .../src/main/license/bin/licenses/LICENSE-nvd3.txt |  10 +
 ...rg.codehaus.mojo-animal-sniffer-annotations.txt |  21 +
 .../LICENSE-org.codehaus.woodstox-stax2-api.txt    |  13 +
 ...SE-org.fusesource.leveldbjni-leveldbjni-all.txt |  27 +
 .../bin/licenses/LICENSE-org.glassfish.hk2.txt     | 759 +++++++++++++++++++++
 .../licenses/LICENSE-org.openjdk.jmh-jmh-core.txt  | 347 ++++++++++
 ...SE-org.openjdk.jmh-jmh-generator-annprocess.txt | 347 ++++++++++
 .../bin/licenses/LICENSE-org.ow2.asm-asm.txt       |  28 +
 .../license/bin/licenses/LICENSE-org.slf4j.txt     |  21 +
 .../main/license/bin/licenses/LICENSE-protobuf.txt |  32 +
 .../bin/licenses/LICENSE-ratis-thirdparty-misc.txt | 353 ++++++++++
 .../bin/licenses/NOTICE-ratis-thirtparty-misc.txt  | 340 +++++++++
 hadoop-ozone/dist/src/main/license/src/LICENSE.txt | 239 +++++++
 hadoop-ozone/dist/src/main/license/src/NOTICE.txt  |  33 +
 .../src/main/license/src/licenses/IMPORTANT.md     |  21 +
 .../license/src/licenses/LICENSE-angular-nvd3.txt  |  16 +
 .../main/license/src/licenses/LICENSE-angular.txt  |  21 +
 .../src/main/license/src/licenses/LICENSE-d3.txt   |  26 +
 .../main/license/src/licenses/LICENSE-jquery.txt   |  20 +
 .../src/main/license/src/licenses/LICENSE-nvd3.txt |  10 +
 hadoop-ozone/pom.xml                               |   1 +
 pom.ozone.xml                                      |   2 +-
 52 files changed, 10144 insertions(+), 224 deletions(-)

commit b2c332d3e4aa214d9c4b4bfce278fb8c4f998ff5
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Thu Aug 29 18:01:21 2019 +0200

    HDDS-1413. Attempt to fix TestCloseContainerCommandHandler by adjusting timeouts
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../TestCloseContainerCommandHandler.java          | 410 +++++++--------------
 1 file changed, 143 insertions(+), 267 deletions(-)

commit 56811f2afe2eff9f8a189e0335987750caf87f43
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Tue Aug 27 15:55:47 2019 +0200

    HDDS-2042. Avoid log on console with Ozone shell
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-ozone/common/src/main/bin/ozone             |  3 ++
 .../dist/dev-support/bin/dist-layout-stitching     |  1 +
 .../src/main/conf/ozone-shell-log4j.properties     | 33 ++++++++++++++++++++++
 .../src/main/smoketest/basic/ozone-shell.robot     |  1 -
 .../dist/src/main/smoketest/createbucketenv.robot  |  1 -
 .../dist/src/main/smoketest/createmrenv.robot      |  1 -
 6 files changed, 37 insertions(+), 3 deletions(-)

commit e3caa4535bbd18e2ebd0996f5f5fcc310248168e
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Fri Aug 30 21:31:52 2019 +0200

    HDDS-2061. Add hdds.container.chunk.persistdata as exception to TestOzoneConfigurationFields (#1382)

 .../hadoop/ozone/TestOzoneConfigurationFields.java     | 18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)

commit a27c888962c1f0cec9fe8220edbfaa0e130a531b
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Fri Aug 30 21:23:25 2019 +0200

    HDDS-2063. Integration tests create untracked file audit.log (#1384)

 .../hadoop/ozone/client/rpc/TestOzoneRpcClientForAclAuditLog.java       | 2 +-
 .../src/test/resources/{log4j2.properties => auditlog.properties}       | 0
 2 files changed, 1 insertion(+), 1 deletion(-)

commit 8124d3f40ff17eafa8b585617ced33a3013d4560
Author: dineshchitlangia <dineshchitlangia@gmail.com>
Date:   Fri Aug 30 12:55:36 2019 -0400

    HDDS-2014. Create Symmetric Key for GDPR (#1362)

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  9 +++
 .../hadoop/ozone/security/GDPRSymmetricKey.java    | 81 ++++++++++++++++++++++
 .../ozone/security/TestGDPRSymmetricKey.java       | 66 ++++++++++++++++++
 3 files changed, 156 insertions(+)

commit 927260c4b0c073b8967afe096a3b240e91b088f6
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Aug 30 09:27:37 2019 -0700

    HDDS-2047. Datanodes fail to come up after 10 retries in a secure env… (#1379)

 .../java/org/apache/hadoop/hdds/HddsUtils.java     | 15 ++++++++----
 .../apache/hadoop/ozone/HddsDatanodeService.java   |  3 +--
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 28 +---------------------
 3 files changed, 13 insertions(+), 33 deletions(-)

commit b7353f6c7eb53b729dbebf92fcbb9c4cc27d3197
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Aug 30 10:19:19 2019 +0200

    HDDS-2058. Remove hadoop dependencies in ozone build
    
    Closes #1376

 hadoop-hdds/common/pom.xml                         |    3 -
 hadoop-hdds/common/src/main/bin/hadoop-config.cmd  |  317 +++
 hadoop-hdds/common/src/main/bin/hadoop-config.sh   |  165 ++
 hadoop-hdds/common/src/main/bin/hadoop-daemons.sh  |   77 +
 .../common/src/main/bin/hadoop-functions.sh        | 2732 ++++++++++++++++++++
 hadoop-hdds/common/src/main/bin/workers.sh         |   59 +
 hadoop-hdds/common/src/main/conf/core-site.xml     |   20 +
 hadoop-hdds/common/src/main/conf/hadoop-env.cmd    |   90 +
 hadoop-hdds/common/src/main/conf/hadoop-env.sh     |  439 ++++
 .../src/main/conf/hadoop-metrics2.properties       |   99 +
 hadoop-hdds/common/src/main/conf/hadoop-policy.xml |  275 ++
 hadoop-hdds/common/src/main/proto/FSProtos.proto   |   78 +
 hadoop-hdds/common/src/main/proto/Security.proto   |   73 +
 hadoop-ozone/assemblies/pom.xml                    |   82 +
 .../src/main/resources/assemblies/ozone-src.xml    |   67 +
 hadoop-ozone/common/pom.xml                        |    3 -
 .../dist/dev-support/bin/dist-layout-stitching     |   12 +-
 .../dist/dev-support/bin/dist-tar-stitching        |    6 +-
 pom.ozone.xml                                      |   76 +-
 19 files changed, 4587 insertions(+), 86 deletions(-)

commit c58b7509f2934f30b02c386ae98c6ba844e9194f
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Aug 30 02:07:55 2019 +0200

    HDDS-1935. Improve the visibility with Ozone Insight tool (#1255)

 .../ozone/protocolPB/ProtocolMessageMetrics.java   | 105 ++++++++++++
 ...lockLocationProtocolServerSideTranslatorPB.java | 108 +++++++-----
 .../common/src/main/resources/ozone-default.xml    |   2 +-
 .../hadoop/hdds/conf/ConfigFileGenerator.java      |  16 +-
 .../apache/hadoop/hdds/server/BaseHttpServer.java  |   4 +-
 .../hadoop/hdds/server/LogStreamServlet.java       |  58 +++++++
 .../hadoop/hdds/server/PrometheusMetricsSink.java  |   4 +
 .../hadoop/hdds/server/events/EventQueue.java      |  18 +-
 .../hdds/scm/container/ReplicationManager.java     | 104 +++++++++---
 .../hadoop/hdds/scm/node/NodeReportHandler.java    |   1 -
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  78 ++++-----
 .../hdds/scm/server/SCMBlockProtocolServer.java    |  51 +++---
 .../scm/server/TestSCMBlockProtocolServer.java     |   8 +-
 hadoop-ozone/common/src/main/bin/ozone             |   6 +
 hadoop-ozone/dev-support/intellij/ozone-site.xml   |   4 +
 hadoop-ozone/dist/pom.xml                          |  12 ++
 .../insight/dev-support/findbugsExcludeFile.xml    |  19 +++
 hadoop-ozone/insight/pom.xml                       | 132 +++++++++++++++
 .../hadoop/ozone/insight/BaseInsightPoint.java     | 188 +++++++++++++++++++++
 .../ozone/insight/BaseInsightSubCommand.java       | 101 +++++++++++
 .../org/apache/hadoop/ozone/insight/Component.java | 116 +++++++++++++
 .../ozone/insight/ConfigurationSubCommand.java     |  89 ++++++++++
 .../org/apache/hadoop/ozone/insight/Insight.java   |  41 +++++
 .../apache/hadoop/ozone/insight/InsightPoint.java  |  49 ++++++
 .../hadoop/ozone/insight/ListSubCommand.java       |  59 +++++++
 .../apache/hadoop/ozone/insight/LogSubcommand.java | 167 ++++++++++++++++++
 .../apache/hadoop/ozone/insight/LoggerSource.java  |  72 ++++++++
 .../apache/hadoop/ozone/insight/MetricDisplay.java |  69 ++++++++
 .../hadoop/ozone/insight/MetricGroupDisplay.java   |  69 ++++++++
 .../hadoop/ozone/insight/MetricsSubCommand.java    | 132 +++++++++++++++
 .../ozone/insight/datanode/RatisInsight.java       |  75 ++++++++
 .../ozone/insight/datanode/package-info.java       |  23 +++
 .../hadoop/ozone/insight/om/KeyManagerInsight.java |  78 +++++++++
 .../hadoop/ozone/insight/om/OmProtocolInsight.java |  67 ++++++++
 .../hadoop/ozone/insight/om/package-info.java      |  23 +++
 .../apache/hadoop/ozone/insight/package-info.java  |  24 +++
 .../ozone/insight/scm/EventQueueInsight.java       |  47 ++++++
 .../ozone/insight/scm/NodeManagerInsight.java      |  74 ++++++++
 .../ozone/insight/scm/ReplicaManagerInsight.java   |  60 +++++++
 .../scm/ScmProtocolBlockLocationInsight.java       |  71 ++++++++
 .../hadoop/ozone/insight/scm/package-info.java     |  23 +++
 .../hadoop/ozone/insight/LogSubcommandTest.java    |  41 +++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  25 ++-
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  93 ++++++----
 hadoop-ozone/pom.xml                               |   6 +
 45 files changed, 2431 insertions(+), 181 deletions(-)

commit 5ba7a4842f5739b5915c5501fb9999cc326daa1c
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Thu Aug 29 16:57:02 2019 -0700

    HDDS-2050. Error while compiling ozone-recon-web (#1374)

 .../webapps/recon/ozone-recon-web/package.json     |    2 +
 .../src/components/Breadcrumbs/Breadcrumbs.tsx     |    2 +-
 .../src/components/NavBar/NavBar.tsx               |    2 +-
 .../webapps/recon/ozone-recon-web/yarn.lock        | 4846 +++++++++++++-------
 4 files changed, 3165 insertions(+), 1687 deletions(-)

commit d0b26af7238166150962c1dceb7fdc876a808db5
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Thu Aug 29 09:46:50 2019 +0200

    HDDS-2045. Partially started compose cluster left running
    
    Closes #1358

 hadoop-ozone/dist/src/main/compose/testlib.sh | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit df10e07659e77dde40f49efc477a02a383474bbc
Author: Márton Elek <elek@apache.org>
Date:   Thu Aug 29 09:25:03 2019 +0200

    Revert "HDDS-1596. Create service endpoint to download configuration from SCM."
    
    This reverts commit c0499bd70455e67bef9a1e00da73e25c9e2cc0ff.

 .../hadoop/hdds/conf/OzoneConfiguration.java       | 30 +-------
 .../hadoop/hdds/discovery/DiscoveryUtil.java       | 90 ----------------------
 .../apache/hadoop/hdds/discovery/package-info.java | 22 ------
 .../apache/hadoop/ozone/HddsDatanodeService.java   |  8 +-
 .../apache/hadoop/hdds/server/BaseHttpServer.java  | 13 ----
 .../org/apache/hadoop/hdds/server/ServerUtils.java | 12 +--
 .../apache/hadoop/hdds/server/TestServerUtils.java | 17 ----
 hadoop-hdds/pom.xml                                | 21 -----
 hadoop-hdds/server-scm/pom.xml                     | 18 -----
 .../hdds/discovery/ConfigurationEndpoint.java      | 60 ---------------
 .../hadoop/hdds/discovery/ConfigurationXml.java    | 44 -----------
 .../hdds/discovery/ConfigurationXmlEntry.java      | 56 --------------
 .../hdds/discovery/DiscoveryApplication.java       | 35 ---------
 .../apache/hadoop/hdds/discovery/package-info.java | 22 ------
 .../hdds/scm/server/SCMBlockProtocolServer.java    |  9 +--
 .../server/StorageContainerManagerHttpServer.java  | 15 +---
 .../scm/server/StorageContainerManagerStarter.java |  5 --
 .../src/main/compose/ozone/docker-compose.yaml     | 19 +----
 .../dist/src/main/compose/ozone/docker-config      | 15 +++-
 .../hadoop/ozone/om/OzoneManagerStarter.java       |  5 --
 hadoop-ozone/ozonefs/pom.xml                       |  6 --
 .../java/org/apache/hadoop/ozone/s3/Gateway.java   |  5 --
 22 files changed, 23 insertions(+), 504 deletions(-)

commit 350d03112d2cbe704c99926c30e8acfcff4028e3
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Aug 28 23:59:49 2019 +0200

    HDDS-1941. Unused executor in SimpleContainerDownloader (#1367)

 .../replication/SimpleContainerDownloader.java     | 22 ++--------------------
 1 file changed, 2 insertions(+), 20 deletions(-)

commit ef8b5de2b79f6f73173212bbc1a36ac93ab63bc8
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Aug 28 22:28:07 2019 +0200

    HDDS-2051. Rat check failure in decommissioning.md (#1372)

 hadoop-hdds/docs/content/design/decommissioning.md | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit 51ecdd5e38de295b2eb45de0c5d30263aaae58cf
Author: Márton Elek <elek@apache.org>
Date:   Sun Aug 11 14:32:00 2019 +0200

    HDDS-1950. S3 MPU part-list call fails if there are no parts
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  24 ++++-
 .../apache/hadoop/ozone/om/TestKeyManagerUnit.java | 111 +++++++++++++++++++++
 2 files changed, 133 insertions(+), 2 deletions(-)

commit d09b510abc9db1b7b9d74cb7c3a141f7786411cb
Author: Márton Elek <elek@apache.org>
Date:   Sun Aug 11 14:45:02 2019 +0200

    HDDS-1942. Support copy during S3 multipart upload part creation
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../src/main/smoketest/s3/MultipartUpload.robot    |  52 +++++
 .../hadoop/ozone/s3/endpoint/CopyPartResult.java   |  69 ++++++
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   |  79 +++++--
 .../org/apache/hadoop/ozone/s3/util/S3Consts.java  |   2 +
 .../hadoop/ozone/client/OzoneBucketStub.java       |  15 +-
 .../s3/endpoint/TestMultipartUploadWithCopy.java   | 233 +++++++++++++++++++++
 .../ozone/s3/endpoint/TestObjectEndpoint.java      |  53 +++++
 7 files changed, 483 insertions(+), 20 deletions(-)

commit 3fe9f698468a7e7396d25c9baf294a3478dbd75c
Author: Márton Elek <elek@apache.org>
Date:   Sat Aug 24 21:19:36 2019 +0200

    HDDS-1937. Acceptance tests fail if scm webui shows invalid json
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-ozone/dist/src/main/compose/testlib.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a86add30297df42312f6eb1c4b9c6ca6f90aad39
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Wed Aug 28 19:19:03 2019 +0200

    HDDS-1881. Design doc: decommissioning in Ozone (#1196)
    
    * Address comments from Anu
     * In-flight calculation is removed from the base model
     * Throttling is mentioned but will be discussed in a separated document
     * Model is improved to handle the over-replication in a specific way
     (to handle Nanda's use-case)
     * Stop conditions are defined independently from the model
     * Style of the table fragments are improved
    * typo fix (thx to sodonnell)
    * remove white spaces from the end of the lines
    * example is restored
    * minor whitespace improvement to support pdf conversion

 hadoop-hdds/docs/content/design/decommissioning.md | 610 +++++++++++++++++++++
 1 file changed, 610 insertions(+)

commit 005cb01b4345a174c2050e1b771f1924c3164624
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Wed Aug 28 22:35:20 2019 +0530

    HDDS-1094. Performance test infrastructure : skip writing user data on Datanode. Contributed by Supratim Deka (#1323)

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   6 +
 .../ozone/container/keyvalue/KeyValueHandler.java  |   4 +-
 .../keyvalue/impl/ChunkManagerDummyImpl.java       | 162 +++++++++++++++++++++
 .../keyvalue/impl/ChunkManagerFactory.java         |  90 ++++++++++++
 .../container/keyvalue/impl/ChunkManagerImpl.java  |  22 ++-
 .../hadoop/ozone/freon/RandomKeyGenerator.java     |  11 +-
 .../freon/TestDataValidateWithDummyContainers.java |  71 +++++++++
 7 files changed, 355 insertions(+), 11 deletions(-)

commit c580666bf556559306956d6ad56b67652bc1eb5f
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Aug 28 09:53:31 2019 -0700

    HDDS-738. Removing REST protocol support from OzoneClient.
    Contributed by Elek, Marton.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |    3 -
 .../common/src/main/resources/ozone-default.xml    |   15 +-
 .../apache/hadoop/ozone/client/OzoneBucket.java    |    2 +
 .../hadoop/ozone/client/OzoneClientException.java  |   41 +-
 .../hadoop/ozone/client/OzoneClientFactory.java    |  127 +-
 .../hadoop/ozone/client/OzoneClientUtils.java      |   91 --
 .../client/rest/DefaultRestServerSelector.java     |   36 -
 .../ozone/client/rest/OzoneExceptionMapper.java    |   45 -
 .../hadoop/ozone/client/rest/RestClient.java       | 1130 ---------------
 .../ozone/client/rest/RestServerSelector.java      |   40 -
 .../ozone/client/rest/exceptions/package-info.java |   22 -
 .../ozone/client/rest/headers/package-info.java    |   22 -
 .../hadoop/ozone/client/rest/package-info.java     |   23 -
 .../hadoop/ozone/client/rest/OzoneException.java   |  267 ----
 .../hadoop/ozone/client/rest/headers/Header.java   |   74 -
 .../ozone/client/rest/headers/package-info.java    |   22 -
 .../hadoop/ozone/client/rest/package-info.java     |   22 -
 .../ozone/client/rest/response/BucketInfo.java     |  248 ----
 .../hadoop/ozone/client/rest/response/KeyInfo.java |  236 ----
 .../ozone/client/rest/response/KeyInfoDetails.java |  118 --
 .../ozone/client/rest/response/KeyLocation.java    |   89 --
 .../ozone/client/rest/response/VolumeInfo.java     |  215 ---
 .../ozone/client/rest/response/VolumeOwner.java    |   61 -
 .../ozone/client/rest/response/package-info.java   |   24 -
 .../hadoop/ozone/om/helpers/ServiceInfo.java       |   23 -
 .../hadoop/ozone/web/handlers/BucketArgs.java      |  134 --
 .../apache/hadoop/ozone/web/handlers/KeyArgs.java  |  117 --
 .../apache/hadoop/ozone/web/handlers/ListArgs.java |  142 --
 .../apache/hadoop/ozone/web/handlers/UserArgs.java |  172 ---
 .../hadoop/ozone/web/handlers/VolumeArgs.java      |  143 --
 .../hadoop/ozone/web/handlers/package-info.java    |   22 -
 .../hadoop/ozone/web/request/OzoneQuota.java       |  214 ---
 .../hadoop/ozone/web/request/package-info.java     |   23 -
 .../hadoop/ozone/web/response/BucketInfo.java      |  335 -----
 .../apache/hadoop/ozone/web/response/KeyInfo.java  |  311 -----
 .../hadoop/ozone/web/response/KeyInfoDetails.java  |   80 --
 .../hadoop/ozone/web/response/KeyLocation.java     |   82 --
 .../hadoop/ozone/web/response/ListBuckets.java     |  154 ---
 .../apache/hadoop/ozone/web/response/ListKeys.java |  209 ---
 .../hadoop/ozone/web/response/ListVolumes.java     |  152 --
 .../hadoop/ozone/web/response/VolumeInfo.java      |  308 -----
 .../hadoop/ozone/web/response/VolumeOwner.java     |   60 -
 .../hadoop/ozone/web/response/package-info.java    |   23 -
 .../apache/hadoop/ozone/web/TestBucketInfo.java    |   82 --
 .../org/apache/hadoop/ozone/web/TestQuota.java     |  115 --
 .../org/apache/hadoop/ozone/web/TestUtils.java     |  101 --
 .../apache/hadoop/ozone/web/TestVolumeStructs.java |   73 -
 hadoop-ozone/datanode/pom.xml                      |    4 -
 .../dist/dev-support/bin/dist-layout-stitching     |    4 -
 .../src/main/smoketest/basic/ozone-shell.robot     |   43 +-
 .../dist/src/main/smoketest/ozonefs/ozonefs.robot  |   18 +-
 hadoop-ozone/integration-test/pom.xml              |    4 -
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |    9 -
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   16 -
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |   26 +-
 .../java/org/apache/hadoop/ozone/TestDataUtil.java |   95 ++
 .../org/apache/hadoop/ozone/TestOzoneHelper.java   |  413 ------
 .../ozone/TestStorageContainerManagerHelper.java   |   72 +-
 .../client/rpc/TestOzoneRpcClientAbstract.java     |   42 +-
 .../commandhandler/TestBlockDeletion.java          |    3 +-
 .../commandhandler/TestCloseContainerHandler.java  |   22 +-
 .../ozone/om/TestMultipleContainerReadWrite.java   |  208 ---
 .../org/apache/hadoop/ozone/om/TestOmAcls.java     |   93 +-
 .../hadoop/ozone/om/TestOmBlockVersioning.java     |   93 +-
 .../org/apache/hadoop/ozone/om/TestOmInit.java     |   18 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   | 1449 --------------------
 .../hadoop/ozone/om/TestOzoneManagerRestart.java   |   28 +-
 .../ozone/ozShell/TestOzoneDatanodeShell.java      |   28 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 1266 -----------------
 .../ozone/web/TestOzoneRestWithMiniCluster.java    |  221 ---
 .../apache/hadoop/ozone/web/TestOzoneVolumes.java  |  187 ---
 .../hadoop/ozone/web/TestOzoneWebAccess.java       |  118 --
 .../hadoop/ozone/web/client/TestBuckets.java       |  349 -----
 .../hadoop/ozone/web/client/TestBucketsRatis.java  |  108 --
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  734 ----------
 .../hadoop/ozone/web/client/TestKeysRatis.java     |  126 --
 .../hadoop/ozone/web/client/TestOzoneClient.java   |  304 ----
 .../apache/hadoop/ozone/web/client/TestVolume.java |  381 -----
 .../hadoop/ozone/web/client/TestVolumeRatis.java   |  155 ---
 .../hadoop/ozone/web/client/package-info.java      |   22 -
 .../org/apache/hadoop/ozone/web/package-info.java  |   22 -
 hadoop-ozone/objectstore-service/pom.xml           |  126 --
 .../hdfs/server/datanode/ObjectStoreHandler.java   |  160 ---
 .../hadoop/hdfs/server/datanode/package-info.java  |   22 -
 .../org/apache/hadoop/ozone/OzoneRestUtils.java    |  222 ---
 .../java/org/apache/hadoop/ozone/package-info.java |   22 -
 .../hadoop/ozone/web/ObjectStoreApplication.java   |   59 -
 .../hadoop/ozone/web/OzoneHddsDatanodeService.java |   89 --
 .../hadoop/ozone/web/exceptions/ErrorTable.java    |  225 ---
 .../hadoop/ozone/web/exceptions/package-info.java  |   22 -
 .../hadoop/ozone/web/handlers/BucketHandler.java   |  190 ---
 .../ozone/web/handlers/BucketProcessTemplate.java  |  294 ----
 .../hadoop/ozone/web/handlers/KeyHandler.java      |  302 ----
 .../ozone/web/handlers/KeyProcessTemplate.java     |  235 ----
 .../hadoop/ozone/web/handlers/ServiceFilter.java   |   61 -
 .../ozone/web/handlers/StorageHandlerBuilder.java  |   80 --
 .../ozone/web/handlers/UserHandlerBuilder.java     |   75 -
 .../hadoop/ozone/web/handlers/VolumeHandler.java   |  274 ----
 .../ozone/web/handlers/VolumeProcessTemplate.java  |  276 ----
 .../hadoop/ozone/web/handlers/package-info.java    |   22 -
 .../hadoop/ozone/web/interfaces/Accounting.java    |   57 -
 .../apache/hadoop/ozone/web/interfaces/Bucket.java |  184 ---
 .../apache/hadoop/ozone/web/interfaces/Keys.java   |  177 ---
 .../ozone/web/interfaces/StorageHandler.java       |  308 -----
 .../hadoop/ozone/web/interfaces/UserAuth.java      |  101 --
 .../apache/hadoop/ozone/web/interfaces/Volume.java |  185 ---
 .../hadoop/ozone/web/interfaces/package-info.java  |   22 -
 .../ozone/web/localstorage/package-info.java       |   18 -
 .../LengthInputStreamMessageBodyWriter.java        |   59 -
 .../web/messages/StringMessageBodyWriter.java      |   62 -
 .../hadoop/ozone/web/messages/package-info.java    |   18 -
 .../ozone/web/netty/CloseableCleanupListener.java  |   46 -
 .../ozone/web/netty/ObjectStoreChannelHandler.java |   78 --
 .../web/netty/ObjectStoreJerseyContainer.java      |  348 -----
 .../netty/ObjectStoreJerseyContainerProvider.java  |   40 -
 .../ozone/web/netty/ObjectStoreRestHttpServer.java |  215 ---
 .../ozone/web/netty/ObjectStoreURLDispatcher.java  |   61 -
 .../RequestContentObjectStoreChannelHandler.java   |  117 --
 .../RequestDispatchObjectStoreChannelHandler.java  |  103 --
 .../hadoop/ozone/web/netty/package-info.java       |   26 -
 .../org/apache/hadoop/ozone/web/package-info.java  |   22 -
 .../web/storage/DistributedStorageHandler.java     |  620 ---------
 .../hadoop/ozone/web/storage/package-info.java     |   27 -
 .../apache/hadoop/ozone/web/userauth/Simple.java   |  169 ---
 .../hadoop/ozone/web/userauth/package-info.java    |   23 -
 .../com.sun.jersey.spi.container.ContainerProvider |   16 -
 .../org/apache/hadoop/ozone/web/TestErrorCode.java |   53 -
 .../org/apache/hadoop/ozone/web/package-info.java  |   22 -
 .../hadoop/ozone/web/ozShell/ObjectPrinter.java}   |   24 +-
 .../hadoop/ozone/web/ozShell/OzoneAddress.java     |   21 +-
 .../web/ozShell/bucket/CreateBucketHandler.java    |   10 +-
 .../web/ozShell/bucket/InfoBucketHandler.java      |    7 +-
 .../web/ozShell/bucket/ListBucketHandler.java      |   20 +-
 .../ozone/web/ozShell/keys/InfoKeyHandler.java     |    6 +-
 .../ozone/web/ozShell/keys/ListKeyHandler.java     |   23 +-
 .../web/ozShell/volume/CreateVolumeHandler.java    |    6 +-
 .../web/ozShell/volume/InfoVolumeHandler.java      |    6 +-
 .../web/ozShell/volume/ListVolumeHandler.java      |   21 +-
 .../web/ozShell/volume/UpdateVolumeHandler.java    |   14 +-
 .../ozone/web/ozShell/TestObjectPrinter.java       |   50 +
 .../hadoop/ozone/web/ozShell/TestOzoneAddress.java |    7 +-
 hadoop-ozone/ozonefs/pom.xml                       |    5 -
 .../hadoop/fs/ozone/TestOzoneFSInputStream.java    |   44 +-
 .../hadoop/fs/ozone/TestOzoneFileInterfaces.java   |   77 +-
 .../hadoop/fs/ozone/TestOzoneFileSystem.java       |   74 +-
 .../hadoop/fs/ozone/TestOzoneFsRenameDir.java      |   35 +-
 .../hadoop/fs/ozone/contract/OzoneContract.java    |   42 +-
 hadoop-ozone/pom.xml                               |    6 -
 .../hadoop/ozone/s3/TestOzoneClientProducer.java   |   25 +-
 .../org/apache/hadoop/ozone/om/TestOmSQLCli.java   |   92 +-
 150 files changed, 558 insertions(+), 18719 deletions(-)

commit 42e8845e3a475c8021558336045f5a514a4c7422
Author: Márton Elek <elek@apache.org>
Date:   Mon Aug 12 13:00:38 2019 +0200

    HDDS-1596. Create service endpoint to download configuration from SCM.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../hadoop/hdds/conf/OzoneConfiguration.java       | 30 +++++++-
 .../hadoop/hdds/discovery/DiscoveryUtil.java       | 90 ++++++++++++++++++++++
 .../apache/hadoop/hdds/discovery/package-info.java | 22 ++++++
 .../apache/hadoop/ozone/HddsDatanodeService.java   |  8 +-
 .../apache/hadoop/hdds/server/BaseHttpServer.java  | 13 ++++
 .../org/apache/hadoop/hdds/server/ServerUtils.java | 12 ++-
 .../apache/hadoop/hdds/server/TestServerUtils.java | 17 ++++
 hadoop-hdds/pom.xml                                | 21 +++++
 hadoop-hdds/server-scm/pom.xml                     | 18 +++++
 .../hdds/discovery/ConfigurationEndpoint.java      | 60 +++++++++++++++
 .../hadoop/hdds/discovery/ConfigurationXml.java    | 44 +++++++++++
 .../hdds/discovery/ConfigurationXmlEntry.java      | 56 ++++++++++++++
 .../hdds/discovery/DiscoveryApplication.java       | 35 +++++++++
 .../apache/hadoop/hdds/discovery/package-info.java | 22 ++++++
 .../hdds/scm/server/SCMBlockProtocolServer.java    |  9 ++-
 .../server/StorageContainerManagerHttpServer.java  | 15 +++-
 .../scm/server/StorageContainerManagerStarter.java |  5 ++
 .../src/main/compose/ozone/docker-compose.yaml     | 19 ++++-
 .../dist/src/main/compose/ozone/docker-config      | 15 +---
 .../hadoop/ozone/om/OzoneManagerStarter.java       |  5 ++
 hadoop-ozone/ozonefs/pom.xml                       |  6 ++
 .../java/org/apache/hadoop/ozone/s3/Gateway.java   |  5 ++
 22 files changed, 504 insertions(+), 23 deletions(-)

commit d8dbc1ecbc8beb93797666be06792986cf7b1187
Author: bshashikant <31469764+bshashikant@users.noreply.github.com>
Date:   Wed Aug 28 10:54:44 2019 +0530

    HDDS-1753. Datanode unable to find chunk while replication data using ratis. (#1318)

 .../org/apache/hadoop/hdds/ratis/RatisHelper.java  |   6 +
 .../ozone/container/common/impl/ContainerData.java |   5 +
 .../ozone/container/common/impl/ContainerSet.java  |  21 +-
 .../commandhandler/CommandDispatcher.java          |   6 +
 .../common/transport/server/ratis/CSMMetrics.java  |   5 +
 .../server/ratis/ContainerStateMachine.java        |  27 +-
 .../transport/server/ratis/XceiverServerRatis.java |  48 ++--
 .../ozone/container/keyvalue/KeyValueHandler.java  |  28 +-
 .../container/keyvalue/impl/ChunkManagerImpl.java  |   3 +-
 .../background/BlockDeletingService.java           |  92 ++++++-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  19 +-
 .../testutils/BlockDeletingServiceTestImpl.java    |   9 +-
 .../client/rpc/TestDeleteWithSlowFollower.java     | 291 +++++++++++++++++++++
 .../ozone/container/ContainerTestHelper.java       |  33 ++-
 .../container/common/TestBlockDeletingService.java |  34 ++-
 .../impl/TestContainerDeletionChoosingPolicy.java  |  36 ++-
 .../commandhandler/TestBlockDeletion.java          |  12 +
 17 files changed, 564 insertions(+), 111 deletions(-)

commit cfd1691b737b0fe1cf98aa2f1f1c8f2f3ad42566
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Tue Aug 27 17:29:27 2019 -0700

    HDDS-1946. CertificateClient should not persist keys/certs to ozone.m… (#1311)

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |   7 +-
 .../hadoop/hdds/security/x509/SecurityConfig.java  | 102 +++++++++++++-------
 .../certificate/client/DNCertificateClient.java    |   8 +-
 .../client/DefaultCertificateClient.java           |  21 +++--
 .../certificate/client/OMCertificateClient.java    |   6 +-
 .../x509/certificate/utils/CertificateCodec.java   |  25 +----
 .../hadoop/hdds/security/x509/keys/KeyCodec.java   |  26 +----
 .../client/TestCertificateClientInit.java          |  63 ++++++++-----
 .../client/TestDefaultCertificateClient.java       | 105 ++++++++++++---------
 .../certificate/utils/TestCertificateCodec.java    |  10 +-
 .../hdds/security/x509/keys/TestKeyCodec.java      |  18 ++--
 .../common/transport/server/XceiverServerGrpc.java |   8 +-
 .../hadoop/ozone/TestHddsSecureDatanodeInit.java   |  17 ++--
 .../hadoop/ozone/TestSecureOzoneCluster.java       |   4 +-
 .../hadoop/ozone/om/TestSecureOzoneManager.java    |  14 +--
 15 files changed, 241 insertions(+), 193 deletions(-)

commit 2d359f76b8cacba870201795f7b5ed59804eac3e
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Aug 26 20:30:56 2019 +0530

    HDDS-2037. Fix hadoop version in pom.ozone.xml.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-hdds/pom.xml              | 6 ++++++
 hadoop-hdds/server-scm/pom.xml   | 4 ----
 hadoop-ozone/ozone-recon/pom.xml | 2 +-
 pom.ozone.xml                    | 2 +-
 4 files changed, 8 insertions(+), 6 deletions(-)

commit 4accba442aa2a0c8c6f01b9e02ee97de294e46c8
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Mon Aug 26 12:59:47 2019 +0200

    HDDS-2026. Overlapping chunk region cannot be read concurrently
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../container/keyvalue/helpers/ChunkUtils.java     | 188 +++++++++++----------
 .../container/keyvalue/helpers/TestChunkUtils.java | 164 ++++++++++++++++++
 2 files changed, 267 insertions(+), 85 deletions(-)

commit eb4189699b98b8e609fb695012e29697a3d80ddd
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Aug 27 23:38:43 2019 +0530

    HDDS-1610. applyTransaction failure should not be lost on restart. Contributed by Shashikant Banerjee(#1226).

 .../server/ratis/ContainerStateMachine.java        |  84 +++++++----
 .../transport/server/ratis/XceiverServerRatis.java |   9 ++
 .../proto/StorageContainerDatanodeProtocol.proto   |   1 +
 .../rpc/TestContainerStateMachineFailures.java     | 156 +++++++++++++++------
 .../ozone/container/ContainerTestHelper.java       |  16 +++
 .../freon/TestFreonWithDatanodeFastRestart.java    |  17 +--
 6 files changed, 205 insertions(+), 78 deletions(-)

commit 8a857f333e8855e74541d8c1e51c36e4e6dd6ba1
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Aug 27 23:23:44 2019 +0530

    Revert "HDDS-1610. applyTransaction failure should not be lost on restart. Contributed by Shashikant Banerjee."
    
    This reverts commit 62445021d5d57b0d49adcb1bd4365c13532328fc as it has unintended changes in DirectoryWithSnapshotFeature class..

 .../server/ratis/ContainerStateMachine.java        |  84 ++++-------
 .../transport/server/ratis/XceiverServerRatis.java |   9 --
 .../proto/StorageContainerDatanodeProtocol.proto   |   1 -
 .../rpc/TestContainerStateMachineFailures.java     | 156 ++++++---------------
 .../ozone/container/ContainerTestHelper.java       |  16 ---
 .../freon/TestFreonWithDatanodeFastRestart.java    |  17 ++-
 6 files changed, 78 insertions(+), 205 deletions(-)

commit 3355d37ecfc8dcaa37d351b4df0ea092a1dfe677
Author: HUAN-PING SU <pingsutw@gmail.com>
Date:   Tue Aug 27 14:28:23 2019 +0800

    HDDS-1998. TestSecureContainerServer#testClientServerRatisGrpc is failing (#1328)

 .../ozone/container/server/TestSecureContainerServer.java     | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

commit 9316b5c6d2e9a03282da3f7a8f78abd776d25e93
Author: Lokesh Jain <ljain@apache.org>
Date:   Tue Aug 27 10:22:03 2019 +0530

    HDDS-1981: Datanode should sync db when container is moved to CLOSED or QUASI_CLOSED state (#1319)

 .../java/org/apache/hadoop/utils/LevelDBStore.java |  6 ++++
 .../org/apache/hadoop/utils/MetadataStore.java     |  6 ++++
 .../java/org/apache/hadoop/utils/RocksDBStore.java | 13 +++++++++
 .../src/main/proto/DatanodeContainerProtocol.proto |  1 +
 .../container/keyvalue/KeyValueContainer.java      | 34 +++++++++++++++++++---
 .../TestKeyValueContainerMarkUnhealthy.java        |  3 ++
 6 files changed, 59 insertions(+), 4 deletions(-)

commit 7355be82093fa9fbb0a258d720f4f47fe9769bb0
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Aug 26 11:05:40 2019 -0700

    HDDS-1975. Implement default acls for bucket/volume/key for OM HA code. (#1315)

 .../client/rpc/TestOzoneRpcClientAbstract.java     |   9 --
 .../hadoop/ozone/om/request/OMClientRequest.java   |   4 +-
 .../om/request/bucket/OMBucketCreateRequest.java   |  37 ++++++-
 .../om/request/file/OMDirectoryCreateRequest.java  |   8 +-
 .../ozone/om/request/file/OMFileCreateRequest.java |  14 +--
 .../om/request/key/OMAllocateBlockRequest.java     |   8 +-
 .../ozone/om/request/key/OMKeyCommitRequest.java   |   8 +-
 .../ozone/om/request/key/OMKeyCreateRequest.java   |  16 ++-
 .../ozone/om/request/key/OMKeyDeleteRequest.java   |   8 +-
 .../ozone/om/request/key/OMKeyRenameRequest.java   |   8 +-
 .../hadoop/ozone/om/request/key/OMKeyRequest.java  | 107 ++++++++++++++++++---
 .../request/s3/bucket/S3BucketCreateRequest.java   |  57 +++++++----
 .../request/s3/bucket/S3BucketDeleteRequest.java   |  10 +-
 .../S3InitiateMultipartUploadRequest.java          |  10 +-
 .../multipart/S3MultipartUploadAbortRequest.java   |  10 +-
 .../S3MultipartUploadCommitPartRequest.java        |  10 +-
 .../S3MultipartUploadCompleteRequest.java          |  10 +-
 17 files changed, 192 insertions(+), 142 deletions(-)

commit 5072d8b2c7e09220f0acc0d4a8b68373b0e29e6b
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Aug 21 22:47:41 2019 +0530

    HDDS-2002. Update documentation for 0.4.1 release.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-hdds/docs/content/beyond/Containers.md      |  65 +++++---
 .../docs/content/beyond/DockerCheatSheet.md        |   7 +-
 hadoop-hdds/docs/content/beyond/RunningWithHDFS.md |   2 +-
 hadoop-hdds/docs/content/concept/Datanodes.md      |   6 +-
 hadoop-hdds/docs/content/concept/Hdds.md           |   2 +-
 hadoop-hdds/docs/content/concept/Overview.md       |   6 +-
 hadoop-hdds/docs/content/concept/OzoneManager.md   |  20 +--
 hadoop-hdds/docs/content/interface/JavaApi.md      |   8 +-
 hadoop-hdds/docs/content/interface/OzoneFS.md      |   8 +-
 hadoop-hdds/docs/content/interface/S3.md           |  18 +--
 hadoop-hdds/docs/content/recipe/Prometheus.md      |  22 +--
 hadoop-hdds/docs/content/recipe/SparkOzoneFSK8S.md |  38 +++--
 hadoop-hdds/docs/content/recipe/_index.md          |   3 +-
 .../docs/content/security/SecuityWithRanger.md     |   4 +-
 hadoop-hdds/docs/content/security/SecureOzone.md   | 169 +++++++++++----------
 .../docs/content/security/SecuringDatanodes.md     |  13 +-
 hadoop-hdds/docs/content/security/SecuringS3.md    |   6 +-
 hadoop-hdds/docs/content/security/SecuringTDE.md   |   5 +-
 hadoop-hdds/docs/content/security/SecurityAcls.md  |  35 ++---
 hadoop-hdds/docs/content/shell/BucketCommands.md   |  30 +---
 hadoop-hdds/docs/content/shell/KeyCommands.md      |  24 ++-
 hadoop-hdds/docs/content/shell/VolumeCommands.md   |  20 ++-
 hadoop-hdds/docs/content/start/Kubernetes.md       |   2 +-
 hadoop-hdds/docs/content/start/OnPrem.md           |   7 +-
 .../docs/content/start/StartFromDockerHub.md       |   7 +-
 25 files changed, 269 insertions(+), 258 deletions(-)

commit f1d8c6e17cf5dc93a2cde85e9cbb917f8bec64ea
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Aug 23 13:19:13 2019 -0700

    HDDS-1827. Load Snapshot info when OM Ratis server starts. (#1130)

 .../ozone/om/protocol/OzoneManagerHAProtocol.java  |   3 +-
 .../hadoop/ozone/MiniOzoneHAClusterImpl.java       |  13 +-
 .../hadoop/ozone/om/TestOMRatisSnapshots.java      |   3 +-
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 108 ++++++++++++-
 .../ozone/om/snapshot/TestOMRatisSnapshotInfo.java |  65 ++++++++
 .../snapshot/TestOzoneManagerSnapshotProvider.java |   2 +-
 .../hadoop/ozone/om/OMDBCheckpointServlet.java     |   4 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  52 +++---
 .../hadoop/ozone/om/ratis/OMRatisSnapshotInfo.java | 180 +++++++++++++++++++++
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |  43 ++++-
 .../om/ratis/TestOzoneManagerRatisServer.java      |  30 +++-
 11 files changed, 447 insertions(+), 56 deletions(-)

commit 402db93872854063da2fabd9ceb547366d522ca6
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Aug 23 22:26:30 2019 +0530

    HDDS-1978. Create helper script to run blockade tests. (#1310)

 hadoop-ozone/dev-support/checks/blockade.sh        | 28 ++++++++++++++++++++++
 .../src/test/blockade/ozone/cluster.py             | 14 ++++++++---
 2 files changed, 39 insertions(+), 3 deletions(-)

commit a41d2185006eeb420c91b39c39ac6da72ad8d9df
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Fri Aug 23 12:32:40 2019 +0200

    HDDS-2024. rat.sh: grep: warning: recursive search of stdin
    
    Closes #1343

 hadoop-ozone/dev-support/checks/rat.sh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 8eafb724e85f9cb8782a9cbdf2683ce88cd1aba2
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Fri Aug 23 12:31:42 2019 +0200

    HDDS-2023. Fix rat check failures in trunk (addendum)

 hadoop-hdds/docs/pom.xml | 2 +-
 hadoop-hdds/pom.xml      | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit b8dcd9d122b51599e2514114bec89cab95cc2ce3
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Fri Aug 23 12:02:45 2019 +0200

    HDDS-2023. Fix rat check failures in trunk
    
    Closes #1342

 .../org/apache/hadoop/utils/db/cache/CacheResult.java  | 18 ++++++++++++++++++
 hadoop-hdds/pom.xml                                    |  2 +-
 .../apache/hadoop/ozone/util/BooleanBiFunction.java    | 18 ++++++++++++++++++
 .../compose/ozones3-haproxy/haproxy-conf/haproxy.cfg   | 16 ++++++++++++++++
 .../client/rpc/TestOzoneRpcClientForAclAuditLog.java   | 18 ++++++++++++++++++
 .../om/ratis/utils/OzoneManagerDoubleBufferHelper.java | 18 ++++++++++++++++++
 .../request/bucket/acl/OMBucketRemoveAclRequest.java   | 18 ++++++++++++++++++
 .../om/request/bucket/acl/OMBucketSetAclRequest.java   | 18 ++++++++++++++++++
 .../hadoop/ozone/om/request/key/OMKeyPurgeRequest.java | 18 ++++++++++++++++++
 .../s3/multipart/S3MultipartUploadCompleteRequest.java | 18 ++++++++++++++++++
 .../om/request/volume/acl/OMVolumeAclRequest.java      | 18 ++++++++++++++++++
 .../ozone/om/response/key/OMKeyPurgeResponse.java      | 18 ++++++++++++++++++
 .../multipart/S3MultipartUploadCompleteResponse.java   | 18 ++++++++++++++++++
 .../multipart/TestS3MultipartUploadAbortRequest.java   | 18 ++++++++++++++++++
 .../TestS3MultipartUploadCompleteRequest.java          | 18 ++++++++++++++++++
 .../response/s3/bucket/TestS3BucketDeleteResponse.java | 18 ++++++++++++++++++
 .../multipart/TestS3MultipartUploadAbortResponse.java  | 18 ++++++++++++++++++
 17 files changed, 287 insertions(+), 1 deletion(-)

commit 639c22f5436a4439c18a3eea80a30b6155f9d266
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Fri Aug 23 10:56:00 2019 +0200

    HDDS-2000. Don't depend on bootstrap/jquery versions from hadoop-trunk snapshot
    
    Closes #1339

 .../themes/ozonedoc/layouts/partials/footer.html   |    2 +-
 .../themes/ozonedoc/layouts/partials/navbar.html   |    7 +-
 .../ozonedoc/static/css/bootstrap-theme.min.css    |    6 +-
 .../static/css/bootstrap-theme.min.css.map         |    2 +-
 .../themes/ozonedoc/static/css/bootstrap.min.css   |    6 +-
 .../ozonedoc/static/css/bootstrap.min.css.map      |    2 +-
 .../themes/ozonedoc/static/js/bootstrap.min.js     |    7 +-
 .../themes/ozonedoc/static/js/jquery-3.4.1.min.js  |    2 +
 .../docs/themes/ozonedoc/static/js/jquery.min.js   |    5 -
 hadoop-hdds/framework/pom.xml                      |   27 -
 .../bootstrap-3.4.1/css/bootstrap-editable.css     |  655 ++
 .../static/bootstrap-3.4.1/css/bootstrap-theme.css |  587 ++
 .../bootstrap-3.4.1/css/bootstrap-theme.css.map    |    1 +
 .../bootstrap-3.4.1/css/bootstrap-theme.min.css    |    6 +
 .../css/bootstrap-theme.min.css.map                |    1 +
 .../static/bootstrap-3.4.1/css/bootstrap.css       | 6834 ++++++++++++++++++++
 .../static/bootstrap-3.4.1/css/bootstrap.css.map   |    1 +
 .../static/bootstrap-3.4.1/css/bootstrap.min.css   |    6 +
 .../bootstrap-3.4.1/css/bootstrap.min.css.map      |    1 +
 .../fonts/glyphicons-halflings-regular.eot         |  Bin 0 -> 20127 bytes
 .../fonts/glyphicons-halflings-regular.svg         |  288 +
 .../fonts/glyphicons-halflings-regular.ttf         |  Bin 0 -> 45404 bytes
 .../fonts/glyphicons-halflings-regular.woff        |  Bin 0 -> 23424 bytes
 .../fonts/glyphicons-halflings-regular.woff2       |  Bin 0 -> 18028 bytes
 .../bootstrap-3.4.1/js/bootstrap-editable.min.js   |    7 +
 .../webapps/static/bootstrap-3.4.1/js/bootstrap.js | 2580 ++++++++
 .../static/bootstrap-3.4.1/js/bootstrap.min.js     |    6 +
 .../src/main/resources/webapps/static/hadoop.css   |  331 +
 .../resources/webapps/static/jquery-3.4.1.min.js   |    2 +
 hadoop-hdds/pom.xml                                |    2 +
 hadoop-ozone/pom.xml                               |    4 +-
 31 files changed, 11330 insertions(+), 48 deletions(-)

commit 6ee319a2afc310b3519dec0939a904e605e5e5fc
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Aug 23 08:15:43 2019 +0200

    HDDS-1948. S3 MPU can't be created with octet-stream content-type  (#1266)

 .../apache/hadoop/ozone/s3/HeaderPreprocessor.java | 31 ++++++++++--
 .../hadoop/ozone/s3/S3GatewayHttpServer.java       |  5 ++
 .../hadoop/ozone/s3/VirtualHostStyleFilter.java    |  4 ++
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   | 56 ++++++++--------------
 .../s3/endpoint/TestAbortMultipartUpload.java      |  2 +-
 .../s3/endpoint/TestInitiateMultipartUpload.java   |  4 +-
 .../hadoop/ozone/s3/endpoint/TestListParts.java    |  2 +-
 .../s3/endpoint/TestMultipartUploadComplete.java   |  4 +-
 .../hadoop/ozone/s3/endpoint/TestPartUpload.java   |  4 +-
 9 files changed, 63 insertions(+), 49 deletions(-)

commit 938a5e621d7a7b39178ce3983d01b0ae3103a666
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Fri Aug 23 02:55:42 2019 +0200

    HDDS-1808. TestRatisPipelineCreateAndDestory times out (#1338)

 ...CreateAndDestory.java => TestRatisPipelineCreateAndDestroy.java} | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit f62c452a892695c47040077b1d55c8a18936c9d7
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Aug 22 15:00:17 2019 -0700

    HDDS-1347. In OM HA getS3Secret call Should happen only leader OM. (#670)

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 +
 .../org/apache/hadoop/ozone/audit/OMAction.java    |   4 +-
 .../hadoop/ozone/om/exceptions/OMException.java    |   5 +-
 .../src/main/proto/OzoneManagerProtocol.proto      |  14 ++
 .../hadoop/ozone/TestSecureOzoneCluster.java       |  12 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   8 +
 .../om/request/s3/security/S3GetSecretRequest.java | 193 +++++++++++++++++++++
 .../ozone/om/request/s3/security/package-info.java |  22 +++
 .../response/s3/security/S3GetSecretResponse.java  |  56 ++++++
 .../om/response/s3/security/package-info.java      |  22 +++
 10 files changed, 333 insertions(+), 4 deletions(-)

commit e4c7e6940da00d434ab0c9500c29089b252286e7
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Thu Aug 22 10:57:22 2019 -0700

    HDDS-2008 : Wrong package for RatisHelper class in hadoop-hdds/common module. (#1333)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientRatis.java  | 2 +-
 .../src/main/java/org/apache/{ => hadoop/hdds}/ratis/RatisHelper.java | 3 ++-
 .../main/java/org/apache/{ => hadoop/hdds}/ratis/package-info.java    | 2 +-
 .../container/common/transport/server/ratis/XceiverServerRatis.java   | 2 +-
 .../statemachine/commandhandler/TestCloseContainerCommandHandler.java | 2 +-
 .../org/apache/hadoop/hdds/scm/pipeline/RatisPipelineProvider.java    | 2 +-
 .../java/org/apache/hadoop/hdds/scm/pipeline/RatisPipelineUtils.java  | 2 +-
 .../src/test/java/org/apache/hadoop/ozone/RatisTestHelper.java        | 4 ++--
 8 files changed, 10 insertions(+), 9 deletions(-)

commit e1553e8df8d8cf9fefe5ee3b848d29c00f8113ea
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Aug 19 15:54:44 2019 -0700

    HDDS-1927. Consolidate add/remove Acl into OzoneAclUtil class. Contributed by Xiaoyu Yao.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |   5 +-
 .../java/org/apache/hadoop/ozone/OzoneAcl.java     |   5 +
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      |  76 +-----
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  | 147 ++---------
 .../hadoop/ozone/om/helpers/OmOzoneAclMap.java     |   7 +-
 .../hadoop/ozone/om/helpers/OmPrefixInfo.java      |  30 ++-
 .../hadoop/ozone/om/helpers/OzoneAclUtil.java      | 286 +++++++++++++++++++++
 .../apache/hadoop/ozone/web/utils/OzoneUtils.java  | 158 ------------
 .../hadoop/ozone/om/helpers/TestOzoneAclUtil.java  | 191 ++++++++++++++
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  15 +-
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java |   8 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |   3 +-
 .../security/acl/TestOzoneNativeAuthorizer.java    |   4 +-
 .../web/storage/DistributedStorageHandler.java     |   3 +-
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  91 +------
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 204 ++++-----------
 .../apache/hadoop/ozone/om/PrefixManagerImpl.java  | 186 ++++----------
 .../om/request/file/OMDirectoryCreateRequest.java  |  11 +-
 .../hadoop/ozone/om/request/key/OMKeyRequest.java  |  13 +-
 .../om/request/key/acl/OMKeyAddAclRequest.java     |   7 +-
 .../om/request/key/acl/OMKeyRemoveAclRequest.java  |   7 +-
 .../om/request/key/acl/OMKeySetAclRequest.java     |   9 +-
 .../S3InitiateMultipartUploadRequest.java          |   3 +-
 .../S3MultipartUploadCompleteRequest.java          |   4 +-
 .../protocolPB/OzoneManagerRequestHandler.java     |   5 +-
 25 files changed, 699 insertions(+), 779 deletions(-)

commit f6c4b24ac0bdbd829aed3cd92db31cb5f8ab8fa2
Author: Márton Elek <elek@apache.org>
Date:   Mon Jul 29 14:44:58 2019 +0200

    HDDS-1871. Remove anti-affinity rules from k8s minkube example
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../main/k8s/definitions/ozone/datanode-ss.yaml    |  6 +++---
 .../getting-started/datanode-statefulset.yaml      |  6 +++---
 .../examples/getting-started/om-statefulset.yaml   | 22 ++++++----------------
 .../examples/getting-started/s3g-statefulset.yaml  |  5 +++++
 .../examples/getting-started/scm-statefulset.yaml  |  4 ++++
 .../dist/src/main/k8s/examples/minikube/Flekszible |  9 +++++++++
 .../examples/minikube/datanode-statefulset.yaml    | 22 ++++++----------------
 .../main/k8s/examples/minikube/om-statefulset.yaml |  6 +++---
 .../k8s/examples/minikube/s3g-statefulset.yaml     |  6 +++---
 .../k8s/examples/minikube/scm-statefulset.yaml     | 12 ++++++------
 .../ozone-dev/csi/csi-ozone-clusterrole.yaml       |  2 +-
 .../csi/csi-ozone-clusterrolebinding.yaml          |  6 +++---
 .../ozone-dev/csi/csi-ozone-serviceaccount.yaml    |  2 +-
 .../examples/ozone-dev/datanode-statefulset.yaml   |  6 +++---
 .../examples/ozone-dev/prometheus-clusterrole.yaml |  2 +-
 .../prometheus-operator-clusterrolebinding.yaml    |  6 +++---
 .../examples/ozone/csi/csi-ozone-clusterrole.yaml  |  2 +-
 .../ozone/csi/csi-ozone-clusterrolebinding.yaml    |  6 +++---
 .../ozone/csi/csi-ozone-serviceaccount.yaml        |  2 +-
 .../k8s/examples/ozone/datanode-statefulset.yaml   |  6 +++---
 20 files changed, 68 insertions(+), 70 deletions(-)

commit a0f443d763b4c4698e822f320d56e61cdd0efb19
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Aug 21 21:16:14 2019 +0200

    HDDS-1999. Basic acceptance test and SCM/OM web UI broken by Bootstrap upgrade (#1327)

 hadoop-hdds/server-scm/src/main/resources/webapps/scm/index.html    | 6 +++---
 hadoop-ozone/dist/src/main/smoketest/basic/basic.robot              | 2 +-
 .../src/main/resources/webapps/ozoneManager/index.html              | 6 +++---
 hadoop-ozone/s3gateway/src/main/resources/browser.html              | 6 +++---
 hadoop-ozone/s3gateway/src/main/resources/webapps/static/index.html | 4 ++--
 5 files changed, 12 insertions(+), 12 deletions(-)

commit 618ecca2294af3056168f02b0b7adfb361031eb2
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Aug 21 12:01:27 2019 -0700

    HDDS-1973. Implement OM RenewDelegationToken request to use Cache and DoubleBuffer. (#1316)

 .../OzoneDelegationTokenSecretManager.java         |  24 ++-
 .../src/main/proto/OzoneManagerProtocol.proto      |  12 ++
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |   6 +
 .../security/OMRenewDelegationTokenRequest.java    | 164 +++++++++++++++++++++
 .../security/OMRenewDelegationTokenResponse.java   |  58 ++++++++
 .../OzoneManagerHARequestHandlerImpl.java          |   2 +
 6 files changed, 262 insertions(+), 4 deletions(-)

commit 5475a750ad18d86c54cf201a91280c823348f0bc
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Aug 20 16:44:20 2019 -0700

    HDDS-1965. Compile error due to leftover ScmBlockLocationTestIngClient file. (fix build)

 ...BlockLocationTestIngClient.java => ScmBlockLocationTestingClient.java} | 0
 1 file changed, 0 insertions(+), 0 deletions(-)

commit f762b5b21fdafbff3a9e73aa979a44598eb39a92
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Aug 20 16:14:12 2019 -0700

    Revert "HDDS-1965. Compile error due to leftover ScmBlockLocationTestIngClient file (#1293)"
    
    This reverts commit 83e452eceac63559c2f5146510ae3e89e310ac1e.

 .../ozone/om/ScmBlockLocationTestIngClient.java    | 195 +++++++++++++++++++++
 1 file changed, 195 insertions(+)

commit f585bd27459b610879972db24646998caa2c1f05
Author: Sunil G <sunilg@apache.org>
Date:   Tue Aug 20 18:42:19 2019 +0530

    HDFS-14729. Upgrade Bootstrap and jQuery versions used in HDFS UIs. Contributed by Vivek Ratnavel Subramanian. This closes #1297

 .../ozone/om/ScmBlockLocationTestingClient.java    | 195 ---------------------
 1 file changed, 195 deletions(-)

commit d9c57521e52108a3f536546067b913e1535d4927
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Aug 20 14:37:01 2019 +0530

    HDDS-1610. applyTransaction failure should not be lost on restart. Contributed by Shashikant Banerjee.

 .../server/ratis/ContainerStateMachine.java        |  84 +++++++----
 .../transport/server/ratis/XceiverServerRatis.java |   9 ++
 .../proto/StorageContainerDatanodeProtocol.proto   |   1 +
 .../rpc/TestContainerStateMachineFailures.java     | 156 +++++++++++++++------
 .../ozone/container/ContainerTestHelper.java       |  16 +++
 .../freon/TestFreonWithDatanodeFastRestart.java    |  17 +--
 6 files changed, 205 insertions(+), 78 deletions(-)

commit 9f33f464a26a1ed68a0b1a3dafd912684c9b57b7
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Aug 19 13:59:58 2019 -0700

    HDDS-1972. Provide example ha proxy with multiple s3 servers back end. (#1304)

 .../dist/src/main/compose/ozones3-haproxy/.env     | 18 +++++
 .../compose/ozones3-haproxy/docker-compose.yaml    | 83 ++++++++++++++++++++++
 .../src/main/compose/ozones3-haproxy/docker-config | 79 ++++++++++++++++++++
 .../ozones3-haproxy/haproxy-conf/haproxy.cfg       | 22 ++++++
 .../dist/src/main/compose/ozones3-haproxy/test.sh  | 30 ++++++++
 5 files changed, 232 insertions(+)

commit a6c00897fbda6064207f34be92babe1fc900b3ce
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Mon Aug 19 10:47:49 2019 -0700

    HDDS-1105 : Add mechanism in Recon to obtain DB snapshot 'delta' updates from Ozone Manager (#1259)

 .../apache/hadoop/utils/db/DBUpdatesWrapper.java   |   4 +
 .../apache/hadoop/utils/db/RDBBatchOperation.java  |   4 +
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  13 +
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  28 ++-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   1 +
 .../protocolPB/OzoneManagerRequestHandler.java     |   5 +-
 hadoop-ozone/ozone-recon/pom.xml                   |  24 --
 .../hadoop/ozone/recon/ReconControllerModule.java  |  36 ++-
 .../org/apache/hadoop/ozone/recon/ReconServer.java |  77 ++----
 .../hadoop/ozone/recon/ReconServerConfigKeys.java  |   2 +-
 .../hadoop/ozone/recon/ReconTaskBindingModule.java |  40 +++
 .../org/apache/hadoop/ozone/recon/ReconUtils.java  |  10 +-
 .../recon/spi/OzoneManagerServiceProvider.java     |  10 +-
 .../spi/impl/ContainerDBServiceProviderImpl.java   |   7 +-
 .../spi/impl/OzoneManagerServiceProviderImpl.java  | 216 +++++++++++++---
 .../recon/spi/impl/ReconContainerDBProvider.java   |  13 +-
 .../ozone/recon/tasks/ContainerKeyMapperTask.java  |  34 +--
 .../ozone/recon/tasks/FileSizeCountTask.java       |  36 ++-
 .../hadoop/ozone/recon/tasks/OMDBUpdateEvent.java  |  43 +---
 .../ozone/recon/tasks/OMDBUpdatesHandler.java      |   9 +-
 .../ozone/recon/tasks/OMUpdateEventBatch.java      |  16 +-
 .../ozone/recon/tasks/ReconDBUpdateTask.java       |  20 +-
 .../ozone/recon/tasks/ReconTaskController.java     |  25 +-
 .../ozone/recon/tasks/ReconTaskControllerImpl.java | 137 +++++++----
 .../ozone/recon/AbstractOMMetadataManagerTest.java |  15 +-
 .../apache/hadoop/ozone/recon/TestReconUtils.java  |   7 +-
 .../ozone/recon/api/TestContainerKeyService.java   |  73 ++----
 .../ozone/recon/api/TestUtilizationService.java    |  15 +-
 .../impl/TestOzoneManagerServiceProviderImpl.java  | 274 ++++++++++++++++-----
 .../hadoop/ozone/recon/tasks/DummyReconDBTask.java |  18 +-
 .../recon/tasks/TestContainerKeyMapperTask.java    |  48 ++--
 .../ozone/recon/tasks/TestFileSizeCountTask.java   |  16 +-
 .../recon/tasks/TestReconTaskControllerImpl.java   |  94 ++++---
 33 files changed, 889 insertions(+), 481 deletions(-)

commit f121b2674fdaba9b3eba967a8b8f3734a0720273
Author: Siyao Meng <50227127+smengcl@users.noreply.github.com>
Date:   Sun Aug 18 18:29:52 2019 -0700

    HDDS-1971. Update document for HDDS-1891: Ozone fs shell command should work with default port when port number is not specified (#1306)

 hadoop-hdds/docs/content/interface/OzoneFS.md | 30 +++++++++++++++++++++++++--
 1 file changed, 28 insertions(+), 2 deletions(-)

commit 392b7a1a7947a7579a0346d43aefcb8f2c7abf6d
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Sun Aug 18 10:08:38 2019 -0700

    HDDS-1903 : Use dynamic ports for SCM in TestSCMClientProtocolServer … (#1303)

 .../apache/hadoop/hdds/scm/server/TestSCMClientProtocolServer.java   | 5 +++++
 .../apache/hadoop/hdds/scm/server/TestSCMSecurityProtocolServer.java | 5 +++++
 2 files changed, 10 insertions(+)

commit 3dc638706b8fbf64d4f807eabd1ee5610375f553
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sun Aug 18 10:06:00 2019 -0700

    HDDS-1974. Implement OM CancelDelegationToken request to use Cache and DoubleBuffer. (#1308)

 .../OzoneDelegationTokenSecretManager.java         |  38 +++++--
 .../om/request/bucket/OMBucketCreateRequest.java   |   1 +
 .../security/OMCancelDelegationTokenRequest.java   | 125 +++++++++++++++++++++
 .../security/OMGetDelegationTokenRequest.java      |  24 ++--
 ...e.java => OMCancelDelegationTokenResponse.java} |  20 ++--
 .../security/OMGetDelegationTokenResponse.java     |  58 ++++++++++
 6 files changed, 237 insertions(+), 29 deletions(-)

commit 38904e1d9d6dd9e467715690a49864f76e92d461
Author: Siyao Meng <50227127+smengcl@users.noreply.github.com>
Date:   Sat Aug 17 21:54:48 2019 -0700

    HDDS-1938. Change omPort parameter type from String to int in BasicOzoneFileSystem#createAdapter (#1305)

 .../apache/hadoop/fs/ozone/BasicOzoneFileSystem.java   | 18 +++++++++---------
 .../org/apache/hadoop/fs/ozone/OzoneFileSystem.java    |  5 ++---
 2 files changed, 11 insertions(+), 12 deletions(-)

commit d1ffc05931664f9d2b257cd8b6c0b751ff7ff47f
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Sat Aug 17 21:53:12 2019 -0700

    HDDS-1979. Fix checkstyle errors (#1312)

 .../scm/cli/pipeline/ListPipelinesSubcommand.java  | 23 +++++++++++++---------
 1 file changed, 14 insertions(+), 9 deletions(-)

commit 3679a02ef82d6d26acd7b58f166d261dbeef1161
Author: HUAN-PING SU <pingsutw@gmail.com>
Date:   Sat Aug 17 19:24:33 2019 +0800

    HDDS-1959. Decrement purge interval for Ratis logs in datanode (#1301)

 .../common/src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java  | 2 +-
 hadoop-hdds/common/src/main/resources/ozone-default.xml                 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 90922698639ab57496a9aaea8107401ca324b8fd
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Aug 16 16:39:49 2019 -0700

    HDDS-1913. Fix OzoneBucket and RpcClient APIS for acl. (#1257)

 .../apache/hadoop/ozone/client/OzoneBucket.java    | 108 +++++++++++----------
 .../hadoop/ozone/client/OzoneClientUtils.java      |   4 +-
 .../ozone/client/protocol/ClientProtocol.java      |  22 -----
 .../hadoop/ozone/client/rest/RestClient.java       |  55 +----------
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  33 +------
 .../hadoop/ozone/om/helpers/OmBucketArgs.java      |  66 +------------
 .../hadoop/ozone/web/handlers/BucketArgs.java      |  80 ---------------
 .../src/main/proto/OzoneManagerProtocol.proto      |   2 -
 .../ozone/TestStorageContainerManagerHelper.java   |   3 -
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  30 +++++-
 .../ozone/om/TestMultipleContainerReadWrite.java   |   7 --
 .../org/apache/hadoop/ozone/om/TestOmAcls.java     |   5 -
 .../hadoop/ozone/om/TestOmBlockVersioning.java     |   5 -
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |  15 ---
 .../hadoop/ozone/web/client/TestBuckets.java       |  19 +++-
 .../hadoop/ozone/web/handlers/BucketHandler.java   |   7 --
 .../ozone/web/handlers/BucketProcessTemplate.java  |  29 ------
 .../ozone/web/interfaces/StorageHandler.java       |   9 --
 .../web/storage/DistributedStorageHandler.java     |  22 -----
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  38 ++------
 .../request/bucket/OMBucketSetPropertyRequest.java |  40 ++------
 .../hadoop/ozone/om/TestBucketManagerImpl.java     |  83 ----------------
 .../hadoop/ozone/client/OzoneBucketStub.java       |   4 -
 .../hadoop/ozone/client/OzoneVolumeStub.java       |   1 -
 24 files changed, 124 insertions(+), 563 deletions(-)

commit ff6979ca00908d1e43d0ac8dfd6f40a6966ec645
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Aug 16 15:11:11 2019 -0700

    HDDS-1911. Support Prefix ACL operations for OM HA. (#1275)

 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java |   2 +-
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java |  79 ++++-
 .../security/acl/TestOzoneNativeAuthorizer.java    |   2 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   2 +-
 .../apache/hadoop/ozone/om/PrefixManagerImpl.java  | 326 ++++++++++++++-------
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |  13 +-
 .../request/key/acl/prefix/OMPrefixAclRequest.java | 197 +++++++++++++
 .../key/acl/prefix/OMPrefixAddAclRequest.java      | 122 ++++++++
 .../key/acl/prefix/OMPrefixRemoveAclRequest.java   | 119 ++++++++
 .../key/acl/prefix/OMPrefixSetAclRequest.java      | 120 ++++++++
 .../om/request/key/acl/prefix/package-info.java    |  22 ++
 .../key/acl/prefix/OMPrefixAclResponse.java        |  71 +++++
 .../om/response/key/acl/prefix/package-info.java   |  24 ++
 13 files changed, 977 insertions(+), 122 deletions(-)

commit a11a2db526e604b0f389d4917cd0fc2863c839c1
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Aug 16 13:22:03 2019 -0700

    HDDS-1969. Implement OM GetDelegationToken request to use Cache and DoubleBuffer. (#1296)

 .../OzoneDelegationTokenSecretManager.java         |  30 +++-
 .../src/main/proto/OzoneManagerProtocol.proto      |   9 ++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   5 +
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |   3 +
 .../security/OMGetDelegationTokenRequest.java      | 156 +++++++++++++++++++++
 .../ozone/om/request/security/package-info.java    |  22 +++
 .../security/OMDelegationTokenResponse.java        |  54 +++++++
 .../ozone/om/response/security/package-info.java   |  22 +++
 .../OzoneManagerHARequestHandlerImpl.java          |   1 +
 9 files changed, 301 insertions(+), 1 deletion(-)

commit a459251128a7a6657b1d240e2e7dc0ab0da80c59
Author: Li Cheng <bloodhell2004@gmail.com>
Date:   Fri Aug 16 14:33:04 2019 +0800

    HDDS-1894. Add filter to scmcli listPipelines. (#1286)

 .../scm/cli/pipeline/ListPipelinesSubcommand.java  | 24 +++++++++++++++++++++-
 1 file changed, 23 insertions(+), 1 deletion(-)

commit a82f7966976757aa82845018ec6cc8c30598f38c
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Mon Aug 5 16:13:05 2019 +0200

    HDDS-1910. Cannot build hadoop-hdds-config from scratch in IDEA
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../services/javax.annotation.processing.Processor  |  0
 hadoop-hdds/config/pom.xml                          | 21 ---------------------
 .../services/javax.annotation.processing.Processor  | 16 ++++++++++++++++
 3 files changed, 16 insertions(+), 21 deletions(-)

commit 107bd95605a27eac7f8514516e70cafa0c99cec5
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Mon Aug 12 21:43:00 2019 +0200

    HDDS-1954. StackOverflowError in OzoneClientInvocationHandler
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../org/apache/hadoop/ozone/client/OzoneClientInvocationHandler.java    | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b46008a51bcc70ff1ca9832816f6bc87ac8dd081
Author: dineshchitlangia <dineshchitlangia@gmail.com>
Date:   Thu Aug 15 11:43:47 2019 -0400

    HDDS-1768. Audit xxxAcl methods in OzoneManager (#1204)

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   2 +
 .../org/apache/hadoop/ozone/audit/OMAction.java    |   6 +
 .../apache/hadoop/ozone/security/acl/OzoneObj.java |  13 +
 .../rpc/TestOzoneRpcClientForAclAuditLog.java      | 284 +++++++++++++++++++++
 .../src/test/resources/log4j2.properties           |  76 ++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 197 +++++++++-----
 6 files changed, 510 insertions(+), 68 deletions(-)

commit 61e3c4912f8d50a13447d4123bcca6cf670a0528
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Aug 14 11:40:25 2019 +0200

    HDDS-1964. TestOzoneClientProducer fails with ConnectException
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../hadoop/ozone/s3/TestOzoneClientProducer.java    |  2 ++
 .../s3gateway/src/test/resources/log4j.properties   | 21 +++++++++++++++++++++
 2 files changed, 23 insertions(+)

commit fe42aeb886dec200f14935d79e7540b5fd0d47a8
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Aug 14 14:27:10 2019 +0200

    HDDS-1966. Wrong expected key ACL in acceptance test
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-ozone/dist/src/main/smoketest/basic/ozone-shell.robot      | 8 ++++----
 .../dist/src/main/smoketest/security/ozone-secure-fs.robot        | 6 +++---
 2 files changed, 7 insertions(+), 7 deletions(-)

commit 5931fbe8eb735c2458da0a13fded14441c6c42e1
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Aug 14 20:36:43 2019 +0530

    HDDS-1955. TestBlockOutputStreamWithFailures#test2DatanodesFailure failing because of assertion error.
    
    Signed-off-by: Nanda kumar <nanda@apache.org>

 .../rpc/TestBlockOutputStreamWithFailures.java       | 20 ++++++++++++--------
 1 file changed, 12 insertions(+), 8 deletions(-)

commit a84c1385ca3d67ca516746dad177cef9b8e73551
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Aug 14 15:09:45 2019 +0200

    HDDS-1965. Compile error due to leftover ScmBlockLocationTestIngClient file (#1293)

 .../ozone/om/ScmBlockLocationTestIngClient.java    | 195 ---------------------
 1 file changed, 195 deletions(-)

commit 494d5dc172166ae64fdb17c777e732138b33cbd0
Author: Márton Elek <elek@apache.org>
Date:   Tue Aug 6 10:04:02 2019 +0200

    HDDS-1914. Ozonescript example docker-compose cluster can't be started
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-ozone/dist/src/main/compose/ozonescripts/.ssh/environment | 2 +-
 hadoop-ozone/dist/src/main/compose/ozonescripts/Dockerfile       | 5 +++--
 hadoop-ozone/dist/src/main/compose/ozonescripts/docker-config    | 3 +--
 hadoop-ozone/dist/src/main/compose/ozonescripts/start.sh         | 2 ++
 4 files changed, 7 insertions(+), 5 deletions(-)

commit ce23b34d0485de00518dfc3242b3051182779dab
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Aug 7 21:55:25 2019 +0200

    HDDS-1929. OM started on recon host in ozonesecure compose
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-ozone/dist/src/main/compose/ozonesecure/docker-compose.yaml | 1 -
 1 file changed, 1 deletion(-)

commit eb1738d310feeb383d418026e80d59446bf46ac3
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Aug 13 23:07:02 2019 -0700

    HDDS-1947. fix naming issue for ScmBlockLocationTestingClient.
    Contributed by star.

 .../ozone/om/ScmBlockLocationTestIngClient.java    |   6 +-
 .../ozone/om/ScmBlockLocationTestingClient.java    | 195 +++++++++++++++++++++
 .../hadoop/ozone/om/TestKeyDeletingService.java    |   6 +-
 3 files changed, 201 insertions(+), 6 deletions(-)

commit b4846530467f5286f5af93ccf383bf9030958be6
Author: Aravindan Vijayan <avijayan@hortonworks.com>
Date:   Fri Aug 2 11:04:52 2019 -0700

    HDDS-1832 : Improve logging for PipelineActions handling in SCM and datanode. (Change to Error logging)
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../container/common/transport/server/ratis/XceiverServerRatis.java     | 2 +-
 .../java/org/apache/hadoop/hdds/scm/pipeline/PipelineActionHandler.java | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit f4631f782b643d314a5c21596dc2ea5390140e14
Author: Márton Elek <elek@apache.org>
Date:   Tue Aug 6 10:10:52 2019 +0200

    HDDS-1915. Remove hadoop script from ozone distribution
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-ozone/dist/dev-support/bin/dist-layout-stitching | 2 --
 1 file changed, 2 deletions(-)

commit 32fdeb0f51872c5309adc144411e8dfc7616b6c5
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Tue Aug 13 09:52:51 2019 +0200

    HDDS-1956. Aged IO Thread exits on first read
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../apache/hadoop/ozone/MiniOzoneChaosCluster.java |  8 ++---
 .../hadoop/ozone/MiniOzoneLoadGenerator.java       | 38 ++++++++++++++--------
 .../src/test/resources/log4j.properties            |  2 +-
 3 files changed, 30 insertions(+), 18 deletions(-)

commit 328704057b98ff608d89f51477b6d82891dddf73
Author: Siyao Meng <smeng@cloudera.com>
Date:   Tue Aug 6 14:14:26 2019 -0700

    HDDS-1920. Place ozone.om.address config key default value in ozone-site.xml
    
    Change-Id: Ic5970b383357147b74a01680aedf40bed4d3e176
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-hdds/common/src/main/resources/ozone-default.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 18c8ba15779a7495368efeede6054651637a0158
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Aug 7 20:46:17 2019 +0200

    HDDS-1928. Cannot run ozone-recon compose due to syntax error
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../main/compose/ozone-recon/docker-compose.yaml   |  2 +-
 .../dist/src/main/compose/ozone-recon/test.sh      | 30 ++++++++++++++++++++++
 2 files changed, 31 insertions(+), 1 deletion(-)

commit 858ecf96ac3c5b33baba35b8320c4b0b4e1f9941
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Wed Aug 14 02:10:36 2019 +0200

    HDDS-1659. Define the process to add proposal/design docs to the Ozone subproject (#950)
    
    * HDDS-1659. Define the process to add proposal/design docs to the Ozone subproject
         * Remove Site improvements to display proposals
         * adding license header
         * clarify the support of the existing method

 .../content/design/ozone-enhancement-proposals.md  | 197 +++++++++++++++++++++
 1 file changed, 197 insertions(+)

commit 05450a4457435d2707b55c26092ac6244f31051d
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Tue Aug 6 10:52:32 2019 +0200

    HDDS-1916. Only contract tests are run in ozonefs module
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-ozone/ozonefs/pom.xml | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit a4e0625f85b61355c0ea0c34476e45e7e6588d53
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Aug 6 14:32:13 2019 +0530

    HDDS-1917. TestOzoneRpcClientAbstract is failing.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../client/rpc/TestOzoneRpcClientAbstract.java     | 52 +++++++++++-----------
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  7 ++-
 2 files changed, 31 insertions(+), 28 deletions(-)

commit d19e14bff3eed508b6bcbed2e4820acd5c2f830a
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Aug 13 22:04:03 2019 +0530

    HDDS-1961. TestStorageContainerManager#testScmProcessDatanodeHeartbeat is flaky.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../test/java/org/apache/hadoop/ozone/TestStorageContainerManager.java | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 67c5943657f26053fe44f43d1d56033f8bf643fe
Author: Siyao Meng <smeng@cloudera.com>
Date:   Fri Aug 2 12:54:04 2019 -0700

    HDDS-1891. Ozone fs shell command should work with default port when port number is not specified
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../hadoop/fs/ozone/BasicOzoneFileSystem.java      | 17 +++++++---
 .../fs/ozone/TestOzoneFileSystemWithMocks.java     | 37 ++++++++++++++++++++++
 2 files changed, 50 insertions(+), 4 deletions(-)

commit 67441920f172b394b27e949dde04a278555c4887
Author: Nanda kumar <nanda@apache.org>
Date:   Sat Aug 3 19:01:29 2019 +0530

    HDDS-1488. Scm cli command to start/stop replication manager.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../hdds/scm/client/ContainerOperationClient.java  | 17 ++++++
 .../apache/hadoop/hdds/scm/client/ScmClient.java   | 19 +++++++
 .../protocol/StorageContainerLocationProtocol.java | 18 +++++++
 ...inerLocationProtocolClientSideTranslatorPB.java | 39 ++++++++++++++
 .../org/apache/hadoop/ozone/audit/SCMAction.java   |  5 +-
 ...inerLocationProtocolServerSideTranslatorPB.java | 46 +++++++++++++++++
 .../proto/StorageContainerLocationProtocol.proto   | 31 +++++++++++
 .../hdds/scm/container/ReplicationManager.java     | 36 ++++++++-----
 .../hdds/scm/server/SCMClientProtocolServer.java   | 21 ++++++++
 .../hdds/scm/container/TestReplicationManager.java | 16 ++++++
 .../hdds/scm/cli/ReplicationManagerCommands.java   | 54 +++++++++++++++++++
 .../scm/cli/ReplicationManagerStartSubcommand.java | 53 +++++++++++++++++++
 .../cli/ReplicationManagerStatusSubcommand.java    | 60 ++++++++++++++++++++++
 .../scm/cli/ReplicationManagerStopSubcommand.java  | 55 ++++++++++++++++++++
 .../org/apache/hadoop/hdds/scm/cli/SCMCLI.java     |  3 +-
 15 files changed, 457 insertions(+), 16 deletions(-)

commit fcf651387651f31ae701d5d7e9d33c4ff2ffe0f5
Author: dchitlangia <dineshchitlangia@gmail.com>
Date:   Thu Aug 1 02:06:03 2019 -0400

    HDDS-1886. Use ArrayList#clear to address audit failure scenario
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../test/java/org/apache/hadoop/ozone/audit/TestOzoneAuditLogger.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 22ad23f00f67cf3b35c84cb6b54b2fa8b8bc612c
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Tue Aug 13 19:07:19 2019 +0530

    HDDS-1952. Disable TestMiniChaosOzoneCluster in integration.sh. (#1284)
    
    Signed-off-by: Nanda kumar <nanda@apache.org>

 hadoop-ozone/dev-support/checks/integration.sh | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit b8f42bf8964cc9e4820961cb0608b3b77cd47e84
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Tue Aug 13 12:08:55 2019 +0200

    HDDS-1908. TestMultiBlockWritesWithDnFailures is failing (#1282)

 .../client/rpc/TestFailureHandlingByClient.java    | 65 +-----------------
 .../rpc/TestMultiBlockWritesWithDnFailures.java    | 76 ++++++++++++++++++----
 2 files changed, 67 insertions(+), 74 deletions(-)

commit 75531806acc392fb1fbb5d5d62d18f5e3035d97e
Author: Márton Elek <elek@apache.org>
Date:   Mon Aug 12 13:02:47 2019 +0200

    HDDS-1912. start-ozone.sh fail due to ozone-config.sh not found. Contributed by kevin su.

 hadoop-ozone/common/src/main/bin/start-ozone.sh | 5 +++++
 1 file changed, 5 insertions(+)

commit 753894ef8175a4551d627d9ce2234cce407c1100
Author: Shweta Yakkali <shwetayakkali@cloudera.com>
Date:   Sat Aug 10 10:14:55 2019 -0700

    HDDS-1366. Add ability in Recon to track the number of small files in an Ozone Cluster (#1146)

 .../recon/schema/UtilizationSchemaDefinition.java  |  13 +-
 .../org/apache/hadoop/ozone/recon/ReconServer.java |  11 +-
 .../ozone/recon/api/ContainerKeyService.java       |   2 +-
 .../hadoop/ozone/recon/api/UtilizationService.java |  67 ++++++
 .../ozone/recon/tasks/FileSizeCountTask.java       | 255 +++++++++++++++++++++
 .../ozone/recon/AbstractOMMetadataManagerTest.java |  28 +++
 .../ozone/recon/api/TestUtilizationService.java    |  86 +++++++
 .../TestUtilizationSchemaDefinition.java           |  76 +++++-
 .../ozone/recon/tasks/TestFileSizeCountTask.java   | 140 +++++++++++
 .../org.mockito.plugins.MockMaker                  |  16 ++
 10 files changed, 690 insertions(+), 4 deletions(-)

commit 5745e5ea0ac573799b72feb2f99db56df99ab2e3
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Aug 9 22:09:50 2019 -0700

    HDDS-1943. TestKeyManagerImpl.testLookupKeyWithLocation is failing. Contributed by Xiaoyu Yao. (#1262)

 .../src/test/java/org/apache/hadoop/ozone/om/TestKeyManagerImpl.java     | 1 +
 1 file changed, 1 insertion(+)

commit cbbc0015acf04bfcbb314b5aa725f09e2aab913e
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Aug 9 20:32:01 2019 -0700

    HDDS-1895. Support Key ACL operations for OM HA. (#1230)

 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  | 150 ++++++++++++++--
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 196 ++++++++++++++-------
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |   9 +
 .../ozone/om/request/key/acl/OMKeyAclRequest.java  | 173 ++++++++++++++++++
 .../om/request/key/acl/OMKeyAddAclRequest.java     | 107 +++++++++++
 .../om/request/key/acl/OMKeyRemoveAclRequest.java  | 108 ++++++++++++
 .../om/request/key/acl/OMKeySetAclRequest.java     | 105 +++++++++++
 .../ozone/om/request/key/acl/package-info.java     |  24 +++
 .../hadoop/ozone/om/request/util/ObjectParser.java |   2 +-
 .../om/response/key/acl/OMKeyAclResponse.java      |  63 +++++++
 .../ozone/om/response/key/acl/package-info.java    |  24 +++
 11 files changed, 885 insertions(+), 76 deletions(-)

commit b2a4a3236aa97d2e8c33584df647154715d3ecb4
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Aug 9 23:58:38 2019 +0530

    HDDS-1906. TestScmSafeMode#testSCMSafeModeRestrictedOp is failing. (#1260)

 .../test/java/org/apache/hadoop/ozone/MiniOzoneCluster.java   |  5 +++++
 .../java/org/apache/hadoop/ozone/MiniOzoneClusterImpl.java    | 11 +++++++++++
 .../test/java/org/apache/hadoop/ozone/om/TestScmSafeMode.java |  6 ++++++
 3 files changed, 22 insertions(+)

commit 9b09a6a99d011b59b709bf84ca6631194a521c22
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Fri Aug 9 06:38:31 2019 +0200

    HDDS-1934. TestSecureOzoneCluster may fail due to port conflict (#1254)

 .../test/java/org/apache/hadoop/ozone/TestSecureOzoneCluster.java  | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit d0d902683d4a734b00e7e9c8f6c4440f2068ca5a
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Aug 8 21:29:00 2019 -0700

    HDDS-1884. Support Bucket ACL operations for OM HA. (#1202)

 .../hadoop/ozone/om/exceptions/OMException.java    |   5 +-
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      |  95 ++++++++++-
 .../hadoop/ozone/util/BooleanBiFunction.java       |  11 ++
 .../src/main/proto/OzoneManagerProtocol.proto      |   2 +
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 142 ++++++++++++++++
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |  15 +-
 .../om/request/bucket/acl/OMBucketAclRequest.java  | 186 +++++++++++++++++++++
 .../request/bucket/acl/OMBucketAddAclRequest.java  | 122 ++++++++++++++
 .../bucket/acl/OMBucketRemoveAclRequest.java       | 101 +++++++++++
 .../request/bucket/acl/OMBucketSetAclRequest.java  | 100 +++++++++++
 .../ozone/om/request/bucket/acl/package-info.java  |  23 +++
 .../hadoop/ozone/om/request/util/ObjectParser.java |  74 ++++++++
 .../hadoop/ozone/om/request/util/package-info.java |  23 +++
 .../response/bucket/acl/OMBucketAclResponse.java   |  62 +++++++
 .../ozone/om/response/bucket/acl/package-info.java |  22 +++
 15 files changed, 978 insertions(+), 5 deletions(-)

commit c62c5c44f3beda7462d7e8244b0678d2adb0310a
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Aug 8 15:40:19 2019 -0700

    HDDS-1863. Freon RandomKeyGenerator even if keySize is set to 0, it returns some random data to key. (#1167)

 .../apache/hadoop/ozone/freon/RandomKeyGenerator.java | 10 ++--------
 .../hadoop/ozone/freon/TestRandomKeyGenerator.java    | 19 +++++++++++++++++++
 2 files changed, 21 insertions(+), 8 deletions(-)

commit 13cd9e29204ff9049c1f9e8654a9cb92f5cd69c1
Author: Siyao Meng <50227127+smengcl@users.noreply.github.com>
Date:   Thu Aug 8 13:38:10 2019 -0700

    HDDS-1829 On OM reload/restart OmMetrics#numKeys should be updated. Contributed by Siyao Meng.

 .../java/org/apache/hadoop/utils/db/RDBTable.java   | 10 ++++++++++
 .../main/java/org/apache/hadoop/utils/db/Table.java |  7 +++++++
 .../java/org/apache/hadoop/utils/db/TypedTable.java |  5 +++++
 .../apache/hadoop/utils/db/TestRDBTableStore.java   | 21 ++++++++++++++++++++-
 .../hadoop/utils/db/TestTypedRDBTableStore.java     | 21 ++++++++++++++++++++-
 .../apache/hadoop/ozone/om/OMMetadataManager.java   | 11 +++++++++++
 .../hadoop/ozone/om/OmMetadataManagerImpl.java      | 10 ++++++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java    |  2 ++
 8 files changed, 85 insertions(+), 2 deletions(-)

commit 3280232db89983776648c97cbbd17dfc750a1199
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Aug 8 09:55:46 2019 -0700

    HDDS-1619. Support volume acl operations for OM HA. Contributed by… (#1147)

 .../om/ratis/utils/OzoneManagerRatisUtils.java     |  33 ++++-
 .../om/request/volume/acl/OMVolumeAclRequest.java  | 157 +++++++++++++++++++++
 .../request/volume/acl/OMVolumeAddAclRequest.java  | 110 +++++++++++++++
 .../volume/acl/OMVolumeRemoveAclRequest.java       | 109 ++++++++++++++
 .../request/volume/acl/OMVolumeSetAclRequest.java  | 106 ++++++++++++++
 .../ozone/om/request/volume/acl/package-info.java  |  22 +++
 .../om/response/volume/OMVolumeAclOpResponse.java  |  68 +++++++++
 .../OzoneManagerHARequestHandlerImpl.java          |  17 ++-
 .../ozone/om/request/TestOMRequestUtils.java       |  65 ++++++++-
 .../volume/acl/TestOMVolumeAddAclRequest.java      | 123 ++++++++++++++++
 .../volume/acl/TestOMVolumeRemoveAclRequest.java   | 133 +++++++++++++++++
 .../volume/acl/TestOMVolumeSetAclRequest.java      | 136 ++++++++++++++++++
 .../ozone/om/request/volume/acl/package-info.java  |  21 +++
 13 files changed, 1093 insertions(+), 7 deletions(-)

commit a4fe7ed21f0c35ed3210b476ca0cde47e31cb73e
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Aug 8 15:52:04 2019 +0200

    HDDS-1926. The new caching layer is used for old OM requests but not updated
    
    Closes #1247

 .../hadoop/ozone/om/TestOzoneManagerRestart.java   | 214 +++++++++++++++++++++
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  18 +-
 2 files changed, 230 insertions(+), 2 deletions(-)

commit 0470f6c19c6bc39763eca4a863cfe3d6120f9a06
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Aug 8 15:22:03 2019 +0530

    HDDS-1888. Add containers to node2container map in SCM as part of ICR processing.
    
    Signed-off-by: Nanda kumar <nanda@apache.org>

 .../IncrementalContainerReportHandler.java         | 16 ++++-
 .../apache/hadoop/hdds/scm/node/NodeManager.java   | 11 ++++
 .../hadoop/hdds/scm/node/NodeStateManager.java     | 15 +++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  7 +++
 .../hadoop/hdds/scm/node/states/NodeStateMap.java  | 72 +++++++++++++++++-----
 .../hdds/scm/server/StorageContainerManager.java   |  3 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java | 13 ++++
 .../TestIncrementalContainerReportHandler.java     |  9 ++-
 .../testutils/ReplicationNodeManagerMock.java      |  7 +++
 9 files changed, 132 insertions(+), 21 deletions(-)

commit 039cee9d6bf79962c9967296b041fe1bf10c37cd
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Aug 7 17:07:40 2019 -0700

    HDDS-1900. Remove UpdateBucket handler which supports add/remove Acl. (#1219)

 hadoop-hdds/docs/content/shell/BucketCommands.md   | 18 ----
 .../src/main/smoketest/basic/ozone-shell.robot     |  4 -
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 48 -----------
 .../ozone/web/ozShell/bucket/BucketCommands.java   |  1 -
 .../web/ozShell/bucket/UpdateBucketHandler.java    | 96 ----------------------
 5 files changed, 167 deletions(-)

commit 9e244869d83b7ee7fc4091769595bb933eb86e6c
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Thu Aug 8 02:07:15 2019 +0200

    HDDS-1925. ozonesecure acceptance test broken by HTTP auth requirement (#1248)

 hadoop-ozone/dist/src/main/compose/ozonesecure/test.sh   |  2 +-
 hadoop-ozone/dist/src/main/compose/testlib.sh            | 16 +++++++++++++++-
 hadoop-ozone/dist/src/main/smoketest/basic/basic.robot   |  5 ++---
 .../dist/src/main/smoketest/basic/ozone-shell.robot      |  1 +
 hadoop-ozone/dist/src/main/smoketest/commonlib.robot     |  6 +++++-
 .../dist/src/main/smoketest/s3/commonawslib.robot        |  1 +
 hadoop-ozone/dist/src/main/smoketest/s3/webui.robot      |  7 ++++---
 7 files changed, 29 insertions(+), 9 deletions(-)

commit 39f2d5d4824ae97cb21c8a48c26e6a196c7210d1
Author: Sammi Chen <sammichen@apache.org>
Date:   Thu Aug 8 07:59:13 2019 +0800

    HDDS-1865. Use "ozone.network.topology.aware.read" to control both RPC client and server side logic (#1184)

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  6 +-
 .../hadoop/hdds/scm/XceiverClientManager.java      |  7 +-
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  4 --
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  8 ++-
 .../common/src/main/resources/ozone-default.xml    |  2 +-
 .../ContainerPlacementPolicyFactory.java           |  2 +
 .../algorithms/SCMContainerPlacementRackAware.java |  5 +-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  7 ++
 .../apache/hadoop/ozone/om/helpers/OmKeyArgs.java  | 17 ++++-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  5 +-
 .../src/main/proto/OzoneManagerProtocol.proto      |  1 +
 .../client/rpc/TestFailureHandlingByClient.java    | 17 ++++-
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 77 ----------------------
 .../client/rpc/TestOzoneRpcClientWithRatis.java    | 68 +++++++++----------
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  8 ++-
 .../protocolPB/OzoneManagerRequestHandler.java     |  2 +
 16 files changed, 104 insertions(+), 132 deletions(-)

commit a28e0c3613fecd11074a897f9c5b20943447cf29
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Aug 7 18:21:37 2019 +0200

    HDDS-1924. ozone sh bucket path command does not exist
    
    Closes #1245

 hadoop-hdds/docs/content/interface/S3.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4fb455b7405828ba94ad2d03992589cb0bcb9ddb
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Aug 7 18:34:05 2019 +0530

    HDDS-1907. TestOzoneRpcClientWithRatis is failing with ACL errors.
    
    Signed-off-by: Nanda kumar <nanda@apache.org>

 .../hadoop/ozone/client/rpc/TestOzoneRpcClientAbstract.java    | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit bb593f18c62a8fd15dded334294d063f2f4cd520
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Aug 7 06:14:41 2019 +0200

    HDDS-1921. TestOzoneManagerDoubleBufferWithOMResponse is flaky (#1238)

 ...TestOzoneManagerDoubleBufferWithOMResponse.java | 28 ++++++++++++----------
 1 file changed, 15 insertions(+), 13 deletions(-)

commit 60235a396ea2bf65bb79fac7ee62212a495ca21a
Author: HUAN-PING SU <pingsutw@gmail.com>
Date:   Wed Aug 7 09:00:34 2019 +0800

    HDDS-1919. Fix Javadoc in TestAuditParser (#1240)

 .../test/java/org/apache/hadoop/ozone/audit/parser/TestAuditParser.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 182ea2ad1970ecda3f1d80f36ff5fa22a717386a
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Aug 7 02:00:54 2019 +0200

    HDDS-1918. hadoop-ozone-tools has integration tests run as unit (#1236)

 hadoop-ozone/dev-support/checks/integration.sh | 2 +-
 hadoop-ozone/dev-support/checks/unit.sh        | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 073e7285199ce65c3c4013b28fd9fe39e7e8a579
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Aug 6 12:07:53 2019 -0700

    HDDS-1901. Fix Ozone HTTP WebConsole Authentication. Contributed by Xiaoyu Yao. (#1228)

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java     |  2 +-
 .../common/src/main/resources/ozone-default.xml       |  4 ++--
 hadoop-hdds/docs/content/security/SecureOzone.md      |  6 +++---
 .../java/org/apache/hadoop/ozone/om/OMConfigKeys.java |  2 +-
 .../src/main/compose/ozonesecure-mr/docker-config     |  4 ++--
 .../dist/src/main/compose/ozonesecure/docker-config   | 19 +++++++++++++++++--
 6 files changed, 26 insertions(+), 11 deletions(-)

commit e6be474842be5c7d8600271e64add3ff11b52994
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Aug 6 14:36:04 2019 +0530

    HDDS-1905. PipelineActionHandler is not closing the pipeline when close action is received. (#1227)

 .../java/org/apache/hadoop/hdds/scm/pipeline/PipelineActionHandler.java  | 1 +
 1 file changed, 1 insertion(+)

commit 38af959187da241761cc64f67c14dc3d79282907
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Aug 5 10:25:18 2019 -0700

    HDDS-1893. Fix bug in removeAcl in Bucket. (#1216)

 .../client/rpc/TestOzoneRpcClientAbstract.java     | 32 ++++++++++++++++++++++
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  | 14 +++++-----
 2 files changed, 39 insertions(+), 7 deletions(-)

commit 8fbc8b85e57e76152ea1e85649524bd160305ba3
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Mon Aug 5 13:43:41 2019 +0530

    HDDS-1798. Propagate failure in writeStateMachineData to Ratis. Contributed by Supratim Deka (#1113)

 .../common/transport/server/ratis/CSMMetrics.java  | 10 ++++
 .../server/ratis/ContainerStateMachine.java        | 47 ++++++++++++----
 .../client/rpc/TestContainerStateMachine.java      |  8 +--
 .../rpc/TestContainerStateMachineFailures.java     | 64 +++++++++++-----------
 4 files changed, 78 insertions(+), 51 deletions(-)

commit 29421d9fb67ee4c291debbd6b654afb6e3c37ed9
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Sat Aug 3 22:33:01 2019 -0700

    HDDS-1896. Suppress WARN log from NetworkTopology#getDistanceCost. Contributed by Xiaoyu Yao. (#1214)

 .../main/java/org/apache/hadoop/hdds/scm/net/NetworkTopologyImpl.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ccbe94292e2b4972febe87d1512efb7f51e122f6
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Sun Aug 4 07:26:25 2019 +0200

    HDDS-1870. ConcurrentModification at PrometheusMetricsSink (#1179)

 .../hadoop/hdds/server/PrometheusMetricsSink.java  | 24 ++++++++++++++--------
 1 file changed, 16 insertions(+), 8 deletions(-)

commit 673bec0ff4b2c1d861a5c435a7dbefd8f63bfba8
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Sat Aug 3 10:49:07 2019 -0700

    HDDS-1788. Fix kerberos principal error in Ozone Recon. (#1201)

 hadoop-hdds/common/src/main/resources/ozone-default.xml  |  6 +++---
 .../docker-image/docker-krb5/Dockerfile-krb5             |  2 +-
 .../src/main/compose/ozonesecure/docker-compose.yaml     | 13 +++++++++++++
 .../dist/src/main/compose/ozonesecure/docker-config      |  4 ++++
 .../ozonesecure/docker-image/docker-krb5/Dockerfile-krb5 |  2 +-
 ...igurationProvider.java => ConfigurationProvider.java} | 16 ++++++++--------
 .../apache/hadoop/ozone/recon/ReconControllerModule.java |  3 ++-
 .../java/org/apache/hadoop/ozone/recon/ReconServer.java  |  2 +-
 .../recon/spi/impl/OzoneManagerServiceProviderImpl.java  | 15 ++++++---------
 9 files changed, 39 insertions(+), 24 deletions(-)

commit 9224310aabbd23f137248709f3c7cd5510c6bc16
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Aug 2 23:23:11 2019 +0530

    HDDS-1887. Enable all the blockade test-cases. Contibuted by NandaKumar(#1206).

 .../src/test/blockade/ozone/cluster.py             | 12 +++++++++++-
 .../src/test/blockade/ozone/container.py           |  3 +++
 .../test/blockade/test_blockade_client_failure.py  |  4 ----
 .../blockade/test_blockade_datanode_isolation.py   | 22 +++++++++++++++-------
 .../src/test/blockade/test_blockade_flaky.py       | 10 ++++------
 .../test/blockade/test_blockade_mixed_failure.py   |  2 --
 .../test_blockade_mixed_failure_two_nodes.py       |  2 --
 7 files changed, 33 insertions(+), 22 deletions(-)

commit 8fd3d8fffba64593af96a497b4753e9bd9889dfc
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Fri Aug 2 10:01:00 2019 -0700

    HDDS-1832 : Improve logging for PipelineActions handling in SCM and datanode. (#1200)

 .../common/transport/server/ratis/XceiverServerRatis.java          | 2 +-
 .../org/apache/hadoop/hdds/scm/pipeline/PipelineActionHandler.java | 7 ++++---
 2 files changed, 5 insertions(+), 4 deletions(-)

commit 659a3e4ad2deee1e46596a3d145d962384ac1b2c
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Fri Aug 2 18:57:54 2019 +0200

    HDDS-1878. checkstyle error in ContainerStateMachine (#1195)

 .../src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java      | 4 ++--
 .../common/transport/server/ratis/ContainerStateMachine.java         | 5 ++---
 2 files changed, 4 insertions(+), 5 deletions(-)

commit f59f68452fe0f4345d5abe35eabd84f376223e21
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri Aug 2 21:50:39 2019 +0530

    HDDS-1782. Add an option to MiniOzoneChaosCluster to read files multiple times. Contributed by Mukul Kumar Singh. (#1076)

 .../integration-test/src/test/bin/start-chaos.sh   |   2 +-
 .../apache/hadoop/ozone/MiniOzoneChaosCluster.java |   6 +-
 .../hadoop/ozone/MiniOzoneLoadGenerator.java       | 153 ++++++++++++++++-----
 .../hadoop/ozone/TestMiniChaosOzoneCluster.java    |   9 +-
 .../apache/hadoop/ozone/chaos/TestProbability.java |  43 ++++++
 5 files changed, 173 insertions(+), 40 deletions(-)

commit a30e311bf60dcae4fb0b64e19d21dab2ecfe81c5
Author: Sammi Chen <sammichen@apache.org>
Date:   Fri Aug 2 03:33:57 2019 +0800

    HDDS-1882. TestReplicationManager failed with NPE. (#1197)

 .../org/apache/hadoop/hdds/scm/container/ReplicationManager.java   | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 1a71d601d7c2ca4da6ff8e5aa68aa97dedcf42a1
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jul 31 19:00:37 2019 -0700

    HDDS-1885. Fix bug in checkAcls in OzoneManager. (#1199)

 .../src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java   | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit fd387e2fe3f90b042252bbf725e17d791b6c16fd
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Wed Jul 31 10:11:36 2019 -0700

    HADOOP-16398. Exports Hadoop metrics to Prometheus (#1170)

 .../src/main/java/org/apache/hadoop/hdds/server/BaseHttpServer.java | 6 ++++++
 1 file changed, 6 insertions(+)

commit 996cd78e109e45b56b8cf7c8fd9b636e05863c51
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jul 31 09:37:53 2019 -0700

    HDDS-1875. Fix failures in TestS3MultipartUploadAbortResponse. (#1188)

 .../hadoop/ozone/om/response/s3/multipart/TestS3MultipartResponse.java  | 2 +-
 .../om/response/s3/multipart/TestS3MultipartUploadAbortResponse.java    | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit f739243b541a432bea45008a3e974495cc311a7f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jul 31 09:18:40 2019 -0700

    HDDS-1849. Implement S3 Complete MPU request to use Cache and DoubleBuffer. (#1181)

 .../om/ratis/utils/OzoneManagerRatisUtils.java     |   3 +
 .../S3MultipartUploadCompleteRequest.java          | 314 +++++++++++++++++++++
 .../S3MultipartUploadCommitPartResponse.java       |   3 +-
 .../S3MultipartUploadCompleteResponse.java         |  46 +++
 .../OzoneManagerHARequestHandlerImpl.java          |   1 +
 .../ozone/om/request/TestOMRequestUtils.java       |  22 ++
 .../s3/multipart/TestS3MultipartRequest.java       |  23 ++
 .../TestS3MultipartUploadCompleteRequest.java      | 177 ++++++++++++
 8 files changed, 588 insertions(+), 1 deletion(-)

commit e891e16c5ea76702ee5cb3f995b843c2884df43a
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Jul 31 16:07:27 2019 +0200

    HDDS-1877. hadoop31-mapreduce fails due to wrong HADOOP_VERSION
    
    Closes #1193

 hadoop-ozone/dev-support/checks/acceptance.sh | 1 -
 1 file changed, 1 deletion(-)

commit f3cc59521ba146bec5d4d3a67b6194037a9f8964
Author: Lokesh Jain <ljain@apache.org>
Date:   Wed Jul 31 13:26:24 2019 +0530

    HDDS-1816: ContainerStateMachine should limit number of pending apply transactions. Adds a config, uses snapshot threshold default value. (#1150)

 .../java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java    |  8 ++++++++
 hadoop-hdds/common/src/main/resources/ozone-default.xml   |  9 +++++++++
 .../transport/server/ratis/ContainerStateMachine.java     | 15 +++++++++++++--
 3 files changed, 30 insertions(+), 2 deletions(-)

commit 81bf064ecb5a82aaa678c26571db1be12781b39f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Jul 30 22:39:03 2019 -0700

    HDDS-1856. Make required changes for Non-HA to use new HA code in OM. (#1174)

 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  6 +-
 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java   | 60 +++++++++++++++-
 .../utils/OzoneManagerDoubleBufferHelper.java      | 15 ++++
 .../hadoop/ozone/om/request/OMClientRequest.java   |  5 +-
 .../om/request/bucket/OMBucketCreateRequest.java   | 53 +++++++-------
 .../om/request/bucket/OMBucketDeleteRequest.java   | 54 +++++++-------
 .../request/bucket/OMBucketSetPropertyRequest.java | 50 ++++++-------
 .../om/request/file/OMDirectoryCreateRequest.java  | 29 +++++---
 .../ozone/om/request/file/OMFileCreateRequest.java | 26 +++++--
 .../om/request/key/OMAllocateBlockRequest.java     | 51 +++++--------
 .../ozone/om/request/key/OMKeyCommitRequest.java   | 62 ++++++++--------
 .../ozone/om/request/key/OMKeyCreateRequest.java   | 26 ++++---
 .../ozone/om/request/key/OMKeyDeleteRequest.java   | 60 ++++++++--------
 .../ozone/om/request/key/OMKeyPurgeRequest.java    | 11 ++-
 .../ozone/om/request/key/OMKeyRenameRequest.java   | 55 +++++++-------
 .../request/s3/bucket/S3BucketCreateRequest.java   | 49 ++++++++-----
 .../request/s3/bucket/S3BucketDeleteRequest.java   | 27 +++++--
 .../S3InitiateMultipartUploadRequest.java          | 43 +++++++----
 .../multipart/S3MultipartUploadAbortRequest.java   | 35 +++++----
 .../S3MultipartUploadCommitPartRequest.java        | 69 +++++++++++-------
 .../om/request/volume/OMVolumeCreateRequest.java   | 77 ++++++++++----------
 .../om/request/volume/OMVolumeDeleteRequest.java   | 65 ++++++++---------
 .../om/request/volume/OMVolumeSetOwnerRequest.java | 68 ++++++++++--------
 .../om/request/volume/OMVolumeSetQuotaRequest.java | 52 ++++++++------
 .../hadoop/ozone/om/response/OMClientResponse.java | 10 +++
 .../OzoneManagerHARequestHandlerImpl.java          |  9 +--
 ...OzoneManagerProtocolServerSideTranslatorPB.java | 14 ++++
 .../ozone/om/request/bucket/TestBucketRequest.java | 83 ++++++++++++++++++++++
 .../request/bucket/TestOMBucketCreateRequest.java  | 58 +++------------
 .../request/bucket/TestOMBucketDeleteRequest.java  | 54 ++------------
 .../bucket/TestOMBucketSetPropertyRequest.java     | 54 ++------------
 .../request/file/TestOMDirectoryCreateRequest.java | 22 ++++--
 .../om/request/file/TestOMFileCreateRequest.java   |  9 ++-
 .../om/request/key/TestOMAllocateBlockRequest.java | 12 ++--
 .../om/request/key/TestOMKeyCommitRequest.java     |  8 +--
 .../om/request/key/TestOMKeyCreateRequest.java     | 12 ++--
 .../om/request/key/TestOMKeyDeleteRequest.java     |  6 +-
 .../key/TestOMKeyPurgeRequestAndResponse.java      |  3 +-
 .../om/request/key/TestOMKeyRenameRequest.java     | 15 ++--
 .../ozone/om/request/key/TestOMKeyRequest.java     |  7 ++
 .../s3/bucket/TestS3BucketCreateRequest.java       | 58 ++-------------
 .../s3/bucket/TestS3BucketDeleteRequest.java       | 55 ++------------
 .../om/request/s3/bucket/TestS3BucketRequest.java  | 82 +++++++++++++++++++++
 .../TestS3InitiateMultipartUploadRequest.java      |  6 +-
 .../s3/multipart/TestS3MultipartRequest.java       |  9 ++-
 .../TestS3MultipartUploadAbortRequest.java         | 14 ++--
 .../TestS3MultipartUploadCommitPartRequest.java    | 10 +--
 .../request/volume/TestOMVolumeCreateRequest.java  | 58 +++------------
 .../request/volume/TestOMVolumeDeleteRequest.java  | 60 +++-------------
 .../om/request/volume/TestOMVolumeRequest.java     | 80 +++++++++++++++++++++
 .../volume/TestOMVolumeSetOwnerRequest.java        | 59 +++------------
 .../volume/TestOMVolumeSetQuotaRequest.java        | 57 +++------------
 52 files changed, 1055 insertions(+), 917 deletions(-)

commit 77f1861efa1c1e48333339600eb48768180c48fc
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Tue Jul 30 22:41:16 2019 +0200

    HDDS-1834. parent directories not found in secure setup due to ACL check. Contributed by Doroszlai, Attila.
    
    This closes #1171.

 .../hadoop/ozone/security/acl/OzoneObjInfo.java    |  9 ++++
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java | 57 ++++++++++++++++++++++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 36 +++++++++-----
 3 files changed, 91 insertions(+), 11 deletions(-)

commit 3325e1df0ed459ed556a884e601abed83b18d5b0
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Jul 30 09:28:26 2019 -0700

    HDDS-1872. Fix entry clean up from openKeyTable during complete MPU. (#1182)

 .../src/main/java/org/apache/hadoop/ozone/om/KeyManagerImpl.java         | 1 +
 1 file changed, 1 insertion(+)

commit f2016f883757ba313b076ef65bc46bd778b52db7
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jul 29 16:44:48 2019 -0700

    Revert HDDS-1829 On OM reload/restart OmMetrics#numKeys should be updated. (#1183)

 .../java/org/apache/hadoop/utils/db/RDBTable.java   | 10 ----------
 .../main/java/org/apache/hadoop/utils/db/Table.java |  7 -------
 .../java/org/apache/hadoop/utils/db/TypedTable.java |  5 -----
 .../apache/hadoop/utils/db/TestRDBTableStore.java   | 21 +--------------------
 .../hadoop/utils/db/TestTypedRDBTableStore.java     | 21 +--------------------
 .../apache/hadoop/ozone/om/OMMetadataManager.java   | 11 -----------
 .../hadoop/ozone/om/OmMetadataManagerImpl.java      | 10 ----------
 .../org/apache/hadoop/ozone/om/OzoneManager.java    |  2 --
 8 files changed, 2 insertions(+), 85 deletions(-)

commit 926cd3a4a867b0bfa2d4e96e63f2d3be4a43e6c3
Author: Siyao Meng <50227127+smengcl@users.noreply.github.com>
Date:   Mon Jul 29 16:42:00 2019 -0700

    HDDS-1829 On OM reload/restart OmMetrics#numKeys should be updated (#1164)

 .../java/org/apache/hadoop/utils/db/RDBTable.java   | 10 ++++++++++
 .../main/java/org/apache/hadoop/utils/db/Table.java |  7 +++++++
 .../java/org/apache/hadoop/utils/db/TypedTable.java |  5 +++++
 .../apache/hadoop/utils/db/TestRDBTableStore.java   | 21 ++++++++++++++++++++-
 .../hadoop/utils/db/TestTypedRDBTableStore.java     | 21 ++++++++++++++++++++-
 .../apache/hadoop/ozone/om/OMMetadataManager.java   | 11 +++++++++++
 .../hadoop/ozone/om/OmMetadataManagerImpl.java      | 10 ++++++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java    |  2 ++
 8 files changed, 85 insertions(+), 2 deletions(-)

commit 0590bd91c8e6367e7df44f71baa83cff30acd087
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Mon Jul 29 09:39:40 2019 -0700

    HDDS-1391 : Add ability in OM to serve delta updates through an API. (#1033)

 .../java/org/apache/hadoop/utils/db/DBStore.java   |  9 ++++
 .../apache/hadoop/utils/db/DBUpdatesWrapper.java   | 48 +++++++++++++++++++++
 .../java/org/apache/hadoop/utils/db/RDBStore.java  | 46 ++++++++++++++++++++
 .../utils/db/SequenceNumberNotFoundException.java  | 37 ++++++++++++++++
 .../org/apache/hadoop/utils/db/TestRDBStore.java   | 21 ++++++++++
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  1 +
 .../src/main/proto/OzoneManagerProtocol.proto      | 12 ++++++
 .../apache/hadoop/ozone/om/TestOzoneManager.java   | 49 ++++++++++++++++------
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 17 ++++++++
 .../protocolPB/OzoneManagerRequestHandler.java     | 23 ++++++++++
 10 files changed, 251 insertions(+), 12 deletions(-)

commit 3b7222b8df64e4fc4c8d00a2e6f6bbdba0d1bc94
Author: Eric Yang <eyang@apache.org>
Date:   Mon Jul 29 12:05:24 2019 -0400

    HDDS-1833. Moved RefCountedDB stacktrace to log level trace.
               Contributed by Siddharth Wagle

 .../ozone/container/common/utils/ReferenceCountedDB.java | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 25bee25ab1a8b8817068f5f46e0bdcacad667005
Author: Márton Elek <elek@apache.org>
Date:   Wed Jun 26 22:37:14 2019 +0200

    HDDS-1725. pv-test example to test csi is not working

 .../main/k8s/definitions/pv-test/flekszible.yaml   |  2 +-
 .../definitions/pv-test/nginx-conf-configmap.yaml  | 37 --------
 .../definitions/pv-test/webserver-deployment.yaml  | 50 +++++++++++
 .../pv-test/webserver-service.yaml}                |  6 +-
 .../pv-test/webserver-volume.yaml}                 |  2 +-
 .../src/main/k8s/examples/ozone-csi/Flekszible     | 26 ------
 .../k8s/examples/ozone-csi/config-configmap.yaml   | 37 --------
 .../k8s/examples/ozone-csi/datanode-daemonset.yaml | 60 -------------
 .../examples/ozone-csi/datanode-statefulset.yaml   | 66 ---------------
 .../k8s/examples/ozone-csi/om-statefulset.yaml     | 65 --------------
 .../ozone-csi/pv-test/nginx-conf-configmap.yaml    | 38 ---------
 .../main/k8s/examples/ozone-csi/s3g-service.yaml   | 28 -------
 .../main/k8s/examples/ozone-csi/scm-service.yaml   | 28 -------
 .../k8s/examples/ozone-csi/scm-statefulset.yaml    | 73 ----------------
 .../src/main/k8s/examples/ozone-dev/Flekszible     |  9 ++
 .../k8s/examples/ozone-dev/config-configmap.yaml   |  3 +
 .../csi}/csi-node-daemonset.yaml                   |  0
 .../csi}/csi-ozone-clusterrole.yaml                |  0
 .../csi}/csi-ozone-clusterrolebinding.yaml         |  2 +-
 .../csi}/csi-ozone-serviceaccount.yaml             |  2 +-
 .../csi}/csi-provisioner-deployment.yaml           |  0
 .../csi}/org.apache.hadoop.ozone-csidriver.yaml    |  0
 .../csi}/ozone-storageclass.yaml                   |  0
 .../examples/ozone-dev/datanode-statefulset.yaml   |  6 +-
 .../k8s/examples/ozone-dev/om-statefulset.yaml     |  6 +-
 .../prometheus-operator-clusterrolebinding.yaml    |  2 +-
 .../ozone-csi-test-webserver-deployment.yaml}      | 28 +++----
 ...-csi-test-webserver-persistentvolumeclaim.yaml} |  5 +-
 .../pv-test/ozone-csi-test-webserver-service.yaml} |  9 +-
 .../k8s/examples/ozone-dev/s3g-statefulset.yaml    |  6 +-
 .../k8s/examples/ozone-dev/scm-statefulset.yaml    | 12 +--
 .../dist/src/main/k8s/examples/ozone/Flekszible    | 25 ++----
 .../main/k8s/examples/ozone/config-configmap.yaml  |  3 +
 .../k8s/examples/ozone/csi/csi-node-daemonset.yaml | 97 +++++++++++++++++++++
 .../examples/ozone/csi/csi-ozone-clusterrole.yaml  | 98 ++++++++++++++++++++++
 .../csi/csi-ozone-clusterrolebinding.yaml}         | 22 ++---
 .../csi/csi-ozone-serviceaccount.yaml}             |  6 ++
 .../csi/csi-provisioner-deployment.yaml}           | 45 +++++-----
 .../csi/org.apache.hadoop.ozone-csidriver.yaml     | 22 +++++
 .../k8s/examples/ozone/csi/ozone-storageclass.yaml | 21 +++++
 .../k8s/examples/ozone/datanode-statefulset.yaml   |  6 +-
 .../main/k8s/examples/ozone/om-statefulset.yaml    |  6 +-
 .../ozone-csi-test-webserver-deployment.yaml}      | 39 ++++-----
 ...e-csi-test-webserver-persistentvolumeclaim.yaml | 29 +++++++
 .../pv-test/ozone-csi-test-webserver-service.yaml} | 13 +--
 .../main/k8s/examples/ozone/s3g-statefulset.yaml   |  6 +-
 .../main/k8s/examples/ozone/scm-statefulset.yaml   | 12 +--
 47 files changed, 467 insertions(+), 591 deletions(-)

commit 644faa2877420fafcae6b6f2113ff796a3d3f150
Author: Márton Elek <elek@apache.org>
Date:   Thu Jun 13 16:27:23 2019 +0200

    HDDS-1682. TestEventWatcher.testMetrics is flaky
    
    Closes #962.

 .../hadoop/hdds/server/events/EventWatcher.java    | 11 +++++-----
 .../hdds/server/events/TestEventWatcher.java       | 24 +++++++++++++++-------
 2 files changed, 23 insertions(+), 12 deletions(-)

commit f9ca9dac1d8a5b1790c391f7ae0d6026c49b7a18
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Mon Jul 29 10:46:11 2019 +0200

    HDDS-1852. Fix typo in TestOmAcls
    
    Closes #1173

 .../src/test/java/org/apache/hadoop/ozone/om/TestOmAcls.java      | 8 +++-----
 1 file changed, 3 insertions(+), 5 deletions(-)

commit 5379a185e0a9991bc7bb01431ec9e5d362c26878
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Mon Jul 29 10:27:55 2019 +0200

    HDDS-1867. Invalid Prometheus metric name from JvmMetrics
    
    Closes #1172

 .../org/apache/hadoop/hdds/server/PrometheusMetricsSink.java  |  7 +++++--
 .../apache/hadoop/hdds/server/TestPrometheusMetricsSink.java  | 11 +++++++++++
 2 files changed, 16 insertions(+), 2 deletions(-)

commit aa42104261e8826a7ec82feace624852bc4d33ae
Author: Sammi Chen <sammichen@apache.org>
Date:   Sat Jul 27 01:41:34 2019 +0800

    HDDS-1864. Turn on topology aware read in TestFailureHandlingByClient. (#1168)

 .../org/apache/hadoop/ozone/client/rpc/TestFailureHandlingByClient.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6f26dc1878079a11ec313e87fb2ff35c0888970e
Author: Chen, Junjie <jimmyjchen@tencent.com>
Date:   Fri Jul 26 23:14:24 2019 +0800

    HDDS-1839: Change topology sorting related logs in Pipeline from INFO to DEBUG. Contributed by Junjie Chen.
    
    This closes #1158.

 .../src/main/java/org/apache/hadoop/hdds/scm/pipeline/Pipeline.java   | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 98e893f6691b7fa355937e49b3863ee4ab0cd8d6
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jul 25 22:30:06 2019 -0700

    HDDS-1861. Fix TableCacheImpl cleanup logic. (#1165)

 .../main/java/org/apache/hadoop/utils/db/cache/TableCacheImpl.java | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 61c1a94f78ae016a18587c29424f60f680c6d4e9
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Jul 26 08:24:23 2019 +0530

    HDDS-1855. TestStorageContainerManager#testScmProcessDatanodeHeartbeat is failing. (#1153)

 .../hadoop/ozone/TestStorageContainerManager.java  | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit 968942ccd95afcb41999889af1a2fcda944082f9
Author: Siyao Meng <50227127+smengcl@users.noreply.github.com>
Date:   Thu Jul 25 16:14:50 2019 -0700

    HDDS-1830 OzoneManagerDoubleBuffer#stop should wait for daemon thread to die (#1156)

 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java     | 20 +++++++++++++-------
 1 file changed, 13 insertions(+), 7 deletions(-)

commit 970b1ecba3d186b16f496954a3990a62594ca420
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Jul 25 15:07:07 2019 +0530

    HDDS-1850. ReplicationManager should consider inflight replication and deletion while picking datanode for re-replication.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../org/apache/hadoop/hdds/scm/container/ReplicationManager.java  | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 85a7f8a8fd5947cf1d573abbff656b52e052c1ee
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jul 25 09:52:02 2019 -0700

    HDDS-1858. mTLS support for Ozone is not correct. Contributed by Siddharth Wagle.

 hadoop-hdds/common/src/main/java/org/apache/ratis/RatisHelper.java | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 64eaf7405905f30d5bb3c9d2ad34bcde9664ab10
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jul 25 08:51:11 2019 -0700

    HDDS-1842. Implement S3 Abort MPU request to use Cache and DoubleBuffer. (#1155)

 .../org/apache/hadoop/ozone/audit/OMAction.java    |   1 +
 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java   |   3 +
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |   3 +
 .../multipart/S3MultipartUploadAbortRequest.java   | 173 +++++++++++++++++++++
 .../S3InitiateMultipartUploadResponse.java         |  11 ++
 .../multipart/S3MultipartUploadAbortResponse.java  |  83 ++++++++++
 .../OzoneManagerHARequestHandlerImpl.java          |   1 +
 .../ozone/om/request/TestOMRequestUtils.java       |  18 +++
 .../s3/multipart/TestS3MultipartRequest.java       |  40 ++++-
 .../TestS3MultipartUploadAbortRequest.java         | 158 +++++++++++++++++++
 .../multipart/TestS3InitiateMultipartResponse.java |  55 -------
 .../TestS3InitiateMultipartUploadResponse.java     |  45 +-----
 .../s3/multipart/TestS3MultipartResponse.java      | 143 +++++++++++++++++
 .../TestS3MultipartUploadAbortResponse.java        | 129 +++++++++++++++
 14 files changed, 764 insertions(+), 99 deletions(-)

commit 7092ee10963d62de9d12ff556115250e7022e5e6
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Thu Jul 25 07:54:46 2019 -0700

    HDDS-1749 : Ozone Client should randomize the list of nodes in pipeline for reads. (#1124)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java   | 4 ++++
 1 file changed, 4 insertions(+)

commit 4a99bff0f3e22aa4ebb09be9b843d5b1932beb31
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Jul 25 00:42:24 2019 +0530

    HDDS-1817. GetKey fails with IllegalArgumentException.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../hadoop/hdds/scm/container/ContainerInfo.java   |  7 ---
 .../hdds/scm/server/SCMClientProtocolServer.java   | 54 ++++++++++------------
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java | 14 ++++++
 3 files changed, 39 insertions(+), 36 deletions(-)

commit c1e2bffd32d222767815a0c0e25dc7db1ccfe6ea
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jul 24 14:03:40 2019 -0700

    HDDS-1819. Implement S3 Commit MPU request to use Cache and DoubleBuffer. (#1140)

 .../om/ratis/utils/OzoneManagerRatisUtils.java     |   3 +
 .../S3MultipartUploadCommitPartRequest.java        | 217 +++++++++++++++++++++
 .../S3MultipartUploadCommitPartResponse.java       | 109 +++++++++++
 .../OzoneManagerHARequestHandlerImpl.java          |  15 +-
 .../ozone/om/request/TestOMRequestUtils.java       |  32 +++
 .../TestS3InitiateMultipartUploadRequest.java      |  37 +---
 .../s3/multipart/TestS3MultipartRequest.java       |  68 +++++++
 .../TestS3MultipartUploadCommitPartRequest.java    | 209 ++++++++++++++++++++
 8 files changed, 653 insertions(+), 37 deletions(-)

commit 73163d244996eeaeb1a618e87d019b7c2e1517b6
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Jul 25 00:02:28 2019 +0530

    HDDS-1853. Fix failing blockade test-cases. (#1151)

 .../src/main/compose/ozoneblockade/docker-config   |  6 ++--
 .../src/test/blockade/ozone/cluster.py             |  7 +++++
 .../src/test/blockade/ozone/container.py           | 34 +++++++++++++++++-----
 .../test/blockade/test_blockade_client_failure.py  |  8 +++--
 .../blockade/test_blockade_datanode_isolation.py   |  1 +
 .../test/blockade/test_blockade_mixed_failure.py   |  2 ++
 ...t_blockade_mixed_failure_three_nodes_isolate.py |  2 +-
 .../test_blockade_mixed_failure_two_nodes.py       |  2 ++
 .../test/blockade/test_blockade_scm_isolation.py   |  7 +++--
 9 files changed, 52 insertions(+), 17 deletions(-)

commit 7f281b4ca11d601928800d74d5de33feade14544
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Jul 23 20:23:06 2019 -0700

    HDDS-1848. Fix TestOzoneManagerHA and TestOzoneManagerSnapShotProvider. (#1148)

 .../src/test/java/org/apache/hadoop/ozone/MiniOzoneCluster.java      | 3 ++-
 .../test/java/org/apache/hadoop/ozone/MiniOzoneHAClusterImpl.java    | 5 +++++
 2 files changed, 7 insertions(+), 1 deletion(-)

commit 50dedbbfe3f826b34194ec4cf07fbab15b24f005
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Jul 23 14:45:47 2019 -0700

    HDDS-1845. Fix OMVolumeSetQuota|OwnerRequest#validateAndUpdateCache return response. (#1141)

 .../hadoop/ozone/om/request/volume/OMVolumeSetOwnerRequest.java       | 4 +---
 .../hadoop/ozone/om/request/volume/OMVolumeSetQuotaRequest.java       | 3 +--
 2 files changed, 2 insertions(+), 5 deletions(-)

commit 81a62a53ab685efca0a61cdd92a2e071912640e6
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jul 22 17:30:07 2019 -0700

    HDDS-1846. Default value for checksum bytes is different in ozone-site.xml and code.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../common/src/main/java/org/apache/hadoop/ozone/OzoneConfigKeys.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a8ce7708d80fac3fbdb0fdfc9add6ec043e81cf6
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Tue Jul 23 12:44:02 2019 +0200

    HDDS-1710. Fix checkstyle errors
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../common/src/main/java/org/apache/hadoop/hdds/HddsUtils.java | 10 +++++-----
 .../main/java/org/apache/hadoop/ozone/HddsDatanodeService.java |  1 -
 .../apache/hadoop/hdds/scm/server/StorageContainerManager.java |  3 ---
 .../src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java |  2 --
 4 files changed, 5 insertions(+), 11 deletions(-)

commit 00b09f96fa30462a8c1d8bbbb24d2329b4b71a63
Author: Márton Elek <elek@apache.org>
Date:   Thu Jun 20 10:28:42 2019 +0200

    HDDS-1710. Publish JVM metrics via Hadoop metrics
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../main/java/org/apache/hadoop/hdds/HddsUtils.java    | 18 ++++++++++++++++++
 .../org/apache/hadoop/ozone/HddsDatanodeService.java   |  2 +-
 .../hdds/scm/server/StorageContainerManager.java       |  5 ++++-
 .../java/org/apache/hadoop/ozone/om/OzoneManager.java  |  4 +++-
 .../main/java/org/apache/hadoop/ozone/freon/Freon.java |  2 ++
 5 files changed, 28 insertions(+), 3 deletions(-)

commit d0ca3acd3afcbd592943a754bb7406122dcb521d
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Tue Jul 16 05:06:26 2019 +0200

    HDDS-1803. shellcheck.sh does not work on Mac
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-ozone/dev-support/checks/shellcheck.sh | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit cbf9b34bb248d163feed4ca2383a2aead93475fa
Author: Márton Elek <elek@apache.org>
Date:   Tue Jul 16 15:05:56 2019 +0200

    HDDS-1799. Add goofyfs to the ozone-runner docker image
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 hadoop-ozone/dist/pom.xml                    | 2 +-
 hadoop-ozone/dist/src/main/docker/Dockerfile | 4 ----
 2 files changed, 1 insertion(+), 5 deletions(-)

commit 558d5320078f9bec4ba827f5afb49b60e2d7b4c0
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Mon Jul 8 20:43:18 2019 -0700

    HDDS-1585. Add LICENSE.txt and NOTICE.txt to Ozone Recon Web
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../dist/dev-support/bin/dist-layout-stitching     |     3 +-
 .../webapps/recon/ozone-recon-web/LICENSE          | 17279 +++++++++++++++++++
 .../resources/webapps/recon/ozone-recon-web/NOTICE |     5 +
 3 files changed, 17286 insertions(+), 1 deletion(-)

commit 70828648ebe624107210dd7a40c15f1805ea2295
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jul 22 15:11:10 2019 -0700

    HDDS-1686. Remove check to get from openKeyTable in acl implementatio… (#966)

 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 43 ++++------------------
 1 file changed, 8 insertions(+), 35 deletions(-)

commit 91e383802ed1613949be3a031fc26d2c10212059
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Jul 17 23:29:56 2019 +0200

    HDDS-1811. Prometheus metrics are broken.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../common/transport/server/ratis/CSMMetrics.java  |  2 +-
 .../hadoop/hdds/server/PrometheusMetricsSink.java  | 34 +++++-----------------
 .../hdds/server/TestPrometheusMetricsSink.java     | 30 +++++++++++++++----
 3 files changed, 33 insertions(+), 33 deletions(-)

commit 1a3478c3738f2ebdc3d15102da9cb561185ee551
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Mon Jul 22 12:06:55 2019 -0700

    HDDS-1649. On installSnapshot notification from OM leader, download checkpoint and reload OM state (#948)

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 +
 .../common/src/main/resources/ozone-default.xml    |   8 +
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |   3 +
 .../hadoop/ozone/om/exceptions/OMException.java    |   3 +-
 .../ozone/om/protocol/OzoneManagerHAProtocol.java  |   3 +-
 .../src/main/proto/OzoneManagerProtocol.proto      |   2 +
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   6 +
 .../hadoop/ozone/MiniOzoneHAClusterImpl.java       |  49 ++-
 .../hadoop/ozone/om/TestOMRatisSnapshots.java      | 189 +++++++++++
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java |   7 +-
 .../hadoop/ozone/om/OMDBCheckpointServlet.java     |   2 +-
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |   9 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 359 ++++++++++++++++-----
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |  15 +-
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |  81 ++++-
 .../om/snapshot/OzoneManagerSnapshotProvider.java  |   2 +-
 16 files changed, 637 insertions(+), 102 deletions(-)

commit 84cf9b29ab108d8122636765a07f733764c9a84d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jul 22 10:23:48 2019 -0700

    HDDS-1840. Fix TestSecureOzoneContainer. (#1135)

 .../hadoop/ozone/container/ozoneimpl/TestSecureOzoneContainer.java      | 2 ++
 1 file changed, 2 insertions(+)

commit b31531b17fd9d8695feaa783e82ebba27d449dfe
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Jul 20 08:14:23 2019 -0700

    HDDS-1841. Fix TestSecureContainerServer. (#1136)

 .../apache/hadoop/ozone/container/server/TestSecureContainerServer.java | 2 ++
 1 file changed, 2 insertions(+)

commit 011aa49247c77d31aab459a022fde6b09931fccf
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Jul 20 08:11:36 2019 -0700

    HDDS-1805. Implement S3 Initiate MPU request to use Cache and DoubleBuffer. (#1108)

 .../main/java/org/apache/hadoop/ozone/OmUtils.java |   1 -
 .../ozone/om/protocol/OzoneManagerHAProtocol.java  |  15 --
 .../src/main/proto/OzoneManagerProtocol.proto      |   7 -
 .../org/apache/hadoop/ozone/om/KeyManager.java     |  11 --
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  10 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  22 ---
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |  49 +----
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |   3 +
 .../S3InitiateMultipartUploadRequest.java          | 213 +++++++++++++++++++++
 .../om/request/s3/multipart/package-info.java      |  23 +++
 .../S3InitiateMultipartUploadResponse.java         |  69 +++++++
 .../om/response/s3/multipart/package-info.java     |  22 +++
 .../OzoneManagerHARequestHandlerImpl.java          |   1 +
 .../protocolPB/OzoneManagerRequestHandler.java     |  35 ----
 .../ozone/om/request/TestOMRequestUtils.java       |  24 +++
 .../TestS3InitiateMultipartUploadRequest.java      | 174 +++++++++++++++++
 .../s3/multipart/TestS3MultipartRequest.java       |  76 ++++++++
 .../om/request/s3/multipart/package-info.java      |  24 +++
 .../multipart/TestS3InitiateMultipartResponse.java |  55 ++++++
 .../TestS3InitiateMultipartUploadResponse.java     | 100 ++++++++++
 .../om/response/s3/multipart/package-info.java     |  24 +++
 21 files changed, 813 insertions(+), 145 deletions(-)

commit 9d62fb20e9071ea19aaa1346b8cc9ca71da39ed7
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jul 19 17:43:23 2019 -0700

    HDDS-1795. Implement S3 Delete Bucket request to use Cache and DoubleBuffer. (#1097)

 .../org/apache/hadoop/ozone/audit/OMAction.java    |   1 +
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |  13 ++
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |   3 +
 .../request/s3/bucket/S3BucketDeleteRequest.java   | 193 +++++++++++++++++++++
 .../response/s3/bucket/S3BucketCreateResponse.java |   8 +-
 .../response/s3/bucket/S3BucketDeleteResponse.java |  55 ++++++
 .../OzoneManagerHARequestHandlerImpl.java          |   1 +
 .../ozone/om/request/TestOMRequestUtils.java       |  11 ++
 .../s3/bucket/TestS3BucketDeleteRequest.java       | 167 ++++++++++++++++++
 .../ozone/om/response/TestOMResponseUtils.java     |  42 +++++
 .../s3/bucket/TestS3BucketCreateResponse.java      |  41 +----
 .../s3/bucket/TestS3BucketDeleteResponse.java      |  73 ++++++++
 12 files changed, 569 insertions(+), 39 deletions(-)

commit 91db22f3c763052e8317fe74e66268175207b798
Author: Sammi Chen <sammichen@apache.org>
Date:   Sat Jul 20 06:45:26 2019 +0800

    HDDS-1713. ReplicationManager fail to find proper node topology based… (#1112)

 .../hadoop/hdds/protocol/DatanodeDetails.java      |  15 ++-
 .../states/endpoint/RegisterEndpointTask.java      |   4 +
 .../ozone/protocol/commands/RegisteredCommand.java | 121 ++++++---------------
 .../proto/StorageContainerDatanodeProtocol.proto   |   2 +
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |  16 ++-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  81 ++++++++------
 .../hdds/scm/pipeline/PipelineActionHandler.java   |   2 +-
 .../hdds/scm/server/SCMBlockProtocolServer.java    |   8 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  10 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |   6 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  15 ++-
 .../TestSCMContainerPlacementRackAware.java        |  10 +-
 .../hadoop/hdds/scm/node/TestSCMNodeManager.java   |   4 +-
 .../scm/server/TestSCMBlockProtocolServer.java     |  27 ++---
 .../testutils/ReplicationNodeManagerMock.java      |   7 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  55 ++++++++++
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java |  11 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |   7 +-
 18 files changed, 219 insertions(+), 182 deletions(-)

commit 65ec54239354251df3dbe4ba5ddaf6c6d5618f2b
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jul 18 20:00:49 2019 -0700

    HDDS-1653. Add option to "ozone scmcli printTopology" to order the output acccording to topology layer. Contributed by Xiaoyu Yao.  (#1067)
    
    * HDDS-1653. Add option to "ozone scmcli printTopology" to order the output acccording to topology layer. Contributed by Xiaoyu Yao.
    
    * use ip/hostname instead of network name for -o output and add smoke test

 .../hadoop/hdds/scm/cli/TopologySubcommand.java    | 60 +++++++++++++++++++---
 .../dist/src/main/compose/ozone-topology/test.sh   |  2 +
 .../dist/src/main/smoketest/topology/scmcli.robot  | 32 ++++++++++++
 3 files changed, 86 insertions(+), 8 deletions(-)

commit e4e248004e7c091cae835a2ec0b4355c49786443
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Thu Jul 18 22:28:03 2019 +0200

    HDDS-1822. NPE in SCMCommonPolicy.chooseDatanodes (#1120)

 .../placement/algorithms/SCMCommonPolicy.java      |  4 +++-
 .../algorithms/TestContainerPlacementFactory.java  | 25 +++++++++++++++-------
 2 files changed, 20 insertions(+), 9 deletions(-)

commit d20288628908d21d629c568fc03e5d9b7f1d8281
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jul 18 09:36:15 2019 -0700

    HDDS-1820. Fix numKeys metrics in OM HA. (#1116)

 .../hadoop/ozone/om/request/key/OMKeyCommitRequest.java       | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit a98eb42d97d0e472ebca1f940bac8737bf0ae8ba
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Jul 18 19:57:12 2019 +0530

    HDDS-1779. TestWatchForCommit tests are flaky.Contributed by Shashikant Banerjee. (#1071)

 .../ozone/client/rpc/Test2WayCommitInRatis.java    | 156 +++++++++++++++++++++
 .../ozone/client/rpc/TestWatchForCommit.java       | 100 ++++---------
 2 files changed, 187 insertions(+), 69 deletions(-)

commit 30c1a5d6497ffcf867968dec8b22cea4357a6a97
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Jul 18 17:09:05 2019 +0530

    HDDS-1654. Ensure container state on datanode gets synced to disk whennever state change happens. Cotributed by Shashikant Banerjee. (#923)

 .../hadoop/ozone/container/common/impl/ContainerDataYaml.java    | 9 +++++++--
 .../common/transport/server/ratis/ContainerStateMachine.java     | 3 +++
 2 files changed, 10 insertions(+), 2 deletions(-)

commit a79dc4609a975d46a3e051ad6904fb1eb40705ee
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Jul 18 16:01:58 2019 +0530

    HDDS-1780. TestFailureHandlingByClient tests are flaky. Contributed by Shashikant Banerjee. (#1073)

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |   6 +-
 .../hadoop/hdds/scm/storage/BlockOutputStream.java |   3 +-
 .../client/rpc/TestFailureHandlingByClient.java    |  52 +------
 .../rpc/TestMultiBlockWritesWithDnFailures.java    | 168 +++++++++++++++++++++
 4 files changed, 180 insertions(+), 49 deletions(-)

commit b50ce18989ad263c7b8f0bce5c3668ec092d04e7
Author: Lokesh Jain <ljain@apache.org>
Date:   Thu Jul 18 14:48:13 2019 +0530

    HDDS-1767: ContainerStateMachine should have its own executors for executing applyTransaction calls (#1087)

 .../server/ratis/ContainerStateMachine.java        | 28 ++++++++---
 .../transport/server/ratis/XceiverServerRatis.java | 55 ++++++++--------------
 2 files changed, 42 insertions(+), 41 deletions(-)

commit 54d64de0ce52a218daa605db6c1ad86553f105e9
Author: Lokesh Jain <ljain@apache.org>
Date:   Thu Jul 18 14:40:45 2019 +0530

    HDDS-1481: Cleanup BasicOzoneFileSystem#mkdir (#1114)

 .../hadoop/fs/ozone/BasicOzoneFileSystem.java      | 41 ++--------------------
 1 file changed, 2 insertions(+), 39 deletions(-)

commit 61719726d6f18a4dc82710d608db916cece2a49f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jul 17 21:46:27 2019 -0700

    HDDS-1689. Implement S3 Create Bucket request to use Cache and DoubleBuffer. (#1088)

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   5 +
 .../org/apache/hadoop/ozone/audit/OMAction.java    |   3 +
 .../hadoop/ozone/om/exceptions/OMException.java    |   2 +
 .../src/main/proto/OzoneManagerProtocol.proto      |  13 +
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |  24 ++
 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java   |   1 +
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |   3 +
 .../request/s3/bucket/S3BucketCreateRequest.java   | 361 +++++++++++++++++++++
 .../ozone/om/request/s3/bucket/package-info.java   |  23 ++
 .../om/request/volume/OMVolumeCreateRequest.java   |  36 +-
 .../om/request/volume/OMVolumeDeleteRequest.java   |   4 +-
 .../ozone/om/request/volume/OMVolumeRequest.java   |  45 ++-
 .../om/request/volume/OMVolumeSetOwnerRequest.java |   4 +-
 .../om/request/volume/OMVolumeSetQuotaRequest.java |   3 +-
 .../response/s3/bucket/S3BucketCreateResponse.java |  73 +++++
 .../ozone/om/response/s3/bucket/package-info.java  |  24 ++
 .../OzoneManagerHARequestHandlerImpl.java          |   1 +
 .../ozone/om/request/TestOMRequestUtils.java       |  20 ++
 .../s3/bucket/TestS3BucketCreateRequest.java       | 246 ++++++++++++++
 .../ozone/om/request/s3/bucket/package-info.java   |  23 ++
 .../request/volume/TestOMVolumeCreateRequest.java  |  27 +-
 .../s3/bucket/TestS3BucketCreateResponse.java      | 119 +++++++
 .../ozone/om/response/s3/bucket/package-info.java  |  23 ++
 23 files changed, 1044 insertions(+), 39 deletions(-)

commit 6302b9ccd6a2a97c0d663b66b6ff3cc89a341b56
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jul 17 18:19:06 2019 -0700

    HDDS-1802. Add Eviction policy for table cache. (#1100)

 .../java/org/apache/hadoop/utils/db/DBStore.java   | 14 +++-
 .../java/org/apache/hadoop/utils/db/RDBStore.java  |  9 +++
 .../org/apache/hadoop/utils/db/TypedTable.java     | 86 ++++++++++++++++++----
 .../apache/hadoop/utils/db/cache/CacheResult.java  | 58 +++++++++++++++
 .../apache/hadoop/utils/db/cache/TableCache.java   | 31 +++++++-
 ...{PartialTableCache.java => TableCacheImpl.java} | 79 +++++++++++++++++---
 ...tialTableCache.java => TestTableCacheImpl.java} | 71 +++++++++++++-----
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  7 +-
 8 files changed, 306 insertions(+), 49 deletions(-)

commit 9f3b7df3371e2aa1fb5ad62510ab7ed63dcf0bf7
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jul 17 14:13:06 2019 -0700

    HDDS-1675. Cleanup Volume Request 2 phase old code. (#964)

 .../ozone/om/helpers/OmDeleteVolumeResponse.java   |  49 ------
 .../om/helpers/OmVolumeOwnerChangeResponse.java    |  56 -------
 .../ozone/om/protocol/OzoneManagerHAProtocol.java  |  77 ----------
 .../src/main/proto/OzoneManagerProtocol.proto      |   7 -
 .../org/apache/hadoop/ozone/om/TestOmMetrics.java  |   6 +-
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |   3 -
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  77 ----------
 .../hadoop/ozone/om/S3BucketManagerImpl.java       |  13 +-
 .../org/apache/hadoop/ozone/om/VolumeManager.java  |  50 +-----
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  | 102 ++-----------
 .../protocolPB/OzoneManagerHARequestHandler.java   |  11 --
 .../OzoneManagerHARequestHandlerImpl.java          | 168 ---------------------
 .../request/volume/TestOMVolumeDeleteRequest.java  |  18 +--
 13 files changed, 29 insertions(+), 608 deletions(-)

commit bab4e196dc8a25e0b6f8e33cb8655e97c450133f
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Wed Jul 17 12:05:43 2019 -0700

    HDDS-1721 : Client Metrics are not being pushed to the configured sink while running a hadoop command to write to Ozone. (#1034)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientMetrics.java   | 1 +
 1 file changed, 1 insertion(+)

commit 05cd44de02e589137467a1d731821d812843c6f0
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Jul 15 14:28:53 2019 -0700

    HDDS-1801. Make Topology Aware Replication/Read non-default for ozone 0.4.1. Contributed by Xiaoyu Yao.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../main/java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java    | 7 ++++---
 .../src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java    | 6 +-----
 hadoop-hdds/common/src/main/resources/ozone-default.xml            | 6 +++---
 .../placement/algorithms/ContainerPlacementPolicyFactory.java      | 6 +++++-
 hadoop-ozone/dist/src/main/compose/ozone-topology/docker-config    | 7 ++++---
 5 files changed, 17 insertions(+), 15 deletions(-)

commit 5c309798394318089ea4f4d0f6ddf2a9256670a0
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Wed Jul 17 14:47:01 2019 +0200

    HDDS-1785. OOM error in Freon due to the concurrency handling
    
    Closes #1085

 .../hadoop/ozone/freon/RandomKeyGenerator.java     | 308 ++++++++++++---------
 1 file changed, 174 insertions(+), 134 deletions(-)

commit acf5150666862e92257420282423310bf50fe539
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Tue Jul 16 16:59:57 2019 -0700

    HDDS-1775. Make OM KeyDeletingService compatible with HA model (#1063)

 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  12 ++
 .../org/apache/hadoop/ozone/audit/OMAction.java    |   2 +
 .../src/main/proto/OzoneManagerProtocol.proto      |  14 +-
 .../org/apache/hadoop/ozone/om/TestKeyPurging.java | 138 +++++++++++++++++++
 .../apache/hadoop/ozone/om/KeyDeletingService.java | 123 ++++++++++++++---
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  37 ++++--
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  54 +++++++-
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |   3 +
 .../ozone/om/request/key/OMKeyDeleteRequest.java   |  22 +++-
 .../ozone/om/request/key/OMKeyPurgeRequest.java    |  48 +++++++
 .../ozone/om/response/key/OMKeyDeleteResponse.java |  14 +-
 .../ozone/om/response/key/OMKeyPurgeResponse.java  |  36 +++++
 .../OzoneManagerHARequestHandlerImpl.java          |   1 +
 .../ozone/om/request/TestOMRequestUtils.java       |  19 +++
 .../key/TestOMKeyPurgeRequestAndResponse.java      | 146 +++++++++++++++++++++
 .../om/response/key/TestOMKeyDeleteResponse.java   |  22 +++-
 16 files changed, 642 insertions(+), 49 deletions(-)

commit 795bda07916101add24f0085a1215b662778add5
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Jul 16 13:47:51 2019 -0700

    HDDS-1813. Fix false warning from ozones3 acceptance test. Contributed by Xiaoyu Yao. (#1107)

 hadoop-ozone/dist/src/main/smoketest/s3/bucketcreate.robot | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bb8be97bbfa8cc37b5ae95cb58d53b4aa91acfdd
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Jul 15 17:39:21 2019 -0700

    HDDS-1544. Support default Acls for volume, bucket, keys and prefix. Contributed by Ajay Kumar, Xiaoyu Yao.
    
    Signed-off-by: Anu Engineer <aengineer@apache.org>

 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  15 +-
 .../java/org/apache/hadoop/ozone/OzoneAcl.java     | 103 ++++++++++--
 .../hadoop/ozone/om/helpers/OmBucketArgs.java      |   9 +-
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      |   4 +-
 .../hadoop/ozone/om/helpers/OmOzoneAclMap.java     |  84 +++++++---
 .../hadoop/ozone/om/helpers/OmPrefixInfo.java      |   5 +-
 .../ozone/om/protocol/OzoneManagerProtocol.java    |   3 +-
 .../apache/hadoop/ozone/protocolPB/OMPBHelper.java |  71 ---------
 .../apache/hadoop/ozone/web/utils/OzoneUtils.java  |  36 ++++-
 .../src/main/proto/OzoneManagerProtocol.proto      |   6 +
 .../org/apache/hadoop/ozone/TestOzoneAcls.java     |  80 +++++++++-
 .../ozone/om/codec/TestOmPrefixInfoCodec.java      |   3 +-
 .../src/main/smoketest/basic/ozone-shell.robot     |  36 ++---
 .../main/smoketest/security/ozone-secure-fs.robot  |  36 ++---
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 176 +++++++++++++++++----
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java |  15 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |  11 +-
 .../security/acl/TestOzoneNativeAuthorizer.java    |  21 ++-
 .../hadoop/ozone/web/client/TestBuckets.java       |   2 +-
 .../web/storage/DistributedStorageHandler.java     |  15 +-
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  13 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 107 +++++++++++--
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  22 ++-
 .../apache/hadoop/ozone/om/PrefixManagerImpl.java  |  52 +++++-
 .../hadoop/ozone/om/S3BucketManagerImpl.java       |   5 +-
 .../web/ozShell/bucket/UpdateBucketHandler.java    |   3 +-
 .../hadoop/ozone/om/TestBucketManagerImpl.java     |   9 +-
 27 files changed, 673 insertions(+), 269 deletions(-)

commit b7d9d493485b39ee7159eb6a42fdd0bd9ebb3f61
Author: Sammi Chen <sammichen@apache.org>
Date:   Wed Jul 17 03:52:29 2019 +0800

    HDDS-1787. NPE thrown while trying to find DN closest to client. Contributed by Sammi Chen. (#1094)

 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  18 ++-
 .../hdds/scm/server/SCMBlockProtocolServer.java    |   7 +-
 .../scm/server/TestSCMBlockProtocolServer.java     | 153 +++++++++++++++++++++
 3 files changed, 174 insertions(+), 4 deletions(-)

commit 4bfdf05a67644266bbfcfb3152bc5227d4d1a904
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Tue Jul 16 16:52:14 2019 +0200

    HDDS-1793. Acceptance test of ozone-topology cluster is failing
    
    Closes #1096

 .../compose/ozone-topology/docker-compose.yaml     |  6 -----
 .../dist/src/main/compose/ozone-topology/test.sh   |  2 +-
 hadoop-ozone/dist/src/main/compose/testlib.sh      | 28 +++++++++++++---------
 3 files changed, 18 insertions(+), 18 deletions(-)

commit 9a4bd07110b7f75eaa86ea718631c6c007b9006c
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Jul 16 18:01:13 2019 +0530

    HDDS-1492. Generated chunk size name too long. Contributed  by Shashikannt Banerjee. (#1084)

 .../hadoop/hdds/scm/storage/BlockOutputStream.java     | 18 +++++-------------
 .../hadoop/ozone/client/io/BlockOutputStreamEntry.java |  2 +-
 2 files changed, 6 insertions(+), 14 deletions(-)

commit 7f9d9aee1bca5984a5270102463b182d017a246a
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Jul 16 15:06:41 2019 +0530

    HDDS-1756. DeleteContainerCommandHandler fails with NPE. Contributed by Nanda kumar(#1095).

 .../apache/hadoop/ozone/container/ozoneimpl/ContainerController.java  | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 4ba5aa488dde255cabc1da572329c207bf7f27fe
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jul 15 21:51:59 2019 -0700

    HDDS-1736. Cleanup 2phase old HA code for Key requests. (#1038)

 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  1 -
 .../org/apache/hadoop/ozone/audit/OMAction.java    |  2 -
 .../ozone/om/protocol/OzoneManagerHAProtocol.java  | 40 ----------
 .../src/main/proto/OzoneManagerProtocol.proto      |  7 --
 .../org/apache/hadoop/ozone/om/KeyManager.java     | 32 --------
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 93 ++--------------------
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |  9 ---
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 60 --------------
 .../ozone/om/ratis/OzoneManagerStateMachine.java   | 13 ---
 .../om/request/key/OMAllocateBlockRequest.java     |  2 +-
 .../protocolPB/OzoneManagerRequestHandler.java     | 34 +-------
 11 files changed, 10 insertions(+), 283 deletions(-)

commit 7cd0bd5638ee2774d33352cd82ca48eaa746225f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jul 15 17:54:41 2019 -0700

    HDDS-1666. Issue in openKey when allocating block. (#943)

 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java | 25 ++++++++++++++++++++--
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  4 ++--
 2 files changed, 25 insertions(+), 4 deletions(-)

commit 5d7f1edd9c61a1a1d372dbced857b856c0d44e38
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jul 15 17:53:19 2019 -0700

    HDDS-1761. Fix class hierarchy for KeyRequest and FileRequest classes. (#1052)

 .../om/request/file/OMDirectoryCreateRequest.java  |  10 +-
 .../ozone/om/request/file/OMFileCreateRequest.java |  12 +-
 .../om/request/key/OMAllocateBlockRequest.java     |   4 +-
 .../ozone/om/request/key/OMKeyCommitRequest.java   |   4 +-
 .../ozone/om/request/key/OMKeyCreateRequest.java   | 263 +------------------
 .../ozone/om/request/key/OMKeyDeleteRequest.java   |   8 +-
 .../ozone/om/request/key/OMKeyRenameRequest.java   |  15 +-
 .../hadoop/ozone/om/request/key/OMKeyRequest.java  | 284 +++++++++++++++++++--
 8 files changed, 290 insertions(+), 310 deletions(-)

commit 8174fc371a01a0568010352020156f2018f9ed86
Merge: c40f7556 1684ab45
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jul 15 13:19:32 2019 -0700

    Merge pull request #944 from elek/HDDS-1668
    
    HDDS-1668. Add liveness probe to the example k8s resources files

commit c40f7556af6fcba4d88878f5c1bf20ab92508be1
Merge: 5944cf6f 3af80eb6
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jul 15 13:17:21 2019 -0700

    Merge pull request #1058 from elek/HDDS-1763
    
    HDDS-1763. Use vendor neutral s3 logo in ozone doc

commit 5944cf6f45b0fd26d9930443eeab1fbf0eb349ff
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Mon Jul 15 18:00:10 2019 +0200

    HDDS-1800. Result of author check is inverted
    
    Closes #1092

 hadoop-ozone/dev-support/checks/author.sh | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 7c091dc130605d5ce1ae82aa8ab6711188b2aed9
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Sun Jul 14 10:53:51 2019 +0530

    HDDS-1766. ContainerStateMachine is unable to increment lastAppliedTermIndex. Contributed by  Mukul Kumar Singh. (#1072)

 .../server/ratis/ContainerStateMachine.java        | 39 +++++++++++-----------
 1 file changed, 20 insertions(+), 19 deletions(-)

commit 4da6a4fe60f5c3c23738a88e940efa9ecd8be1db
Merge: f222e98a 87cf92d5
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jul 12 09:25:00 2019 -0700

    HDDS-1735. Create separate unit and integration test executor dev-support script. Contributed by Elek, Marton.

commit f222e98a4bee8a4a3fae98b92a516dfad5d98e7f
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Jul 12 14:42:29 2019 +0200

    HDDS-1790. Fix checkstyle issues in TestDataScrubber
    
    Closes #1082

 .../apache/hadoop/ozone/dn/scrubber/TestDataScrubber.java    | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 68d555c024be79b332739bcb1f79fbb66c5e158f
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Jul 12 14:38:22 2019 +0200

    HDDS-1791. Update network-tests/src/test/blockade/README.md file
    
    Closes #1083

 .../network-tests/src/test/blockade/README.md      | 40 ++++++----------------
 1 file changed, 11 insertions(+), 29 deletions(-)

commit 87cf92d57f62f0e075b72775ff23d94ef9db9c02
Author: Márton Elek <elek@apache.org>
Date:   Fri Jul 12 11:35:34 2019 +0200

    make author check yetus safe

 hadoop-ozone/dev-support/checks/author.sh | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit ccc932e80ae1cc41ae7ee6cc7333739078472066
Author: Márton Elek <elek@apache.org>
Date:   Mon Jul 8 00:04:08 2019 +0200

    reenable unit test execution

 hadoop-ozone/dev-support/checks/unit.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cfe776f7c207da4c78ee8a58e1935bf9d680dd9e
Author: Márton Elek <elek@apache.org>
Date:   Wed Jul 3 22:13:48 2019 +0200

    fix rat problem

 hadoop-ozone/dev-support/checks/rat.sh | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 1d24062868941a0390ea72a5b846fed3e10b5959
Author: Márton Elek <elek@apache.org>
Date:   Wed Jul 3 20:10:55 2019 +0200

    fix print0 consequences

 hadoop-ozone/dev-support/checks/checkstyle.sh  |  2 +-
 hadoop-ozone/dev-support/checks/findbugs.sh    |  4 ++--
 hadoop-ozone/dev-support/checks/integration.sh |  2 +-
 hadoop-ozone/dev-support/checks/shellcheck.sh  | 28 ++++++++++++++++++++++++++
 hadoop-ozone/dev-support/checks/unit.sh        |  4 ++--
 5 files changed, 34 insertions(+), 6 deletions(-)

commit 9a22da8b70f218d5d22ec583c38fb7fc725f1402
Author: Márton Elek <elek@apache.org>
Date:   Wed Jul 3 08:21:08 2019 +0200

    fixing ALL the checkstule issues under hadoop-ozone/dev-support/checks

 hadoop-ozone/dev-support/checks/acceptance.sh  |  7 +++++--
 hadoop-ozone/dev-support/checks/author.sh      |  7 +++++--
 hadoop-ozone/dev-support/checks/build.sh       |  3 +++
 hadoop-ozone/dev-support/checks/checkstyle.sh  |  7 +++++--
 hadoop-ozone/dev-support/checks/findbugs.sh    | 10 ++++++----
 hadoop-ozone/dev-support/checks/integration.sh |  7 +++++--
 hadoop-ozone/dev-support/checks/isolation.sh   |  7 +++++--
 hadoop-ozone/dev-support/checks/rat.sh         |  8 +++++---
 hadoop-ozone/dev-support/checks/unit.sh        |  4 ++--
 9 files changed, 41 insertions(+), 19 deletions(-)

commit 89d835fcdc37438f68c8c1987cb67658d5d52f5b
Author: Márton Elek <elek@apache.org>
Date:   Sat Jun 29 01:59:44 2019 +0200

    HDDS-1735. Create separate unit and integration test executor dev-support script

 hadoop-ozone/dev-support/checks/acceptance.sh  |  3 ++-
 hadoop-ozone/dev-support/checks/author.sh      |  1 -
 hadoop-ozone/dev-support/checks/build.sh       |  2 +-
 hadoop-ozone/dev-support/checks/checkstyle.sh  |  5 ++++-
 hadoop-ozone/dev-support/checks/findbugs.sh    |  2 +-
 hadoop-ozone/dev-support/checks/integration.sh | 25 +++++++++++++++++++++++++
 hadoop-ozone/dev-support/checks/rat.sh         |  5 ++++-
 hadoop-ozone/dev-support/checks/unit.sh        |  2 +-
 8 files changed, 38 insertions(+), 7 deletions(-)

commit 73422d275a7e7262ec33013c383716c1ee9727df
Author: Márton Elek <elek@apache.org>
Date:   Thu Jul 11 12:46:39 2019 +0200

    HDDS-1384. TestBlockOutputStreamWithFailures is failing
    
    Closes #1029

 .../common/transport/server/XceiverServerGrpc.java | 37 +++++++-------
 .../transport/server/ratis/XceiverServerRatis.java | 38 ++++++++-------
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  | 56 ++++++++++++++++------
 3 files changed, 83 insertions(+), 48 deletions(-)

commit dba9dec009bad36f794dc08e9e7112440d776c3e
Author: Hrishikesh Gadre <hgadre@gmail.com>
Date:   Fri Jul 12 01:45:48 2019 -0700

     HDDS-1752. ConcurrentModificationException while handling DeadNodeHandler event. (#1080)

 .../java/org/apache/hadoop/hdds/scm/node/states/Node2PipelineMap.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b740afce7c2c77ef581b53c736a48ce71ef68353
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Fri Jul 12 10:31:48 2019 +0530

    HDDS-1754. getContainerWithPipeline fails with PipelineNotFoundException. Contributed by Supratim Deka (#1081)

 .../java/org/apache/hadoop/hdds/scm/container/ContainerInfo.java  | 8 ++++++++
 .../apache/hadoop/hdds/scm/server/SCMClientProtocolServer.java    | 2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

commit 86c9628f8c4a1d6f2bc8881869fd2c38eb646e20
Merge: 07ed4ec0 5344a2c9
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jul 11 17:17:05 2019 -0700

    HDDS-1784. Missing HostName and IpAddress in the response of register command. (#1078)

commit 5344a2c9e5ff866f67f353be203c29108348b9db
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Jul 11 19:01:06 2019 +0530

    HDDS-1784. Missing HostName and IpAddress in the response of register command.

 .../org/apache/hadoop/hdds/scm/server/SCMDatanodeProtocolServer.java    | 2 ++
 1 file changed, 2 insertions(+)

commit 07ed4ec045cf70efa446b361206945260bff4803
Author: Hrishikesh Gadre <hgadre@gmail.com>
Date:   Thu Jul 11 02:19:58 2019 -0700

    HDDS-1201. Reporting corrupted containers info to SCM (#1032)

 .../container/common/interfaces/Container.java     |   4 +-
 .../states/endpoint/HeartbeatEndpointTask.java     |   6 +-
 .../container/keyvalue/KeyValueContainer.java      |  20 +-
 .../container/keyvalue/KeyValueContainerCheck.java |  46 ++---
 .../ozone/container/keyvalue/KeyValueHandler.java  |  13 +-
 .../container/ozoneimpl/ContainerController.java   |  12 ++
 .../container/ozoneimpl/ContainerScrubber.java     |  31 +--
 .../keyvalue/TestKeyValueContainerCheck.java       |  11 +-
 .../IncrementalContainerReportHandler.java         |   2 +
 .../hadoop/ozone/dn/scrubber/TestDataScrubber.java | 211 +++++++++++++++++++++
 10 files changed, 288 insertions(+), 68 deletions(-)

commit 1cd618228de73db6bb4dd0b259f96b6c33e9d4c5
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jul 10 11:28:18 2019 -0700

    HDDS-1611.[Addendum] Evaluate ACL on volume bucket key and prefix to authorize access. Contributed by Ajay Kumar. (#973)
    
    Fixes a build break in ozone.

 .../main/java/org/apache/hadoop/fs/ozone/BasicOzoneFileSystem.java | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

commit 91e2e01df439c6eb82eba4dbf03c91aaadd2b630
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Wed Jul 10 11:03:58 2019 -0700

    HDDS-1611. Evaluate ACL on volume bucket key and prefix to authorize access. Contributed by Ajay Kumar. (#973)

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   6 +
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |   1 +
 .../java/org/apache/hadoop/ozone/OzoneAcl.java     |  46 +-
 .../hadoop/ozone/om/helpers/OmOzoneAclMap.java     |  80 +++-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |   2 +
 .../apache/hadoop/ozone/protocolPB/OMPBHelper.java |  15 +-
 .../ozone/security/acl/IAccessAuthorizer.java      |  15 +-
 .../apache/hadoop/ozone/web/utils/OzoneUtils.java  | 102 ++++-
 .../src/main/proto/OzoneManagerProtocol.proto      |  13 +-
 .../org/apache/hadoop/ozone/TestOzoneAcls.java     |   8 +-
 .../src/main/compose/ozonesecure-mr/docker-config  |   1 +
 .../src/main/compose/ozonesecure/docker-config     |   5 +-
 .../dist/src/main/smoketest/__init__.robot         |   2 +-
 .../src/main/smoketest/basic/ozone-shell.robot     |  21 +-
 .../dist/src/main/smoketest/commonlib.robot        |   5 +-
 .../dist/src/main/smoketest/createbucketenv.robot  |   2 +-
 .../dist/src/main/smoketest/createmrenv.robot      |   2 +-
 hadoop-ozone/dist/src/main/smoketest/kinit.robot   |   2 +-
 .../dist/src/main/smoketest/ozonefs/ozonefs.robot  |  12 +-
 .../dist/src/main/smoketest/s3/awss3.robot         |   2 +-
 .../main/smoketest/security/ozone-secure-fs.robot  |  50 ++-
 .../hadoop/ozone/TestOzoneConfigurationFields.java |   3 +
 .../client/rpc/TestOzoneRpcClientAbstract.java     |   5 +-
 .../org/apache/hadoop/ozone/om/TestOmAcls.java     |  12 +-
 .../hadoop/ozone/om/TestOmBlockVersioning.java     |   6 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |  13 +-
 .../security/acl/TestOzoneNativeAuthorizer.java    | 464 +++++++++++++++++++++
 .../apache/hadoop/ozone/web/client/TestVolume.java |   4 +-
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  46 ++
 .../java/org/apache/hadoop/ozone/om/IOzoneAcl.java |  13 +
 .../org/apache/hadoop/ozone/om/KeyManager.java     |   2 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  98 ++++-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 141 +++++--
 .../apache/hadoop/ozone/om/PrefixManagerImpl.java  |  39 ++
 .../hadoop/ozone/om/S3BucketManagerImpl.java       |  24 +-
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  |  66 ++-
 .../protocolPB/OzoneManagerRequestHandler.java     |   6 +-
 .../ozone/security/acl/OzoneNativeAuthorizer.java  | 120 ++++++
 .../hadoop/ozone/security/acl/package-info.java    |  22 +
 .../web/ozShell/volume/ListVolumeHandler.java      |   2 +-
 .../hadoop/fs/ozone/BasicOzoneFileSystem.java      |  19 +-
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |   2 +-
 42 files changed, 1315 insertions(+), 184 deletions(-)

commit 317352b9edf67f98202bee05c88b25fdd55858ff
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Jul 10 22:13:59 2019 +0530

    HDDS-1778. Fix existing blockade tests. (#1068)

 .../src/main/compose/ozoneblockade/docker-config   |   3 +
 .../test/blockade/clusterUtils/cluster_utils.py    | 335 -------------
 .../blockade/{blockadeUtils => ozone}/blockade.py  |  16 +-
 .../src/test/blockade/ozone/client.py              |  75 +++
 .../src/test/blockade/ozone/cluster.py             | 526 ++++++++++-----------
 .../__init__.py => ozone/constants.py}             |  11 +-
 .../src/test/blockade/ozone/container.py           | 117 +++++
 .../__init__.py => ozone/exceptions.py}            |  10 +-
 .../src/test/blockade/{ => ozone}/util.py          |  56 ++-
 .../test/blockade/test_blockade_client_failure.py  | 158 +++----
 .../blockade/test_blockade_datanode_isolation.py   | 228 ++++-----
 .../src/test/blockade/test_blockade_flaky.py       |  42 +-
 .../test/blockade/test_blockade_mixed_failure.py   | 240 ++++------
 ...t_blockade_mixed_failure_three_nodes_isolate.py | 357 ++++++--------
 .../test_blockade_mixed_failure_two_nodes.py       | 275 +++++------
 .../test/blockade/test_blockade_scm_isolation.py   | 252 ++++------
 16 files changed, 1185 insertions(+), 1516 deletions(-)

commit caddc83c214d8efc562cacc50d5607784b0d4437
Author: Márton Elek <elek@apache.org>
Date:   Wed Jul 10 14:27:55 2019 +0200

    HDDS-1525. Mapreduce failure when using Hadoop 2.7.5
    
    Closes #1065

 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |   8 +-
 .../ozone-mr/{docker-config => common-config}      |  44 ---------
 .../compose/{ozonefs => ozone-mr/hadoop27}/.env    |   8 +-
 .../compose/ozone-mr/hadoop27/docker-compose.yaml  | 102 +++++++++++++++++++
 .../main/compose/ozone-mr/hadoop27/docker-config   |  19 ++++
 .../compose/{ozonefs => ozone-mr/hadoop27}/test.sh |  17 ++--
 .../dist/src/main/compose/ozone-mr/hadoop31/.env   |  22 +++++
 .../ozone-mr/{ => hadoop31}/docker-compose.yaml    |  28 +++---
 .../main/compose/ozone-mr/hadoop31/docker-config   |  19 ++++
 .../src/main/compose/ozone-mr/hadoop31/test.sh     |  45 +++++++++
 .../src/main/compose/ozone-mr/{ => hadoop32}/.env  |   4 +-
 .../compose/ozone-mr/hadoop32/docker-compose.yaml  | 104 ++++++++++++++++++++
 .../main/compose/ozone-mr/hadoop32/docker-config   |  19 ++++
 .../main/compose/ozone-mr/{ => hadoop32}/test.sh   |   8 +-
 .../src/main/compose/ozonefs/docker-compose.yaml   | 100 -------------------
 .../dist/src/main/compose/ozonefs/docker-config    |  38 --------
 .../dist/src/main/compose/ozonefs/hadoopo3fs.robot |  56 -----------
 hadoop-ozone/dist/src/main/compose/testlib.sh      |  21 +++-
 .../src/main/smoketest/ozonefs/hadoopo3fs.robot    |   2 +-
 hadoop-ozone/ozonefs-lib-legacy/pom.xml            |  30 +++++-
 .../java/org/apache/hadoop/fs/ozone/BasicOzFs.java |  45 +++++++++
 .../fs/ozone/BasicOzoneClientAdapterImpl.java      |  56 +++++++++--
 .../hadoop/fs/ozone/BasicOzoneFileSystem.java      |  52 +++++++---
 .../apache/hadoop/fs/ozone/FileStatusAdapter.java  | 108 +++++++++++++++++++++
 .../hadoop/fs/ozone/FilteredClassLoader.java       |   6 +-
 .../apache/hadoop/fs/ozone/OzoneClientAdapter.java |  20 ++--
 26 files changed, 675 insertions(+), 306 deletions(-)

commit 365f057403c2c533953420f43dbca177ec3ffe53
Author: Márton Elek <elek@apache.org>
Date:   Wed Jul 10 13:22:51 2019 +0200

    HDDS-1764. Fix hidden errors in acceptance tests
    
    Closes #1059

 hadoop-ozone/dist/src/main/compose/ozone-mr/docker-compose.yaml       | 2 +-
 hadoop-ozone/dist/src/main/compose/ozonesecure-mr/docker-compose.yaml | 4 ++--
 hadoop-ozone/dist/src/main/compose/test-all.sh                        | 3 ++-
 3 files changed, 5 insertions(+), 4 deletions(-)

commit 700f38a5041d270f318bce2656b46360f72b616b
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Wed Jul 10 16:45:55 2019 +0530

    HDDS-1748. Error message for 3 way commit failure is not verbose. Contributed by Supratim Deka (#1051)

 .../main/java/org/apache/hadoop/hdds/scm/XceiverClientRatis.java   | 7 ++++---
 .../java/org/apache/hadoop/hdds/scm/storage/BlockOutputStream.java | 7 ++++---
 2 files changed, 8 insertions(+), 6 deletions(-)

commit dfd7ac3097ed7cae1d1add1667b15c95482b6868
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Wed Jul 10 07:49:36 2019 +0530

    HDDS-1603. Handle Ratis Append Failure in Container State Machine. Contributed by Supratim Deka (#1019)

 .../server/ratis/ContainerStateMachine.java        |  5 ++
 .../transport/server/ratis/XceiverServerRatis.java | 30 +++++++-
 .../proto/StorageContainerDatanodeProtocol.proto   |  1 +
 .../hdds/scm/pipeline/TestPipelineClose.java       | 81 ++++++++++++++++++++++
 4 files changed, 115 insertions(+), 2 deletions(-)

commit 9ff78232ce187e65820eb4c03b5045b306e84729
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Jul 9 14:43:55 2019 -0700

    HDDS-1586. Allow Ozone RPC client to read with topology awareness. Contributed by Sammi Chen.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  37 +++++--
 .../hadoop/hdds/scm/XceiverClientManager.java      |  68 ++++++++++++-
 .../hadoop/hdds/scm/storage/BlockInputStream.java  |   4 +-
 .../hadoop/hdds/protocol/DatanodeDetails.java      |  28 +++++-
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   4 +
 .../hadoop/hdds/scm/net/NetworkTopology.java       |   4 +-
 .../hadoop/hdds/scm/net/NetworkTopologyImpl.java   |  53 ++++++----
 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  |  79 ++++++++++++++-
 .../scm/protocol/ScmBlockLocationProtocol.java     |   9 ++
 ...lockLocationProtocolClientSideTranslatorPB.java |  34 +++++++
 .../hdds/scm/storage/ContainerProtocolCalls.java   |   4 +-
 .../org/apache/hadoop/ozone/audit/SCMAction.java   |   3 +-
 ...lockLocationProtocolServerSideTranslatorPB.java |  26 +++++
 .../src/main/proto/ScmBlockLocationProtocol.proto  |  16 +++
 hadoop-hdds/common/src/main/proto/hdds.proto       |   5 +-
 .../common/src/main/resources/ozone-default.xml    |   8 ++
 .../hdds/scm/net/TestNetworkTopologyImpl.java      |  35 ++++---
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |   2 +
 .../hdds/scm/server/SCMBlockProtocolServer.java    |  32 ++++++
 .../hadoop/hdds/scm/server/SCMConfigurator.java    |  19 ++++
 .../hdds/scm/server/StorageContainerManager.java   |   6 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |   4 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  14 ++-
 .../hadoop/hdds/scm/node/TestSCMNodeManager.java   |  10 ++
 hadoop-ozone/common/src/main/bin/ozone             |   2 +
 .../{ozone-net-topology => ozone-topology}/.env    |   0
 .../docker-compose.yaml                            |  22 +++--
 .../docker-config                                  |   5 +-
 .../network-config                                 |   0
 .../{ozone-net-topology => ozone-topology}/test.sh |   0
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  83 +++++++++++++++-
 .../client/rpc/TestOzoneRpcClientWithRatis.java    |  96 +++++++++++++++++-
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java | 107 ++++++++++++++++++++-
 .../org/apache/hadoop/ozone/om/TestOmMetrics.java  |   4 +-
 .../org/apache/hadoop/ozone/om/KeyManager.java     |   4 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  36 ++++++-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  12 ++-
 .../apache/hadoop/ozone/om/fs/OzoneManagerFS.java  |  11 ++-
 .../ozone/om/ScmBlockLocationTestIngClient.java    |   6 ++
 39 files changed, 803 insertions(+), 89 deletions(-)

commit b0b394ab4aabe995fbaaf53a0494de244ca71523
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Jul 9 23:17:50 2019 +0530

    HDDS-1718. Increase Ratis Leader election timeout default. Contributed by Aravindan Vijayan & Siddharth Wagle. (#1062)

 .../src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java       | 2 +-
 hadoop-hdds/common/src/main/resources/ozone-default.xml               | 4 ++--
 .../statemachine/commandhandler/TestCloseContainerCommandHandler.java | 2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

commit 078371bbdc90ca95505299851aac9835601598fe
Author: pifta <pifta@cloudera.com>
Date:   Tue Jul 9 17:21:16 2019 +0200

    HDDS-1742. Merge ozone-perf and ozonetrace example clusters
    
    Closes #1057

 .../dist/src/main/compose/ozoneperf/README.md      | 10 ++-
 .../src/main/compose/ozoneperf/docker-compose.yaml | 15 ++++
 .../dist/src/main/compose/ozoneperf/docker-config  | 11 +++
 hadoop-ozone/dist/src/main/compose/ozonetrace/.env | 19 -----
 .../main/compose/ozonetrace/docker-compose.yaml    | 64 -----------------
 .../dist/src/main/compose/ozonetrace/docker-config | 84 ----------------------
 6 files changed, 33 insertions(+), 170 deletions(-)

commit c944b5fbb54d0410d85f2eec503b7a524b6dbd67
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Tue Jul 9 13:22:00 2019 +0200

    HDDS-1717. MR Job fails as OMFailoverProxyProvider has dependency hadoop-3.2
    
    Closes #1056

 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  3 +-
 .../ozone/om/ha/OMFailoverProxyProvider.java       | 82 +++++++++-------------
 .../org/apache/hadoop/ozone/om/ha/OMProxyInfo.java | 59 ++++++++++++++++
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  4 +-
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 10 +--
 5 files changed, 100 insertions(+), 58 deletions(-)

commit 02437be6624e4b5c475e328bd946bcdfe9ecb5e3
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Mon Jul 8 21:06:50 2019 -0700

    HDDS-1705. Recon: Add estimatedTotalCount to the response of containers and containers/{id} endpoints. Contributed by Vivek Ratnavel Subramanian.

 .../org/apache/hadoop/ozone/common/Storage.java    |   6 +-
 .../common/src/main/resources/ozone-default.xml    |   6 +-
 .../hadoop/ozone/om/OzoneManagerStarter.java       |   2 +-
 .../recon/codegen/ReconSchemaGenerationModule.java |   2 +
 .../ozone/recon/schema/StatsSchemaDefinition.java  |  61 ++++
 .../apache/hadoop/ozone/recon/ReconConstants.java  |   8 +-
 .../org/apache/hadoop/ozone/recon/ReconServer.java |  22 ++
 .../ozone/recon/api/ContainerKeyService.java       |  22 +-
 .../ozone/recon/api/types/ContainersResponse.java  |  94 ++++++
 .../hadoop/ozone/recon/api/types/KeysResponse.java |  93 ++++++
 .../recon/spi/ContainerDBServiceProvider.java      |  58 +++-
 .../spi/impl/ContainerDBServiceProviderImpl.java   | 137 ++++++++-
 .../recon/spi/impl/ReconContainerDBProvider.java   |   4 +
 .../ozone/recon/tasks/ContainerKeyMapperTask.java  |  57 +++-
 .../recon/GuiceInjectorUtilsForTestsImpl.java      |  28 ++
 .../ozone/recon/api/TestContainerKeyService.java   | 186 +++++++-----
 .../recon/persistence/AbstractSqlDatabaseTest.java |  12 +-
 .../persistence/TestStatsSchemaDefinition.java     | 147 ++++++++++
 .../impl/TestContainerDBServiceProviderImpl.java   | 326 +++++++++++++--------
 .../impl/TestOzoneManagerServiceProviderImpl.java  |  53 +---
 .../recon/tasks/TestContainerKeyMapperTask.java    | 127 ++++----
 .../recon/types/GuiceInjectorUtilsForTests.java    | 117 ++++++++
 22 files changed, 1233 insertions(+), 335 deletions(-)

commit 8d6c36a531c713734f56ef61a7254de1b1b0dfc0
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Jul 9 08:54:12 2019 +0530

    HDDS-1550. MiniOzoneCluster is not shutting down all the threads during shutdown. Contributed by Mukul Kumar Singh. (#1050)
    
    * HDDS-1550. MiniOzoneCluster is not shutting down all the threads during shutdown. Contributed by Mukul Kumar Singh.

 .../ozone/container/common/interfaces/Handler.java    |  5 +++++
 .../ozone/container/common/report/ReportManager.java  | 10 ++++++++++
 .../common/transport/server/XceiverServerGrpc.java    |  6 ++++++
 .../ozone/container/keyvalue/KeyValueHandler.java     |  5 +++++
 .../ozone/container/ozoneimpl/OzoneContainer.java     |  1 +
 .../apache/hadoop/hdds/scm/node/SCMNodeManager.java   |  1 +
 .../hdds/scm/server/StorageContainerManager.java      |  8 +++++++-
 .../apache/hadoop/ozone/MiniOzoneChaosCluster.java    |  2 +-
 .../org/apache/hadoop/ozone/MiniOzoneClusterImpl.java | 19 +++++++++++--------
 .../hadoop/ozone/TestStorageContainerManager.java     | 17 ++++++-----------
 .../apache/hadoop/ozone/scm/node/TestQueryNode.java   | 16 +++++++++++++++-
 11 files changed, 68 insertions(+), 22 deletions(-)

commit 27d66c4044d75377a7d97b593386c5f090c56dc9
Author: Lokesh Jain <ljain@apache.org>
Date:   Tue Jul 9 08:42:55 2019 +0530

    HDDS-1750. Add block allocation metrics for pipelines in SCM. Contributed by Lokesh Jain. (#1047)

 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  1 +
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  |  2 +
 .../hdds/scm/pipeline/SCMPipelineManager.java      | 10 +++-
 .../hdds/scm/pipeline/SCMPipelineMetrics.java      | 56 +++++++++++++++++++++-
 .../ozone/scm/pipeline/TestSCMPipelineMetrics.java | 35 ++++++++++++++
 5 files changed, 101 insertions(+), 3 deletions(-)

commit 8519d7abb6fe9a0fc7f4dc4fb4734fd1b60e3e05
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Jul 8 12:19:16 2019 +0530

    HDDS-1728. Add metrics for leader's latency in ContainerStateMachine. Contributed by Mukul Kumar Singh. (#1022)

 .../common/transport/server/ratis/CSMMetrics.java  | 30 ++++++++++++++++++++++
 .../server/ratis/ContainerStateMachine.java        | 26 +++++++++++++++----
 .../transport/server/ratis/TestCSMMetrics.java     |  6 +++++
 3 files changed, 57 insertions(+), 5 deletions(-)

commit f40e32640f07662c15866519bedc3b4a0f1bdeeb
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri Jul 5 17:04:40 2019 +0530

    HDDS-1758. Add replication and key deletion tests to MiniOzoneChaosCluster. Contributed by Mukul Kumar Singh. (#1049)

 .../apache/hadoop/ozone/MiniOzoneChaosCluster.java | 57 +++++++++++++++++++---
 .../hadoop/ozone/MiniOzoneLoadGenerator.java       |  5 ++
 .../hadoop/ozone/TestMiniChaosOzoneCluster.java    |  2 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  3 +-
 4 files changed, 58 insertions(+), 9 deletions(-)

commit 3af80eb6794c4d37625e17555042b9f98c494e12
Author: Márton Elek <elek@apache.org>
Date:   Thu Jul 4 17:14:19 2019 +0200

    HDDS-1763. Use vendor neutral s3 logo in ozone doc. Contributed by Elek, Marton.

 hadoop-hdds/docs/static/ozone-usage.png | Bin 108376 -> 104961 bytes
 1 file changed, 0 insertions(+), 0 deletions(-)

commit ccf13e3240cebc2e1ade624f07cfe78607c20dff
Author: pifta <pifta@cloudera.com>
Date:   Wed Jul 3 22:48:40 2019 +0200

    HDDS-1741. Fix prometheus configuration in ozoneperf example cluster
    
    Closes #1045

 hadoop-ozone/dist/src/main/compose/common/prometheus/prometheus.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9b4bbca03de46ea9999b4719ef8349f7ff8c360f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jul 3 13:15:04 2019 -0700

    HDDS-1731. Implement File CreateFile Request to use Cache and DoubleBuffer. (#1044)

 .../src/main/proto/OzoneManagerProtocol.proto      |   3 +
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 175 +++++++++-
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |   3 +
 .../hadoop/ozone/om/request/OMClientRequest.java   |   6 +-
 .../om/request/file/OMDirectoryCreateRequest.java  |  67 +---
 .../ozone/om/request/file/OMFileCreateRequest.java | 349 +++++++++++++++++++
 .../ozone/om/request/file/OMFileRequest.java       | 116 +++++++
 .../ozone/om/request/key/OMKeyCreateRequest.java   | 246 +++++++++-----
 .../om/response/file/OMFileCreateResponse.java     |  40 +++
 .../ozone/om/response/key/OMKeyCreateResponse.java |   9 +-
 .../OzoneManagerHARequestHandlerImpl.java          |   1 +
 .../om/request/file/TestOMFileCreateRequest.java   | 371 +++++++++++++++++++++
 12 files changed, 1224 insertions(+), 162 deletions(-)

commit 1af292e2d82e0426300a87833d687582ab75f927
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Jul 2 16:02:27 2019 -0700

    HDDS-1757. Use ExecutorService in OzoneManagerStateMachine. (#1048)

 .../ozone/om/ratis/OzoneManagerStateMachine.java   | 43 +++++++++++++++++++++-
 1 file changed, 41 insertions(+), 2 deletions(-)

commit 283da6d6da4d2f31e26cc4d6df4581a3a729fd79
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Jul 3 03:04:49 2019 +0530

    HDDS-1616. ManagedChannel references are being leaked in while removing RaftGroup. Contributed by Mukul Kumar Singh. (#1039)

 .../org/apache/hadoop/hdds/scm/pipeline/RatisPipelineUtils.java  | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 80aaa070568fadfa4b340a8537ee9814d52cf414
Author: Márton Elek <elek@apache.org>
Date:   Tue Jul 2 22:51:04 2019 +0200

    HDDS-1716. Smoketest results are generated with an internal user
    
    Closes #1002

 hadoop-ozone/dist/src/main/compose/test-all.sh |  4 ++--
 hadoop-ozone/dist/src/main/compose/testlib.sh  | 24 +++++++++++++++++-------
 2 files changed, 19 insertions(+), 9 deletions(-)

commit 1d8dbec23bceb5863ed8ad942374dac235008bb5
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Tue Jul 2 18:54:43 2019 +0200

    HDDS-1698. Switch to use apache/ozone-runner in the compose/Dockerfile (#979)
    
    * HDDS-1698. Switch to use apache/ozone-runner in the compose/Dockerfile
    
    * docker image is moved to the parent in HDDS-1667

 .../dist/dev-support/bin/dist-layout-stitching         |  4 ++--
 hadoop-ozone/dist/pom.xml                              | 18 +++++++++++++++++-
 hadoop-ozone/dist/src/main/compose/README.md           |  6 ------
 hadoop-ozone/dist/src/main/compose/ozone-hdfs/.env     |  2 +-
 .../src/main/compose/ozone-hdfs/docker-compose.yaml    |  6 +++---
 hadoop-ozone/dist/src/main/compose/ozone-mr/.env       |  1 +
 .../dist/src/main/compose/ozone-mr/docker-compose.yaml |  8 ++++----
 .../dist/src/main/compose/ozone-net-topology/.env      |  1 +
 .../compose/ozone-net-topology/docker-compose.yaml     | 12 ++++++------
 hadoop-ozone/dist/src/main/compose/ozone-om-ha/.env    |  2 +-
 .../src/main/compose/ozone-om-ha/docker-compose.yaml   | 10 +++++-----
 hadoop-ozone/dist/src/main/compose/ozone-recon/.env    |  2 +-
 .../src/main/compose/ozone-recon/docker-compose.yaml   |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozone/.env          |  2 +-
 .../dist/src/main/compose/ozone/docker-compose.yaml    |  6 +++---
 hadoop-ozone/dist/src/main/compose/ozoneblockade/.env  |  2 +-
 .../src/main/compose/ozoneblockade/docker-compose.yaml |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozonefs/.env        |  2 +-
 .../dist/src/main/compose/ozonefs/docker-compose.yaml  |  6 +++---
 hadoop-ozone/dist/src/main/compose/ozoneperf/.env      |  2 +-
 .../src/main/compose/ozoneperf/docker-compose.yaml     |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozones3/.env        |  2 +-
 .../dist/src/main/compose/ozones3/docker-compose.yaml  |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozonescripts/.env   |  2 +-
 .../dist/src/main/compose/ozonescripts/Dockerfile      |  2 +-
 hadoop-ozone/dist/src/main/compose/ozonesecure-mr/.env |  2 +-
 .../main/compose/ozonesecure-mr/docker-compose.yaml    |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozonesecure/.env    |  2 +-
 .../src/main/compose/ozonesecure/docker-compose.yaml   |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozonetrace/.env     |  2 +-
 .../src/main/compose/ozonetrace/docker-compose.yaml    |  8 ++++----
 hadoop-ozone/dist/src/main/compose/test-all.sh         |  2 +-
 hadoop-ozone/dist/src/main/compose/testlib.sh          |  2 +-
 hadoop-ozone/dist/src/main/{ => docker}/Dockerfile     |  2 +-
 34 files changed, 89 insertions(+), 77 deletions(-)

commit 1684ab45282bf103cfba1ffb37b21190d1c65659
Author: Márton Elek <elek@apache.org>
Date:   Sat Jun 29 01:18:28 2019 +0200

    HDDS-1668. Add liveness probe to the example k8s resources files

 .../dist/src/main/k8s/definitions/ozone/om-ss.yaml | 13 ++---
 .../src/main/k8s/definitions/ozone/s3g-ss.yaml     |  5 ++
 .../src/main/k8s/definitions/ozone/scm-ss.yaml     |  4 ++
 .../examples/minikube/datanode-statefulset.yaml    |  6 +-
 .../main/k8s/examples/minikube/om-statefulset.yaml | 26 +++------
 .../k8s/examples/minikube/s3g-statefulset.yaml     | 11 +++-
 .../k8s/examples/minikube/scm-statefulset.yaml     | 16 ++++--
 .../src/main/k8s/examples/ozone-csi/Flekszible     |  1 +
 .../k8s/examples/ozone-csi/datanode-daemonset.yaml | 10 +++-
 .../k8s/examples/ozone-csi/datanode-service.yaml   | 28 +++++++++
 .../examples/ozone-csi/datanode-statefulset.yaml   | 66 ++++++++++++++++++++++
 .../k8s/examples/ozone-csi/om-statefulset.yaml     | 28 ++++-----
 .../k8s/examples/ozone-csi/s3g-statefulset.yaml    | 12 ++--
 .../k8s/examples/ozone-csi/scm-statefulset.yaml    | 18 ++++--
 .../examples/ozone-dev/datanode-statefulset.yaml   |  6 +-
 .../k8s/examples/ozone-dev/om-statefulset.yaml     | 28 +++------
 .../k8s/examples/ozone-dev/s3g-statefulset.yaml    | 11 +++-
 .../k8s/examples/ozone-dev/scm-statefulset.yaml    | 16 ++++--
 .../k8s/examples/ozone/datanode-statefulset.yaml   |  6 +-
 .../main/k8s/examples/ozone/om-statefulset.yaml    | 26 +++------
 .../main/k8s/examples/ozone/s3g-statefulset.yaml   | 11 +++-
 .../main/k8s/examples/ozone/scm-statefulset.yaml   | 16 ++++--
 22 files changed, 235 insertions(+), 129 deletions(-)

commit 8037dea14a46efcc6981a1c2ed2118d5dd5c56a9
Author: Márton Elek <elek@apache.org>
Date:   Mon Jul 1 22:38:19 2019 +0200

    HDDS-1667. Docker compose file may referring to incorrect docker image name. Contributed by Eric Yang.

 hadoop-ozone/dist/pom.xml                                         | 4 ----
 .../network-tests/src/test/compose/docker-compose.yaml            | 8 ++++----
 hadoop-ozone/pom.xml                                              | 7 +++++++
 3 files changed, 11 insertions(+), 8 deletions(-)

commit d9294dd84ffc40acb92583dea4d69ef011db8a86
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Mon Jul 1 12:44:14 2019 -0700

    HDDS-1685. Recon: Add support for "start" query param to containers and containers/{id} endpoints.

 .../apache/hadoop/ozone/recon/ReconConstants.java  |   4 +
 .../ozone/recon/api/ContainerKeyService.java       |  34 ++++--
 .../recon/spi/ContainerDBServiceProvider.java      |  23 ++--
 .../spi/impl/ContainerDBServiceProviderImpl.java   |  90 ++++++++++++----
 .../ozone/recon/api/TestContainerKeyService.java   | 119 +++++++++++++++++----
 .../impl/TestContainerDBServiceProviderImpl.java   | 108 +++++++++++++++++++
 6 files changed, 318 insertions(+), 60 deletions(-)

commit 1b8026f57e0b3830714ae8d1eb10f1471063b5bf
Author: S O'Donnell <sodonnell@cloudera.com>
Date:   Mon Jul 1 20:04:32 2019 +0200

    HDDS-1258. Fix error propagation for SCM protocol
    
    Closes #1001

 .../hadoop/hdds/scm/exceptions/SCMException.java   |   6 +-
 .../hadoop/hdds/scm/exceptions/package-info.java   |   4 +-
 ...lockLocationProtocolClientSideTranslatorPB.java |  94 ++++++-------
 ...lockLocationProtocolServerSideTranslatorPB.java | 155 ++++++++++-----------
 .../src/main/proto/ScmBlockLocationProtocol.proto  |  36 +++--
 .../exceptions/TestSCMExceptionResultCodes.java    |  52 +++++++
 6 files changed, 205 insertions(+), 142 deletions(-)

commit 07faa74635e7037978fa66b042095f2b7316f2d1
Author: dineshchitlangia <dineshchitlangia@gmail.com>
Date:   Mon Jul 1 11:58:47 2019 -0400

    HDDS-373. Genconf tool must generate ozone-site.xml with sample values (#1025)

 .../java/org/apache/hadoop/ozone/OzoneConfigKeys.java    |  2 ++
 .../main/java/org/apache/hadoop/ozone/OzoneConsts.java   |  4 ++++
 .../genconf/GenerateOzoneRequiredConfigurations.java     | 16 +++++++++++++++-
 .../genconf/TestGenerateOzoneRequiredConfigurations.java | 16 ++++++++++++++++
 4 files changed, 37 insertions(+), 1 deletion(-)

commit 059a67208425e8154f09606b884467b3af9ce0e3
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Jul 1 20:52:32 2019 +0530

    HDDS-1555. Disable install snapshot for ContainerStateMachine. Contributed by Siddharth Wagle. (#846)

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 72 +++++++++++-----------
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  7 ++-
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  4 ++
 .../common/src/main/resources/ozone-default.xml    |  8 +++
 .../server/ratis/ContainerStateMachine.java        | 28 ++++++---
 .../transport/server/ratis/XceiverServerRatis.java | 51 ++++++++++++---
 hadoop-hdds/pom.xml                                |  2 +-
 .../ozone/om/ratis/OzoneManagerRatisClient.java    | 59 ++++++++----------
 hadoop-ozone/pom.xml                               |  2 +-
 9 files changed, 143 insertions(+), 90 deletions(-)

commit f81369ef320b217fdb95979eeeb268a62faa393a
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sun Jun 30 22:38:53 2019 -0700

    HDDS-1730. Implement File CreateDirectory Request to use Cache and Do… (#1026)

 .../apache/hadoop/ozone/om/OMMetadataManager.java  |  11 +
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |   7 +
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |   3 +
 .../om/request/file/OMDirectoryCreateRequest.java  | 282 ++++++++++++++++++
 .../hadoop/ozone/om/request/file/package-info.java |  23 ++
 .../response/file/OMDirectoryCreateResponse.java   |  67 +++++
 .../ozone/om/response/file/package-info.java       |  23 ++
 .../OzoneManagerHARequestHandlerImpl.java          |   1 +
 ...OzoneManagerProtocolServerSideTranslatorPB.java |   3 +-
 .../request/file/TestOMDirectoryCreateRequest.java | 327 +++++++++++++++++++++
 .../hadoop/ozone/om/request/file/package-info.java |  23 ++
 .../file/TestOMDirectoryCreateResponse.java        | 123 ++++++++
 .../ozone/om/response/file/package-info.java       |  23 ++
 13 files changed, 914 insertions(+), 2 deletions(-)

commit d2a8ee30236210e11c2e8268757b5c4614fcc07e
Author: dineshchitlangia <dineshchitlangia@gmail.com>
Date:   Fri Jun 28 18:59:33 2019 -0400

    HDDS-1733. Fix Ozone documentation (#1031)

 hadoop-hdds/docs/content/_index.md                      |   6 +++---
 hadoop-hdds/docs/content/beyond/Containers.md           |   3 ++-
 hadoop-hdds/docs/content/recipe/Prometheus.md           |   2 +-
 .../recipe}/prometheus-key-allocate.png                 | Bin
 .../docs/{static => content/recipe}/prometheus.png      | Bin
 hadoop-hdds/docs/content/start/_index.md                |  16 ++++++++--------
 6 files changed, 14 insertions(+), 13 deletions(-)

commit 67e9aae16a533897b224b99102b8ffc6f2bd5591
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jun 28 14:05:19 2019 -0700

    HDDS-1672. Improve locking in OzoneManager. (#1016)

 .../apache/hadoop/ozone/om/OMMetadataManager.java  |   1 +
 .../apache/hadoop/ozone/om/OzoneManagerLock.java   | 269 ---------------------
 .../hadoop/ozone/om/S3SecretManagerImpl.java       |   9 +-
 .../hadoop/ozone/om/lock/OzoneManagerLock.java     |  54 +++--
 .../hadoop/ozone/om/lock/OzoneManagerLockUtil.java |  10 +-
 .../hadoop/ozone/om/lock/TestOzoneManagerLock.java |  25 +-
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  47 ++--
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 100 ++++----
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |   3 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  18 +-
 .../apache/hadoop/ozone/om/PrefixManagerImpl.java  |  21 +-
 .../apache/hadoop/ozone/om/S3BucketManager.java    |   6 +
 .../hadoop/ozone/om/S3BucketManagerImpl.java       |  21 +-
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  |  88 ++++---
 .../om/request/bucket/OMBucketCreateRequest.java   |  17 +-
 .../om/request/bucket/OMBucketDeleteRequest.java   |   8 +-
 .../request/bucket/OMBucketSetPropertyRequest.java |   8 +-
 .../ozone/om/request/key/OMKeyCommitRequest.java   |  10 +-
 .../ozone/om/request/key/OMKeyCreateRequest.java   |   8 +-
 .../ozone/om/request/key/OMKeyDeleteRequest.java   |   7 +-
 .../ozone/om/request/key/OMKeyRenameRequest.java   |   7 +-
 .../om/request/volume/OMVolumeCreateRequest.java   |  18 +-
 .../om/request/volume/OMVolumeDeleteRequest.java   |  44 ++--
 .../om/request/volume/OMVolumeSetOwnerRequest.java |  29 +--
 .../om/request/volume/OMVolumeSetQuotaRequest.java |   6 +-
 .../hadoop/ozone/om/TestOzoneManagerLock.java      | 193 ---------------
 26 files changed, 324 insertions(+), 703 deletions(-)

commit 61c51271d6b95619f678fc308f23c8ab0a915450
Author: Márton Elek <elek@apache.org>
Date:   Fri Jun 28 19:51:30 2019 +0200

    HDDS-1639. Restructure documentation pages for better understanding
    
    Closes #901

 hadoop-hdds/docs/config.yaml                       |  26 +--
 hadoop-hdds/docs/content/Concepts.md               | 108 ----------
 hadoop-hdds/docs/content/Hdds.md                   |  65 ------
 hadoop-hdds/docs/content/OzoneManager.md           |  77 -------
 .../docs/content/OzoneSecurityArchitecture.md      | 110 ----------
 hadoop-hdds/docs/content/RealCluster.md            |  74 -------
 hadoop-hdds/docs/content/SetupSecureOzone.md       |  98 ---------
 hadoop-hdds/docs/content/_index.md                 |  24 ++-
 hadoop-hdds/docs/content/beyond/Containers.md      | 217 ++++++++++++++++++++
 .../{Dozone.md => beyond/DockerCheatSheet.md}      |  46 ++---
 .../docs/content/{ => beyond}/RunningWithHDFS.md   |  17 +-
 .../content/{CommandShell.md => beyond/Tools.md}   |  62 +-----
 hadoop-hdds/docs/content/beyond/_index.md          |  30 +++
 .../docs/content/concept/ContainerMetadata.png     | Bin 0 -> 98493 bytes
 hadoop-hdds/docs/content/concept/Datanodes.md      |  75 +++++++
 .../docs/content/concept/FunctionalOzone.png       | Bin 0 -> 55334 bytes
 hadoop-hdds/docs/content/concept/Hdds.md           |  52 +++++
 hadoop-hdds/docs/content/concept/Overview.md       |  81 ++++++++
 hadoop-hdds/docs/content/concept/OzoneBlock.png    | Bin 0 -> 4650 bytes
 hadoop-hdds/docs/content/concept/OzoneManager.md   |  87 ++++++++
 hadoop-hdds/docs/content/concept/_index.md         |  33 +++
 .../docs/content/concept/ozoneBlockDiagram.png     | Bin 0 -> 45218 bytes
 .../docs/content/{ => interface}/JavaApi.md        |  12 +-
 .../docs/content/{ => interface}/OzoneFS.md        |  30 ++-
 hadoop-hdds/docs/content/{ => interface}/S3.md     |   9 +-
 hadoop-hdds/docs/content/interface/_index.md       |  27 +++
 .../docs/content/{ => recipe}/Prometheus.md        |   9 +-
 .../docs/content/{ => recipe}/SparkOzoneFSK8S.md   |  12 +-
 hadoop-hdds/docs/content/recipe/_index.md          |  28 +++
 .../docs/content/security/SecuityWithRanger.md     |  43 ++++
 hadoop-hdds/docs/content/security/SecureOzone.md   | 177 ++++++++++++++++
 .../docs/content/security/SecuringDatanodes.md     |  70 +++++++
 hadoop-hdds/docs/content/security/SecuringS3.md    |  61 ++++++
 hadoop-hdds/docs/content/security/SecuringTDE.md   |  66 ++++++
 hadoop-hdds/docs/content/security/SecurityAcls.md  |  85 ++++++++
 hadoop-hdds/docs/content/security/_index.md        |  36 ++++
 .../docs/content/{ => shell}/BucketCommands.md     |   6 +-
 hadoop-hdds/docs/content/shell/Format.md           |  69 +++++++
 .../docs/content/{ => shell}/KeyCommands.md        |  11 +-
 .../docs/content/{ => shell}/VolumeCommands.md     |   6 +-
 hadoop-hdds/docs/content/shell/_index.md           |  28 +++
 .../{BuildingSources.md => start/FromSource.md}    |  27 +--
 hadoop-hdds/docs/content/start/Kubernetes.md       |  52 +++++
 hadoop-hdds/docs/content/start/Minikube.md         |  69 +++++++
 .../docs/content/{Settings.md => start/OnPrem.md}  |  73 +++++--
 .../docs/content/{ => start}/RunningViaDocker.md   |  29 +--
 .../docs/content/start/StartFromDockerHub.md       | 111 ++++++++++
 hadoop-hdds/docs/content/start/_index.md           |  88 ++++++++
 hadoop-hdds/docs/content/start/docker.png          | Bin 0 -> 7002 bytes
 hadoop-hdds/docs/content/start/hadoop.png          | Bin 0 -> 4923 bytes
 hadoop-hdds/docs/content/start/k8s.png             | Bin 0 -> 6270 bytes
 hadoop-hdds/docs/content/start/minikube.png        | Bin 0 -> 5764 bytes
 .../docs/content/{ => tools}/AuditParser.md        |   4 +-
 hadoop-hdds/docs/content/{ => tools}/Freon.md      |   4 +-
 .../docs/content/{genconf.md => tools/Genconf.md}  |   4 +-
 hadoop-hdds/docs/content/{ => tools}/SCMCLI.md     |   4 +-
 hadoop-hdds/docs/content/tools/TestTools.md        | 228 +++++++++++++++++++++
 hadoop-hdds/docs/content/tools/Tools.md            |  19 ++
 .../{ozone-logo.png => ozone-logo-small.png}       | Bin
 hadoop-hdds/docs/static/ozone-usage.png            | Bin 0 -> 108376 bytes
 .../themes/ozonedoc/layouts/_default/section.html  |  60 ++++++
 .../themes/ozonedoc/layouts/_default/single.html   |  47 +++--
 .../docs/themes/ozonedoc/layouts/index.html        |   2 +-
 .../themes/ozonedoc/layouts/partials/header.html   |   4 +-
 .../themes/ozonedoc/layouts/partials/sidebar.html  |  13 +-
 .../ozonedoc/layouts/shortcodes/buttonlink.html    |  20 ++
 .../themes/ozonedoc/layouts/shortcodes/card.html   |  40 ++++
 .../ozonedoc/layouts/shortcodes/jumbotron.html     |  25 +++
 .../ozonedoc/layouts/shortcodes/requirements.html  |  22 ++
 .../docs/themes/ozonedoc/static/css/ozonedoc.css   |  17 ++
 70 files changed, 2219 insertions(+), 810 deletions(-)

commit ba9cc51fc12f3aec211d2a6e6df25d9dc2da81ad
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jun 26 18:04:12 2019 -0700

    HDDS-1638.  Implement Key Write Requests to use Cache and DoubleBuffer. (#956)

 .../java/org/apache/hadoop/utils/db/Table.java     |   8 +
 .../org/apache/hadoop/utils/db/TypedTable.java     |   5 +
 .../org/apache/hadoop/ozone/audit/DummyAction.java |   1 -
 .../org/apache/hadoop/ozone/audit/OMAction.java    |   1 -
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  |  17 +-
 .../hadoop/ozone/om/helpers/OmKeyLocationInfo.java |  25 ++
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  13 +-
 .../src/main/proto/OzoneManagerProtocol.proto      |   7 +
 .../hadoop/ozone/MiniOzoneHAClusterImpl.java       |   2 +-
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java |   4 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  12 +-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  61 +++-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  80 ++++-
 .../java/org/apache/hadoop/ozone/om/ScmClient.java |   6 +-
 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java   |   7 +
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |   8 +-
 .../ozone/om/ratis/OzoneManagerStateMachine.java   | 114 -------
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |  15 +
 .../hadoop/ozone/om/request/OMClientRequest.java   |   2 +-
 .../hadoop/ozone/om/request/RequestAuditor.java    |  37 +-
 .../om/request/key/OMAllocateBlockRequest.java     | 248 ++++++++++++++
 .../ozone/om/request/key/OMKeyCommitRequest.java   | 192 +++++++++++
 .../ozone/om/request/key/OMKeyCreateRequest.java   | 374 +++++++++++++++++++++
 .../ozone/om/request/key/OMKeyDeleteRequest.java   | 163 +++++++++
 .../ozone/om/request/key/OMKeyRenameRequest.java   | 202 +++++++++++
 .../hadoop/ozone/om/request/key/OMKeyRequest.java  | 205 +++++++++++
 .../hadoop/ozone/om/request/key/package-info.java  |  23 ++
 .../om/response/key/OMAllocateBlockResponse.java   |  59 ++++
 .../ozone/om/response/key/OMKeyCommitResponse.java |  66 ++++
 .../ozone/om/response/key/OMKeyCreateResponse.java |  61 ++++
 .../ozone/om/response/key/OMKeyDeleteResponse.java |  78 +++++
 .../ozone/om/response/key/OMKeyRenameResponse.java |  67 ++++
 .../hadoop/ozone/om/response/key/package-info.java |  23 ++
 .../OzoneManagerHARequestHandlerImpl.java          |   5 +
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  59 ++--
 .../om/ratis/TestOzoneManagerStateMachine.java     | 292 ----------------
 .../ozone/om/request/TestOMRequestUtils.java       |  69 ++++
 .../request/bucket/TestOMBucketCreateRequest.java  |   1 +
 .../om/request/key/TestOMAllocateBlockRequest.java | 241 +++++++++++++
 .../om/request/key/TestOMKeyCommitRequest.java     | 300 +++++++++++++++++
 .../om/request/key/TestOMKeyCreateRequest.java     | 325 ++++++++++++++++++
 .../om/request/key/TestOMKeyDeleteRequest.java     | 166 +++++++++
 .../om/request/key/TestOMKeyRenameRequest.java     | 225 +++++++++++++
 .../ozone/om/request/key/TestOMKeyRequest.java     | 151 +++++++++
 .../hadoop/ozone/om/request/key/package-info.java  |  23 ++
 .../response/key/TestOMAllocateBlockResponse.java  |  93 +++++
 .../om/response/key/TestOMKeyCommitResponse.java   | 108 ++++++
 .../om/response/key/TestOMKeyCreateResponse.java   |  92 +++++
 .../om/response/key/TestOMKeyDeleteResponse.java   | 163 +++++++++
 .../om/response/key/TestOMKeyRenameResponse.java   | 148 ++++++++
 .../ozone/om/response/key/TestOMKeyResponse.java   |  75 +++++
 .../hadoop/ozone/om/response/key/package-info.java |  23 ++
 52 files changed, 4279 insertions(+), 466 deletions(-)

commit 7942d4fb31da2eff74f914fe075ba22854449286
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Wed Jun 26 11:44:49 2019 -0700

    HDDS-1691 : RDBTable#isExist should use Rocksdb#keyMayExist (#1013)

 .../java/org/apache/hadoop/utils/db/RDBTable.java  |  6 ++-
 .../org/apache/hadoop/utils/db/TestRDBStore.java   | 36 +++++++++++++
 .../apache/hadoop/ozone/om/TestOzoneManager.java   | 63 ++++++++++++++++++++++
 3 files changed, 104 insertions(+), 1 deletion(-)

commit 59b3056b5dce0f720d3876ea9fed458c6f42d2d9
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Jun 25 17:12:45 2019 -0700

    HDDS-1727. Use generation of resourceName for locks in OzoneManagerLock. (#1014)

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 +
 .../hadoop/ozone/om/lock/OzoneManagerLock.java     |  47 +++++-
 .../hadoop/ozone/om/lock/OzoneManagerLockUtil.java |   5 +-
 .../hadoop/ozone/om/lock/TestOzoneManagerLock.java | 159 +++++++++------------
 4 files changed, 109 insertions(+), 103 deletions(-)

commit ceb83030556626b8b1921d07f2583b70311c178e
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Jun 25 13:57:01 2019 -0700

    HDDS-1709. TestScmSafeNode is flaky.
    Contributed by Elek, Marton.

 .../org/apache/hadoop/ozone/om/TestScmSafeMode.java    | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

commit 219b710f836e8f722eadd4a237491c43633948d3
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Jun 25 08:48:03 2019 -0700

    HDDS-1723. Create new OzoneManagerLock class. (#1006)
    
    * HDDS-1723. Create new OzoneManagerLock class.
    
    * add logs
    
    * fix exception message
    
    * add license
    
    * fix findbug
    
    * throw exception when acquiring 2nd lock failed.
    
    * fix review comments
    
    * fix missed review comment
    
    * fix checkstyle
    
    * fix review comments

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 +
 .../org/apache/hadoop/ozone/lock/LockManager.java  |   5 +-
 .../hadoop/ozone/om/lock/OzoneManagerLock.java     | 343 +++++++++++++++++++
 .../hadoop/ozone/om/lock/OzoneManagerLockUtil.java |  74 ++++
 .../apache/hadoop/ozone/om/lock/package-info.java  |  22 ++
 .../hadoop/ozone/om/lock/TestOzoneManagerLock.java | 374 +++++++++++++++++++++
 .../apache/hadoop/ozone/om/lock/package-info.java  |  21 ++
 7 files changed, 838 insertions(+), 2 deletions(-)

commit b39bd700c8e82a2d3cf4e8d0d53c051fdcf1113f
Merge: b07ff71c 8f7f401e
Author: Inigo Goiri <elgoiri@gmail.com>
Date:   Mon Jun 24 17:44:54 2019 -0700

    Merge pull request #977 from leosunli/trunk
    
    HDFS-14541. When evictableMmapped or evictable size is zero, do not throw NoSuchElementException.

commit b07ff71c2b3156849a966a72e4fd6195d9467943
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Mon Jun 24 21:02:35 2019 +0200

    HDDS-1646. Support real persistence in the k8s example files  (#945)
    
    * HDDS-1646. Support real persistence in the k8s example files
    
    * ephemeral clusters can be scaled up

 .../k8s/definitions/ozone/datanode-ss-service.yaml | 27 ++++++++
 .../main/k8s/definitions/ozone/datanode-ss.yaml    | 54 ++++++++++++++++
 .../{transformations => definitions}/emptydir.yaml | 20 ++----
 .../definitions/ozone/definitions/persistence.yaml | 66 +++++++++++++++++++
 .../dist/src/main/k8s/definitions/ozone/om-ss.yaml |  2 +
 .../src/main/k8s/definitions/ozone/scm-ss.yaml     |  2 +
 .../flekszible.yaml => getting-started/Flekszible} |  4 +-
 .../k8s/examples/getting-started/LICENSE.header    | 15 +++++
 .../examples/getting-started/config-configmap.yaml | 34 ++++++++++
 .../getting-started/datanode-public-service.yaml   | 28 ++++++++
 .../examples/getting-started/datanode-service.yaml | 28 ++++++++
 .../getting-started/datanode-statefulset.yaml      | 66 +++++++++++++++++++
 .../getting-started/freon/freon-deployment.yaml}   | 31 +++++----
 .../getting-started/om-public-service.yaml         | 28 ++++++++
 .../k8s/examples/getting-started/om-service.yaml   | 28 ++++++++
 .../examples/getting-started/om-statefulset.yaml   | 75 ++++++++++++++++++++++
 .../getting-started/s3g-public-service.yaml        | 28 ++++++++
 .../k8s/examples/getting-started/s3g-service.yaml  | 28 ++++++++
 .../s3g-statefulset.yaml}                          | 22 +++----
 .../getting-started/scm-public-service.yaml        | 28 ++++++++
 .../k8s/examples/getting-started/scm-service.yaml  | 28 ++++++++
 .../examples/getting-started/scm-statefulset.yaml  | 69 ++++++++++++++++++++
 .../dist/src/main/k8s/examples/minikube/Flekszible | 45 +++++++++++++
 .../examples/minikube/datanode-public-service.yaml | 28 ++++++++
 .../k8s/examples/minikube/datanode-service.yaml    |  3 +
 .../examples/minikube/datanode-statefulset.yaml    | 28 +++++---
 .../main/k8s/examples/minikube/om-statefulset.yaml |  8 +++
 .../k8s/examples/minikube/s3g-statefulset.yaml     |  1 -
 .../k8s/examples/minikube/scm-statefulset.yaml     |  2 +
 .../{flekszible/flekszible.yaml => Flekszible}     |  5 +-
 .../ozone-dev/datanode-public-service.yaml         | 28 ++++++++
 .../k8s/examples/ozone-dev/datanode-service.yaml   | 28 ++++++++
 ...de-daemonset.yaml => datanode-statefulset.yaml} | 34 ++++++----
 .../k8s/examples/ozone-dev/om-statefulset.yaml     |  2 +
 .../k8s/examples/ozone-dev/s3g-statefulset.yaml    |  7 +-
 .../k8s/examples/ozone-dev/scm-statefulset.yaml    |  8 ++-
 .../{flekszible/flekszible.yaml => Flekszible}     |  3 +-
 .../main/k8s/examples/ozone/datanode-service.yaml  | 28 ++++++++
 .../k8s/examples/ozone/datanode-statefulset.yaml   | 72 +++++++++++++++++++++
 .../main/k8s/examples/ozone/om-statefulset.yaml    | 15 ++++-
 .../main/k8s/examples/ozone/s3g-statefulset.yaml   | 13 ++--
 .../main/k8s/examples/ozone/scm-statefulset.yaml   | 14 +++-
 42 files changed, 994 insertions(+), 89 deletions(-)

commit b036d46705c10e332035e60e120c4ec6d1e252b0
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Mon Jun 24 20:56:04 2019 +0200

    HDDS-1597. Remove hdds-server-scm dependency from ozone-common (#969)
    
    * HDDS-1597. Remove hdds-server-scm dependency from ozone-common. Contributed by Elek, Marton.
    
    * checkstyle fixes
    
    * revert the import reorder of HddsUtil
    
    * add javadoc
    
    * switch back to the commons-lang2
    
    * fix typo
    
    * fix metrics core classpath problem (+rebase fix)

 .../hadoop/hdds/scm/exceptions/SCMException.java    |  0
 .../hadoop/hdds/scm/exceptions/package-info.java    |  0
 hadoop-hdds/container-service/pom.xml               | 10 ++++------
 .../org/apache/hadoop/hdds/server/ServerUtils.java  | 21 +++++++++++++++++++++
 hadoop-hdds/server-scm/pom.xml                      |  4 ++++
 .../java/org/apache/hadoop/hdds/scm/ScmUtils.java   | 21 ++-------------------
 hadoop-ozone/common/pom.xml                         |  4 ----
 .../main/java/org/apache/hadoop/ozone/OmUtils.java  |  4 ++--
 hadoop-ozone/integration-test/pom.xml               |  9 +++++++++
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java  |  0
 hadoop-ozone/pom.xml                                |  5 +++++
 hadoop-ozone/tools/pom.xml                          |  5 +++++
 12 files changed, 52 insertions(+), 31 deletions(-)

commit ad5bcadec1d58b925f900121de4b7ea524c9925c
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Mon Jun 24 08:57:08 2019 -0700

    HDDS-1719 : Increase ratis log segment size to 1MB. (#1005)
    
    * HDDS-1719 : Increase ratis log segment size to 1MB.
    
    * HDDS-1719 : Increase ratis log segment size to 1MB.

 .../src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java       | 2 +-
 hadoop-hdds/common/src/main/resources/ozone-default.xml               | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit e2499af0ffb36ac6219ad78afd63697bc3703a8f
Author: Nanda kumar <nanda@apache.org>
Date:   Sat Jun 22 16:15:45 2019 +0530

    HDDS-1706. Replication Manager thread running too frequently. Contributed by Nilotpal Nandi.

 .../java/org/apache/hadoop/hdds/scm/container/ReplicationManager.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 61272cddfe9cd6f3ae5063d703c83de11478cf2d
Author: Hrishikesh Gadre <hgadre@gmail.com>
Date:   Fri Jun 21 10:23:11 2019 -0700

    HDDS-1690. ContainerController should provide a way to retrieve containers per volume (#986)

 .../ozone/container/common/impl/ContainerSet.java  | 19 ++++++++++
 .../container/ozoneimpl/ContainerController.java   | 12 ++++++
 .../container/common/impl/TestContainerSet.java    | 44 ++++++++++++++++++++++
 3 files changed, 75 insertions(+)

commit 0bbf7ca27199ce49b731192c11ae7cd81f1e0022
Author: S O'Donnell <sodonnell@cloudera.com>
Date:   Fri Jun 21 16:25:10 2019 +0200

    HDDS-1715. Update the Intellij runner definitition of SCM to use the new class name
    
    Closes #1000

 .../dev-support/intellij/runConfigurations/StorageContainerManager.xml  | 2 +-
 .../intellij/runConfigurations/StorageContainerManagerInit.xml          | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 8e0c5137457cec3a863093f8fb3dbb444c770aca
Author: Márton Elek <elek@apache.org>
Date:   Fri Jun 21 14:14:06 2019 +0200

    HDDS-1678. Default image name for kubernetes examples should be ozone and not hadoop
    
    Closes #959

 hadoop-ozone/dist/pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2b0941eb0b7eeb308bc163606d96527a6973f68c
Author: S O'Donnell <sodonnell@cloudera.com>
Date:   Fri Jun 21 11:35:32 2019 +0200

    HDDS-1674. Make ScmBlockLocationProtocol message type based.
    
    Closes #984

 ...lockLocationProtocolClientSideTranslatorPB.java | 43 ++++++++++--
 ...lockLocationProtocolServerSideTranslatorPB.java | 65 +++++++++++++++---
 .../src/main/proto/ScmBlockLocationProtocol.proto  | 76 ++++++++++++++++------
 3 files changed, 151 insertions(+), 33 deletions(-)

commit 2c44071bdcb1c1ba7053e8a83782eed670aa3064
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 20 09:42:45 2019 -0700

    HDDS-1579. Create OMDoubleBuffer metrics. (#871)

 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java   | 43 +++++++++--
 .../metrics/OzoneManagerDoubleBufferMetrics.java   | 89 ++++++++++++++++++++++
 .../ozone/om/ratis/metrics/package-info.java       | 21 +++++
 ...tOzoneManagerDoubleBufferWithDummyResponse.java | 31 ++++++--
 4 files changed, 173 insertions(+), 11 deletions(-)

commit d9d87243038f63a10a45264fe923e1ba10a2faf9
Author: Márton Elek <elek@apache.org>
Date:   Thu Jun 20 16:33:59 2019 +0200

    HDDS-1508. Provide example k8s deployment files for the new CSI server
    
    Closes #905

 .../k8s/definitions/ozone-csi/csi-controller.yaml  | 53 ++++++++++++
 .../main/k8s/definitions/ozone-csi/csi-crd.yaml    | 21 +++++
 .../main/k8s/definitions/ozone-csi/csi-node.yaml   | 95 +++++++++++++++++++++
 .../main/k8s/definitions/ozone-csi/csi-rbac.yaml   | 66 +++++++++++++++
 .../definitions/ozone-csi/csi-storageclass.yaml    | 20 +++++
 .../k8s/definitions/ozone-csi/definitions/csi.yaml | 28 +++++++
 .../dist/src/main/k8s/definitions/ozone/om-ss.yaml |  2 +-
 .../src/main/k8s/definitions/ozone/scm-ss.yaml     |  2 +-
 .../main/k8s/definitions/pv-test/flekszible.yaml   | 16 ++++
 .../definitions/pv-test/nginx-conf-configmap.yaml  | 37 ++++++++
 .../k8s/definitions/pv-test/nginx-deployment.yaml  | 49 +++++++++++
 .../definitions/pv-test/nginx-service-service.yaml | 28 +++++++
 .../nginx-storage-persistentvolumeclaim.yaml       | 28 +++++++
 .../src/main/k8s/examples/ozone-csi/Flekszible     | 25 ++++++
 .../src/main/k8s/examples/ozone-csi/LICENSE.header | 15 ++++
 .../k8s/examples/ozone-csi/config-configmap.yaml   | 37 ++++++++
 .../k8s/examples/ozone-csi/csi-node-daemonset.yaml | 97 +++++++++++++++++++++
 .../examples/ozone-csi/csi-ozone-clusterrole.yaml  | 98 ++++++++++++++++++++++
 .../ozone-csi/csi-ozone-clusterrolebinding.yaml    | 28 +++++++
 .../ozone-csi/csi-ozone-serviceaccount.yaml        | 21 +++++
 .../ozone-csi/csi-provisioner-deployment.yaml      | 54 ++++++++++++
 .../k8s/examples/ozone-csi/datanode-daemonset.yaml | 56 +++++++++++++
 .../main/k8s/examples/ozone-csi/om-service.yaml    | 28 +++++++
 .../k8s/examples/ozone-csi/om-statefulset.yaml     | 73 ++++++++++++++++
 .../org.apache.hadoop.ozone-csidriver.yaml         | 22 +++++
 .../k8s/examples/ozone-csi/ozone-storageclass.yaml | 21 +++++
 .../ozone-csi/pv-test/nginx-conf-configmap.yaml    | 38 +++++++++
 .../ozone-csi/pv-test/nginx-deployment.yaml        | 50 +++++++++++
 .../ozone-csi/pv-test/nginx-service-service.yaml   | 29 +++++++
 .../nginx-storage-persistentvolumeclaim.yaml       | 29 +++++++
 .../main/k8s/examples/ozone-csi/s3g-service.yaml   | 28 +++++++
 .../k8s/examples/ozone-csi/s3g-statefulset.yaml    | 51 +++++++++++
 .../main/k8s/examples/ozone-csi/scm-service.yaml   | 28 +++++++
 .../k8s/examples/ozone-csi/scm-statefulset.yaml    | 67 +++++++++++++++
 34 files changed, 1338 insertions(+), 2 deletions(-)

commit b8881e47d89d9325c041acc3d64c13bf2a4485e5
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Wed Jun 19 20:11:16 2019 +0530

    HDDS-1454. GC other system pause events can trigger pipeline destroy for all the nodes in the cluster. Contributed by Supratim Deka (#852)

 .../hadoop/hdds/scm/node/NodeStateManager.java     | 167 +++++++++++++++++----
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  29 ++++
 .../hadoop/hdds/scm/node/TestSCMNodeManager.java   |  92 ++++++++++++
 3 files changed, 258 insertions(+), 30 deletions(-)

commit 7e9f024a9fb634706f69fc0858f02e80f6d6fde6
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Tue Jun 18 16:08:48 2019 -0700

    HDDS-1684. OM should create Ratis related dirs only if ratis is enabled (#965)

 .../container/common/impl/TestHddsDispatcher.java  |  2 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   | 22 ----------
 .../snapshot/TestOzoneManagerSnapshotProvider.java |  1 +
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 51 ++++++++++------------
 4 files changed, 26 insertions(+), 50 deletions(-)

commit 47452a363fb457f46ed421014373f045f8dea333
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Tue Jun 18 14:44:23 2019 -0700

    HDDS-1702. Optimize Ozone Recon build time (#982)

 hadoop-ozone/ozone-recon/pom.xml | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 7477b1db0fab9f91fb2b6087216c9bc257d70745
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Tue Jun 18 11:13:13 2019 -0700

    HDDS-1699. Update RocksDB version to 6.0.1 (#980)

 hadoop-hdds/common/pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d84122173df7859aff2869c66de4441b131fc7e1
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Tue Jun 18 08:51:16 2019 -0700

    HDDS-1670. Add limit support to /api/containers and /api/containers/{id} endpoints (#954)

 .../ozone/recon/api/ContainerKeyService.java       | 19 +++++---
 .../recon/spi/ContainerDBServiceProvider.java      | 12 ++++-
 .../spi/impl/ContainerDBServiceProviderImpl.java   | 27 ++++++++++--
 .../ozone/recon/api/TestContainerKeyService.java   | 51 +++++++++++++---------
 4 files changed, 80 insertions(+), 29 deletions(-)

commit aa26930092486c66ccdbdc3730bef6f5146fbdf6
Author: Márton Elek <elek@apache.org>
Date:   Tue Jun 18 08:46:20 2019 +0200

    HDDS-1694. TestNodeReportHandler is failing with NPE
    
    Closes #978

 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 23 ++++++++++------------
 .../hdds/scm/server/StorageContainerManager.java   |  2 +-
 .../hdds/scm/node/TestContainerPlacement.java      |  8 ++++++--
 .../hdds/scm/node/TestNodeReportHandler.java       |  9 ++++++++-
 4 files changed, 25 insertions(+), 17 deletions(-)

commit dc7c21c952693b85326b32229032c8ef85a6a4a8
Author: Xudong Cao <iamcaoxudong@gmail.com>
Date:   Tue Jun 18 02:09:05 2019 +0800

    HDDS-1532. Improve the concurrent testing framework of Freon. (#957)

 .../hadoop/ozone/freon/RandomKeyGenerator.java     | 220 ++++++++++++---------
 .../hadoop/ozone/freon/TestRandomKeyGenerator.java |  15 ++
 2 files changed, 144 insertions(+), 91 deletions(-)

commit ede8729562a0c6c0d20560e7608baa0c2a37f76a
Author: S O'Donnell <sodonnell@cloudera.com>
Date:   Mon Jun 17 09:05:27 2019 +0200

    HDDS-1660. Use Picocli for Ozone Manager
    
    Closes #925

 hadoop-ozone/common/src/main/bin/ozone             |   2 +-
 .../intellij/runConfigurations/OzoneManager.xml    |   4 +-
 .../runConfigurations/OzoneManagerInit.xml         |   4 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   2 +-
 .../hadoop/ozone/MiniOzoneHAClusterImpl.java       |   2 +-
 .../hadoop/ozone/TestSecureOzoneCluster.java       |  30 +++-
 .../org/apache/hadoop/ozone/om/TestOmInit.java     |   6 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |   4 +-
 .../apache/hadoop/ozone/om/OMStarterInterface.java |  33 +++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 144 ++-----------------
 .../hadoop/ozone/om/OzoneManagerStarter.java       | 130 +++++++++++++++++
 .../hadoop/ozone/om/TestOzoneManagerStarter.java   | 154 +++++++++++++++++++++
 .../apache/hadoop/ozone/genesis/GenesisUtil.java   |   2 +-
 13 files changed, 366 insertions(+), 151 deletions(-)

commit b3b2216988fbf29508a4ec434d0f2f92ac560bfa
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sun Jun 16 22:00:39 2019 -0700

    HDDS-1692. RDBTable#iterator should disabled caching of the keys during iterator. (#975)

 .../common/src/main/java/org/apache/hadoop/utils/db/RDBTable.java        | 1 +
 1 file changed, 1 insertion(+)

commit 8bbb549a5cae8b4fd085e9db7e455c395e54ed3d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Jun 15 13:47:07 2019 -0700

    HDDS-1601. Implement updating lastAppliedIndex after buffer flush to OM DB. (#972)

 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java   | 15 ++++++++--
 .../ozone/om/ratis/OzoneManagerRatisSnapshot.java  | 32 ++++++++++++++++++++++
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |  8 +++++-
 ...tOzoneManagerDoubleBufferWithDummyResponse.java | 12 +++++++-
 ...TestOzoneManagerDoubleBufferWithOMResponse.java | 19 ++++++++++++-
 5 files changed, 81 insertions(+), 5 deletions(-)

commit 84d793938284110aa0b3222c2ab930a0021573cb
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Jun 14 01:18:15 2019 +0200

    HDDS-1680. Create missing parent directories during the creation of HddsVolume dirs (#961)

 .../org/apache/hadoop/ozone/container/common/volume/HddsVolume.java     | 2 +-
 .../org/apache/hadoop/ozone/container/common/volume/TestVolumeSet.java  | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit b206c2af7b301bff2c55f66c43df758e6c9ccb47
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Jun 14 01:04:14 2019 +0200

    HDDS-1677. Auditparser robot test shold use a world writable working directory (#958)

 .../dist/src/main/smoketest/auditparser/auditparser.robot | 15 ++++++++-------
 1 file changed, 8 insertions(+), 7 deletions(-)

commit e02a9d97328fda376543dcb4bfe5065574c59470
Author: Chen, Junjie <jimmyjchen@tencent.com>
Date:   Thu Jun 13 11:08:15 2019 +0800

    HDDS-1587. Support dynamically adding delegated classes from to isolated class loader. Contributed by Junjie Chen. (#942)

 hadoop-ozone/common/src/main/bin/ozone-config.sh   |  5 ++
 .../hadoop/fs/ozone/FilteredClassLoader.java       |  6 +++
 .../hadoop/fs/ozone/TestFilteredClassLoader.java   | 63 ++++++++++++++++++++++
 3 files changed, 74 insertions(+)

commit 5f89391ead08331fd815239660d55afd05c527f5
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jun 12 17:45:42 2019 -0700

    HDDS-1620. Implement Volume Write Requests to use Cache and DoubleBuffer. (#884)

 .../java/org/apache/hadoop/utils/db/Table.java     |  10 +
 .../org/apache/hadoop/utils/db/TypedTable.java     |   9 +-
 .../org/apache/hadoop/utils/db/cache/CacheKey.java |   2 +-
 .../apache/hadoop/utils/db/cache/CacheValue.java   |   2 +-
 .../hadoop/utils/db/cache/PartialTableCache.java   |   6 +
 .../apache/hadoop/utils/db/cache/TableCache.java   |   9 +
 .../utils/db/cache/TestPartialTableCache.java      |   8 +-
 .../hadoop/ozone/om/helpers/OmVolumeArgs.java      |  23 ++
 .../src/main/proto/OzoneManagerProtocol.proto      |   2 +-
 hadoop-ozone/ozone-manager/pom.xml                 |   2 +-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  26 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  18 +-
 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java   |   6 +-
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |  53 +----
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |  26 +-
 .../hadoop/ozone/om/request/OMClientRequest.java   |   6 +-
 .../om/request/bucket/OMBucketCreateRequest.java   |   3 +-
 .../request/bucket/OMBucketSetPropertyRequest.java |  23 +-
 .../om/request/volume/OMVolumeCreateRequest.java   | 196 +++++++++++++++
 .../om/request/volume/OMVolumeDeleteRequest.java   | 207 ++++++++++++++++
 .../ozone/om/request/volume/OMVolumeRequest.java   |  98 ++++++++
 .../om/request/volume/OMVolumeSetOwnerRequest.java | 212 +++++++++++++++++
 .../om/request/volume/OMVolumeSetQuotaRequest.java | 166 +++++++++++++
 .../ozone/om/request/volume/package-info.java      |  22 ++
 .../om/response/bucket/OMBucketCreateResponse.java |   2 +
 .../om/response/bucket/OMBucketDeleteResponse.java |   3 +
 .../bucket/OMBucketSetPropertyResponse.java        |   3 +
 .../{ => volume}/OMVolumeCreateResponse.java       |  30 ++-
 .../{ => volume}/OMVolumeDeleteResponse.java       |  29 ++-
 .../response/volume/OMVolumeSetOwnerResponse.java  |  79 ++++++
 .../response/volume/OMVolumeSetQuotaResponse.java  |  55 +++++
 .../ozone/om/response/volume/package-info.java     |  22 ++
 .../OzoneManagerHARequestHandlerImpl.java          |  78 +++---
 ...TestOzoneManagerDoubleBufferWithOMResponse.java |   2 +-
 .../ozone/om/request/TestOMRequestUtils.java       |  76 +++++-
 .../request/volume/TestOMVolumeCreateRequest.java  | 265 +++++++++++++++++++++
 .../request/volume/TestOMVolumeDeleteRequest.java  | 222 +++++++++++++++++
 .../volume/TestOMVolumeSetOwnerRequest.java        | 204 ++++++++++++++++
 .../volume/TestOMVolumeSetQuotaRequest.java        | 195 +++++++++++++++
 .../ozone/om/request/volume/package-info.java      |  21 ++
 .../volume/TestOMVolumeCreateResponse.java         | 125 ++++++++++
 .../volume/TestOMVolumeDeleteResponse.java         | 130 ++++++++++
 .../volume/TestOMVolumeSetOwnerResponse.java       | 142 +++++++++++
 .../volume/TestOMVolumeSetQuotaResponse.java       | 117 +++++++++
 44 files changed, 2778 insertions(+), 157 deletions(-)

commit 8c20d1feab8291b144dacc1d93825f0bbe60fa4f
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jun 12 16:25:31 2019 -0700

    HDDS-1543. Implement addAcl,removeAcl,setAcl,getAcl for Prefix. Contr… (#927)

 .../apache/hadoop/ozone/om/OzoneManagerLock.java   |  25 ++
 .../hadoop/ozone/om/exceptions/OMException.java    |   5 +-
 .../apache/hadoop/ozone/security/acl/OzoneObj.java |  16 +-
 .../hadoop/ozone/security/acl/OzoneObjInfo.java    |  65 ++++-
 .../org/apache/hadoop/ozone/util/RadixTree.java    |  12 +-
 .../src/main/proto/OzoneManagerProtocol.proto      |  19 +-
 .../apache/hadoop/ozone/util/TestRadixTree.java    |   2 -
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  64 ++++-
 .../org/apache/hadoop/ozone/om/KeyManager.java     |  41 ---
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  14 +-
 .../org/apache/hadoop/ozone/om/PrefixManager.java  |  45 +++
 .../apache/hadoop/ozone/om/PrefixManagerImpl.java  | 316 +++++++++++++++++++++
 .../apache/hadoop/ozone/om/fs/OzoneManagerFS.java  |   3 +-
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java | 237 +++++++++++++++-
 14 files changed, 786 insertions(+), 78 deletions(-)

commit 2614fdb412b7a630ca29492d7ecf22f01181d689
Author: Sammi Chen <sammichen@apache.org>
Date:   Thu Jun 13 03:16:42 2019 +0800

    HDDS-1663. Add datanode to network topology cluster during node regis… (#937)

 .../java/org/apache/hadoop/hdds/scm/net/Node.java  |  12 +++
 .../org/apache/hadoop/hdds/scm/net/NodeImpl.java   |  36 +++++--
 hadoop-hdds/server-scm/pom.xml                     |   3 +
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |   9 ++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  67 ++++++++++++
 .../hdds/scm/server/StorageContainerManager.java   |  11 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |   2 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |   5 +
 .../hadoop/hdds/scm/node/TestSCMNodeManager.java   | 112 +++++++++++++++++++++
 .../testutils/ReplicationNodeManagerMock.java      |   5 +
 .../src/test/resources/nodegroup-mapping           |  24 +++++
 .../server-scm/src/test/resources/rack-mapping     |  24 +++++
 .../dist/src/main/compose/ozone-net-topology/.env  |  17 ++++
 .../compose/ozone-net-topology/docker-compose.yaml | 110 ++++++++++++++++++++
 .../main/compose/ozone-net-topology/docker-config  |  88 ++++++++++++++++
 .../main/compose/ozone-net-topology/network-config |  22 ++++
 .../src/main/compose/ozone-net-topology/test.sh    |  35 +++++++
 17 files changed, 573 insertions(+), 9 deletions(-)

commit c2a4dedad7b1351578f62bd770f42f05978165c4
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Wed Jun 12 06:51:34 2019 -0700

    HDDS-1545. Cli to add,remove,get and delete acls for Ozone objects. Contributed by Ajay Kumar. (#920)

 .../java/org/apache/hadoop/ozone/OzoneAcl.java     |  24 +++++
 .../hadoop/ozone/security/acl/OzoneAclConfig.java  |   6 ++
 .../hadoop/ozone/security/acl/OzoneObjInfo.java    |   6 +-
 .../src/main/proto/OzoneManagerProtocol.proto      |  18 ++--
 .../org/apache/hadoop/ozone/TestOzoneAcls.java     |  42 +++++++++
 .../ozone/security/acl/TestOzoneObjInfo.java       |  69 +++++++++++++-
 .../src/main/smoketest/basic/ozone-shell.robot     |  62 +++++++++++-
 .../main/smoketest/security/ozone-secure-fs.robot  |  50 +++++++++-
 .../protocolPB/OzoneManagerRequestHandler.java     |   3 +-
 .../web/ozShell/bucket/AddAclBucketHandler.java    | 101 ++++++++++++++++++++
 .../ozone/web/ozShell/bucket/BucketCommands.java   |   6 +-
 .../web/ozShell/bucket/GetAclBucketHandler.java    |  84 +++++++++++++++++
 .../web/ozShell/bucket/RemoveAclBucketHandler.java | 101 ++++++++++++++++++++
 .../web/ozShell/bucket/SetAclBucketHandler.java    | 101 ++++++++++++++++++++
 .../ozone/web/ozShell/keys/AddAclKeyHandler.java   | 104 +++++++++++++++++++++
 .../ozone/web/ozShell/keys/GetAclKeyHandler.java   |  87 +++++++++++++++++
 .../hadoop/ozone/web/ozShell/keys/KeyCommands.java |   6 +-
 .../web/ozShell/keys/RemoveAclKeyHandler.java      | 104 +++++++++++++++++++++
 .../ozone/web/ozShell/keys/SetAclKeyHandler.java   | 103 ++++++++++++++++++++
 .../web/ozShell/volume/AddAclVolumeHandler.java    |  98 +++++++++++++++++++
 .../web/ozShell/volume/GetAclVolumeHandler.java    |  78 ++++++++++++++++
 .../web/ozShell/volume/RemoveAclVolumeHandler.java |  98 +++++++++++++++++++
 .../web/ozShell/volume/SetAclVolumeHandler.java    | 101 ++++++++++++++++++++
 .../ozone/web/ozShell/volume/VolumeCommands.java   |   6 +-
 24 files changed, 1436 insertions(+), 22 deletions(-)

commit fc81ddf1ea22fe56c5ed43667cefc1bd0814b6ad
Author: Márton Elek <elek@apache.org>
Date:   Wed Jun 12 08:52:16 2019 +0200

    Revert "HDDS-1659. Define the process to add proposal/design docs to the Ozone subproject (#922)"
    
    This reverts commit e997f2a34a170dfcd1023b82d1ced85c46b0f1f1.

 .../content/design/ozone-enhancement-proposals.md  | 97 ----------------------
 1 file changed, 97 deletions(-)

commit 650addfe521ab208ef87ca5669a24f513ea64beb
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Tue Jun 11 20:20:21 2019 +0200

    HDDS-1659. Define the process to add proposal/design docs to the Ozone subproject (#922)
    
    * HDDS-1659. Define the process to add proposal/design docs to the Ozone subproject
    
    * Remove Site improvements to display proposals

 .../content/design/ozone-enhancement-proposals.md  | 97 ++++++++++++++++++++++
 1 file changed, 97 insertions(+)

commit 98297b0066e12c6089b6b47c7f0eca463480d1a6
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Tue Jun 11 20:18:12 2019 +0200

    HDDS-1627. Make the version of the used hadoop-runner configurable (#886)

 hadoop-ozone/dist/pom.xml                             |  1 +
 hadoop-ozone/dist/src/main/compose/ozone-hdfs/.env    |  3 ++-
 .../src/main/compose/ozone-hdfs/docker-compose.yaml   |  6 +++---
 hadoop-ozone/dist/src/main/compose/ozone-om-ha/.env   |  3 ++-
 .../src/main/compose/ozone-om-ha/docker-compose.yaml  | 10 +++++-----
 hadoop-ozone/dist/src/main/compose/ozone-recon/.env   |  3 ++-
 .../src/main/compose/ozone-recon/docker-compose.yaml  |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozone/.env         |  3 ++-
 .../dist/src/main/compose/ozone/docker-compose.yaml   |  6 +++---
 hadoop-ozone/dist/src/main/compose/ozoneblockade/.env | 18 ++++++++++++++++++
 .../main/compose/ozoneblockade/docker-compose.yaml    |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozonefs/.env       | 18 ++++++++++++++++++
 .../dist/src/main/compose/ozonefs/docker-compose.yaml |  6 +++---
 hadoop-ozone/dist/src/main/compose/ozoneperf/.env     |  1 +
 .../src/main/compose/ozoneperf/docker-compose.yaml    |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozones3/.env       | 18 ++++++++++++++++++
 .../dist/src/main/compose/ozones3/docker-compose.yaml |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozonescripts/.env  | 18 ++++++++++++++++++
 .../dist/src/main/compose/ozonesecure-mr/.env         |  1 +
 .../main/compose/ozonesecure-mr/docker-compose.yaml   |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozonesecure/.env   |  1 +
 .../src/main/compose/ozonesecure/docker-compose.yaml  |  8 ++++----
 hadoop-ozone/dist/src/main/compose/ozonetrace/.env    | 19 +++++++++++++++++++
 .../src/main/compose/ozonetrace/docker-compose.yaml   |  8 ++++----
 24 files changed, 145 insertions(+), 46 deletions(-)

commit 99b100c49dc8da48226b52a8f327f42202f864f1
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Tue Jun 11 20:12:05 2019 +0200

    HDDS-1635. Maintain docker entrypoint and envtoconf inside ozone project (#894)

 .../dist/dev-support/bin/dist-layout-stitching     |   1 +
 hadoop-ozone/dist/src/main/dockerbin/entrypoint.sh | 149 ++++++++++++++++++++
 hadoop-ozone/dist/src/main/dockerbin/envtoconf.py  | 117 ++++++++++++++++
 .../dist/src/main/dockerbin/transformation.py      | 150 +++++++++++++++++++++
 4 files changed, 417 insertions(+)

commit aa3674e42c66626d13f4229d4cd265a4e0f1b5db
Author: Márton Elek <elek@apache.org>
Date:   Tue Jun 11 19:30:22 2019 +0200

    HDDS-1669. SCM startup is failing if network-topology-default.xml is part of a jar
    
    Closes #946

 .../hadoop/hdds/scm/net/NodeSchemaLoader.java      | 89 ++++++++++++----------
 .../hadoop/hdds/scm/net/NodeSchemaManager.java     |  6 +-
 hadoop-ozone/integration-test/pom.xml              | 11 +--
 3 files changed, 53 insertions(+), 53 deletions(-)

commit 9944b8cc8c3a6b656f6fa39c1a3491e443f65802
Author: Sammi Chen <sammichen@apache.org>
Date:   Tue Jun 11 12:00:12 2019 +0200

    HDDS-1662. Missing test resources of integrataion-test project in target directory after compile
    
    Closes #933

 hadoop-ozone/integration-test/pom.xml | 3 +++
 1 file changed, 3 insertions(+)

commit b64e1578f65f6f5864cc2b9266d108da62c5f343
Author: Shweta Yakkali <shwetayakkali@cloudera.com>
Date:   Sat Jun 8 22:12:29 2019 -0700

    HDDS-1655. Redundant toString() call for metaDataPath in KeyValueContainerCheck (#932)

 .../apache/hadoop/ozone/container/keyvalue/KeyValueContainerCheck.java | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 137707132e74f5a73cea843d80e4dac23ba516e0
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Fri Jun 7 21:47:14 2019 -0700

    HDDS-1657. Fix parallelStream usage in volume and key native acl. Contributed by Ajay Kumar. (#926)

 .../om/protocolPB/OzoneManagerProtocolClientSideTranslatorPB.java | 2 +-
 .../hadoop/ozone/client/rpc/TestOzoneRpcClientAbstract.java       | 8 ++++++--
 .../hadoop/ozone/protocolPB/OzoneManagerRequestHandler.java       | 3 +--
 3 files changed, 8 insertions(+), 5 deletions(-)

commit 72c7497011b1142174417d19ca2bc7f452e0f75e
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Sat Jun 8 05:40:32 2019 +0200

    HDDS-1636. Tracing id is not propagated via async datanode grpc call (#895)

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  7 ++-
 .../hdds/scm/client/ContainerOperationClient.java  | 14 ++---
 .../hadoop/hdds/scm/storage/BlockInputStream.java  |  8 ++-
 .../hadoop/hdds/scm/storage/BlockOutputStream.java | 18 +++----
 .../hadoop/hdds/scm/storage/ChunkInputStream.java  |  8 ++-
 .../hdds/scm/storage/TestBlockInputStream.java     |  7 ++-
 .../hdds/scm/storage/TestChunkInputStream.java     |  8 ++-
 .../hdds/scm/storage/ContainerProtocolCalls.java   | 63 +++++++---------------
 .../apache/hadoop/hdds/tracing/StringCodec.java    |  2 +-
 .../ozone/client/io/BlockOutputStreamEntry.java    |  8 +--
 .../hadoop/ozone/client/io/KeyInputStream.java     | 12 ++---
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 11 ++--
 .../TestContainerStateMachineIdempotency.java      | 11 ++--
 .../hadoop/ozone/scm/TestContainerSmallFile.java   | 34 +++++-------
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  | 18 +++----
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  9 ++--
 .../web/storage/DistributedStorageHandler.java     |  2 +-
 .../apache/hadoop/ozone/om/TestChunkStreams.java   |  4 +-
 18 files changed, 90 insertions(+), 154 deletions(-)

commit c36c33e961e49e65df07daf7227076317534b936
Author: S O'Donnell <sodonnell@cloudera.com>
Date:   Fri Jun 7 17:50:57 2019 +0200

    HDDS-1622. Use picocli for StorageContainerManager
    
    Closes #918

 .../hdds/scm/server/SCMStarterInterface.java       |  37 ++++
 .../hdds/scm/server/StorageContainerManager.java   | 197 +--------------------
 .../scm/server/StorageContainerManagerStarter.java | 153 ++++++++++++++++
 .../org/apache/hadoop/hdds/scm/HddsTestUtils.java  |   2 +-
 .../server/TestStorageContainerManagerStarter.java | 166 +++++++++++++++++
 hadoop-ozone/common/src/main/bin/ozone             |   2 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   4 +-
 .../hadoop/ozone/TestSecureOzoneCluster.java       |  16 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  28 +--
 9 files changed, 380 insertions(+), 225 deletions(-)

commit fe0b46d0c10f34bfe696475c32127f46dda0e563
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Jun 6 19:44:40 2019 -0700

    HDDS-1496. Support partial chunk reads and checksum verification (#804)

 .../hadoop/hdds/scm/storage/BlockInputStream.java  | 634 +++++++++------------
 .../hadoop/hdds/scm/storage/ChunkInputStream.java  | 546 ++++++++++++++++++
 .../hdds/scm/storage/TestBlockInputStream.java     | 251 ++++----
 .../hdds/scm/storage/TestChunkInputStream.java     | 224 ++++++++
 .../org/apache/hadoop/ozone/common/Checksum.java   |  29 +-
 .../apache/hadoop/ozone/common/ChecksumData.java   |  37 +-
 .../hadoop/ozone/client/io/KeyInputStream.java     | 380 +++++-------
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |   4 +-
 .../web/storage/DistributedStorageHandler.java     |   3 +-
 .../apache/hadoop/ozone/om/TestChunkStreams.java   |  11 +-
 10 files changed, 1377 insertions(+), 742 deletions(-)

commit 17281d66db4e51d7e748828bd9dd8a9f35eda0fd
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Jun 6 19:42:35 2019 -0700

    HDDS-1371. OMSnapshotProvider to download DB checkpoint from leader OM. (#703)

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  11 ++
 .../org/apache/hadoop/utils/db/DBCheckpoint.java   |  16 ++
 .../apache/hadoop/utils/db/RocksDBCheckpoint.java  |  11 ++
 .../common/src/main/resources/ozone-default.xml    |  49 ++++-
 .../hadoop/ozone/client/rest/RestClient.java       |   4 +-
 .../main/java/org/apache/hadoop/ozone/OmUtils.java | 105 +++++++++++
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |  21 +++
 .../hadoop/ozone/MiniOzoneHAClusterImpl.java       |  16 +-
 .../snapshot/TestOzoneManagerSnapshotProvider.java | 125 ++++++++++++
 .../hadoop/ozone/om/OMDBCheckpointServlet.java     |  26 ++-
 .../org/apache/hadoop/ozone/om/OMNodeDetails.java  |  41 +++-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  88 +++++++--
 .../hadoop/ozone/om/OzoneManagerHttpServer.java    |   9 +-
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |  17 +-
 .../om/snapshot/OzoneManagerSnapshotProvider.java  | 210 +++++++++++++++++++++
 .../hadoop/ozone/om/snapshot/package-info.java     |  23 +++
 .../spi/impl/OzoneManagerServiceProviderImpl.java  |   6 +-
 17 files changed, 723 insertions(+), 55 deletions(-)

commit a6d733a9639014c364df227118d6ec329b88fd56
Author: Sammi Chen <sammichen@apache.org>
Date:   Fri Jun 7 03:14:47 2019 +0800

    HDDS-1490. Support configurable container placement policy through 'o… (#903)

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   4 +
 .../algorithms/ContainerPlacementPolicy.java       |   0
 .../placement/algorithms/package-info.java         |  21 +++
 .../hadoop/hdds/scm/net/NetworkTopologyImpl.java   |   2 +-
 .../hadoop/hdds/scm/net/NodeSchemaLoader.java      |  72 ++++++-----
 .../hadoop/hdds/scm/net/NodeSchemaManager.java     |  11 +-
 .../common/src/main/resources/ozone-default.xml    |   8 +-
 .../hadoop/hdds/scm/net/TestNodeSchemaLoader.java  |   8 +-
 .../hadoop/hdds/scm/net/TestNodeSchemaManager.java |   2 +-
 .../hadoop/hdds/scm/net/TestYamlSchemaLoader.java  |  10 +-
 hadoop-hdds/server-scm/pom.xml                     |   5 +
 .../ContainerPlacementPolicyFactory.java           |  67 ++++++++++
 .../algorithms/SCMContainerPlacementCapacity.java  |   4 +-
 .../algorithms/SCMContainerPlacementRandom.java    |   4 +-
 .../hadoop/hdds/scm/exceptions/SCMException.java   |   3 +-
 .../hdds/scm/server/StorageContainerManager.java   |  20 ++-
 .../hdds/scm/container/TestReplicationManager.java |   5 +-
 .../algorithms/TestContainerPlacementFactory.java  | 142 +++++++++++++++++++++
 .../TestSCMContainerPlacementCapacity.java         |   2 +-
 .../TestSCMContainerPlacementRackAware.java        |  39 +++++-
 .../TestSCMContainerPlacementRandom.java           |   2 +-
 .../placement/TestContainerPlacement.java          |   6 +-
 hadoop-ozone/integration-test/pom.xml              |   8 ++
 hadoop-ozone/ozone-manager/pom.xml                 |   8 ++
 24 files changed, 380 insertions(+), 73 deletions(-)

commit 69a7e5cb37401861c31d278f0601ab489c37ec3f
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jun 6 11:20:04 2019 -0700

    HDDS-1650. Fix Ozone tests leaking volume checker thread. Contributed by Xiaoyu Yao. (#915)

 .../ozone/container/common/impl/TestHddsDispatcher.java  |  9 ++++++---
 .../volume/TestRoundRobinVolumeChoosingPolicy.java       | 13 ++++++++++++-
 .../ozone/container/common/volume/TestVolumeSet.java     |  1 +
 .../container/common/volume/TestVolumeSetDiskChecks.java |  3 +++
 .../ozone/container/keyvalue/TestKeyValueHandler.java    |  7 ++++---
 .../ozone/container/ozoneimpl/TestOzoneContainer.java    | 16 +++++++++++-----
 6 files changed, 37 insertions(+), 12 deletions(-)

commit 59332e9555eb6fa440850d040131bb66f8fe7e5c
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jun 6 11:17:59 2019 -0700

    HDDS-1652. HddsDispatcher should not shutdown volumeSet. Contributed by Xiaoyu Yao. (#916)

 .../apache/hadoop/ozone/container/common/impl/HddsDispatcher.java    | 2 --
 .../org/apache/hadoop/ozone/genesis/BenchMarkDatanodeDispatcher.java | 5 +++--
 2 files changed, 3 insertions(+), 4 deletions(-)

commit 27104c58240ce1382419cf33addbe2490164acfb
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Thu Jun 6 11:13:29 2019 -0700

    HDDS-1647 : Recon config tag does not show up on Ozone UI. (#914)

 hadoop-hdds/common/src/main/resources/ozone-default.xml | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 6b7977318de6a78790f58fa7ab1a4e76c4c88b18
Author: Shweta Yakkali <shwetayakkali@cloudera.com>
Date:   Thu Jun 6 11:06:48 2019 -0700

    HDDS-1201. Reporting Corruptions in Containers to SCM (#912)

 .../ozone/container/common/impl/HddsDispatcher.java  |  2 +-
 .../ozone/container/common/interfaces/Handler.java   |  2 +-
 .../ozone/container/keyvalue/KeyValueHandler.java    | 12 ++++++------
 .../container/ozoneimpl/ContainerController.java     |  4 ++--
 .../ozone/container/ozoneimpl/ContainerScrubber.java | 20 +++++++++-----------
 5 files changed, 19 insertions(+), 21 deletions(-)

commit b296772a80bbc96e2b674216e12e83870adac7b6
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 6 10:13:36 2019 -0700

    HDDS-1605. Implement AuditLogging for OM HA Bucket write requests. (#867)

 .../org/apache/hadoop/ozone/audit/AuditLogger.java | 10 +++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  4 ++
 .../hadoop/ozone/om/request/OMClientRequest.java   | 39 ++++++++++++++++-
 .../hadoop/ozone/om/request/RequestAuditor.java    | 50 ++++++++++++++++++++++
 .../om/request/bucket/OMBucketCreateRequest.java   | 38 +++++++++++-----
 .../om/request/bucket/OMBucketDeleteRequest.java   | 40 +++++++++++++----
 .../request/bucket/OMBucketSetPropertyRequest.java | 44 +++++++++++++++----
 .../request/bucket/TestOMBucketCreateRequest.java  |  7 +++
 .../request/bucket/TestOMBucketDeleteRequest.java  |  7 +++
 .../bucket/TestOMBucketSetPropertyRequest.java     |  8 +++-
 10 files changed, 217 insertions(+), 30 deletions(-)

commit c17afc0d0d259358154e4bfb961ed423e6b71ef4
Author: S O'Donnell <sodonnell@cloudera.com>
Date:   Thu Jun 6 15:57:40 2019 +0200

    HDDS-1645. Change the version of Pico CLI to the latest 3.x release - 3.9.6
    
    Closes #909

 hadoop-hdds/pom.xml                                                    | 2 +-
 .../src/test/java/org/apache/hadoop/ozone/ozShell/TestOzoneShell.java  | 3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

commit 44712a084f1ddbe144f68cc7d08c07f0da528c85
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Thu Jun 6 18:53:37 2019 +0530

    HDDS-1621. writeData in ChunkUtils should not use AsynchronousFileChannel. Contributed by Supratim Deka (#917)

 .../container/keyvalue/helpers/ChunkUtils.java     | 22 ++++++++++++----------
 1 file changed, 12 insertions(+), 10 deletions(-)

commit 55a74f53f376136e4d7c3b73facd0c3c528c60e8
Author: Márton Elek <elek@apache.org>
Date:   Thu Jun 6 11:53:18 2019 +0200

    HDDS-1458. Create a maven profile to run fault injection tests. Contributed by Eric Yang.

 hadoop-ozone/.gitignore                            |  20 ++++
 .../dist/dev-support/bin/dist-layout-stitching     |   5 +-
 .../fault-injection-test/network-tests/pom.xml     | 103 +++++++++++++++++++++
 .../network-tests/src/test}/blockade/README.md     |  20 ++--
 .../src/test}/blockade/blockadeUtils/__init__.py   |   0
 .../src/test}/blockade/blockadeUtils/blockade.py   |   0
 .../src/test}/blockade/clusterUtils/__init__.py    |   0
 .../test}/blockade/clusterUtils/cluster_utils.py   |   2 +-
 .../network-tests/src/test}/blockade/conftest.py   |   0
 .../src/test}/blockade/ozone/__init__.py           |   0
 .../src/test}/blockade/ozone/cluster.py            |  20 ++--
 .../test}/blockade/test_blockade_client_failure.py |  18 +++-
 .../blockade/test_blockade_datanode_isolation.py   |   3 +-
 .../src/test}/blockade/test_blockade_flaky.py      |  18 +++-
 .../test}/blockade/test_blockade_mixed_failure.py  |  18 +++-
 ...t_blockade_mixed_failure_three_nodes_isolate.py |  18 +++-
 .../test_blockade_mixed_failure_two_nodes.py       |  18 +++-
 .../test}/blockade/test_blockade_scm_isolation.py  |  18 +++-
 .../network-tests/src/test}/blockade/util.py       |   0
 .../src/test/compose/docker-compose.yaml           |  50 ++++++++++
 .../network-tests/src/test/compose/docker-config   |  77 +++++++++++++++
 hadoop-ozone/fault-injection-test/pom.xml          |  35 +++++++
 hadoop-ozone/pom.xml                               |   2 +-
 pom.ozone.xml                                      |   2 +-
 24 files changed, 404 insertions(+), 43 deletions(-)

commit f7dd7ddf3bd9dd683ba710b9bc73ef491215e3fe
Author: Sammi Chen <sammichen@apache.org>
Date:   Thu Jun 6 11:13:39 2019 +0800

    HDDS-1612. Add 'scmcli printTopology' shell command to print datanode topology. Contributed by Sammi Chen.(#910)

 .../hadoop/hdds/protocol/DatanodeDetails.java      |  2 +
 hadoop-hdds/common/src/main/proto/hdds.proto       |  1 +
 .../org/apache/hadoop/hdds/scm/cli/SCMCLI.java     |  3 +-
 .../hadoop/hdds/scm/cli/TopologySubcommand.java    | 80 ++++++++++++++++++++++
 4 files changed, 85 insertions(+), 1 deletion(-)

commit 94a6e733c4b301f9308a227ea3a12a3976a52c62
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Wed Jun 5 14:42:10 2019 -0700

    HDDS-1541. Implement addAcl,removeAcl,setAcl,getAcl for Key. Contributed by Ajay Kumat. (#885)

 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  29 +-
 .../java/org/apache/hadoop/ozone/OzoneAcl.java     |   3 +-
 .../apache/hadoop/ozone/om/helpers/OmKeyArgs.java  |  18 +-
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  |  26 +-
 .../hadoop/ozone/om/helpers/OmOzoneAclMap.java     |  34 +-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  11 +
 .../hadoop/ozone/security/acl/OzoneObjInfo.java    |  57 ++--
 .../apache/hadoop/ozone/web/utils/OzoneUtils.java  |  29 ++
 .../src/main/proto/OzoneManagerProtocol.proto      |   2 +
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 284 +++++++++-------
 .../ozone/om/TestMultipleContainerReadWrite.java   |   2 +
 .../hadoop/ozone/om/TestOmBlockVersioning.java     |   3 +
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |   4 +
 .../apache/hadoop/ozone/om/TestScmSafeMode.java    |   2 +
 .../web/storage/DistributedStorageHandler.java     |   7 +
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  | 116 +++----
 .../org/apache/hadoop/ozone/om/KeyManager.java     |  40 +++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 359 +++++++++++++++++++--
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  11 +-
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  |   4 +-
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |   2 +
 .../protocolPB/OzoneManagerRequestHandler.java     |  12 +
 .../hadoop/ozone/om/TestKeyDeletingService.java    |   2 +
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java |  13 +-
 24 files changed, 837 insertions(+), 233 deletions(-)

commit d0bc7e02013a8b29f8e6a0defdb20fb9fcedff9d
Author: ChenSammi <sammichen@apache.org>
Date:   Thu Jun 6 00:09:36 2019 +0800

    HDDS-1637. Fix random test failure TestSCMContainerPlacementRackAware. Contributed by Sammi Chen. (#904)

 .../algorithms/SCMContainerPlacementRackAware.java          | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 4c250c1c3ab2f92d361e3c43cf2aa63bf9dbf2c8
Author: Márton Elek <elek@apache.org>
Date:   Wed Jun 5 14:04:17 2019 +0200

    HDDS-1628. Fix the execution and return code of smoketest executor shell script
    
    Closes #902

 hadoop-ozone/dev-support/checks/acceptance.sh  | 3 ++-
 hadoop-ozone/dist/src/main/compose/test-all.sh | 2 +-
 hadoop-ozone/dist/src/main/smoketest/test.sh   | 3 ++-
 3 files changed, 5 insertions(+), 3 deletions(-)

commit d09a24682b219a43a2be2f20fd9a245d7a421a4b
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Wed Jun 5 07:51:23 2019 +0200

    HDDS-1640. Reduce the size of recon jar file
    
    Closes #907

 hadoop-ozone/pom.xml | 6 ++++++
 1 file changed, 6 insertions(+)

commit 345e7bad4054ca7a53326f3fdee8c465a740909f
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Tue Jun 4 15:41:37 2019 -0700

    HDDS-1624 : Refactor operations inside the bucket lock in OM key write. (#882)

 .../java/org/apache/hadoop/utils/UniqueId.java     |  69 +++++++++++++
 .../java/org/apache/hadoop/utils/db/RDBTable.java  |  10 ++
 .../java/org/apache/hadoop/utils/db/Table.java     |  10 ++
 .../org/apache/hadoop/utils/db/TypedTable.java     |   7 ++
 .../apache/hadoop/utils/db/TestRDBTableStore.java  |  21 +++-
 .../hadoop/utils/db/TestTypedRDBTableStore.java    |  37 ++++++-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  45 +--------
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 107 +++++++++------------
 8 files changed, 199 insertions(+), 107 deletions(-)

commit e632606205a38379fcb354c97739a5647d129ac6
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Jun 4 12:31:44 2019 -0700

    HDDS-1600. Add userName and IPAddress as part of OMRequest. (#857)

 .../hadoop/ozone/om/exceptions/OMException.java    |   4 +
 .../ozone/security/acl/IAccessAuthorizer.java      |   5 +-
 .../ozone/security/acl/OzoneAccessAuthorizer.java  |   4 +-
 .../ozone/security/acl/OzoneAclException.java      |  71 ------------
 .../src/main/proto/OzoneManagerProtocol.proto      |  15 +++
 .../org/apache/hadoop/ozone/om/TestOmAcls.java     |  10 +-
 hadoop-ozone/ozone-manager/pom.xml                 |   7 ++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  58 +++++++---
 .../hadoop/ozone/om/request/OMClientRequest.java   | 107 +++++++++++++++++-
 .../om/request/bucket/OMBucketCreateRequest.java   |  47 +++++---
 .../om/request/bucket/OMBucketDeleteRequest.java   |  49 ++++++---
 .../request/bucket/OMBucketSetPropertyRequest.java |  48 ++++++---
 .../hadoop/ozone/om/response/OMClientResponse.java |   2 +
 .../om/response/bucket/OMBucketCreateResponse.java |  14 ++-
 .../om/response/bucket/OMBucketDeleteResponse.java |  10 +-
 .../bucket/OMBucketSetPropertyResponse.java        |  13 ++-
 .../request/TestOMClientRequestWithUserInfo.java   | 119 +++++++++++++++++++++
 .../ozone/om/request/TestOMRequestUtils.java       |  37 ++++++-
 .../request/bucket/TestOMBucketCreateRequest.java  |  41 ++-----
 .../request/bucket/TestOMBucketDeleteRequest.java  |   5 +-
 .../bucket/TestOMBucketSetPropertyRequest.java     |   3 +-
 21 files changed, 471 insertions(+), 198 deletions(-)

commit f2c9df4350718ea9c8de8d5af7ada9e3b6780d36
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Tue Jun 4 19:38:37 2019 +0200

    HDDS-1510. Classpath files are deployed to the maven repository as pom/jar files. Contributed by Elek, Marton. (#900)

 hadoop-hdds/pom.xml       | 24 +++++++++++++++++++++++-
 hadoop-ozone/dist/pom.xml | 11 +++++++++++
 hadoop-ozone/pom.xml      | 24 +++++++++++++++++++++++-
 3 files changed, 57 insertions(+), 2 deletions(-)

commit 814f180c89988503871357aab0f5a4cd79e8b493
Author: bshashikant <31469764+bshashikant@users.noreply.github.com>
Date:   Tue Jun 4 23:07:02 2019 +0530

    HDDS-1224. Restructure code to validate the response from server in the Read path (#806)

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 88 +++++++++++----------
 .../hadoop/hdds/scm/storage/BlockInputStream.java  | 89 +++++++++-------------
 .../hdds/scm/storage/TestBlockInputStream.java     |  3 +-
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   | 17 +++--
 .../hadoop/hdds/scm/storage/CheckedBiFunction.java | 31 ++++++++
 .../hdds/scm/storage/ContainerProtocolCalls.java   | 87 ++++++++++-----------
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  6 +-
 .../hadoop/ozone/client/rpc/TestReadRetries.java   |  5 +-
 8 files changed, 168 insertions(+), 158 deletions(-)

commit 797dc3a0c682e6c17ef52b800e3ad0b54bbb899c
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Tue Jun 4 16:18:15 2019 +0200

    HDDS-1641. Csi server fails because transitive Netty dependencies (#906)

 hadoop-ozone/csi/pom.xml | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

commit cb1278fdf469f89398d846b23302beaa1968e93e
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Tue Jun 4 08:30:43 2019 +0200

    HDDS-1631. Fix auditparser smoketests (#892)

 hadoop-ozone/dist/src/main/compose/ozone/test.sh                   | 2 +-
 hadoop-ozone/dist/src/main/smoketest/auditparser/auditparser.robot | 5 +++--
 2 files changed, 4 insertions(+), 3 deletions(-)

commit 2f78f40578d9512065ae96966d20c439a1ce8697
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Tue Jun 4 08:20:45 2019 +0200

    HDDS-1629. Tar file creation can be optional for non-dist builds. Contributed by Elek, Marton. (#887)

 hadoop-ozone/dist/pom.xml | 49 ++++++++++++++++++++++++++++++-----------------
 1 file changed, 31 insertions(+), 18 deletions(-)

commit 2b36ab31a4ef7c11db35017e5750f4305562e9c9
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Tue Jun 4 08:18:02 2019 +0200

    HDDS-1607. Create smoketest for non-secure mapreduce example (#869)
    
    * HDDS-1607. Create smoketest for non-secure mapreduce example.
    
    * remove hardcoded project version

 hadoop-ozone/dist/src/main/compose/ozone-mr/.env   |  19 +++
 .../src/main/compose/ozone-mr/docker-compose.yaml  |  95 +++++++++++++++
 .../dist/src/main/compose/ozone-mr/docker-config   | 130 +++++++++++++++++++++
 .../dist/src/main/compose/ozone-mr/test.sh         |  36 ++++++
 .../dist/src/main/smoketest/createmrenv.robot      |  48 ++++++++
 .../dist/src/main/smoketest/mapreduce.robot        |  37 ++++++
 6 files changed, 365 insertions(+)

commit 16347b9673620671c43538d39759f754518ebff7
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Jun 4 02:12:44 2019 +0530

    Opening of rocksDB in datanode fails with "No locks available"
    
    Signed-off-by: Nanda kumar <nanda@apache.org>

 .../container/common/utils/ContainerCache.java     |  14 +--
 .../container/common/utils/ReferenceCountedDB.java |  28 ++---
 .../ozone/container/common/TestContainerCache.java | 128 +++++++++++++++++++++
 3 files changed, 145 insertions(+), 25 deletions(-)

commit 2895d91169dee5b84d72335a7271246eb8fc505e
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Mon Jun 3 12:45:04 2019 -0700

    HDDS-1625 : ConcurrentModificationException when SCM has containers of different owners. (#883)

 .../hdds/scm/container/SCMContainerManager.java    |  9 +++++---
 .../TestContainerStateManagerIntegration.java      | 24 ++++++++++++++++++++++
 2 files changed, 30 insertions(+), 3 deletions(-)

commit f274789f5526848330285390a47cd3f8d847a5c1
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Jun 4 00:59:02 2019 +0530

    HDDS-1558. IllegalArgumentException while processing container Reports.
    
    Signed-off-by: Nanda kumar <nanda@apache.org>

 .../container/common/impl/HddsDispatcher.java      | 15 +++-
 .../ozone/container/common/interfaces/Handler.java |  9 +++
 .../container/keyvalue/KeyValueContainer.java      |  6 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  | 14 ++++
 .../rpc/TestContainerStateMachineFailures.java     | 85 ++++++++++++++++++++++
 5 files changed, 125 insertions(+), 4 deletions(-)

commit 6fed5979695ea89468d3fc0c5c433313da1b34be
Author: Márton Elek <elek@apache.org>
Date:   Mon Jun 3 08:34:19 2019 +0200

    Revert "HDDS-1597. Remove hdds-server-scm dependency from ozone-common. (#860)"
    
    This reverts commit baee71551d5a9c39760631de463684d810fa96fa.

 .../org/apache/hadoop/hdds/server/ServerUtils.java  | 21 ---------------------
 .../java/org/apache/hadoop/hdds/scm/ScmUtils.java   | 21 +++++++++++++++++++--
 .../hadoop/hdds/scm/exceptions/SCMException.java    |  0
 .../hadoop/hdds/scm/exceptions/package-info.java    |  0
 hadoop-ozone/common/pom.xml                         |  4 ++++
 .../main/java/org/apache/hadoop/ozone/OmUtils.java  |  4 ++--
 hadoop-ozone/integration-test/pom.xml               |  9 ---------
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java  |  0
 hadoop-ozone/pom.xml                                |  5 -----
 hadoop-ozone/tools/pom.xml                          |  5 -----
 10 files changed, 25 insertions(+), 44 deletions(-)

commit 016bd178a1f24654f52584c2856b037a5ce08707
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Fri May 31 14:08:28 2019 -0700

    HDDS-1540. Implement addAcl,removeAcl,setAcl,getAcl for Bucket. Contributed by Ajay Kumar. (#874)

 .../client/rpc/TestOzoneRpcClientAbstract.java     |  66 +++++-
 .../org/apache/hadoop/ozone/om/BucketManager.java  |   3 +-
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  | 242 ++++++++++++++++++++-
 .../java/org/apache/hadoop/ozone/om/IOzoneAcl.java |  67 ++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  49 +++--
 .../org/apache/hadoop/ozone/om/VolumeManager.java  |  42 +---
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  |  14 +-
 .../protocolPB/OzoneManagerRequestHandler.java     |   2 +-
 8 files changed, 423 insertions(+), 62 deletions(-)

commit c11cb612856709e09dae01f03759c043f4ff9b46
Author: Márton Elek <elek@apache.org>
Date:   Fri May 31 13:35:58 2019 +0200

    HDDS-1382. Create customized CSI server for Ozone
    
    Closes #693

 .../java/org/apache/hadoop/hdds/HddsUtils.java     |    7 +-
 .../java/org/apache/hadoop/hdds/TestHddsUtils.java |   42 +
 hadoop-ozone/common/src/main/bin/ozone             |    6 +
 .../csi/dev-support/findbugsExcludeFile.xml        |   22 +
 hadoop-ozone/csi/pom.xml                           |  169 +++
 .../apache/hadoop/ozone/csi/ControllerService.java |  123 ++
 .../org/apache/hadoop/ozone/csi/CsiServer.java     |  160 +++
 .../apache/hadoop/ozone/csi/IdentitiyService.java  |   72 ++
 .../org/apache/hadoop/ozone/csi/NodeService.java   |  142 +++
 .../org/apache/hadoop/ozone/csi/package-info.java  |   22 +
 hadoop-ozone/csi/src/main/proto/csi.proto          | 1323 ++++++++++++++++++++
 hadoop-ozone/dist/pom.xml                          |   34 +
 hadoop-ozone/dist/src/main/Dockerfile              |    4 +
 hadoop-ozone/integration-test/pom.xml              |    4 +
 .../hadoop/ozone/TestOzoneConfigurationFields.java |    2 +-
 hadoop-ozone/pom.xml                               |   11 +
 16 files changed, 2141 insertions(+), 2 deletions(-)

commit 8353057f012a834968ae6f4d5e5b8947ca3debb0
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 30 16:44:38 2019 -0700

    HDDS-1608. Support Ozone Prefix ACLs in OM metadata table. Contributed by Xiaoyu Yao. (#875)

 .../apache/hadoop/ozone/om/OMMetadataManager.java  |   7 +
 .../hadoop/ozone/om/codec/OmPrefixInfoCodec.java   |  53 +++++++
 .../hadoop/ozone/om/helpers/OmPrefixInfo.java      | 170 +++++++++++++++++++++
 .../src/main/proto/OzoneManagerProtocol.proto      |   7 +
 .../ozone/om/codec/TestOmPrefixInfoCodec.java      |  98 ++++++++++++
 .../transport/server/ratis/TestCSMMetrics.java     |  14 +-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  19 ++-
 7 files changed, 360 insertions(+), 8 deletions(-)

commit caf504f53c60eff638d4dc6baf8cf14b7c6491d0
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu May 30 15:28:15 2019 -0700

    HDDS-1551. Implement Bucket Write Requests to use Cache and DoubleBuffer. (#850)

 .../hadoop/utils/db/cache/PartialTableCache.java   |  17 +-
 .../ozone/om/protocol/OzoneManagerHAProtocol.java  |  52 ----
 .../src/main/proto/OzoneManagerProtocol.proto      |   6 +-
 .../org/apache/hadoop/ozone/om/TestOmMetrics.java  |   6 +-
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java |   4 +-
 .../org/apache/hadoop/ozone/om/BucketManager.java  |  27 +--
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  65 +----
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  69 +-----
 .../hadoop/ozone/om/S3BucketManagerImpl.java       |  14 +-
 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java   |  17 +-
 .../ozone/om/ratis/OzoneManagerRatisServer.java    | 122 +++++++++-
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |  19 +-
 .../om/ratis/utils/OzoneManagerRatisUtils.java     |  74 ++++++
 .../hadoop/ozone/om/ratis/utils/package-info.java  |  21 ++
 .../hadoop/ozone/om/request/OMClientRequest.java   |  73 ++++++
 .../om/request/bucket/OMBucketCreateRequest.java   | 204 ++++++++++++++++
 .../om/request/bucket/OMBucketDeleteRequest.java   | 117 +++++++++
 .../request/bucket/OMBucketSetPropertyRequest.java | 189 +++++++++++++++
 .../ozone/om/request/bucket/package-info.java      |  23 ++
 .../hadoop/ozone/om/request/package-info.java      |  21 ++
 .../hadoop/ozone/om/response/OMClientResponse.java |  28 ++-
 .../ozone/om/response/OMVolumeCreateResponse.java  |  16 +-
 .../ozone/om/response/OMVolumeDeleteResponse.java  |  16 +-
 .../{ => bucket}/OMBucketCreateResponse.java       |  12 +-
 .../{ => bucket}/OMBucketDeleteResponse.java       |  11 +-
 .../bucket/OMBucketSetPropertyResponse.java        |  51 ++++
 .../ozone/om/response/bucket/package-info.java     |  23 ++
 .../protocolPB/OzoneManagerHARequestHandler.java   |   4 +-
 .../OzoneManagerHARequestHandlerImpl.java          | 170 +++----------
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  64 ++++-
 .../protocolPB/OzoneManagerRequestHandler.java     |  14 +-
 ...tOzoneManagerDoubleBufferWithDummyResponse.java |  18 +-
 ...TestOzoneManagerDoubleBufferWithOMResponse.java |  36 ++-
 .../om/ratis/TestOzoneManagerRatisServer.java      |  25 +-
 .../om/ratis/TestOzoneManagerStateMachine.java     |  13 +-
 .../ozone/om/request/TestOMRequestUtils.java       |  73 ++++++
 .../request/bucket/TestOMBucketCreateRequest.java  | 270 +++++++++++++++++++++
 .../request/bucket/TestOMBucketDeleteRequest.java  | 152 ++++++++++++
 .../bucket/TestOMBucketSetPropertyRequest.java     | 162 +++++++++++++
 .../ozone/om/request/bucket/package-info.java      |  23 ++
 .../ozone/om/response/TestOMResponseUtils.java     |  40 +++
 .../bucket/TestOMBucketCreateResponse.java         |  87 +++++++
 .../bucket/TestOMBucketDeleteResponse.java         |  97 ++++++++
 .../bucket/TestOMBucketSetPropertyResponse.java    |  88 +++++++
 .../ozone/om/response/bucket/package-info.java     |  23 ++
 .../org.mockito.plugins.MockMaker                  |  16 ++
 46 files changed, 2247 insertions(+), 425 deletions(-)

commit be3b3be985826365b74dd9447be88c92ccdc8592
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Thu May 30 18:20:16 2019 +0200

    HDDS-1597. Remove hdds-server-scm dependency from ozone-common. (#860)

 .../hadoop/hdds/scm/exceptions/SCMException.java    |  0
 .../hadoop/hdds/scm/exceptions/package-info.java    |  0
 .../org/apache/hadoop/hdds/server/ServerUtils.java  | 21 +++++++++++++++++++++
 .../java/org/apache/hadoop/hdds/scm/ScmUtils.java   | 21 ++-------------------
 hadoop-ozone/common/pom.xml                         |  4 ----
 .../main/java/org/apache/hadoop/ozone/OmUtils.java  |  4 ++--
 hadoop-ozone/integration-test/pom.xml               |  9 +++++++++
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java  |  0
 hadoop-ozone/pom.xml                                |  5 +++++
 hadoop-ozone/tools/pom.xml                          |  5 +++++
 10 files changed, 44 insertions(+), 25 deletions(-)

commit 06c3b8b98b447b9350308c5c4782629af046e8f8
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Thu May 30 08:48:14 2019 -0700

    HDDS-1568 : Add RocksDB metrics to OM. Contributed by Aravindan Vijayan

 .../java/org/apache/hadoop/utils/RocksDBStore.java |   3 +-
 .../org/apache/hadoop/utils/RocksDBStoreMBean.java |  79 +++++++++-
 .../org/apache/hadoop/utils/db/DBStoreBuilder.java |  17 ++-
 .../java/org/apache/hadoop/utils/db/RDBStore.java  |   3 +-
 .../apache/hadoop/utils/TestRocksDBStoreMBean.java | 164 +++++++++++++++++++--
 .../hadoop/hdds/server/PrometheusMetricsSink.java  |   9 ++
 .../hdds/server/TestPrometheusMetricsSink.java     |   5 +
 7 files changed, 262 insertions(+), 18 deletions(-)

commit 7797c7ea8d19630110ebf3efce88ff797ca8ace5
Author: dineshchitlangia <dineshchitlangia@gmail.com>
Date:   Thu May 30 11:39:19 2019 -0400

    HDDS-1581. Atleast one of the metadata dir config property must be tagged as REQUIRED.

 .../common/src/main/resources/ozone-default.xml      | 20 +++++++++++++-------
 1 file changed, 13 insertions(+), 7 deletions(-)

commit 119d17a5d29e56b4d72982a996f2bd1d36528f1f
Author: Márton Elek <elek@apache.org>
Date:   Thu May 30 16:46:06 2019 +0200

    HDDS-1497. Refactor blockade Tests. Contributed by Nilotpal Nandi.

 .../src/main/blockade/blockadeUtils/blockade.py    |  30 +--
 .../src/main/blockade/clusterUtils/__init__.py     |   2 +-
 .../main/blockade/clusterUtils/cluster_utils.py    |  11 +-
 .../dist/src/main/blockade/ozone/__init__.py       |  14 +
 .../dist/src/main/blockade/ozone/cluster.py        | 295 +++++++++++++++++++++
 .../blockade/test_blockade_datanode_isolation.py   | 219 ++++++++-------
 .../dist/src/main/blockade/test_blockade_flaky.py  |  48 ++--
 hadoop-ozone/dist/src/main/blockade/util.py        |  52 ++++
 .../src/main/compose/ozoneblockade/docker-config   |   6 +
 9 files changed, 521 insertions(+), 156 deletions(-)

commit df93c68f53d04b85799ae3909cca4ee59cc760dc
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu May 30 18:44:22 2019 +0530

    HDDS-1502. Fix the compilation issue with commit 18c1eebc08f93055ffdef1812247b439c8404163.

 .../common/transport/server/ratis/TestCSMMetrics.java         | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit e376adfa9e4dc0eb9edcd4daabc34e646e08056d
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu May 30 16:17:45 2019 +0530

    HDDS-1502. Add metrics for Ozone Ratis performance.Contributed by Shashikant Banerjee(#833).

 .../common/transport/server/ratis/CSMMetrics.java  | 58 +++++++++++++++++++---
 .../server/ratis/ContainerStateMachine.java        | 16 +++++-
 .../transport/server/ratis/TestCSMMetrics.java     | 28 ++++++-----
 3 files changed, 82 insertions(+), 20 deletions(-)

commit 7348226be0b301ba8bec07b311b9644e72322f41
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Wed May 29 23:18:06 2019 -0700

    HDDS-1539. Implement addAcl,removeAcl,setAcl,getAcl for Volume. Contributed Ajay Kumar. (#847)

 .../apache/hadoop/ozone/client/ObjectStore.java    |  51 ++++++
 .../ozone/client/protocol/ClientProtocol.java      |  41 +++++
 .../hadoop/ozone/client/rest/RestClient.java       |  55 +++++++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  51 ++++++
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |   4 +
 .../java/org/apache/hadoop/ozone/OzoneAcl.java     |  93 +++++++----
 .../hadoop/ozone/om/exceptions/OMException.java    |   2 +-
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      |   4 +-
 .../hadoop/ozone/om/helpers/OmOzoneAclMap.java     | 129 ++++++++++-----
 .../hadoop/ozone/om/helpers/OmVolumeArgs.java      |  17 +-
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  41 +++++
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 116 +++++++++++++-
 .../apache/hadoop/ozone/protocolPB/OMPBHelper.java |  20 ++-
 .../ozone/security/acl/IAccessAuthorizer.java      |  15 +-
 .../apache/hadoop/ozone/security/acl/OzoneObj.java |  11 ++
 .../hadoop/ozone/security/acl/OzoneObjInfo.java    |  31 ++++
 .../src/main/proto/OzoneManagerProtocol.proto      |  65 +++++++-
 .../org/apache/hadoop/ozone/TestOzoneAcls.java     |  63 ++++++--
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  42 +++++
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |   6 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  85 ++++++++++
 .../org/apache/hadoop/ozone/om/VolumeManager.java  |  41 +++++
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  | 177 +++++++++++++++++++++
 .../protocolPB/OzoneManagerRequestHandler.java     |  93 ++++++++---
 .../om/ratis/TestOzoneManagerRatisServer.java      |   3 +-
 25 files changed, 1112 insertions(+), 144 deletions(-)

commit 3dbb1a1943cb5d8b604440c204475343ca86f57a
Author: Xudong Cao <iamcaoxudong@gmail.com>
Date:   Thu May 30 06:57:48 2019 +0800

    HDDS-1530. Freon support big files larger than 2GB and add --bufferSize and --validateWrites options. Contributed by Xudong Cao. (#830)

 .../hadoop/ozone/freon/RandomKeyGenerator.java     | 140 +++++++++++++--------
 .../hadoop/ozone/freon/TestRandomKeyGenerator.java |  20 ++-
 2 files changed, 106 insertions(+), 54 deletions(-)

commit a298afbc2ca76af2f56063c82988166c9029fe7a
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed May 29 13:39:27 2019 -0700

    HDDS-1542. Create Radix tree to support ozone prefix ACLs. Contributed by Xiaoyu Yao.

 .../org/apache/hadoop/ozone/util/RadixNode.java    |  59 ++++++
 .../org/apache/hadoop/ozone/util/RadixTree.java    | 214 +++++++++++++++++++++
 .../apache/hadoop/ozone/util/TestRadixTree.java    | 129 +++++++++++++
 .../org/apache/hadoop/ozone/util/package-info.java |  21 ++
 4 files changed, 423 insertions(+)

commit f92cfad02348e1327b601e52c3ea6d74b8a3f9f5
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed May 29 11:55:44 2019 -0700

    HDDS-1231. Add ChillMode metrics. Contributed by Bharat Viswanadham.

 .../hdds/scm/safemode/ContainerSafeModeRule.java   |   4 +
 .../scm/safemode/HealthyPipelineSafeModeRule.java  |   5 +-
 .../safemode/OneReplicaPipelineSafeModeRule.java   |   5 +
 .../hdds/scm/safemode/SCMSafeModeManager.java      |  15 +++
 .../hadoop/hdds/scm/safemode/SafeModeExitRule.java |   4 +
 .../hadoop/hdds/scm/safemode/SafeModeMetrics.java  | 111 +++++++++++++++++++++
 .../hdds/scm/server/StorageContainerManager.java   |   2 +
 .../hdds/scm/safemode/TestSCMSafeModeManager.java  |  60 ++++++++++-
 8 files changed, 200 insertions(+), 6 deletions(-)

commit b9478447bdefb9a692b9ce447959007ffc38abbd
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Tue May 28 16:29:44 2019 +0900

    HADOOP-16331. Fix ASF License check in pom.xml
    
    Signed-off-by: Takanobu Asanuma <tasanuma@apache.org>

 hadoop-hdds/client/pom.xml               | 2 +-
 hadoop-hdds/common/pom.xml               | 2 +-
 hadoop-hdds/config/pom.xml               | 2 +-
 hadoop-hdds/container-service/pom.xml    | 2 +-
 hadoop-hdds/docs/pom.xml                 | 2 +-
 hadoop-hdds/framework/pom.xml            | 2 +-
 hadoop-hdds/pom.xml                      | 2 +-
 hadoop-hdds/server-scm/pom.xml           | 2 +-
 hadoop-hdds/tools/pom.xml                | 2 +-
 hadoop-ozone/client/pom.xml              | 2 +-
 hadoop-ozone/common/pom.xml              | 2 +-
 hadoop-ozone/datanode/pom.xml            | 2 +-
 hadoop-ozone/dist/pom.xml                | 2 +-
 hadoop-ozone/integration-test/pom.xml    | 2 +-
 hadoop-ozone/objectstore-service/pom.xml | 2 +-
 hadoop-ozone/ozone-manager/pom.xml       | 2 +-
 hadoop-ozone/ozone-recon-codegen/pom.xml | 2 +-
 hadoop-ozone/ozone-recon/pom.xml         | 2 +-
 hadoop-ozone/ozonefs-lib-current/pom.xml | 2 +-
 hadoop-ozone/ozonefs-lib-legacy/pom.xml  | 2 +-
 hadoop-ozone/ozonefs/pom.xml             | 2 +-
 hadoop-ozone/pom.xml                     | 2 +-
 hadoop-ozone/s3gateway/pom.xml           | 2 +-
 hadoop-ozone/tools/pom.xml               | 2 +-
 hadoop-ozone/upgrade/pom.xml             | 2 +-
 25 files changed, 25 insertions(+), 25 deletions(-)

commit 2b059be59909b7cd1c881241c37e3f9d58c0a037
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Wed May 29 09:18:14 2019 +0530

    HDDS-1559. Include committedBytes to determine Out of Space in VolumeChoosingPolicy. Contributed by Supratim Deka (#841)

 .../volume/RoundRobinVolumeChoosingPolicy.java     |  4 ++-
 .../container/ozoneimpl/TestOzoneContainer.java    | 35 ++++++++++++++++++++++
 2 files changed, 38 insertions(+), 1 deletion(-)

commit b539266619d972dd0b0d812a64ae6ba7a5f3b339
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue May 28 18:39:23 2019 -0700

    HDDS-1604. ContainerReader#initializeUsedBytes leaks DB reference. Co… (#866)

 .../commandhandler/DeleteBlocksCommandHandler.java |   2 +-
 .../container/common/utils/ContainerCache.java     |  70 --------------
 .../container/common/utils/ReferenceCountedDB.java | 101 +++++++++++++++++++++
 .../container/keyvalue/KeyValueBlockIterator.java  |   2 +-
 .../container/keyvalue/KeyValueContainer.java      |   2 +-
 .../container/keyvalue/KeyValueContainerCheck.java |   2 +-
 .../container/keyvalue/helpers/BlockUtils.java     |   2 +-
 .../keyvalue/helpers/KeyValueContainerUtil.java    |   2 +-
 .../container/keyvalue/impl/BlockManagerImpl.java  |   2 +-
 .../background/BlockDeletingService.java           |   2 +-
 .../ozone/container/ozoneimpl/ContainerReader.java |  29 +++---
 .../keyvalue/TestKeyValueBlockIterator.java        |   2 +-
 .../container/keyvalue/TestKeyValueContainer.java  |   2 +-
 .../keyvalue/TestKeyValueContainerCheck.java       |   2 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   4 +-
 .../ozone/TestStorageContainerManagerHelper.java   |   2 +-
 .../container/common/TestBlockDeletingService.java |   2 +-
 .../common/impl/TestContainerPersistence.java      |   2 +-
 .../commandhandler/TestBlockDeletion.java          |   2 +-
 .../TestCloseContainerByPipeline.java              |   2 +-
 20 files changed, 134 insertions(+), 102 deletions(-)

commit 84a52564f62d771db0ee231b7045a78df8f59db9
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Tue May 28 23:40:45 2019 +0200

    HDDS-1341. TestContainerReplication#testContainerReplication fails intermittently. Contributed by Elek, Marton. (#862)

 .../container/common/statemachine/DatanodeStateMachine.java  |  5 +++++
 .../hadoop/ozone/container/common/volume/HddsVolume.java     |  3 ++-
 .../ozone/container/replication/ReplicationSupervisor.java   |  8 ++++++++
 .../hadoop/ozone/container/TestContainerReplication.java     | 12 ++++++++++--
 4 files changed, 25 insertions(+), 3 deletions(-)

commit e1a89782122cc696c97a3fb958144c079f405e12
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue May 28 14:02:36 2019 -0700

    HDDS-1536. testSCMSafeModeRestrictedOp is failing consistently. Contributed by Xiaoyu Yao. (#865)

 .../src/test/java/org/apache/hadoop/ozone/om/TestScmSafeMode.java       | 2 ++
 1 file changed, 2 insertions(+)

commit 87aa3c963e27f398bbf48a97935d02c4cdac0a3f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue May 28 11:27:16 2019 -0700

    HDDS-1602. Fix TestContainerPersistence#testDeleteBlockTwice. (#858)

 .../hadoop/ozone/container/keyvalue/impl/BlockManagerImpl.java     | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 19ffa313a483d639d51390224c755693a45e59c0
Author: Shweta Yakkali <shwetayakkali@cloudera.com>
Date:   Tue May 28 11:14:24 2019 -0700

    HDDS-1580. Obtain Handler reference in ContainerScrubber (#842)

 .../ozone/container/ozoneimpl/ContainerController.java  |  7 ++++++-
 .../ozone/container/ozoneimpl/ContainerScrubber.java    | 17 ++++++++---------
 .../ozone/container/ozoneimpl/OzoneContainer.java       |  2 +-
 3 files changed, 15 insertions(+), 11 deletions(-)

commit 1401897f3815d1620c3219965bfcd669b642b425
Author: Márton Elek <elek@apache.org>
Date:   Tue May 21 17:57:24 2019 +0200

    HDDS-1565. Rename k8s-dev and k8s-dev-push profiles to docker and docker-push.
    
    Closes: #840

 hadoop-ozone/dist/pom.xml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit fd3fb8fc32a09c57eef60cb2c53ee7a7068d0387
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue May 28 14:18:25 2019 +0200

    HDDS-1533. JVM exit on TestHddsDatanodeService
    
    Closes #859

 .../src/test/java/org/apache/hadoop/ozone/TestHddsDatanodeService.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 11be2985f350ccc7d01850646e289f6abe102281
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue May 28 07:52:56 2019 +0530

    HDDS-1534. freon should return non-zero exit code on failure. Contributed by Nilotpal Nandi.

 .../apache/hadoop/ozone/freon/RandomKeyGenerator.java   | 17 ++++++++++-------
 1 file changed, 10 insertions(+), 7 deletions(-)

commit d48c919479b88e5d46480edbf7e35054b95e7b82
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon May 27 17:52:09 2019 -0700

    HDDS-1559. Fix TestReplicationManager. Contributed by Bharat Viswanadham. (#856)

 .../apache/hadoop/hdds/scm/container/TestReplicationManager.java  | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit f0cc8ab2dcb024a5aa55df7584756e45fbe52947
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Mon May 27 23:40:51 2019 +0200

    HDDS-1598. Fix Ozone checkstyle issues on trunk. Contributed by Elek, Marton. (#854)

 .../placement/algorithms/SCMContainerPlacementRackAware.java          | 4 ++--
 .../placement/algorithms/TestSCMContainerPlacementRackAware.java      | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit da132439407b2eb9f71ad1b9b1dffc6932327dde
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Mon May 27 16:31:44 2019 +0530

    HDDS-1509. TestBlockOutputStreamWithFailures#test2DatanodesFailure fails intermittently. Contributed by Shashikant Banerjee (#805).

 .../hadoop/ozone/client/io/KeyOutputStream.java    | 25 +++++++++----
 .../rpc/TestBlockOutputStreamWithFailures.java     | 42 +++++++++++++++-------
 2 files changed, 48 insertions(+), 19 deletions(-)

commit 6a7ac0453b8f95ffd0a2a1523d858a76a03c22c9
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Mon May 27 16:26:21 2019 +0530

    HDDS-1584. Fix TestFailureHandlingByClient tests. Contributed by Shashikant Banerjee (#845).

 .../client/rpc/TestFailureHandlingByClient.java    | 67 ++++++++++++----------
 1 file changed, 37 insertions(+), 30 deletions(-)

commit 73b04dd06370c9d00ce007bb281b8a833ba41f11
Author: Eric Yang <eyang@apache.org>
Date:   Mon May 27 10:17:47 2019 +0200

    HDDS-1588. Update Ozone dist image to use jdk11. Contributed by Eric Yang.

 hadoop-ozone/dist/src/main/Dockerfile | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c8a24baa86351c6bd88ed8186d2a720e6bfa7ee5
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Mon May 27 15:24:59 2019 +0900

    HADOOP-16323. https everywhere in Maven settings.

 hadoop-hdds/client/pom.xml               | 6 +++---
 hadoop-hdds/common/pom.xml               | 4 ++--
 hadoop-hdds/config/pom.xml               | 4 ++--
 hadoop-hdds/container-service/pom.xml    | 4 ++--
 hadoop-hdds/docs/pom.xml                 | 4 ++--
 hadoop-hdds/framework/pom.xml            | 4 ++--
 hadoop-hdds/pom.xml                      | 4 ++--
 hadoop-hdds/server-scm/pom.xml           | 4 ++--
 hadoop-hdds/tools/pom.xml                | 4 ++--
 hadoop-ozone/client/pom.xml              | 6 +++---
 hadoop-ozone/common/pom.xml              | 4 ++--
 hadoop-ozone/datanode/pom.xml            | 4 ++--
 hadoop-ozone/dist/pom.xml                | 4 ++--
 hadoop-ozone/integration-test/pom.xml    | 4 ++--
 hadoop-ozone/objectstore-service/pom.xml | 4 ++--
 hadoop-ozone/ozone-manager/pom.xml       | 4 ++--
 hadoop-ozone/ozone-recon-codegen/pom.xml | 6 +++---
 hadoop-ozone/ozone-recon/pom.xml         | 6 +++---
 hadoop-ozone/ozonefs-lib-current/pom.xml | 4 ++--
 hadoop-ozone/ozonefs-lib-legacy/pom.xml  | 4 ++--
 hadoop-ozone/ozonefs/pom.xml             | 4 ++--
 hadoop-ozone/pom.xml                     | 4 ++--
 hadoop-ozone/s3gateway/pom.xml           | 4 ++--
 hadoop-ozone/tools/pom.xml               | 4 ++--
 hadoop-ozone/upgrade/pom.xml             | 4 ++--
 25 files changed, 54 insertions(+), 54 deletions(-)

commit a060702126b59ada1e81bfc1566dbcf537ab748c
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri May 24 10:50:54 2019 -0700

    HDDS-1512. Implement DoubleBuffer in OzoneManager. (#810)

 .../ozone/om/ratis/OzoneManagerDoubleBuffer.java   | 212 +++++++++++
 .../ozone/om/ratis/helpers/DoubleBufferEntry.java  |  44 +++
 .../ozone/om/ratis/helpers/package-info.java       |  20 +
 .../ozone/om/response/OMBucketCreateResponse.java  |  52 +++
 .../ozone/om/response/OMBucketDeleteResponse.java  |  57 +++
 .../hadoop/ozone/om/response/OMClientResponse.java |  45 +++
 .../ozone/om/response/OMVolumeCreateResponse.java  |  64 ++++
 .../ozone/om/response/OMVolumeDeleteResponse.java  |  59 +++
 .../hadoop/ozone/om/response/package-info.java     |  24 ++
 ...tOzoneManagerDoubleBufferWithDummyResponse.java | 130 +++++++
 ...TestOzoneManagerDoubleBufferWithOMResponse.java | 409 +++++++++++++++++++++
 11 files changed, 1116 insertions(+)

commit c8094a4d4c9505dc45ee2adf45ddd0ff3052df4c
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Thu May 23 15:34:55 2019 -0700

     HDDS-1501 : Create a Recon task interface to update internal DB on updates from OM. (#819)

 .../java/org/apache/hadoop/utils/db/DBStore.java   |  14 ++
 .../org/apache/hadoop/utils/db/DBStoreBuilder.java |   8 +-
 .../java/org/apache/hadoop/utils/db/RDBStore.java  |  40 +++-
 .../common/src/main/resources/ozone-default.xml    |   8 +
 .../org/apache/hadoop/utils/db/TestRDBStore.java   |  43 ----
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  20 +-
 .../recon/codegen/ReconSchemaGenerationModule.java |   3 +-
 .../schema/ReconInternalSchemaDefinition.java      |  65 ++++++
 .../hadoop/ozone/recon/ReconControllerModule.java  |   5 +
 .../org/apache/hadoop/ozone/recon/ReconServer.java |  25 ++-
 .../hadoop/ozone/recon/ReconServerConfigKeys.java  |   4 +
 .../recon/recovery/ReconOmMetadataManagerImpl.java |   1 -
 .../recon/spi/ContainerDBServiceProvider.java      |  16 ++
 .../spi/impl/ContainerDBServiceProviderImpl.java   |  11 ++
 .../ozone/recon/tasks/ContainerKeyMapperTask.java  | 154 +++++++++++----
 .../hadoop/ozone/recon/tasks/OMDBUpdateEvent.java  | 150 ++++++++++++++
 .../ozone/recon/tasks/OMDBUpdatesHandler.java      | 220 +++++++++++++++++++++
 .../ozone/recon/tasks/OMUpdateEventBatch.java      |  69 +++++++
 .../ozone/recon/tasks/ReconDBUpdateTask.java       |  66 +++++++
 .../ozone/recon/tasks/ReconTaskController.java     |  46 +++++
 .../ozone/recon/tasks/ReconTaskControllerImpl.java | 198 +++++++++++++++++++
 .../ozone/recon/api/TestContainerKeyService.java   |   7 +-
 .../recon/persistence/AbstractSqlDatabaseTest.java |   5 +-
 .../TestReconInternalSchemaDefinition.java         | 143 ++++++++++++++
 .../recovery/TestReconOmMetadataManagerImpl.java   |  17 --
 .../impl/TestContainerDBServiceProviderImpl.java   |  25 +++
 .../hadoop/ozone/recon/tasks/DummyReconDBTask.java |  77 ++++++++
 .../recon/tasks/TestContainerKeyMapperTask.java    | 155 ++++++++++++---
 .../ozone/recon/tasks/TestOMDBUpdatesHandler.java  | 207 +++++++++++++++++++
 .../recon/tasks/TestReconTaskControllerImpl.java   | 171 ++++++++++++++++
 30 files changed, 1814 insertions(+), 159 deletions(-)

commit 6051d2ce92f10b94c33763d93e59ab6f152562fb
Merge: 53dfbde6 0cbe7f0c
Author: Arpit Agarwal <arp7@users.noreply.github.com>
Date:   Thu May 23 10:42:08 2019 -0700

    HDDS-1535. Space tracking for Open Containers : Handle Node Startup. Contributed by Supratim Deka (#832)
    
    * HDDS-1535. Space tracking for Open Containers : Handle Node Startup. Contributed by Supratim Deka
    
    * Fixed checkstyle issues.
    
    * verifyContainerData also does fixup, renamed. Added a Javadoc comment, both as per review discussion
    
    * fixed merge error. adapted to new signature of BlockUtils getDB
    
    * fixed checkstyle issue post merge

commit 53dfbde6ebc0a4f170347b233d918536d64f4ceb
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 23 10:09:07 2019 -0700

    HDDS-700. Support rack awared node placement policy based on network topology. Contributed by Sammi Chen.

 .../hadoop/hdds/protocol/DatanodeDetails.java      |  37 ++-
 .../hdds/scm/container/ReplicationManager.java     |   2 +-
 .../algorithms/ContainerPlacementPolicy.java       |   3 +-
 .../placement/algorithms/SCMCommonPolicy.java      |  10 +-
 .../algorithms/SCMContainerPlacementCapacity.java  |   9 +-
 .../algorithms/SCMContainerPlacementRackAware.java | 329 +++++++++++++++++++++
 .../algorithms/SCMContainerPlacementRandom.java    |   8 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  27 +-
 .../hdds/scm/container/TestReplicationManager.java |   2 +-
 .../TestSCMContainerPlacementCapacity.java         |   4 +-
 .../TestSCMContainerPlacementRackAware.java        | 257 ++++++++++++++++
 .../TestSCMContainerPlacementRandom.java           |   4 +-
 .../placement/TestContainerPlacement.java          |   4 +-
 13 files changed, 662 insertions(+), 34 deletions(-)

commit 0cbe7f0cdcaf0002a5f7ce654dd1f6d133508389
Author: sdeka <sdeka@hortonworks.com>
Date:   Thu May 23 20:49:52 2019 +0530

    fixed checkstyle issue post merge

 .../org/apache/hadoop/ozone/container/ozoneimpl/ContainerReader.java    | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e211f7361e7e2422c88f78423b4c2488075ee6e4
Author: sdeka <sdeka@hortonworks.com>
Date:   Thu May 23 11:36:40 2019 +0530

    fixed merge error. adapted to new signature of BlockUtils getDB

 .../apache/hadoop/ozone/container/ozoneimpl/TestOzoneContainer.java | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 0fba65069148c2570a727f0d2086c95e9644ce0e
Merge: e0b66a29 fa5d86bc
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Thu May 23 09:51:33 2019 +0530

    Merge branch 'trunk' into HDDS-1535

commit fa5d86bc7d0764cdfbbff05409d8675bc49c460e
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Wed May 22 11:47:32 2019 -0700

    HDDS-1065. OM and DN should persist SCM certificate as the trust root. Contributed by Ajay Kumar. (#834)

 .../java/org/apache/hadoop/hdds/HddsUtils.java     |  2 +-
 .../SCMSecurityProtocolClientSideTranslatorPB.java | 53 ++++++++++++++++------
 .../SCMSecurityProtocolServerSideTranslatorPB.java |  7 ++-
 .../x509/certificate/client/CertificateClient.java | 13 ++++++
 .../client/DefaultCertificateClient.java           | 25 +++++++++-
 .../src/main/proto/SCMSecurityProtocol.proto       |  1 +
 .../apache/hadoop/ozone/HddsDatanodeService.java   | 28 ++++++++----
 .../hadoop/ozone/TestSecureOzoneCluster.java       |  8 ++++
 .../ozone/client/CertificateClientTestImpl.java    |  4 ++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 31 +++++++++----
 10 files changed, 135 insertions(+), 37 deletions(-)

commit 463ff5eda563a6a997d79654db17d012423dc7fa
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed May 22 17:24:27 2019 +0530

    HDDS-1517. AllocateBlock call fails with ContainerNotFoundException (#826). Contributed by Shashikant Banerjee.

 .../hdds/scm/container/ContainerStateManager.java  | 10 +++--
 .../hdds/scm/container/SCMContainerManager.java    | 15 ++++---
 .../hadoop/hdds/scm/block/TestBlockManager.java    | 43 ++++++++++++++++++++
 .../scm/container/TestSCMContainerManager.java     | 47 +++++++++++++++++++++-
 4 files changed, 102 insertions(+), 13 deletions(-)

commit 32771ea85ae08bd3e9e9adde4a0d6e50ac485afa
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 22 17:18:40 2019 +0530

    HDDS-1449. JVM Exit in datanode while committing a key. Contributed by Mukul Kumar Singh. (#825)

 .../commandhandler/DeleteBlocksCommandHandler.java |  90 ++++-----
 .../container/common/utils/ContainerCache.java     |  87 +++++++--
 .../container/keyvalue/KeyValueBlockIterator.java  |  15 +-
 .../container/keyvalue/KeyValueContainer.java      |  13 +-
 .../container/keyvalue/KeyValueContainerCheck.java |  61 +++---
 .../container/keyvalue/helpers/BlockUtils.java     |   4 +-
 .../keyvalue/helpers/KeyValueContainerUtil.java    |  36 ++--
 .../container/keyvalue/impl/BlockManagerImpl.java  | 205 ++++++++++----------
 .../background/BlockDeletingService.java           | 116 +++++------
 .../ozone/container/ozoneimpl/ContainerReader.java |  47 ++---
 .../keyvalue/TestKeyValueBlockIterator.java        | 212 +++++++++++----------
 .../container/keyvalue/TestKeyValueContainer.java  |  44 +++--
 .../keyvalue/TestKeyValueContainerCheck.java       |  88 ++++-----
 .../ozone/TestStorageContainerManagerHelper.java   |  14 +-
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  70 +++----
 .../container/common/TestBlockDeletingService.java | 165 ++++++++--------
 .../common/impl/TestContainerPersistence.java      |   4 +-
 .../commandhandler/TestBlockDeletion.java          |  28 +--
 .../TestCloseContainerByPipeline.java              |  10 +-
 19 files changed, 711 insertions(+), 598 deletions(-)

commit e0b66a298d428647977cf49a6720d37d157a5aac
Author: sdeka <sdeka@hortonworks.com>
Date:   Wed May 22 09:34:21 2019 +0530

    verifyContainerData also does fixup, renamed. Added a Javadoc comment, both as per review discussion

 .../hadoop/ozone/container/ozoneimpl/ContainerReader.java     | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit 74bdfd467ebeb4d42e7335b04e3a5837e034473f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue May 21 18:41:30 2019 -0700

    HDDS-1406. Avoid usage of commonPool in RatisPipelineUtils. (#714)

 .../hadoop/hdds/scm/pipeline/PipelineFactory.java  |   4 +
 .../hadoop/hdds/scm/pipeline/PipelineProvider.java |   1 +
 .../hdds/scm/pipeline/RatisPipelineProvider.java   | 117 ++++++++++++++++++++-
 .../hdds/scm/pipeline/RatisPipelineUtils.java      |  73 +------------
 .../hdds/scm/pipeline/SCMPipelineManager.java      |   5 +-
 .../hdds/scm/pipeline/SimplePipelineProvider.java  |   5 +
 .../scm/pipeline/MockRatisPipelineProvider.java    |   5 +
 ...java => TestRatisPipelineCreateAndDestory.java} |  11 +-
 8 files changed, 144 insertions(+), 77 deletions(-)

commit 4c0a6262e97bdfa89d94dd7983bc0b39e75cb6e2
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Tue May 21 15:53:40 2019 -0700

    HDDS-1538. Update ozone protobuf message for ACLs. Contributed by Ajay Kumar. (#828)

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   3 +-
 .../common/src/main/resources/ozone-default.xml    |  18 +---
 .../hadoop/ozone/client/rest/RestClient.java       |   6 +-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  25 +++--
 .../java/org/apache/hadoop/ozone/OzoneAcl.java     | 112 ++++++++-------------
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |  12 ---
 .../hadoop/ozone/om/helpers/OmOzoneAclMap.java     |  60 +++++++----
 .../apache/hadoop/ozone/protocolPB/OMPBHelper.java |  65 ++++++------
 .../ozone/security/acl/IAccessAuthorizer.java      |  20 +++-
 .../hadoop/ozone/security/acl/OzoneAclConfig.java  |  65 ++++++++++++
 .../src/main/proto/OzoneManagerProtocol.proto      |  17 +++-
 .../org/apache/hadoop/ozone/TestOzoneAcls.java     |  79 ++++++++++-----
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  20 ++--
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |  21 ++--
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |  13 +--
 .../web/storage/DistributedStorageHandler.java     |  21 ++--
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  |   4 +-
 .../hadoop/ozone/om/TestBucketManagerImpl.java     |  18 ++--
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |   2 +-
 19 files changed, 338 insertions(+), 243 deletions(-)

commit 39a70b42cd2d5f700b1b4a4828f835e52cb1b7bd
Author: Ajay Kumar <ajay@apache.org>
Date:   Tue May 21 17:09:21 2019 +0200

    HDDS-1442. add spark container to ozonesecure-mr compose files
    
    Closes #746

 .../dist/src/main/compose/ozonesecure-mr/docker-compose.yaml   | 10 ++++++++++
 .../dist/src/main/compose/ozonesecure-mr/docker-config         |  2 +-
 2 files changed, 11 insertions(+), 1 deletion(-)

commit bbc541b2557b0cf5f8dfc6a48a5a7309a7adf02d
Author: Lokesh Jain <ljain@apache.org>
Date:   Tue May 21 14:47:48 2019 +0530

    HDDS-1461. Optimize listStatus api in OzoneFileSystem (#782)

 .../java/org/apache/hadoop/utils/db/RDBStore.java  |   4 +
 .../apache/hadoop/ozone/client/OzoneBucket.java    |  17 ++
 .../ozone/client/protocol/ClientProtocol.java      |  19 +-
 .../hadoop/ozone/client/rest/RestClient.java       |   8 +
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  13 ++
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |   1 +
 .../org/apache/hadoop/ozone/audit/OMAction.java    |   3 +-
 .../hadoop/ozone/om/helpers/OzoneFSUtils.java      |  89 +++++++++
 .../hadoop/ozone/om/helpers/OzoneFileStatus.java   |  11 +-
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  14 ++
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  47 ++++-
 .../src/main/proto/OzoneManagerProtocol.proto      |  20 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 179 +++++++++++++----
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |  17 ++
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |   5 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  25 +++
 .../apache/hadoop/ozone/om/fs/OzoneManagerFS.java  |   4 +
 .../protocolPB/OzoneManagerRequestHandler.java     |  26 +++
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java | 211 +++++++++++++++++++++
 .../fs/ozone/BasicOzoneClientAdapterImpl.java      |  14 ++
 .../hadoop/fs/ozone/BasicOzoneFileSystem.java      | 150 +++------------
 .../apache/hadoop/fs/ozone/OzoneClientAdapter.java |   4 +
 .../hadoop/fs/ozone/TestOzoneFileInterfaces.java   |  42 +++-
 .../hadoop/fs/ozone/TestOzoneFileSystem.java       |  29 ++-
 24 files changed, 773 insertions(+), 179 deletions(-)

commit 014ce5afc14fea981055bdee75a5ef1a957574b7
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Mon May 20 13:09:58 2019 -0700

    HDDS-1487. Bootstrap React framework for Recon UI (#831)
    
    HDDS-1487. Bootstrap React framework for Recon UI.
    Contributed by Vivek Ratnavel Subramanian.

 hadoop-ozone/ozone-recon/pom.xml                   |   90 +-
 .../src/main/resources/webapps/recon/index.html    |   59 -
 .../webapps/recon/ozone-recon-web/.gitignore       |   23 +
 .../webapps/recon/ozone-recon-web/README.md        |   45 +
 .../recon/ozone-recon-web/config-overrides.js      |   33 +
 .../webapps/recon/ozone-recon-web/package.json     |   45 +
 .../recon/ozone-recon-web/public/favicon.ico       |  Bin 0 -> 17470 bytes
 .../recon/ozone-recon-web/public/index.html        |   56 +
 .../recon/ozone-recon-web/public/manifest.json     |   15 +
 .../webapps/recon/ozone-recon-web/src/App.less     |   49 +
 .../webapps/recon/ozone-recon-web/src/App.test.tsx |   27 +
 .../webapps/recon/ozone-recon-web/src/App.tsx      |   88 +
 .../src/components/Breadcrumbs/Breadcrumbs.tsx     |   58 +
 .../src/components/NavBar/NavBar.less              |   41 +
 .../src/components/NavBar/NavBar.tsx               |   67 +
 .../src/constants/breadcrumbs.constants.tsx        |   26 +
 .../webapps/recon/ozone-recon-web/src/index.less   |   32 +
 .../webapps/recon/ozone-recon-web/src/index.tsx    |   30 +
 .../webapps/recon/ozone-recon-web/src/logo.png     |  Bin 0 -> 22480 bytes
 .../ozone-recon-web/src/makeRouteWithSubRoutes.tsx |   32 +
 .../recon/ozone-recon-web/src/react-app-env.d.ts   |   18 +
 .../webapps/recon/ozone-recon-web/src/routes.tsx   |   37 +
 .../recon/ozone-recon-web/src/routes.types.tsx     |   23 +
 .../recon/ozone-recon-web/src/serviceWorker.ts     |  161 +
 .../views/ContainerBrowser/ContainerBrowser.tsx    |   33 +
 .../src/views/Dashboard/Dashboard.tsx              |   32 +
 .../src/views/NotFound/NotFound.tsx                |   29 +
 .../webapps/recon/ozone-recon-web/tsconfig.json    |   27 +
 .../webapps/recon/ozone-recon-web/yarn.lock        | 9638 ++++++++++++++++++++
 hadoop-ozone/pom.xml                               |    3 +
 30 files changed, 10744 insertions(+), 73 deletions(-)

commit e8785493461bbb4e7976594fce2a4434a1f5fe02
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Mon May 20 13:02:56 2019 -0700

    HDDS-1451 : SCMBlockManager findPipeline and createPipeline are not lock protected. (#799)
    
    * HDDS-1451 : SCMBlockManager findPipeline and createPipeline are not lock protected.
    
    * HDDS-1451 : Address review comments.

 .../hadoop/hdds/scm/block/BlockManagerImpl.java       | 19 ++++++++++++++-----
 1 file changed, 14 insertions(+), 5 deletions(-)

commit 9340a7f11b2f27748a19373a80d83256bfe800a2
Author: sdeka <sdeka@hortonworks.com>
Date:   Mon May 20 08:13:37 2019 +0530

    Fixed checkstyle issues.

 .../apache/hadoop/ozone/container/ozoneimpl/ContainerReader.java    | 3 ++-
 .../apache/hadoop/ozone/container/ozoneimpl/TestOzoneContainer.java | 6 +++---
 2 files changed, 5 insertions(+), 4 deletions(-)

commit 663f6fc54c3c1d25f97ffda1e95ca9ed68591e87
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sun May 19 19:23:02 2019 -0700

    HDDS-1499. OzoneManager Cache. (#798)

 .../java/org/apache/hadoop/utils/db/DBStore.java   |   1 +
 .../java/org/apache/hadoop/utils/db/RDBTable.java  |  10 +-
 .../java/org/apache/hadoop/utils/db/Table.java     |  26 +++-
 .../org/apache/hadoop/utils/db/TypedTable.java     |  78 ++++++++++-
 .../org/apache/hadoop/utils/db/cache/CacheKey.java |  56 ++++++++
 .../apache/hadoop/utils/db/cache/CacheValue.java   |  47 +++++++
 .../apache/hadoop/utils/db/cache/EpochEntry.java   |  74 +++++++++++
 .../hadoop/utils/db/cache/PartialTableCache.java   |  97 ++++++++++++++
 .../apache/hadoop/utils/db/cache/TableCache.java   |  63 +++++++++
 .../apache/hadoop/utils/db/cache/package-info.java |  18 +++
 .../hadoop/utils/db/TestTypedRDBTableStore.java    |  82 +++++++++++-
 .../utils/db/cache/TestPartialTableCache.java      | 142 +++++++++++++++++++++
 .../apache/hadoop/utils/db/cache/package-info.java |  22 ++++
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |   4 +-
 14 files changed, 709 insertions(+), 11 deletions(-)

commit c592070e17aec2f9e4ce9603457f5a2a34d45986
Author: sdeka <sdeka@hortonworks.com>
Date:   Sat May 18 16:16:33 2019 +0530

    HDDS-1535. Space tracking for Open Containers : Handle Node Startup. Contributed by Supratim Deka

 .../ozone/container/ozoneimpl/ContainerReader.java | 31 ++++++++
 .../container/ozoneimpl/TestOzoneContainer.java    | 91 ++++++++++++++++++++--
 2 files changed, 117 insertions(+), 5 deletions(-)

commit 6d6b7065bb734126413e3accc2b608d739b8e4ec
Author: Arpit Agarwal <arp7@users.noreply.github.com>
Date:   Sat May 18 02:47:19 2019 -0700

    HDDS-1422. Exception during DataNode shutdown. Contributed by Arpit A… (#725)
    
    * HDDS-1422. Exception during DataNode shutdown. Contributed by Arpit Agarwal.
    
    Change-Id: I6db6bdd19839a45e5341ed7e745cd38f68af8378
    
    * Suppress spurious findbugs warning.
    
    * Remove log file that got committed in error

 .../ozone/container/common/volume/VolumeInfo.java  | 20 ++-----------
 .../ozone/container/common/volume/VolumeUsage.java | 34 +++++++++++++++-------
 .../container/common/volume/TestHddsVolume.java    | 15 ++--------
 .../container/common/volume/TestVolumeSet.java     | 15 ++--------
 4 files changed, 32 insertions(+), 52 deletions(-)

commit c0eb1e64562b05afe5219cbfbb77cc9e29712f70
Author: Siddharth <swagle@hortonworks.com>
Date:   Thu May 16 15:13:10 2019 -0700

    HDDS-1527. HDDS Datanode start fails due to datanode.id file read error. Contributed by Siddharth Wagle.
    
    This closes #822.

 .../container/common/helpers/ContainerUtils.java   | 19 ++++++--
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  | 54 +++++++++++++---------
 2 files changed, 49 insertions(+), 24 deletions(-)

commit 2d8594c407a2ad5ea15848e0e3c6478632edadae
Author: Márton Elek <elek@apache.org>
Date:   Wed Apr 17 11:53:36 2019 +0200

    HDDS-1297. Fix IllegalArgumentException thrown with MiniOzoneCluster Initialization. Contributed by Yiqun Lin.

 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java | 36 +++--------
 .../org/apache/hadoop/hdds/server/ServerUtils.java | 29 ++++++---
 .../hadoop/hdds/scm/TestHddsServerUtils.java       | 72 ++++++++++++++++++++++
 .../hadoop/hdds/scm/node/TestSCMNodeManager.java   | 32 ----------
 4 files changed, 102 insertions(+), 67 deletions(-)

commit 61f837128b7f6c840696c45dee70f22f459c6724
Author: Márton Elek <elek@apache.org>
Date:   Fri Apr 12 14:09:35 2019 +0200

    HDDS-1284. Adjust default values of pipline recovery for more resilient service restart.

 .../src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java       | 4 ++--
 hadoop-hdds/common/src/main/resources/ozone-default.xml               | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 93bbc3ecf523679a45b194a548d928300b178bf3
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Thu May 16 16:38:50 2019 +0200

    HDDS-1522. Provide intellij runConfiguration for Ozone components.  Contributed by Elek, Marton.

 .../dev-support/intellij/install-runconfigs.sh     | 21 +++++++
 hadoop-ozone/dev-support/intellij/log4j.properties | 18 ++++++
 hadoop-ozone/dev-support/intellij/ozone-site.xml   | 66 ++++++++++++++++++++++
 .../intellij/runConfigurations/Datanode.xml        | 33 +++++++++++
 .../intellij/runConfigurations/FreonStandalone.xml | 33 +++++++++++
 .../intellij/runConfigurations/OzoneManager.xml    | 33 +++++++++++
 .../runConfigurations/OzoneManagerInit.xml         | 33 +++++++++++
 .../intellij/runConfigurations/OzoneShell.xml      | 33 +++++++++++
 .../intellij/runConfigurations/Recon.xml           | 33 +++++++++++
 .../intellij/runConfigurations/S3Gateway.xml       | 33 +++++++++++
 .../runConfigurations/StorageContainerManager.xml  | 33 +++++++++++
 .../StorageContainerManagerInit.xml                | 33 +++++++++++
 12 files changed, 402 insertions(+)

commit da8e7a9f469ba121a78b68120bd284d0f05b5a51
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu May 16 18:38:52 2019 +0530

    HDDS-1531. Disable the sync flag by default during chunk writes in Datanode (#820). Contributed by Shashikant Banerjee.

 .../common/src/main/java/org/apache/hadoop/ozone/OzoneConfigKeys.java   | 2 +-
 hadoop-hdds/common/src/main/resources/ozone-default.xml                 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 69ea68a0b4adf494fc2439cf3ef96ef8734d4182
Author: supratimdeka <46919641+supratimdeka@users.noreply.github.com>
Date:   Wed May 15 22:56:01 2019 +0530

    HDDS-1511. Space tracking for Open Containers in HDDS Volumes. Contributed by Supratim Deka (#812)

 .../ozone/container/common/impl/ContainerData.java | 63 ++++++++++++++++++++++
 .../ozone/container/common/impl/ContainerSet.java  |  2 +
 .../ozone/container/common/volume/HddsVolume.java  | 21 ++++++++
 .../common/impl/TestContainerPersistence.java      | 21 ++++++++
 4 files changed, 107 insertions(+)

commit d03094ad20f601b4f6a0458cded09dfde22bb946
Author: Lokesh Jain <ljain@apache.org>
Date:   Tue May 14 14:49:50 2019 +0530

    HDDS-1503. Reduce garbage generated by non-netty threads in datanode ratis server (#813)

 hadoop-ozone/common/src/main/bin/ozone | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 0674207ed54c268bd3b25431a3a25b0a54bfa369
Author: Hanisha Koneru <koneru.hanisha@gmail.com>
Date:   Mon May 13 20:49:52 2019 -0700

    HDDS-1491. Ozone KeyInputStream seek() should not read the chunk file. (#795)

 .../hadoop/hdds/scm/storage/BlockInputStream.java  | 222 +++++++++++++++------
 .../hdds/scm/storage/TestBlockInputStream.java     | 193 ++++++++++++++++++
 .../hadoop/hdds/scm/storage/package-info.java      |  21 ++
 .../hadoop/ozone/client/io/KeyInputStream.java     | 153 +++++++++-----
 .../ozone/client/rpc/TestKeyInputStream.java       | 175 ++++++++++++++++
 .../apache/hadoop/ozone/om/TestChunkStreams.java   |   4 +-
 6 files changed, 655 insertions(+), 113 deletions(-)

commit f65f9dd4f219d5c79c85d363aecb9f20bb498170
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Thu May 9 17:11:09 2019 -0700

    HDDS-1474. "ozone.scm.datanode.id" config should take path for a dir and not a file (#809)

 .../java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  7 +++----
 .../main/java/org/apache/hadoop/ozone/OzoneConsts.java  |  5 +++++
 hadoop-hdds/common/src/main/resources/ozone-default.xml |  2 +-
 .../java/org/apache/hadoop/hdds/scm/HddsServerUtil.java | 13 ++++++++-----
 .../org/apache/hadoop/ozone/HddsDatanodeService.java    | 14 ++++++++------
 .../common/states/datanode/InitDatanodeState.java       |  4 ++--
 .../container/common/TestDatanodeStateMachine.java      | 17 +++++++++--------
 hadoop-hdds/docs/content/Settings.md                    |  6 +++---
 .../dist/src/main/compose/ozone-hdfs/docker-config      |  2 +-
 .../dist/src/main/compose/ozone-om-ha/docker-config     |  2 +-
 .../dist/src/main/compose/ozone-recon/docker-config     |  2 +-
 hadoop-ozone/dist/src/main/compose/ozone/docker-config  |  2 +-
 .../dist/src/main/compose/ozoneblockade/docker-config   |  2 +-
 .../dist/src/main/compose/ozonefs/docker-config         |  2 +-
 .../dist/src/main/compose/ozoneperf/docker-config       |  2 +-
 .../dist/src/main/compose/ozones3/docker-config         |  2 +-
 .../dist/src/main/compose/ozonescripts/docker-config    |  2 +-
 .../dist/src/main/compose/ozonesecure-mr/docker-config  |  2 +-
 .../dist/src/main/compose/ozonesecure/docker-config     |  2 +-
 .../dist/src/main/compose/ozonetrace/docker-config      |  2 +-
 .../dist/src/main/k8s/definitions/ozone/config.yaml     |  3 ++-
 .../main/k8s/examples/minikube/config-configmap.yaml    |  2 +-
 .../main/k8s/examples/ozone-dev/config-configmap.yaml   |  2 +-
 .../src/main/k8s/examples/ozone/config-configmap.yaml   |  2 +-
 24 files changed, 56 insertions(+), 45 deletions(-)

commit 688828479f3fee9e48493d2fd58c0c1068981dd7
Author: Hanisha Koneru <koneru.hanisha@gmail.com>
Date:   Thu May 9 11:18:46 2019 -0700

    Revert "HDDS-1474. ozone.scm.datanode.id config should take path for a dir  (#792)" (#808)
    
    This reverts commit 18cca583ac747f5736777a5aed7e5c02bff1bc0a.

 .../java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  7 ++++---
 .../main/java/org/apache/hadoop/ozone/OzoneConsts.java  |  5 -----
 hadoop-hdds/common/src/main/resources/ozone-default.xml |  2 +-
 .../java/org/apache/hadoop/hdds/scm/HddsServerUtil.java | 13 +++++--------
 .../org/apache/hadoop/ozone/HddsDatanodeService.java    | 14 ++++++--------
 .../common/states/datanode/InitDatanodeState.java       |  4 ++--
 .../container/common/TestDatanodeStateMachine.java      | 17 ++++++++---------
 hadoop-hdds/docs/content/Settings.md                    |  6 +++---
 .../dist/src/main/compose/ozone-hdfs/docker-config      |  2 +-
 .../dist/src/main/compose/ozone-om-ha/docker-config     |  2 +-
 .../dist/src/main/compose/ozone-recon/docker-config     |  2 +-
 hadoop-ozone/dist/src/main/compose/ozone/docker-config  |  2 +-
 .../dist/src/main/compose/ozoneblockade/docker-config   |  2 +-
 .../dist/src/main/compose/ozonefs/docker-config         |  2 +-
 .../dist/src/main/compose/ozoneperf/docker-config       |  2 +-
 .../dist/src/main/compose/ozones3/docker-config         |  2 +-
 .../dist/src/main/compose/ozonescripts/docker-config    |  2 +-
 .../dist/src/main/compose/ozonesecure-mr/docker-config  |  2 +-
 .../dist/src/main/compose/ozonesecure/docker-config     |  2 +-
 .../dist/src/main/compose/ozonetrace/docker-config      |  2 +-
 .../dist/src/main/k8s/definitions/ozone/config.yaml     |  3 +--
 .../main/k8s/examples/minikube/config-configmap.yaml    |  2 +-
 .../main/k8s/examples/ozone-dev/config-configmap.yaml   |  2 +-
 .../src/main/k8s/examples/ozone/config-configmap.yaml   |  2 +-
 24 files changed, 45 insertions(+), 56 deletions(-)

commit dbece1bd388302bdbc38c6c3162d2a3ba32c4a94
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Thu May 9 10:23:44 2019 -0700

    HDDS-1474. ozone.scm.datanode.id config should take path for a dir  (#792)

 .../java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  7 +++----
 .../main/java/org/apache/hadoop/ozone/OzoneConsts.java  |  5 +++++
 hadoop-hdds/common/src/main/resources/ozone-default.xml |  2 +-
 .../java/org/apache/hadoop/hdds/scm/HddsServerUtil.java | 13 ++++++++-----
 .../org/apache/hadoop/ozone/HddsDatanodeService.java    | 14 ++++++++------
 .../common/states/datanode/InitDatanodeState.java       |  4 ++--
 .../container/common/TestDatanodeStateMachine.java      | 17 +++++++++--------
 hadoop-hdds/docs/content/Settings.md                    |  6 +++---
 .../dist/src/main/compose/ozone-hdfs/docker-config      |  2 +-
 .../dist/src/main/compose/ozone-om-ha/docker-config     |  2 +-
 .../dist/src/main/compose/ozone-recon/docker-config     |  2 +-
 hadoop-ozone/dist/src/main/compose/ozone/docker-config  |  2 +-
 .../dist/src/main/compose/ozoneblockade/docker-config   |  2 +-
 .../dist/src/main/compose/ozonefs/docker-config         |  2 +-
 .../dist/src/main/compose/ozoneperf/docker-config       |  2 +-
 .../dist/src/main/compose/ozones3/docker-config         |  2 +-
 .../dist/src/main/compose/ozonescripts/docker-config    |  2 +-
 .../dist/src/main/compose/ozonesecure-mr/docker-config  |  2 +-
 .../dist/src/main/compose/ozonesecure/docker-config     |  2 +-
 .../dist/src/main/compose/ozonetrace/docker-config      |  2 +-
 .../dist/src/main/k8s/definitions/ozone/config.yaml     |  3 ++-
 .../main/k8s/examples/minikube/config-configmap.yaml    |  2 +-
 .../main/k8s/examples/ozone-dev/config-configmap.yaml   |  2 +-
 .../src/main/k8s/examples/ozone/config-configmap.yaml   |  2 +-
 24 files changed, 56 insertions(+), 45 deletions(-)

commit a1ce15fee936961a5ac568cc730987e81e4b7ec6
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Thu May 9 03:08:49 2019 -0700

    HDDS-1500. Allocate block failures in client should print exception trace. Contributed by Aravindan Vijayan  (#801).

 .../org/apache/hadoop/ozone/client/io/BlockOutputStreamEntryPool.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 6c2371c7cd5c9501a5f9d71b0de73f3effb14910
Author: Siddharth <swagle@hortonworks.com>
Date:   Tue May 7 14:48:39 2019 -0700

    HDDS-1489. Unnecessary log messages on console with Ozone shell. (#797)

 hadoop-ozone/dist/src/main/compose/ozone-om-ha/docker-config   | 1 +
 hadoop-ozone/dist/src/main/compose/ozone-recon/docker-config   | 1 +
 hadoop-ozone/dist/src/main/compose/ozone/docker-config         | 1 +
 hadoop-ozone/dist/src/main/compose/ozoneblockade/docker-config | 1 +
 hadoop-ozone/dist/src/main/compose/ozonefs/docker-config       | 1 +
 hadoop-ozone/dist/src/main/compose/ozoneperf/docker-config     | 1 +
 hadoop-ozone/dist/src/main/conf/log4j.properties               | 1 +
 hadoop-ozone/ozonefs/src/test/resources/log4j.properties       | 3 +++
 8 files changed, 10 insertions(+)

commit c249c59c386754dc414c4f4fc454d9f93e955ae2
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Tue May 7 14:09:41 2019 -0700

    HDDS-1475 : Fix OzoneContainer start method. (#788)

 .../common/transport/server/XceiverServerGrpc.java | 11 ++++-
 .../transport/server/ratis/XceiverServerRatis.java | 31 ++++++++-----
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  4 +-
 .../container/ozoneimpl/TestOzoneContainer.java    | 53 ++++++++++++++++++++++
 4 files changed, 84 insertions(+), 15 deletions(-)

commit d6ccaf7ecf7e26bb302075463f972b34e3f87219
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed May 8 01:00:10 2019 +0530

    HDDS-1395. Key write fails with BlockOutputStream has been closed exception (#749). Contributed by Shashikant Banerjee

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  16 +-
 .../hadoop/hdds/scm/client/HddsClientUtils.java    |  70 ++-
 .../hadoop/hdds/scm/storage/BlockOutputStream.java |  13 +-
 .../hadoop/hdds/scm/storage/CommitWatcher.java     |   1 -
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   4 +-
 .../common/src/main/resources/ozone-default.xml    |   4 +-
 hadoop-hdds/pom.xml                                |   2 +-
 .../hadoop/ozone/client/OzoneClientUtils.java      |  38 --
 .../ozone/client/io/BlockOutputStreamEntry.java    |   7 +
 .../client/io/BlockOutputStreamEntryPool.java      | 344 ++++++++++++++
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 374 +++------------
 .../rpc/TestBlockOutputStreamWithFailures.java     | 356 +++++++--------
 .../rpc/TestCloseContainerHandlingByClient.java    |   2 +-
 .../rpc/TestOzoneClientRetriesOnException.java     |   8 +-
 .../ozone/client/rpc/TestWatchForCommit.java       | 501 +++++++++++++++++++++
 .../ozone/container/ContainerTestHelper.java       |  27 +-
 hadoop-ozone/pom.xml                               |   2 +-
 17 files changed, 1193 insertions(+), 576 deletions(-)

commit f63ae0b7f7361519995f2bfbbd76e2e2cb825b82
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed May 8 00:49:15 2019 +0530

    Revert "HDDS-1395. Key write fails with BlockOutputStream has been closed exception (#749)"
    
    This reverts commit d525633619f83a76bcb4d73b444bbfe8e3ab594b.

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  16 +-
 .../hadoop/hdds/scm/client/HddsClientUtils.java    |  70 +--
 .../hadoop/hdds/scm/storage/BlockOutputStream.java |  13 +-
 .../hadoop/hdds/scm/storage/CommitWatcher.java     |   1 +
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   4 +-
 .../common/src/main/resources/ozone-default.xml    |   4 +-
 hadoop-hdds/pom.xml                                |   2 +-
 .../hadoop/ozone/client/OzoneClientUtils.java      |  38 ++
 .../ozone/client/io/BlockOutputStreamEntry.java    |   7 -
 .../client/io/BlockOutputStreamEntryPool.java      | 344 --------------
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 374 ++++++++++++---
 .../rpc/TestBlockOutputStreamWithFailures.java     | 356 ++++++++-------
 .../rpc/TestCloseContainerHandlingByClient.java    |   2 +-
 .../rpc/TestOzoneClientRetriesOnException.java     |   8 +-
 .../ozone/client/rpc/TestWatchForCommit.java       | 501 ---------------------
 .../ozone/container/ContainerTestHelper.java       |  27 +-
 hadoop-ozone/pom.xml                               |   2 +-
 17 files changed, 576 insertions(+), 1193 deletions(-)

commit ce121bd6eb0c7157d8e556b1887c1697542cfd0f
Author: bshashikant <31469764+bshashikant@users.noreply.github.com>
Date:   Wed May 8 00:38:53 2019 +0530

    HDDS-1395. Key write fails with BlockOutputStream has been closed exception (#749)
    
    HDDS-1395. Key write fails with BlockOutputStream has been closed exception (#749).

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  16 +-
 .../hadoop/hdds/scm/client/HddsClientUtils.java    |  70 ++-
 .../hadoop/hdds/scm/storage/BlockOutputStream.java |  13 +-
 .../hadoop/hdds/scm/storage/CommitWatcher.java     |   1 -
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   4 +-
 .../common/src/main/resources/ozone-default.xml    |   4 +-
 hadoop-hdds/pom.xml                                |   2 +-
 .../hadoop/ozone/client/OzoneClientUtils.java      |  38 --
 .../ozone/client/io/BlockOutputStreamEntry.java    |   7 +
 .../client/io/BlockOutputStreamEntryPool.java      | 344 ++++++++++++++
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 374 +++------------
 .../rpc/TestBlockOutputStreamWithFailures.java     | 356 +++++++--------
 .../rpc/TestCloseContainerHandlingByClient.java    |   2 +-
 .../rpc/TestOzoneClientRetriesOnException.java     |   8 +-
 .../ozone/client/rpc/TestWatchForCommit.java       | 501 +++++++++++++++++++++
 .../ozone/container/ContainerTestHelper.java       |  27 +-
 hadoop-ozone/pom.xml                               |   2 +-
 17 files changed, 1193 insertions(+), 576 deletions(-)

commit 6125c5e0407c0cc66a6ff31ad0240123078c27d9
Author: Márton Elek <elek@apache.org>
Date:   Tue May 7 17:48:10 2019 +0200

    HDDS-1424. Support multi-container robot test execution
    
    Closes #726

 .../dist/dev-support/bin/dist-layout-stitching     |   3 +
 hadoop-ozone/dist/pom.xml                          |   2 +-
 hadoop-ozone/dist/src/main/compose/ozone/test.sh   |  35 +++++
 hadoop-ozone/dist/src/main/compose/ozonefs/test.sh |  39 ++++++
 .../dist/src/main/compose/ozoneperf/test.sh        |  30 +++++
 hadoop-ozone/dist/src/main/compose/ozones3/test.sh |  32 +++++
 .../dist/src/main/compose/ozonesecure/test.sh      |  40 ++++++
 hadoop-ozone/dist/src/main/compose/test-all.sh     |  47 +++++++
 hadoop-ozone/dist/src/main/compose/test-single.sh  |  53 ++++++++
 hadoop-ozone/dist/src/main/compose/testlib.sh      |  98 ++++++++++++++
 hadoop-ozone/dist/src/main/smoketest/README.md     |  35 ++++-
 hadoop-ozone/dist/src/main/smoketest/kinit.robot   |  25 ++++
 .../src/main/smoketest/ozonefs/hadoopo3fs.robot    |  32 +++++
 hadoop-ozone/dist/src/main/smoketest/test.sh       | 148 +--------------------
 14 files changed, 473 insertions(+), 146 deletions(-)

commit 0a092667464aa51269887bbd2382c137853ef9e9
Author: Márton Elek <elek@apache.org>
Date:   Mon May 6 20:17:00 2019 +0200

    Revert "HDDS-1384. TestBlockOutputStreamWithFailures is failing"
    
    This reverts commit dead9b4049484c31e0608956e53a9ef07a45819d.

 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  | 62 +++++-----------------
 1 file changed, 14 insertions(+), 48 deletions(-)

commit 0eb786654b4ecaba91946217430067bb2ad55992
Author: Siddharth <swagle@hortonworks.com>
Date:   Sun May 5 09:21:15 2019 -0700

    HDDS-1464. Client should have different retry policies for different exceptions. (#785)

 .../hadoop/ozone/client/OzoneClientUtils.java      | 46 ++++++++++++++++------
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 25 ++++++++----
 2 files changed, 52 insertions(+), 19 deletions(-)

commit f80e1490f09e83986f2006d2310916338a7426fa
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Fri May 3 11:49:00 2019 -0700

    HDDS-1448 : RatisPipelineProvider should only consider open pipeline while excluding dn for pipeline allocation. (#786)

 .../hdds/scm/pipeline/RatisPipelineProvider.java   |  4 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  3 +-
 .../scm/pipeline/TestRatisPipelineProvider.java    | 63 ++++++++++++++++++++++
 3 files changed, 68 insertions(+), 2 deletions(-)

commit 7a8e5bccafb44b5d76e7df5fb001b30f86b81406
Author: Siddharth <swagle@hortonworks.com>
Date:   Thu May 2 13:59:15 2019 -0700

    HDDS-1473. DataNode ID file should be human readable. (#781)

 .../container/common/helpers/ContainerUtils.java   |  45 ++---
 .../container/common/helpers/DatanodeIdYaml.java   | 182 +++++++++++++++++++++
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   9 +
 3 files changed, 207 insertions(+), 29 deletions(-)

commit b93bc3b9cb063d08bf74bb0699a18ac47f663ade
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu May 2 13:56:30 2019 +0200

    HDDS-1482. Use strongly typed codec implementations for the S3Table
    
    Closes #789

 .../apache/hadoop/ozone/om/OMMetadataManager.java  |  5 +-
 .../hadoop/ozone/om/S3SecretManagerImpl.java       | 21 ++----
 .../hadoop/ozone/om/codec/S3SecretValueCodec.java  | 57 ++++++++++++++
 .../hadoop/ozone/om/helpers/S3SecretValue.java     | 20 +++++
 .../ozone/om/codec/TestS3SecretValueCodec.java     | 88 ++++++++++++++++++++++
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     | 14 ++--
 .../hadoop/ozone/om/S3BucketManagerImpl.java       | 21 ++----
 7 files changed, 191 insertions(+), 35 deletions(-)

commit b26bb0d964a477d4f589ee5cddedc8666d530ae5
Author: Márton Elek <elek@apache.org>
Date:   Thu May 2 12:14:43 2019 +0200

    HDDS-1469. Generate default configuration fragments based on annotations
    
    Closes #773

 hadoop-hdds/common/pom.xml                         |   5 +
 .../hadoop/hdds/conf/OzoneConfiguration.java       |  29 ++++-
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  12 --
 .../common/src/main/resources/ozone-default.xml    |  20 ----
 .../hadoop/hdds/conf/SimpleConfiguration.java      |  15 ++-
 .../hadoop/hdds/conf/TestOzoneConfiguration.java   |   4 +-
 hadoop-hdds/config/pom.xml                         |  66 +++++++++++
 .../java/org/apache/hadoop/hdds/conf/Config.java   |  12 ++
 .../hadoop/hdds/conf/ConfigFileAppender.java       | 127 +++++++++++++++++++++
 .../hadoop/hdds/conf/ConfigFileGenerator.java      | 113 ++++++++++++++++++
 .../org/apache/hadoop/hdds/conf/ConfigGroup.java   |   0
 .../org/apache/hadoop/hdds/conf/ConfigTag.java     |  44 +++++++
 .../org/apache/hadoop/hdds/conf/ConfigType.java    |   0
 .../hadoop/hdds/conf/ConfigurationException.java   |   2 +-
 .../org/apache/hadoop/hdds/conf/package-info.java  |  22 ++++
 .../services/javax.annotation.processing.Processor |  16 +++
 .../hadoop/hdds/conf/ConfigurationExample.java     |  89 +++++++++++++++
 .../hadoop/hdds/conf/TestConfigFileAppender.java   |  48 ++++++++
 .../org/apache/hadoop/hdds/conf/package-info.java  |  24 ++++
 hadoop-hdds/pom.xml                                |   7 ++
 .../hdds/scm/container/ReplicationManager.java     |  35 +++++-
 .../hdds/scm/container/TestReplicationManager.java |  14 +++
 .../src/test/resources/core-site.xml               |  24 ++++
 .../src/test/resources/hdfs-site.xml               |  24 ++++
 24 files changed, 703 insertions(+), 49 deletions(-)

commit def3fe803703abda8009f21892ba1bb2a81562b4
Author: Vivek Ratnavel Subramanian <vsubramanian@cloudera.com>
Date:   Thu May 2 11:48:32 2019 +0200

    HDDS-1479. Update S3.md documentation
    
    Closes #791

 hadoop-hdds/docs/content/S3.md | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 57f2fc18f31aeb302e9c746bb9cc8e4975e79f41
Author: Márton Elek <elek@apache.org>
Date:   Thu May 2 11:35:01 2019 +0200

    HDDS-1468. Inject configuration values to Java objects
    
    Closes #772

 .../java/org/apache/hadoop/hdds/conf/Config.java   |  47 +++++++++
 .../org/apache/hadoop/hdds/conf/ConfigGroup.java   |  32 ++++++
 .../org/apache/hadoop/hdds/conf/ConfigType.java    |  34 +++++++
 .../hadoop/hdds/conf/ConfigurationException.java   |  34 +++++++
 .../hadoop/hdds/conf/OzoneConfiguration.java       | 109 ++++++++++++++++++++-
 .../hadoop/hdds/conf/SimpleConfiguration.java      |  83 ++++++++++++++++
 .../hadoop/hdds/conf/TestOzoneConfiguration.java   |  32 ++++++
 .../hdds/scm/container/ReplicationManager.java     |  72 +++++++++-----
 .../hdds/scm/server/StorageContainerManager.java   |  10 +-
 .../hdds/scm/container/TestReplicationManager.java |   8 +-
 .../hdds/scm/safemode/TestSafeModeHandler.java     |   7 +-
 11 files changed, 438 insertions(+), 30 deletions(-)

commit 0a9f88a17b1465c5b85e4ba37875037f29da2399
Author: Márton Elek <elek@apache.org>
Date:   Thu May 2 11:23:44 2019 +0200

    HDDS-1478. Provide k8s resources files for prometheus and performance tests
    
    Closes #783

 .../main/k8s/definitions/jaeger/flekszible.yaml    | 16 +++++
 .../src/main/k8s/definitions/jaeger/jaeger.yaml    | 54 +++++++++++++++
 .../definitions/ozone/definitions/profiler.yaml    | 27 ++++++++
 .../definitions/ozone/definitions/prometheus.yaml  |  2 +-
 .../k8s/definitions/ozone/definitions/tracing.yaml | 33 +++++++++
 .../main/k8s/definitions/prometheus/configmap.yaml | 49 ++++++++++++++
 .../definitions/prometheus/definitions/enable.yaml | 26 +++++++
 .../k8s/definitions/prometheus/deployment.yaml     | 46 +++++++++++++
 .../k8s/definitions/prometheus/flekszible.yaml     | 16 +++++
 .../src/main/k8s/definitions/prometheus/role.yaml  | 33 +++++++++
 .../k8s/definitions/prometheus/rolebinding.yaml    | 27 ++++++++
 .../definitions/prometheus/service-account.yaml    | 19 ++++++
 .../main/k8s/definitions/prometheus/service.yaml   | 25 +++++++
 .../src/main/k8s/examples/ozone-dev/LICENSE.header | 15 ++++
 .../k8s/examples/ozone-dev/config-configmap.yaml   | 37 ++++++++++
 .../k8s/examples/ozone-dev/datanode-daemonset.yaml | 63 +++++++++++++++++
 .../examples/ozone-dev/flekszible/flekszible.yaml  | 36 ++++++++++
 .../examples/ozone-dev/freon/freon-deployment.yaml | 53 +++++++++++++++
 .../examples/ozone-dev/jaeger-public-service.yaml  | 28 ++++++++
 .../k8s/examples/ozone-dev/jaeger-service.yaml     | 28 ++++++++
 .../k8s/examples/ozone-dev/jaeger-statefulset.yaml | 42 ++++++++++++
 .../k8s/examples/ozone-dev/om-public-service.yaml  | 28 ++++++++
 .../main/k8s/examples/ozone-dev/om-service.yaml    | 28 ++++++++
 .../k8s/examples/ozone-dev/om-statefulset.yaml     | 79 ++++++++++++++++++++++
 .../examples/ozone-dev/prometheus-clusterrole.yaml | 42 ++++++++++++
 .../examples/ozone-dev/prometheus-deployment.yaml  | 48 +++++++++++++
 .../prometheus-operator-clusterrolebinding.yaml    | 28 ++++++++
 .../prometheus-operator-serviceaccount.yaml        | 20 ++++++
 .../k8s/examples/ozone-dev/prometheus-service.yaml | 26 +++++++
 .../ozone-dev/prometheusconf-configmap.yaml        | 50 ++++++++++++++
 .../k8s/examples/ozone-dev/s3g-public-service.yaml | 28 ++++++++
 .../main/k8s/examples/ozone-dev/s3g-service.yaml   | 28 ++++++++
 .../k8s/examples/ozone-dev/s3g-statefulset.yaml    | 58 ++++++++++++++++
 .../k8s/examples/ozone-dev/scm-public-service.yaml | 28 ++++++++
 .../main/k8s/examples/ozone-dev/scm-service.yaml   | 28 ++++++++
 .../k8s/examples/ozone-dev/scm-statefulset.yaml    | 74 ++++++++++++++++++++
 36 files changed, 1267 insertions(+), 1 deletion(-)

commit 502bc98673fab7074cbb31525773b1fb8ca02d10
Author: Márton Elek <elek@apache.org>
Date:   Thu May 2 11:10:06 2019 +0200

    HDDS-1412. Provide example k8s deployment files as part of the release package
    
    Closes #719

 hadoop-ozone/common/pom.xml                        | 24 +++++++
 .../dist/dev-support/bin/dist-layout-stitching     |  2 +
 hadoop-ozone/dist/pom.xml                          | 77 +++++++++++++++++++++-
 hadoop-ozone/dist/{ => src/main}/Dockerfile        |  2 +-
 .../ozone/config.yaml}                             |  4 +-
 .../main/k8s/definitions/ozone/datanode-ds.yaml    | 43 ++++++++++++
 .../ozone/definitions/prometheus.yaml}             | 25 ++++---
 .../ozone/flekszible.yaml}                         |  5 +-
 .../k8s/definitions/ozone/freon/flekszible.yaml}   | 11 +---
 .../ozone/freon/freon.yaml}                        | 32 +++------
 .../main/k8s/definitions/ozone/om-ss-service.yaml  | 27 ++++++++
 .../ozone/om-ss.yaml}                              | 49 +++++---------
 .../main/k8s/definitions/ozone/s3g-ss-service.yaml | 27 ++++++++
 .../src/main/k8s/definitions/ozone/s3g-ss.yaml     | 38 +++++++++++
 .../ozone/scm-ss-service.yaml}                     |  2 -
 .../ozone/scm-ss.yaml}                             | 43 ++++--------
 .../definitions/ozone/transformations/config.yaml  | 26 ++++++++
 .../ozone/transformations/emptydir.yaml            | 58 ++++++++++++++++
 .../src/main/k8s/examples/minikube/LICENSE.header  | 15 +++++
 .../k8s/examples/minikube/config-configmap.yaml    | 34 ++++++++++
 .../minikube}/datanode-service.yaml                |  6 +-
 .../examples/minikube/datanode-statefulset.yaml    | 58 ++++++++++++++++
 .../examples/minikube/flekszible/flekszible.yaml   | 45 +++++++++++++
 .../minikube/freon/freon-deployment.yaml}          | 40 +++++------
 .../minikube}/om-public-service.yaml               |  7 +-
 .../{ozone => examples/minikube}/om-service.yaml   |  7 +-
 .../main/k8s/examples/minikube/om-statefulset.yaml | 67 +++++++++++++++++++
 .../minikube}/s3g-public-service.yaml              |  7 +-
 .../{ozone => examples/minikube}/s3g-service.yaml  |  7 +-
 .../minikube}/s3g-statefulset.yaml                 | 32 ++++-----
 .../minikube}/scm-public-service.yaml              |  7 +-
 .../main/k8s/examples/minikube/scm-service.yaml    | 28 ++++++++
 .../k8s/examples/minikube/scm-statefulset.yaml     | 67 +++++++++++++++++++
 .../src/main/k8s/examples/ozone/LICENSE.header     | 15 +++++
 .../main/k8s/examples/ozone/config-configmap.yaml  | 34 ++++++++++
 .../k8s/examples/ozone/datanode-daemonset.yaml     | 56 ++++++++++++++++
 .../k8s/examples/ozone/flekszible/flekszible.yaml  | 43 ++++++++++++
 .../k8s/examples/ozone/freon/freon-deployment.yaml | 46 +++++++++++++
 .../ozone/om-service.yaml}                         | 15 +++--
 .../main/k8s/examples/ozone/om-statefulset.yaml    | 73 ++++++++++++++++++++
 .../src/main/k8s/examples/ozone/s3g-service.yaml   | 28 ++++++++
 .../main/k8s/examples/ozone/s3g-statefulset.yaml   | 51 ++++++++++++++
 .../src/main/k8s/examples/ozone/scm-service.yaml   | 28 ++++++++
 .../main/k8s/examples/ozone/scm-statefulset.yaml   | 67 +++++++++++++++++++
 .../dist/src/main/k8s/prometheus/configmap.yaml    | 51 --------------
 .../k8s/prometheus/prometheus-public-serivce.yaml  | 28 --------
 .../dist/src/main/k8s/prometheus/role.yaml         | 31 ---------
 .../dist/src/main/k8s/prometheus/rolebindng.yaml   | 27 --------
 .../main/k8s/prometheus/scm-public-service.yaml    | 29 --------
 49 files changed, 1192 insertions(+), 352 deletions(-)

commit b043fe7b4af41d88d83e0194db13cb0fc0e6923d
Author: dineshchitlangia <dineshchitlangia@gmail.com>
Date:   Thu May 2 00:51:11 2019 -0400

    HDDS-1483. Fix getMultipartKey javadoc. (#790)

 .../src/main/java/org/apache/hadoop/ozone/om/OMMetadataManager.java      | 1 -
 1 file changed, 1 deletion(-)

commit 90ce969a6b3d123a0522f42e7828eaa6e35d72ff
Author: Márton Elek <elek@apache.org>
Date:   Tue Apr 30 14:27:39 2019 +0200

    HDDS-1384. TestBlockOutputStreamWithFailures is failing
    
    Closes #750

 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  | 62 +++++++++++++++++-----
 1 file changed, 48 insertions(+), 14 deletions(-)

commit 5de57978e001a741bdd38ad14304c15b876c0ffc
Author: Ajay Kumar <ajay@apache.org>
Date:   Mon Apr 29 19:46:20 2019 -0700

    Revert "HDDS-973. HDDS/Ozone fail to build on Windows."
    
    This reverts commit 5dae1a0c663cf9ab0e1e0463e5121afb0fa4a83e.

 hadoop-hdds/docs/pom.xml | 11 +++--------
 1 file changed, 3 insertions(+), 8 deletions(-)

commit b353ee9fdca93792415cd5d928d0f3677a25294f
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Mon Apr 29 14:07:23 2019 -0700

    HDDS-1430. NPE if secure ozone if KMS uri is not defined. Contributed by Ajay Kumar. (#752)

 .../hadoop/ozone/client/rpc/OzoneKMSUtil.java      |  3 ++
 .../hadoop/ozone/client/rpc/TestOzoneKMSUtil.java  | 51 ++++++++++++++++++++++
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |  8 +++-
 3 files changed, 61 insertions(+), 1 deletion(-)

commit 2be22f4d8bc890c3afb7cf13cd1c46f78ef91ff7
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Mon Apr 29 22:28:19 2019 +0200

    HDDS-1462. Fix content and format of Ozone documentation. Contributed by Elek, Marton. (#767)

 hadoop-hdds/docs/content/BucketCommands.md         |   4 +-
 hadoop-hdds/docs/content/BuildingSources.md        |  28 ++++++++++----
 hadoop-hdds/docs/content/CommandShell.md           |   1 +
 hadoop-hdds/docs/content/KeyCommands.md            |   2 +-
 hadoop-hdds/docs/content/OzoneFS.md                |  33 +++++++++++++---
 .../docs/content/OzoneSecurityArchitecture.md      |  43 +++++++++++++++------
 hadoop-hdds/docs/content/Prometheus.md             |   6 +--
 hadoop-hdds/docs/content/RunningViaDocker.md       |   8 ++--
 hadoop-hdds/docs/content/S3.md                     |  27 +++++++++++--
 hadoop-hdds/docs/content/S3Commands.md             |  41 --------------------
 hadoop-hdds/docs/content/Settings.md               |   4 +-
 hadoop-hdds/docs/content/SetupSecureOzone.md       |  22 +++++++++--
 hadoop-hdds/docs/content/VolumeCommands.md         |   4 +-
 .../docs/static/prometheus-key-allocate.png        | Bin 0 -> 51155 bytes
 hadoop-hdds/docs/static/prometheus.png             | Bin 0 -> 38962 bytes
 .../themes/ozonedoc/layouts/partials/sidebar.html  |  16 +++++++-
 .../docs/themes/ozonedoc/static/css/ozonedoc.css   |  11 ++++++
 17 files changed, 162 insertions(+), 88 deletions(-)

commit 8a78d7c0c363c95f6d51cb0a1c56240341ca1ac1
Author: Siddharth <swagle@hortonworks.com>
Date:   Mon Apr 29 12:05:38 2019 -0700

    HDDS-1476. Fix logIfNeeded logic in EndPointStateMachine. (#779)

 .../ozone/container/common/statemachine/EndpointStateMachine.java  | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit 4454d3547660f6571fdfc41dcd03ddec8f5273a9
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Apr 29 11:18:11 2019 -0700

    HDDS-1455. Inconsistent naming convention with Ozone Kerberos configuration. Contributed by Xiaoyu Yao. (#762)

 .../src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java       | 2 +-
 hadoop-hdds/common/src/main/resources/ozone-default.xml               | 2 +-
 hadoop-hdds/docs/content/SetupSecureOzone.md                          | 4 ++--
 hadoop-ozone/dist/src/main/compose/ozonesecure-mr/docker-config       | 4 ++--
 hadoop-ozone/dist/src/main/compose/ozonesecure/docker-config          | 4 ++--
 5 files changed, 8 insertions(+), 8 deletions(-)

commit 29b625ad54120856c3ca3aae5f530537c5da84be
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Mon Apr 29 07:46:01 2019 -0700

    HDDS-1472. Add retry to kinit command in smoketests. Contributed by Ajay Kumar. (#778)

 hadoop-ozone/dist/src/main/smoketest/commonlib.robot | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 992ca2f049cc3edca3a8e261ba787dc8a21ca7a9
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Sun Apr 28 20:57:59 2019 -0700

    HDDS-1471. Update ratis dependency to 0.3.0. Contributed by Ajay Kumar. (#777)

 hadoop-hdds/pom.xml  | 2 +-
 hadoop-ozone/pom.xml | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit a0ba7864dba75ee993df6c0bec918e24acad9df1
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Apr 26 14:25:34 2019 -0700

    HDDS-1456. Stop the datanode, when any datanode statemachine state is… (#769)

 .../apache/hadoop/ozone/HddsDatanodeService.java   | 46 +++++++++++++---------
 .../hadoop/ozone/HddsDatanodeStopService.java      | 27 +++++++++++++
 .../common/statemachine/DatanodeStateMachine.java  | 14 ++++++-
 .../common/statemachine/StateContext.java          | 25 ++++++++++++
 .../ozone/container/common/volume/VolumeSet.java   | 10 +++--
 .../container/common/TestDatanodeStateMachine.java |  8 ++--
 .../common/volume/TestVolumeSetDiskChecks.java     |  9 ++++-
 .../ozone/container/common/TestEndPoint.java       |  6 ++-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  | 12 +++---
 9 files changed, 121 insertions(+), 36 deletions(-)

commit 8f72fe008a222c07e80000cd841a65f1288c271d
Author: Hanisha Koneru <koneru.hanisha@gmail.com>
Date:   Fri Apr 26 10:39:03 2019 -0700

    HDDS-1403. KeyOutputStream writes fails after max retries while writing to a closed container (#753)

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   | 11 ++++++++---
 .../common/src/main/resources/ozone-default.xml    | 11 ++++++++++-
 .../hadoop/ozone/client/OzoneClientUtils.java      |  5 +++--
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 14 +++++++++++---
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 10 +++++++++-
 .../apache/hadoop/ozone/web/utils/OzoneUtils.java  | 22 ++++++++++++++++++++++
 .../web/storage/DistributedStorageHandler.java     |  6 ++++++
 7 files changed, 69 insertions(+), 10 deletions(-)

commit 89f8b0d0616baa5270f4482b05de5ff035879b95
Author: Lokesh Jain <ljain@apache.org>
Date:   Fri Apr 26 17:29:50 2019 +0530

    HDDS-1460: Add the optmizations of HDDS-1300 to BasicOzoneFileSystem (#765)

 .../hadoop/fs/ozone/BasicOzoneFileSystem.java      | 34 +---------------------
 1 file changed, 1 insertion(+), 33 deletions(-)

commit b331536a239da426220af28aa27de23fafaea1c0
Author: Siddharth Wagle <swagle@hortonworks.com>
Date:   Fri Apr 26 12:38:24 2019 +0200

    HDDS-999. Make the DNS resolution in OzoneManager more resilient
    
    Closes #758

 hadoop-ozone/dist/src/main/compose/ozone-hdfs/docker-compose.yaml   | 1 -
 hadoop-ozone/dist/src/main/compose/ozone-om-ha/docker-compose.yaml  | 3 ---
 hadoop-ozone/dist/src/main/compose/ozone-recon/docker-compose.yaml  | 1 -
 hadoop-ozone/dist/src/main/compose/ozone/docker-compose.yaml        | 1 -
 hadoop-ozone/dist/src/main/compose/ozonefs/docker-compose.yaml      | 1 -
 hadoop-ozone/dist/src/main/compose/ozoneperf/docker-compose.yaml    | 1 -
 hadoop-ozone/dist/src/main/compose/ozones3/docker-compose.yaml      | 1 -
 .../dist/src/main/compose/ozonesecure-mr/docker-compose.yaml        | 1 -
 hadoop-ozone/dist/src/main/compose/ozonesecure/docker-compose.yaml  | 1 -
 hadoop-ozone/dist/src/main/compose/ozonetrace/docker-compose.yaml   | 1 -
 hadoop-ozone/dist/src/main/k8s/ozone/om-statefulset.yaml            | 6 ------
 .../src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java      | 2 +-
 12 files changed, 1 insertion(+), 19 deletions(-)

commit 5bc04aaf68044c9805f9c33af5f2c0dce3cf1de0
Author: Eric Yang <eyang@apache.org>
Date:   Wed Apr 24 15:45:46 2019 +0200

    HDDS-1457. Sequence of configuring Ozone File System instruction needs some work. Contributed by Eric Yang.

 hadoop-hdds/docs/content/BuildingSources.md | 2 +-
 hadoop-hdds/docs/content/OzoneFS.md         | 6 ++++--
 hadoop-hdds/docs/content/RunningWithHDFS.md | 4 ++--
 3 files changed, 7 insertions(+), 5 deletions(-)

commit 37f3383d679eb3f4408b886e894f2fa70e785cd4
Author: Kitti Nanasi <knanasi@cloudera.com>
Date:   Wed Apr 24 15:07:13 2019 +0200

    HDDS-1192. Support -conf command line argument in GenericCli
    
    Closes #713

 .../org/apache/hadoop/hdds/cli/GenericCli.java     | 12 ++-
 .../hdds/cli/MissingSubcommandException.java       | 14 ++--
 .../apache/hadoop/ozone/HddsDatanodeService.java   | 95 ++++++++++++----------
 .../hadoop/ozone/TestHddsDatanodeService.java      |  7 +-
 .../hadoop/ozone/TestHddsSecureDatanodeInit.java   |  4 +-
 .../hadoop/hdds/scm/cli/SafeModeCommands.java      |  3 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  | 23 +++---
 .../apache/hadoop/ozone/om/TestScmSafeMode.java    |  2 +-
 .../ozone/ozShell/TestOzoneDatanodeShell.java      | 26 +++---
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 69 ++++++++--------
 .../ozone/web/ozShell/bucket/BucketCommands.java   |  2 +-
 .../hadoop/ozone/web/ozShell/keys/KeyCommands.java |  2 +-
 .../ozone/web/ozShell/token/TokenCommands.java     |  2 +-
 .../ozone/web/ozShell/volume/VolumeCommands.java   |  2 +-
 .../hadoop/ozone/audit/parser/TestAuditParser.java |  7 +-
 15 files changed, 138 insertions(+), 132 deletions(-)

commit 1482fe6e411180f40471a78cd3c77ccad4ca9a7b
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Apr 23 21:38:23 2019 -0700

    HDDS-1450. Fix nightly run failures after HDDS-976. Contributed by Xiaoyu Yao. (#757)

 .../src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java    | 2 --
 .../java/org/apache/hadoop/hdds/scm/net/NodeSchemaManager.java     | 7 +++----
 hadoop-hdds/common/src/main/resources/ozone-default.xml            | 6 ++++--
 3 files changed, 7 insertions(+), 8 deletions(-)

commit 07f93785425cf503608bf7210f0bfd3306511f29
Author: Siddharth <swagle@apache.org>
Date:   Tue Apr 23 08:34:14 2019 -0700

    HDDS-1411. Add unit test to check if SCM correctly sends close commands for containers in closing state after a restart. (#755)

 .../hdds/scm/server/StorageContainerManager.java   |   4 +-
 .../hadoop/ozone/TestStorageContainerManager.java  | 127 +++++++++++++++++++--
 2 files changed, 122 insertions(+), 9 deletions(-)

commit 1bb42508e2419c5cfd1bb7399972192eac6837f3
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Apr 23 17:35:39 2019 +0530

    HDDS-1368. Cleanup old ReplicationManager code from SCM.

 .../common/statemachine/StateContext.java          |  32 +-
 .../DeleteContainerCommandHandler.java             |   4 -
 .../ReplicateContainerCommandHandler.java          |  28 +-
 .../scm/command/CommandStatusReportHandler.java    |  43 +--
 .../container/DeleteContainerCommandWatcher.java   |  56 ---
 .../replication/ReplicationCommandWatcher.java     |  56 ---
 .../container/replication/ReplicationManager.java  | 384 ---------------------
 .../container/replication/ReplicationQueue.java    |  73 ----
 .../container/replication/ReplicationRequest.java  | 123 -------
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  65 +---
 .../hadoop/hdds/scm/node/DeadNodeHandler.java      | 186 ++++++----
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |   4 +-
 .../hdds/scm/server/StorageContainerManager.java   |   2 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  11 +-
 .../command/TestCommandStatusReportHandler.java    |   5 -
 .../replication/TestReplicationManager.java        | 290 ----------------
 .../replication/TestReplicationQueue.java          | 134 -------
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  |  63 +---
 .../hadoop/hdds/scm/node/TestStatisticsUpdate.java |   4 +-
 .../ozone/container/common/TestEndPoint.java       |  13 +-
 20 files changed, 150 insertions(+), 1426 deletions(-)

commit 970f145665afcc7acd6976ebe129f4283da34899
Author: Chen, Junjie <jimmyjchen@tencent.com>
Date:   Fri Apr 19 07:53:25 2019 +0800

    HDDS-976: Parse network topology from yaml file. Contributed by Junjie Chen. (#661)
    
    Signed-off-by: Xiaoyu Yao <xyao@apache.org>

 hadoop-hdds/common/pom.xml                         |  5 ++
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  2 +
 .../org/apache/hadoop/hdds/scm/net/NodeSchema.java | 43 ++++++++++-
 .../hadoop/hdds/scm/net/NodeSchemaLoader.java      | 86 ++++++++++++++++++++-
 .../hadoop/hdds/scm/net/NodeSchemaManager.java     |  9 ++-
 .../main/resources/network-topology-default.yaml   | 61 +++++++++++++++
 .../hadoop/hdds/scm/net/TestNodeSchemaLoader.java  |  6 +-
 .../hadoop/hdds/scm/net/TestYamlSchemaLoader.java  | 90 ++++++++++++++++++++++
 .../resources/networkTopologyTestFiles/good.yaml   | 59 ++++++++++++++
 .../networkTopologyTestFiles/middle-leaf.yaml      | 59 ++++++++++++++
 .../networkTopologyTestFiles/multiple-root.yaml    | 59 ++++++++++++++
 hadoop-hdds/container-service/pom.xml              |  2 +-
 12 files changed, 471 insertions(+), 10 deletions(-)

commit 26f67a7ad6153a8dc114a95e258ba71a638785e5
Author: Márton Elek <elek@apache.org>
Date:   Thu Apr 18 08:41:26 2019 +0200

    HDDS-1447. Fix CheckStyle warnings. Contributed by Wanqiang Ji.

 .../java/org/apache/hadoop/ozone/client/io/KeyOutputStream.java   | 8 ++++----
 .../org/apache/hadoop/ozone/container/ContainerTestHelper.java    | 5 +++--
 2 files changed, 7 insertions(+), 6 deletions(-)

commit 16826ef73893e38ac53727b9dc83ad5d05c0fda6
Author: Márton Elek <elek@apache.org>
Date:   Thu Apr 18 08:45:50 2019 +0200

    HDDS-1433. Rename GetScmInfoRespsonseProto to GetScmInfoResponseProto due to typos. Contributed by Wanqiang Ji.

 .../protocolPB/ScmBlockLocationProtocolClientSideTranslatorPB.java  | 2 +-
 .../StorageContainerLocationProtocolClientSideTranslatorPB.java     | 2 +-
 .../protocolPB/ScmBlockLocationProtocolServerSideTranslatorPB.java  | 4 ++--
 .../StorageContainerLocationProtocolServerSideTranslatorPB.java     | 4 ++--
 hadoop-hdds/common/src/main/proto/ScmBlockLocationProtocol.proto    | 2 +-
 .../common/src/main/proto/StorageContainerLocationProtocol.proto    | 2 +-
 hadoop-hdds/common/src/main/proto/hdds.proto                        | 6 +++---
 7 files changed, 11 insertions(+), 11 deletions(-)

commit 4233ec2a8af957770e21c5d36b07487151fea98d
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Apr 17 14:49:02 2019 +0530

    HDDS-1373. KeyOutputStream, close after write request fails after retries, runs into IllegalArgumentException.(#729)

 .../scm/container/common/helpers/ExcludeList.java  |   6 +
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 198 ++++++++++++---------
 .../ozone/client/rpc/TestBlockOutputStream.java    |  16 +-
 .../rpc/TestBlockOutputStreamWithFailures.java     |  27 +--
 .../rpc/TestOzoneClientRetriesOnException.java     |  46 +++--
 .../ozone/container/ContainerTestHelper.java       |   4 +-
 6 files changed, 183 insertions(+), 114 deletions(-)

commit 25defeb4ef1f6549a9e3417f6aa12e6353e19b5a
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Apr 17 14:38:08 2019 +0530

    Revert "HDDS-1373. KeyOutputStream, close after write request fails after retries, runs into IllegalArgumentException..(#729)"
    
    This reverts commit df2ae27f3e40cb4cedda9c7bed1a464be60fd339.

 .../scm/container/common/helpers/ExcludeList.java  |   6 -
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 198 ++++----
 .../ozone/client/rpc/TestBlockOutputStream.java    |  16 +-
 .../rpc/TestBlockOutputStreamWithFailures.java     |  27 +-
 .../rpc/TestOzoneClientRetriesOnException.java     |  46 +-
 .../ozone/client/rpc/TestWatchForCommit.java       | 511 ---------------------
 .../ozone/container/ContainerTestHelper.java       |   4 +-
 7 files changed, 114 insertions(+), 694 deletions(-)

commit 66635e6204545ef00feb05f5a2396f10a2504677
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Apr 17 14:25:35 2019 +0530

    HDDS-1373. KeyOutputStream, close after write request fails after retries, runs into IllegalArgumentException..(#729)

 .../scm/container/common/helpers/ExcludeList.java  |   6 +
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 198 ++++----
 .../ozone/client/rpc/TestBlockOutputStream.java    |  16 +-
 .../rpc/TestBlockOutputStreamWithFailures.java     |  27 +-
 .../rpc/TestOzoneClientRetriesOnException.java     |  46 +-
 .../ozone/client/rpc/TestWatchForCommit.java       | 511 +++++++++++++++++++++
 .../ozone/container/ContainerTestHelper.java       |   4 +-
 7 files changed, 694 insertions(+), 114 deletions(-)

commit f0c4c3b4a13fb10feb370912d7ee91cc2969a824
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Apr 17 14:17:54 2019 +0530

    Revert "Merge pull request #729 from bshashikant/HDDS-1373"
    
    This reverts commit 4ff4314e40a4449f6d68f1a2c0f713baeb70fb10, reversing
    changes made to 04c0437d13cbe8474224735cc6c41d0f6ea917f9.

 .../scm/container/common/helpers/ExcludeList.java  |   6 -
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 198 ++++----
 .../ozone/client/rpc/TestBlockOutputStream.java    |  16 +-
 .../rpc/TestBlockOutputStreamWithFailures.java     |  27 +-
 .../rpc/TestOzoneClientRetriesOnException.java     |  46 +-
 .../ozone/client/rpc/TestWatchForCommit.java       | 512 ---------------------
 .../ozone/container/ContainerTestHelper.java       |   4 +-
 7 files changed, 114 insertions(+), 695 deletions(-)

commit d10bc339be8a551ee4723ff5e7aa72c922a6de5e
Merge: de9cd18d 0a872693
Author: bshashikant <31469764+bshashikant@users.noreply.github.com>
Date:   Wed Apr 17 14:12:52 2019 +0530

    Merge pull request #729 from bshashikant/HDDS-1373
    
    HDDS-1373. KeyOutputStream, close after write request fails after retries, runs into IllegalArgumentException. Contributed by Shashikant Banerjee.

commit de9cd18dda1502e3490d4166c9d1cc2bf5516d60
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Wed Apr 17 04:16:05 2019 +0200

    HDDS-1402. Remove unused ScmBlockLocationProtocol from ObjectStoreHandler (#707)

 .../hdfs/server/datanode/ObjectStoreHandler.java   | 41 +++++++---------------
 1 file changed, 12 insertions(+), 29 deletions(-)

commit ec14160ff3023625dc92d282e715c1ee90915af9
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Wed Apr 17 04:13:01 2019 +0200

    HDDS-1434. TestDatanodeStateMachine is flaky (#740)

 .../apache/hadoop/ozone/container/common/TestDatanodeStateMachine.java | 1 +
 .../statemachine/commandhandler/TestCloseContainerCommandHandler.java  | 3 +++
 2 files changed, 4 insertions(+)

commit 5157453f866606b56e574a1d28a681526a25c38f
Author: Hanisha Koneru <koneru.hanisha@gmail.com>
Date:   Tue Apr 16 13:51:39 2019 -0700

    HDDS-1376. Datanode exits while executing client command when scmId is null (#724)

 .../common/statemachine/DatanodeStateMachine.java         |  1 -
 .../common/states/endpoint/VersionEndpointTask.java       |  3 ++-
 .../hadoop/ozone/container/ozoneimpl/OzoneContainer.java  |  3 ++-
 .../ozone/container/common/TestDatanodeStateMachine.java  | 15 +++++++++++++++
 .../commandhandler/TestCloseContainerCommandHandler.java  | 11 +++++------
 .../ozone/container/ozoneimpl/TestOzoneContainer.java     |  5 ++---
 .../container/ozoneimpl/TestOzoneContainerWithTLS.java    |  5 ++---
 .../container/ozoneimpl/TestSecureOzoneContainer.java     |  5 ++---
 8 files changed, 30 insertions(+), 18 deletions(-)

commit c2d48a6c0f27b262a4b71c43194d2b8488e397d8
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Apr 16 13:49:29 2019 -0700

    HDDS-1374. ContainerStateMap cannot find container while allocating blocks. (#735)

 .../hadoop/hdds/scm/container/SCMContainerManager.java     | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

commit 63bc04eacca70173307e8ced0de2e72fd4338ed0
Author: Arpit Agarwal <arp@apache.org>
Date:   Tue Apr 16 12:35:49 2019 -0700

    HDDS-1432. Ozone client list command truncates response without any indication. Contributed by Siddharth Wagle.

 .../test/java/org/apache/hadoop/ozone/ozShell/TestOzoneShell.java  | 5 +++++
 .../org/apache/hadoop/ozone/web/ozShell/keys/ListKeyHandler.java   | 7 +++++++
 2 files changed, 12 insertions(+)

commit 5a7b8e4d0c870e575e8bcefe5ed0321d6b5d372c
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Apr 16 18:52:07 2019 +0530

    HDDS-1380. Add functonality to write from multiple clients in MiniOzoneChaosCluster. Contributed by Shashikant Banerjee.

 .../org/apache/hadoop/ozone/MiniOzoneLoadGenerator.java    | 13 ++++++++-----
 .../org/apache/hadoop/ozone/TestMiniChaosOzoneCluster.java | 14 +++++++++++---
 2 files changed, 19 insertions(+), 8 deletions(-)

commit e3cb5b8baaead7518dd307e1c7633c416bf8a12e
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Mon Apr 15 12:58:06 2019 -0700

    HDDS-1396 : Recon start fails due to changes in Aggregate Schema definition. (#700)

 hadoop-ozone/ozone-recon-codegen/pom.xml                          | 3 +--
 hadoop-ozone/ozone-recon/pom.xml                                  | 3 +--
 .../hadoop/ozone/recon/persistence/JooqPersistenceModule.java     | 1 -
 .../hadoop/ozone/recon/persistence/AbstractSqlDatabaseTest.java   | 8 +++++++-
 hadoop-ozone/pom.xml                                              | 1 +
 5 files changed, 10 insertions(+), 6 deletions(-)

commit 5b6e58a8d3ac7ef91c5aef708729a5df52240e85
Author: Arpit Agarwal <arp7@users.noreply.github.com>
Date:   Sat Apr 13 07:27:03 2019 -0700

    HDDS-1198. Rename chill mode to safe mode. Contributed by Siddharth Wagle. (#737)

 .../hdds/scm/client/ContainerOperationClient.java  |  14 +-
 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  44 +++---
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |  10 +-
 .../protocol/StorageContainerLocationProtocol.java |  10 +-
 ...inerLocationProtocolClientSideTranslatorPB.java |  36 ++---
 .../org/apache/hadoop/ozone/audit/SCMAction.java   |   4 +-
 ...inerLocationProtocolServerSideTranslatorPB.java |  28 ++--
 .../src/main/proto/ScmBlockLocationProtocol.proto  |   2 +-
 .../proto/StorageContainerLocationProtocol.proto   |  22 +--
 .../common/src/main/resources/ozone-default.xml    |  24 +--
 .../java/org/apache/hadoop/hdds/scm/ScmUtils.java  |   2 +-
 .../apache/hadoop/hdds/scm/block/BlockManager.java |   6 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  20 +--
 .../replication/ReplicationActivityStatus.java     |   6 +-
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |   8 +-
 .../hadoop/hdds/scm/exceptions/SCMException.java   |   2 +-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |   2 +-
 .../hdds/scm/pipeline/PipelineReportHandler.java   |  16 +-
 .../ContainerSafeModeRule.java}                    |  32 ++--
 .../DataNodeSafeModeRule.java}                     |  24 +--
 .../HealthyPipelineSafeModeRule.java}              |  30 ++--
 .../OneReplicaPipelineSafeModeRule.java}           |  28 ++--
 .../hdds/scm/{chillmode => safemode}/Precheck.java |   2 +-
 .../SCMSafeModeManager.java}                       | 146 +++++++++---------
 .../SafeModeExitRule.java}                         |  32 ++--
 .../SafeModeHandler.java}                          |  56 +++----
 .../SafeModePrecheck.java}                         |  42 +++---
 .../SafeModeRestrictedOps.java}                    |  10 +-
 .../scm/{chillmode => safemode}/package-info.java  |   2 +-
 .../hdds/scm/server/SCMBlockProtocolServer.java    |   4 +-
 .../hdds/scm/server/SCMClientProtocolServer.java   |  44 +++---
 .../hadoop/hdds/scm/server/SCMConfigurator.java    |  22 +--
 .../apache/hadoop/hdds/scm/server/SCMMXBean.java   |   8 +-
 .../hdds/scm/server/StorageContainerManager.java   |  48 +++---
 .../main/resources/webapps/scm/scm-overview.html   |   4 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  48 +++---
 .../hadoop/hdds/scm/container/MockNodeManager.java |  12 +-
 .../scm/container/TestSCMContainerManager.java     |   6 +-
 .../hadoop/hdds/scm/node/TestSCMNodeManager.java   |   4 +-
 .../TestHealthyPipelineSafeModeRule.java}          |  56 +++----
 .../TestOneReplicaPipelineSafeModeRule.java}       |  20 +--
 .../TestSCMSafeModeManager.java}                   | 164 ++++++++++-----------
 .../TestSafeModeHandler.java}                      |  46 +++---
 .../scm/{chillmode => safemode}/package-info.java  |   4 +-
 .../scm/server/TestSCMClientProtocolServer.java    |  10 +-
 .../org/apache/hadoop/hdds/scm/cli/SCMCLI.java     |   2 +-
 ...ubcommand.java => SafeModeCheckSubcommand.java} |  16 +-
 ...hillModeCommands.java => SafeModeCommands.java} |  16 +-
 ...Subcommand.java => SafeModeExitSubcommand.java} |  14 +-
 .../hadoop/ozone/om/exceptions/OMException.java    |   2 +-
 .../src/main/proto/OzoneManagerProtocol.proto      |   2 +-
 .../TestContainerStateManagerIntegration.java      |   2 +-
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  |   8 +-
 .../TestSCMSafeModeWithPipelineRules.java}         |  28 ++--
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   4 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   8 +-
 ...{TestScmChillMode.java => TestScmSafeMode.java} |  94 ++++++------
 .../org/apache/hadoop/ozone/scm/TestSCMMXBean.java |   8 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |   4 +-
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |   2 +-
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java |  14 +-
 .../om/ratis/TestOzoneManagerStateMachine.java     |   8 +-
 .../ozone/genesis/BenchMarkOzoneManager.java       |   6 +-
 .../apache/hadoop/ozone/genesis/BenchMarkSCM.java  |   6 +-
 64 files changed, 702 insertions(+), 702 deletions(-)

commit 75ea25bfa20ae7e856c95d837954a1370c663e55
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Sat Apr 13 00:19:50 2019 +0200

    HDDS-1387. ConcurrentModificationException in TestMiniChaosOzoneCluster. Contributed by Marton Elek. (#732)

 .../src/test/java/org/apache/hadoop/ozone/MiniOzoneChaosCluster.java  | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 8a73e699567706f0093f18ea3125e12966eb77d0
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Apr 12 15:08:01 2019 -0700

    HDDS-1428. Remove benign warning in handleCreateContainer. Contributed by Siddharth Wagle.

 .../org/apache/hadoop/ozone/container/keyvalue/KeyValueHandler.java     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8f6c17f37c3cf37ae6ddd448f03ffbeaaa0013d3
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Apr 12 18:45:36 2019 +0200

    HDDS-1425. Ozone compose files are not compatible with the latest docker-compose. (#727)

 hadoop-ozone/dist/src/main/compose/ozone-hdfs/docker-config     | 2 +-
 hadoop-ozone/dist/src/main/compose/ozone-om-ha/docker-config    | 2 +-
 hadoop-ozone/dist/src/main/compose/ozone-recon/docker-config    | 2 +-
 hadoop-ozone/dist/src/main/compose/ozone/docker-config          | 2 +-
 hadoop-ozone/dist/src/main/compose/ozoneblockade/docker-config  | 2 +-
 hadoop-ozone/dist/src/main/compose/ozones3/docker-config        | 2 +-
 hadoop-ozone/dist/src/main/compose/ozonesecure-mr/docker-config | 2 +-
 hadoop-ozone/dist/src/main/compose/ozonesecure/docker-config    | 2 +-
 hadoop-ozone/dist/src/main/compose/ozonetrace/docker-config     | 2 +-
 9 files changed, 9 insertions(+), 9 deletions(-)

commit be07a581ab9f3aef6b216a38f8e1859c4a03959a
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Apr 12 09:40:27 2019 -0700

    HDDS-1285. Implement actions need to be taken after chill mode exit wait time. (#612)

 .../hdds/scm/chillmode/ChillModeHandler.java       |  32 +++-
 .../hdds/scm/server/StorageContainerManager.java   |  13 +-
 .../hdds/scm/chillmode/TestChillModeHandler.java   |   6 +-
 .../scm/server/TestSCMClientProtocolServer.java    |   6 +-
 .../TestSCMChillModeWithPipelineRules.java         | 202 +++++++++++++++++++++
 .../TestContainerStateManagerIntegration.java      |   2 +-
 .../hadoop/hdds/scm/pipeline/TestSCMRestart.java   |   2 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   6 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   6 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   2 +-
 .../apache/hadoop/ozone/om/TestScmChillMode.java   |   2 +-
 11 files changed, 267 insertions(+), 12 deletions(-)

commit b342d80751c9cf6fbe73d17c23f924b99830224b
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Apr 12 12:21:10 2019 +0200

    HDDS-1420. Tracing exception in DataNode HddsDispatcher
    
    Closes #723

 .../commandhandler/CloseContainerCommandHandler.java         |  2 --
 .../ozone/container/common/impl/TestHddsDispatcher.java      |  1 -
 .../commandhandler/TestCloseContainerCommandHandler.java     |  1 -
 .../ozone/client/rpc/TestContainerStateMachineFailures.java  |  2 --
 .../apache/hadoop/ozone/container/ContainerTestHelper.java   | 12 ------------
 5 files changed, 18 deletions(-)

commit 6f2823cb96ea484a7ba1d16664ad4b2e26f8d792
Author: Doroszlai, Attila <adoroszlai@apache.org>
Date:   Thu Apr 11 16:37:17 2019 +0200

    HDDS-1419. Fix shellcheck errors in start-chaos.sh
    
    Closes #728

 .../integration-test/src/test/bin/start-chaos.sh         | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 8ec2e4875031de14799509eba31e5a71e21792c1
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Apr 12 11:51:58 2019 +0200

    HDDS-1421. Avoid unnecessary object allocations in TracingUtil
    
    Closes #722

 .../java/org/apache/hadoop/hdds/tracing/TracingUtil.java     | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit d99c0f37cc80636715b9484296d784d521203007
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Apr 12 11:34:43 2019 +0200

    HDDS-1426. Minor logging improvements for MiniOzoneChaosCluster
    
    Closes #730

 hadoop-ozone/integration-test/src/test/bin/start-chaos.sh        | 2 +-
 .../test/java/org/apache/hadoop/ozone/MiniOzoneChaosCluster.java | 9 +++++++--
 2 files changed, 8 insertions(+), 3 deletions(-)

commit a74914c4dad70833a88185a11557ab80b88967fc
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Fri Apr 12 11:30:08 2019 +0200

    HDDS-1363. ozone.metadata.dirs doesn't pick multiple dirs (#691)

 .../java/org/apache/hadoop/hdds/HddsUtils.java     |  24 ----
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java |  22 ++++
 .../apache/hadoop/ozone/HddsDatanodeService.java   |   5 +-
 .../common/states/datanode/InitDatanodeState.java  |   4 +-
 .../org/apache/hadoop/hdds/server/ServerUtils.java |  25 ++---
 .../apache/hadoop/hdds/server/TestServerUtils.java | 123 +++++++++++++++++++++
 .../java/org/apache/hadoop/hdds/scm/ScmUtils.java  |  20 +---
 .../hadoop/hdds/scm/TestHddsServerUtils.java       |  49 --------
 .../apache/hadoop/ozone/web/utils/OzoneUtils.java  |  10 --
 .../org/apache/hadoop/ozone/recon/ReconUtils.java  |   2 +-
 10 files changed, 164 insertions(+), 120 deletions(-)

commit 4394ee3f487279b5c3b477f0c36fdd2ecc4a2dc7
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Apr 12 14:45:57 2019 +0530

    HDDS-1416. MiniOzoneCluster should set custom value for hdds.datanode.replication.work.dir.
    Contributed by chencan.

 .../src/test/java/org/apache/hadoop/ozone/MiniOzoneClusterImpl.java  | 5 +++++
 1 file changed, 5 insertions(+)

commit 311448ce0d1d30fdd17a2bd074410e4dfff6fa9a
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Apr 12 14:12:10 2019 +0530

    HDDS-1404. Fix typos in HDDS. Contributed by bianqi.

 hadoop-hdds/common/src/main/proto/DatanodeContainerProtocol.proto     | 4 ++--
 .../common/src/main/proto/StorageContainerLocationProtocol.proto      | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 2c34485097db77adaee663cae1d9ee1036ee13c1
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu Apr 11 15:14:28 2019 -0700

    HDDS-1410. TestSCMNodeMetrics is flaky. Contributed by Siddharth Wagle.

 .../java/org/apache/hadoop/ozone/scm/node/TestSCMNodeMetrics.java   | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 0a872693d339db86a430a1596497232cc957700d
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Apr 11 22:13:41 2019 +0530

    HDDS-1373. KeyOutputStream, close after write request fails after retries, runs into IllegalArgumentException. Contributed by Shashikant Banerjee

 .../scm/container/common/helpers/ExcludeList.java  |   6 +
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 198 ++++----
 .../ozone/client/rpc/TestBlockOutputStream.java    |  16 +-
 .../rpc/TestBlockOutputStreamWithFailures.java     |  27 +-
 .../rpc/TestOzoneClientRetriesOnException.java     |  46 +-
 .../ozone/client/rpc/TestWatchForCommit.java       | 512 +++++++++++++++++++++
 .../ozone/container/ContainerTestHelper.java       |   4 +-
 7 files changed, 695 insertions(+), 114 deletions(-)

commit 7901da725a52a86306de90d247aa3b23b7fbfd3d
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Apr 11 19:31:26 2019 +0530

    HDDS-1348. Refactor BlockOutpuStream Class. Contributed by Shashikant Banerjee.

 .../hadoop/hdds/scm/storage/BlockOutputStream.java | 135 ++--------
 .../hadoop/hdds/scm/storage/CommitWatcher.java     | 237 +++++++++++++++++
 .../hadoop/ozone/client/rpc/TestCommitWatcher.java | 296 +++++++++++++++++++++
 3 files changed, 558 insertions(+), 110 deletions(-)

commit ec203ef417f59c4cf38267e5d51d705aaa2acf1e
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Apr 11 05:25:37 2019 +0530

    HDDS-1417. After successfully importing a container, datanode should delete the container tar.gz file from working directory. (#721)

 .../ozone/container/replication/DownloadAndImportReplicator.java   | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit cd4f1babb33f44856ea2fadca937da24b69d11d7
Author: Arpit Agarwal <arp7@users.noreply.github.com>
Date:   Wed Apr 10 12:44:01 2019 -0700

    HDDS-1418. Move bang line to the start of the start-chaos.sh script. Contributed by Arpit Agarwal. (#720)
    
    Change-Id: I4fcf39d61a7d4c4ca79cb56a6958db0f691fe971

 hadoop-ozone/integration-test/src/test/bin/start-chaos.sh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 290d252e1f699c7c308a5660557026d6f7eeb992
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Apr 10 10:25:28 2019 -0700

    HDDS-1370. Command Execution in Datanode fails because of NPE (#715)

 .../common/statemachine/StateContext.java          | 30 +++++++++++++---------
 .../states/datanode/RunningDatanodeState.java      | 11 +++++++-
 2 files changed, 28 insertions(+), 13 deletions(-)

commit 8f1b68a18ef1eeb2ebd80a4b8bcfedcc78614fec
Author: Márton Elek <elek@apache.org>
Date:   Fri Apr 5 11:18:24 2019 +0200

    HDDS-1397. Avoid the usage of signal handlers in datanodes of the MiniOzoneClusters.
    
    Closes #701

 .../main/java/org/apache/hadoop/ozone/HddsDatanodeService.java    | 8 +++-----
 1 file changed, 3 insertions(+), 5 deletions(-)

commit 53171026b2ce686929c4868b5826a419f258f8bd
Author: Mukul Kumar Singh <mksingh.apache@gmail.com>
Date:   Wed Apr 10 18:00:10 2019 +0530

    HDDS-1401. Static ContainerCache in Datanodes can result in overwrite of container db. Contributed by Mukul Kumar Singh. (#708)

 .../container/common/utils/ContainerCache.java     | 36 ++++++++++++----------
 .../container/keyvalue/helpers/BlockUtils.java     |  2 +-
 .../container/keyvalue/impl/BlockManagerImpl.java  |  2 +-
 .../container/keyvalue/TestKeyValueContainer.java  |  2 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  4 +--
 .../common/impl/TestContainerPersistence.java      |  2 +-
 .../TestCloseContainerByPipeline.java              | 17 ++++++++++
 7 files changed, 42 insertions(+), 23 deletions(-)

commit 38dc1dcf37069f8114fa01ba4a810ad679a91ca7
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Apr 9 14:57:32 2019 -0700

    HDDS-1393. Convert all OM Bucket related operations to HA model. (#704)

 .../ozone/om/protocol/OzoneManagerHAProtocol.java  |  52 +++++++++
 .../src/main/proto/OzoneManagerProtocol.proto      |   6 +-
 .../org/apache/hadoop/ozone/om/TestOmMetrics.java  |   6 +-
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java |  69 ++++++++++--
 .../org/apache/hadoop/ozone/om/BucketManager.java  |  29 ++++-
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  92 ++++++++++++++--
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  65 ++++++++++-
 .../hadoop/ozone/om/S3BucketManagerImpl.java       |  15 ++-
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |   3 +
 .../OzoneManagerHARequestHandlerImpl.java          | 121 +++++++++++++++++++++
 10 files changed, 433 insertions(+), 25 deletions(-)

commit 4c404a45d6f15939188b8715beae309286f4d65c
Author: Mukul Kumar Singh <mksingh1987@gmail.com>
Date:   Wed Apr 10 01:38:25 2019 +0530

    HDDS-1388. Add a shell script to run MiniOzoneChaosCluster using mvn exec. Contributed by Mukul Kumar Singh. (#709)

 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  2 ++
 .../integration-test/src/test/bin/start-chaos.sh   | 35 ++++++++++++++++++++++
 .../apache/hadoop/ozone/MiniOzoneChaosCluster.java |  9 ++++--
 .../hadoop/ozone/MiniOzoneLoadGenerator.java       | 15 +++++++---
 .../hadoop/ozone/TestMiniChaosOzoneCluster.java    |  6 ++--
 5 files changed, 58 insertions(+), 9 deletions(-)

commit 5244733289465249cb40884a717ab2301ccf94de
Author: Lokesh Jain <lokeshj1703@gmail.com>
Date:   Tue Apr 9 23:05:54 2019 +0530

    HDDS-1405. ITestOzoneContractCreate is failing. (#712)

 .../java/org/apache/hadoop/fs/ozone/BasicOzoneClientAdapterImpl.java    | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f337d7a2bbf7f02961ab2e4722d4e118a01cb346
Author: Márton Elek <elek@apache.org>
Date:   Tue Apr 9 17:35:04 2019 +0200

    HDDS-1383. Create project skeleton with CLI interface for In-place upgrade.
    
    Closes #694

 hadoop-ozone/common/src/main/bin/ozone             |  5 ++
 hadoop-ozone/dist/pom.xml                          | 11 +++++
 hadoop-ozone/pom.xml                               |  6 +++
 hadoop-ozone/upgrade/pom.xml                       | 54 ++++++++++++++++++++++
 .../org/apache/hadoop/ozone/upgrade/Balance.java   | 38 +++++++++++++++
 .../org/apache/hadoop/ozone/upgrade/Execute.java   | 37 +++++++++++++++
 .../hadoop/ozone/upgrade/InPlaceUpgrade.java       | 45 ++++++++++++++++++
 .../java/org/apache/hadoop/ozone/upgrade/Plan.java | 38 +++++++++++++++
 .../apache/hadoop/ozone/upgrade/package-info.java  | 23 +++++++++
 9 files changed, 257 insertions(+)

commit fcb0fb2f02b486e53a3d26f514d7d2ce5f09a969
Author: Nanda kumar <nandakumar131@gmail.com>
Date:   Tue Apr 9 15:10:07 2019 +0530

    HDDS-1372. getContainerWithPipeline for a standalone pipeline fails with ConcurrentModificationException. (#682)

 .../scm/container/states/ContainerStateMap.java    |  3 +-
 .../scm/container/TestSCMContainerManager.java     | 44 ++++++++++++++++++++++
 2 files changed, 45 insertions(+), 2 deletions(-)

commit 0f47f26137d0cb2df69f154bea72a2de3d6769a7
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Apr 9 10:27:58 2019 +0530

    HDDS-372. There are three buffer copies in BlockOutputStream. Contributed by Shashikant Banerjee.

 .../hadoop/hdds/scm/storage/BlockOutputStream.java |  7 ++-
 .../apache/hadoop/hdds/scm/ByteStringHelper.java   | 69 ++++++++++++++++++++++
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  2 +-
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  5 ++
 .../org/apache/hadoop/ozone/common/Checksum.java   | 38 ++++++++----
 .../common/src/main/resources/ozone-default.xml    |  8 +++
 .../ozone/container/keyvalue/KeyValueHandler.java  |  5 ++
 .../container/keyvalue/helpers/ChunkUtils.java     |  5 +-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  5 ++
 .../web/storage/DistributedStorageHandler.java     |  6 ++
 .../hadoop/ozone/freon/TestDataValidate.java       | 14 ++---
 .../TestDataValidateWithSafeByteOperations.java    | 52 ++++++++++++++++
 .../TestDataValidateWithUnsafeByteOperations.java  | 52 ++++++++++++++++
 13 files changed, 242 insertions(+), 26 deletions(-)

commit fe28776f647c6fc4846653cba6687e82d3c6d4ca
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Mon Apr 8 09:36:06 2019 -0700

    HDDS-1340. Add List Containers API for Recon (#648)

 .../ozone/recon/api/ContainerKeyService.java       | 23 +++++++++-
 .../ozone/recon/api/types/ContainerMetadata.java   | 33 ++++-----------
 .../recon/spi/ContainerDBServiceProvider.java      |  9 ++++
 .../spi/impl/ContainerDBServiceProviderImpl.java   | 30 ++++++++++++-
 .../recon/WEB-INF}/web.xml                         |  0
 .../ozone/recon/api/TestContainerKeyService.java   | 49 ++++++++++++++++++++--
 6 files changed, 112 insertions(+), 32 deletions(-)

commit 7da2829fede7e41fbd5eb3bdb50b31181dab62ab
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Apr 5 14:14:42 2019 -0700

    HDDS-1329. Update documentation for Ozone-0.4.0 release.
    Contributed By Ajay Kumar.

 hadoop-hdds/docs/content/CommandShell.md           |  1 +
 .../docs/content/OzoneSecurityArchitecture.md      | 91 ++++++++++++++++++++++
 hadoop-hdds/docs/content/SetupSecureOzone.md       | 84 ++++++++++++++++++++
 3 files changed, 176 insertions(+)

commit 620d2239f5b82e10cd9ef057205f729000c877ba
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Fri Apr 5 22:21:58 2019 +0200

    HDDS-1332. Attempt to fix flaky test testStartStopDatanodeStateMachine (#697)

 .../container/common/statemachine/SCMConnectionManager.java | 13 ++++++++-----
 .../ozone/container/common/TestDatanodeStateMachine.java    |  8 +++-----
 2 files changed, 11 insertions(+), 10 deletions(-)

commit 8975a3b591f7edb9eb7b0e91a032685a3538adf8
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Fri Apr 5 12:36:00 2019 -0700

    HDDS-1390. Fix OzoneS3 Gateway server due to exclusion of hk2-api. (#698)

 hadoop-ozone/s3gateway/pom.xml | 15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)

commit f7fbbf47efeaaa2e670b2ab69e45dfcc15779dd7
Author: Nanda kumar <nandakumar131@gmail.com>
Date:   Fri Apr 5 23:12:00 2019 +0530

    HDDS-1389. Fix testSCMChillModeRestrictedOp. (#696)

 .../hdds/scm/chillmode/ChillModeHandler.java       | 27 ++++++++++++++--------
 1 file changed, 18 insertions(+), 9 deletions(-)

commit b81de02993ab0c40042e49cd4023d827ee2b21a3
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Apr 5 17:52:28 2019 +0200

    HDDS-1385. Make the ozonesecure-mr environment definition version independent. Contributed by Elek, Marton. (#695)
    
    
    (cherry picked from commit d758c978735fc9c0adb232527b2c3c0bdce1bafa)

 hadoop-ozone/dist/src/main/compose/ozonesecure-mr/README.md         | 6 +++---
 .../dist/src/main/compose/ozonesecure-mr/docker-compose.yaml        | 6 +++---
 hadoop-ozone/dist/src/main/compose/ozonesecure-mr/docker-config     | 2 +-
 3 files changed, 7 insertions(+), 7 deletions(-)

commit 4c2e15cc4c5cc3dc013a49d30e0acf460fb1449f
Author: Ajay Kumar <ajay@apache.org>
Date:   Fri Apr 5 09:05:59 2019 -0700

    HDDS-1333. OzoneFileSystem can't work with spark/hadoop2.7 because incompatible security classes. Contributed by Elek, Marton. (#653)
    
    (cherry picked from commit 7ec6a31eb314b9ecc1c2affbcc7d63c07bd33523)

 hadoop-hdds/docs/content/SparkOzoneFSK8S.md        |   6 +-
 .../ozone/om/ha/OMFailoverProxyProvider.java       |   2 +-
 .../dist/dev-support/bin/dist-layout-stitching     |   3 +-
 hadoop-ozone/dist/pom.xml                          |  22 +
 .../src/main/compose/ozonefs/docker-compose.yaml   |  40 +-
 .../dist/src/main/compose/ozonefs/hadoopo3fs.robot |  56 ++
 .../src/main/compose/ozonesecure/docker-config     |   2 +
 .../dist/src/main/smoketest/commonlib.robot        |   6 +
 .../dist/src/main/smoketest/createbucketenv.robot  |  43 +
 .../dist/src/main/smoketest/env-compose.robot      |  32 +
 .../fs/ozone/BasicOzoneClientAdapterImpl.java      | 361 +++++++++
 .../hadoop/fs/ozone/BasicOzoneFileSystem.java      | 890 +++++++++++++++++++++
 .../hadoop/fs/ozone/FilteredClassLoader.java       |   1 +
 .../apache/hadoop/fs/ozone/OzoneClientAdapter.java |   2 +-
 .../hadoop/fs/ozone/OzoneClientAdapterFactory.java |  30 +-
 .../hadoop/fs/ozone/OzoneClientAdapterImpl.java    | 356 +--------
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    | 815 +------------------
 .../hadoop/fs/ozone/TestOzoneFileInterfaces.java   |   2 +-
 .../services/org.apache.hadoop.fs.FileSystem       |   0
 19 files changed, 1517 insertions(+), 1152 deletions(-)

commit c885954eaff741a62bb9149428c3aa36d9297427
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Apr 4 21:09:50 2019 -0700

    HDDS-1379. Convert all OM Volume related operations to HA model. (#689)

 .../ozone/om/helpers/OmDeleteVolumeResponse.java   |  49 ++++
 .../hadoop/ozone/om/helpers/OmVolumeArgs.java      |  19 +-
 .../om/helpers/OmVolumeOwnerChangeResponse.java    |  56 ++++
 .../ozone/om/protocol/OzoneManagerHAProtocol.java  |  78 ++++++
 .../src/main/proto/OzoneManagerProtocol.proto      |   7 +
 .../org/apache/hadoop/ozone/om/TestOmMetrics.java  |   6 +-
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java |  29 +++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  77 ++++++
 .../hadoop/ozone/om/S3BucketManagerImpl.java       |  11 +-
 .../org/apache/hadoop/ozone/om/VolumeManager.java  |  52 +++-
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  | 289 ++++++++++++++-------
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |  65 +++--
 .../protocolPB/OzoneManagerHARequestHandler.java   |  48 ++++
 .../OzoneManagerHARequestHandlerImpl.java          | 247 ++++++++++++++++++
 .../protocolPB/OzoneManagerRequestHandler.java     |   6 +-
 .../hadoop/ozone/protocolPB/RequestHandler.java    |   2 +-
 .../om/ratis/TestOzoneManagerStateMachine.java     |   8 +-
 17 files changed, 927 insertions(+), 122 deletions(-)

commit cb529a5a95a4a3d26b4486238c0c3dbf3bb17528
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Apr 4 17:38:02 2019 -0700

    HDDS-1189. Build failing due to rat check failure introduced by HDDS-1189. Contributed by Siddharth Wagle.

 hadoop-ozone/ozone-recon-codegen/pom.xml | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 2b05dcb4e2cb9d673bc901612902c9ee66a2fe2d
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Thu Apr 4 06:48:32 2019 -0700

    HDDS-1353 : Metrics scm_pipeline_metrics_num_pipeline_creation_failed keeps increasing because of BackgroundPipelineCreator. (#681)

 .../pipeline/InsufficientDatanodesException.java   | 36 +++++++++++++
 .../hdds/scm/pipeline/RatisPipelineProvider.java   |  2 +-
 .../hdds/scm/pipeline/SCMPipelineManager.java      |  2 +
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  | 61 ++++++++++++++++++++++
 4 files changed, 100 insertions(+), 1 deletion(-)

commit 66b9dbb07856a588147ee2fd0439e6e13a276844
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Apr 4 16:29:38 2019 +0530

    HDDS-1349. Remove watchClient from XceiverClientRatis. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 28 ++--------------------
 1 file changed, 2 insertions(+), 26 deletions(-)

commit 01a80089d6a93f41265ea4f62a7669fdd0568e0c
Author: Nanda kumar <nandakumar131@gmail.com>
Date:   Thu Apr 4 16:32:59 2019 +0530

    HDDS-1207. Refactor Container Report Processing logic and plugin new Replication Manager. (#662)

 .../hadoop/hdds/scm/container/ContainerInfo.java   |   7 -
 .../hdds/scm/chillmode/ChillModeHandler.java       |  36 +-
 .../container/AbstractContainerReportHandler.java  | 236 +++++++++
 .../hdds/scm/container/ContainerReportHandler.java | 234 ++++-----
 .../hdds/scm/container/ContainerStateManager.java  |  19 +-
 .../IncrementalContainerReportHandler.java         |  47 +-
 .../hdds/scm/container/ReplicationManager.java     |   9 +
 .../hdds/scm/container/ReportHandlerHelper.java    | 365 -------------
 .../hdds/scm/container/SCMContainerManager.java    |  23 +-
 .../scm/container/states/ContainerStateMap.java    |   8 +-
 .../hadoop/hdds/scm/server/SCMConfigurator.java    |   2 +-
 .../hdds/scm/server/StorageContainerManager.java   |  37 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |   1 +
 .../hdds/scm/chillmode/TestChillModeHandler.java   |  28 +-
 .../scm/container/TestContainerReportHandler.java  | 585 ++++++++-------------
 .../scm/container/TestContainerReportHelper.java   |  73 ---
 .../TestIncrementalContainerReportHandler.java     | 158 +++---
 .../replication/TestReplicationActivityStatus.java |  85 ---
 .../scm/server/TestSCMClientProtocolServer.java    |   8 +-
 19 files changed, 723 insertions(+), 1238 deletions(-)

commit ec68772b4bf841d621ec8b1d949208dea9e74eef
Author: Yiqun Lin <yqlin@apache.org>
Date:   Thu Apr 4 17:33:37 2019 +0800

    HDDS-1189. Recon Aggregate DB schema and ORM. Contributed by Siddharth Wagle.

 .../common/src/main/resources/ozone-default.xml    |  95 ++++++++++++
 hadoop-hdds/tools/pom.xml                          |   3 +-
 hadoop-ozone/ozone-recon-codegen/pom.xml           |  58 +++++++
 .../ozone/recon/codegen/JooqCodeGenerator.java     | 170 +++++++++++++++++++++
 .../recon/codegen/ReconSchemaGenerationModule.java |  39 +++++
 .../ozone/recon/codegen/TableNamingStrategy.java   |  48 ++++++
 .../hadoop/ozone/recon/codegen/package-info.java   |  22 +++
 .../ozone/recon/schema/ReconSchemaDefinition.java  |  34 +++++
 .../recon/schema/UtilizationSchemaDefinition.java  |  69 +++++++++
 .../hadoop/ozone/recon/schema/package-info.java    |  22 +++
 .../dev-support/findbugsExcludeFile.xml            |  28 ++++
 hadoop-ozone/ozone-recon/pom.xml                   | 147 ++++++++++++++----
 .../hadoop/ozone/recon/ReconControllerModule.java  | 102 ++++++++++++-
 .../hadoop/ozone/recon/ReconServerConfigKeys.java  |  25 +++
 .../recon/persistence/DataSourceConfiguration.java |  86 +++++++++++
 .../persistence/DefaultDataSourceProvider.java     |  74 +++++++++
 .../recon/persistence/JooqPersistenceModule.java   | 111 ++++++++++++++
 .../TransactionalMethodInterceptor.java            |  76 +++++++++
 .../ozone/recon/persistence/package-info.java      |  22 +++
 .../recon/persistence/AbstractSqlDatabaseTest.java | 146 ++++++++++++++++++
 .../TestUtilizationSchemaDefinition.java           | 160 +++++++++++++++++++
 .../ozone/recon/persistence/package-info.java      |  22 +++
 hadoop-ozone/pom.xml                               |   1 +
 23 files changed, 1524 insertions(+), 36 deletions(-)

commit 27c4875b8292b11b4c8440976ed7d20ddd60fc5b
Author: Hanisha Koneru <koneru.hanisha@gmail.com>
Date:   Wed Apr 3 22:50:28 2019 -0700

    HDDS-1339. Implement ratis snapshots on OM (#651)

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   3 +
 .../org/apache/hadoop/ozone/common/Storage.java    |   2 +-
 .../java/org/apache/hadoop/utils/db/DBStore.java   |   6 ++
 .../java/org/apache/hadoop/utils/db/RDBStore.java  |  11 ++
 .../common/src/main/resources/ozone-default.xml    |  13 ++-
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |   6 ++
 .../ozone/om/protocol/OzoneManagerHAProtocol.java  |  10 +-
 .../hadoop/ozone/MiniOzoneHAClusterImpl.java       |   4 +
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java |  90 +++++++++++++++-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  45 +++++++-
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |  28 +++--
 .../ozone/om/ratis/OzoneManagerStateMachine.java   | 115 +++++++++++++--------
 12 files changed, 265 insertions(+), 68 deletions(-)

commit 229b615ac33a97ceee99c1fe08423a14ce495793
Author: Hanisha Koneru <koneru.hanisha@gmail.com>
Date:   Wed Apr 3 16:02:19 2019 -0700

    HDDS-1324. TestOzoneManagerHA tests are flaky (#676)

 .../java/org/apache/hadoop/ozone/om/TestOzoneManagerHA.java | 13 ++++++-------
 1 file changed, 6 insertions(+), 7 deletions(-)

commit 569c968269839f34ec8724ceaf852c9c605198ea
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Apr 3 15:02:00 2019 -0700

    HDDS-1211. Test SCMChillMode failing randomly in Jenkins run (#543)

 .../apache/hadoop/ozone/om/TestScmChillMode.java   | 111 ++++++++-------------
 1 file changed, 44 insertions(+), 67 deletions(-)

commit eaac0bb899d13405992691fad256ccf5c31724f0
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Wed Apr 3 14:52:06 2019 -0700

    HDDS-1358 : Recon Server REST API not working as expected. (#668)

 hadoop-ozone/ozone-recon/pom.xml                   |  69 ++++++++++-
 ....java => ReconGuiceServletContextListener.java} |  21 +++-
 .../hadoop/ozone/recon/ReconRestServletModule.java | 134 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/recon/ReconServer.java |  12 +-
 .../ozone/recon/api/ContainerKeyService.java       |  50 ++++++--
 .../hadoop/ozone/recon/api/types/KeyMetadata.java  |  35 ++++++
 .../recon/recovery/ReconOmMetadataManagerImpl.java |   2 +-
 .../spi/impl/ContainerDBServiceProviderImpl.java   |   2 +-
 .../ozone/recon/tasks/ContainerKeyMapperTask.java  |   9 +-
 .../main/resources/webapps.recon.WEB-INF/web.xml   |  25 ++--
 .../ozone/recon/api/TestContainerKeyService.java   |  22 +++-
 hadoop-ozone/s3gateway/pom.xml                     |  16 +++
 12 files changed, 356 insertions(+), 41 deletions(-)

commit de7512b3aa75f8fe526ef617d0ae9b21aade1541
Author: avijayanhwx <14299376+avijayanhwx@users.noreply.github.com>
Date:   Wed Apr 3 13:20:51 2019 -0700

    HDDS-1330 : Add a docker compose for Ozone deployment with Recon. (#669)

 .../dist/src/main/compose/ozone-recon/.env         | 17 +++++
 .../main/compose/ozone-recon/docker-compose.yaml   | 66 ++++++++++++++++++
 .../src/main/compose/ozone-recon/docker-config     | 80 ++++++++++++++++++++++
 3 files changed, 163 insertions(+)

commit f4bab971df505f4a65e56a9c3678ff90fb1bcd71
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Apr 3 11:53:51 2019 -0700

    HDDS-1377. OM failed to start with incorrect hostname set as ip address in CSR. (#683)

 .../src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java     | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 96558818761c19be030c373b7c7446d0ad9d6f20
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Apr 3 22:19:10 2019 +0530

    HDDS-1164. Add New blockade Tests to test Replica Manager. Contributed by Nilotpal Nandi.

 .../src/main/blockade/blockadeUtils/blockade.py    |   5 +-
 .../main/blockade/clusterUtils/cluster_utils.py    |  23 +-
 .../main/blockade/test_blockade_client_failure.py  |   9 +-
 .../blockade/test_blockade_datanode_isolation.py   |   5 +-
 .../main/blockade/test_blockade_mixed_failure.py   | 152 +++++++-----
 ...t_blockade_mixed_failure_three_nodes_isolate.py | 255 ++++++++++++++-------
 .../test_blockade_mixed_failure_two_nodes.py       | 188 +++++++++------
 .../main/blockade/test_blockade_scm_isolation.py   |   5 +-
 8 files changed, 410 insertions(+), 232 deletions(-)

commit 292c9d26e87aadf635a307e0831776ce87f20053
Author: Yiqun Lin <yqlin@apache.org>
Date:   Wed Apr 3 14:01:30 2019 +0800

    HDDS-1365. Fix error handling in KeyValueContainerCheck. Contributed by Supratim Deka.

 .../container/keyvalue/KeyValueContainerCheck.java | 285 ++++++---------------
 .../keyvalue/TestKeyValueContainerCheck.java       |  11 +-
 2 files changed, 81 insertions(+), 215 deletions(-)

commit 426d3d1f2c66af4bd9c690dffe7a0089cd2b3611
Author: Ajay Kumar <ajay@apache.org>
Date:   Mon Apr 1 17:06:42 2019 -0700

    HDDS-1355. Only FQDN is accepted for OM rpc address in secure environment. Contributed by Ajay Kumar.
    
    Closes #677

 .../apache/hadoop/ozone/om/TestSecureOzoneManager.java  | 17 +++++++++++++++++
 .../java/org/apache/hadoop/ozone/om/OzoneManager.java   | 10 +++++++---
 2 files changed, 24 insertions(+), 3 deletions(-)

commit ab4c4c0e0a25f69481b70ce043aebf5d5e31c8d7
Author: Kitti Nanasi <knanasi@cloudera.com>
Date:   Tue Apr 2 13:47:18 2019 +0200

    HDDS-1153. Make tracing instrumentation configurable
    
    Closes #673

 .../main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  4 ++++
 .../java/org/apache/hadoop/hdds/tracing/TracingUtil.java     | 12 +++++++++++-
 hadoop-hdds/common/src/main/resources/ozone-default.xml      |  8 ++++++++
 .../src/main/java/org/apache/hadoop/hdds/scm/cli/SCMCLI.java |  2 +-
 .../java/org/apache/hadoop/ozone/client/ObjectStore.java     |  2 +-
 .../java/org/apache/hadoop/ozone/client/rpc/RpcClient.java   |  3 ++-
 .../OzoneManagerProtocolClientSideTranslatorPB.java          |  2 +-
 .../hadoop/hdfs/server/datanode/ObjectStoreHandler.java      |  8 ++++----
 .../main/java/org/apache/hadoop/ozone/om/OzoneManager.java   |  5 +++--
 9 files changed, 35 insertions(+), 11 deletions(-)

commit fe282668e07ebda4cc860ab57fc32f204ebde2a1
Author: Yiqun Lin <yqlin@apache.org>
Date:   Tue Apr 2 16:27:11 2019 +0800

    HDDS-1337. Handle GroupMismatchException in OzoneClient. Contributed by Shashikant Banerjee.

 .../hadoop/hdds/scm/storage/BlockOutputStream.java |  43 +++--
 .../transport/server/ratis/XceiverServerRatis.java |  11 ++
 hadoop-hdds/pom.xml                                |   2 +-
 .../hadoop/ozone/client/OzoneClientUtils.java      |   2 +
 .../hadoop/ozone/client/io/KeyOutputStream.java    |  15 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   2 +
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   3 +-
 .../rpc/TestBlockOutputStreamWithFailures.java     |  11 +-
 .../client/rpc/TestContainerStateMachine.java      |   8 +-
 .../rpc/TestContainerStateMachineFailures.java     |   8 +-
 .../rpc/TestOzoneClientRetriesOnException.java     | 213 +++++++++++++++++++++
 .../ozone/container/ContainerTestHelper.java       |  82 +++++++-
 hadoop-ozone/pom.xml                               |   2 +-
 13 files changed, 359 insertions(+), 43 deletions(-)

commit 760af623cfa2e1410cc1774b8ac0a24f49bcc1cb
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Mon Apr 1 09:59:32 2019 -0700

    HDDS-1260. Create Recon Server lifecyle integration with Ozone. (#643)

 hadoop-ozone/common/src/main/bin/ozone             |  6 +++
 hadoop-ozone/dist/pom.xml                          |  4 ++
 hadoop-ozone/ozone-recon/pom.xml                   | 29 +++++++++++
 .../org/apache/hadoop/ozone/recon/ReconServer.java |  6 ---
 .../src/main/resources/webapps/recon/index.html    | 59 ++++++++++++++++++++++
 5 files changed, 98 insertions(+), 6 deletions(-)

commit 2911f89153548f40760df34090ecdf0088f4c827
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Mon Apr 1 17:52:05 2019 +0200

    HDDS-1322. Hugo errors when building Ozone (#671)

 hadoop-hdds/docs/pom.xml | 2 --
 1 file changed, 2 deletions(-)

commit b5569499a2295cae848a84c6c4a966bcbfa2b00c
Author: Ajay Kumar <ajay@apache.org>
Date:   Mon Apr 1 17:04:28 2019 +0200

    HDDS-1255. Refactor ozone acceptance test to allow run in secure mode

 .../src/main/compose/ozonesecure/docker-config     |   1 +
 .../dist/src/main/smoketest/__init__.robot         |  18 +++
 .../main/smoketest/auditparser/auditparser.robot   |  23 ++-
 .../dist/src/main/smoketest/commonlib.robot        |  19 ++-
 .../dist/src/main/smoketest/s3/commonawslib.robot  |  48 ++++---
 .../main/smoketest/security/ozone-secure-fs.robot  |  49 +++++++
 .../main/smoketest/security/ozone-secure-s3.robot  |  44 ++++++
 .../src/main/smoketest/security/ozone-secure.robot | 154 ---------------------
 hadoop-ozone/dist/src/main/smoketest/test.sh       |  10 +-
 9 files changed, 183 insertions(+), 183 deletions(-)

commit 11c1982d97f1fd48dbccf02843a46887c3a51b50
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Mon Apr 1 19:02:56 2019 +0530

    HDDS-1067 . freon run on client gets hung when two of the datanodes are down in 3 datanode cluster. Contributed by Nilotpal Nandi.

 hadoop-ozone/dist/src/main/blockade/test_blockade_client_failure.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6cea9eb48a377f7ee06829e4c7d193138105ed29
Author: Yiqun Lin <yqlin@apache.org>
Date:   Mon Apr 1 19:26:44 2019 +0800

    HDDS-1360. Invalid metric type due to fully qualified class name. Contributed by Doroszlai, Attila.

 .../java/org/apache/hadoop/hdds/scm/server/SCMContainerMetrics.java    | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 26eafaa94de8148924ea205c22d6cb523a657753
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Mon Apr 1 16:09:58 2019 +0530

    HDDS-1312. Add more unit tests to verify BlockOutputStream functionalities. Contributed by Shashikant Banerjee.

 .../hadoop/ozone/client/io/KeyOutputStream.java    |  72 ++-
 .../rpc/TestBlockOutputStreamWithFailures.java     | 696 ++++++++++++++++++++-
 .../ozone/container/ContainerTestHelper.java       |   9 +
 3 files changed, 750 insertions(+), 27 deletions(-)

commit c29b4fbecac4d71eeab998f1b945e5ff8b189f21
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Mon Apr 1 15:50:03 2019 +0530

    HDDS-1295. Add MiniOzoneChaosCluster to mimic long running workload in a unit test environment. Contributed by Mukul Kumar Singh.

 .../apache/hadoop/ozone/MiniOzoneChaosCluster.java | 224 +++++++++++++++++++++
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   2 +-
 .../hadoop/ozone/MiniOzoneLoadGenerator.java       | 160 +++++++++++++++
 .../hadoop/ozone/TestMiniChaosOzoneCluster.java    | 116 +++++++++++
 4 files changed, 501 insertions(+), 1 deletion(-)

commit b18caf541c464eda31015b616c85634c4491b1fe
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Mar 30 10:54:45 2019 -0700

    HDDS-1288. SCM - Failing test on trunk that waits for HB report processing. Contributed by Siddharth Wagle.

 .../java/org/apache/hadoop/ozone/scm/node/TestSCMNodeMetrics.java    | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit ebcc81ab7a24a1f35a49c8bcca98bd7b81f88661
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Sat Mar 30 18:13:29 2019 +0100

    HDDS-1357. ozone s3 shell command has confusing subcommands (#663)

 hadoop-ozone/common/src/main/bin/ozone             |  2 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |  3 +-
 .../hadoop/ozone/web/ozShell/OzoneShell.java       | 64 ++++++++++++++++++++++
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java | 37 +------------
 4 files changed, 68 insertions(+), 38 deletions(-)

commit 6eeb4b82b4fdb95c32b5c39cf233791c5a214d3d
Author: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>
Date:   Fri Mar 29 17:01:56 2019 +0100

    [HDDS-1351] NoClassDefFoundError when running ozone genconf (). Contributed by Doroszlai Attila.
    
    This closes #659.

 hadoop-ozone/tools/pom.xml | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit a9efe3d11d2de0bd746f7fbc9fbad054e3dfea07
Author: Lokesh Jain <ljain@apache.org>
Date:   Fri Mar 29 19:27:29 2019 +0530

    HDDS-1300. Optimize non-recursive ozone filesystem apis. Contributed by Lokesh Jain.

 .../apache/hadoop/ozone/client/OzoneBucket.java    |  59 +++
 .../ozone/client/protocol/ClientProtocol.java      |  67 +++-
 .../hadoop/ozone/client/rest/RestClient.java       |  22 ++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 144 ++++---
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |   3 +
 .../org/apache/hadoop/ozone/audit/OMAction.java    |   5 +-
 .../hadoop/ozone/om/exceptions/OMException.java    |   8 +-
 .../hadoop/ozone/om/helpers/OzoneFileStatus.java   |  26 +-
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  57 ++-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  87 +++-
 .../src/main/proto/OzoneManagerProtocol.proto      |  46 ++-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 436 ++++++++++++++++-----
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |  36 ++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 107 ++++-
 .../apache/hadoop/ozone/om/fs/OzoneManagerFS.java  |  13 +-
 .../protocolPB/OzoneManagerRequestHandler.java     |  71 +++-
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java | 189 ++++++++-
 .../apache/hadoop/fs/ozone/OzoneClientAdapter.java |   9 +-
 .../hadoop/fs/ozone/OzoneClientAdapterImpl.java    |  73 ++--
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |  75 +---
 .../hadoop/fs/ozone/TestOzoneFileInterfaces.java   |  13 +-
 21 files changed, 1232 insertions(+), 314 deletions(-)

commit e31152b6f854345a5a48cff7b18e8aafb06ce4c1
Author: Shweta Yakkali <shwetayakkali@cloudera.com>
Date:   Fri Mar 29 17:26:48 2019 +0530

    HDDS-1352. Remove unused call in TestStorageContainerManagerHttpServer.
    
    Signed-off-by: Nanda kumar <nanda@apache.org>

 .../apache/hadoop/hdds/scm/TestStorageContainerManagerHttpServer.java    | 1 -
 1 file changed, 1 deletion(-)

commit 699c3e2784b8f93ce2aa2a7cf029704a5b7de17c
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Mar 28 14:50:34 2019 -0700

    HDDS-1350. Fix checkstyle issue in TestDatanodeStateMachine. Contributed by Xiaoyu Yao. (#656)

 .../apache/hadoop/ozone/container/common/TestDatanodeStateMachine.java   | 1 -
 1 file changed, 1 deletion(-)

commit b959b5f447e8dd849429e36e61d9f06b9061838f
Author: nilotpalnandi <36982284+nilotpalnandi@users.noreply.github.com>
Date:   Fri Mar 29 00:52:44 2019 +0530

    HDDS-1309 . change logging from warn to debug in XceiverClient. Contributed by Nilotpal Nandi. (#638)

 .../src/main/java/org/apache/hadoop/hdds/scm/XceiverClientGrpc.java     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e87488491d8c0ee9ceda39ac1c96b3c63717c0ab
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Fri Mar 29 00:43:28 2019 +0530

    HDDS-1293. ExcludeList#getProtoBuf throws ArrayIndexOutOfBoundsException. Contributed by Shashikant Banerjee.

 .../hdds/scm/container/common/helpers/ExcludeList.java       | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit dbcb4326d2730dc967c92a1a3340767d0d68e956
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Mar 28 12:00:58 2019 -0700

    HDDS-1318. Fix MalformedTracerStateStringException on DN logs. Contributed by Xiaoyu Yao.
    
    This closes #641

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 23 ++++++++--
 .../apache/hadoop/hdds/tracing/StringCodec.java    |  9 +++-
 .../hadoop/hdds/tracing/TestStringCodec.java       | 52 ++++++++++++++++++++++
 .../apache/hadoop/hdds/tracing/package-info.java   | 21 +++++++++
 .../ozone/container/ContainerTestHelper.java       |  1 -
 .../ozone/container/TestContainerReplication.java  |  2 -
 .../container/metrics/TestContainerMetrics.java    |  1 -
 .../container/ozoneimpl/TestOzoneContainer.java    | 46 -------------------
 .../ozoneimpl/TestOzoneContainerWithTLS.java       |  1 -
 .../ozoneimpl/TestSecureOzoneContainer.java        |  1 -
 .../container/server/TestContainerServer.java      |  2 -
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 13 ++++++
 12 files changed, 114 insertions(+), 58 deletions(-)

commit 84a7e9411a40efad9ae3d1c451726ffe779b413d
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Mar 27 21:52:36 2019 -0700

    HDDS-1346. Remove hard-coded version ozone-0.5.0 from ReadMe of ozonesecure-mr docker-compose. Contributed by Xiaoyu Yao.
    
    This closes #652.

 hadoop-ozone/dist/src/main/compose/ozonesecure-mr/README.md | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

commit 41a5a949055a89f858a131f39721be4087d16cb8
Author: Arpit Agarwal <arp7@users.noreply.github.com>
Date:   Wed Mar 27 08:23:30 2019 -0700

    HDDS-1332. Add some logging for flaky test testStartStopDatanodeStateMachine. Contributed by Arpit Agarwal. (#649)

 .../container/common/statemachine/DatanodeStateMachine.java      | 1 -
 .../hadoop/ozone/container/common/TestDatanodeStateMachine.java  | 9 +++++++--
 2 files changed, 7 insertions(+), 3 deletions(-)

commit 058794df87c91cff7c223ebb474e78edd46459f3
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Tue Mar 26 22:07:22 2019 -0700

    HDDS-1264. Remove Parametrized in TestOzoneShell. (#614)

 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 28 ++--------------------
 1 file changed, 2 insertions(+), 26 deletions(-)

commit 14ff03622ee863063450125b57f9288b50ffa771
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Mar 26 21:48:01 2019 -0700

    HDDS-1262. In OM HA OpenKey call Should happen only leader OM. (#626)

 .../main/java/org/apache/hadoop/ozone/OmUtils.java |   2 +
 .../org/apache/hadoop/ozone/audit/OMAction.java    |   1 +
 .../hadoop/ozone/om/exceptions/OMException.java    |   2 +
 .../ozone/om/protocol/OzoneManagerHAProtocol.java  |  30 ++++
 .../src/main/proto/OzoneManagerProtocol.proto      |  16 ++
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 187 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/om/KeyManager.java     |  33 +++-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  90 +++++++---
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  74 +++++++-
 .../ozone/om/ratis/OzoneManagerRatisClient.java    |  25 +++
 .../ozone/om/ratis/OzoneManagerStateMachine.java   | 137 ++++++++++++++-
 .../protocolPB/OzoneManagerRequestHandler.java     |  54 ++++++
 .../om/ratis/TestOzoneManagerStateMachine.java     |   2 +-
 13 files changed, 624 insertions(+), 29 deletions(-)

commit 3c9ce0fbc277f43f3a4ae55635ecedf891ae7c08
Author: Shweta Yakkali <shweta@cloudera.com>
Date:   Tue Mar 26 19:01:49 2019 -0700

    HDDS-139. Output of createVolume can be improved. Contributed by Shweta.

 .../main/java/org/apache/hadoop/ozone/client/rpc/RpcClient.java   | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 050f4511addb50ee09dc6910260922c7b9f20444
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Tue Mar 26 08:59:59 2019 -0700

    HDDS-939. Add S3 access check to Ozone manager. Contributed by Ajay Kumar. (#634)

 .../hadoop/ozone/om/S3SecretManagerImpl.java       | 21 ++++++-------
 .../hadoop/ozone/om/helpers/S3SecretValue.java     | 11 ++-----
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 20 ++++++++++++
 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java   |  7 +++--
 .../hadoop/ozone/s3/endpoint/RootEndpoint.java     |  7 +++--
 .../apache/hadoop/ozone/s3/header/Credential.java  | 16 ++++++++--
 .../apache/hadoop/ozone/s3/util/OzoneS3Util.java   | 36 ++++++++++++++++++++++
 .../hadoop/ozone/s3/endpoint/TestRootList.java     |  4 ++-
 8 files changed, 94 insertions(+), 28 deletions(-)

commit 848caca3ac018bce149b81ed5cecdafc5beedc3b
Author: Sandeep Nemuri <nhsandeep6@gmail.com>
Date:   Tue Mar 26 15:44:18 2019 +0530

    HDDS-1310. In datanode once a container becomes unhealthy, datanode restart fails.
    
    Signed-off-by: Nanda kumar <nanda@apache.org>

 .../hadoop/ozone/container/keyvalue/KeyValueContainer.java  |  3 +++
 .../ozone/container/keyvalue/TestKeyValueContainer.java     | 13 +++++++++++++
 2 files changed, 16 insertions(+)

commit eb97a979850cef7f4f67dd7662f78304bab199cc
Author: Yiqun Lin <yqlin@apache.org>
Date:   Tue Mar 26 11:51:04 2019 +0800

    HDDS-1334. Fix asf license errors in newly added files by HDDS-1234. Contributed by Aravindan Vijayan.

 .../ozone/recon/AbstractOMMetadataManagerTest.java     | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

commit 51b3f86613f2ba8f1764a34b9edc22c67afe3fb3
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Mar 25 13:11:03 2019 -0700

    HDDS-1217. Refactor ChillMode rules and chillmode manager. (#558)

 .../hdds/scm/chillmode/ChillModeExitRule.java      |  88 +++++++++-
 .../hdds/scm/chillmode/ContainerChillModeRule.java |  70 ++++----
 .../hdds/scm/chillmode/DataNodeChillModeRule.java  |  60 +++----
 .../chillmode/HealthyPipelineChillModeRule.java    | 114 +++++++------
 .../chillmode/OneReplicaPipelineChillModeRule.java |  83 +++++----
 .../hdds/scm/chillmode/SCMChillModeManager.java    |  92 +++++++---
 .../scm/chillmode/TestSCMChillModeManager.java     | 190 ++++++++++++++++++++-
 7 files changed, 497 insertions(+), 200 deletions(-)

commit e04799c4c443701a7cfd026a6d278a22f059a072
Author: Yiqun Lin <yqlin@apache.org>
Date:   Mon Mar 25 22:52:02 2019 +0800

    HDDS-1234. Iterate the OM DB snapshot and populate the recon container DB. Contributed by Aravindan Vijayan.

 .../apache/hadoop/utils/LevelDBStoreIterator.java  |   4 -
 .../org/apache/hadoop/utils/MetaStoreIterator.java |   5 -
 .../apache/hadoop/utils/RocksDBStoreIterator.java  |   5 -
 .../java/org/apache/hadoop/utils/db/DBStore.java   |   6 +
 .../org/apache/hadoop/utils/db/IntegerCodec.java   |  38 ++++
 .../java/org/apache/hadoop/utils/db/RDBStore.java  |   4 +-
 .../org/apache/hadoop/utils/TestMetadataStore.java |  51 -----
 .../apache/hadoop/ozone/recon/ReconConstants.java  |   4 +
 .../hadoop/ozone/recon/ReconControllerModule.java  |   6 +-
 .../org/apache/hadoop/ozone/recon/ReconServer.java |  48 ++++-
 .../ozone/recon/api/ContainerKeyService.java       |  77 +++++++-
 .../ozone/recon/api/types/ContainerKeyPrefix.java  |  41 +++-
 .../hadoop/ozone/recon/api/types/KeyMetadata.java  |  74 ++++---
 .../recon/recovery/ReconOmMetadataManagerImpl.java |   4 +-
 .../recon/spi/ContainerDBServiceProvider.java      |  13 +-
 .../recon/spi/OzoneManagerServiceProvider.java     |   9 +-
 .../spi/impl/ContainerDBServiceProviderImpl.java   | 116 ++++++-----
 .../recon/spi/impl/ContainerKeyPrefixCodec.java    |  87 +++++++++
 .../spi/impl/OzoneManagerServiceProviderImpl.java  |  49 ++---
 .../spi/{ => impl}/ReconContainerDBProvider.java   |  62 +++---
 .../ozone/recon/tasks/ContainerKeyMapperTask.java  | 107 ++++++++++
 .../hadoop/ozone/recon/tasks/package-info.java     |  22 +++
 .../ozone/recon/AbstractOMMetadataManagerTest.java | 172 ++++++++++++++++
 .../apache/hadoop/ozone/recon/TestReconCodecs.java |  58 ++++++
 .../apache/hadoop/ozone/recon/TestReconUtils.java  |   4 +-
 .../ozone/recon/api/TestContainerKeyService.java   | 216 +++++++++++++++++++++
 .../hadoop/ozone/recon/api/package-info.java       |  21 ++
 .../impl/TestContainerDBServiceProviderImpl.java   | 141 ++++++++++----
 .../impl/TestOzoneManagerServiceProviderImpl.java  | 111 +----------
 .../spi/impl/TestReconContainerDBProvider.java     |  87 +++++++++
 .../recon/tasks/TestContainerKeyMapperTask.java    | 194 ++++++++++++++++++
 .../hadoop/ozone/recon/tasks/package-info.java     |  22 +++
 32 files changed, 1498 insertions(+), 360 deletions(-)

commit 985d75f784ceb8e3c341816bd36ca3fd72abf92d
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Mar 25 17:03:30 2019 +0530

    HDDS-1185. Optimize GetFileStatus in OzoneFileSystem by reducing the number of rpc call to OM. Contributed by Mukul Kumar Singh.

 .../apache/hadoop/ozone/client/OzoneBucket.java    |  6 +-
 .../ozone/client/protocol/ClientProtocol.java      | 12 +++
 .../hadoop/ozone/client/rest/RestClient.java       |  9 ++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  7 ++
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  1 +
 .../org/apache/hadoop/ozone/audit/OMAction.java    |  5 +-
 .../hadoop/ozone/om/exceptions/OMException.java    |  4 +-
 .../hadoop/ozone/om/helpers/OzoneFileStatus.java   | 97 ++++++++++++++++++++++
 .../ozone/om/protocol/OzoneManagerProtocol.java    | 12 +++
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 32 +++++++
 .../src/main/proto/OzoneManagerProtocol.proto      | 17 ++++
 .../org/apache/hadoop/ozone/om/KeyManager.java     |  3 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 58 +++++++++++++
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java | 25 ++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 23 +++++
 .../apache/hadoop/ozone/om/fs/OzoneManagerFS.java  | 31 +++++++
 .../apache/hadoop/ozone/om/fs/package-info.java    | 21 +++++
 .../protocolPB/OzoneManagerRequestHandler.java     | 17 ++++
 .../apache/hadoop/fs/ozone/OzoneClientAdapter.java | 10 +--
 .../hadoop/fs/ozone/OzoneClientAdapterImpl.java    | 49 ++++-------
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    | 64 +-------------
 .../hadoop/fs/ozone/TestOzoneFileInterfaces.java   | 46 +++++++++-
 22 files changed, 441 insertions(+), 108 deletions(-)

commit d822f777d2b52ac3a710a0fc91249d879805b686
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Mon Mar 25 15:41:20 2019 +0530

    HDDS-1317. KeyOutputStream#write throws ArrayIndexOutOfBoundsException when running RandomWrite MR examples. Contributed by Shashikant Banerjee.

 .../hadoop/hdds/scm/XceiverClientMetrics.java      |  20 +
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  90 +--
 .../hadoop/hdds/scm/storage/BlockOutputStream.java | 199 ++++--
 .../apache/hadoop/hdds/scm/storage/BufferPool.java |  16 +-
 .../org/apache/hadoop/hdds/client/BlockID.java     |   4 +-
 .../ozone/client/io/BlockOutputStreamEntry.java    |   6 +-
 .../hadoop/ozone/client/io/KeyOutputStream.java    |  59 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   7 +
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  12 +-
 .../ozone/client/rpc/TestBlockOutputStream.java    | 690 +++++++++++++++++++++
 .../rpc/TestBlockOutputStreamWithFailures.java     | 546 ++++++++++++++++
 .../rpc/TestCloseContainerHandlingByClient.java    |  11 +-
 .../ozone/container/ContainerTestHelper.java       |  17 +
 .../commandhandler/TestBlockDeletion.java          |   2 +-
 14 files changed, 1543 insertions(+), 136 deletions(-)

commit 8f6d8e7c3437ddf6c53652cf2741100c501803da
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Mar 23 09:43:49 2019 -0700

    HDDS-1331. In DatanodeStateMachine join check for not null.

 .../container/common/statemachine/DatanodeStateMachine.java      | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit f15915f364d123a59cd65502058eae87208062e5
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Sat Mar 23 09:22:34 2019 -0700

    HDDS-1299. Support TokenIssuer interface for running jobs with OzoneFileSystem. Contributed by Xiaoyu Yao.
    
    This closes #627.

 .../apache/hadoop/ozone/client/ObjectStore.java    |  17 ++
 .../ozone/client/protocol/ClientProtocol.java      |  22 +++
 .../hadoop/ozone/client/rest/RestClient.java       |  22 +++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  39 ++++-
 .../OzoneDelegationTokenSecretManager.java         |   6 +-
 .../dist/src/main/compose/ozonesecure-mr/.env      |  18 +++
 .../dist/src/main/compose/ozonesecure-mr/README.md |  76 +++++++++
 .../compose/ozonesecure-mr/docker-compose.yaml     | 114 +++++++++++++
 .../src/main/compose/ozonesecure-mr/docker-config  | 177 +++++++++++++++++++++
 .../docker-image/docker-krb5/Dockerfile-krb5       |  35 ++++
 .../docker-image/docker-krb5/README.md             |  34 ++++
 .../docker-image/docker-krb5/kadm5.acl             |  20 +++
 .../docker-image/docker-krb5/krb5.conf             |  41 +++++
 .../docker-image/docker-krb5/launcher.sh           |  25 +++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   2 -
 .../apache/hadoop/fs/ozone/OzoneClientAdapter.java |   8 +
 .../hadoop/fs/ozone/OzoneClientAdapterImpl.java    |  27 +++-
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |  36 ++++-
 18 files changed, 699 insertions(+), 20 deletions(-)

commit c9f93d70f2b6a49d0af5e2f4f2556de780bcc346
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Mar 22 16:39:39 2019 -0700

    HDDS-918. Expose SCMMXBean as a MetricsSource. Contributed by Siddharth Wagle.

 .../hdds/scm/container/ContainerManager.java       |  8 ++
 .../hdds/scm/container/ContainerStateManager.java  | 60 +++++++++------
 .../hdds/scm/container/SCMContainerManager.java    | 10 +++
 .../hdds/scm/server/SCMContainerMetrics.java       | 87 ++++++++++++++++++++++
 .../hdds/scm/server/StorageContainerManager.java   | 18 ++++-
 .../hdds/scm/server/TestSCMContainerMetrics.java   | 81 ++++++++++++++++++++
 6 files changed, 237 insertions(+), 27 deletions(-)

commit cf8f15c6953192f15547cb585f32adc2973d5565
Author: Ajay Kumar <ajay@apache.org>
Date:   Fri Mar 22 16:20:44 2019 -0700

    Revert "HDDS-1310. In datanode once a container becomes unhealthy, datanode restart fails. Contributed by  Sandeep Nemuri."
    
    This reverts commit efad5717ec1facbbe8a5a2c7adcaa47d5c1592ac.

 .../hadoop/ozone/container/keyvalue/KeyValueContainer.java  |  3 ---
 .../ozone/container/keyvalue/TestKeyValueContainer.java     | 13 -------------
 2 files changed, 16 deletions(-)

commit c871105d896dae0685aee681601118159519fae2
Author: Ajay Kumar <ajay@apache.org>
Date:   Fri Mar 22 15:53:12 2019 -0700

    HDDS-1310. In datanode once a container becomes unhealthy, datanode restart fails. Contributed by  Sandeep Nemuri.

 .../hadoop/ozone/container/keyvalue/KeyValueContainer.java  |  3 +++
 .../ozone/container/keyvalue/TestKeyValueContainer.java     | 13 +++++++++++++
 2 files changed, 16 insertions(+)

commit f5b9b7a5e417290132c83b4a361f06395ad449d7
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Fri Mar 22 15:15:01 2019 -0700

    HDDS-1302. Fix SCM CLI does not list container with id 1.

 .../org/apache/hadoop/hdds/scm/container/SCMContainerManager.java  | 2 +-
 .../org/apache/hadoop/hdds/scm/server/SCMClientProtocolServer.java | 7 ++++++-
 2 files changed, 7 insertions(+), 2 deletions(-)

commit 378735949f060ae72c440cb49e90931b3222386e
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Mar 22 15:08:28 2019 -0700

    HDDS-1291. Set OmKeyArgs#refreshPipeline flag properly to avoid reading from stale pipeline. Contributed by Xiaoyu Yao. (#639)

 .../main/java/org/apache/hadoop/ozone/client/rpc/RpcClient.java   | 2 ++
 .../apache/hadoop/ozone/TestStorageContainerManagerHelper.java    | 1 +
 .../test/java/org/apache/hadoop/ozone/client/rpc/TestBCSID.java   | 1 +
 .../ozone/client/rpc/TestCloseContainerHandlingByClient.java      | 7 +++++++
 .../hadoop/ozone/client/rpc/TestFailureHandlingByClient.java      | 7 +++++++
 .../apache/hadoop/ozone/client/rpc/TestOzoneAtRestEncryption.java | 1 +
 .../hadoop/ozone/client/rpc/TestOzoneRpcClientAbstract.java       | 5 +++--
 .../java/org/apache/hadoop/ozone/client/rpc/TestReadRetries.java  | 2 +-
 .../apache/hadoop/ozone/client/rpc/TestSecureOzoneRpcClient.java  | 1 +
 .../common/statemachine/commandhandler/TestBlockDeletion.java     | 4 +++-
 .../statemachine/commandhandler/TestCloseContainerByPipeline.java | 8 +++++---
 .../statemachine/commandhandler/TestCloseContainerHandler.java    | 4 +++-
 .../statemachine/commandhandler/TestDeleteContainerHandler.java   | 4 +++-
 .../org/apache/hadoop/ozone/om/TestContainerReportWithKeys.java   | 1 +
 .../java/org/apache/hadoop/ozone/om/TestOmBlockVersioning.java    | 2 ++
 .../hadoop/ozone/web/storage/DistributedStorageHandler.java       | 3 +++
 .../hadoop/ozone/protocolPB/OzoneManagerRequestHandler.java       | 2 ++
 17 files changed, 46 insertions(+), 9 deletions(-)

commit a2676c0aa3e9fb658a55ff719ff33be170ff3aab
Author: Arpit Agarwal <arp7@users.noreply.github.com>
Date:   Fri Mar 22 14:36:29 2019 -0700

    HDDS-1205. Refactor ReplicationManager to handle QUASI_CLOSED containers. Contributed by Nanda kumar. (#620)

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  12 +
 .../common/src/main/resources/ozone-default.xml    |  20 +
 .../hdds/scm/container/ContainerManager.java       |   8 +
 .../hdds/scm/container/ReplicationManager.java     | 748 +++++++++++++++++++++
 .../hdds/scm/container/SCMContainerManager.java    |  10 +
 .../scm/container/states/ContainerStateMap.java    |   9 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  53 +-
 .../scm/container/TestContainerReportHandler.java  |   8 +-
 .../scm/container/TestContainerReportHelper.java   |  40 --
 .../TestIncrementalContainerReportHandler.java     |   6 +-
 .../hdds/scm/container/TestReplicationManager.java | 625 +++++++++++++++++
 11 files changed, 1485 insertions(+), 54 deletions(-)

commit 6eb478226903d5c4a01b473848ae36d04f5669b2
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Mar 22 11:29:56 2019 -0700

    HDDS-1323. Ignore unit test TestFailureHandlingByClient. Contributed by Supratim Deka.

 .../apache/hadoop/ozone/client/rpc/TestFailureHandlingByClient.java    | 3 +++
 1 file changed, 3 insertions(+)

commit 45d61f0c8f8d7a9747a7e27b7d4c15e488fcec6c
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu Mar 21 14:24:02 2019 -0700

    HDDS-1320. Update ozone to latest ratis snapshot build (0.4.0-1fc5ace-SNAPSHOT). Contributed by Mukul Kumar Singh.

 .../common/transport/server/ratis/XceiverServerRatis.java         | 3 ++-
 hadoop-hdds/pom.xml                                               | 2 +-
 .../hadoop/ozone/om/ratis/TestOzoneManagerStateMachine.java       | 8 ++++----
 hadoop-ozone/pom.xml                                              | 2 +-
 4 files changed, 8 insertions(+), 7 deletions(-)

commit 36fdb16e8c351788b624b04bfc9c55857fcd1641
Author: Arpit Agarwal <arp7@users.noreply.github.com>
Date:   Thu Mar 21 14:18:58 2019 -0700

    HDDS-1321. TestOzoneManagerHttpServer depends on hard-coded port numbers. Contributed by Arpit Agarwal. (#633)
    
    Change-Id: I9656af4a7f41812da9d125c10ae0e8daf3dcf7f5

 .../java/org/apache/hadoop/ozone/om/TestOzoneManagerHttpServer.java  | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 6871feec6803b12076ac0f5b8ce34a64b06aaa89
Author: Yiqun Lin <yqlin@apache.org>
Date:   Thu Mar 21 11:02:29 2019 +0800

    HDDS-1233. Create an Ozone Manager Service provider for Recon. Contributed by Aravindan Vijayan.

 .../org/apache/hadoop/utils/db/DBStoreBuilder.java |   8 +-
 .../hadoop/utils/db/RDBCheckpointManager.java      |  46 ----
 .../java/org/apache/hadoop/utils/db/RDBStore.java  |  25 +-
 .../apache/hadoop/utils/db/RocksDBCheckpoint.java  |  81 ++++++
 .../common/src/main/resources/ozone-default.xml    |  85 ++++++-
 .../org/apache/hadoop/utils/db/TestRDBStore.java   |  43 ++++
 .../org/apache/hadoop/hdds/server/ServerUtils.java |  19 +-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     | 145 ++++++-----
 hadoop-ozone/ozone-recon/pom.xml                   |  26 +-
 .../apache/hadoop/ozone/recon/ReconConstants.java  |   3 +
 .../hadoop/ozone/recon/ReconControllerModule.java  |  14 +-
 .../hadoop/ozone/recon/ReconServerConfigKeys.java  |  37 ++-
 .../org/apache/hadoop/ozone/recon/ReconUtils.java  | 178 +++++++++++++
 .../recon/recovery/ReconOMMetadataManager.java     |  38 +++
 .../recon/recovery/ReconOmMetadataManagerImpl.java |  99 ++++++++
 .../recon/spi/OzoneManagerServiceProvider.java     |  15 ++
 .../ozone/recon/spi/ReconContainerDBProvider.java  |  35 +--
 .../spi/impl/OzoneManagerServiceProviderImpl.java  | 211 ++++++++++++++++
 .../apache/hadoop/ozone/recon/TestReconUtils.java  | 135 ++++++++++
 .../recovery/TestReconOmMetadataManagerImpl.java   | 148 +++++++++++
 .../hadoop/ozone/recon/recovery/package-info.java  |  21 ++
 .../impl/TestContainerDBServiceProviderImpl.java   |   3 -
 .../impl/TestOzoneManagerServiceProviderImpl.java  | 275 +++++++++++++++++++++
 23 files changed, 1548 insertions(+), 142 deletions(-)

commit f9a629244459ef4080269b7986b0bd9decada6d7
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Mar 20 17:14:19 2019 +0530

    HDDS-1306. TestContainerStateManagerIntegration fails in Ratis shutdown.  Contributed by Lokesh Jain.

 .../replication/ReplicationActivityStatus.java     | 22 ++++++++---------
 .../hdds/scm/server/StorageContainerManager.java   | 12 +++++++++-
 .../hdds/scm/chillmode/TestChillModeHandler.java   |  5 ++--
 .../scm/container/TestContainerReportHandler.java  | 28 ++++++++++++++++------
 .../replication/TestReplicationActivityStatus.java |  4 +++-
 5 files changed, 49 insertions(+), 22 deletions(-)

commit 882b8d42f273c54ab552c29bb26240d35b65b2ef
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Mar 19 14:06:39 2019 -0700

    HDDS-1308. Fix asf license errors. (#623)

 .../apache/hadoop/ozone/protocolPB/RequestHandler.java  | 17 +++++++++++++++++
 .../ozone/om/ratis/TestOzoneManagerStateMachine.java    | 17 +++++++++++++++++
 2 files changed, 34 insertions(+)

commit 782563d52e2ed8b73cef341d53a48d7531d3dea8
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Mar 19 13:57:02 2019 -0700

    HDDS-1307. Test ScmChillMode testChillModeOperations failed. (#622)
    
    HDDS-1307. Test ScmChillMode testChillModeOperations failed. Contributed by Bharat Viswanadham. (#622)

 .../src/test/java/org/apache/hadoop/ozone/om/TestScmChillMode.java     | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 589a3577fbe47e2effb395f5f3defaedec932ec3
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Mar 19 09:55:52 2019 -0700

    HDDS-1215. Change hadoop-runner and apache/hadoop base image to use Java8. Contributed by Xiaoyu Yao.
    
    This closes #615

 hadoop-ozone/dist/src/main/compose/README.md                 | 6 ++++++
 hadoop-ozone/dist/src/main/compose/ozone/docker-compose.yaml | 6 +++---
 2 files changed, 9 insertions(+), 3 deletions(-)

commit 6d46d1cc208bae9e3b0feae8cb847a99e3644c45
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Mon Mar 18 23:08:17 2019 -0700

     HDDS-1119. DN get OM certificate from SCM CA for block token validation. Contributed by Ajay Kumar. (#601)

 .../hadoop/hdds/protocol/DatanodeDetails.java      |  44 ++++-
 .../hdds/security/token/BlockTokenVerifier.java    |  45 ++---
 .../x509/certificate/client/CertificateClient.java |  19 +-
 .../certificate/client/DNCertificateClient.java    |   7 +-
 .../client/DefaultCertificateClient.java           | 206 ++++++++++++++++----
 .../certificate/client/OMCertificateClient.java    |   7 +-
 .../x509/exceptions/CertificateException.java      |   3 +-
 .../org/apache/hadoop/ozone/common/Storage.java    |  12 ++
 .../org/apache/hadoop/utils/db/CodecRegistry.java  |   1 +
 .../java/org/apache/hadoop/utils/db/LongCodec.java |  46 +++++
 hadoop-hdds/common/src/main/proto/hdds.proto       |   1 +
 .../client/TestCertificateClientInit.java          |  26 ++-
 .../client/TestDefaultCertificateClient.java       | 212 ++++++++++++++++-----
 .../apache/hadoop/ozone/HddsDatanodeService.java   |  46 +++--
 .../common/statemachine/DatanodeStateMachine.java  |  12 +-
 .../common/transport/server/XceiverServer.java     |  14 +-
 .../common/transport/server/XceiverServerGrpc.java |   6 +-
 .../transport/server/ratis/XceiverServerRatis.java |  10 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  10 +-
 .../hadoop/ozone/TestHddsSecureDatanodeInit.java   |   8 +-
 .../container/common/TestDatanodeStateMachine.java |   8 +-
 .../TestCloseContainerCommandHandler.java          |   2 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   2 +-
 .../ozone/container/common/TestEndPoint.java       |  10 +-
 .../apache/hadoop/ozone/om/OMMetadataManager.java  |   8 +
 .../hadoop/ozone/om/S3SecretManagerImpl.java       |   5 +-
 .../ozone/om/codec/TokenIdentifierCodec.java       |  52 +++++
 .../security/OzoneBlockTokenSecretManager.java     |  17 +-
 .../OzoneDelegationTokenSecretManager.java         |  94 ++-------
 .../hadoop/ozone/security/OzoneSecretManager.java  |   5 -
 .../hadoop/ozone/security/OzoneSecretStore.java    | 198 ++++---------------
 .../main/compose/ozonesecure/docker-compose.yaml   |   2 +-
 .../src/main/smoketest/security/ozone-secure.robot |   3 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  16 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |  18 +-
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 125 ++++++++----
 .../ozone/client/CertificateClientTestImpl.java    |  55 +++---
 .../ozone/client/rpc/TestSecureOzoneRpcClient.java |  20 +-
 .../ozone/container/ContainerTestHelper.java       |  14 ++
 .../transport/server/ratis/TestCSMMetrics.java     |   2 +-
 .../container/metrics/TestContainerMetrics.java    |   2 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   2 +-
 .../ozoneimpl/TestOzoneContainerWithTLS.java       |   2 +-
 .../ozoneimpl/TestSecureOzoneContainer.java        |  85 ++++-----
 .../container/server/TestContainerServer.java      |  11 +-
 .../server/TestSecureContainerServer.java          |  70 +++++--
 .../hadoop/ozone/om/TestSecureOzoneManager.java    |  12 +-
 .../java/org/apache/hadoop/ozone/om/OMStorage.java |  17 ++
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  16 ++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  43 +++--
 .../security/TestOzoneBlockTokenSecretManager.java |   0
 .../TestOzoneDelegationTokenSecretManager.java     |  42 ++--
 52 files changed, 1093 insertions(+), 600 deletions(-)

commit 3799dab451a8e3eb97475ca12d9fa37914a4b458
Author: Arpit Agarwal <arp@apache.org>
Date:   Mon Mar 18 14:21:57 2019 -0700

    Revert "HDDS-1284. Adjust default values of pipline recovery for more resilient service restart. Contributed by Elek, Marton. (#608)"
    
    This reverts commit 44b8451821c392dd59ee84153c98547ae9ce7042.

 .../src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java       | 4 ++--
 hadoop-hdds/common/src/main/resources/ozone-default.xml               | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 0f064cfe13829d9fc5b98d8fe77f457a56717f26
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Mar 18 13:11:35 2019 -0700

    HDDS-1250. In OM HA AllocateBlock call where connecting to SCM from OM should not happen on Ratis.

 .../org/apache/hadoop/ozone/audit/OMAction.java    |   1 +
 .../ozone/om/protocol/OzoneManagerHAProtocol.java  |  55 +++++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |   1 +
 .../om/protocol/OzoneManagerServerProtocol.java    |  28 +++
 ...OzoneManagerProtocolClientSideTranslatorPB.java |   1 -
 .../src/main/proto/OzoneManagerProtocol.proto      |   4 +
 .../hadoop/ozone/om/TestOmBlockVersioning.java     |   3 +-
 .../org/apache/hadoop/ozone/om/KeyManager.java     |  15 ++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  54 ++++-
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |  10 +
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  34 ++-
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |  12 +-
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |  84 ++++++-
 ...OzoneManagerProtocolServerSideTranslatorPB.java |   7 +-
 .../protocolPB/OzoneManagerRequestHandler.java     |  25 +-
 .../hadoop/ozone/protocolPB/RequestHandler.java    |  31 +++
 .../om/ratis/TestOzoneManagerStateMachine.java     | 264 +++++++++++++++++++++
 17 files changed, 600 insertions(+), 29 deletions(-)

commit 76ed6002196b431fc648d10bfad7cf9a9e2fdf41
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Mar 18 08:38:55 2019 -0700

    HDDS-1296. Fix checkstyle issue from Nightly run. Contributed by Xiaoyu Yao. (#616)

 .../java/org/apache/hadoop/ozone/om/helpers/OmKeyLocationInfo.java  | 1 +
 .../src/main/java/org/apache/hadoop/ozone/om/KeyManagerImpl.java    | 6 ++----
 .../src/main/java/org/apache/hadoop/ozone/om/ScmClient.java         | 2 +-
 3 files changed, 4 insertions(+), 5 deletions(-)

commit 89cb21349e5bc0e6ba965f96b62e098e045f6642
Author: Sammi Chen <sammichen@apache.org>
Date:   Sun Mar 17 17:07:57 2019 +0800

    HDDS-699. Detect Ozone Network topology. Contributed by Sammi Chen.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   6 +
 .../org/apache/hadoop/hdds/scm/net/InnerNode.java  |  84 ++
 .../apache/hadoop/hdds/scm/net/InnerNodeImpl.java  | 495 +++++++++++
 .../apache/hadoop/hdds/scm/net/NetConstants.java   |  67 ++
 .../org/apache/hadoop/hdds/scm/net/NetUtils.java   | 156 ++++
 .../hadoop/hdds/scm/net/NetworkTopology.java       | 250 ++++++
 .../hadoop/hdds/scm/net/NetworkTopologyImpl.java   | 778 +++++++++++++++++
 .../java/org/apache/hadoop/hdds/scm/net/Node.java  |  89 ++
 .../org/apache/hadoop/hdds/scm/net/NodeImpl.java   | 200 +++++
 .../org/apache/hadoop/hdds/scm/net/NodeSchema.java | 148 ++++
 .../hadoop/hdds/scm/net/NodeSchemaLoader.java      | 388 +++++++++
 .../hadoop/hdds/scm/net/NodeSchemaManager.java     | 136 +++
 .../apache/hadoop/hdds/scm/net/package-info.java   |  21 +
 .../main/resources/network-topology-default.xml    |  68 ++
 .../main/resources/network-topology-nodegroup.xml  |  74 ++
 .../common/src/main/resources/ozone-default.xml    |   7 +
 .../hdds/scm/net/TestNetworkTopologyImpl.java      | 922 +++++++++++++++++++++
 .../hadoop/hdds/scm/net/TestNodeSchemaLoader.java  | 103 +++
 .../hadoop/hdds/scm/net/TestNodeSchemaManager.java | 101 +++
 .../networkTopologyTestFiles/enforce-error.xml     |  47 ++
 .../resources/networkTopologyTestFiles/good.xml    |  49 ++
 .../networkTopologyTestFiles/invalid-cost.xml      |  43 +
 .../networkTopologyTestFiles/invalid-version.xml   |  43 +
 .../networkTopologyTestFiles/multiple-leaf.xml     |  43 +
 .../networkTopologyTestFiles/multiple-root.xml     |  43 +
 .../networkTopologyTestFiles/multiple-topology.xml |  47 ++
 .../resources/networkTopologyTestFiles/no-leaf.xml |  43 +
 .../resources/networkTopologyTestFiles/no-root.xml |  43 +
 .../networkTopologyTestFiles/no-topology.xml       |  39 +
 .../path-layers-size-mismatch.xml                  |  43 +
 .../path-with-id-reference-failure.xml             |  43 +
 .../unknown-layer-type.xml                         |  43 +
 .../wrong-path-order-1.xml                         |  43 +
 .../wrong-path-order-2.xml                         |  43 +
 .../dist/dev-support/bin/dist-layout-stitching     |   2 +
 35 files changed, 4750 insertions(+)

commit 44776af0e96e2ba87ee359e7b97dcbf99c439307
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Mar 15 21:06:44 2019 -0700

    HDDS-1281. Fix the findbug issue caused by HDDS-1163. Contributed by Aravindan Vijayan.

 .../org/apache/hadoop/ozone/container/keyvalue/KeyValueContainer.java | 2 +-
 .../hadoop/ozone/container/keyvalue/KeyValueContainerCheck.java       | 4 +---
 .../hadoop/ozone/container/keyvalue/TestKeyValueContainerCheck.java   | 2 +-
 3 files changed, 3 insertions(+), 5 deletions(-)

commit bae7298b399c72d4fe0c084679e55b9d5f0b9c2c
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Mar 15 16:08:30 2019 -0700

    HDDS-1246. Add ozone delegation token utility subcmd for Ozone CLI. Contributed by Xiaoyu Yao. (#594)

 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 14 +++-
 hadoop-ozone/common/src/main/bin/ozone             |  5 ++
 .../ozone/om/ha/OMFailoverProxyProvider.java       | 12 +++-
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  3 +
 .../security/OzoneDelegationTokenSelector.java     |  4 +-
 .../org/apache/hadoop/fs/ozone/O3fsDtFetcher.java  | 84 ++++++++++++++++++++++
 .../org.apache.hadoop.security.token.DtFetcher     | 19 +++++
 ...rg.apache.hadoop.security.token.TokenIdentifier | 17 +++++
 .../org.apache.hadoop.security.token.TokenRenewer  | 19 +++++
 9 files changed, 173 insertions(+), 4 deletions(-)

commit 11f12fa50aebd0806c0c02827a75d5d3df43bdea
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Fri Mar 15 15:39:30 2019 -0700

    HDDS-1263. SCM CLI does not list container with id 1.

 .../java/org/apache/hadoop/hdds/scm/container/SCMContainerManager.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 075f348fba8b1ce97ceaeeba65267739fa56a320
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Mar 15 22:51:37 2019 +0100

    HDDS-1284. Adjust default values of pipline recovery for more resilient service restart. Contributed by Elek, Marton. (#608)

 .../src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java       | 4 ++--
 hadoop-hdds/common/src/main/resources/ozone-default.xml               | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 0e1f97a87550d559e04fd98ae7abe1a68d674a8c
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Mar 15 22:12:10 2019 +0100

    HDDS-1283. Fix the dynamic documentation of basic s3 client usage. Contributed by Elek, Marton. (#605)

 hadoop-ozone/s3gateway/src/main/resources/webapps/static/index.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 13bdc698b46a1cf1bbbf5b3e3802aa1f665d68fd
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Mar 15 10:41:06 2019 -0700

    HDDS-1138. Ozone Client should avoid talking to SCM directly. Contributed by Xiaoyu Yao and Mukul Kumar Singh.
    
    Closes #585

 .../hadoop/ozone/client/io/KeyInputStream.java     |  5 +--
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 20 ++-------
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  2 -
 .../apache/hadoop/ozone/om/helpers/OmKeyArgs.java  | 16 +++++++-
 .../hadoop/ozone/om/helpers/OmKeyLocationInfo.java | 48 +++++++++++++++++++---
 .../src/main/proto/OzoneManagerProtocol.proto      |  7 ++++
 .../web/storage/DistributedStorageHandler.java     |  1 -
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 46 +++++++++++++++++----
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  3 +-
 .../java/org/apache/hadoop/ozone/om/ScmClient.java | 44 ++++++++++++++++++++
 10 files changed, 154 insertions(+), 38 deletions(-)

commit e74c60ec2b7266b0d4c3e85f8da7199165feee67
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Mar 15 17:43:01 2019 +0100

    HDDS-1259. OzoneFS classpath separation is broken by the token validation. Contributed by Elek Marton.
    
     Closes #604

 .../hadoop/fs/ozone/OzoneClientAdapterImpl.java    | 29 +++++++++++++++++-----
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    | 18 ++------------
 2 files changed, 25 insertions(+), 22 deletions(-)

commit e3083ff31cd1428d7677d43bfb22d5ea8f52c8e2
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Fri Mar 15 20:54:41 2019 +0530

    HDDS-1088. Add blockade Tests to test Replica Manager. Contributed by Nilotpal Nandi.

 hadoop-ozone/dev-support/docker/Dockerfile         |   3 +
 hadoop-ozone/dist/src/main/blockade/README.md      |  10 +
 .../main/blockade/clusterUtils/cluster_utils.py    | 479 +++++++++++----------
 hadoop-ozone/dist/src/main/blockade/conftest.py    | 139 +++---
 .../blockade/test_blockade_datanode_isolation.py   | 153 ++++---
 .../main/blockade/test_blockade_scm_isolation.py   | 163 ++++---
 6 files changed, 535 insertions(+), 412 deletions(-)

commit b4ee073ca1279fea08db9dbd89b21ec100a6fe62
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Fri Mar 15 15:40:59 2019 +0530

    HDDS-1098. Introduce Retry Policy in Ozone Client. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  19 ++-
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   4 +-
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   5 +
 .../main/java/org/apache/ratis/RatisHelper.java    |  33 ++++-
 .../common/src/main/resources/ozone-default.xml    |  16 ++-
 .../transport/server/ratis/XceiverServerRatis.java |  18 +--
 .../TestCloseContainerCommandHandler.java          |   8 +-
 .../hdds/scm/pipeline/RatisPipelineUtils.java      |  10 +-
 .../hadoop/ozone/client/OzoneClientUtils.java      |  11 ++
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 149 +++++++++++++--------
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  22 +--
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |   5 +-
 .../web/storage/DistributedStorageHandler.java     |  11 +-
 13 files changed, 206 insertions(+), 105 deletions(-)

commit e6876b64ee141acbfc5bb64d4330904340de2c85
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Thu Mar 14 21:16:59 2019 -0700

    HDDS-761. Create S3 subcommand to run S3 related operations.
    
    Closes #579

 hadoop-hdds/docs/content/BucketCommands.md         |   4 +-
 hadoop-hdds/docs/content/S3.md                     |   2 +-
 hadoop-hdds/docs/content/S3Commands.md             |   2 +-
 hadoop-hdds/docs/content/SparkOzoneFSK8S.md        |   6 +-
 hadoop-ozone/common/src/main/bin/ozone             |   5 +
 .../src/main/smoketest/security/ozone-secure.robot |   2 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |  63 -----
 .../apache/hadoop/ozone/ozShell/TestS3Shell.java   | 292 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java |   4 +-
 .../ozone/web/ozShell/bucket/BucketCommands.java   |   3 +-
 .../ozone/web/ozShell/s3/GetS3SecretHandler.java   |   2 +-
 .../hadoop/ozone/web/ozShell/s3/S3Commands.java    |  60 -----
 .../hadoop/ozone/web/ozShell/s3/S3Shell.java       |  56 ++++
 13 files changed, 364 insertions(+), 137 deletions(-)

commit 285377d1f543d2abf979a16237b2128e290aa725
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Thu Mar 14 17:21:06 2019 -0700

    HDDS-1265. ozone sh s3 getsecret throws Null Pointer Exception for unsecured clusters.
    
    Closes #611

 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 29 +++++-----------------
 .../ozone/web/ozShell/s3/GetS3SecretHandler.java   | 24 +++++++++++++-----
 2 files changed, 24 insertions(+), 29 deletions(-)

commit e2931fdedeef7d5ceafa7e3d1299fb8737d1a86d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Mar 14 12:30:06 2019 -0700

    HDDS-917. Expose NodeManagerMXBean as a MetricsSource. Contributed by Siddharth Wagle.

 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  4 +-
 .../hadoop/hdds/scm/node/SCMNodeMetrics.java       | 76 ++++++++++++++++++++--
 .../hadoop/ozone/scm/node/TestSCMNodeMetrics.java  | 40 ++++++++++++
 3 files changed, 114 insertions(+), 6 deletions(-)

commit 8bbf1d12c2b4140d65d97e07f42ff4b32a6d3962
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Mar 14 19:32:36 2019 +0530

    HDDS-1257. Incorrect object because of mismatch in block lengths. Contributed by Shashikant Banerjee.

 .../hadoop/hdds/scm/storage/BlockOutputStream.java | 38 ++++++++++++++--------
 1 file changed, 25 insertions(+), 13 deletions(-)

commit 11b2ac7248dd9c65ef6736c41e89ed3ac698fe8d
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu Mar 14 16:49:43 2019 +0530

    HDDS-1237. Fix test TestSecureContainerServer.testClientServerRatisGrpc. Contributed by Mukul Kumar Singh.

 .../hadoop/ozone/container/server/TestSecureContainerServer.java   | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit a69dd5240665d85c31734d60c879923ae1ccd8fb
Author: Márton Elek <elek@apache.org>
Date:   Thu Mar 14 11:59:40 2019 +0100

    HDDS-1247. Bump trunk ozone version to 0.5.0. Contributed by Elek, Marton.
    
    Closes #588

 hadoop-hdds/client/pom.xml               | 4 ++--
 hadoop-hdds/common/pom.xml               | 6 +++---
 hadoop-hdds/container-service/pom.xml    | 4 ++--
 hadoop-hdds/docs/pom.xml                 | 4 ++--
 hadoop-hdds/framework/pom.xml            | 4 ++--
 hadoop-hdds/pom.xml                      | 4 ++--
 hadoop-hdds/server-scm/pom.xml           | 4 ++--
 hadoop-hdds/tools/pom.xml                | 4 ++--
 hadoop-ozone/client/pom.xml              | 4 ++--
 hadoop-ozone/common/pom.xml              | 4 ++--
 hadoop-ozone/datanode/pom.xml            | 4 ++--
 hadoop-ozone/dist/pom.xml                | 4 ++--
 hadoop-ozone/integration-test/pom.xml    | 4 ++--
 hadoop-ozone/objectstore-service/pom.xml | 4 ++--
 hadoop-ozone/ozone-manager/pom.xml       | 4 ++--
 hadoop-ozone/ozone-recon/pom.xml         | 2 +-
 hadoop-ozone/ozonefs-lib-current/pom.xml | 4 ++--
 hadoop-ozone/ozonefs-lib-legacy/pom.xml  | 4 ++--
 hadoop-ozone/ozonefs/pom.xml             | 4 ++--
 hadoop-ozone/pom.xml                     | 8 ++++----
 hadoop-ozone/s3gateway/pom.xml           | 4 ++--
 hadoop-ozone/tools/pom.xml               | 4 ++--
 22 files changed, 46 insertions(+), 46 deletions(-)

commit 64e0ced65f162095b2847a65e8df684c0dfa64c0
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu Mar 14 15:18:06 2019 +0530

    HDDS-1241. Update ozone to latest ratis snapshot build (0.4.0-5680cf5-SNAPSHOT). Contributed by Mukul Kumar Singh.

 .../server/ratis/ContainerStateMachine.java        | 25 +++++++++++-----------
 hadoop-hdds/pom.xml                                |  2 +-
 hadoop-ozone/pom.xml                               |  2 +-
 3 files changed, 14 insertions(+), 15 deletions(-)

commit a4e36ac33baffb150ee86f9b62f0abb86223443d
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Wed Mar 13 12:01:08 2019 -0700

    HDDS-1254. Fix failure in TestOzoneManagerHttpServer & TestStorageContainerManagerHttpServer. Contributed by Ajay Kumar. (#598)

 .../hdds/scm/TestStorageContainerManagerHttpServer.java       | 10 ++++++----
 .../apache/hadoop/ozone/om/TestOzoneManagerHttpServer.java    | 11 ++++++-----
 2 files changed, 12 insertions(+), 9 deletions(-)

commit e20743c8b98bca1a4949ca8b580e80e0b523f87f
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Mar 13 11:50:53 2019 -0700

    HDDS-1087. Fix TestDefaultCertificateClient#testSignDataStream. Contributed by Xiaoyu Yao. (#596)

 .../security/x509/certificate/client/TestDefaultCertificateClient.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit eb95a50b65969aa0d457e0d5d904cebb14f1319d
Author: Aravindan Vijayan <avijayan@apache.org>
Date:   Wed Mar 13 17:12:43 2019 +0530

    HDDS-1209. Fix the block allocation logic in SCM when client wants to exclude all available open containers in a chosen pipeline.
    
    Signed-off-by: Nanda kumar <nanda@apache.org>

 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 20 ++------
 .../hdds/scm/container/ContainerManager.java       | 11 +++++
 .../hdds/scm/container/SCMContainerManager.java    |  7 +++
 .../TestContainerStateManagerIntegration.java      | 55 ++++++++++++++++++++++
 4 files changed, 77 insertions(+), 16 deletions(-)

commit 235c05364bb56bcb960a7c39501aa40fba01c71a
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Thu Mar 7 14:06:29 2019 +0100

    HDDS-1226. Addendum. ozone-filesystem jar missing in hadoop classpath
    
    Closes #560

 hadoop-hdds/common/src/main/resources/ozone-default.xml | 2 +-
 hadoop-hdds/docs/content/OzoneFS.md                     | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit cdbfa783c0608850edf655c4633a368ea00c8e51
Author: Lokesh Jain <ljain@apache.org>
Date:   Wed Mar 13 16:26:06 2019 +0530

    HDDS-1128. Create stateful manager class for the pipeline creation scheduling.
    
    Signed-off-by: Nanda kumar <nanda@apache.org>

 .../java/org/apache/hadoop/utils/Scheduler.java    |  17 +--
 .../hdds/scm/chillmode/SCMChillModeManager.java    |   4 +-
 .../hadoop/hdds/scm/node/NewNodeHandler.java       |   4 +-
 .../scm/node/NonHealthyToHealthyNodeHandler.java   |   3 +-
 .../hadoop/hdds/scm/node/StaleNodeHandler.java     |   4 +-
 .../scm/pipeline/BackgroundPipelineCreator.java    | 110 +++++++++++++++++
 .../hdds/scm/pipeline/PipelineActionHandler.java   |   4 +-
 .../hadoop/hdds/scm/pipeline/PipelineFactory.java  |   6 -
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  |   9 +-
 .../hadoop/hdds/scm/pipeline/PipelineProvider.java |   1 -
 .../hdds/scm/pipeline/PipelineReportHandler.java   |   9 --
 .../hdds/scm/pipeline/RatisPipelineProvider.java   |  17 ---
 .../hdds/scm/pipeline/RatisPipelineUtils.java      | 123 +------------------
 .../hdds/scm/pipeline/SCMPipelineManager.java      | 136 +++++++++++++++++----
 .../hdds/scm/pipeline/SimplePipelineProvider.java  |   5 -
 .../hdds/scm/server/SCMClientProtocolServer.java   |   4 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    |   4 +-
 .../scm/chillmode/TestSCMChillModeManager.java     |  14 +--
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |   4 +-
 .../hdds/scm/pipeline/TestPipelineClose.java       |  74 +++--------
 .../hdds/scm/pipeline/TestRatisPipelineUtils.java  |  14 ++-
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  |  13 +-
 .../ozone/freon/TestFreonWithPipelineDestroy.java  |   4 +-
 23 files changed, 290 insertions(+), 293 deletions(-)

commit db6019a0c503a3304ff66e83a689c64a4a222456
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Mar 13 16:22:19 2019 +0530

    HDDS-1256. Fix failure in TestKeyValueContainerCheck. Contributed by Supratim Deka.

 .../hadoop/ozone/container/keyvalue/TestKeyValueContainerCheck.java | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 31a177c19ae9caad776ba93f4eb7719711d893ed
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed Mar 13 04:32:39 2019 +0900

    HDDS-1163. Basic framework for Ozone Data Scrubber. Contributed by Supratim Deka.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   5 +-
 .../common/src/main/resources/ozone-default.xml    |  10 +
 .../container/common/interfaces/Container.java     |   5 +
 .../container/keyvalue/KeyValueContainer.java      |  69 +++-
 .../container/keyvalue/KeyValueContainerCheck.java | 432 +++++++++++++++++++++
 .../container/ozoneimpl/ContainerScrubber.java     | 158 ++++++++
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  34 ++
 .../keyvalue/TestKeyValueContainerCheck.java       | 194 +++++++++
 8 files changed, 904 insertions(+), 3 deletions(-)

commit 070ada1a637ec55c88506239a04fad7d564bbe39
Author: Márton Elek <elek@apache.org>
Date:   Tue Mar 12 19:14:55 2019 +0100

    HDDS-807. Period should be an invalid character in bucket names. Contributed by Siddharth Wagle.

 hadoop-hdds/docs/content/OzoneFS.md                |  15 ++-
 hadoop-ozone/ozonefs/pom.xml                       |  25 +++++
 .../hadoop/fs/ozone/OzoneClientAdapterImpl.java    |  25 ++++-
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |  37 +++++--
 .../fs/ozone/TestOzoneFileSystemWithMocks.java     | 111 +++++++++++++++++++++
 5 files changed, 197 insertions(+), 16 deletions(-)

commit 69874120710e20d6a7a3d26b5bbf579983e85182
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Tue Mar 12 18:03:09 2019 +0100

    HDDS-1043. Enable token based authentication for S3 api
    
    Closes #561

 .../hadoop/hdds/security/x509/SecurityConfig.java  |  12 +
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   4 +-
 .../apache/hadoop/ozone/om/S3SecretManager.java    |   6 +
 .../hadoop/ozone/om/S3SecretManagerImpl.java       |  35 ++-
 .../hadoop/ozone/om/exceptions/OMException.java    |   1 +
 .../hadoop/ozone/om/helpers/S3SecretValue.java     |  10 +-
 .../hadoop/ozone/security/AWSV4AuthValidator.java  | 116 ++++++++
 .../OzoneDelegationTokenSecretManager.java         |  44 ++-
 .../ozone/security/OzoneSecurityException.java     |   1 +
 .../ozone/security/OzoneTokenIdentifier.java       | 106 +++++++-
 .../src/main/proto/OzoneManagerProtocol.proto      |  29 +-
 .../ozone/security/TestAWSV4AuthValidator.java     |  78 ++++++
 .../TestOzoneDelegationTokenSecretManager.java     |  92 ++++++-
 .../main/compose/ozonesecure/docker-compose.yaml   |  10 +
 .../src/main/compose/ozonesecure/docker-config     |   4 +
 .../dist/src/main/smoketest/s3/commonawslib.robot  |   2 +-
 .../src/main/smoketest/security/ozone-secure.robot |  41 +++
 hadoop-ozone/dist/src/main/smoketest/test.sh       |   2 +-
 .../hadoop/ozone/TestOzoneConfigurationFields.java |   2 +
 .../hadoop/ozone/TestSecureOzoneCluster.java       |  45 ++++
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  22 --
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |   2 +
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  33 +--
 .../org/apache/hadoop/ozone/s3/AWSAuthParser.java  |  78 ++++++
 .../apache/hadoop/ozone/s3/AWSV4AuthParser.java    | 300 +++++++++++++++++++++
 .../hadoop/ozone/s3/OzoneClientProducer.java       |  90 ++++++-
 .../hadoop/ozone/s3/OzoneServiceProvider.java      |  52 ++++
 .../hadoop/ozone/s3/exception/S3ErrorTable.java    |   8 +
 .../hadoop/ozone/s3/header/AWSConstants.java       |  67 -----
 .../ozone/s3/header/AuthorizationHeaderV4.java     |  35 ++-
 .../hadoop/ozone/s3/TestOzoneClientProducer.java   | 144 ++++++++++
 .../ozone/s3/header/TestAuthorizationHeaderV4.java |   2 +-
 32 files changed, 1309 insertions(+), 164 deletions(-)

commit 939da87f9e676f83b92553d583d3a3f6aa8ac787
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Mar 12 09:34:18 2019 -0700

    HDDS-1253. Fix checkstyle issue from Nightly run. Contributed by Xiaoyu Yao. (#593)
    
    Closes PR #593

 .../hdds/security/x509/certificate/authority/DefaultCAServer.java     | 4 ++--
 .../java/org/apache/hadoop/ozone/client/protocol/ClientProtocol.java  | 1 -
 2 files changed, 2 insertions(+), 3 deletions(-)

commit 3774ce1c1380766147afdaf9c182233b6b1fd9ef
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Mar 12 20:02:19 2019 +0530

    HDDS-1095. OzoneManager#openKey should do multiple block allocations in a single SCM rpc call. Contributed by Mukul Kumar Singh.

 .../scm/protocol/ScmBlockLocationProtocol.java     |  9 ++--
 ...lockLocationProtocolClientSideTranslatorPB.java | 24 ++++++---
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  8 +--
 ...lockLocationProtocolServerSideTranslatorPB.java | 32 ++++++++----
 .../src/main/proto/ScmBlockLocationProtocol.proto  | 22 ++++----
 .../common/src/main/resources/ozone-default.xml    | 11 ++--
 .../hdds/scm/server/SCMBlockProtocolServer.java    | 13 +++--
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 58 ++++++++++++----------
 .../ozone/om/ScmBlockLocationTestIngClient.java    |  5 +-
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java |  5 +-
 10 files changed, 117 insertions(+), 70 deletions(-)

commit 8e6b6fdffacd08ccaf7cbb5042b1fe28ac54778c
Author: Márton Elek <elek@apache.org>
Date:   Mon Mar 4 15:25:32 2019 +0100

    HDDS-1214. Enable tracing for the datanode read/write path. Contributed by Elek, Marton.
    
    Closes #550.

 .../apache/hadoop/hdds/tracing/TracingUtil.java    | 14 ++++
 .../container/common/impl/HddsDispatcher.java      | 14 +++-
 .../CloseContainerCommandHandler.java              |  2 +
 .../common/transport/server/XceiverServerGrpc.java | 20 +++--
 .../server/ratis/ContainerStateMachine.java        | 89 +++++++++++-----------
 .../transport/server/ratis/XceiverServerRatis.java |  3 +-
 6 files changed, 88 insertions(+), 54 deletions(-)

commit b99e178bdec595c64af33507aa1e292b69dc0e6e
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Mar 11 21:15:40 2019 -0700

    HDDS-1245. OM delegation expiration time should use Time.now instead … (#587)
    
    Closes #587.

 .../ozone/security/OzoneDelegationTokenSecretManager.java  | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit ad37b7a2d54d9c9f8fe05c74bce431853fab435d
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Mon Mar 11 15:01:04 2019 -0700

    HDDS-596. Add robot test for OM Block Token. Contributed by Ajay Kumar.
    
    This closes (#581)

 .../certificate/authority/DefaultCAServer.java     | 28 +++++++++++++++++-----
 .../main/compose/ozonesecure/docker-compose.yaml   |  1 -
 .../src/main/compose/ozonesecure/docker-config     |  1 +
 .../src/main/smoketest/security/ozone-secure.robot |  5 ++--
 hadoop-ozone/dist/src/main/smoketest/test.sh       |  2 ++
 5 files changed, 28 insertions(+), 9 deletions(-)

commit 9d9f384a81243f1a5935d9172253e26c58583a74
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Mon Mar 11 23:15:49 2019 +0530

    HDDS-1173. Fix a data corruption bug in BlockOutputStream. Contributed by Shashikant Banerjee.

 .../hadoop/hdds/scm/storage/BlockOutputStream.java | 232 +++++++++------------
 .../apache/hadoop/hdds/scm/storage/BufferPool.java | 106 ++++++++++
 .../ozone/client/io/BlockOutputStreamEntry.java    |  23 +-
 .../hadoop/ozone/client/io/KeyOutputStream.java    |  21 +-
 .../rpc/TestCloseContainerHandlingByClient.java    |  62 ++++--
 .../commandhandler/TestBlockDeletion.java          |   2 +-
 6 files changed, 279 insertions(+), 167 deletions(-)

commit 17ab20e902bcabd265d503c65b551f41e34615d5
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Mar 11 09:19:19 2019 -0700

    HDDS-1236. Fix incorrect Ozone ClientProtocol KerberosInfo annotation. Contributed by Xiaoyu Yao. (#573)

 .../java/org/apache/hadoop/ozone/client/protocol/ClientProtocol.java   | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit bb46c667ac2f936a11ed9dbe2139aa62a94ab1ec
Author: Lokesh Jain <ljain@apache.org>
Date:   Mon Mar 11 14:54:44 2019 +0530

    HDDS-1220. KeyManager#openKey should release the bucket lock before doing an allocateBlock. Contributed by Lokesh Jain.

 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 126 +++++------
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java | 230 ++++++++++-----------
 2 files changed, 161 insertions(+), 195 deletions(-)

commit 4db0dee54ac1a83b3c35947145feaf8d70f9eb19
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Mar 9 21:50:46 2019 -0800

    HDDS-1240. Fix check style issues caused by HDDS-1196.

 .../common/src/main/java/org/apache/hadoop/hdds/HddsConfigKeys.java    | 3 ---
 .../main/java/org/apache/hadoop/hdds/scm/block/BlockManagerImpl.java   | 2 --
 .../src/test/java/org/apache/hadoop/ozone/om/TestScmChillMode.java     | 1 -
 3 files changed, 6 deletions(-)

commit 03f08f4eba25d12d45f69a0dae821ec2195f5927
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Mar 9 21:42:17 2019 -0800

    HDDS-1242. In S3 when bucket already exists, it should just return location.

 .../dist/src/main/smoketest/s3/bucketcreate.robot  | 34 ++++++++++++++++++++++
 .../hadoop/ozone/s3/endpoint/EndpointBase.java     |  2 +-
 2 files changed, 35 insertions(+), 1 deletion(-)

commit 6669fcd56fedab2cfb89aaace38eea118c562e5b
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Sat Mar 9 09:38:01 2019 -0800

    HDDS-1235. BaseHttpServer NPE is HTTP policy is HTTPS_ONLY. Contributed by Xiaoyu Yao.
    
    Closes #572

 .../java/org/apache/hadoop/hdds/server/BaseHttpServer.java     | 10 +++-------
 1 file changed, 3 insertions(+), 7 deletions(-)

commit 0492e240ae5335ccf621c09475c50d2f1ea84df8
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Sat Mar 9 22:46:20 2019 +0530

    HDDS-1238. Fix Ratis Snapshot creation error if the snapshot file already exists in ContainerStateMachine. Contributed by Shashikant Banerjee.

 .../transport/server/ratis/ContainerStateMachine.java     | 15 ++++-----------
 1 file changed, 4 insertions(+), 11 deletions(-)

commit 29e42e3cbf060d744a075d428db6070469a36088
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Mar 8 18:55:31 2019 +0100

    HDDS-1213. Support plain text S3 MPU initialization request.

 .../dist/src/main/smoketest/commonlib.robot        |   8 +-
 .../src/main/smoketest/s3/MultipartUpload.robot    | 135 ++++++++++-----------
 .../dist/src/main/smoketest/s3/objectputget.robot  |   4 +-
 .../endpoint/PlainTextMultipartUploadReader.java   |  66 ++++++++++
 4 files changed, 139 insertions(+), 74 deletions(-)

commit 66d071a2564314d7b2138c885c2b86e0bc796842
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Mar 8 07:25:33 2019 -0800

    HDDS-1196. Add a ReplicationStartTimer class. (#567)

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  11 +++
 .../common/src/main/resources/ozone-default.xml    |  10 ++
 .../apache/hadoop/hdds/scm/block/BlockManager.java |   7 ++
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |   7 +-
 .../hdds/scm/chillmode/ChillModeHandler.java       | 106 +++++++++++++++++++++
 .../hdds/scm/chillmode/SCMChillModeManager.java    |  20 +++-
 .../replication/ReplicationActivityStatus.java     |  56 ++++-------
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |   5 +-
 .../hdds/scm/server/SCMClientProtocolServer.java   |  21 ++--
 .../hdds/scm/server/StorageContainerManager.java   |  19 ++--
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  19 ++--
 .../hdds/scm/chillmode/TestChillModeHandler.java   | 103 ++++++++++++++++++++
 .../replication/TestReplicationActivityStatus.java |  32 +++++--
 .../scm/server/TestSCMClientProtocolServer.java    |  12 ++-
 .../apache/hadoop/ozone/om/TestScmChillMode.java   |   4 +-
 .../ozone/genesis/BenchMarkOzoneManager.java       |   4 +-
 .../apache/hadoop/ozone/genesis/BenchMarkSCM.java  |   4 +-
 17 files changed, 361 insertions(+), 79 deletions(-)

commit 6c4dc84afaf36fa9f9cd13c3b5b657992fdfbd98
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri Mar 8 16:59:41 2019 +0800

    HDDS-1232. Recon Container DB service definition. Contributed by Aravindan Vijayan.

 .../apache/hadoop/utils/LevelDBStoreIterator.java  |   5 +
 .../org/apache/hadoop/utils/MetaStoreIterator.java |   5 +
 .../apache/hadoop/utils/RocksDBStoreIterator.java  |   5 +
 .../common/src/main/resources/ozone-default.xml    |  94 +++++++++++++
 .../org/apache/hadoop/utils/TestMetadataStore.java |  52 ++++++++
 .../org/apache/hadoop/hdds/server/ServerUtils.java |  30 +++--
 hadoop-ozone/dist/pom.xml                          |   7 +
 hadoop-ozone/integration-test/pom.xml              |   4 +
 .../hadoop/ozone/TestOzoneConfigurationFields.java |   2 +
 hadoop-ozone/ozone-recon/pom.xml                   |  13 +-
 .../apache/hadoop/ozone/recon/ReconConstants.java  |  34 +++++
 .../hadoop/ozone/recon/ReconControllerModule.java  |   7 +
 .../apache/hadoop/ozone/recon/ReconHttpServer.java |  20 +--
 ...nfiguration.java => ReconServerConfigKeys.java} |  12 +-
 .../ozone/recon/api/types/ContainerKeyPrefix.java  |  50 +++++++
 .../recon/spi/ContainerDBServiceProvider.java      |  58 ++++++++
 .../ozone/recon/spi/ReconContainerDBProvider.java  |  77 +++++++++++
 .../spi/impl/ContainerDBServiceProviderImpl.java   | 138 +++++++++++++++++++
 .../hadoop/ozone/recon/spi/impl/package-info.java  |  22 +++
 .../impl/TestContainerDBServiceProviderImpl.java   | 148 +++++++++++++++++++++
 .../hadoop/ozone/recon/spi/impl/package-info.java  |  21 +++
 hadoop-ozone/pom.xml                               |   5 +
 22 files changed, 785 insertions(+), 24 deletions(-)

commit 18dbd399ca8cd7aa655acb024785cc98bba322bd
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Thu Mar 7 14:41:52 2019 -0800

    HDDS-594. SCM CA: DN sends CSR and uses certificate issued by SCM. Contributed by Ajay Kumar. (#547)

 .../java/org/apache/hadoop/hdds/HddsUtils.java     |  34 +++
 .../certificate/authority/CertificateApprover.java |   7 +-
 .../certificate/authority/DefaultApprover.java     |  36 ++-
 .../certificate/authority/DefaultCAServer.java     |   2 +-
 .../certificates/utils/CertificateSignRequest.java |   4 -
 .../x509/certificate/authority/MockApprover.java   |   7 +-
 .../certificate/authority/TestDefaultCAServer.java |  84 ++++++-
 .../certificates/TestCertificateSignRequest.java   |  18 --
 .../apache/hadoop/ozone/HddsDatanodeService.java   | 130 +++++++++-
 .../hadoop/ozone/TestHddsSecureDatanodeInit.java   | 269 +++++++++++++++++++++
 10 files changed, 552 insertions(+), 39 deletions(-)

commit f7b8dd601e6c18d0e7b53e9b0f552655f4dd404f
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Thu Mar 7 14:06:29 2019 +0100

    HDDS-1226. ozone-filesystem jar missing in hadoop classpath
    
    Closes #560

 hadoop-hdds/docs/content/OzoneFS.md                            | 4 ++--
 hadoop-ozone/dist/dev-support/bin/dist-layout-stitching        | 1 -
 hadoop-ozone/dist/pom.xml                                      | 2 +-
 hadoop-ozone/dist/src/main/compose/ozonefs/docker-compose.yaml | 2 +-
 hadoop-ozone/{ozonefs-lib => ozonefs-lib-current}/pom.xml      | 2 +-
 hadoop-ozone/pom.xml                                           | 4 ++--
 6 files changed, 7 insertions(+), 8 deletions(-)

commit d6ad6c8c1a5cd910fe6094bbc4f9f3920b2387e5
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Mar 7 11:02:53 2019 +0100

    HDDS-1225. Provide docker-compose for OM HA.
    
    Closes #562

 .../dist/src/main/compose/ozone-om-ha/.env         | 17 +++++
 .../main/compose/ozone-om-ha/docker-compose.yaml   | 82 ++++++++++++++++++++++
 .../src/main/compose/ozone-om-ha/docker-config     | 81 +++++++++++++++++++++
 3 files changed, 180 insertions(+)

commit bb41120e1fa832aedec4c745c7e70d28d32a153c
Author: Hanisha Koneru <koneru.hanisha@gmail.com>
Date:   Wed Mar 6 19:44:55 2019 -0800

    HDDS-1175. Serve read requests directly from RocksDB. (#557)
    
    HDDS-1175. Serve read requests directly from RocksDB.

 .../common/src/main/resources/ozone-default.xml    |  10 ++
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |   7 +
 .../ozone/om/exceptions/NotLeaderException.java    |  51 +++++++
 .../ozone/om/ha/OMFailoverProxyProvider.java       |  10 +-
 .../hadoop/ozone/om/helpers}/OMRatisHelper.java    |  36 ++---
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  37 +++--
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java |  42 +++++-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   4 +-
 .../ozone/om/ratis/OzoneManagerRatisClient.java    |   1 +
 .../ozone/om/ratis/OzoneManagerRatisServer.java    | 157 ++++++++++++++++++++-
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |  19 ++-
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  45 +++++-
 12 files changed, 374 insertions(+), 45 deletions(-)

commit ea29c1070f37275f6969c6c3264422363027af28
Author: Vivek Ratnavel Subramanian <vivekratnavel90@gmail.com>
Date:   Wed Mar 6 17:43:57 2019 -0800

    HDDS-1093. Configuration tab in OM/SCM ui is not displaying the correct values.

 .../hadoop/hdds/conf/OzoneConfiguration.java       |  29 +++++
 .../hadoop/hdds/conf/TestOzoneConfiguration.java   | 143 +++++++++++++++++++++
 .../org/apache/hadoop/hdds/conf/package-info.java  |  22 ++++
 .../src/main/resources/webapps/static/ozone.js     |   2 -
 .../hadoop/hdds/scm/node/TestSCMNodeManager.java   |   2 +-
 hadoop-ozone/dist/src/main/smoketest/test.sh       |   2 +-
 6 files changed, 196 insertions(+), 4 deletions(-)

commit 606843cd7462251526bef3070ca5062a848fb6f2
Author: Márton Elek <elek@apache.org>
Date:   Fri Feb 15 13:52:25 2019 +0100

    HDDS-1113. Remove default dependencies from hadoop-ozone project. Contributed by Elek, Marton.
    
    Closes #490

 hadoop-ozone/client/pom.xml              |  5 +++
 hadoop-ozone/common/pom.xml              | 59 ++++++++++++++++++++++++++++++
 hadoop-ozone/integration-test/pom.xml    | 24 +++++++++++++
 hadoop-ozone/objectstore-service/pom.xml |  6 ++++
 hadoop-ozone/ozone-manager/pom.xml       | 31 ++++++++++++----
 hadoop-ozone/ozone-recon/pom.xml         |  4 +++
 hadoop-ozone/pom.xml                     | 62 --------------------------------
 hadoop-ozone/s3gateway/pom.xml           |  5 +++
 hadoop-ozone/tools/pom.xml               | 12 ++++++-
 9 files changed, 139 insertions(+), 69 deletions(-)

commit dd272b0caf903cabadc0d5c53d996bfd37748309
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Mar 6 21:38:21 2019 +0530

    HDDS-1210. Ratis pipeline creation doesn't check raft client reply status during initialization. Contributed by Mukul Kumar Singh.

 .../hadoop/hdds/scm/pipeline/PipelineFactory.java  |  7 ++++
 .../hdds/scm/pipeline/RatisPipelineProvider.java   |  2 +-
 .../hdds/scm/pipeline/RatisPipelineUtils.java      | 15 ++++++--
 .../hdds/scm/pipeline/SCMPipelineManager.java      |  9 +++++
 .../TestHealthyPipelineChillModeRule.java          | 25 +++++++++++---
 .../TestOneReplicaPipelineChillModeRule.java       | 11 ++++--
 .../scm/chillmode/TestSCMChillModeManager.java     | 11 ++++--
 .../container/TestCloseContainerEventHandler.java  | 10 ++++--
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  | 11 ++++++
 .../scm/pipeline/MockRatisPipelineProvider.java    | 40 ++++++++++++++++++++++
 .../scm/pipeline/TestRatisPipelineProvider.java    |  2 +-
 .../hdds/scm/pipeline/TestRatisPipelineUtils.java  | 25 ++++++++++++--
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  | 28 +++++++++++++--
 13 files changed, 176 insertions(+), 20 deletions(-)

commit 9c0cba7e7478fd309697db4faba0273615547ddc
Author: Ajay Kumar <ajay@apache.org>
Date:   Wed Mar 6 15:17:54 2019 +0100

    HDDS-1216. Change name of ozoneManager service in docker compose files to om.
    
    Closes #553

 .../main/compose/ozone-hdfs/docker-compose.yaml    |  4 +--
 .../dist/src/main/compose/ozone-hdfs/docker-config |  4 +--
 .../src/main/compose/ozone/docker-compose.yaml     |  4 +--
 .../dist/src/main/compose/ozone/docker-config      |  4 +--
 .../main/compose/ozoneblockade/docker-compose.yaml |  4 +--
 .../src/main/compose/ozoneblockade/docker-config   |  4 +--
 .../src/main/compose/ozonefs/docker-compose.yaml   |  6 ++---
 .../dist/src/main/compose/ozonefs/docker-config    |  4 +--
 .../src/main/compose/ozoneperf/docker-compose.yaml |  4 +--
 .../dist/src/main/compose/ozoneperf/docker-config  |  4 +--
 .../src/main/compose/ozones3/docker-compose.yaml   |  4 +--
 .../dist/src/main/compose/ozones3/docker-config    |  2 +-
 .../main/compose/ozonesecure/docker-compose.yaml   |  2 +-
 .../src/main/compose/ozonesecure/docker-config     |  2 +-
 .../main/compose/ozonetrace/docker-compose.yaml    |  4 +--
 .../dist/src/main/compose/ozonetrace/docker-config |  2 +-
 .../dist/src/main/smoketest/basic/basic.robot      |  2 +-
 .../src/main/smoketest/basic/ozone-shell.robot     |  2 +-
 .../dist/src/main/smoketest/ozonefs/ozonefs.robot  | 30 +++++++++++-----------
 hadoop-ozone/dist/src/main/smoketest/test.sh       |  2 +-
 20 files changed, 47 insertions(+), 47 deletions(-)

commit 3ae84d87bb5bb6b5b59456f2610ffc72c5a53da5
Author: Lokesh Jain <ljain@apache.org>
Date:   Wed Mar 6 17:00:37 2019 +0530

    HDDS-1208. ContainerStateMachine should set chunk data as state machine data for ratis. Contributed by Lokesh Jain.

 .../server/ratis/ContainerStateMachine.java        | 73 +++++++---------------
 1 file changed, 23 insertions(+), 50 deletions(-)

commit 7e3cb6eb4daa87b5c312d9ae6d73616aa93c6dda
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Mar 6 10:00:16 2019 +0530

    HDDS-1184. Parallelization of write chunks in datanodes is broken. Contributed by Shashikant Banerjee.

 .../src/main/proto/DatanodeContainerProtocol.proto |  1 +
 .../server/ratis/ContainerStateMachine.java        | 60 ++++++++++++----------
 2 files changed, 33 insertions(+), 28 deletions(-)

commit 4a014ac83eb0207e0b150ed45284c35196ba8b55
Author: Arpit Agarwal <arp@apache.org>
Date:   Tue Mar 5 15:54:29 2019 -0800

    HDDS-1188. Implement a skeleton patch for Recon server with initial set of interfaces. Contributed by Siddharth Wagle.

 .../org/apache/hadoop/hdds/cli/GenericCli.java     |  3 +-
 hadoop-ozone/ozone-recon/pom.xml                   | 50 ++++++++++++
 .../ozone/recon/OzoneConfigurationProvider.java    | 43 +++++++++++
 .../hadoop/ozone/recon/ReconApplication.java       | 29 +++++++
 .../hadoop/ozone/recon/ReconControllerModule.java  | 36 +++++++++
 .../apache/hadoop/ozone/recon/ReconHttpServer.java | 88 ++++++++++++++++++++++
 .../org/apache/hadoop/ozone/recon/ReconServer.java | 76 +++++++++++++++++++
 .../ozone/recon/ReconServerConfiguration.java      | 56 ++++++++++++++
 .../ozone/recon/api/ContainerKeyService.java       | 43 +++++++++++
 .../hadoop/ozone/recon/api/package-info.java       | 23 ++++++
 .../ozone/recon/api/types/ContainerMetadata.java   | 73 ++++++++++++++++++
 .../ozone/recon/api/types/IsoDateAdapter.java      | 48 ++++++++++++
 .../hadoop/ozone/recon/api/types/KeyMetadata.java  | 88 ++++++++++++++++++++++
 .../hadoop/ozone/recon/api/types/package-info.java | 22 ++++++
 .../apache/hadoop/ozone/recon/package-info.java    | 22 ++++++
 .../hadoop/ozone/recon/recovery/package-info.java  | 22 ++++++
 .../recon/spi/HddsDatanodeServiceProvider.java     | 25 ++++++
 .../recon/spi/OzoneManagerServiceProvider.java     | 25 ++++++
 .../recon/spi/StorageContainerServiceProvider.java | 25 ++++++
 .../hadoop/ozone/recon/spi/package-info.java       | 24 ++++++
 .../main/resources/webapps.recon.WEB-INF/web.xml   | 33 ++++++++
 .../apache/hadoop/ozone/recon/package-info.java    | 21 ++++++
 hadoop-ozone/pom.xml                               |  1 +
 23 files changed, 874 insertions(+), 2 deletions(-)

commit 16efc8992ece539c584bb5faab05efc0aeb010f7
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Tue Mar 5 21:04:57 2019 +0100

    HDDS-919. Enable prometheus endpoints for Ozone datanodes (#502)
    
    Pull request from Elek, Márton. (#502)

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     | 20 +++++
 .../common/src/main/resources/ozone-default.xml    | 66 ++++++++++++++++-
 .../hadoop/ozone/HddsDatanodeHttpServer.java       | 86 ++++++++++++++++++++++
 .../apache/hadoop/ozone/HddsDatanodeService.java   | 16 ++++
 .../main/resources/webapps/hddsDatanode/.gitkeep   | 17 +++++
 .../src/main/compose/ozone/docker-compose.yaml     |  1 +
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  1 +
 7 files changed, 206 insertions(+), 1 deletion(-)

commit 2cbf0728996726ae34bd49339e481b2d5fb07c69
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Mar 5 11:46:36 2019 -0800

    HDDS-1193. Refactor ContainerChillModeRule and DatanodeChillMode rule. (#534)
    
    * HDDS-1193. Refactor ContainerChillModeRule and DatanodeChillMode rule.

 .../hdds/scm/chillmode/ContainerChillModeRule.java | 43 +++++++++++++++-------
 .../hdds/scm/chillmode/DataNodeChillModeRule.java  | 41 +++++++++++++++------
 .../hdds/scm/chillmode/SCMChillModeManager.java    | 30 ++++++---------
 .../hdds/scm/server/StorageContainerManager.java   |  2 -
 .../scm/chillmode/TestSCMChillModeManager.java     | 14 ++-----
 5 files changed, 75 insertions(+), 55 deletions(-)

commit d7d0e104f1a8557c3bf5230201d8a0c5f8668ba7
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Mar 5 11:31:09 2019 -0800

    HDDS-1171. Add benchmark for OM and OM client in Genesis.
    Contributed by Lokesh Jain.

 .../hadoop/ozone/genesis/BenchMarkOMClient.java    | 153 +++++++++++++++++
 .../ozone/genesis/BenchMarkOzoneManager.java       | 183 +++++++++++++++++++++
 ...enchMarkBlockManager.java => BenchMarkSCM.java} | 108 ++++--------
 .../org/apache/hadoop/ozone/genesis/Genesis.java   |  25 +--
 .../apache/hadoop/ozone/genesis/GenesisUtil.java   |  96 +++++++++++
 5 files changed, 475 insertions(+), 90 deletions(-)

commit fd1124e60d5d21eeaba8987533340691e5a0a376
Author: Arpit Agarwal <arp@apache.org>
Date:   Tue Mar 5 10:25:31 2019 -0800

    HDDS-1218. Do the dist-layout-stitching for Ozone after the test-compile phase. Contributed by Marton Elek.

 hadoop-ozone/dist/pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5522c1edf0db38a7804d8ab94db9d1c3028fd6e0
Merge: 14e80b33 072e0ed8
Author: Arpit Agarwal <arp7@users.noreply.github.com>
Date:   Tue Mar 5 10:19:05 2019 -0800

    Merge pull request #555 from elek/HDDS-1219
    
    HDDS-1219. TestContainerActionsHandler.testCloseContainerAction has an intermittent failure

commit 14e80b33869f2513156479d1b74cea474f81844d
Merge: 7b51cdc6 e0de4176
Author: Arpit Agarwal <arp7@users.noreply.github.com>
Date:   Tue Mar 5 10:15:55 2019 -0800

    Merge pull request #556 from elek/HDDS-1222
    
    HDDS-1222. Remove TestContainerSQLCli unit test stub

commit 7b51cdc66abf2c04a6c37f30865d6a679ff88460
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Tue Mar 5 09:24:22 2019 -0800

    HDDS-1072. Implement RetryProxy and FailoverProxy for OM client.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  17 ++
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   3 +
 .../common/src/main/resources/ozone-default.xml    |  43 +++-
 .../ozone/client/protocol/ClientProtocol.java      |   4 +-
 .../hadoop/ozone/client/rest/RestClient.java       |   4 +-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  21 +-
 .../hadoop/ozone/client/rpc/ha/OMProxyInfo.java    |  49 ----
 .../ozone/client/rpc/ha/OMProxyProvider.java       | 177 --------------
 .../ozone/om/ha/OMFailoverProxyProvider.java       | 269 +++++++++++++++++++++
 .../apache/hadoop/ozone/om}/ha/package-info.java   |   2 +-
 .../ozone/om/protocol/OzoneManagerProtocol.java    |   9 +
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 107 +++++++-
 .../src/main/proto/OzoneManagerProtocol.proto      |   2 +
 .../hadoop/ozone/MiniOzoneHAClusterImpl.java       |  38 +--
 .../client/rpc/TestOzoneRpcClientAbstract.java     |   8 +-
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 184 +++++++++++---
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   6 +
 .../hadoop/ozone/om/ratis/OMRatisHelper.java       |   9 +-
 .../ozone/om/ratis/OzoneManagerRatisClient.java    |  27 ++-
 ...OzoneManagerProtocolServerSideTranslatorPB.java |   3 +-
 .../om/ratis/TestOzoneManagerRatisServer.java      |  23 --
 21 files changed, 660 insertions(+), 345 deletions(-)

commit c6ad1abeaff6156534a18ac60f67fee09fcc1dbf
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Mar 5 22:09:25 2019 +0530

    HDDS-935. Avoid creating an already created container on a datanode in case of disk removal followed by datanode restart. Contributed by Shashikant Banerjee.

 .../src/main/proto/DatanodeContainerProtocol.proto |  5 ++
 .../ozone/container/common/impl/ContainerSet.java  | 22 ++++++-
 .../container/common/impl/HddsDispatcher.java      | 73 +++++++++++++++++++---
 .../common/interfaces/ContainerDispatcher.java     |  8 +++
 .../server/ratis/ContainerStateMachine.java        | 70 ++++++++++++++++++---
 .../transport/server/ratis/DispatcherContext.java  | 33 ++++++++--
 .../container/keyvalue/TestKeyValueHandler.java    |  3 +
 .../rpc/TestContainerStateMachineFailures.java     | 37 ++++++++++-
 .../transport/server/ratis/TestCSMMetrics.java     |  5 ++
 .../container/server/TestContainerServer.java      |  5 ++
 .../server/TestSecureContainerServer.java          |  4 ++
 11 files changed, 239 insertions(+), 26 deletions(-)

commit c9b6e6752bfa3754989de94548d6964c8829a1f8
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Tue Mar 5 08:37:10 2019 -0800

    HDDS-1156. testDelegationToken is failing in TestSecureOzoneCluster. Contributed by Ajay Kumar.

 .../java/org/apache/hadoop/ozone/TestSecureOzoneCluster.java | 12 ++++--------
 .../main/java/org/apache/hadoop/ozone/om/OzoneManager.java   |  3 +--
 2 files changed, 5 insertions(+), 10 deletions(-)

commit e0de41765873916a687b3a7d31fbee651dc72522
Author: Márton Elek <elek@apache.org>
Date:   Tue Mar 5 16:34:27 2019 +0100

    HDDS-1222. Remove TestContainerSQLCli unit test stub. Contributed by Elek, Marton.

 .../hadoop/ozone/scm/TestContainerSQLCli.java      | 262 ---------------------
 1 file changed, 262 deletions(-)

commit 072e0ed87d26e6dc522b28672ceb2cd510442fbd
Author: Márton Elek <elek@apache.org>
Date:   Tue Mar 5 13:45:33 2019 +0100

    HDDS-1219. TestContainerActionsHandler.testCloseContainerAction has an intermittent failure. Contributed by Elek, Marton.

 .../apache/hadoop/hdds/scm/container/TestContainerActionsHandler.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d20f4995cc3b77b719ca3fbf1acba5ab3d6b735d
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Mon Mar 4 23:35:00 2019 +0100

    HDDS-623. On SCM UI, Node Manager info is empty (#523)
    
    * HDDS-623. On SCM UI, Node Manager info is empty. Contributed by Elek, Marton.

 .../src/main/resources/webapps/scm/scm-overview.html   | 18 +-----------------
 .../server-scm/src/main/resources/webapps/scm/scm.js   |  4 ----
 2 files changed, 1 insertion(+), 21 deletions(-)

commit 80c6790a60d50ceca88d5c9d6ec70b3745ff3ff2
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Mar 4 12:00:16 2019 -0800

    HDDS-1136 : Add metric counters to capture the RocksDB checkpointing statistics.
    Contributed by Aravindan Vijayan.

 .../org/apache/hadoop/utils/db/DBCheckpoint.java   |   5 +
 .../hadoop/utils/db/RDBCheckpointManager.java      |  23 ++-
 .../hadoop/ozone/om/TestOMDbCheckpointServlet.java | 176 +++++++++++++++++++++
 .../hadoop/ozone/om/OMDBCheckpointServlet.java     |  26 ++-
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |  32 ++++
 5 files changed, 258 insertions(+), 4 deletions(-)

commit c95dfcee1f41acd2ca9382c0b6b2e70fd9b8ebba
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Mar 4 10:37:26 2019 -0800

    HDDS-1183. Override getDelegationToken API for OzoneFileSystem. Contributed by Xiaoyu Yao. (#545)

 .../security/token/OzoneBlockTokenIdentifier.java  | 13 +++++
 .../ozone/security/OzoneTokenIdentifier.java       | 13 -----
 .../apache/hadoop/fs/ozone/OzoneClientAdapter.java |  5 ++
 .../hadoop/fs/ozone/OzoneClientAdapterImpl.java    | 65 +++++++++++++++++++++-
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    | 13 +++++
 5 files changed, 95 insertions(+), 14 deletions(-)

commit bfb1735bd9b6854812636ef607ef8e98a6a717cd
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Mar 1 20:05:12 2019 -0800

    Revert "HDDS-1072. Implement RetryProxy and FailoverProxy for OM client."
    
    This reverts commit 8e1225991d8da7d6801fc3753319139873f23bc9.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  17 --
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   3 -
 .../common/src/main/resources/ozone-default.xml    |  43 +---
 .../ozone/client/protocol/ClientProtocol.java      |   4 +-
 .../hadoop/ozone/client/rest/RestClient.java       |   4 +-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  18 +-
 .../hadoop/ozone/client/rpc/ha/OMProxyInfo.java    |  49 ++++
 .../ozone/client/rpc/ha/OMProxyProvider.java       | 177 ++++++++++++++
 .../hadoop/ozone/client/rpc}/ha/package-info.java  |   2 +-
 .../ozone/om/ha/OMFailoverProxyProvider.java       | 266 ---------------------
 .../ozone/om/protocol/OzoneManagerProtocol.java    |   7 -
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 105 +-------
 .../src/main/proto/OzoneManagerProtocol.proto      |   2 -
 .../hadoop/ozone/MiniOzoneHAClusterImpl.java       |  38 ++-
 .../client/rpc/TestOzoneRpcClientAbstract.java     |   8 +-
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 184 +++-----------
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   6 -
 .../hadoop/ozone/om/ratis/OMRatisHelper.java       |   9 +-
 .../ozone/om/ratis/OzoneManagerRatisClient.java    |  27 +--
 ...OzoneManagerProtocolServerSideTranslatorPB.java |   3 +-
 .../om/ratis/TestOzoneManagerRatisServer.java      |  23 ++
 21 files changed, 342 insertions(+), 653 deletions(-)

commit 1d07fe6e1864b9bc5528c5a960017bb77ab432f2
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Fri Mar 1 16:19:43 2019 -0800

    Revert "HDDS-1183. Override getDelegationToken API for OzoneFileSystem. Contr…" (#544)
    
    * Revert "Fix checkstyle issue"
    
    This reverts commit 78c8a3323ea31afe7512d41a1bde0d0103c64622.
    
    * Revert "HDDS-1183. Override getDelegationToken API for OzoneFileSystem. Contributed by Xiaoyu Yao."
    
    This reverts commit 6fef6fc5ee5d9b72ba659d6a4289f571e1eabf1c.

 .../security/token/OzoneBlockTokenIdentifier.java  | 13 -----
 .../ozone/security/OzoneTokenIdentifier.java       | 13 +++++
 .../apache/hadoop/fs/ozone/OzoneClientAdapter.java |  5 --
 .../hadoop/fs/ozone/OzoneClientAdapterImpl.java    | 65 +---------------------
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    | 13 -----
 5 files changed, 14 insertions(+), 95 deletions(-)

commit 8d8d475d9c35b5a90723affb232a2f40ef9003f2
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Feb 27 20:30:31 2019 -0800

    Fix checkstyle issue

 .../main/java/org/apache/hadoop/ozone/security/OzoneTokenIdentifier.java | 1 -
 1 file changed, 1 deletion(-)

commit 37f514fd8e9e0a8d849deb43d7de810382bfce0d
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Feb 27 14:59:31 2019 -0800

    HDDS-1183. Override getDelegationToken API for OzoneFileSystem. Contributed by Xiaoyu Yao.

 .../security/token/OzoneBlockTokenIdentifier.java  | 13 +++++
 .../ozone/security/OzoneTokenIdentifier.java       | 12 ----
 .../apache/hadoop/fs/ozone/OzoneClientAdapter.java |  5 ++
 .../hadoop/fs/ozone/OzoneClientAdapterImpl.java    | 65 +++++++++++++++++++++-
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    | 13 +++++
 5 files changed, 95 insertions(+), 13 deletions(-)

commit 6cdb50bd39599a9a5e394d2a6c9d3f0bfbf15bbe
Author: Ajay Kumar <ajay@apache.org>
Date:   Fri Mar 1 10:09:15 2019 -0800

    HDDS-134. SCM CA: OM sends CSR and uses certificate issued by SCM. Contributed by Ajay Kumar.

 .../x509/certificate/client/CertificateClient.java |   2 +-
 .../certificate/client/DNCertificateClient.java    |  20 +-
 .../client/DefaultCertificateClient.java           |  59 +++---
 .../certificate/client/OMCertificateClient.java    |  20 +-
 .../x509/certificate/utils/CertificateCodec.java   |  26 +++
 .../certificates/utils/CertificateSignRequest.java |  21 +-
 .../x509/exceptions/CertificateException.java      |   1 +
 .../hadoop/hdds/security/x509/keys/KeyCodec.java   |  11 ++
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   2 +
 .../org/apache/hadoop/ozone/OzoneSecurityUtil.java |  58 ++++++
 .../common/src/main/resources/ozone-default.xml    |   2 +-
 .../client/TestCertificateClientInit.java          |  33 ++--
 .../client/TestDefaultCertificateClient.java       |  23 ++-
 .../security/TestOzoneBlockTokenSecretManager.java |   2 +-
 .../TestOzoneDelegationTokenSecretManager.java     |   2 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   8 +-
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 115 ++++++++++-
 .../ozone/client/CertificateClientTestImpl.java    |  40 ++--
 .../hadoop/ozone/om/TestSecureOzoneManager.java    | 218 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 176 +++++++++++++++--
 20 files changed, 739 insertions(+), 100 deletions(-)

commit f1e2096d44813dbeead70c814a87c8855e29fa67
Merge: 52319935 bf810fa9
Author: Ajay Yadav <7813154+ajayydv@users.noreply.github.com>
Date:   Fri Mar 1 12:18:29 2019 -0800

    Merge pull request #542 from xiaoyuyao/HDDS-1204
    
    HDDS-1204. Fix ClassNotFound issue with javax.xml.bind.DatatypeConver…

commit bf810fa920ae7757d2376e6d786a70a5a11bc677
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Mar 1 10:49:39 2019 -0800

    HDDS-1204. Fix ClassNotFound issue with javax.xml.bind.DatatypeConverter used by DefaultProfile. Contributed by Xiaoyu Yao.

 .../x509/certificate/authority/PKIProfiles/DefaultProfile.java     | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 5231993526fab52d5b4b96e124a85ae686fa002a
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Fri Mar 1 23:30:28 2019 +0530

    HDDS-726. Ozone Client should update SCM to move the container out of allocation path in case a write transaction fails. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  20 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  73 ++++--
 .../hadoop/hdds/scm/storage/BlockInputStream.java  |   5 +-
 .../hadoop/hdds/scm/storage/BlockOutputStream.java |  51 ++--
 .../apache/hadoop/hdds/scm/XceiverClientReply.java |  27 ++-
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |  10 +-
 .../scm/container/common/helpers/ExcludeList.java  | 103 ++++++++
 .../scm/protocol/ScmBlockLocationProtocol.java     |   6 +-
 ...lockLocationProtocolClientSideTranslatorPB.java |   4 +-
 .../hdds/scm/storage/ContainerProtocolCalls.java   |   9 +-
 ...lockLocationProtocolServerSideTranslatorPB.java |   4 +-
 .../src/main/proto/ScmBlockLocationProtocol.proto  |   1 +
 hadoop-hdds/common/src/main/proto/hdds.proto       |   6 +
 .../apache/hadoop/hdds/scm/block/BlockManager.java |   6 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  29 ++-
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  |   5 +
 .../hdds/scm/pipeline/PipelineStateManager.java    |   9 +
 .../hadoop/hdds/scm/pipeline/PipelineStateMap.java |  53 ++++
 .../hdds/scm/pipeline/SCMPipelineManager.java      |  15 ++
 .../hdds/scm/server/SCMBlockProtocolServer.java    |  10 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  24 +-
 .../hadoop/ozone/client/OzoneClientUtils.java      |  15 ++
 .../ozone/client/io/BlockOutputStreamEntry.java    |  11 +
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 134 +++++++----
 .../ozone/om/protocol/OzoneManagerProtocol.java    |   8 +-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |   7 +-
 .../src/main/proto/OzoneManagerProtocol.proto      |   1 +
 .../rpc/TestCloseContainerHandlingByClient.java    |  86 ++-----
 .../client/rpc/TestFailureHandlingByClient.java    | 266 +++++++++++++++++++--
 .../ozone/container/ContainerTestHelper.java       |  60 +++++
 .../hadoop/ozone/om/TestOmBlockVersioning.java     |   3 +-
 .../org/apache/hadoop/ozone/om/KeyManager.java     |   7 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |   9 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   6 +-
 .../protocolPB/OzoneManagerRequestHandler.java     |   6 +-
 .../ozone/om/ScmBlockLocationTestIngClient.java    |   4 +-
 .../hadoop/ozone/om/TestKeyDeletingService.java    |   4 +-
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java |   6 +-
 .../ozone/genesis/BenchMarkBlockManager.java       |   3 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |   6 +-
 40 files changed, 872 insertions(+), 240 deletions(-)

commit 17019df272db04bc69e05ef4352115b834235d03
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Mar 1 00:27:39 2019 -0800

    HDDS-1072. Implement RetryProxy and FailoverProxy for OM client.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  17 ++
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   3 +
 .../common/src/main/resources/ozone-default.xml    |  43 +++-
 .../ozone/client/protocol/ClientProtocol.java      |   4 +-
 .../hadoop/ozone/client/rest/RestClient.java       |   4 +-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  18 +-
 .../hadoop/ozone/client/rpc/ha/OMProxyInfo.java    |  49 ----
 .../ozone/client/rpc/ha/OMProxyProvider.java       | 177 --------------
 .../ozone/om/ha/OMFailoverProxyProvider.java       | 266 +++++++++++++++++++++
 .../apache/hadoop/ozone/om}/ha/package-info.java   |   2 +-
 .../ozone/om/protocol/OzoneManagerProtocol.java    |   7 +
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 105 +++++++-
 .../src/main/proto/OzoneManagerProtocol.proto      |   2 +
 .../hadoop/ozone/MiniOzoneHAClusterImpl.java       |  38 +--
 .../client/rpc/TestOzoneRpcClientAbstract.java     |   8 +-
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 184 +++++++++++---
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   6 +
 .../hadoop/ozone/om/ratis/OMRatisHelper.java       |   9 +-
 .../ozone/om/ratis/OzoneManagerRatisClient.java    |  27 ++-
 ...OzoneManagerProtocolServerSideTranslatorPB.java |   3 +-
 .../om/ratis/TestOzoneManagerRatisServer.java      |  23 --
 21 files changed, 653 insertions(+), 342 deletions(-)

commit 63f5f0206c403e7d2f6bafe6af51053d5971d3f0
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Feb 28 21:41:36 2019 -0800

    HDDS-1182. Pipeline Rule where at least one datanode is reported in the pipeline.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   5 +
 .../common/src/main/resources/ozone-default.xml    |  10 +
 .../chillmode/OneReplicaPipelineChillModeRule.java | 142 +++++++++++++++
 .../hdds/scm/chillmode/SCMChillModeManager.java    |  14 ++
 .../TestOneReplicaPipelineChillModeRule.java       | 202 +++++++++++++++++++++
 .../hadoop/hdds/scm/chillmode/package-info.java    |  21 +++
 6 files changed, 394 insertions(+)

commit ec61ce33a03e58f47dd38816ffb48b2de119934e
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Feb 28 17:09:05 2019 -0800

    HDDS-1191. Replace Ozone Rest client with S3 client in smoketests and docs.
    Contributed Elek, Marton.

 hadoop-hdds/docs/content/CommandShell.md           |  11 +-
 hadoop-hdds/docs/content/Concepts.md               |  14 +-
 hadoop-hdds/docs/content/JavaApi.md                |  20 +-
 hadoop-hdds/docs/content/Rest.md                   | 544 ---------------------
 hadoop-hdds/docs/content/_index.md                 |   5 +-
 .../dist/src/main/smoketest/basic/basic.robot      |  11 -
 .../src/main/smoketest/basic/ozone-shell.robot     |   9 -
 7 files changed, 16 insertions(+), 598 deletions(-)

commit 0c1b31c5eded3a303036e149dd9a9eabe03354ae
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Feb 28 17:03:39 2019 -0800

    HDDS-1187.  Healthy pipeline Chill Mode rule to consider only pipelines with replication factor three.

 .../chillmode/HealthyPipelineChillModeRule.java    | 39 ++++++++---
 .../TestHealthyPipelineChillModeRule.java          | 77 ++++++++++++++++++++++
 .../scm/chillmode/TestSCMChillModeManager.java     | 26 ++++----
 3 files changed, 120 insertions(+), 22 deletions(-)

commit e154c8fa11e04b60f84bb33d4f33b333db0fddd2
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Feb 28 14:56:04 2019 +0100

    HDDS-1190. Fix jdk 11 issue for ozonesecure base image and docker-compose . Contributed by Xiaoyu Yao.

 hadoop-ozone/dist/src/main/compose/ozonesecure/docker-config            | 2 +-
 .../src/main/compose/ozonesecure/docker-image/docker-krb5/krb5.conf     | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

commit bf6f04dd15df3fcc526d4f94374222893699a68d
Author: Ajay Kumar <ajay@apache.org>
Date:   Wed Feb 27 17:00:42 2019 -0800

    HDDS-1061. DelegationToken: Add certificate serial id to Ozone Delegation Token Identifier. Contributed by Ajay Kumar.

 .../certificate/client/OMCertificateClient.java    |  2 +-
 .../security/OzoneBlockTokenSecretManager.java     | 21 ++++-
 .../OzoneDelegationTokenSecretManager.java         | 43 ++++++++++-
 .../hadoop/ozone/security/OzoneSecretManager.java  | 48 +++---------
 .../ozone/security/OzoneTokenIdentifier.java       | 29 ++++++-
 .../src/main/proto/OzoneManagerProtocol.proto      |  1 +
 .../security/TestOzoneBlockTokenSecretManager.java | 45 ++++++++++-
 .../TestOzoneDelegationTokenSecretManager.java     | 89 ++++++++++++++++++----
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  4 +-
 .../ozone/security/TestOzoneTokenIdentifier.java   | 23 +++---
 10 files changed, 229 insertions(+), 76 deletions(-)

commit 974e1808ef266078d385f345bbd66c38d1e014d7
Author: Ajay Kumar <ajay@apache.org>
Date:   Wed Feb 27 10:40:03 2019 -0800

    HDDS-1176. Allow persisting X509CertImpl to SCM certificate table. Contributed by Xiaoyu Yao.

 .../org/apache/hadoop/utils/db/CodecRegistry.java  | 40 +++++++++++++++++-----
 1 file changed, 31 insertions(+), 9 deletions(-)

commit 063e7a0cbcb0c86a378c4f63c4303f8ae63b0d28
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Feb 25 17:17:15 2019 -0800

    HDDS-1178. Healthy pipeline Chill Mode Rule.
    
    Closes #518

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   9 ++
 .../common/src/main/resources/ozone-default.xml    |  10 ++
 ...Rule.java => HealthyPipelineChillModeRule.java} | 106 ++++++++-----
 .../hdds/scm/chillmode/SCMChillModeManager.java    |  17 ++-
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |   8 +
 .../hdds/scm/pipeline/PipelineReportHandler.java   |  20 ++-
 .../hdds/scm/server/StorageContainerManager.java   |   2 +-
 .../TestHealthyPipelineChillModeRule.java          | 170 +++++++++++++++++++++
 .../hdds/scm/pipeline/TestPipelineClose.java       |  10 +-
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  |  10 +-
 10 files changed, 315 insertions(+), 47 deletions(-)

commit 4a39b18587743b29a3a1682ab8aadea57607dee7
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Feb 27 12:38:30 2019 +0100

    HDDS-1019. Use apache/hadoop-runner image to test ozone secure cluster. Contributed by Xiaoyu Yao.

 .../main/compose/ozonesecure/docker-compose.yaml   |  19 +--
 .../src/main/compose/ozonesecure/docker-config     |   2 +-
 .../ozonesecure/docker-image/runner/Dockerfile     |  39 ------
 .../ozonesecure/docker-image/runner/build.sh       |  26 ----
 .../docker-image/runner/scripts/envtoconf.py       | 115 ----------------
 .../docker-image/runner/scripts/krb5.conf          |  38 ------
 .../docker-image/runner/scripts/starter.sh         | 100 --------------
 .../docker-image/runner/scripts/transformation.py  | 150 ---------------------
 8 files changed, 4 insertions(+), 485 deletions(-)

commit e4f8e03b5f90aa9414d3990373a3b33c7951b69f
Author: Ajay Kumar <ajay@apache.org>
Date:   Tue Feb 26 18:57:43 2019 -0800

    HDDS-1177. Add validation to AuthorizationHeaderV4. Contributed by Ajay Kumar

 .../hadoop/ozone/s3/header/AWSConstants.java       |  67 +++++
 .../ozone/s3/header/AuthorizationHeaderV4.java     | 136 ++++++++--
 .../apache/hadoop/ozone/s3/header/Credential.java  |  16 +-
 .../ozone/s3/header/TestAuthorizationHeaderV4.java | 273 ++++++++++++++++++++-
 4 files changed, 460 insertions(+), 32 deletions(-)

commit dd0af206b0b697c4599beeda1b528f5ba32bc801
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Feb 26 14:33:54 2019 -0800

    HDDS-1174. Freon tests are failing with null pointer exception.
    Contributed by Shashikant Banerjee.

 .../java/org/apache/hadoop/ozone/freon/RandomKeyGenerator.java    | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 1e12bb55abc3629116693a31ab4f52122c76b270
Author: Márton Elek <elek@apache.org>
Date:   Tue Feb 26 16:11:02 2019 +0100

    HDDS-1104. Use picocli with Ozone genesis tool. Contributed by Lokesh Jain.

 .../org/apache/hadoop/ozone/genesis/Genesis.java   | 57 ++++++++++++++++------
 1 file changed, 43 insertions(+), 14 deletions(-)

commit dbd03edad7cc48f17a1cfd532831bf60c9989fe7
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Feb 26 06:02:10 2019 -0800

    HDDS-1038. Support Service Level Authorization for Ozone. Contributed by Xiaoyu Yao and Ajay Kumar.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     | 30 ++++++++
 .../hadoop/hdds/protocol/SCMSecurityProtocol.java  |  6 ++
 .../hdds/protocolPB/SCMSecurityProtocolPB.java     |  2 +-
 .../scm/protocol/ScmBlockLocationProtocol.java     |  6 ++
 .../protocol/StorageContainerLocationProtocol.java |  7 ++
 .../StorageContainerLocationProtocolPB.java        |  2 +-
 .../common/src/main/resources/ozone-default.xml    | 45 ++++++++++++
 .../protocol/StorageContainerDatanodeProtocol.java |  7 ++
 .../hdds/scm/server/SCMBlockProtocolServer.java    |  6 +-
 .../hdds/scm/server/SCMClientProtocolServer.java   |  6 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  6 ++
 .../hadoop/hdds/scm/server/SCMPolicyProvider.java  | 80 ++++++++++++++++++++++
 .../hdds/scm/server/SCMSecurityProtocolServer.java |  5 ++
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |  6 ++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  6 ++
 .../om/protocolPB/OzoneManagerProtocolPB.java      |  2 +-
 .../src/main/compose/ozonesecure/docker-config     |  7 ++
 .../apache/hadoop/ozone/client/rpc/TestBCSID.java  |  3 +-
 .../rpc/TestCloseContainerHandlingByClient.java    |  3 +-
 .../client/rpc/TestContainerStateMachine.java      |  3 +-
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  1 +
 hadoop-ozone/ozone-manager/pom.xml                 |  6 ++
 .../apache/hadoop/ozone/om/OMPolicyProvider.java   | 67 ++++++++++++++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 21 +++---
 24 files changed, 314 insertions(+), 19 deletions(-)

commit 1d0142d641b5bb87348b73a1cdc20f63b36cdb26
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Feb 25 13:22:28 2019 -0800

    HDDS-1151. Propagate the tracing id in ScmBlockLocationProtocol.
    Contributed by Elek, Marton.

 .../hdds/scm/protocol/ScmBlockLocationProtocol.java       |  3 ++-
 .../ScmBlockLocationProtocolClientSideTranslatorPB.java   | 14 +++++++++++---
 .../ScmBlockLocationProtocolServerSideTranslatorPB.java   |  7 ++++++-
 .../common/src/main/proto/ScmBlockLocationProtocol.proto  |  3 +++
 .../hadoop/hdds/scm/server/SCMBlockProtocolServer.java    |  5 +++++
 .../hadoop/hdfs/server/datanode/ObjectStoreHandler.java   | 15 +++++++++------
 .../java/org/apache/hadoop/ozone/om/OzoneManager.java     |  3 ++-
 .../hadoop/ozone/om/ScmBlockLocationTestIngClient.java    |  5 +++++
 8 files changed, 43 insertions(+), 12 deletions(-)

commit 1b8bebe6575e664bb52ef076d8b37f316947bb38
Author: Márton Elek <elek@apache.org>
Date:   Mon Feb 25 10:41:43 2019 +0100

    HDDS-1170. Fix the FindBugs issue in OzoneClientAdapterFactory. Contributed by Anu Engineer.

 .../java/org/apache/hadoop/fs/ozone/OzoneClientAdapterFactory.java     | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit b124b9e5ed4fe8dbb80b54c300691cf723483876
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Feb 24 15:39:41 2019 -0800

    HDDS-1070. Adding Node and Pipeline related metrics in SCM.
    Contributed by Nandakumar.

 .../hadoop/hdds/scm/node/SCMNodeManager.java       |   9 +-
 .../hadoop/hdds/scm/node/SCMNodeMetrics.java       |  93 ++++++++++++++
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  |   2 +-
 .../hdds/scm/pipeline/PipelineManagerMXBean.java   |  38 ++++++
 .../hdds/scm/pipeline/SCMPipelineManager.java      |  39 +++++-
 .../hdds/scm/pipeline/SCMPipelineMetrics.java      | 108 +++++++++++++++++
 .../hadoop/ozone/scm/node/TestSCMNodeMetrics.java  | 135 +++++++++++++++++++++
 .../apache/hadoop/ozone/scm/node/package-info.java |  24 ++++
 .../scm/pipeline/TestPipelineManagerMXBean.java    |  97 +++++++++++++++
 .../ozone/scm/pipeline/TestSCMPipelineMetrics.java |  98 +++++++++++++++
 .../hadoop/ozone/scm/pipeline/package-info.java    |  24 ++++
 11 files changed, 663 insertions(+), 4 deletions(-)

commit 73ec5b6241c19703a4c1fd33636703747032da42
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Feb 24 15:20:34 2019 -0800

    HDDS-1152. Add trace information for the client side of the datanode writes
    Contributed by Elek, Marton.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 26 +++++++++++++---------
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 26 ++++++++++++++--------
 .../hadoop/ozone/freon/RandomKeyGenerator.java     | 11 ++++++---
 3 files changed, 41 insertions(+), 22 deletions(-)

commit ff0c8ba562c9024ec9063975e8b27c3b7088cb3b
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Feb 24 15:04:25 2019 -0800

    HDDS-1145. Add optional web server to the Ozone freon test tool.
    Contributed by Elek, Marton.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   | 20 ++++++
 .../common/src/main/resources/ozone-default.xml    | 67 +++++++++++++++++++-
 hadoop-ozone/tools/pom.xml                         |  4 ++
 .../java/org/apache/hadoop/ozone/freon/Freon.java  | 36 +++++++++++
 .../apache/hadoop/ozone/freon/FreonHttpServer.java | 74 ++++++++++++++++++++++
 .../hadoop/ozone/freon/RandomKeyGenerator.java     |  6 +-
 .../src/main/resources/webapps/freon/.gitkeep      | 17 +++++
 7 files changed, 222 insertions(+), 2 deletions(-)

commit 8788efd5080a0fb5b716c2c499dfe0b469eeba07
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Feb 24 14:40:52 2019 -0800

    HDDS-1115. Provide ozone specific top-level pom.xml.
    Contributed by Elek, Marton.

 .gitignore    |   2 +
 pom.ozone.xml | 310 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 312 insertions(+)

commit ba148a986359a7ddab8e88118559284458399729
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Feb 24 14:02:30 2019 -0800

    HDDS-1090. Add a recipe to the ozone docs about using Spark, OzoneFS, and K8s.
    Contributed by Elek, Marton.

 hadoop-hdds/docs/content/SparkOzoneFSK8S.md | 184 ++++++++++++++++++++++++++++
 1 file changed, 184 insertions(+)

commit 244dd61b38a5ea718bd6886c31e0851004cec262
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Feb 24 13:53:38 2019 -0800

    HDDS-1089. Disable OzoneFSStorageStatistics for hadoop versions older than 2.8.
    Contributed by Elek, Marton.

 .../hadoop/fs/ozone/OzoneClientAdapterFactory.java | 51 +++++++++++++++---
 .../hadoop/fs/ozone/OzoneClientAdapterImpl.java    | 54 ++++++++++++++++---
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    | 61 ++++++++++++++++------
 3 files changed, 135 insertions(+), 31 deletions(-)

commit 45f0a4e91f18ec135bc2ed0b11cb59aa51beb644
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Feb 24 13:22:36 2019 -0800

    HDDS-1149. Change the default ozone.client.checksum.type.
    Contributed by Bharat Viswanadham.

 hadoop-hdds/common/src/main/resources/ozone-default.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 49d21cdfd69a42b46d4ef1ebd1fd03ad140a178f
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Feb 24 13:13:37 2019 -0800

    HDDS-1154. Add tracing to the client side of StorageContainerLocationProtocol and OzoneManagerProtocol.
    Contributed by Elek, Marton.

 .../hdds/scm/client/ContainerOperationClient.java  |  7 ++---
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   | 15 +++++----
 .../protocol/StorageContainerLocationProtocol.java |  3 +-
 .../hdds/scm/server/SCMClientProtocolServer.java   |  5 +++
 .../org/apache/hadoop/hdds/scm/cli/SCMCLI.java     |  8 +++--
 .../hadoop/ozone/client/io/KeyInputStream.java     |  4 +--
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 23 ++++++--------
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 20 +++++++-----
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  4 ++-
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 10 +-----
 .../hdfs/server/datanode/ObjectStoreHandler.java   | 36 +++++++++++++---------
 .../web/storage/DistributedStorageHandler.java     | 15 ++++-----
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 13 ++++++--
 13 files changed, 90 insertions(+), 73 deletions(-)

commit 2962ac02f7afcafc4ad75dabb0c268210a1e667e
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Feb 24 12:36:03 2019 -0800

    HDDS-1168.Use random ports in TestBlockManager and TestDeletedBlockLog.
    Contributed by Nandakumar.

 .../java/org/apache/hadoop/hdds/scm/TestUtils.java | 34 +++++++++++++++++++++-
 .../hadoop/hdds/scm/block/TestBlockManager.java    | 24 ++-------------
 2 files changed, 35 insertions(+), 23 deletions(-)

commit 2aa0d9897496360d48b367d0b39bc7813e5503ad
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Feb 23 21:37:55 2019 -0800

    HDDS-1120. Add a config to disable checksum verification during read.

 .../hadoop/hdds/scm/storage/BlockInputStream.java  | 10 ++-
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  3 +
 .../common/src/main/resources/ozone-default.xml    |  9 +++
 .../hadoop/ozone/client/io/KeyInputStream.java     |  4 +-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  6 +-
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 91 ++++++++++++++++++++++
 .../web/storage/DistributedStorageHandler.java     |  7 +-
 .../apache/hadoop/ozone/om/TestChunkStreams.java   |  6 +-
 8 files changed, 127 insertions(+), 9 deletions(-)

commit ed2ee24a88d1745bcef7c89671061af7eee9ae29
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat Feb 23 21:13:47 2019 -0800

    HDDS-1155.Fix failing unit test methods of TestDeadNodeHandler.
    Contributed by Nandakumar.

 .../org/apache/hadoop/hdds/scm/HddsTestUtils.java  |   4 +
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |   2 +-
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  |  66 +---------
 .../hadoop/hdds/scm/node/TestStatisticsUpdate.java | 135 +++++++++++++++++++++
 4 files changed, 142 insertions(+), 65 deletions(-)

commit 373ff473fd7902c19a8a1cc8a81549a984ed69b7
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat Feb 23 20:56:24 2019 -0800

    HDDS-1147. Fix failing unit tests in TestOzoneManager.
    Contributed by Nandakumar.

 .../OzoneManagerProtocolClientSideTranslatorPB.java         |  2 +-
 .../java/org/apache/hadoop/ozone/om/TestOzoneManager.java   | 13 ++++++-------
 .../java/org/apache/hadoop/ozone/om/KeyManagerImpl.java     |  2 +-
 3 files changed, 8 insertions(+), 9 deletions(-)

commit bea023f09f0ddc67183a3df36315b6818d576a97
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat Feb 23 20:45:01 2019 -0800

    HDDS-1167. Error in hadoop-ozone/dev-support/checks/checkstyle.sh.
    Contributed by Nandakumar.

 hadoop-ozone/dev-support/checks/checkstyle.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5e32c20a1e65223d6bbfcafe67adca9c6698ea3c
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat Feb 23 20:31:39 2019 -0800

    HDDS-1166. Fix checkstyle line length issues.
    Contributed by Nandakumar.

 .../CloseContainerCommandHandler.java              |  3 ++-
 .../TestCloseContainerCommandHandler.java          | 21 +++++++++++-------
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 19 ++++++++++------
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java | 25 +++++++++++++++-------
 .../metadata/DeletedBlocksTransactionCodec.java    |  3 ++-
 .../hdds/scm/metadata/SCMMetadataStoreRDBImpl.java | 13 ++++++-----
 .../hadoop/hdds/scm/server/SCMConfigurator.java    |  3 ++-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java | 15 ++++++++-----
 8 files changed, 66 insertions(+), 36 deletions(-)

commit 57a41cc398b510c69dba2971036a1bc56b73b373
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Feb 23 10:44:46 2019 -0800

    HDDS-1165. Document generation in maven should be configured on execution level. Contributed by Anu Engineer.

 hadoop-hdds/docs/pom.xml | 19 ++++++++++---------
 1 file changed, 10 insertions(+), 9 deletions(-)

commit 49c609a401a1c853be088a84056b7573f39b5ed3
Author: Hanisha Koneru <koneru.hanisha@gmail.com>
Date:   Sat Feb 23 10:20:28 2019 -0800

    HDDS-1158. TestOzoneManagerHA.testTwoOMNodesDown is failing with ratis error.

 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 30 +++++++++++++++-------
 1 file changed, 21 insertions(+), 9 deletions(-)

commit 5d539eebee2c7de2fc8d7e7199eb6782facec3cc
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Feb 22 12:20:49 2019 -0800

    HDDS-1148. After allocating container, we are not adding to container DB.

 .../hdds/scm/container/ContainerStateManager.java  |  84 +++------------
 .../hdds/scm/container/SCMContainerManager.java    | 120 +++++++++++++++++----
 2 files changed, 113 insertions(+), 91 deletions(-)

commit ae765cb61415176fbb9aa19e634605bd846e75b3
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Thu Feb 21 22:57:05 2019 +0100

    HDDS-1161. Disable failing test which are tracked by a separated jira. Contributed by Elek, Marton.

 .../org/apache/hadoop/hdds/scm/chillmode/TestSCMChillModeManager.java  | 2 ++
 .../test/java/org/apache/hadoop/hdds/scm/node/TestDeadNodeHandler.java | 3 +++
 .../hdds/scm/container/TestContainerStateManagerIntegration.java       | 2 ++
 .../src/test/java/org/apache/hadoop/ozone/TestSecureOzoneCluster.java  | 3 +++
 .../hadoop/ozone/container/ozoneimpl/TestOzoneContainerWithTLS.java    | 2 ++
 .../src/test/java/org/apache/hadoop/ozone/om/TestOzoneManager.java     | 3 +++
 .../src/test/java/org/apache/hadoop/ozone/om/TestOzoneManagerHA.java   | 2 ++
 .../apache/hadoop/ozone/freon/TestFreonWithDatanodeFastRestart.java    | 2 ++
 8 files changed, 19 insertions(+)

commit f2d44e0d7b348c60377c46bcb569c38563a58f84
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Feb 21 13:29:10 2019 -0800

    HDDS-1141. Update DBCheckpointSnapshot to DBCheckpoint.
    
    * HDDS-1141.Update DBCheckpointSnapshot to DBCheckpoint.
    
    * fix test failures in TestOzoneConfigurationFields

 ...DBCheckpointSnapshot.java => DBCheckpoint.java} |  2 +-
 .../java/org/apache/hadoop/utils/db/DBStore.java   |  2 +-
 .../hadoop/utils/db/RDBCheckpointManager.java      |  9 ++++-----
 .../java/org/apache/hadoop/utils/db/RDBStore.java  | 18 +++++++-----------
 .../common/src/main/resources/ozone-default.xml    |  2 +-
 .../org/apache/hadoop/utils/db/TestRDBStore.java   | 22 +++++++++++-----------
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |  6 +++---
 ...shotServlet.java => OMDBCheckpointServlet.java} | 14 +++++++-------
 .../hadoop/ozone/om/OzoneManagerHttpServer.java    |  2 +-
 9 files changed, 36 insertions(+), 41 deletions(-)

commit 8563ed76da958d8453de1e91b6969c503ced5c8c
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Feb 21 21:37:08 2019 +0530

    HDDS-1126. Datanode is trying to qausi-close a container which is already closed.
    
    Signed-off-by: Nanda kumar <nanda@apache.org>

 .../CloseContainerCommandHandler.java              |  5 +++
 .../TestCloseContainerCommandHandler.java          | 41 ++++++++++++++++++++++
 2 files changed, 46 insertions(+)

commit 70048ae8f410445a631c3099c0c13ed28e343809
Author: Márton Elek <elek@apache.org>
Date:   Mon Feb 18 18:39:57 2019 +0100

    HDDS-1129. Fix findbug/checkstyle errors hdds projects. Contributed by Elek, Marton.

 .../apache/hadoop/hdds/scm/storage/BlockInputStream.java  | 15 +++++++++------
 hadoop-hdds/pom.xml                                       |  7 +++++++
 hadoop-hdds/server-scm/pom.xml                            |  5 +++++
 .../apache/hadoop/hdds/scm/pipeline/PipelineStateMap.java |  8 +++++---
 .../hadoop/hdds/scm/pipeline/RatisPipelineProvider.java   |  4 ++++
 .../hadoop/ozone/om/ratis/OzoneManagerRatisServer.java    |  3 ++-
 6 files changed, 32 insertions(+), 10 deletions(-)

commit 7b4246c64de9fdcbeb2b3f02ef3e4e8db3f15792
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Wed Feb 20 14:49:59 2019 -0800

    HDDS-1109. Setup Failover Proxy Provider for OM client.

 .../apache/hadoop/ozone/client/ObjectStore.java    |   5 +
 .../ozone/client/protocol/ClientProtocol.java      |   5 +
 .../hadoop/ozone/client/rest/RestClient.java       |   6 +
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  23 ++-
 .../hadoop/ozone/client/rpc/ha/OMProxyInfo.java    |  49 ++++++
 .../ozone/client/rpc/ha/OMProxyProvider.java       | 177 +++++++++++++++++++++
 .../hadoop/ozone/client/rpc/ha/package-info.java   |  23 +++
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  19 +++
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java |  44 ++++-
 9 files changed, 336 insertions(+), 15 deletions(-)

commit 08a911d8c969841f9cd77765e3cffeb8eb0ef46c
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed Feb 20 12:57:49 2019 -0800

    HDDS-1053. Generate RaftGroupId from OMServiceID. Contributed by Aravindan Vijayan.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  2 +-
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |  8 +++-
 .../om/ratis/TestOzoneManagerRatisServer.java      | 49 ++++++++++++++++++++++
 3 files changed, 56 insertions(+), 3 deletions(-)

commit 0f44c0f98ec6cb4ae68c4c7cd0739b67e5b3d73d
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Feb 20 11:11:36 2019 -0800

    HDDS-1060. Add API to get OM certificate from SCM CA. Contributed by Ajay Kumar.

 .../hadoop/hdds/scm/client/HddsClientUtils.java    | 38 +++++++++++++++
 .../java/org/apache/hadoop/hdds/HddsUtils.java     | 50 ++++++++++++++++++++
 .../hadoop/hdds/protocol/SCMSecurityProtocol.java  | 23 ++++++++-
 .../SCMSecurityProtocolClientSideTranslatorPB.java | 40 ++++++++++++++++
 .../SCMSecurityProtocolServerSideTranslatorPB.java | 35 ++++++++++++++
 .../certificate/authority/CertificateServer.java   | 26 ++++++----
 .../certificate/authority/DefaultCAServer.java     | 18 +++++++
 .../src/main/proto/SCMSecurityProtocol.proto       | 24 ++++++++++
 .../hdds/scm/server/SCMSecurityProtocolServer.java | 43 +++++++++++++++++
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 55 +++++++++++++++++++++-
 10 files changed, 340 insertions(+), 12 deletions(-)

commit c225bf50a83001d413e1e92fb76303e3a100f9dc
Author: Márton Elek <elek@apache.org>
Date:   Wed Feb 20 12:08:24 2019 +0100

    HDDS-1135. Ozone jars are missing in the Ozone Snapshot tar. Contributed by Dinesh Chitlangia.

 hadoop-ozone/dist/pom.xml | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 41eba0f85a812c7352a93cff60dd53f8479b29b4
Author: Yiqun Lin <yqlin@apache.org>
Date:   Wed Feb 20 10:45:51 2019 +0800

    HDDS-1130. Make BenchMarkBlockManager multi-threaded. Contributed by Lokesh Jain.

 .../ozone/genesis/BenchMarkBlockManager.java       | 81 +++++++++++++---------
 1 file changed, 49 insertions(+), 32 deletions(-)

commit 3bf0ee5f13de1a7eaf8c2820e359e1139c0dba18
Author: avijayanhwx <avijayan@hortonworks.com>
Date:   Tue Feb 19 16:32:47 2019 -0800

    HDDS-1139 : Fix findbugs issues caused by HDDS-1085. Contributed by Aravindan Vijayan.

 .../org/apache/hadoop/utils/db/RDBCheckpointManager.java   |  2 +-
 .../src/main/java/org/apache/hadoop/utils/db/RDBStore.java |  5 ++++-
 hadoop-hdds/common/src/main/resources/ozone-default.xml    |  9 +++++++++
 .../src/main/java/org/apache/hadoop/ozone/OmUtils.java     | 14 ++++++++++----
 .../org/apache/hadoop/ozone/om/OMDbSnapshotServlet.java    |  4 ++--
 5 files changed, 26 insertions(+), 8 deletions(-)

commit cc05b7cce1df212d871073d881d39808dc87261b
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Feb 19 10:55:33 2019 -0800

    HDDS-1121. Key read failure when data is written parallel in to Ozone.
    Contributed by Bharat Viswanadham.

 .../hadoop/hdds/scm/storage/BlockOutputStream.java | 14 +++--
 .../org/apache/hadoop/ozone/common/Checksum.java   |  2 +
 .../ozone/client/io/BlockOutputStreamEntry.java    | 33 +++++++-----
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 37 +++++++++----
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 20 +++----
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 63 ++++++++++++++++++++++
 .../web/storage/DistributedStorageHandler.java     | 22 ++++----
 7 files changed, 144 insertions(+), 47 deletions(-)

commit fcfd5cd4a649701f63b4a8fadcf2c5836411d26d
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Feb 19 10:42:56 2019 -0800

    HDDS-1101. SCM CA: Write Certificate information to SCM Metadata. Contributed by Anu Engineer.

 .../certificate/authority/CertificateStore.java    |  80 ++++++++++++++
 .../certificate/authority/DefaultApprover.java     |   7 +-
 .../certificate/authority/DefaultCAServer.java     |  28 ++++-
 .../x509/certificate/utils/CertificateCodec.java   |  40 ++++---
 .../java/org/apache/hadoop/utils/db/Codec.java     |   6 +-
 .../org/apache/hadoop/utils/db/CodecRegistry.java  |   5 +-
 .../org/apache/hadoop/utils/db/StringCodec.java    |   5 +-
 .../java/org/apache/hadoop/utils/db/Table.java     |   4 +-
 .../org/apache/hadoop/utils/db/TableIterator.java  |   5 +-
 .../org/apache/hadoop/utils/db/TypedTable.java     |   8 +-
 .../x509/certificate/authority/MockCAStore.java    |  54 ++++++++++
 .../certificate/authority/TestDefaultCAServer.java |  10 +-
 .../apache/hadoop/utils/db/TestRDBTableStore.java  |  17 +--
 .../hadoop/utils/db/TestTypedRDBTableStore.java    |   8 +-
 .../hadoop/hdds/scm/metadata/BigIntegerCodec.java  |  39 +++++++
 .../metadata/DeletedBlocksTransactionCodec.java    |   7 +-
 .../apache/hadoop/hdds/scm/metadata/LongCodec.java |   7 +-
 .../hadoop/hdds/scm/metadata/SCMMetadataStore.java |  36 ++++++-
 .../hdds/scm/metadata/SCMMetadataStoreRDBImpl.java |  60 ++++++++++-
 .../hdds/scm/metadata/X509CertificateCodec.java    |  54 ++++++++++
 .../hadoop/hdds/scm/server/SCMCertStore.java       | 115 +++++++++++++++++++++
 .../hdds/scm/server/StorageContainerManager.java   |  25 +++--
 .../hadoop/ozone/om/codec/OmBucketInfoCodec.java   |   5 +-
 .../hadoop/ozone/om/codec/OmKeyInfoCodec.java      |   5 +-
 .../ozone/om/codec/OmMultipartKeyInfoCodec.java    |   7 +-
 .../hadoop/ozone/om/codec/OmVolumeArgsCodec.java   |   5 +-
 .../hadoop/ozone/om/codec/VolumeListCodec.java     |   5 +-
 .../om/codec/TestOmMultipartKeyInfoCodec.java      |  18 +++-
 28 files changed, 586 insertions(+), 79 deletions(-)

commit ab37e9f840e42866f62df9b881eb57c3dcc8881c
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Feb 18 22:35:36 2019 -0800

    HDDS-1085. Create an OM API to serve snapshots to Recon server.
    Contributed by Aravindan Vijayan.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   3 +
 .../hadoop/utils/db/DBCheckpointSnapshot.java      |  53 ++++++++
 .../java/org/apache/hadoop/utils/db/DBStore.java   |   7 +
 .../hadoop/utils/db/RDBCheckpointManager.java      | 130 +++++++++++++++++++
 .../java/org/apache/hadoop/utils/db/RDBStore.java  |  33 +++++
 .../org/apache/hadoop/utils/db/TestRDBStore.java   |  94 +++++++++-----
 hadoop-ozone/common/pom.xml                        |   4 +
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  62 +++++++++
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |   6 +
 .../java/org/apache/hadoop/ozone/TestOmUtils.java  |  44 +++++++
 .../hadoop/ozone/om/OMDbSnapshotServlet.java       | 142 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   4 +
 .../hadoop/ozone/om/OzoneManagerHttpServer.java    |   1 +
 13 files changed, 553 insertions(+), 30 deletions(-)

commit 907cf38837ee8ef9b824c9d52be19e2f396bbdf7
Author: Yiqun Lin <yqlin@apache.org>
Date:   Tue Feb 19 11:29:52 2019 +0800

    HDDS-1122. Fix TestOzoneManagerRatisServer#testSubmitRatisRequest unit test failure. Contributed by Yiqun Lin.

 .../src/main/java/org/apache/hadoop/ozone/om/ratis/OMRatisHelper.java   | 2 ++
 1 file changed, 2 insertions(+)

commit 4804b33f2229a152aff6ddf25663eb55efbaa837
Author: Yiqun Lin <yqlin@apache.org>
Date:   Mon Feb 18 22:35:23 2019 +0800

    HDDS-1106. Introduce queryMap in PipelineManager. Contributed by Lokesh Jain.

 .../hadoop/hdds/scm/pipeline/PipelineStateMap.java | 72 +++++++++++++++++++++-
 .../scm/pipeline/TestPipelineStateManager.java     | 42 +++++++++++++
 2 files changed, 111 insertions(+), 3 deletions(-)

commit dbacc658426029d9e618fe850bec9e2a2b983561
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat Feb 16 10:23:10 2019 -0800

    HDDS-1041. Support TDE(Transparent Data Encryption) for Ozone.
    Contributed by Xiaoyu Yao.

 .../org/apache/hadoop/ozone/client/BucketArgs.java |  28 ++-
 .../apache/hadoop/ozone/client/OzoneBucket.java    |  39 ++++
 .../hadoop/ozone/client/OzoneClientUtils.java      |   4 +
 .../hadoop/ozone/client/OzoneKeyDetails.java       |  10 +-
 .../hadoop/ozone/client/io/KeyOutputStream.java    |  10 +
 .../hadoop/ozone/client/rest/RestClient.java       |   5 +-
 .../hadoop/ozone/client/rpc/OzoneKMSUtil.java      | 176 +++++++++++++++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  67 +++++-
 .../ozone/client/rest/response/BucketInfo.java     |  17 ++
 .../ozone/client/rest/response/KeyInfoDetails.java |  11 +
 .../hadoop/ozone/om/exceptions/OMException.java    |   9 +-
 .../ozone/om/helpers/BucketEncryptionKeyInfo.java  |  79 +++++++
 .../ozone/om/helpers/EncryptionBucketInfo.java     | 114 ++++++++++
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      |  68 ++++--
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  |  33 ++-
 .../apache/hadoop/ozone/protocolPB/OMPBHelper.java | 129 +++++++++++
 .../hadoop/ozone/web/response/BucketInfo.java      |  10 +
 .../src/main/proto/OzoneManagerProtocol.proto      |  63 +++++-
 .../dist/src/main/compose/ozonesecure/.env         |   1 +
 .../main/compose/ozonesecure/docker-compose.yaml   |   9 +
 .../src/main/compose/ozonesecure/docker-config     |   2 +
 hadoop-ozone/integration-test/pom.xml              |  12 +-
 .../client/rpc/TestOzoneAtRestEncryption.java      | 238 +++++++++++++++++++++
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  57 ++++-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  93 +++++++-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  40 +++-
 .../web/ozShell/bucket/CreateBucketHandler.java    |  32 ++-
 .../hadoop/ozone/om/TestBucketManagerImpl.java     |  42 +++-
 .../hadoop/ozone/client/OzoneBucketStub.java       |   2 +-
 29 files changed, 1333 insertions(+), 67 deletions(-)

commit d553828e35eca1aac1888b32e027292a0c8ea38c
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Feb 15 20:49:52 2019 +0100

    HDDS-1114. Fix findbugs/checkstyle/accepteance errors in Ozone. Contributed by Marton Elek.

 .../OzoneManagerProtocolClientSideTranslatorPB.java | 21 +++++----------------
 .../dist/src/main/smoketest/ozonefs/ozonefs.robot   |  2 +-
 hadoop-ozone/dist/src/main/smoketest/test.sh        |  2 +-
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java   | 12 ++++++++----
 .../hadoop/ozone/s3/endpoint/TestRootList.java      |  3 ++-
 5 files changed, 17 insertions(+), 23 deletions(-)

commit 70ce7bce368fe5d8187f09a3c913935973b34675
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Feb 15 11:32:06 2019 -0800

    HDDS-1116.Add java profiler servlet to the Ozone web servers.
    Contributed by Elek, Marton.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   3 +
 .../common/src/main/resources/ozone-default.xml    |   8 +
 .../apache/hadoop/hdds/server/BaseHttpServer.java  |  12 +
 .../apache/hadoop/hdds/server/ProfileServlet.java  | 476 +++++++++++++++++++++
 hadoop-ozone/common/src/main/bin/ozone             |   2 +-
 .../src/main/compose/ozone/docker-compose.yaml     |   3 +
 .../dist/src/main/compose/ozone/docker-config      |   2 +
 7 files changed, 505 insertions(+), 1 deletion(-)

commit 4459c0a76756be06505c1600cd3b72b1de32d999
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Fri Feb 15 17:26:56 2019 +0100

    HDDS-1092. Use Java 11 JRE to run Ozone in containers.

 hadoop-ozone/datanode/pom.xml  | 22 ++++++++++++++++++++++
 hadoop-ozone/dist/pom.xml      | 12 ++++++++++++
 hadoop-ozone/pom.xml           | 21 ++++++++++++++++++++-
 hadoop-ozone/s3gateway/pom.xml | 21 +++++++++++++++++----
 4 files changed, 71 insertions(+), 5 deletions(-)

commit d1489c0ee31612062b3dcc2a2cc65432d36870f8
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Fri Feb 15 21:13:30 2019 +0530

    HDDS-1076. TestSCMNodeManager crashed the jvm. Contributed by Lokesh Jain.

 .../java/org/apache/hadoop/utils/Scheduler.java    | 101 +++++++++++++++++++++
 .../hadoop/hdds/scm/pipeline/PipelineFactory.java  |   6 ++
 .../hadoop/hdds/scm/pipeline/PipelineProvider.java |   2 +
 .../hdds/scm/pipeline/RatisPipelineProvider.java   |  12 +++
 .../hdds/scm/pipeline/RatisPipelineUtils.java      |  63 ++++++-------
 .../hdds/scm/pipeline/SCMPipelineManager.java      |   4 +
 .../hdds/scm/pipeline/SimplePipelineProvider.java  |   5 +
 .../hdds/scm/pipeline/TestRatisPipelineUtils.java  |   8 +-
 8 files changed, 163 insertions(+), 38 deletions(-)

commit 2af409340df3f1cad4d5d29728c1666d62cd69c6
Author: Márton Elek <elek@apache.org>
Date:   Fri Feb 15 16:09:37 2019 +0100

    HDDS-1110. OzoneManager need to login during init when security is enabled. Contributed by Xiaoyu Yao.

 .../src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

commit f7b0698d88525e9ffd303e7386dc25f422c57dbf
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri Feb 15 20:09:15 2019 +0530

    HDDS-1082. OutOfMemoryError because of memory leak in KeyInputStream. Contributed by Supratim Deka.

 .../hadoop/hdds/scm/storage/BlockInputStream.java  | 119 +++++++++++++++++----
 1 file changed, 100 insertions(+), 19 deletions(-)

commit 835090ea60d9bc0891e095de4e729e2df6476cf3
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Fri Feb 15 14:38:38 2019 +0530

    HDDS-1028. Improve logging in SCMPipelineManager. Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/scm/node/StaleNodeHandler.java  |  2 ++
 .../hadoop/hdds/scm/pipeline/PipelineActionHandler.java    |  2 ++
 .../hadoop/hdds/scm/pipeline/PipelineReportHandler.java    |  3 +++
 .../hadoop/hdds/scm/pipeline/PipelineStateManager.java     | 14 +++++++++++++-
 4 files changed, 20 insertions(+), 1 deletion(-)

commit 206580bfa233542d03f077c9f8771eb4fc382ff5
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Feb 14 23:33:25 2019 -0800

    HDDS-1103.Fix rat/findbug/checkstyle errors in ozone/hdds projects.
    Contributed by Elek, Marton.

 .../java/org/apache/hadoop/hdds/HddsUtils.java     |  1 -
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  3 +-
 .../certificate/authority/CertificateServer.java   |  5 +-
 .../client/DefaultCertificateClient.java           | 11 ++--
 .../certificate/client/OMCertificateClient.java    |  6 +-
 .../hadoop/hdds/security/x509/package-info.java    |  4 +-
 .../client/TestCertificateClientInit.java          |  1 +
 .../dev-support/findbugsExcludeFile.xml            | 12 ++++
 hadoop-hdds/container-service/pom.xml              |  6 ++
 .../common/transport/server/XceiverServer.java     |  9 +--
 .../server/ratis/ContainerStateMachine.java        |  1 +
 .../container/common/volume/AbstractFuture.java    | 45 +++++++------
 .../ozone/container/common/volume/HddsVolume.java  |  1 +
 .../container/common/volume/HddsVolumeChecker.java | 37 ++++++-----
 .../common/volume/ThrottledAsyncChecker.java       |  6 +-
 .../container/common/volume/TimeoutFuture.java     |  2 +-
 .../ozone/container/common/volume/VolumeSet.java   | 76 ++++++++++------------
 .../common/volume/TestVolumeSetDiskChecks.java     | 57 ++++++++--------
 .../TestKeyValueHandlerWithUnhealthyContainer.java | 70 ++++++++++----------
 hadoop-hdds/pom.xml                                |  1 +
 .../hdds/scm/pipeline/RatisPipelineUtils.java      | 16 ++---
 hadoop-ozone/Jenkinsfile                           | 69 +++++++++++---------
 .../ozone/client/io/BlockOutputStreamEntry.java    | 62 ++++++++----------
 .../hadoop/ozone/client/io/OzoneInputStream.java   |  2 -
 .../hadoop/ozone/om/helpers/OmBucketArgs.java      |  1 -
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  |  6 --
 .../hadoop/ozone/om/helpers/WithMetadata.java      |  1 +
 .../hadoop/ozone/security/OzoneSecretManager.java  |  1 +
 hadoop-ozone/dev-support/checks/findbugs.sh        |  7 +-
 .../{basic => auditparser}/auditparser.robot       |  0
 hadoop-ozone/dist/src/main/smoketest/test.sh       | 19 +++---
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  6 +-
 .../hadoop/ozone/client/rpc/TestReadRetries.java   |  2 +-
 .../impl/TestContainerDeletionChoosingPolicy.java  |  3 +-
 .../server/TestSecureContainerServer.java          |  3 +-
 .../org/apache/hadoop/ozone/om/OMNodeDetails.java  |  4 ++
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |  2 +
 .../protocolPB/OzoneManagerRequestHandler.java     |  2 +-
 .../web/ozShell/token/CancelTokenHandler.java      |  4 +-
 .../ozone/web/ozShell/token/PrintTokenHandler.java |  4 +-
 .../ozone/web/ozShell/token/RenewTokenHandler.java |  4 +-
 hadoop-ozone/ozonefs-lib-legacy/pom.xml            |  7 ++
 hadoop-ozone/ozonefs-lib/pom.xml                   |  7 ++
 hadoop-ozone/ozonefs/pom.xml                       |  7 ++
 .../hadoop/fs/ozone/OzoneClientAdapterFactory.java |  2 +
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |  2 +-
 hadoop-ozone/pom.xml                               |  1 +
 hadoop-ozone/tools/pom.xml                         |  7 ++
 .../hadoop/ozone/freon/RandomKeyGenerator.java     |  2 +
 .../apache/hadoop/ozone/fsck/BlockIdDetails.java   | 27 ++++----
 50 files changed, 354 insertions(+), 280 deletions(-)

commit 2a4dddaf3dc41242e0e9b205c802ce83825648ae
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Feb 14 23:24:58 2019 -0800

    HDDS-1097. Add genesis benchmark for BlockManager#allocateBlock.
    Contributed by Lokesh Jain.

 .../ozone/genesis/BenchMarkBlockManager.java       | 150 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/genesis/Genesis.java   |   1 +
 .../apache/hadoop/ozone/genesis/GenesisUtil.java   |   8 +-
 3 files changed, 157 insertions(+), 2 deletions(-)

commit a567761032b411c63ab23770f28a98ac092ffafa
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Feb 14 23:16:23 2019 -0800

    HDDS-905. Create informative landing page for Ozone S3 gateway.
    Contributed by Elek, Marton.

 .../dist/src/main/smoketest/s3/webui.robot         | 34 ++++++++++
 hadoop-ozone/s3gateway/pom.xml                     | 44 ++++++++++--
 .../hadoop/ozone/s3/endpoint/RootEndpoint.java     | 17 ++++-
 .../s3/header/AuthenticationHeaderParser.java      |  4 ++
 .../resources/webapps/s3gateway/WEB-INF/web.xml    |  4 --
 .../src/main/resources/webapps/static/index.html   | 79 ++++++++++++++++++++++
 .../hadoop/ozone/s3/endpoint/TestRootList.java     |  4 +-
 7 files changed, 171 insertions(+), 15 deletions(-)

commit 0fd72b12c6a139b18ecd2a9a94aa734b3108737f
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Feb 14 22:51:46 2019 -0800

    HDDS-1068. Improve the error propagation for ozone sh.
    Contributed by Elek, Marton.

 .../org/apache/hadoop/hdds/cli/GenericCli.java     |    5 +-
 ...lockLocationProtocolClientSideTranslatorPB.java |   65 +-
 .../apache/hadoop/ozone/client/ObjectStore.java    |   10 +-
 .../hadoop/ozone/om/exceptions/OMException.java    |   98 +-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  327 ++---
 .../src/main/proto/OzoneManagerProtocol.proto      |   62 +-
 .../ozone/om/exceptions/TestResultCodes.java       |   49 +
 .../org/apache/hadoop/ozone/OzoneTestUtils.java    |   20 +-
 .../hadoop/ozone/TestSecureOzoneCluster.java       |    5 +-
 .../ozone/client/rest/TestOzoneRestClient.java     |  499 -------
 .../hadoop/ozone/client/rest/package-info.java     |   23 -
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  216 ++-
 .../org/apache/hadoop/ozone/om/TestOmAcls.java     |   27 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |  208 ++-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |   86 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |   82 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java |   57 +-
 .../hadoop/ozone/web/client/TestVolumeRatis.java   |    2 +-
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |   12 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |   53 +-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |   18 +-
 .../hadoop/ozone/om/S3BucketManagerImpl.java       |    5 +-
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  |   18 +-
 .../protocolPB/OzoneManagerRequestHandler.java     | 1378 +++++++++-----------
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java |   17 +
 .../hadoop/ozone/om/TestBucketManagerImpl.java     |   10 +-
 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java   |   18 +-
 .../hadoop/ozone/s3/endpoint/EndpointBase.java     |   30 +-
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   |   62 +-
 .../hadoop/ozone/client/ObjectStoreStub.java       |   28 +-
 .../hadoop/ozone/client/OzoneBucketStub.java       |   18 +-
 31 files changed, 1365 insertions(+), 2143 deletions(-)

commit 3e6db9842b96b66a635d79e5dcc1b785ab493c07
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri Feb 15 14:23:34 2019 +0800

    HDDS-1099. Genesis benchmark for ozone key creation in OM. Contributed by Bharat Viswanadham.

 hadoop-ozone/tools/pom.xml                         |   9 +-
 .../ozone/genesis/BenchMarkOMKeyAllocation.java    | 135 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/genesis/Genesis.java   |   1 +
 3 files changed, 140 insertions(+), 5 deletions(-)

commit ea60b07e44a58fc3d18e257484e4d8ce27f0cfdf
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri Feb 15 14:21:29 2019 +0800

    Revert "HDDS-1099. Genesis benchmark for ozone key creation in OM. Contributed by Bharat Viswanadham."
    
    This reverts commit 5656409327db5a590cc29b846d291dad005bf8d0.

 hadoop-ozone/tools/pom.xml                         |   9 +-
 .../ozone/genesis/BenchMarkOMKeyAllocation.java    | 135 ---------------------
 2 files changed, 5 insertions(+), 139 deletions(-)

commit 953890778c3a1f166bbfa8089a6ae024a2cd63d0
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri Feb 15 14:07:15 2019 +0800

    HDDS-1099. Genesis benchmark for ozone key creation in OM. Contributed by Bharat Viswanadham.

 hadoop-ozone/tools/pom.xml                         |   9 +-
 .../ozone/genesis/BenchMarkOMKeyAllocation.java    | 135 +++++++++++++++++++++
 2 files changed, 139 insertions(+), 5 deletions(-)

commit 62fc807f636d318712a2097fc493e9702a476899
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Feb 14 18:10:18 2019 -0800

    HDDS-1108. Check s3bucket exists or not before MPU operations.
    Contributed by Bharat Viswanadham.

 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 22 ++++++++++++++++++++++
 1 file changed, 22 insertions(+)

commit 6c2c0382e01b184beea85cda8ebe114e9d7aea41
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Feb 14 17:42:59 2019 -0800

    HDDS-1100. fix asf license errors in newly added files by HDDS-936.
    Contributed by  Dinesh Chitlangia.

 .../org/apache/hadoop/ozone/fsck/BlockIdDetails.java     | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit 215e6469b2c5768ba6623fceb18011290a99866f
Author: Márton Elek <elek@apache.org>
Date:   Thu Feb 14 14:02:16 2019 +0100

    HDDS-1096. OzoneManager#loadOMHAConfigs should use default ports in case port is not defined. Contributed by Hanisha Koneru.

 .../main/java/org/apache/hadoop/ozone/OmUtils.java | 31 +++++++++++++
 .../ozone/om/TestOzoneManagerConfiguration.java    | 53 ++++++++++++++++++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  7 ++-
 3 files changed, 90 insertions(+), 1 deletion(-)

commit 21b2edfb36b1894dadfee20dd30b129baf901fbb
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Wed Feb 13 15:43:14 2019 -0800

    HDDS-936. Need a tool to map containers to ozone objects. Contributed by Sarun Singla

 hadoop-ozone/tools/pom.xml                         |   5 +
 .../apache/hadoop/ozone/fsck/BlockIdDetails.java   |  66 ++++++++++
 .../apache/hadoop/ozone/fsck/ContainerMapper.java  | 134 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/fsck/package-info.java |  44 +++++++
 .../hadoop/ozone/fsck/TestContainerMapper.java     | 117 ++++++++++++++++++
 .../org/apache/hadoop/ozone/fsck/package-info.java |  44 +++++++
 6 files changed, 410 insertions(+)

commit ccd2bd3649fd167084a7d84d425687f2019feda6
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Feb 12 22:23:48 2019 -0800

    HDDS-1034. TestOzoneRpcClient and TestOzoneRpcClientWithRatis failure. Contributed by Mukul Kumar Singh.

 .../client/rpc/TestOzoneRpcClientAbstract.java     |  92 ---------
 .../hadoop/ozone/client/rpc/TestReadRetries.java   | 223 +++++++++++++++++++++
 2 files changed, 223 insertions(+), 92 deletions(-)

commit 7592bd2e9a22015f5c7d79ee5c38d92cae1f78d8
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Feb 12 22:07:27 2019 -0800

    HDDS-972. Add support for configuring multiple OMs. Contributed by Hanisha Koneru.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   3 +
 .../common/src/main/resources/ozone-default.xml    | 106 +++++---
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  65 +++++
 .../ozone/OzoneIllegalArgumentException.java       |  40 +++
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |  17 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |  23 ++
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  30 ++-
 .../hadoop/ozone/MiniOzoneHAClusterImpl.java       | 261 +++++++++++++++++++
 .../hadoop/ozone/TestOzoneConfigurationFields.java |   2 +
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |   2 +-
 .../ozone/om/TestOzoneManagerConfiguration.java    | 290 +++++++++++++++++++++
 .../apache/hadoop/ozone/om/TestOzoneManagerHA.java | 156 +++++++++++
 .../org/apache/hadoop/ozone/om/OMNodeDetails.java  | 107 ++++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 285 +++++++++++++++++---
 .../ozone/om/ratis/OzoneManagerRatisClient.java    |  35 +--
 .../ozone/om/ratis/OzoneManagerRatisServer.java    | 139 ++++++----
 .../om/ratis/TestOzoneManagerRatisServer.java      |  23 +-
 17 files changed, 1427 insertions(+), 157 deletions(-)

commit 74c3e430055ae44da6003d283c30146b51c9b93c
Author: Yiqun Lin <yqlin@apache.org>
Date:   Wed Feb 13 10:50:57 2019 +0800

    HDDS-1047. Fix TestRatisPipelineProvider#testCreatePipelineWithFactor. Contributed by Nilotpal Nandi.

 .../scm/pipeline/TestRatisPipelineProvider.java    | 32 ++++++++++++++++++++++
 1 file changed, 32 insertions(+)

commit 9321cbcf62e977b4599be8f2c29ec46789b84952
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Feb 12 16:33:14 2019 +0530

    HDDS-1050. TestSCMRestart#testPipelineWithScmRestart is failing. Contributed by Supratim Deka.

 .../test/java/org/apache/hadoop/hdds/scm/pipeline/TestSCMRestart.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5bfc579c2271ed56c7794da601cbb3a80ca3861d
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Feb 12 14:49:51 2019 +0530

    HDDS-1080. Ozonefs Isolated class loader should support FsStorageStatistics.
    Contributed by Elek, Marton.

 .../src/main/java/org/apache/hadoop/fs/ozone/FilteredClassLoader.java   | 2 ++
 1 file changed, 2 insertions(+)

commit f43f91c0f5713a2a1e917a6bfe0782c2cfac304a
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Feb 12 14:39:08 2019 +0530

    HDDS-1081. CLOSING state containers should not be added to pipeline on SCM start.
    Contributed by Lokesh Jain.

 .../java/org/apache/hadoop/hdds/scm/container/SCMContainerManager.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 076527fb38efe1d5f57f8bb64574d1b44ef893e5
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Feb 12 14:25:14 2019 +0530

    HDDS-360. Use RocksDBStore and TableStore for SCM Metadata.
    Contributed by Anu Engineer.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 +
 .../apache/hadoop/utils/db/RDBStoreIterator.java   |  21 +-
 .../org/apache/hadoop/utils/db/TableIterator.java  |  12 +
 .../org/apache/hadoop/utils/db/TypedTable.java     |  22 ++
 .../java/org/apache/hadoop/hdds/scm/ScmUtils.java  |  37 +++
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  61 +++--
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java | 263 ++++++++-------------
 .../metadata/DeletedBlocksTransactionCodec.java    |  46 ++++
 .../apache/hadoop/hdds/scm/metadata/LongCodec.java |  39 +++
 .../hadoop/hdds/scm/metadata/SCMMetadataStore.java |  73 ++++++
 .../hdds/scm/metadata/SCMMetadataStoreRDBImpl.java | 148 ++++++++++++
 .../hadoop/hdds/scm/metadata/package-info.java     |  21 ++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |   5 +-
 .../hdds/scm/server/SCMBlockProtocolServer.java    |   4 +-
 .../hdds/scm/server/SCMClientProtocolServer.java   |   4 +-
 .../hadoop/hdds/scm/server/SCMConfigurator.java    | 202 ++++++++++++++++
 .../{SCMStorage.java => SCMStorageConfig.java}     |  12 +-
 .../hdds/scm/server/StorageContainerManager.java   | 256 +++++++++++++++-----
 .../org/apache/hadoop/hdds/scm/HddsTestUtils.java  |   4 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  23 ++
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  70 +++---
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  29 ++-
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  32 +--
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   7 +-
 .../hadoop/ozone/TestSecureOzoneCluster.java       |  60 ++---
 .../hadoop/ozone/TestStorageContainerManager.java  |  11 +-
 .../commandhandler/TestBlockDeletion.java          |   4 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |   8 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |   4 +-
 .../org/apache/hadoop/ozone/scm/package-info.java  |  22 ++
 30 files changed, 1107 insertions(+), 394 deletions(-)

commit 61f5c3099745ab45382ef7a595a1d5f3bf858c92
Author: Yiqun Lin <yqlin@apache.org>
Date:   Tue Feb 12 16:28:50 2019 +0800

    HDDS-1074. Remove dead variable from KeyOutputStream#addKeyLocationInfo. Contributed by Siddharth Wagle.

 .../main/java/org/apache/hadoop/ozone/client/io/KeyOutputStream.java   | 3 ---
 1 file changed, 3 deletions(-)

commit 13d4e9922dc4a7ace7be3fb9cc66a2dc5a790b29
Author: Ajay Kumar <ajay@apache.org>
Date:   Mon Feb 11 18:59:47 2019 -0800

    HDDS-1012. Add Default CertificateClient implementation. Contributed by Ajay Kumar

 .../security/exception/SCMSecurityException.java   |   3 +-
 .../x509/certificate/client/CertificateClient.java |  71 ++-
 .../certificate/client/DNCertificateClient.java    |  40 ++
 .../client/DefaultCertificateClient.java           | 631 +++++++++++++++++++++
 .../certificate/client/OMCertificateClient.java    | 104 ++++
 .../x509/exceptions/CertificateException.java      |  34 ++
 .../hadoop/hdds/security/x509/keys/KeyCodec.java   |  47 +-
 .../org/apache/hadoop/ozone/OzoneSecurityUtil.java |  17 +
 .../client/TestCertificateClientInit.java          | 205 +++++++
 .../client/TestDefaultCertificateClient.java       | 336 +++++++++++
 .../hadoop/ozone/TestSecureOzoneCluster.java       |   8 +-
 .../ozone/client/CertificateClientTestImpl.java    |  41 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   6 +-
 13 files changed, 1477 insertions(+), 66 deletions(-)

commit 2f2ab1a6c28821aaa94ee42cad1490207ecb5c92
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Feb 11 20:08:25 2019 +0530

    HDDS-1040. Add blockade Tests for client failures. Contributed by Nilotpal Nandi.

 .../main/blockade/clusterUtils/cluster_utils.py    | 117 ++++++++++++++++++-
 hadoop-ozone/dist/src/main/blockade/conftest.py    |  25 ++++-
 .../main/blockade/test_blockade_client_failure.py  | 124 +++++++++++++++++++++
 .../blockade/test_blockade_datanode_isolation.py   |   1 +
 .../dist/src/main/blockade/test_blockade_flaky.py  |   1 +
 .../main/blockade/test_blockade_mixed_failure.py   |   1 +
 ...t_blockade_mixed_failure_three_nodes_isolate.py |   1 +
 .../test_blockade_mixed_failure_two_nodes.py       |   1 +
 .../main/blockade/test_blockade_scm_isolation.py   |   1 +
 .../main/compose/ozoneblockade/docker-compose.yaml |   9 ++
 10 files changed, 272 insertions(+), 9 deletions(-)

commit 301839e010ae2c8520aceedf0a906785ff50c778
Author: Márton Elek <elek@apache.org>
Date:   Mon Feb 11 12:11:54 2019 +0100

    HDDS-1017. Use distributed tracing to indentify performance problems in Ozone. Contributed by Elek, Marton.

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  12 +-
 hadoop-hdds/common/pom.xml                         |  10 +
 ...inerLocationProtocolClientSideTranslatorPB.java |  19 +-
 .../hadoop/hdds/tracing/GrpcClientInterceptor.java |  57 +++++
 .../hadoop/hdds/tracing/GrpcServerInterceptor.java |  51 +++++
 .../apache/hadoop/hdds/tracing/StringCodec.java    |  89 ++++++++
 .../apache/hadoop/hdds/tracing/TraceAllMethod.java |  86 +++++++
 .../apache/hadoop/hdds/tracing/TracingUtil.java    | 112 ++++++++++
 .../apache/hadoop/hdds/tracing/package-info.java   |  23 ++
 ...inerLocationProtocolServerSideTranslatorPB.java |  41 +++-
 .../main/java/org/apache/ratis/RatisHelper.java    |  26 ++-
 .../proto/StorageContainerLocationProtocol.proto   |  19 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |   1 +
 .../apache/hadoop/ozone/HddsDatanodeService.java   |   5 +
 .../common/transport/server/XceiverServerGrpc.java |   6 +-
 .../server/ratis/ContainerStateMachine.java        | 110 ++++-----
 .../transport/server/ratis/XceiverServerRatis.java |  25 ++-
 hadoop-hdds/pom.xml                                |   6 +
 .../hdds/scm/server/StorageContainerManager.java   |   2 +
 .../apache/hadoop/ozone/client/ObjectStore.java    |   3 +-
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 248 ++++++++-------------
 .../main/compose/ozonetrace/docker-compose.yaml    |  65 ++++++
 .../dist/src/main/compose/ozonetrace/docker-config |  84 +++++++
 hadoop-ozone/objectstore-service/pom.xml           |   6 +
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   2 +
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  28 ++-
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java |  13 +-
 hadoop-ozone/ozonefs/pom.xml                       |   5 -
 hadoop-ozone/pom.xml                               |   4 -
 hadoop-ozone/tools/pom.xml                         |   5 -
 .../java/org/apache/hadoop/ozone/freon/Freon.java  |   7 +
 .../hadoop/ozone/freon/RandomKeyGenerator.java     |  58 +++--
 32 files changed, 932 insertions(+), 296 deletions(-)

commit fb13a25328f0d7d03f51afacb7fb36ff1bc2671f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sun Feb 10 19:34:53 2019 -0800

    HDDS-1077. TestSecureOzoneCluster does not config OM HTTP keytab. Contributed by Xiaoyu Yao.

 .../src/test/java/org/apache/hadoop/ozone/TestSecureOzoneCluster.java   | 2 ++
 1 file changed, 2 insertions(+)

commit 9ffabfa5df2017fd498e085162e985b96ed4d3c2
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sun Feb 10 19:17:08 2019 -0800

    HDDS-1078. TestRatisPipelineProvider failing because of node count mismatch. Contributed by Mukul Kumar Singh.

 .../hadoop/hdds/scm/pipeline/TestRatisPipelineProvider.java      | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 5eb579e2da3fb2e1b066e4d8ad66ef94e3c0bd4d
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Sun Feb 10 10:53:16 2019 +0530

    HDDS-1026. Reads should fail over to alternate replica. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  51 +++++++--
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |   9 +-
 .../hadoop/hdds/scm/storage/BlockInputStream.java  |  72 +++++++++---
 .../hadoop/hdds/scm/storage/BlockOutputStream.java |   6 +-
 ...ientAsyncReply.java => XceiverClientReply.java} |  23 +++-
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |  27 ++++-
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  23 ++--
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 126 +++++++++++++++++----
 8 files changed, 266 insertions(+), 71 deletions(-)

commit d690032c6914b5b642477ab1c671e859b85bc5ec
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Feb 8 12:45:37 2019 -0800

    HDDS-1018. Update the base image of krb5 container for the secure ozone cluster. Contributed by Xiaoyu Yao.

 .../main/compose/ozonesecure/docker-image/docker-krb5/Dockerfile-krb5   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b0dd1f15d16db916ba13ddd2d4587b798cf2d6f6
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri Feb 8 23:49:37 2019 +0800

    HDDS-1048. Remove SCMNodeStat from SCMNodeManager and use storage information from DatanodeInfo#StorageReportProto. Contributed by Nanda kumar.

 .../apache/hadoop/hdds/scm/node/DatanodeInfo.java  |   7 +-
 .../hadoop/hdds/scm/node/DeadNodeHandler.java      |   1 -
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |  15 +-
 .../hadoop/hdds/scm/node/NodeStateManager.java     |  65 ++------
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 169 ++++++++++-----------
 .../hadoop/hdds/scm/node/states/NodeStateMap.java  |  58 -------
 .../hadoop/hdds/scm/container/MockNodeManager.java |  31 +---
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  |  28 ++--
 .../hdds/scm/node/TestNodeReportHandler.java       |   3 +-
 .../testutils/ReplicationNodeManagerMock.java      |  11 +-
 10 files changed, 123 insertions(+), 265 deletions(-)

commit 591abc2b45bb3e4dfe3337b976cee7b717a3614c
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Feb 8 17:33:37 2019 +0530

    HDDS-1033. Add FSStatistics for OzoneFileSystem.
    Contributed by Mukul Kumar Singh.

 .../hadoop/fs/ozone/OzoneClientAdapterFactory.java |   7 +-
 .../hadoop/fs/ozone/OzoneClientAdapterImpl.java    |  19 +++-
 .../hadoop/fs/ozone/OzoneFSStorageStatistics.java  | 126 +++++++++++++++++++++
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |  39 ++++++-
 .../java/org/apache/hadoop/fs/ozone/Statistic.java | 119 +++++++++++++++++++
 .../hadoop/fs/ozone/TestOzoneFileInterfaces.java   |  33 +++++-
 6 files changed, 326 insertions(+), 17 deletions(-)

commit 761d4bcd9e022eea42548ab8cd66b3df78a0b775
Author: Márton Elek <elek@apache.org>
Date:   Fri Feb 8 11:35:55 2019 +0100

    HDDS-1073. Fix FindBugs issues on OzoneBucketStub#createMultipartKey. Contributed by Aravindan Vijayan.

 .../src/test/java/org/apache/hadoop/ozone/client/OzoneBucketStub.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b1dbb820224803a9dede30202bbc4757725fc903
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Feb 8 15:43:58 2019 +0530

    HDDS-981. Block allocation should involve pipeline selection and then container selection.
    Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  11 +-
 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  |   5 +
 .../common/src/main/resources/ozone-default.xml    |  18 ++-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 100 ++++-----------
 .../hdds/scm/chillmode/SCMChillModeManager.java    |   7 +
 .../hdds/scm/container/ContainerManager.java       |  16 +--
 .../hdds/scm/container/ContainerStateManager.java  | 142 ++++++++++++++++-----
 .../hdds/scm/container/SCMContainerManager.java    |  45 +++----
 .../hdds/scm/container/states/ContainerState.java  |  32 ++---
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |   7 +
 .../hadoop/hdds/scm/node/NewNodeHandler.java       |  14 +-
 .../hadoop/hdds/scm/node/NodeStateManager.java     |   2 +
 .../scm/node/NonHealthyToHealthyNodeHandler.java   |  48 +++++++
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  |   4 +-
 .../hdds/scm/pipeline/PipelineStateManager.java    |   5 +-
 .../hadoop/hdds/scm/pipeline/PipelineStateMap.java |   8 +-
 .../hdds/scm/pipeline/RatisPipelineUtils.java      | 114 +++++++++++++++--
 .../hdds/scm/pipeline/SCMPipelineManager.java      |   5 +-
 .../hdds/scm/server/StorageContainerManager.java   |   7 +-
 .../org/apache/hadoop/hdds/scm/HddsTestUtils.java  |  25 ++++
 .../hadoop/hdds/scm/block/TestBlockManager.java    | 133 ++++++++++++++++++-
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  |  19 +--
 .../hadoop/hdds/scm/node/TestSCMNodeManager.java   |  81 ++++++------
 .../TestContainerStateManagerIntegration.java      |  99 ++++++++++----
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |   7 +-
 .../hdds/scm/pipeline/TestPipelineClose.java       |   4 +-
 .../scm/pipeline/TestRatisPipelineProvider.java    |   2 +-
 .../hdds/scm/pipeline/TestRatisPipelineUtils.java  |  95 ++++++++++++++
 .../hadoop/hdds/scm/pipeline/TestSCMRestart.java   |   2 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |   4 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |   2 +-
 .../client/rpc/TestOzoneRpcClientWithRatis.java    |   2 +-
 .../ozone/client/rpc/TestSecureOzoneRpcClient.java |   2 +-
 .../TestCloseContainerByPipeline.java              |   5 +-
 .../ozone/om/TestMultipleContainerReadWrite.java   |   2 +-
 .../apache/hadoop/ozone/om/TestScmChillMode.java   |  22 +---
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |   4 +-
 37 files changed, 795 insertions(+), 305 deletions(-)

commit 721e418eeae76f0f1a5e497c54738d579ab2c9f4
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Feb 7 18:05:05 2019 -0800

    HDDS-1069. Temporarily disable the security acceptance tests by default in Ozone. Contributed by Marton Elek.

 hadoop-ozone/dist/src/main/smoketest/test.sh | 2 --
 1 file changed, 2 deletions(-)

commit 215c5a33d69af280648f50467b6862eac7db7456
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Feb 7 08:53:11 2019 -0800

    HDDS-1071. Make Ozone s3 acceptance test suite centos compatible. Contributed by Elek Marton.

 hadoop-ozone/dist/src/main/smoketest/s3/commonawslib.robot | 5 +++++
 1 file changed, 5 insertions(+)

commit e88f64af34780be043bb77c1d9a73ee882581d4c
Author: Márton Elek <elek@apache.org>
Date:   Thu Feb 7 17:02:03 2019 +0100

    HDDS-922. Create isolated classloder to use ozonefs with any older hadoop versions. Contributed by Elek, Marton.

 .../hadoop/hdds/conf/OzoneConfiguration.java       |   2 +
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   7 +
 .../common/src/main/resources/ozone-default.xml    |  15 ++
 hadoop-hdds/docs/content/OzoneFS.md                |  19 +-
 .../dist/dev-support/bin/dist-layout-stitching     |   4 -
 hadoop-ozone/dist/pom.xml                          |  15 ++
 .../src/main/compose/ozonefs/docker-compose.yaml   |  29 ++-
 hadoop-ozone/ozonefs-lib-legacy/pom.xml            | 104 +++++++++
 .../src/main/resources/ozonefs.txt                 |  21 ++
 hadoop-ozone/ozonefs-lib/pom.xml                   |  89 ++++++++
 hadoop-ozone/ozonefs/pom.xml                       |  60 ++----
 .../org/apache/hadoop/fs/ozone/BasicKeyInfo.java   |  53 +++++
 .../hadoop/fs/ozone/FilteredClassLoader.java       |  84 ++++++++
 .../apache/hadoop/fs/ozone/OzoneClientAdapter.java |  55 +++++
 .../hadoop/fs/ozone/OzoneClientAdapterFactory.java | 119 +++++++++++
 .../hadoop/fs/ozone/OzoneClientAdapterImpl.java    | 235 +++++++++++++++++++++
 .../apache/hadoop/fs/ozone/OzoneFSInputStream.java |  16 +-
 .../hadoop/fs/ozone/OzoneFSOutputStream.java       |   5 +-
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    | 225 ++++++++------------
 hadoop-ozone/pom.xml                               |  23 +-
 20 files changed, 963 insertions(+), 217 deletions(-)

commit bcb8ae85938b67a165668f3aad02627bb6b6ea16
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu Feb 7 18:06:23 2019 +0530

    HDDS-1010. ContainerSet#getContainerMap should be renamed. Contributed by Supratim Deka.

 .../hadoop/ozone/container/common/impl/ContainerSet.java   |  3 ++-
 .../ozone/container/common/TestBlockDeletingService.java   |  2 +-
 .../common/impl/TestContainerDeletionChoosingPolicy.java   |  4 ++--
 .../container/common/impl/TestContainerPersistence.java    | 14 +++++++-------
 4 files changed, 12 insertions(+), 11 deletions(-)

commit 4447be61979464c00e84051cc2471b4817aed141
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Feb 6 20:02:17 2019 -0800

    HDDS-1044. Client doesn't propogate correct error code to client on out of disk space. Contributed by Yiqun Lin.

 .../container/common/impl/HddsDispatcher.java      | 17 ++++-
 .../container/common/impl/TestHddsDispatcher.java  | 86 +++++++++++++++++-----
 2 files changed, 83 insertions(+), 20 deletions(-)

commit 52d1ab4057b48ca4a39a6945c2f10a2311b79700
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Feb 6 11:32:38 2019 +0530

    HDDS-1027. Add blockade Tests for datanode isolation and scm failures. Contributed by Nilotpal Nandi.

 ...t_blockade_mixed_failure_three_nodes_isolate.py | 143 +++++++++++++++++++++
 .../test_blockade_mixed_failure_two_nodes.py       | 120 +++++++++++++++++
 2 files changed, 263 insertions(+)

commit 9f2eb2848795368fe87c5fa3a58c9a9710c93eea
Author: Márton Elek <elek@apache.org>
Date:   Fri Feb 1 14:40:23 2019 +0100

    HDDS-631. Ozone classpath shell command is not working. Contributed by Elek, Marton.

 hadoop-ozone/common/src/main/bin/ozone | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

commit 3fa17c12ffeb3d1ea8aa97d4197d367ce6b37d2a
Author: Márton Elek <elek@apache.org>
Date:   Tue Feb 5 16:11:16 2019 +0100

    HDDS-776. Make OM initialization resilient to dns failures. Contributed by Doroszlai, Attila.

 hadoop-hdds/common/pom.xml                         |  4 ++
 .../org/apache/hadoop/utils/RetriableTask.java     | 78 ++++++++++++++++++++++
 .../org/apache/hadoop/utils/TestRetriableTask.java | 76 +++++++++++++++++++++
 hadoop-hdds/pom.xml                                |  8 ++-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 22 +++++-
 5 files changed, 185 insertions(+), 3 deletions(-)

commit 3ada0aa43d98232d1cbd7924ece2a5bedf3917b9
Author: Márton Elek <elek@apache.org>
Date:   Tue Feb 5 12:45:43 2019 +0100

    HDDS-987. MultipartUpload: S3API for list parts of a object. Contributed by Bharat Viswanadham.

 .../client/OzoneMultipartUploadPartListParts.java  |   4 +
 .../src/main/smoketest/s3/MultipartUpload.robot    |  46 ++++-
 .../ozone/s3/endpoint/ListPartsResponse.java       | 196 +++++++++++++++++++++
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   |  86 ++++++++-
 .../hadoop/ozone/client/OzoneBucketStub.java       |  51 ++++++
 .../hadoop/ozone/s3/endpoint/TestListParts.java    | 129 ++++++++++++++
 .../hadoop/ozone/s3/endpoint/TestObjectGet.java    |   2 +-
 .../hadoop/ozone/s3/endpoint/TestPartUpload.java   |   2 +-
 8 files changed, 510 insertions(+), 6 deletions(-)

commit ba4dc807addda2f85850021416da06321476e1bd
Author: Yiqun Lin <yqlin@apache.org>
Date:   Tue Feb 5 10:51:52 2019 +0800

    HDDS-1029. Allow option for force in DeleteContainerCommand. Contributed by Bharat Viswanadham.

 .../src/main/proto/DatanodeContainerProtocol.proto |   1 -
 .../container/common/impl/HddsDispatcher.java      |   1 -
 .../container/common/interfaces/Container.java     |   3 +-
 .../ozone/container/common/interfaces/Handler.java |   4 +-
 .../DeleteContainerCommandHandler.java             |   3 +-
 .../container/keyvalue/KeyValueContainer.java      |   5 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  |  27 ++--
 .../keyvalue/helpers/KeyValueContainerUtil.java    |   3 +-
 .../container/ozoneimpl/ContainerController.java   |   7 +-
 .../protocol/commands/DeleteContainerCommand.java  |  28 +++-
 .../proto/StorageContainerDatanodeProtocol.proto   |   1 +
 .../container/keyvalue/TestKeyValueContainer.java  |   4 +-
 .../container/replication/ReplicationManager.java  |   2 +-
 .../common/impl/TestContainerPersistence.java      |   4 +-
 .../commandhandler/TestDeleteContainerHandler.java | 156 +++++++++++++++------
 .../container/ozoneimpl/TestOzoneContainer.java    |  27 +---
 16 files changed, 174 insertions(+), 102 deletions(-)

commit b732f1325cb8a3a7643934f3e56a029afe321d0a
Author: Ajay Kumar <ajay@apache.org>
Date:   Mon Feb 4 16:30:07 2019 -0800

    HDDS-1039. OzoneManager fails to connect with secure SCM. Contributed by Ajay Kumar

 .../apache/hadoop/hdds/scm/protocolPB/ScmBlockLocationProtocolPB.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8bb1769ce7f2d86facf1e20da304d404ddd44722
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Sun Feb 3 00:53:06 2019 +0530

    HDDS-1021. Allow ozone datanode to participate in a 1 node as well as 3 node Ratis Pipeline. Contributed by Shashikant Banerjee.

 .../hdds/scm/pipeline/RatisPipelineProvider.java   |   2 +-
 .../client/rpc/TestHybridPipelineOnDatanode.java   | 166 +++++++++++++++++++++
 2 files changed, 167 insertions(+), 1 deletion(-)

commit 7c578504cc63f12e481b0d19d41aebd3fec7579a
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Fri Feb 1 20:44:48 2019 +0530

    HDDS-1037. Fix the block discard logic in Ozone client. Contributed by Shashikant Banerjee.

 .../main/java/org/apache/hadoop/ozone/client/io/KeyOutputStream.java | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 19fe0f1f63c5e7e8a243ee4083c36a7aa9a0855f
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri Feb 1 13:10:08 2019 +0530

    HDDS-997. Add blockade Tests for scm isolation and mixed node isolation. Contributed by Nilotpal Nandi.

 hadoop-ozone/dist/src/main/blockade/README.md      |  20 +++-
 .../src/main/blockade/blockadeUtils/blockade.py    |  16 ++-
 .../main/blockade/clusterUtils/cluster_utils.py    |  86 +++++++++------
 hadoop-ozone/dist/src/main/blockade/conftest.py    |  32 ++++--
 .../blockade/test_blockade_datanode_isolation.py   |  51 ++++++---
 .../dist/src/main/blockade/test_blockade_flaky.py  |  10 +-
 .../main/blockade/test_blockade_mixed_failure.py   | 116 +++++++++++++++++++++
 .../main/blockade/test_blockade_scm_isolation.py   | 110 +++++++++++++++++++
 .../main/compose/ozoneblockade/docker-compose.yaml |  49 +++++++++
 .../src/main/compose/ozoneblockade/docker-config   |  77 ++++++++++++++
 10 files changed, 504 insertions(+), 63 deletions(-)

commit c01b2c5225e28317bdb56058f6aeda6a31d0caba
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri Feb 1 11:34:51 2019 +0800

    HDDS-1025. Handle replication of closed containers in DeadNodeHanlder. Contributed by Bharat Viswanadham.

 .../hadoop/hdds/scm/node/DeadNodeHandler.java      | 28 ++++++++----
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java | 15 +++++++
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  | 51 ++++++++++++++++++----
 3 files changed, 77 insertions(+), 17 deletions(-)

commit c8ff4fc55e8df252d1679c1395fffcf32f2aea22
Author: Márton Elek <elek@apache.org>
Date:   Thu Jan 31 14:51:31 2019 +0100

    HDDS-956. MultipartUpload: List Parts for a Multipart upload key. Contributed by Bharat Viswanadham.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   4 +
 .../apache/hadoop/ozone/client/OzoneBucket.java    |  22 +++
 .../client/OzoneMultipartUploadPartListParts.java  | 103 ++++++++++
 .../ozone/client/protocol/ClientProtocol.java      |  16 ++
 .../hadoop/ozone/client/rest/RestClient.java       |   8 +
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  37 +++-
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  73 +++----
 .../org/apache/hadoop/ozone/audit/OMAction.java    |   3 +-
 .../hadoop/ozone/om/exceptions/OMException.java    |   3 +-
 .../ozone/om/helpers/OmMultipartKeyInfo.java       |   2 +-
 .../om/helpers/OmMultipartUploadListParts.java     |  84 +++++++++
 .../apache/hadoop/ozone/om/helpers/OmPartInfo.java |  60 ++++++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  15 ++
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  36 ++++
 .../src/main/proto/OzoneManagerProtocol.proto      |  28 +++
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 209 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/om/KeyManager.java     |  17 ++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  85 ++++++++-
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |  11 ++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  30 ++-
 .../protocolPB/OzoneManagerRequestHandler.java     |  52 +++++
 21 files changed, 853 insertions(+), 45 deletions(-)

commit 1bb189bc6577aa11b000671d121095d6698e66bf
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jan 30 16:21:42 2019 -0800

    HDDS-1035. Intermittent TestRootList failure. Contributed by Doroszlai Attila.

 .../java/org/apache/hadoop/ozone/s3/endpoint/TestRootList.java    | 8 +++-----
 1 file changed, 3 insertions(+), 5 deletions(-)

commit 97747a4c4b773b20d884717c9918dc5d4d026308
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jan 30 16:00:18 2019 -0800

    HDDS-549. Add support for key rename in Ozone Shell. Contributed by Doroszlai Attila.

 hadoop-hdds/docs/content/KeyCommands.md            | 17 +++++
 .../src/main/smoketest/basic/ozone-shell.robot     |  5 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 54 +++++++++++++---
 .../hadoop/ozone/web/ozShell/keys/KeyCommands.java |  1 +
 .../ozone/web/ozShell/keys/RenameKeyHandler.java   | 73 ++++++++++++++++++++++
 5 files changed, 142 insertions(+), 8 deletions(-)

commit 0accb5843245a17ee31eb5f3f4e95341ccadc527
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed Jan 30 11:40:50 2019 -0800

    HDDS-1016. Allow marking containers as unhealthy. Contributed by Arpit Agarwal.

 .../container/common/interfaces/Container.java     |   5 +
 .../container/keyvalue/KeyValueContainer.java      |  60 +++++-
 .../ozone/container/keyvalue/KeyValueHandler.java  |  94 ++++++++-
 .../TestKeyValueContainerMarkUnhealthy.java        | 172 ++++++++++++++++
 .../TestKeyValueHandlerWithUnhealthyContainer.java | 227 +++++++++++++++++++++
 5 files changed, 538 insertions(+), 20 deletions(-)

commit 04b781f835705a08ba171d6e5ceee93c40df5318
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jan 30 11:14:02 2019 -0800

    HDDS-1031. Update ratis version to fix a DN restart Bug. Contributed by Bharat Viswanadham.

 hadoop-hdds/pom.xml  | 2 +-
 hadoop-ozone/pom.xml | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 0051af5bb0d8799944ffe367e096d91f392a774d
Author: Márton Elek <elek@apache.org>
Date:   Wed Jan 30 17:33:38 2019 +0100

    HDDS-1030. Move auditparser robot tests under ozone basic. Contributed by Dinesh Chitlangia.

 .../smoketest/{auditparser/parser.robot => basic/auditparser.robot}     | 0
 hadoop-ozone/dist/src/main/smoketest/test.sh                            | 2 --
 2 files changed, 2 deletions(-)

commit bb4bb8dacb36eb77c9b594602e6d8dc61bdd510b
Author: Márton Elek <elek@apache.org>
Date:   Wed Jan 30 13:40:45 2019 +0100

    HDDS-1032. Package builds are failing with missing org.mockito:mockito-core dependency version. Contributed by Doroszlai, Attila.

 hadoop-hdds/framework/pom.xml  | 2 +-
 hadoop-hdds/server-scm/pom.xml | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 4ca773865b0491b31fdf90db58a90ba6f06afea1
Author: Yiqun Lin <yqlin@apache.org>
Date:   Wed Jan 30 13:56:28 2019 +0800

    HDDS-1024. Handle DeleteContainerCommand in the SCMDatanodeProtocolServer. Contributed by Bharat Viswanadham.

 .../hdds/scm/server/SCMDatanodeProtocolServer.java |   9 +
 .../commandhandler/TestDeleteContainerHandler.java | 209 +++++++++++++++++++++
 .../statemachine/commandhandler/package-info.java  |  21 +++
 3 files changed, 239 insertions(+)

commit 61fec6d14090d94107642c6e658ae7c22a95a776
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Tue Jan 29 18:29:09 2019 -0800

    HADOOP-14178. Move Mockito up to version 2.23.4. Contributed by Akira Ajisaka and Masatake Iwasaki.

 hadoop-hdds/framework/pom.xml  | 2 +-
 hadoop-hdds/server-scm/pom.xml | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 2fda1c73fe5f1b7c49a957a478dbd83278c696cd
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Jan 29 14:11:56 2019 +0530

    HDDS-1004. SCMContainerManager#updateContainerStateInternal fails for QUASI_CLOSE and FORCE_CLOSE events. Contributed by Lokesh Jain.

 .../hdds/scm/container/ContainerReportHandler.java | 25 +++++++++++-----------
 .../hdds/scm/container/SCMContainerManager.java    | 21 ------------------
 .../hdds/scm/pipeline/RatisPipelineUtils.java      |  2 +-
 3 files changed, 13 insertions(+), 35 deletions(-)

commit 57e28fa8a2d5168fcb48cdc9b9e2ba3cbea82696
Author: Yiqun Lin <yqlin@apache.org>
Date:   Tue Jan 29 11:26:41 2019 +0800

    HDDS-1022. Add cmd type in getCommandResponse in SCMDatanodeProtocolServer. Contributed by Bharat Viswanadham.

 .../org/apache/hadoop/hdds/scm/server/SCMDatanodeProtocolServer.java   | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 271cb3f88bd5f237938d41638f0065c17cc6a710
Author: Yiqun Lin <yqlin@apache.org>
Date:   Mon Jan 28 17:03:12 2019 +0800

    HDDS-974. Add getServiceAddress method to ServiceInfo and use it in TestOzoneShell. Contributed by Doroszlai, Attila.

 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  5 +-
 .../hadoop/ozone/om/helpers/ServiceInfo.java       | 14 ++++-
 .../ozone/ozShell/TestOzoneDatanodeShell.java      | 34 +----------
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 66 ++++++++--------------
 4 files changed, 40 insertions(+), 79 deletions(-)

commit 5ab37090ac467006694a082785a39af5a13e356c
Author: Arpit Agarwal <arp@apache.org>
Date:   Sun Jan 27 11:18:30 2019 -0800

    HDDS-989. Check Hdds Volumes for errors. Contributed by Arpit Agarwal.

 .../container/common/volume/AbstractFuture.java    | 1291 ++++++++++++++++++++
 .../ozone/container/common/volume/HddsVolume.java  |   24 +-
 .../container/common/volume/HddsVolumeChecker.java |  418 +++++++
 .../common/volume/ThrottledAsyncChecker.java       |  245 ++++
 .../container/common/volume/TimeoutFuture.java     |  161 +++
 .../ozone/container/common/volume/VolumeSet.java   |  116 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |    1 +
 .../common/volume/TestHddsVolumeChecker.java       |  212 ++++
 .../common/volume/TestVolumeSetDiskChecks.java     |  185 +++
 9 files changed, 2643 insertions(+), 10 deletions(-)

commit ba71ff7f174be836f0e7749090fb98b45298799c
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Jan 25 21:39:03 2019 -0800

    HDDS-1013. NPE while listing directories.

 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |  6 +-
 .../hadoop/fs/ozone/TestOzoneFileSystem.java       | 66 ++++++++++++++++++++++
 2 files changed, 70 insertions(+), 2 deletions(-)

commit 91e42a3c1e722ce338fd7c074acd1aa65d8e4d74
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jan 25 14:46:17 2019 -0800

    HDDS-1011. Fix NPE BucketManagerImpl.setBucketProperty. Contributed by Xiaoyu Yao.

 .../main/java/org/apache/hadoop/ozone/om/helpers/OmBucketInfo.java    | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 5f6d87157896a2bd228509b7091ebbe6b3dcb131
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jan 25 10:50:23 2019 -0800

    HDDS-991. Fix failures in TestSecureOzoneCluster. Contributed by Ajay Kumar.

 .../hadoop/ozone/om/exceptions/OMException.java    |   7 +-
 .../hadoop/ozone/om/exceptions/package-info.java   |   0
 .../om/protocol/OzoneManagerSecurityProtocol.java  |  14 +-
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 165 +++++++++++++--------
 .../OzoneDelegationTokenSecretManager.java         |  10 +-
 .../src/main/proto/OzoneManagerProtocol.proto      |   6 +
 .../hadoop/ozone/TestSecureOzoneCluster.java       |  83 ++++++++---
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  86 ++++++-----
 ...OzoneManagerProtocolServerSideTranslatorPB.java |   2 +-
 .../protocolPB/OzoneManagerRequestHandler.java     |  11 +-
 10 files changed, 255 insertions(+), 129 deletions(-)

commit c481dc19e22c7707a1fb7f33049d489a1cbca043
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jan 24 23:24:09 2019 -0800

    HDDS-793. Support custom key/value annotations on volume/bucket/key. Contributed by Elek, Marton.

 .../org/apache/hadoop/ozone/client/BucketArgs.java | 30 ++++++++-
 .../apache/hadoop/ozone/client/OzoneBucket.java    | 17 +++--
 .../hadoop/ozone/client/OzoneKeyDetails.java       | 10 ++-
 .../apache/hadoop/ozone/client/OzoneVolume.java    | 19 +++++-
 .../org/apache/hadoop/ozone/client/VolumeArgs.java | 28 +++++++-
 .../ozone/client/protocol/ClientProtocol.java      |  4 +-
 .../hadoop/ozone/client/rest/RestClient.java       | 13 ++--
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 35 ++++++----
 .../hadoop/ozone/om/helpers/KeyValueUtil.java      | 54 +++++++++++++++
 .../hadoop/ozone/om/helpers/OmBucketArgs.java      | 18 +++--
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      | 58 ++++++++++++++--
 .../apache/hadoop/ozone/om/helpers/OmKeyArgs.java  | 28 +++++++-
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  | 65 +++++++++++++++---
 .../hadoop/ozone/om/helpers/OmVolumeArgs.java      | 68 ++++++++++---------
 .../hadoop/ozone/om/helpers/WithMetadata.java      | 44 +++++++++++++
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  6 ++
 .../src/main/proto/OzoneManagerProtocol.proto      |  6 ++
 .../hadoop/ozone/om/helpers/TestOmBucketInfo.java  | 46 +++++++++++++
 .../hadoop/ozone/om/helpers/TestOmKeyInfo.java     | 52 +++++++++++++++
 .../hadoop/ozone/om/helpers/package-info.java      | 21 ++++++
 .../ozone/client/rest/TestOzoneRestClient.java     |  9 +--
 .../apache/hadoop/ozone/client/rpc/TestBCSID.java  |  3 +-
 .../client/rpc/TestContainerStateMachine.java      |  3 +-
 .../rpc/TestContainerStateMachineFailures.java     |  3 +-
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 77 +++++++++++++++++-----
 .../ozone/client/rpc/TestSecureOzoneRpcClient.java |  5 +-
 .../ozone/container/ContainerTestHelper.java       | 45 +++++++------
 .../commandhandler/TestBlockDeletion.java          |  3 +-
 .../TestCloseContainerByPipeline.java              |  7 +-
 .../commandhandler/TestCloseContainerHandler.java  |  3 +-
 .../ozone/om/TestContainerReportWithKeys.java      |  3 +-
 .../ozone/web/TestOzoneRestWithMiniCluster.java    |  4 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   | 13 ++--
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  2 +
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  1 +
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  2 +
 .../ozone/web/ozShell/keys/PutKeyHandler.java      |  3 +-
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |  6 +-
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   |  5 +-
 .../hadoop/ozone/client/OzoneBucketStub.java       |  9 ++-
 .../hadoop/ozone/s3/endpoint/TestObjectHead.java   |  3 +-
 .../hadoop/ozone/freon/RandomKeyGenerator.java     |  3 +-
 42 files changed, 681 insertions(+), 153 deletions(-)

commit ea3c49db8200cd6fc8619fa08af36acfd5e8184e
Author: Nanda kumar <nandakumar131@gmail.com>
Date:   Fri Jan 25 12:20:12 2019 +0530

    HDDS-1009. TestAbortMultipartUpload is missing the apache license text.
    Contributed by Dinesh Chitlangia.

 .../ozone/s3/endpoint/TestAbortMultipartUpload.java   | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

commit f509ec853784152b1c4ddb77047ded5bbc1e67d4
Author: Nanda kumar <nandakumar131@gmail.com>
Date:   Fri Jan 25 12:19:11 2019 +0530

    HDDS-973. HDDS/Ozone fail to build on Windows.
    Contributed by Xiaoyu Yao.

 hadoop-hdds/docs/pom.xml | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 4add7697b47121b769014311c4e362cc0f2efbd5
Author: Nanda kumar <nandakumar131@gmail.com>
Date:   Fri Jan 25 12:17:36 2019 +0530

    HDDS-990. Typos in Ozone doc.
    Contributed by Doroszlai, Attila.

 hadoop-hdds/docs/content/BucketCommands.md | 10 ++++-----
 hadoop-hdds/docs/content/Dozone.md         | 17 +++++++-------
 hadoop-hdds/docs/content/JavaApi.md        | 36 +++++++++++++++---------------
 hadoop-hdds/docs/content/KeyCommands.md    |  6 ++---
 hadoop-hdds/docs/content/Rest.md           |  2 +-
 hadoop-hdds/docs/content/S3.md             |  6 ++---
 hadoop-hdds/docs/content/VolumeCommands.md |  2 +-
 7 files changed, 39 insertions(+), 40 deletions(-)

commit ec55efa17bb5bc0a9cc7334a97f0dfd19a772211
Author: Nanda kumar <nandakumar131@gmail.com>
Date:   Fri Jan 25 12:16:29 2019 +0530

    HDDS-906. Display the ozone version on SCM/OM web ui instead of Hadoop version.
    Contributed by Doroszlai, Attila.

 .../org/apache/hadoop/utils/HddsVersionInfo.java   | 70 +---------------
 .../java/org/apache/hadoop/utils/VersionInfo.java  | 97 ++++++++++++++++++++++
 .../hadoop/hdds/server/ServiceRuntimeInfoImpl.java | 15 ++--
 .../hdds/scm/server/StorageContainerManager.java   | 24 +++---
 .../apache/hadoop/ozone/util/OzoneVersionInfo.java | 75 ++---------------
 .../hadoop/ozone/TestStorageContainerManager.java  |  6 ++
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |  8 ++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  2 +
 8 files changed, 143 insertions(+), 154 deletions(-)

commit a17cd2b4d8b6e76709679e0c3db443d54b7951de
Author: Nanda kumar <nandakumar131@gmail.com>
Date:   Fri Jan 25 12:14:10 2019 +0530

    HDDS-1007. Add robot test for AuditParser.
    Contributed by Dinesh Chitlangia.

 .../src/main/smoketest/auditparser/parser.robot    | 40 ++++++++++++++++++++++
 hadoop-ozone/dist/src/main/smoketest/test.sh       |  2 ++
 2 files changed, 42 insertions(+)

commit 6662893605c4170fddc347234439b69ca1c37bf1
Author: Nanda kumar <nandakumar131@gmail.com>
Date:   Fri Jan 25 12:11:58 2019 +0530

    HDDS-1006. AuditParser assumes incorrect log format.
    Contributed by Dinesh Chitlangia.

 .../ozone/audit/parser/common/DatabaseHelper.java      | 12 +++++++-----
 hadoop-ozone/tools/src/test/resources/testaudit.log    | 18 +++++++++---------
 2 files changed, 16 insertions(+), 14 deletions(-)

commit 4d0afce0af30e439e65c6bac58151f185273c97c
Author: Márton Elek <elek@apache.org>
Date:   Thu Jan 24 20:24:19 2019 +0100

    HDDS-948. MultipartUpload: S3 API for Abort Multipart Upload. Contributed by Bharat Viswanadham.

 .../src/main/smoketest/s3/MultipartUpload.robot    | 11 ++++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  2 +-
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   | 37 ++++++++++++-
 .../hadoop/ozone/client/OzoneBucketStub.java       | 10 ++++
 .../s3/endpoint/TestAbortMultipartUpload.java      | 64 ++++++++++++++++++++++
 .../hadoop/ozone/s3/endpoint/TestObjectDelete.java |  2 +-
 6 files changed, 122 insertions(+), 4 deletions(-)

commit 55ae063332641e599d442840d7f1f7c3c6990fdd
Author: Márton Elek <elek@apache.org>
Date:   Thu Jan 24 17:13:05 2019 +0100

    HDDS-1002. ozonesecure compose incompatible with smoke test. Contributed by Doroszlai, Attila.

 hadoop-ozone/dist/src/main/compose/ozonesecure/docker-compose.yaml | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 3c7792b71edcc6cb9e891847d4dac467093bbd16
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Jan 24 16:37:05 2019 +0530

    HDDS-996. Incorrect data length gets updated in OM by client in case it hits exception in multiple successive block writes. Contributed by Shashikant Banerjee.

 .../org/apache/hadoop/ozone/client/io/KeyOutputStream.java    | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit df6afbb37da9b1a316ad826a67900e73dbc37bec
Author: Márton Elek <elek@apache.org>
Date:   Thu Jan 24 11:14:54 2019 +0100

    HDDS-993. Update hadoop version to 3.2.0. Contributed by Supratim Deka.

 hadoop-hdds/pom.xml                                                | 2 +-
 hadoop-ozone/dist/src/main/compose/ozone-hdfs/docker-compose.yaml  | 1 +
 hadoop-ozone/dist/src/main/compose/ozone/docker-compose.yaml       | 1 +
 hadoop-ozone/dist/src/main/compose/ozonefs/docker-compose.yaml     | 1 +
 hadoop-ozone/dist/src/main/compose/ozoneperf/docker-compose.yaml   | 1 +
 hadoop-ozone/dist/src/main/compose/ozones3/docker-compose.yaml     | 1 +
 hadoop-ozone/dist/src/main/compose/ozonesecure/docker-compose.yaml | 3 ++-
 hadoop-ozone/pom.xml                                               | 4 ++--
 8 files changed, 10 insertions(+), 4 deletions(-)

commit e89209f6ca0d0f8e7c26c2ca6fb7bbc75bd410b6
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jan 23 19:32:03 2019 -0800

    HDDS-980. Adding getOMCertificate in SCMSecurityProtocol. Contributed by Ajay Kumar.

 .../hadoop/hdds/protocol/SCMSecurityProtocol.java  | 13 ++++-
 .../SCMSecurityProtocolClientSideTranslatorPB.java | 27 ++++++++-
 .../SCMSecurityProtocolServerSideTranslatorPB.java | 38 +++++++++++--
 .../certificate/authority/CertificateApprover.java |  2 +-
 .../x509/certificate/utils/CertificateCodec.java   |  2 +-
 .../src/main/proto/SCMSecurityProtocol.proto       | 38 +++++++++----
 hadoop-hdds/common/src/main/proto/hdds.proto       | 11 ++++
 .../hdds/scm/server/SCMSecurityProtocolServer.java | 65 ++++++++++++++++++----
 .../hdds/scm/server/StorageContainerManager.java   | 10 +---
 .../scm/server/TestSCMSecurityProtocolServer.java  |  2 +-
 10 files changed, 170 insertions(+), 38 deletions(-)

commit 720e8780f0c265ba3959af0f1efc0bc37ea32243
Author: Ajay Kumar <ajay@apache.org>
Date:   Wed Jan 23 15:34:20 2019 -0800

    HDDS-975. Manage ozone security tokens with ozone shell cli. Contributed by Ajay Kumar.

 .../apache/hadoop/ozone/client/ObjectStore.java    | 39 +++++++++
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 94 ++++++++++++++++++++++
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java |  2 +
 .../web/ozShell/token/CancelTokenHandler.java      | 70 ++++++++++++++++
 .../ozone/web/ozShell/token/GetTokenHandler.java   | 77 ++++++++++++++++++
 .../ozone/web/ozShell/token/PrintTokenHandler.java | 69 ++++++++++++++++
 .../ozone/web/ozShell/token/RenewTokenHandler.java | 73 +++++++++++++++++
 .../ozone/web/ozShell/token/TokenCommands.java     | 64 +++++++++++++++
 .../ozone/web/ozShell/token/package-info.java      | 26 ++++++
 9 files changed, 514 insertions(+)

commit ecb234d10d55d522d5160314fbf63cb59d776c0a
Author: Elek, Márton <elek@users.noreply.github.com>
Date:   Wed Jan 23 20:37:49 2019 +0100

    HDDS-764. Run S3 smoke tests with replication STANDARD. (#462)
    
    HDDS-764. Run S3 smoke tests with replication STANDARD. Contributed by Elek, Marton.

 .../src/main/smoketest/s3/MultipartUpload.robot    | 10 +++---
 .../dist/src/main/smoketest/s3/awss3.robot         |  4 +--
 .../dist/src/main/smoketest/s3/objectcopy.robot    | 12 +++----
 .../dist/src/main/smoketest/s3/objectdelete.robot  |  6 ++--
 .../src/main/smoketest/s3/objectmultidelete.robot  | 14 ++++----
 .../dist/src/main/smoketest/s3/objectputget.robot  |  4 +--
 hadoop-ozone/dist/src/main/smoketest/test.sh       | 41 +++++++++++++++++++---
 7 files changed, 62 insertions(+), 29 deletions(-)

commit 1167f359e3549ba682014924ce3943b15dd0c2b9
Author: Márton Elek <elek@apache.org>
Date:   Wed Jan 23 11:31:07 2019 +0100

    HDDS-982. Fix TestContainerDataYaml#testIncorrectContainerFile. Contributed by Doroszlai, Attila.

 .../ozone/container/common/impl/TestContainerDataYaml.java       | 9 ++++-----
 .../container-service/src/test/resources/incorrect.container     | 2 +-
 2 files changed, 5 insertions(+), 6 deletions(-)

commit 5c2afe9d50c9d77101dcd15efbec6636092cd857
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Jan 23 14:05:49 2019 +0530

    HDDS-932. Add blockade Tests for Network partition. Contributed by Nilotpal Nandi.

 .../src/main/blockade/blockadeUtils/blockade.py    |  38 ++++++-
 .../main/blockade/clusterUtils/cluster_utils.py    | 112 ++++++++++++++++++---
 .../blockade/test_blockade_datanode_isolation.py   |  91 +++++++++++++++++
 .../{test_blockade.py => test_blockade_flaky.py}   |  10 +-
 4 files changed, 234 insertions(+), 17 deletions(-)

commit 4ed51482283d425360cbb12c002518c1ae2b7288
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Jan 22 13:37:05 2019 -0800

    HDDS-992. ozone-default.xml has invalid text from a stale merge. Contributed by  Dinesh Chitlangia.

 hadoop-hdds/common/src/main/resources/ozone-default.xml | 3 ---
 1 file changed, 3 deletions(-)

commit 50796ac3d1d8e8f29dd9754160df6793ca252a20
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Jan 22 09:27:17 2019 -0800

    HDDS-913. Ozonefs defaultFs example is wrong in the documentation. Contributed by Supratim Deka.

 hadoop-hdds/docs/content/OzoneFS.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3e4d412f943ddb6b73f2560ddb848a19765e6d7c
Merge: e34da5cf ec599e7b
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jan 18 14:40:21 2019 -0800

    Merge branch 'HDDS-4' into trunk

commit ec599e7bc4d9de8ffddf0f1304f3f43476fb62f3
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jan 18 13:16:38 2019 -0800

    HDDS-983. Rename S3Utils to avoid conflict with HDFS classes. Contributed by Bharat Viswanadham.

 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java     |  4 ++--
 .../{S3utils.java => RangeHeaderParserUtil.java}     |  9 ++-------
 ...stS3utils.java => TestRangeHeaderParserUtil.java} | 20 ++++++++++----------
 3 files changed, 14 insertions(+), 19 deletions(-)

commit e34da5cffd243f8c45de6d3758392c4086e0fbce
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jan 18 12:11:34 2019 -0800

    HDDS-943. Add block token validation in HddsDispatcher/XceiverServer. Contributed by Ajay Kumar.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   6 +-
 .../security/exception/SCMSecurityException.java   |  26 +++
 .../hdds/security/token/BlockTokenVerifier.java    |  10 +-
 .../hadoop/hdds/security/x509/SecurityConfig.java  |  16 +-
 .../common/src/main/resources/ozone-default.xml    |   2 +-
 .../transport/server/GrpcXceiverService.java       |  16 ++
 .../common/transport/server/XceiverServer.java     |  86 ++++++++
 .../common/transport/server/XceiverServerGrpc.java |  40 ++--
 .../server/ratis/ContainerStateMachine.java        |  43 +++-
 .../transport/server/ratis/XceiverServerRatis.java |  11 +-
 .../client/rpc/TestContainerStateMachine.java      | 151 +++++++++++++
 .../ozone/client/rpc/TestSecureOzoneRpcClient.java |   2 +-
 .../ozone/container/ContainerTestHelper.java       |  45 +++-
 .../ozoneimpl/TestSecureOzoneContainer.java        |  20 +-
 .../container/server/TestContainerServer.java      |  43 +++-
 .../server/TestSecureContainerServer.java          | 238 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |   8 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  13 +-
 18 files changed, 684 insertions(+), 92 deletions(-)

commit 0b9f47382fed1253e50786f11f86ee90902e6720
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri Jan 18 11:08:35 2019 -0800

    HDDS-959. KeyOutputStream should handle retry failures. Contributed by Lokesh Jain.

 .../hadoop/hdds/scm/XceiverClientManager.java      |  11 ++-
 .../hdds/scm/client/ContainerOperationClient.java  |  10 +-
 .../hadoop/hdds/scm/storage/BlockInputStream.java  |   2 +-
 .../hadoop/hdds/scm/storage/BlockOutputStream.java |  17 ++--
 .../hadoop/ozone/client/io/KeyInputStream.java     |   2 +-
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 109 +++++++++------------
 .../TestContainerStateMachineIdempotency.java      |   2 +-
 .../client/rpc/TestOzoneRpcClientAbstract.java     |   2 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |   8 +-
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  |   6 +-
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  52 ++++++++--
 11 files changed, 127 insertions(+), 94 deletions(-)

commit 46775a3821b4f00726e38d620cff92e2745278a0
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jan 17 14:03:46 2019 -0800

    HDDS-984. Fix TestOzoneManagerRatisServer.testIsReadOnlyCapturesAllCmdTypeEnums. Contributed by Xiaoyu Yao.

 .../common/src/main/java/org/apache/hadoop/ozone/OmUtils.java         | 4 ++++
 1 file changed, 4 insertions(+)

commit cb932c26c690475eda9a09b0fcdd201657eb78dc
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jan 14 16:05:32 2019 -0800

    HDDS-960. Add cli command option for getS3Secret. Contributed by Dinesh Chitlangia.

 hadoop-hdds/docs/content/S3Commands.md             | 41 +++++++++++++++
 .../hadoop/ozone/om/helpers/S3SecretValue.java     |  5 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 40 +++++++++++++++
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java |  5 +-
 .../ozone/web/ozShell/s3/GetS3SecretHandler.java   | 49 ++++++++++++++++++
 .../hadoop/ozone/web/ozShell/s3/S3Commands.java    | 60 ++++++++++++++++++++++
 .../hadoop/ozone/web/ozShell/s3/package-info.java  | 21 ++++++++
 7 files changed, 215 insertions(+), 6 deletions(-)

commit a15d0d63a3e3939466df496a4bcc750f9ba9e2ae
Author: Ajay Kumar <ajay@apache.org>
Date:   Fri Jan 11 10:32:06 2019 -0800

    HDDS-597. Ratis: Support secure gRPC endpoint with mTLS for Ratis. Contributed by Ajay Kumar.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  2 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 20 +++++--
 .../hadoop/hdds/security/x509/SecurityConfig.java  | 23 ++++----
 .../main/java/org/apache/ratis/RatisHelper.java    | 65 ++++++++++++++++++----
 .../common/transport/server/XceiverServerGrpc.java |  2 +-
 .../transport/server/ratis/XceiverServerRatis.java | 22 +++++---
 .../TestCloseContainerCommandHandler.java          |  5 +-
 .../hdds/scm/pipeline/RatisPipelineUtils.java      | 15 ++++-
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |  7 ++-
 9 files changed, 120 insertions(+), 41 deletions(-)

commit 7a247dd90b330842953620fa9e0e211926b2c62a
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jan 16 17:43:30 2019 -0800

    HDDS-971. ContainerDataConstructor throws exception on QUASI_CLOSED and UNHEALTHY container state. Contributed by Lokesh Jain.

 .../ozone/container/common/impl/ContainerDataYaml.java  | 17 ++---------------
 .../ozone/container/ozoneimpl/ContainerReader.java      |  4 ++--
 2 files changed, 4 insertions(+), 17 deletions(-)

commit 7d9c7101e822ea6ed63f1066e0c9a8756ca205cb
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jan 16 17:32:59 2019 -0800

    HDDS-898. Continue token should contain the previous dir in Ozone s3g object list. Contributed by Elek Marton.

 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java   |  20 ++-
 .../apache/hadoop/ozone/s3/util/ContinueToken.java | 173 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/s3/util/S3utils.java   |  67 +-------
 .../hadoop/ozone/s3/endpoint/TestBucketGet.java    |  49 +++++-
 .../hadoop/ozone/s3/util/TestContinueToken.java    |  50 ++++++
 5 files changed, 286 insertions(+), 73 deletions(-)

commit f0be0d1c877101a48f70d603797bc92012b02352
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jan 10 13:49:17 2019 -0800

    HDDS-967. Fix failures in TestOzoneConfigurationFields. Contributed by Ajay Kumar.

 .../common/src/main/resources/ozone-default.xml    | 108 ++++++++++++++++++++-
 .../hadoop/ozone/TestOzoneConfigurationFields.java |   3 +-
 2 files changed, 108 insertions(+), 3 deletions(-)

commit 0d87873fc99992e1d4af9c9c037ca1786756b459
Author: Ajay Kumar <ajay@apache.org>
Date:   Thu Jan 10 09:19:36 2019 -0800

    HDDS-970. Fix classnotfound error for bouncy castle classes in OM,SCM init. Contributed by Ajay Kumar.

 hadoop-hdds/common/pom.xml         | 2 +-
 hadoop-hdds/server-scm/pom.xml     | 1 -
 hadoop-ozone/ozone-manager/pom.xml | 1 -
 3 files changed, 1 insertion(+), 3 deletions(-)

commit 5e0e49a146ac926afe330d262950a752b836899a
Author: Ajay Kumar <ajay@apache.org>
Date:   Fri Jan 4 19:31:10 2019 -0800

    HDDS-964. Fix test failure in TestOmMetrics. Contributed by Ajay Kumar.

 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   2 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 132 +++++++++++++++------
 2 files changed, 100 insertions(+), 34 deletions(-)

commit 44842754294590f31be0f1e373360a4eefcbeb93
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jan 4 15:09:48 2019 -0800

    HDDS-945. Fix generics warnings in delegation token.
    Contributed by Ajay Kumar.

 .../OzoneDelegationTokenSecretManager.java         | 73 +++++++++++++---------
 .../hadoop/ozone/security/OzoneSecretStore.java    | 13 ++--
 .../TestOzoneDelegationTokenSecretManager.java     |  7 +--
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  2 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  7 +--
 5 files changed, 55 insertions(+), 47 deletions(-)

commit 21d470b5029d394d1e756277cded3ad67d654ad5
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jan 4 13:13:10 2019 -0800

    HDDS-963. Fix failure in TestOzoneShell due to null check in SecurityConfig.
    Contributed by Ajay Kumar.

 .../org/apache/hadoop/hdds/security/x509/SecurityConfig.java   | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit ed1a442367b1ff3dcdfd3de6d7a9d96ea34c8e5f
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jan 4 10:04:17 2019 -0800

    HDDS-938. Add Client APIs for using S3 Auth interface.
    Contributed by  Dinesh Chitlangia.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  1 +
 .../apache/hadoop/ozone/client/ObjectStore.java    |  5 ++
 .../ozone/client/protocol/ClientProtocol.java      |  9 +++
 .../hadoop/ozone/client/rest/RestClient.java       |  7 ++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 15 ++++
 .../main/java/org/apache/hadoop/ozone/OmUtils.java | 90 ++++++++++++++--------
 .../apache/hadoop/ozone/om/OzoneManagerLock.java   | 24 +++++-
 .../hadoop/ozone/om/helpers/S3SecretValue.java     | 84 ++++++++++++++++++++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  9 ++-
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 30 ++++++++
 .../src/main/proto/OzoneManagerProtocol.proto      | 22 +++++-
 .../ozone/client/rpc/TestOzoneRpcClient.java       | 22 ++++++
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  4 +
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 20 +++--
 .../apache/hadoop/ozone/om/S3SecretManager.java    | 30 ++++++++
 .../hadoop/ozone/om/S3SecretManagerImpl.java       | 82 ++++++++++++++++++++
 .../hadoop/ozone/om/exceptions/OMException.java    |  1 +
 .../protocolPB/OzoneManagerRequestHandler.java     | 21 +++++
 18 files changed, 436 insertions(+), 40 deletions(-)

commit 186e32010b98602296912349b732928d564c3388
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jan 3 20:34:25 2019 -0800

    HDDS-955. SCM CA: Add CA to SCM.
    Contributed by Anu Engineer.

 .../x509/certificate/authority/BaseApprover.java   |  6 +-
 .../certificate/authority/CertificateApprover.java | 10 +--
 .../certificate/authority/DefaultApprover.java     |  8 +--
 .../certificate/authority/DefaultCAServer.java     |  8 ++-
 .../certificates/utils/CertificateSignRequest.java |  3 +-
 .../x509/certificates/utils/package-info.java      |  4 +-
 .../x509/certificate/authority/MockApprover.java   |  9 +--
 .../certificate/authority/TestDefaultCAServer.java |  2 +-
 .../certificate/authority/TestDefaultProfile.java  | 33 +++++----
 .../x509/certificate/utils/package-info.java       | 23 ++++++
 .../certificates/TestCertificateSignRequest.java   |  5 +-
 .../x509/certificates/TestRootCertificate.java     |  4 +-
 .../hdds/scm/server/StorageContainerManager.java   | 84 +++++++++++++++-------
 .../apache/hadoop/ozone/client/package-info.java   | 20 ++++++
 14 files changed, 152 insertions(+), 67 deletions(-)

commit dd909778685814e157eb69dccfb9498f544a29c2
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Sun Dec 23 14:57:16 2018 -0800

    HDDS-102. SCM CA: SCM CA server signs certificate for approved CSR. Contributed by Anu Engineer.

 hadoop-hdds/common/pom.xml                         |   6 +
 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  12 +-
 .../hadoop/hdds/security/x509/SecurityConfig.java  |  18 +
 .../x509/certificate/authority/BaseApprover.java   | 249 ++++++++++++++
 .../certificate/authority/CertificateApprover.java |  86 +++++
 .../certificate/authority/CertificateServer.java   |  40 ++-
 .../certificate/authority/DefaultApprover.java     | 128 ++++++++
 .../certificate/authority/DefaultCAServer.java     | 100 +++++-
 .../authority/PKIProfiles/DefaultCAProfile.java    |  46 +++
 .../authority/PKIProfiles/DefaultProfile.java      | 333 +++++++++++++++++++
 .../authority/PKIProfiles/PKIProfile.java          | 140 ++++++++
 .../authority/PKIProfiles/package-info.java        |  33 ++
 .../certificates/utils/CertificateSignRequest.java |  48 ++-
 .../hadoop/hdds/security/x509/keys/KeyCodec.java   |  47 ++-
 .../hadoop/hdds/security/x509/package-info.java    |  78 ++++-
 .../x509/certificate/authority/MockApprover.java   |  56 ++++
 .../certificate/authority/TestDefaultCAServer.java |  51 +++
 .../certificate/authority/TestDefaultProfile.java  | 361 +++++++++++++++++++++
 .../certificates/TestCertificateSignRequest.java   |   6 -
 .../hdds/security/x509/keys/TestKeyCodec.java      |  19 +-
 20 files changed, 1794 insertions(+), 63 deletions(-)

commit ef6292890246d1615c692926ad7de0033dbea9cd
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Dec 21 13:26:34 2018 -0800

    HDDS-937. Create an S3 Auth Table. Contributed by Dinesh Chitlangia.

 .../java/org/apache/hadoop/ozone/om/OMMetadataManager.java |  7 +++++++
 .../org/apache/hadoop/ozone/om/OmMetadataManagerImpl.java  | 14 ++++++++++++++
 2 files changed, 21 insertions(+)

commit a6c4d7e6e9cd80ac30ee04643b5cf79f78638649
Author: Ajay Kumar <ajay@apache.org>
Date:   Wed Dec 19 16:34:51 2018 -0800

    HDDS-805. Block token: Client api changes for block token. Contributed by Ajay Kumar.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  61 ++--
 .../hadoop/hdds/scm/XceiverClientManager.java      |  16 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |   6 +
 .../hdds/scm/client/ContainerOperationClient.java  |  10 +-
 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   4 +
 .../org/apache/hadoop/hdds/client/BlockID.java     |   8 +-
 .../hadoop/hdds/client/ContainerBlockID.java       |  10 +-
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |   6 +
 .../hdds/scm/storage/ContainerProtocolCalls.java   | 162 ++++++++--
 .../hdds/security/token/BlockTokenVerifier.java    |  12 +-
 .../security/token/OzoneBlockTokenSelector.java    |  22 +-
 .../hadoop/hdds/security/x509/SecurityConfig.java  |  22 +-
 .../src/main/proto/DatanodeContainerProtocol.proto |   1 +
 .../common/src/main/resources/ozone-default.xml    |  14 +-
 .../ozone/client/io/BlockOutputStreamEntry.java    | 359 +++++++++++++++++++++
 .../hadoop/ozone/client/io/KeyInputStream.java     |   5 +
 .../hadoop/ozone/client/io/KeyOutputStream.java    | 207 ++----------
 .../hadoop/ozone/om/helpers/OmKeyLocationInfo.java |  44 ++-
 .../security/OzoneBlockTokenSecretManager.java     |  11 +-
 .../OzoneDelegationTokenSecretManager.java         |   4 +-
 .../hadoop/ozone/security/OzoneSecretManager.java  |   7 +-
 .../src/main/proto/OzoneManagerProtocol.proto      |   1 +
 .../security/TestOzoneBlockTokenSecretManager.java |   3 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |  14 +
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   1 +
 .../TestContainerStateMachineIdempotency.java      |   9 +-
 .../ozone/client/CertificateClientTestImpl.java    | 148 +++++++++
 .../ozone/client/rpc/TestOzoneRpcClient.java       |   1 +
 .../client/rpc/TestOzoneRpcClientAbstract.java     |  29 +-
 .../ozone/client/rpc/TestSecureOzoneRpcClient.java | 238 ++++++++++++++
 .../container/ozoneimpl/TestOzoneContainer.java    |  13 +-
 .../ozoneimpl/TestSecureOzoneContainer.java        |   2 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |   8 +-
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  |   8 +-
 .../hadoop/ozone/scm/TestXceiverClientManager.java |   6 +-
 .../hadoop/ozone/web/OzoneHddsDatanodeService.java |   4 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  75 ++++-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 122 +++++--
 .../hadoop/ozone/om/TestKeyDeletingService.java    |   6 +-
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java |   2 +-
 40 files changed, 1332 insertions(+), 349 deletions(-)

commit 3f8da842617bf4bc0200b46929b298d6aa615437
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Dec 19 14:40:26 2018 -0800

    HDDS-929. Remove ozone.max.key.len property. Contributed by Ajay Kumar.

 .../hadoop/hdds/security/x509/SecurityConfig.java  |  9 --------
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  4 ----
 .../common/src/main/resources/ozone-default.xml    |  9 --------
 .../hadoop/ozone/security/OzoneSecretKey.java      | 25 +++-------------------
 .../hadoop/ozone/security/OzoneSecretManager.java  |  4 +---
 .../src/main/proto/OzoneManagerProtocol.proto      |  1 -
 6 files changed, 4 insertions(+), 48 deletions(-)

commit efaa37f2fc4fffcc0dbf84ac9b63199ae1d560f2
Author: Ajay Kumar <ajay@apache.org>
Date:   Thu Dec 13 13:16:47 2018 -0800

    HDDS-115. GRPC: Support secure gRPC endpoint with mTLS. Contributed by Xiaoyu Yao.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  28 +-
 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  33 ++-
 .../hadoop/hdds/security/x509/SecurityConfig.java  | 127 +++++++++
 .../common/src/main/resources/ozone-default.xml    |  24 +-
 .../common/transport/server/XceiverServerGrpc.java |  25 ++
 .../replication/GrpcReplicationService.java        |   1 -
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 300 +++++++++++----------
 .../ozoneimpl/TestOzoneContainerWithTLS.java       | 190 +++++++++++++
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  13 +
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java |   6 +
 .../integration-test/src/test/resources/ssl/ca.crt |  27 ++
 .../integration-test/src/test/resources/ssl/ca.key |  54 ++++
 .../src/test/resources/ssl/client.crt              |  27 ++
 .../src/test/resources/ssl/client.csr              |  26 ++
 .../src/test/resources/ssl/client.key              |  51 ++++
 .../src/test/resources/ssl/client.pem              |  52 ++++
 .../src/test/resources/ssl/generate.sh             |  34 +++
 .../src/test/resources/ssl/server.crt              |  27 ++
 .../src/test/resources/ssl/server.csr              |  26 ++
 .../src/test/resources/ssl/server.key              |  51 ++++
 .../src/test/resources/ssl/server.pem              |  52 ++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   8 +-
 hadoop-ozone/pom.xml                               |   3 +
 23 files changed, 1009 insertions(+), 176 deletions(-)

commit 93eaeb7f7f4ee526968fc925a7ec09e380b5ec49
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Nov 29 13:39:30 2018 -0800

    HDDS-884. Fix merge issue that causes NPE OzoneManager#httpServer. Contributed by Xiaoyu Yao.

 .../src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java           | 1 +
 1 file changed, 1 insertion(+)

commit eb46b4581e584f65a8bc16ff730417b35a8e80fd
Author: Ajay Kumar <ajay@apache.org>
Date:   Thu Nov 29 08:00:41 2018 -0800

    HDDS-804. Block token: Add secret token manager. Contributed by Ajay Kumar.

 .../hadoop/hdds/security/x509/SecurityConfig.java  |   9 +
 .../security/OzoneBlockTokenSecretManager.java     | 191 ++++++++
 .../OzoneDelegationTokenSecretManager.java         | 455 +++++++++++++++++++
 .../hadoop/ozone/security/OzoneSecretManager.java  | 498 ++++-----------------
 .../security/TestOzoneBlockTokenSecretManager.java | 146 ++++++
 ... => TestOzoneDelegationTokenSecretManager.java} |  46 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  24 +-
 .../ozone/security/TestOzoneManagerBlockToken.java | 251 +++++++++++
 8 files changed, 1179 insertions(+), 441 deletions(-)

commit 9c9869f4a08a302e45475ff8f9238376e9ff39ec
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Nov 27 15:02:07 2018 -0800

    HDDS-696. Bootstrap genesis SCM(CA) with self-signed certificate.
    Contributed by Anu Engineer.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  57 ++--
 .../hadoop/hdds/security/x509/SecurityConfig.java  |  84 ++++-
 .../certificate/authority/CertificateServer.java   |  11 +-
 .../certificate/authority/DefaultCAServer.java     | 373 +++++++++++++++++++++
 .../x509/certificate/client/CertificateClient.java |  18 +-
 .../x509/certificate/utils/CertificateCodec.java   | 280 ++++++++++++++++
 .../x509/certificate/utils/package-info.java       |  22 ++
 .../{ => utils}/CertificateSignRequest.java        |   6 +-
 .../{ => utils}/SelfSignedCertificate.java         |  88 +++--
 .../certificates/{ => utils}/package-info.java     |   4 +-
 .../hdds/security/x509/keys/HDDSKeyGenerator.java  |  32 +-
 .../keys/{HDDSKeyPEMWriter.java => KeyCodec.java}  | 130 +++++--
 .../apache/hadoop/ozone/common/StorageInfo.java    |   2 +-
 .../certificate/authority/TestDefaultCAServer.java | 118 +++++++
 .../x509/certificate/authority/package-info.java   |  22 ++
 .../certificate/utils/TestCertificateCodec.java    | 218 ++++++++++++
 .../certificates/TestCertificateSignRequest.java   |  19 +-
 .../x509/certificates/TestRootCertificate.java     |  46 +--
 .../security/x509/certificates/package-info.java   |   4 +-
 ...TestHDDSKeyPEMWriter.java => TestKeyCodec.java} |   8 +-
 .../apache/hadoop/utils/db/TestDBStoreBuilder.java |   5 +-
 .../hadoop/ozone/TestSecureOzoneCluster.java       |  15 +-
 22 files changed, 1381 insertions(+), 181 deletions(-)

commit f2e72d065392e5517cde9524ae86fe84bdf95f47
Author: Ajay Kumar <ajay@apache.org>
Date:   Mon Nov 26 15:49:01 2018 -0800

    HDDS-873. Fix TestSecureOzoneContainer NPE after HDDS-837. Contributed by Xiaoyu Yao.

 .../container/ozoneimpl/TestSecureOzoneContainer.java      | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

commit 035e8353755fc664d507cc82f6ba693bf52a566d
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Nov 20 20:21:08 2018 -0800

    HDDS-9. Add GRPC protocol interceptors for Ozone Block Token. Contributed by Xiaoyu Yao.

 .../hdds/scm/ClientCredentialInterceptor.java      |  65 +++++++
 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  64 ++++++-
 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   5 +-
 .../security/exception/SCMSecurityException.java   |  52 +++++
 .../hdds/security/exception/package-info.java      |  23 +++
 .../BlockTokenException.java}                      |  27 +--
 .../hdds/security/token/BlockTokenVerifier.java    | 113 +++++++++++
 .../security/token}/OzoneBlockTokenIdentifier.java |  37 +++-
 .../security/token}/OzoneBlockTokenSelector.java   |   2 +-
 .../hadoop/hdds/security/token/TokenVerifier.java  |  38 ++++
 .../hadoop/hdds/security/token/package-info.java   |  22 +++
 .../hadoop/hdds/security/x509/SecurityConfig.java  |  11 ++
 .../certificate/authority/CertificateServer.java   |   2 +-
 .../x509/certificate/client/CertificateClient.java |  11 ++
 .../x509/certificates/CertificateSignRequest.java  |   2 +-
 .../x509/certificates/SelfSignedCertificate.java   |   2 +-
 .../x509/exceptions/CertificateException.java      |  14 +-
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  14 ++
 hadoop-hdds/common/src/main/proto/hdds.proto       |   2 +-
 .../token}/TestOzoneBlockTokenIdentifier.java      |  66 ++++++-
 .../hadoop/hdds/security/token/package-info.java   |  22 +++
 .../certificates/TestCertificateSignRequest.java   |   2 +-
 .../x509/certificates/TestRootCertificate.java     |   2 +-
 .../server/ServerCredentialInterceptor.java        |  74 ++++++++
 .../common/transport/server/XceiverServerGrpc.java |  23 ++-
 .../ozoneimpl/TestSecureOzoneContainer.java        | 209 +++++++++++++++++++++
 26 files changed, 843 insertions(+), 61 deletions(-)

commit 9587f01f377cdba3082ea8e11639ae88a386c4b9
Author: Ajay Kumar <ajay@apache.com>
Date:   Thu Nov 15 12:18:19 2018 -0800

    HDDS-8. Add OzoneManager Delegation Token support. Contributed by Ajay Kumar.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   4 +
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 +
 .../common/src/main/resources/ozone-default.xml    |  33 ++
 .../certificates/TestCertificateSignRequest.java   |   2 +-
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java |   7 +-
 .../ozone/client/protocol/ClientProtocol.java      |  33 +-
 .../hadoop/ozone/client/rest/RestClient.java       |  41 ++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  41 ++
 .../hadoop/ozone/client/TestHddsClientUtils.java   |   2 +-
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  17 +-
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |  13 +
 .../ozone/om/protocol/OzoneManagerProtocol.java    |   2 +-
 .../om/protocol/OzoneManagerSecurityProtocol.java  |  67 +++
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  99 ++++
 .../om/protocolPB/OzoneManagerProtocolPB.java      |   3 +
 .../apache/hadoop/ozone/protocolPB/OMPBHelper.java |  38 ++
 .../security/OzoneDelegationTokenSelector.java     |   3 +-
 .../hadoop/ozone/security/OzoneSecretManager.java  | 598 +++++++++++++++++++++
 .../hadoop/ozone/security/OzoneSecretStore.java    | 250 +++++++++
 .../ozone/security/OzoneSecurityException.java     | 104 ++++
 .../src/main/proto/OzoneManagerProtocol.proto      |  29 +
 .../ozone/security/TestOzoneSecretManager.java     | 216 ++++++++
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 306 +++++++++--
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 345 +++++++++---
 .../protocolPB/OzoneManagerRequestHandler.java     |  83 +++
 25 files changed, 2230 insertions(+), 107 deletions(-)

commit b6f8a6503f3d12e88658f5791131b491b9f55ce7
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Nov 14 14:26:33 2018 -0800

    HDDS-836. Add TokenIdentifier Ozone for delegation token and block token. Contributed by Ajay Kumar.

 .../hdds/security/x509/keys/SecurityUtil.java      |  59 ++++
 hadoop-hdds/common/src/main/proto/hdds.proto       |  24 ++
 .../ozone/security/OzoneBlockTokenIdentifier.java  | 178 ++++++++++++
 .../ozone/security/OzoneBlockTokenSelector.java    |  55 ++++
 .../security/OzoneDelegationTokenSelector.java     |  52 ++++
 .../hadoop/ozone/security/OzoneSecretKey.java      | 195 ++++++++++++++
 .../ozone/security/OzoneTokenIdentifier.java       | 217 +++++++++++++++
 .../apache/hadoop/ozone/security/package-info.java |  21 ++
 .../src/main/proto/OzoneManagerProtocol.proto      |  20 ++
 .../security/TestOzoneBlockTokenIdentifier.java    | 255 ++++++++++++++++++
 .../ozone/security/TestOzoneTokenIdentifier.java   | 300 +++++++++++++++++++++
 .../apache/hadoop/ozone/security/package-info.java |  21 ++
 12 files changed, 1397 insertions(+)

commit 185dfbe5ec36d3d4dfc68a0a6a1c15256c2125e9
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Nov 8 09:54:27 2018 -0800

    HDDS-778. Add an interface for CA and Clients for Certificate operations
    Contributed by Anu Engineer.

 .../certificate/authority/CertificateServer.java   |  99 +++++++++++++
 .../x509/certificate/authority/package-info.java   |  22 +++
 .../x509/certificate/client/CertificateClient.java | 159 +++++++++++++++++++++
 .../x509/certificate/client/package-info.java      |  22 +++
 4 files changed, 302 insertions(+)

commit 82fff01b66ae288b803ff822fa24ecdb997a70ba
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Nov 6 16:53:04 2018 -0800

    HDDS-592. Fix ozone-secure.robot test. Contributed by Ajay Kumar.

 .../robotframework/acceptance/ozone-secure.robot   |  95 ------------------
 .../dist/src/main/compose/ozonesecure/.env         |   1 -
 .../main/compose/ozonesecure/docker-compose.yaml   |  22 ++--
 .../ozonesecure/docker-image/runner/Dockerfile     |   4 +-
 .../src/main/smoketest/security/ozone-secure.robot | 111 +++++++++++++++++++++
 hadoop-ozone/dist/src/main/smoketest/test.sh       |   2 +
 6 files changed, 126 insertions(+), 109 deletions(-)

commit ab3e1f7757c101aab0409af723dc87ad5abce319
Author: Ajay Kumar <ajay@apache.com>
Date:   Thu Nov 1 15:48:52 2018 -0700

    HDDS-753. SCM security protocol server is not starting. Contributed by Ajay Kumar.

 .../hdds/scm/server/SCMSecurityProtocolServer.java |  4 +-
 .../scm/server/TestSCMSecurityProtocolServer.java  | 60 ++++++++++++++++++++++
 .../hadoop/ozone/TestSecureOzoneCluster.java       |  3 +-
 3 files changed, 65 insertions(+), 2 deletions(-)

commit 5f68d7013c57c5f13be32317a3625333505a2e9d
Author: Ajay Kumar <ajay@apache.com>
Date:   Tue Oct 30 09:10:21 2018 -0700

    HDDS-760. Add asf license to TestCertificateSignRequest. Contributed by Ajay Kumar.

 .../x509/certificates/TestCertificateSignRequest.java   | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit e6efaaf137e99e87d76ff58f0afd92bffb7b2f28
Author: Ajay Kumar <ajay@apache.com>
Date:   Sun Oct 28 22:44:41 2018 -0700

    HDDS-103. SCM CA: Add new security protocol for SCM to expose security related functions. Contributed by Ajay Kumar.

 hadoop-hdds/common/pom.xml                         |   1 +
 .../hadoop/hdds/protocol/SCMSecurityProtocol.java  |  44 ++++++++
 .../SCMSecurityProtocolClientSideTranslatorPB.java |  99 +++++++++++++++++
 .../hdds/protocolPB/SCMSecurityProtocolPB.java     |  35 ++++++
 .../SCMSecurityProtocolServerSideTranslatorPB.java |  66 +++++++++++
 .../hadoop/hdds/protocolPB/package-info.java       |  22 ++++
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  16 +++
 .../org/apache/hadoop/ozone/OzoneSecurityUtil.java |  43 ++++++++
 .../src/main/proto/SCMSecurityProtocol.proto       |  66 +++++++++++
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java |  22 ++++
 .../hdds/scm/server/SCMBlockProtocolServer.java    |   2 +-
 .../hdds/scm/server/SCMSecurityProtocolServer.java | 121 +++++++++++++++++++++
 .../hdds/scm/server/StorageContainerManager.java   |  26 ++++-
 13 files changed, 558 insertions(+), 5 deletions(-)

commit fc6ac338d93dcdd7ed1f321e5c048049b4f5612a
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Oct 26 17:57:21 2018 -0700

    HDDS-101. SCM CA: generate CSR for SCM CA clients.
    Contributed by Xiaoyu Yao.

 .../x509/certificates/CertificateSignRequest.java  | 245 +++++++++++++++++++
 .../hdds/security/x509/keys/HDDSKeyGenerator.java  |   2 +-
 .../hdds/security/x509/keys/SecurityUtil.java      |  79 ++++++
 .../certificates/TestCertificateSignRequest.java   | 268 +++++++++++++++++++++
 4 files changed, 593 insertions(+), 1 deletion(-)

commit 01cebb318aa135a18bc3859f8f7239b1a3851ba3
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Oct 24 15:46:34 2018 -0700

    HDDS-684. Fix HDDS-4 branch after HDDS-490 and HADOOP-15832. Contributed by Xiaoyu Yao.

 hadoop-ozone/dist/dev-support/bin/dist-layout-stitching      |  2 +-
 hadoop-ozone/dist/src/main/compose/ozonesecure/docker-config |  1 +
 .../ozonesecure/docker-image/runner/scripts/starter.sh       |  4 ++--
 .../main/java/org/apache/hadoop/ozone/om/OzoneManager.java   | 12 ++++++------
 4 files changed, 10 insertions(+), 9 deletions(-)

commit 70563eb2cc00eace3dd061f42506087ef66959c9
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Oct 19 21:09:51 2018 -0700

    HDDS-704. Fix the Dependency convergence issue on HDDS-4. Contributed by Xiaoyu Yao.

 hadoop-hdds/common/pom.xml | 7 -------
 1 file changed, 7 deletions(-)

commit 31db99937fe9589a27343ca40716b1bb5c34d602
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Oct 10 10:01:01 2018 -0700

    HDDS-591. Adding ASF license header to kadm5.acl. Contributed by Ajay Kumar.

 .../docker-image/docker-krb5/Dockerfile-krb5          |  1 +
 .../ozonesecure/docker-image/docker-krb5/kadm5.acl    | 19 +++++++++++++++++++
 2 files changed, 20 insertions(+)

commit 8a46b30a0c4db4791770a7bf784a50e0cfc4a633
Author: Ajay Kumar <ajay@apache.com>
Date:   Tue Oct 9 00:28:01 2018 -0700

    HDDS-588. SelfSignedCertificate#generateCertificate should sign the certificate the configured security provider. Contributed by Xiaoyu Yao.

 .../hadoop/hdds/security/x509/certificates/SelfSignedCertificate.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 853fd7c30765ace9f88a90f1c82d422ae5621016
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Oct 4 13:20:09 2018 -0700

    HDDS-10. Add kdc docker image for secure ozone cluster. Contributed by Ajay Kumar.

 .../dist/src/main/compose/ozonesecure/README.md    | 22 +++++
 .../main/compose/ozonesecure/docker-compose.yaml   | 94 +++++++++++++---------
 .../docker-image/docker-krb5/Dockerfile-krb5       | 33 ++++++++
 .../ozonesecure/docker-image/docker-krb5/README.md | 34 ++++++++
 .../ozonesecure/docker-image/docker-krb5/kadm5.acl |  1 +
 .../ozonesecure/docker-image/docker-krb5/krb5.conf | 40 +++++++++
 .../docker-image/docker-krb5/launcher.sh           | 25 ++++++
 7 files changed, 210 insertions(+), 39 deletions(-)

commit 4c9be70ca4d48dcb58fa9c2dcdc0adc0741dcbea
Author: Ajay Kumar <ajay@apache.com>
Date:   Tue Oct 2 10:07:35 2018 -0700

    HDDS-566. Move OzoneSecure docker-compose after HDDS-447. Contributed by Xiaoyu Yao.

 .../dist/src/main/compose/ozonesecure/.env         |  18 +++
 .../main/compose/ozonesecure/docker-compose.yaml   |  57 ++++++++
 .../src/main/compose/ozonesecure/docker-config     | 103 ++++++++++++++
 .../ozonesecure/docker-image/runner/Dockerfile     |  39 ++++++
 .../ozonesecure/docker-image/runner/build.sh       |  26 ++++
 .../docker-image/runner/scripts/envtoconf.py       | 115 ++++++++++++++++
 .../docker-image/runner/scripts/krb5.conf          |  38 ++++++
 .../docker-image/runner/scripts/starter.sh         | 100 ++++++++++++++
 .../docker-image/runner/scripts/transformation.py  | 150 +++++++++++++++++++++
 9 files changed, 646 insertions(+)

commit 1611fbf5bd4b5726abea4b948f3c0d6eec4601e4
Author: Ajay Kumar <ajay@apache.com>
Date:   Mon Oct 1 11:03:27 2018 -0700

    HDDS-547. Fix secure docker and configs. Contributed by Xiaoyu Yao.

 hadoop-hdds/common/pom.xml                         |  6 ++
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  8 +-
 .../hadoop/hdds/security/x509/SecurityConfig.java  |  2 +-
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  3 -
 .../common/src/main/resources/ozone-default.xml    |  6 +-
 .../x509/certificates/TestRootCertificate.java     |  2 +-
 .../security/x509/keys/TestHDDSKeyGenerator.java   |  2 +-
 .../apache/hadoop/ozone/HddsDatanodeService.java   | 30 +++++++
 .../server/StorageContainerManagerHttpServer.java  |  4 +-
 .../src/test/compose/compose-secure/.env           | 17 ----
 .../compose/compose-secure/docker-compose.yaml     | 66 ---------------
 .../src/test/compose/compose-secure/docker-config  | 99 ----------------------
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |  4 +-
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 11 +--
 .../hadoop/ozone/om/OzoneManagerHttpServer.java    |  4 +-
 15 files changed, 58 insertions(+), 206 deletions(-)

commit 1767716b15d4ae5b33327253bfa2060cc51c439f
Author: Ajay Kumar <ajay@apache.com>
Date:   Fri Sep 28 06:52:56 2018 -0700

    HDDS-548. Create a Self-Signed Certificate. Contributed by Anu Engineer.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  16 ++
 .../hadoop/hdds/security/x509/SecurityConfig.java  | 105 ++++++---
 .../x509/certificates/SelfSignedCertificate.java   | 212 +++++++++++++++++
 .../security/x509/certificates/package-info.java   |  22 ++
 .../x509/exceptions/CertificateException.java      |  63 +++++
 .../x509/exceptions/SCMSecurityException.java      |  64 +++++
 .../security/x509/exceptions/package-info.java     |  23 ++
 .../security/x509/{ => keys}/HDDSKeyGenerator.java |  27 ++-
 .../security/x509/{ => keys}/HDDSKeyPEMWriter.java |  29 +--
 .../hdds/security/x509/keys/package-info.java      |  23 ++
 .../x509/certificates/TestRootCertificate.java     | 258 +++++++++++++++++++++
 .../security/x509/certificates/package-info.java   |  22 ++
 .../x509/{ => keys}/TestHDDSKeyGenerator.java      |  22 +-
 .../x509/{ => keys}/TestHDDSKeyPEMWriter.java      |  27 ++-
 .../hdds/security/x509/keys/package-info.java      |  22 ++
 .../hadoop/hdds/security/x509/package-info.java    |  22 ++
 16 files changed, 881 insertions(+), 76 deletions(-)

commit d005c26abc2d52dc5b762dd48543e166f48b0ce7
Author: Ajay Kumar <ajay@apache.com>
Date:   Tue Sep 25 14:19:14 2018 -0700

    HDDS-546. Resolve bouncy castle dependency for hadoop-hdds-common. Contributed by Ajay Kumar.

 hadoop-hdds/common/pom.xml | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 392efb15906a2500b2ae08da20b56df4511a8e85
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Jul 31 18:17:29 2018 -0700

    Fix merge conflicts

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  | 10 +--
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  1 +
 .../common/src/main/resources/ozone-default.xml    | 20 +++++-
 .../hdds/scm/server/StorageContainerManager.java   |  9 +--
 .../server/StorageContainerManagerHttpServer.java  |  4 +-
 .../src/test/compose/compose-secure/.env           |  2 +-
 .../src/test/compose/compose-secure/docker-config  | 55 +++++++++++---
 .../org/apache/hadoop/ozone/ksm/KSMConfigKeys.java | 84 ----------------------
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |  3 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  5 +-
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 22 +++---
 11 files changed, 95 insertions(+), 120 deletions(-)

commit 375883d15739c8522cd4e068eeb20ff6e4a7e592
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jun 8 08:33:58 2018 -0700

    HDDS-100. SCM CA: generate public/private key pair for SCM/OM/DNs. Contributed by Ajay Kumar.

 hadoop-hdds/common/pom.xml                         |   6 +-
 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  19 ++
 .../hdds/security/x509/HDDSKeyGenerator.java       |  99 ++++++++
 .../hdds/security/x509/HDDSKeyPEMWriter.java       | 254 +++++++++++++++++++++
 .../hadoop/hdds/security/x509/SecurityConfig.java  | 190 +++++++++++++++
 .../hadoop/hdds/security/x509/package-info.java    |  25 ++
 .../common/src/main/resources/ozone-default.xml    |  42 +++-
 .../hdds/security/x509/TestHDDSKeyGenerator.java   |  81 +++++++
 .../hdds/security/x509/TestHDDSKeyPEMWriter.java   | 213 +++++++++++++++++
 .../hadoop/ozone/TestOzoneConfigurationFields.java |   6 +
 10 files changed, 933 insertions(+), 2 deletions(-)

commit 028c292304fbd18eefa46f89699b180697f99ebb
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue May 22 13:32:28 2018 -0700

    HDDS-70. Fix config names for secure ksm and scm. Contributed by Ajay Kumar.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  6 +-
 .../scm/protocol/ScmBlockLocationProtocol.java     |  2 +-
 .../protocol/StorageContainerLocationProtocol.java |  3 +-
 .../scm/protocolPB/ScmBlockLocationProtocolPB.java |  4 +-
 .../StorageContainerLocationProtocolPB.java        |  2 +-
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  1 -
 .../common/src/main/resources/ozone-default.xml    | 31 ++++----
 .../protocol/StorageContainerDatanodeProtocol.java |  2 +-
 .../StorageContainerDatanodeProtocolPB.java        |  2 +-
 .../hdds/scm/server/StorageContainerManager.java   | 18 ++---
 .../compose/compose-secure/docker-compose.yaml     |  6 +-
 .../src/test/compose/compose-secure/docker-config  | 12 ++--
 .../robotframework/acceptance/ozone-secure.robot   | 12 ++--
 .../ozone/client/protocol/ClientProtocol.java      |  2 +-
 .../org/apache/hadoop/ozone/ksm/KSMConfigKeys.java | 84 ++++++++++++++++++++++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  4 +-
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 21 +++---
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  4 +-
 18 files changed, 144 insertions(+), 72 deletions(-)

commit 83b0187d57178e28cc9545c26410a96e385c4727
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri May 18 13:09:17 2018 -0700

    HDDS-7. Enable kerberos auth for Ozone client in hadoop rpc. Contributed by Ajay Kumar.

 .../src/test/compose/compose-secure/.env           | 17 ++++
 .../compose/compose-secure/docker-compose.yaml     | 66 +++++++++++++++
 .../src/test/compose/compose-secure/docker-config  | 66 +++++++++++++++
 .../robotframework/acceptance/ozone-secure.robot   | 95 ++++++++++++++++++++++
 .../hadoop/ozone/client/rest/RestClient.java       |  4 +-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  7 +-
 6 files changed, 249 insertions(+), 6 deletions(-)

commit 9a1b882451e5634f3635fd2a471104ab25ab5437
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue May 15 16:56:24 2018 -0700

    Revert "Bad merge with 996a627b289947af3894bf83e7b63ec702a665cd"
    
    This reverts commit 996a627b289947af3894bf83e7b63ec702a665cd.

 hadoop-hdds/common/src/main/resources/ozone-default.xml | 4 ----
 1 file changed, 4 deletions(-)

commit 15d395d9725a7094ae731778c01e122882247c94
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed May 9 15:56:03 2018 -0700

    HDDS-6. Enable SCM kerberos auth. Contributed by Ajay Kumar.

 hadoop-hdds/common/src/main/resources/ozone-default.xml | 4 ++++
 1 file changed, 4 insertions(+)

commit eefd33764075de655a6c015769f3de55a9def4e9
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon May 14 09:36:57 2018 -0700

    HDDS-5. Enable OzoneManager kerberos auth. Contributed by Ajay Kumar.

 .../common/src/main/resources/ozone-default.xml    |  32 +++-
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |   9 ++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |   7 +
 .../om/protocolPB/OzoneManagerProtocolPB.java      |   4 +
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   3 +-
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 174 ++++++++++++++++-----
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  71 +++++++--
 .../hadoop/ozone/om/OzoneManagerHttpServer.java    |   5 +-
 8 files changed, 253 insertions(+), 52 deletions(-)

commit 496d3c7499b41e660b0851caea6077d572fb04db
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed May 9 15:56:03 2018 -0700

    HDDS-6. Enable SCM kerberos auth. Contributed by Ajay Kumar.

 .../java/org/apache/hadoop/hdds/HddsUtils.java     |  13 +-
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   9 +-
 .../scm/protocol/ScmBlockLocationProtocol.java     |   3 +
 .../protocol/StorageContainerLocationProtocol.java |   4 +
 .../scm/protocolPB/ScmBlockLocationProtocolPB.java |   6 +
 .../StorageContainerLocationProtocolPB.java        |   4 +
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   4 +
 .../common/src/main/resources/ozone-default.xml    |  26 ++-
 .../protocol/StorageContainerDatanodeProtocol.java |   4 +
 .../StorageContainerDatanodeProtocolPB.java        |   6 +
 .../hdds/scm/server/StorageContainerManager.java   |  51 ++++-
 .../server/StorageContainerManagerHttpServer.java  |   5 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    |   3 +-
 .../ozone/client/protocol/ClientProtocol.java      |   3 +
 hadoop-ozone/common/src/main/bin/start-ozone.sh    |  16 +-
 hadoop-ozone/common/src/main/bin/stop-ozone.sh     |  13 +-
 hadoop-ozone/integration-test/pom.xml              |   6 +
 .../TestContainerStateManagerIntegration.java      |   5 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   4 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  21 ++-
 .../hadoop/ozone/TestSecureOzoneCluster.java       | 205 +++++++++++++++++++++
 .../hadoop/ozone/TestStorageContainerManager.java  |   8 +-
 22 files changed, 372 insertions(+), 47 deletions(-)

commit 79561edaff0ed0a9d61228884cf9ab170c4ee2a5
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Jan 15 15:11:16 2019 -0800

    HDDS-978. Fix typo in doc : Client > S3 section. Contributed by  Dinesh Chitlangia.

 hadoop-hdds/docs/content/S3.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 40fabdd915960561bea7a3eda0d073802987a217
Author: Márton Elek <elek@apache.org>
Date:   Fri Jan 11 10:33:29 2019 +0100

    HDDS-977. Exclude dependency-reduced-pom.xml from ozone rat check. Contributed by Elek, Marton.

 hadoop-ozone/pom.xml | 1 +
 1 file changed, 1 insertion(+)

commit 1e65c3fcc83dffc71f7082df04fcf4c253839ad8
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Jan 11 10:06:05 2019 -0800

    HDDS-947. Implement OzoneManager State Machine.

 .../ozone/client/rpc/TestOzoneRpcClient.java       | 1806 +-------------------
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 1791 +++++++++++++++++++
 .../client/rpc/TestOzoneRpcClientWithRatis.java    |   58 +
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   22 +-
 .../hadoop/ozone/om/ratis/OMRatisHelper.java       |   13 +-
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |   30 +-
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |  107 +-
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  878 +---------
 .../protocolPB/OzoneManagerRequestHandler.java     |  918 ++++++++++
 .../om/ratis/TestOzoneManagerRatisServer.java      |   10 +-
 10 files changed, 2886 insertions(+), 2747 deletions(-)

commit 9e1d901c3ccb1e9383e701fa0b554e42b5df1945
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jan 9 20:02:36 2019 -0800

    HDDS-941. Rename ChunkGroupInputStream to keyInputStream and ChunkInputStream to BlockInputStream. Contributed by  Shashikant Banerjee.

 ...ChunkInputStream.java => BlockInputStream.java} | 10 +++---
 ...nkGroupInputStream.java => KeyInputStream.java} | 40 +++++++++++-----------
 .../hadoop/ozone/client/io/KeyOutputStream.java    |  2 +-
 .../hadoop/ozone/client/io/OzoneInputStream.java   |  6 ++--
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  4 +--
 .../web/storage/DistributedStorageHandler.java     |  4 +--
 .../apache/hadoop/ozone/om/TestChunkStreams.java   | 18 +++++-----
 .../apache/hadoop/fs/ozone/OzoneFSInputStream.java |  6 ++--
 .../hadoop/ozone/s3/io/S3WrapperInputStream.java   | 10 +++---
 9 files changed, 50 insertions(+), 50 deletions(-)

commit a8426d990f79e4cf826136dd8960cbcfb091d14a
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Wed Jan 9 11:20:57 2019 -0800

    Revert "HDDS-947. Implement OzoneManager State Machine."
    
    This reverts commit 8dd11a15777ec206dbb3889d12bc1e196415f8d6.

 .../ozone/client/rpc/TestOzoneRpcClient.java       | 1783 ++++++++++++++++++-
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 1821 --------------------
 .../client/rpc/TestOzoneRpcClientWithRatis.java    |   79 -
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   22 +-
 .../hadoop/ozone/om/ratis/OMRatisHelper.java       |   13 +-
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |   30 +-
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |  107 +-
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  878 +++++++++-
 .../protocolPB/OzoneManagerRequestHandler.java     |  904 ----------
 .../om/ratis/TestOzoneManagerRatisServer.java      |   10 +-
 10 files changed, 2725 insertions(+), 2922 deletions(-)

commit 4d13b9e46b30d251b04e4643be4f4dcd40349bd0
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Wed Jan 9 10:57:24 2019 -0800

    HDDS-947. Implement OzoneManager State Machine.

 .../ozone/client/rpc/TestOzoneRpcClient.java       | 1783 +------------------
 .../client/rpc/TestOzoneRpcClientAbstract.java     | 1821 ++++++++++++++++++++
 .../client/rpc/TestOzoneRpcClientWithRatis.java    |   79 +
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   22 +-
 .../hadoop/ozone/om/ratis/OMRatisHelper.java       |   13 +-
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |   30 +-
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |  107 +-
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  878 +---------
 .../protocolPB/OzoneManagerRequestHandler.java     |  904 ++++++++++
 .../om/ratis/TestOzoneManagerRatisServer.java      |   10 +-
 10 files changed, 2922 insertions(+), 2725 deletions(-)

commit 51d37aa6f40a78a2c4c677ee7e03943cd6921524
Author: Márton Elek <elek@apache.org>
Date:   Tue Jan 8 21:53:37 2019 +0100

    HDDS-965. Ozone: checkstyle improvements and code quality scripts. Contributed by Elek, Marton.

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |   8 +-
 .../hadoop/hdds/scm/storage/BlockOutputStream.java |   1 +
 .../java/org/apache/hadoop/hdds/HddsUtils.java     |  37 ++--
 .../hadoop/hdds/cli/HddsVersionProvider.java       |   2 +-
 .../apache/hadoop/hdds/conf/HddsConfServlet.java   |   3 +
 .../hadoop/hdds/scm/container/ContainerInfo.java   |   1 +
 .../pipeline/UnknownPipelineStateException.java    |   2 +-
 ...inerLocationProtocolClientSideTranslatorPB.java |   1 -
 .../org/apache/hadoop/utils/HddsVersionInfo.java   | 124 +++--------
 .../apache/hadoop/utils/MetadataStoreBuilder.java  |  28 +--
 .../ozone/container/common/interfaces/Handler.java |   1 +
 .../states/endpoint/VersionEndpointTask.java       |   3 +-
 .../transport/server/ratis/DispatcherContext.java  |  18 +-
 .../transport/server/ratis/XceiverServerRatis.java | 245 +++++++++++++--------
 .../ozone/container/common/volume/VolumeInfo.java  |   2 +-
 .../helpers/KeyValueContainerLocationUtil.java     |  13 +-
 .../replication/GrpcReplicationService.java        |   8 +-
 .../replication/SimpleContainerDownloader.java     |   1 -
 .../commands/DeleteBlockCommandStatus.java         |  12 +-
 .../ozone/container/common/SCMTestUtils.java       |  22 +-
 .../container/common/interfaces/TestHandler.java   |   4 +-
 .../hadoop/hdds/server/events/EventWatcher.java    |  12 +-
 .../hdds/scm/block/PendingDeleteHandler.java       |   3 +
 .../container/replication/ReplicationManager.java  |   4 +-
 .../hdds/scm/node/states/Node2ObjectsMap.java      |   2 +
 .../hdds/scm/node/states/Node2PipelineMap.java     |   8 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |   1 +
 .../command/TestCommandStatusReportHandler.java    |   8 +-
 .../scm/container/TestSCMContainerManager.java     |   4 +-
 .../TestSCMContainerPlacementCapacity.java         |   3 +
 .../TestSCMContainerPlacementRandom.java           |   3 +
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  |   4 +-
 .../hdds/scm/node/TestNodeReportHandler.java       |   3 +
 hadoop-ozone/Jenkinsfile                           | 105 +++++++++
 .../apache/hadoop/ozone/client/OzoneBucket.java    |   2 +
 .../hadoop/ozone/client/OzoneKeyDetails.java       |   1 +
 .../apache/hadoop/ozone/client/OzoneVolume.java    |   6 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |   2 +-
 .../hadoop/ozone/client/io/KeyOutputStream.java    |   4 +
 .../apache/hadoop/hdds/protocol/package-info.java  |  20 ++
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |   6 +-
 .../apache/hadoop/ozone/freon/OzoneGetConf.java    |   2 +
 .../hadoop/ozone/om/codec/OmBucketInfoCodec.java   |   3 +-
 .../hadoop/ozone/om/codec/OmKeyInfoCodec.java      |   3 +-
 .../ozone/om/codec/OmMultipartKeyInfoCodec.java    |   2 +-
 .../hadoop/ozone/om/codec/OmVolumeArgsCodec.java   |   3 +-
 .../hadoop/ozone/om/codec/VolumeListCodec.java     |   3 +-
 .../hadoop/ozone/om/helpers/OmBucketArgs.java      |   7 +-
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      |  17 +-
 .../apache/hadoop/ozone/om/helpers/OmKeyArgs.java  |   1 +
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  |   1 +
 .../apache/hadoop/ozone/util/OzoneVersionInfo.java | 137 +++---------
 .../org/apache/hadoop/ozone/util/package-info.java |  22 ++
 .../hadoop/ozone/web/handlers/VolumeArgs.java      |   1 +
 .../ozone/security/acl/TestOzoneObjInfo.java       |  11 +-
 hadoop-ozone/dev-support/checks/acceptance.sh      |  18 ++
 hadoop-ozone/dev-support/checks/author.sh          |  22 ++
 hadoop-ozone/dev-support/checks/build.sh           |  18 ++
 hadoop-ozone/dev-support/checks/checkstyle.sh      |  23 ++
 hadoop-ozone/dev-support/checks/findbugs.sh        |  35 +++
 hadoop-ozone/dev-support/checks/isolation.sh       |  24 ++
 hadoop-ozone/dev-support/checks/rat.sh             |  24 ++
 hadoop-ozone/dev-support/checks/unit.sh            |  24 ++
 hadoop-ozone/dev-support/docker/Dockerfile         |  66 ++++++
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |   7 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   6 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  12 +-
 .../org/apache/hadoop/ozone/OzoneTestUtils.java    |   3 +-
 .../TestCloseContainerByPipeline.java              |   9 +-
 .../container/server/TestContainerServer.java      |   3 +-
 .../ozone/ozShell/TestOzoneDatanodeShell.java      |   2 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |   1 +
 .../hadoop/ozone/scm/TestAllocateContainer.java    |   9 +-
 .../ozone/web/TestOzoneRestWithMiniCluster.java    |   3 +-
 .../hadoop/ozone/web/client/TestBuckets.java       |  43 ++--
 .../hadoop/ozone/web/client/TestBucketsRatis.java  |   1 +
 .../apache/hadoop/ozone/web/client/TestVolume.java |  78 +++----
 .../hadoop/ozone/web/client/TestVolumeRatis.java   |   1 +
 .../apache/hadoop/ozone/web/interfaces/Bucket.java |   1 +
 .../apache/hadoop/ozone/web/interfaces/Volume.java |   1 +
 .../org/apache/hadoop/ozone/om/BucketManager.java  |   2 +-
 .../java/org/apache/hadoop/ozone/om/OMStorage.java |   3 +-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  13 +-
 .../org/apache/hadoop/ozone/om/VolumeManager.java  |   2 +-
 .../hadoop/ozone/om/ratis/OMRatisHelper.java       |   3 +-
 ...OzoneManagerProtocolServerSideTranslatorPB.java |   1 +
 .../hadoop/ozone/s3/SignedChunksInputStream.java   |   2 +-
 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java   |   1 +
 .../ozone/s3/endpoint/TestObjectMultiDelete.java   |   1 -
 .../ozone/audit/parser/common/DatabaseHelper.java  |   2 +-
 .../hadoop/ozone/freon/RandomKeyGenerator.java     |   1 -
 .../ozone/genesis/BenchMarkMetadataStoreReads.java |   3 +
 .../genesis/BenchMarkMetadataStoreWrites.java      |   4 +-
 .../ozone/genesis/BenchMarkRocksDbStore.java       |   6 +-
 94 files changed, 903 insertions(+), 525 deletions(-)

commit 0ed49951ec96660114206e5b42613bb7cb7cde87
Author: Márton Elek <elek@apache.org>
Date:   Tue Jan 8 15:48:48 2019 +0100

    HDDS-924. MultipartUpload: S3 APi for complete Multipart Upload. Contributed by Bharat Viswanadham.

 .../src/main/smoketest/s3/MultipartUpload.robot    |  81 ++++++++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |   5 +
 .../apache/hadoop/ozone/s3/HeaderPreprocessor.java |   8 +
 .../endpoint/CompleteMultipartUploadRequest.java   |  77 +++++++
 .../endpoint/CompleteMultipartUploadResponse.java  |  78 ++++++++
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   |  93 ++++++++-
 .../hadoop/ozone/s3/exception/S3ErrorTable.java    |  16 ++
 .../hadoop/ozone/client/OzoneBucketStub.java       |  34 +++-
 .../s3/endpoint/TestInitiateMultipartUpload.java   |   4 +-
 .../s3/endpoint/TestMultipartUploadComplete.java   | 222 +++++++++++++++++++++
 .../hadoop/ozone/s3/endpoint/TestPartUpload.java   |   4 +-
 11 files changed, 614 insertions(+), 8 deletions(-)

commit 73b66fd46f17d342caa59a3543f05495d4f48a26
Author: Márton Elek <elek@apache.org>
Date:   Tue Jan 8 15:12:08 2019 +0100

    HDDS-969. Fix TestOzoneManagerRatisServer test failure. Contributed by Bharat Viswanadham.

 hadoop-ozone/common/src/main/java/org/apache/hadoop/ozone/OmUtils.java  | 2 ++
 .../org/apache/hadoop/ozone/om/ratis/TestOzoneManagerRatisServer.java   | 1 -
 2 files changed, 2 insertions(+), 1 deletion(-)

commit 4847853ee76a8e319390aac1f5dea06087e6bb03
Author: Márton Elek <elek@apache.org>
Date:   Tue Jan 8 14:54:38 2019 +0100

    HDDS-968. Fix TestObjectPut failures. Contributed by Bharat Viswanadham.

 .../main/java/org/apache/hadoop/ozone/s3/endpoint/ObjectEndpoint.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0e460f5b39b565ee6f09c733252fd4280da941e5
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jan 7 22:04:06 2019 -0800

    HDDS-926. Use Timeout rule for the the test methods in TestOzoneManager. Contributed by Dinesh Chitlangia.

 .../apache/hadoop/ozone/om/TestOzoneManager.java   | 27 ++++++++++++----------
 1 file changed, 15 insertions(+), 12 deletions(-)

commit 7111ac4e193ae4b7ae492d3c3532225fe11b0412
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jan 7 13:06:45 2019 -0800

    HDDS-931. Add documentation for ozone shell command providing ozone mapping for a S3Bucket.
    Contributed by Bharat Viswanadham.

 hadoop-hdds/docs/content/BucketCommands.md | 9 +++++++++
 1 file changed, 9 insertions(+)

commit c17ca17dc3f329a6193dc9bc0602e164ae55533e
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jan 7 11:19:42 2019 -0800

    HDDS-946. AuditParser - insert audit to database in batches.
    contributed by Dinesh Chitlangia.

 .../hadoop/ozone/audit/parser/common/DatabaseHelper.java    | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

commit e579f8720bf07db779cd9ec71c344f0e044831e3
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jan 7 11:09:14 2019 -0800

    HDDS-930. Multipart Upload: Abort multiupload request. Contributed by Bharat Viswanadham.

 .../apache/hadoop/ozone/client/OzoneBucket.java    | 11 ++++
 .../ozone/client/protocol/ClientProtocol.java      | 11 ++++
 .../hadoop/ozone/client/rest/RestClient.java       |  7 ++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 15 +++++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  7 ++
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 35 ++++++++++
 .../src/main/proto/OzoneManagerProtocol.proto      | 12 ++++
 .../ozone/client/rpc/TestOzoneRpcClient.java       | 62 +++++++++++++++++
 .../org/apache/hadoop/ozone/om/KeyManager.java     |  7 ++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 77 +++++++++++++++++++++-
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java | 19 ++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 19 ++++++
 .../hadoop/ozone/om/exceptions/OMException.java    |  1 +
 ...OzoneManagerProtocolServerSideTranslatorPB.java | 34 ++++++++++
 14 files changed, 316 insertions(+), 1 deletion(-)

commit 8589d66e6f7a35080c5903b31cd9af5a2edef470
Author: Márton Elek <elek@apache.org>
Date:   Mon Jan 7 12:39:46 2019 +0100

    HDDS-902. MultipartUpload: S3 API for uploading a part file. Contributed by Bharat Viswanadham.

 .../src/main/smoketest/s3/MultipartUpload.robot    |  37 +++++-
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   |  39 +++++++
 .../hadoop/ozone/s3/exception/S3ErrorTable.java    |   5 +
 .../hadoop/ozone/client/OzoneBucketStub.java       |  51 +++++++++
 .../hadoop/ozone/client/OzoneOutputStreamStub.java |  73 ++++++++++++
 .../hadoop/ozone/s3/endpoint/TestObjectPut.java    |  26 +++--
 .../hadoop/ozone/s3/endpoint/TestPartUpload.java   | 126 +++++++++++++++++++++
 7 files changed, 341 insertions(+), 16 deletions(-)

commit 8ece31e48fb46b1b8e733dc1f90b7e8f2ebfe6d5
Author: Márton Elek <elek@apache.org>
Date:   Mon Jan 7 12:06:22 2019 +0100

    HDDS-901. MultipartUpload: S3 API for Initiate multipart upload. Contributed by Bharat Viswanadham.

 .../src/main/smoketest/s3/MultipartUpload.robot    | 42 ++++++++++++
 .../endpoint/MultipartUploadInitiateResponse.java  | 69 +++++++++++++++++++
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   | 50 ++++++++++++++
 .../hadoop/ozone/client/OzoneBucketStub.java       | 13 ++++
 .../s3/endpoint/TestInitiateMultipartUpload.java   | 79 ++++++++++++++++++++++
 5 files changed, 253 insertions(+)

commit 56f40c9a4beea8045646a4d47b31e0e748a5a021
Author: Márton Elek <elek@apache.org>
Date:   Mon Jan 7 10:42:04 2019 +0100

    HDDS-916. MultipartUpload: Complete Multipart upload request. Contributed by Bharat Viswanadham.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   4 +
 .../apache/hadoop/ozone/client/OzoneBucket.java    |  26 ++
 .../ozone/client/protocol/ClientProtocol.java      |  27 +++
 .../hadoop/ozone/client/rest/RestClient.java       |  10 +
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  27 +++
 .../org/apache/hadoop/ozone/audit/OMAction.java    |   3 +-
 .../ozone/om/helpers/OmMultipartKeyInfo.java       |   7 +-
 .../om/helpers/OmMultipartUploadCompleteInfo.java  |  70 ++++++
 .../ozone/om/helpers/OmMultipartUploadList.java    |  63 +++++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  21 +-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  53 +++-
 .../src/main/proto/OzoneManagerProtocol.proto      |  25 ++
 .../ozone/client/rpc/TestOzoneRpcClient.java       | 270 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/om/KeyManager.java     |  20 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 157 ++++++++++++
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |  11 +
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  27 +++
 .../hadoop/ozone/om/exceptions/OMException.java    |   4 +
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  66 ++++-
 19 files changed, 883 insertions(+), 8 deletions(-)

commit 4ac14644f4737231a0bbe7caab8765408612c838
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jan 4 15:25:26 2019 -0800

    HDDS-915. Submit client request to OM Ratis server.
    Contributed by Hanisha Koneru.

 .../common/src/main/resources/ozone-default.xml    |  24 ++-
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  46 ++++-
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |  23 ++-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  63 +++++--
 .../hadoop/ozone/om/exceptions/OMException.java    |   3 +-
 .../hadoop/ozone/om/ratis/OMRatisHelper.java       | 121 +++++++++++++
 .../ozone/om/ratis/OzoneManagerRatisClient.java    | 194 +++++++++++++++++++++
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |  79 +++++++--
 .../ozone/om/ratis/OzoneManagerStateMachine.java   |  90 ++++++++++
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  30 +++-
 .../om/ratis/TestOzoneManagerRatisServer.java      |  86 ++++++++-
 11 files changed, 710 insertions(+), 49 deletions(-)

commit f3d899281d50e38b7aff4fa7a4ae2ab7a4215120
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jan 4 09:04:10 2019 -0800

    HDDS-896. Handle over replicated containers in SCM.
    Contributed by Nandakumar.

 .../ozone/container/common/interfaces/Handler.java |   9 ++
 .../common/statemachine/DatanodeStateMachine.java  |   3 +
 .../common/statemachine/StateContext.java          |  34 +++--
 .../CloseContainerCommandHandler.java              |  94 ++++++------
 .../DeleteContainerCommandHandler.java             |  84 ++++++++++
 .../states/endpoint/HeartbeatEndpointTask.java     |  11 ++
 .../ozone/container/keyvalue/KeyValueHandler.java  |  62 ++++----
 .../container/ozoneimpl/ContainerController.java   |  12 +-
 .../protocol/commands/CloseContainerCommand.java   |  13 +-
 .../protocol/commands/DeleteBlocksCommand.java     |   6 +-
 .../protocol/commands/DeleteContainerCommand.java  |  62 ++++++++
 .../commands/ReplicateContainerCommand.java        |   4 -
 .../ozone/protocol/commands/ReregisterCommand.java |  11 +-
 .../hadoop/ozone/protocol/commands/SCMCommand.java |   2 +-
 .../TestCloseContainerCommandHandler.java          |  18 ++-
 .../scm/command/CommandStatusReportHandler.java    |  12 ++
 .../container/DeleteContainerCommandWatcher.java   |  56 +++++++
 .../hdds/scm/container/ReportHandlerHelper.java    |   5 +-
 .../container/replication/ReplicationManager.java  | 170 ++++++++++++++++++---
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  14 ++
 .../replication/TestReplicationManager.java        |  95 ++++++++----
 .../container/ozoneimpl/TestOzoneContainer.java    |   5 +-
 22 files changed, 600 insertions(+), 182 deletions(-)

commit 5d42a88299d78d73cb3d65685ce1297fc1b3afcb
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jan 3 09:43:26 2019 -0800

    HDDS-957. Replace incorrect use of system property user.name.
    Contributed by Dinesh Chitlangia.

 .../apache/hadoop/ozone/web/ozShell/volume/CreateVolumeHandler.java    | 2 +-
 .../org/apache/hadoop/ozone/web/ozShell/volume/ListVolumeHandler.java  | 3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

commit 4f1e528dfdaf4203968cf271271ede1eaeae3674
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jan 2 11:52:12 2019 -0800

    HDDS-393. Audit Parser tool for processing ozone audit logs.
    Contributed by Dinesh Chitlangia.

 hadoop-hdds/docs/content/AuditParser.md            |  72 +++++++
 hadoop-ozone/common/src/main/bin/ozone             |   5 +
 hadoop-ozone/pom.xml                               |   1 +
 .../hadoop/ozone/audit/parser/AuditParser.java     |  55 +++++
 .../ozone/audit/parser/common/DatabaseHelper.java  | 232 +++++++++++++++++++++
 .../ozone/audit/parser/common/ParserConsts.java    |  35 ++++
 .../ozone/audit/parser/common/package-info.java    |  20 ++
 .../audit/parser/handler/LoadCommandHandler.java   |  52 +++++
 .../audit/parser/handler/QueryCommandHandler.java  |  57 +++++
 .../parser/handler/TemplateCommandHandler.java     |  61 ++++++
 .../ozone/audit/parser/handler/package-info.java   |  20 ++
 .../ozone/audit/parser/model/AuditEntry.java       | 188 +++++++++++++++++
 .../ozone/audit/parser/model/package-info.java     |  20 ++
 .../hadoop/ozone/audit/parser/package-info.java    |  20 ++
 .../tools/src/main/resources/commands.properties   |  22 ++
 .../hadoop/ozone/audit/parser/TestAuditParser.java | 191 +++++++++++++++++
 .../hadoop/ozone/audit/parser/package-info.java    |  21 ++
 .../tools/src/test/resources/commands.properties   |  22 ++
 .../tools/src/test/resources/testaudit.log         |  15 ++
 19 files changed, 1109 insertions(+)

commit dd415b5fc5492000b8220723a7137fdc9d4ed714
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jan 2 11:30:54 2019 -0800

    HDDS-482. NullPointer exception thrown on console when cli operation failed.
    Contributed by Nandakumar.

 .../common/src/main/java/org/apache/hadoop/hdds/cli/GenericCli.java     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b2d31bf73fd2df41db8a5f2b3be53cdad25fba99
Author: Nanda kumar <nandakumar131@gmail.com>
Date:   Wed Jan 2 19:58:48 2019 +0530

    HDDS-949. Update Ratis to 0.4.0-a8c4ca0-SNAPSHOT.
    Contributed by Xiaoyu Yao.

 hadoop-hdds/pom.xml  | 2 +-
 hadoop-ozone/pom.xml | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 5efe3111aaff24cfa10f8513296665b8690106f4
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Thu Dec 27 11:32:49 2018 +0900

    HDDS-951. Replace the source url of Ozone logo. Contributed by Takanobu Asanuma.

 hadoop-hdds/docs/static/NOTES.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 550ade1d04fc05f95a6a64b2802adac76e7b6a71
Author: Konstantin V Shvachko <shv@apache.org>
Date:   Mon Dec 24 10:00:02 2018 -0800

    Merge branch 'HDFS-12943' into trunk

commit 37a2a5795d2672cc6c83f3f8d09a39a96885fcd4
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sun Dec 23 17:33:16 2018 -0800

    HDDS-921. Add JVM pause monitor to Ozone Daemons (OM, SCM and Datanodes). Contributed by Bharat Viswanadham.

 .../common/statemachine/DatanodeStateMachine.java        | 13 +++++++++++++
 .../hadoop/hdds/scm/server/StorageContainerManager.java  | 16 ++++++++++++++++
 .../java/org/apache/hadoop/ozone/om/OzoneManager.java    | 10 ++++++++++
 3 files changed, 39 insertions(+)

commit edd570e7eddceaf76bed545f1feff18545ab5bd7
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Dec 20 09:12:42 2018 -0800

    HDDS-881.009. Encapsulate all client to OM requests into one request message. Contributed by Hanisha Koneru.

 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |   4 +-
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 474 +++++++++++----------
 .../src/main/proto/OzoneManagerProtocol.proto      | 337 +++++++--------
 .../hdfs/server/datanode/ObjectStoreHandler.java   |   4 +-
 .../ozone/om/ratis/OzoneManagerRatisServer.java    |   3 +
 ...OzoneManagerProtocolServerSideTranslatorPB.java | 304 ++++++++-----
 6 files changed, 641 insertions(+), 485 deletions(-)

commit db72d3b880f4550e955846fe680a31b1a5a01c3f
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Dec 20 11:10:08 2018 +0530

    HDDS-934. Freon run hung on non-functional pipeline.
    Contributed by Nanda kumar.

 .../apache/hadoop/ozone/freon/RandomKeyGenerator.java   | 17 +++++++----------
 1 file changed, 7 insertions(+), 10 deletions(-)

commit 26225f959e8d30816dcb2f6922205c410e276f36
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed Dec 19 13:42:06 2018 +0530

    HDDS-893. pipeline status is ALLOCATED in scmcli listPipelines command. Contributed by Lokesh Jain.

 .../common/helpers/ContainerWithPipeline.java      |  7 +++-
 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  | 38 ++++++++++++++++--
 .../pipeline/UnknownPipelineStateException.java    | 46 ++++++++++++++++++++++
 ...inerLocationProtocolClientSideTranslatorPB.java |  9 +++--
 ...inerLocationProtocolServerSideTranslatorPB.java |  8 ++--
 hadoop-hdds/common/src/main/proto/hdds.proto       |  8 +++-
 .../hdds/scm/pipeline/SCMPipelineManager.java      |  6 ++-
 7 files changed, 107 insertions(+), 15 deletions(-)

commit fc0e29d1f5561718527be5cdd8a2643e90e321a5
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed Dec 19 12:30:40 2018 +0530

    HDDS-940. Remove dead store to local variable in OmMetadataManagerImpl. Contributed by Dinesh Chitlangia.

 .../src/main/java/org/apache/hadoop/ozone/om/OmMetadataManagerImpl.java  | 1 -
 1 file changed, 1 deletion(-)

commit 1661f33d3cc815788ecc9ec9a229d31625a3158b
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Dec 18 11:40:32 2018 -0800

    HDDS-933. Add documentation for genconf tool under Tools section. Contributed by Dinesh Chitlangia.

 hadoop-hdds/docs/content/genconf.md | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)

commit b7144c9b769ae160b985f7894a33a438b6fad91f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Dec 18 10:52:29 2018 -0800

    HDDS-911. Make TestOzoneManager unit tests independent. Contributed by Elek Marton.

 .../apache/hadoop/ozone/om/TestOzoneManager.java   | 28 +++++++++++-----------
 1 file changed, 14 insertions(+), 14 deletions(-)

commit 5978dbb74eaa8a99a00efc3b252cc74532b20da8
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Dec 18 09:59:13 2018 -0800

    HDDS-914. Add Grafana support to ozoneperf docker container. Contributed by Dinesh Chitlangia.

 .../main/compose/common/grafana/conf/grafana.ini   |   20 +
 .../grafana/dashboards/Ozone - Object Metrics.json | 1344 ++++++++++++++++++++
 .../grafana/dashboards/Ozone - RPC Metrics.json    |  875 +++++++++++++
 .../grafana/provisioning/dashboards/dashboards.yml |   22 +
 .../provisioning/datasources/datasources.yml       |   25 +
 .../prometheus}/prometheus.yml                     |    0
 .../dist/src/main/compose/ozoneperf/README.md      |   16 +-
 .../src/main/compose/ozoneperf/docker-compose.yaml |   11 +-
 .../dist/src/main/compose/ozoneperf/docker-config  |    3 +-
 9 files changed, 2310 insertions(+), 6 deletions(-)

commit 75fd512a212f89c7b3df4521ab0c6391f32ece70
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Dec 18 18:21:17 2018 +0530

    HDDS-912. Update ozone to latest ratis snapshot build (0.4.0-3b0be02-SNAPSHOT). Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  | 23 +++++++---
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   | 23 ++++++++--
 .../main/java/org/apache/ratis/RatisHelper.java    |  2 +-
 .../common/src/main/resources/ozone-default.xml    | 51 +++++++++++++++++++---
 .../server/ratis/ContainerStateMachine.java        | 10 ++++-
 .../transport/server/ratis/XceiverServerRatis.java | 32 ++++++++++----
 hadoop-hdds/pom.xml                                |  2 +-
 .../hdds/scm/pipeline/RatisPipelineUtils.java      |  2 +-
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   | 14 +++++-
 .../org/apache/hadoop/ozone/OzoneTestUtils.java    |  2 +-
 .../transport/server/ratis/TestCSMMetrics.java     |  2 +-
 .../ozoneimpl/TestOzoneContainerRatis.java         |  2 +-
 .../container/server/TestContainerServer.java      |  2 +-
 .../ozone/om/ratis/OzoneManagerRatisServer.java    | 18 +++++---
 hadoop-ozone/pom.xml                               |  2 +-
 15 files changed, 145 insertions(+), 42 deletions(-)

commit c705ffec0a3e150c8c6bbce9828372b71d06233d
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Dec 18 18:03:46 2018 +0530

    HDDS-925. Rename ChunkGroupOutputStream to KeyOutputStream and ChunkOutputStream to BlockOutputStream. Contributed by Shashikant Banerjee.

 ...unkOutputStream.java => BlockOutputStream.java} | 10 ++--
 ...GroupOutputStream.java => KeyOutputStream.java} | 68 +++++++++++-----------
 .../hadoop/ozone/client/io/OzoneOutputStream.java  |  8 +--
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 10 ++--
 .../rpc/TestCloseContainerHandlingByClient.java    | 54 ++++++++---------
 .../rpc/TestContainerStateMachineFailures.java     |  6 +-
 .../client/rpc/TestFailureHandlingByClient.java    | 20 +++----
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  6 +-
 .../web/storage/DistributedStorageHandler.java     |  6 +-
 .../apache/hadoop/ozone/om/TestChunkStreams.java   |  2 +-
 .../hadoop/fs/ozone/OzoneFSOutputStream.java       |  6 +-
 11 files changed, 98 insertions(+), 98 deletions(-)

commit 1e69101571d19a3f08d0291a4464eb22d1581a81
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Dec 18 16:10:27 2018 +0530

    HDDS-539. Ozone datanode command ignores the invalid options. Contributed by Vinicius Higa Murakami.

 .../apache/hadoop/ozone/HddsDatanodeService.java   | 118 ++++++----
 .../hadoop/ozone/TestHddsDatanodeService.java      |   3 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   6 +-
 .../ozone/ozShell/TestOzoneDatanodeShell.java      | 250 +++++++++++++++++++++
 4 files changed, 325 insertions(+), 52 deletions(-)

commit 0081b0b3a70fb42cffeb9b378eeffa6673443f16
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Dec 17 15:40:22 2018 -0800

    HDDS-99. Adding SCM Audit log. Contributed by Dinesh Chitlangia.

 .../org/apache/hadoop/ozone/audit/SCMAction.java   |  45 ++++
 .../org/apache/hadoop/ozone/common/BlockGroup.java |   8 +
 .../hdds/scm/server/SCMBlockProtocolServer.java    | 106 +++++++++-
 .../hdds/scm/server/SCMClientProtocolServer.java   | 227 +++++++++++++++++----
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 111 +++++++++-
 hadoop-ozone/common/src/main/bin/ozone             |   1 +
 .../dist/dev-support/bin/dist-layout-stitching     |   1 +
 .../dist/src/main/conf/scm-audit-log4j2.properties |  90 ++++++++
 8 files changed, 533 insertions(+), 56 deletions(-)

commit f27d1ad29170da809462ffe78d47e638ad7c465d
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Dec 17 12:17:09 2018 -0800

    HDDS-908: NPE in TestOzoneRpcClient.
    Contributed by Ajay Kumar.

 .../main/java/org/apache/hadoop/ozone/om/OzoneManager.java  | 13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)

commit b37e93a6352329e106e964beceddff5942bf82a0
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu Dec 13 13:35:40 2018 +0530

    HDDS-876. Add blockade tests for flaky network. Contributed by Nilotpal Nandi.

 .../dist/dev-support/bin/dist-layout-stitching     |  1 +
 hadoop-ozone/dist/src/main/blockade/README.md      | 26 ++++++++
 .../src/main/blockade/blockadeUtils/__init__.py    | 14 ++++
 .../src/main/blockade/blockadeUtils/blockade.py    | 59 +++++++++++++++++
 .../src/main/blockade/clusterUtils/__init__.py     | 14 ++++
 .../main/blockade/clusterUtils/cluster_utils.py    | 75 ++++++++++++++++++++++
 hadoop-ozone/dist/src/main/blockade/conftest.py    | 65 +++++++++++++++++++
 .../dist/src/main/blockade/test_blockade.py        | 54 ++++++++++++++++
 8 files changed, 308 insertions(+)

commit b1874d3293ccbab5342a16c56a577934235d6c98
Author: Márton Elek <elek@apache.org>
Date:   Wed Dec 12 14:16:21 2018 +0100

    HDDS-889. MultipartUpload: Support uploading a part file in ozone. Contributed by Bharat Viswanadham.

 .../apache/hadoop/ozone/client/OzoneBucket.java    |   7 +
 .../ozone/client/io/ChunkGroupOutputStream.java    |  47 +++++-
 .../hadoop/ozone/client/io/OzoneOutputStream.java  |  10 ++
 .../ozone/client/protocol/ClientProtocol.java      |   5 +
 .../hadoop/ozone/client/rest/RestClient.java       |  12 ++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  50 ++++++
 .../org/apache/hadoop/ozone/audit/OMAction.java    |   3 +-
 .../apache/hadoop/ozone/om/helpers/OmKeyArgs.java  |  42 ++++-
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  |   6 +
 .../helpers/OmMultipartCommitUploadPartInfo.java   |  34 ++++
 .../ozone/om/helpers/OmMultipartKeyInfo.java       |  12 ++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |   8 +-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  60 ++++++-
 .../src/main/proto/OzoneManagerProtocol.proto      |  19 +++
 .../ozone/client/rpc/TestOzoneRpcClient.java       | 188 ++++++++++++++++++++-
 .../org/apache/hadoop/ozone/om/KeyManager.java     |   5 +
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 185 ++++++++++++++++----
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |  11 ++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  27 +++
 .../hadoop/ozone/om/exceptions/OMException.java    |   4 +-
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  39 +++++
 21 files changed, 718 insertions(+), 56 deletions(-)

commit aec8be55d27c7c2c6b8b0399c90fe8052c5bb571
Author: Márton Elek <elek@apache.org>
Date:   Tue Dec 11 16:16:00 2018 +0100

    HDDS-872. Add Dockerfile and skaffold config to deploy ozone dev build to k8s. Contributed by Elek, Marton.

 hadoop-ozone/dist/Dockerfile                       | 21 ++++++
 hadoop-ozone/dist/README.md                        | 85 ++++++++++++++++++++++
 .../dist/dev-support/bin/dist-layout-stitching     |  7 ++
 hadoop-ozone/dist/skaffold.yaml                    | 25 +++++++
 .../dist/src/main/k8s/ozone/config-configmap.yaml  | 34 +++++++++
 .../main/k8s/ozone/datanode-public-service.yaml    | 29 ++++++++
 .../dist/src/main/k8s/ozone/datanode-service.yaml  | 29 ++++++++
 .../src/main/k8s/ozone/datanode-statefulset.yaml   | 52 +++++++++++++
 .../dist/src/main/k8s/ozone/om-public-service.yaml | 29 ++++++++
 .../dist/src/main/k8s/ozone/om-service.yaml        | 29 ++++++++
 .../dist/src/main/k8s/ozone/om-statefulset.yaml    | 72 ++++++++++++++++++
 .../src/main/k8s/ozone/s3g-public-service.yaml     | 29 ++++++++
 .../dist/src/main/k8s/ozone/s3g-service.yaml       | 29 ++++++++
 .../dist/src/main/k8s/ozone/s3g-statefulset.yaml   | 49 +++++++++++++
 .../src/main/k8s/ozone/scm-public-service.yaml     | 29 ++++++++
 .../dist/src/main/k8s/ozone/scm-service.yaml       | 29 ++++++++
 .../dist/src/main/k8s/ozone/scm-statefulset.yaml   | 67 +++++++++++++++++
 .../dist/src/main/k8s/prometheus/configmap.yaml    | 51 +++++++++++++
 .../dist/src/main/k8s/prometheus/deployment.yaml   | 46 ++++++++++++
 .../k8s/prometheus/prometheus-public-serivce.yaml  | 28 +++++++
 .../dist/src/main/k8s/prometheus/role.yaml         | 31 ++++++++
 .../dist/src/main/k8s/prometheus/rolebindng.yaml   | 27 +++++++
 .../main/k8s/prometheus/scm-public-service.yaml    | 29 ++++++++
 .../src/main/k8s/prometheus/service-account.yaml   | 19 +++++
 .../dist/src/main/k8s/prometheus/service.yaml      | 25 +++++++
 25 files changed, 900 insertions(+)

commit 03e3e2c81ec6f53193d62c627857d288a86dff83
Author: Márton Elek <elek@apache.org>
Date:   Mon Dec 10 10:05:38 2018 +0100

    HDDS-879. MultipartUpload: Add InitiateMultipartUpload in ozone. Contributed by Bharat Viswanadham.

 .../java/org/apache/hadoop/utils/db/DBStore.java   |  2 +
 .../apache/hadoop/ozone/client/OzoneBucket.java    | 30 +++++++
 .../ozone/client/protocol/ClientProtocol.java      | 17 ++++
 .../hadoop/ozone/client/rest/RestClient.java       | 12 +++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 23 ++++++
 .../org/apache/hadoop/ozone/audit/OMAction.java    |  3 +-
 .../apache/hadoop/ozone/om/OMMetadataManager.java  | 22 +++++
 .../ozone/om/codec/OmMultipartKeyInfoCodec.java    | 56 +++++++++++++
 .../hadoop/ozone/om/helpers/OmMultipartInfo.java   | 77 ++++++++++++++++++
 .../ozone/om/helpers/OmMultipartKeyInfo.java       | 93 ++++++++++++++++++++++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  9 +++
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 35 ++++++++
 .../src/main/proto/OzoneManagerProtocol.proto      | 29 +++++++
 .../om/codec/TestOmMultipartKeyInfoCodec.java      | 54 +++++++++++++
 .../apache/hadoop/ozone/om/codec/package-info.java | 24 ++++++
 .../ozone/client/rpc/TestOzoneRpcClient.java       | 70 ++++++++++++++++
 .../org/apache/hadoop/ozone/om/TestOmMetrics.java  | 18 ++++-
 .../org/apache/hadoop/ozone/om/KeyManager.java     | 10 +++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 78 ++++++++++++++++++
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java | 19 +++++
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     | 24 ++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 21 +++++
 .../hadoop/ozone/om/exceptions/OMException.java    |  3 +-
 ...OzoneManagerProtocolServerSideTranslatorPB.java | 33 ++++++++
 24 files changed, 758 insertions(+), 4 deletions(-)

commit 9a2c10c70651c0f7afb22490d69ac06e4026c34c
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Sat Dec 8 09:23:10 2018 -0800

    HDDS-870. Avoid creating block sized buffer in ChunkGroupOutputStream. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |   6 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 110 ++++--
 .../hadoop/hdds/scm/storage/ChunkOutputStream.java | 426 +++++++++++++--------
 .../hadoop/hdds/scm/XceiverClientAsyncReply.java   |  44 +--
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |  19 +-
 .../hdds/scm/storage/ContainerProtocolCalls.java   |   1 -
 .../common/src/main/resources/ozone-default.xml    |   8 +-
 .../transport/server/ratis/DispatcherContext.java  |   4 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    | 119 +++---
 .../rpc/TestCloseContainerHandlingByClient.java    |  19 +-
 .../client/rpc/TestFailureHandlingByClient.java    |  56 ++-
 .../apache/hadoop/ozone/om/TestChunkStreams.java   |  78 ----
 12 files changed, 505 insertions(+), 385 deletions(-)

commit 2c68739ac0e215acb8158a44f1aeace0681741b9
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Dec 7 23:20:19 2018 -0800

    HDDS-909 : Default implementation for Ozone acls.
    Contributed by Ajay Kumar.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   8 +
 .../common/src/main/resources/ozone-default.xml    |  17 +-
 .../ozone/security/acl/OzoneAccessAuthorizer.java  |  29 ++++
 .../ozone/security/acl/OzoneAclException.java      |  20 ++-
 .../apache/hadoop/ozone/security/acl/OzoneObj.java |  24 +--
 .../hadoop/ozone/security/acl/OzoneObjInfo.java    | 118 +++++++++++++
 .../hadoop/ozone/security/acl/RequestContext.java  |   6 +-
 .../ozone/security/acl/TestOzoneObjInfo.java       |  87 ++++++++++
 .../org/apache/hadoop/ozone/om/TestOmAcls.java     | 176 ++++++++++++++++++++
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |   2 +
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 183 ++++++++++++++++++++-
 11 files changed, 653 insertions(+), 17 deletions(-)

commit 0c0bc58f4a665638eccdf8aaefeacc8cca262f20
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Dec 6 15:37:19 2018 -0800

    HDDS-892. Parse aws v2 headers without spaces in Ozone s3 gateway. Contributed by Elek Marton.

 .../ozone/s3/header/AuthorizationHeaderV4.java     | 28 +++++-----
 .../ozone/s3/header/TestAuthorizationHeaderV4.java | 60 ++++++++++++++--------
 2 files changed, 53 insertions(+), 35 deletions(-)

commit 24c22b91b3eb45fd98c11f2404f9a67671117736
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Dec 6 13:33:52 2018 -0800

    HDDS-858. Start a Standalone Ratis Server on OM

 .../common/src/main/resources/ozone-default.xml    |  98 +++++++-
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java |  15 +-
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |  60 +++++
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |  22 ++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  31 +++
 .../ozone/om/ratis/OzoneManagerRatisServer.java    | 271 +++++++++++++++++++++
 .../apache/hadoop/ozone/om/ratis/package-info.java |  22 ++
 .../om/ratis/TestOzoneManagerRatisServer.java      |  69 ++++++
 8 files changed, 581 insertions(+), 7 deletions(-)

commit 444621ae0ef312cd2103e4fc75887d6d56a2bebe
Author: Ajay Kumar <ajay@apache.org>
Date:   Thu Dec 6 13:27:01 2018 -0800

    HDDS-880. Create api for ACL handling in Ozone. (Contributed by Ajay Kumar)

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  13 ++
 .../ozone/security/acl/IAccessAuthorizer.java      | 153 +++++++++++++++++++++
 .../hadoop/ozone/security/acl/IOzoneObj.java       |  24 ++++
 .../ozone/security/acl/OzoneAclException.java      |  55 ++++++++
 .../apache/hadoop/ozone/security/acl/OzoneObj.java | 105 ++++++++++++++
 .../hadoop/ozone/security/acl/RequestContext.java  | 118 ++++++++++++++++
 .../hadoop/ozone/security/acl/package-info.java    |  22 +++
 7 files changed, 490 insertions(+)

commit 5ff3c67564b1a377885946af5d98057c1d74e577
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Dec 6 11:39:59 2018 -0800

    HDDS-864. Use strongly typed codec implementations for the tables of the OmMetadataManager. Contributed by Elek Marton.

 .../java/org/apache/hadoop/utils/db/Codec.java     |   3 +
 .../org/apache/hadoop/utils/db/CodecRegistry.java  |  19 +++
 .../java/org/apache/hadoop/utils/db/DBStore.java   |  11 +-
 .../org/apache/hadoop/utils/db/DBStoreBuilder.java |   9 +-
 .../java/org/apache/hadoop/utils/db/RDBStore.java  | 106 ++++--------
 .../org/apache/hadoop/utils/db/TypedTable.java     |   3 +
 .../apache/hadoop/ozone/om/OMMetadataManager.java  |  36 ++--
 .../hadoop/ozone/om/codec/OmBucketInfoCodec.java   |  51 ++++++
 .../hadoop/ozone/om/codec/OmKeyInfoCodec.java      |  51 ++++++
 .../hadoop/ozone/om/codec/OmVolumeArgsCodec.java   |  51 ++++++
 .../hadoop/ozone/om/codec/VolumeListCodec.java     |  50 ++++++
 .../apache/hadoop/ozone/om/codec/package-info.java |  24 +++
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  |  24 +--
 .../hadoop/ozone/om/helpers/OmVolumeArgs.java      |   3 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |   8 +-
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  37 ++--
 .../apache/hadoop/ozone/om/KeyDeletingService.java |   3 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  88 +++++-----
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     | 188 +++++++++------------
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  | 109 +++++-------
 .../hadoop/ozone/om/TestBucketManagerImpl.java     |  50 ++++--
 .../hadoop/ozone/om/TestKeyDeletingService.java    |  41 +++--
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java |  72 +++++---
 23 files changed, 638 insertions(+), 399 deletions(-)

commit 0b3b8e93eb7380892768977eb82359f0fcf46729
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Dec 4 20:12:35 2018 +0530

    HDDS-890. Handle OverlappingFileLockException during writeStateMachineData in ContainerStateMachine. Contributed by Shashikant Banerjee.

 .../ozone/container/keyvalue/KeyValueHandler.java  | 36 +++++++++++--------
 .../container/keyvalue/impl/ChunkManagerImpl.java  | 33 +++++++++++-------
 .../keyvalue/interfaces/ChunkManager.java          |  8 ++---
 .../container/keyvalue/TestChunkManagerImpl.java   | 40 ++++++++++++++--------
 .../common/impl/TestContainerPersistence.java      | 38 ++++++++++++--------
 5 files changed, 93 insertions(+), 62 deletions(-)

commit 0f090d8665b75e48001d52c6930127dc0e09489b
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Dec 3 15:17:44 2018 -0800

    HDDS-894. Content-length should be set for ozone s3 ranged download. Contributed by Elek Marton.

 .../org/apache/hadoop/ozone/s3/endpoint/ObjectEndpoint.java   | 11 ++++++++---
 .../org/apache/hadoop/ozone/s3/endpoint/TestObjectGet.java    |  2 ++
 2 files changed, 10 insertions(+), 3 deletions(-)

commit 81603e2650a3ea4dead5e754888b6c385025462d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Dec 3 10:52:49 2018 -0800

    HDDS-885. Fix test failures due to ChecksumData. Contributed by Hanisha Koneru.

 .../hdds/scm/storage/ContainerProtocolCalls.java       | 14 +++++++++++---
 .../java/org/apache/hadoop/ozone/OzoneConfigKeys.java  |  5 +++--
 .../java/org/apache/hadoop/ozone/common/Checksum.java  | 14 ++++++++++++--
 .../ozone/container/common/helpers/ChunkInfo.java      |  9 ++++++++-
 .../common/src/main/resources/ozone-default.xml        | 18 ++++++++++++++++++
 .../container/common/impl/TestHddsDispatcher.java      |  2 ++
 .../org/apache/hadoop/ozone/client/rpc/RpcClient.java  |  5 +++--
 .../container/common/TestBlockDeletingService.java     |  4 ++--
 .../ozone/container/common/helpers/TestBlockData.java  |  7 ++++++-
 .../ozone/web/storage/DistributedStorageHandler.java   |  5 +++--
 10 files changed, 68 insertions(+), 15 deletions(-)

commit f0f762e5ce876d5268dd1283b0b5e4e5e75e9919
Author: Yiqun Lin <yqlin@apache.org>
Date:   Mon Dec 3 17:16:34 2018 +0800

    HDDS-848. Create SCM metrics related to container state. Contributed by Bharat Viswanadham.

 .../apache/hadoop/hdds/scm/server/SCMMXBean.java   |  5 ++
 .../hdds/scm/server/StorageContainerManager.java   | 11 +++
 .../org/apache/hadoop/ozone/scm/TestSCMMXBean.java | 81 ++++++++++++++++++++--
 3 files changed, 91 insertions(+), 6 deletions(-)

commit daa093cac920d397f7bb5e7c1998229606e30d5f
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Sun Dec 2 08:06:24 2018 +0530

    HDDS-882. Provide a config to optionally turn on/off the sync flag during chunk writes. Contributed by Shashikant Banerjee.

 .../main/java/org/apache/hadoop/ozone/OzoneConfigKeys.java    |  3 +++
 hadoop-hdds/common/src/main/resources/ozone-default.xml       |  8 ++++++++
 .../hadoop/ozone/container/keyvalue/KeyValueHandler.java      |  7 ++++++-
 .../hadoop/ozone/container/keyvalue/helpers/ChunkUtils.java   | 11 ++++++++---
 .../ozone/container/keyvalue/impl/ChunkManagerImpl.java       | 10 ++++++++--
 .../hadoop/ozone/container/keyvalue/TestChunkManagerImpl.java |  2 +-
 .../ozone/container/common/impl/TestContainerPersistence.java |  2 +-
 7 files changed, 35 insertions(+), 8 deletions(-)

commit 6e461845755f4bcddcd38de052d2b2a1e2bb2f2b
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Sun Dec 2 08:00:35 2018 +0530

    HDDS-887. Add DispatcherContext info to Dispatcher from containerStateMachine. Contributed by Shashikant Banerjee.

 .../src/main/proto/DatanodeContainerProtocol.proto |   8 --
 .../container/common/impl/HddsDispatcher.java      |   8 +-
 .../common/interfaces/ContainerDispatcher.java     |   5 +-
 .../ozone/container/common/interfaces/Handler.java |   4 +-
 .../transport/server/GrpcXceiverService.java       |   3 +-
 .../common/transport/server/XceiverServerGrpc.java |   2 +-
 .../server/ratis/ContainerStateMachine.java        | 120 +++++++------------
 .../transport/server/ratis/DispatcherContext.java  | 133 +++++++++++++++++++++
 .../ozone/container/keyvalue/KeyValueHandler.java  |  75 +++++++-----
 .../container/keyvalue/helpers/BlockUtils.java     |   8 +-
 .../container/keyvalue/helpers/SmallFileUtils.java |  10 +-
 .../container/keyvalue/impl/ChunkManagerImpl.java  |   4 +-
 .../keyvalue/interfaces/ChunkManager.java          |   5 +-
 .../container/common/impl/TestHddsDispatcher.java  |  14 +--
 .../container/keyvalue/TestChunkManagerImpl.java   |  17 +--
 .../container/keyvalue/TestKeyValueHandler.java    |  48 ++++----
 .../common/impl/TestContainerPersistence.java      |  20 ++--
 .../transport/server/ratis/TestCSMMetrics.java     |   3 +-
 .../container/server/TestContainerServer.java      |   6 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |  16 +--
 20 files changed, 321 insertions(+), 188 deletions(-)

commit 1fd00b1825a6de01ec427d00ddcae1357af8e294
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Dec 1 16:52:23 2018 -0800

    HDDS-748. Use strongly typed metadata Table implementation. Contributed by Elek Marton.

 .../apache/hadoop/utils/db/ByteArrayKeyValue.java  |  67 ++++++
 .../java/org/apache/hadoop/utils/db/Codec.java     |  38 ++++
 .../org/apache/hadoop/utils/db/CodecRegistry.java  |  70 ++++++
 .../java/org/apache/hadoop/utils/db/DBStore.java   |  12 +-
 .../java/org/apache/hadoop/utils/db/RDBStore.java  |  12 +-
 .../apache/hadoop/utils/db/RDBStoreIterator.java   |  20 +-
 .../java/org/apache/hadoop/utils/db/RDBTable.java  |   7 +-
 .../org/apache/hadoop/utils/db/StringCodec.java    |  45 ++++
 .../java/org/apache/hadoop/utils/db/Table.java     |  63 +-----
 .../org/apache/hadoop/utils/db/TableIterator.java  |   6 +-
 .../org/apache/hadoop/utils/db/TypedTable.java     | 184 ++++++++++++++++
 .../apache/hadoop/utils/db/TestDBStoreBuilder.java |   4 +-
 .../org/apache/hadoop/utils/db/TestRDBStore.java   |  31 +--
 .../apache/hadoop/utils/db/TestRDBTableStore.java  |   4 +-
 .../hadoop/utils/db/TestTypedRDBTableStore.java    | 235 +++++++++++++++++++++
 .../apache/hadoop/ozone/om/OMMetadataManager.java  |  17 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |   4 +-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  82 +++----
 18 files changed, 765 insertions(+), 136 deletions(-)

commit ca992017799ce5d8c9da21bdf6a719c13c39d570
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri Nov 30 22:57:29 2018 +0800

    HDDS-886. Unnecessary buffer copy in HddsDispatcher#dispatch. Contributed by Lokesh Jain.

 .../org/apache/hadoop/ozone/container/common/impl/HddsDispatcher.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5d48a05581983f97738fd7e12ef718644e3f2599
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Nov 29 11:37:36 2018 -0800

    HDDS-877. Ensure correct surefire version for Ozone test. Contributed by Xiaoyu Yao.

 hadoop-hdds/pom.xml  | 1 +
 hadoop-ozone/pom.xml | 3 +--
 2 files changed, 2 insertions(+), 2 deletions(-)

commit be7aef190d1e6e40e43b56674bab3a8e68bc7001
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Nov 29 22:20:08 2018 +0530

    HDDS-850. ReadStateMachineData hits OverlappingFileLockException in ContainerStateMachine. Contributed by Shashikant Banerjee.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   8 ++
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   9 ++
 .../src/main/proto/DatanodeContainerProtocol.proto |   1 +
 .../common/src/main/resources/ozone-default.xml    |   8 ++
 .../server/ratis/ContainerStateMachine.java        | 134 ++++++++++++---------
 .../transport/server/ratis/XceiverServerRatis.java |  14 ++-
 .../ozone/container/keyvalue/KeyValueHandler.java  |   7 +-
 .../container/keyvalue/impl/ChunkManagerImpl.java  |  11 +-
 .../keyvalue/interfaces/ChunkManager.java          |   5 +-
 .../container/keyvalue/TestChunkManagerImpl.java   |   6 +-
 .../common/impl/TestContainerPersistence.java      |  11 +-
 11 files changed, 143 insertions(+), 71 deletions(-)

commit 390d5a9228eb51018880a1f72c9cf1a537b4e91c
Author: Ajay Kumar <ajay@apache.org>
Date:   Thu Nov 29 08:35:02 2018 -0800

    HDDS-808. Simplify OMAction and DNAction classes used for AuditLogging. Contributed by Dinesh Chitlangia.

 .../org/apache/hadoop/ozone/audit/DNAction.java    | 44 ++++++++----------
 .../org/apache/hadoop/ozone/audit/DummyAction.java | 36 ++++++---------
 .../org/apache/hadoop/ozone/audit/OMAction.java    | 54 ++++++++++------------
 3 files changed, 58 insertions(+), 76 deletions(-)

commit 49f9627b6357265c99e5f5d53536008c2837a65a
Author: Ajay Kumar <ajay@apache.org>
Date:   Wed Nov 28 17:45:46 2018 -0800

    HDDS-642. Add chill mode exit condition for pipeline availability. Contributed by Yiqun Lin.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   5 +
 .../common/src/main/resources/ozone-default.xml    |   9 ++
 .../hdds/scm/chillmode/PipelineChillModeRule.java  | 108 +++++++++++++++++++++
 .../hdds/scm/chillmode/SCMChillModeManager.java    |  19 +++-
 .../hdds/scm/server/StorageContainerManager.java   |   5 +-
 .../scm/chillmode/TestSCMChillModeManager.java     |  81 ++++++++++++++--
 6 files changed, 213 insertions(+), 14 deletions(-)

commit c785270051b0223d88e5074a03ebbdef679b3c03
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Wed Nov 28 10:53:12 2018 -0800

    HDDS-284. Checksum for ChunksData.

 .../hadoop/hdds/scm/storage/ChunkInputStream.java  |  11 +
 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |  21 +-
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  14 +-
 .../org/apache/hadoop/ozone/common/Checksum.java   | 239 +++++++++++++++++++++
 .../apache/hadoop/ozone/common/ChecksumData.java   | 190 ++++++++++++++++
 .../ozone/common/OzoneChecksumException.java       |  66 ++++++
 .../ozone/container/common/helpers/ChunkInfo.java  |  28 +--
 .../src/main/proto/DatanodeContainerProtocol.proto |  18 +-
 .../apache/hadoop/ozone/common/TestChecksum.java   | 101 +++++++++
 .../container/keyvalue/helpers/ChunkUtils.java     |  43 +---
 .../container/keyvalue/impl/ChunkManagerImpl.java  |   4 -
 .../container/keyvalue/TestChunkManagerImpl.java   |  16 --
 .../ozone/client/io/ChunkGroupOutputStream.java    |  30 ++-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  25 +++
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  98 ++++++++-
 .../ozone/container/ContainerTestHelper.java       |  17 +-
 .../container/common/TestBlockDeletingService.java |   3 +-
 .../common/impl/TestContainerPersistence.java      |  32 ++-
 .../web/storage/DistributedStorageHandler.java     |  25 +++
 19 files changed, 862 insertions(+), 119 deletions(-)

commit 74281ea59dc4cdb7239c928dfee51ca69f8d4364
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Nov 27 15:57:24 2018 -0800

    HDDS-846. Exports ozone metrics to prometheus.
    Contributed by Elek, Marton.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   3 +
 .../common/src/main/resources/ozone-default.xml    |  11 ++
 hadoop-hdds/docs/config.yaml                       |   5 +
 hadoop-hdds/docs/content/Prometheus.md             |  94 +++++++++++++++
 .../apache/hadoop/hdds/server/BaseHttpServer.java  |  20 ++++
 .../hadoop/hdds/server/PrometheusMetricsSink.java  | 133 +++++++++++++++++++++
 .../hadoop/hdds/server/PrometheusServlet.java      |  46 +++++++
 .../hdds/server/TestPrometheusMetricsSink.java     |  96 +++++++++++++++
 .../dist/src/main/compose/ozoneperf/README.md      |  49 ++------
 .../dist/src/main/compose/ozoneperf/compose-all.sh |  18 ---
 .../compose/ozoneperf/docker-compose-freon.yaml    |  26 ----
 .../src/main/compose/ozoneperf/docker-compose.yaml |  23 ++--
 .../dist/src/main/compose/ozoneperf/docker-config  |   5 +-
 .../dist/src/main/compose/ozoneperf/init.sh        |  21 ----
 .../dist/src/main/compose/ozoneperf/prometheus.yml |  11 +-
 15 files changed, 438 insertions(+), 123 deletions(-)

commit 240155c1f5627f9b695e675dcc9da52aaad6f4be
Author: Márton Elek <elek@apache.org>
Date:   Thu Nov 22 15:38:21 2018 +0100

    HDDS-766. Ozone shell create volume fails if volume name does not have a leading slash. Contributed by chencan.

 .../main/java/org/apache/hadoop/ozone/web/ozShell/OzoneAddress.java | 6 ++++++
 .../java/org/apache/hadoop/ozone/web/ozShell/TestOzoneAddress.java  | 3 ++-
 2 files changed, 8 insertions(+), 1 deletion(-)

commit a464b4cb1201c1abf74d563599507b120f459575
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Nov 27 13:01:22 2018 +0530

    HDDS-868. Handle quasi closed container replicas in SCM.
    Contributed by Nanda kumar.

 .../hadoop/hdds/scm/container/ContainerInfo.java   |  29 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |  20 +-
 .../hdds/scm/container/ContainerReportHandler.java |  50 +-
 .../hdds/scm/container/ContainerStateManager.java  |  58 +-
 .../IncrementalContainerReportHandler.java         |  24 +-
 .../hdds/scm/container/ReportHandlerHelper.java    | 368 ++++++++++
 .../hadoop/hdds/scm/container/MockNodeManager.java |   1 +
 .../scm/container/TestContainerReportHandler.java  | 772 ++++++++++++++++-----
 .../scm/container/TestContainerReportHelper.java   | 113 +++
 .../TestIncrementalContainerReportHandler.java     | 218 ++++++
 10 files changed, 1402 insertions(+), 251 deletions(-)

commit c76927d4ceaf3f81c9155d07939459642fd4c743
Author: Márton Elek <elek@apache.org>
Date:   Fri Nov 23 10:05:12 2018 +0100

    HDDS-820. Use more strict data format for the Last-Modified headers of s3 gateway. Contributed by Elek, Marton.

 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   | 44 ++++++----
 .../apache/hadoop/ozone/s3/util/RFC1123Util.java   | 98 ++++++++++++++++++++++
 .../hadoop/ozone/s3/endpoint/TestObjectGet.java    |  8 +-
 .../hadoop/ozone/s3/util/TestRFC1123Util.java      | 44 ++++++++++
 4 files changed, 177 insertions(+), 17 deletions(-)

commit 513fadd2449200f5fd5838007d56321413335593
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Nov 22 18:39:14 2018 +0530

    HDDS-869. Fix log message in XceiverClientRatis#sendCommandAsync. Contributed by Lokesh Jain.

 .../main/java/org/apache/hadoop/hdds/scm/XceiverClientRatis.java  | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit f301d6e9f5b5927979dcf1068c492091d2948a9b
Author: Márton Elek <elek@apache.org>
Date:   Thu Nov 22 11:50:47 2018 +0100

    HDDS-841. [JDK11] Fix Javadoc errors in hadoop-hdds-container-service module. Contributed by Dinesh Chitlangia.

 .../container/common/helpers/ContainerUtils.java   |  2 +-
 .../ozone/container/common/impl/ContainerSet.java  |  6 ++---
 .../container/common/interfaces/Container.java     |  2 --
 .../common/statemachine/StateContext.java          | 10 ++++-----
 .../container/common/states/DatanodeState.java     |  3 +++
 .../ozone/container/common/volume/HddsVolume.java  | 26 ++++++++++++----------
 .../container/keyvalue/helpers/ChunkUtils.java     |  2 +-
 .../keyvalue/helpers/KeyValueContainerUtil.java    |  4 ++--
 .../ozone/container/ozoneimpl/ContainerReader.java | 25 ++++++++++++---------
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  1 -
 10 files changed, 43 insertions(+), 38 deletions(-)

commit 153f6ae7900fe0010d066b510bb7bdd4392c6af5
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Nov 22 15:02:07 2018 +0530

    HDDS-866. Handle RaftRetryFailureException in OzoneClient. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  9 +++-
 .../container/common/impl/HddsDispatcher.java      | 56 +++++++++++-----------
 .../transport/server/ratis/XceiverServerRatis.java | 14 ++----
 .../container/keyvalue/KeyValueContainer.java      |  3 ++
 hadoop-hdds/pom.xml                                |  2 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |  9 ++--
 .../client/rpc/TestFailureHandlingByClient.java    | 10 +---
 hadoop-ozone/pom.xml                               |  2 +-
 8 files changed, 54 insertions(+), 51 deletions(-)

commit 3c709c20fedb9614c1d7653e34d39a41b2b3cc0e
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu Nov 22 10:45:32 2018 +0530

    HDDS-814. dfs.ratis.leader.election.minimum.timeout.duration should not be read by client. Contributed by chencan.

 .../main/java/org/apache/ratis/RatisHelper.java    | 29 ----------------------
 1 file changed, 29 deletions(-)

commit bba7b0566257a68bea6d76c6cb462eeb86fdee9a
Author: Ajay Kumar <ajay@apache.org>
Date:   Wed Nov 21 12:25:41 2018 -0800

    HDDS-795. RocksDb specific classes leak from DBStore/Table interfaces. Contributed by  Márton Elek.

 .../org/apache/hadoop/utils/db/BatchOperation.java | 27 ++++++++
 .../java/org/apache/hadoop/utils/db/DBStore.java   | 23 +++++--
 .../apache/hadoop/utils/db/RDBBatchOperation.java  | 69 ++++++++++++++++++++
 .../java/org/apache/hadoop/utils/db/RDBStore.java  | 15 +++--
 .../java/org/apache/hadoop/utils/db/RDBTable.java  | 51 +++++++--------
 .../java/org/apache/hadoop/utils/db/Table.java     | 32 ++++-----
 .../apache/hadoop/utils/db/TestRDBTableStore.java  | 62 +++++++++++++-----
 .../apache/hadoop/ozone/om/KeyDeletingService.java | 30 +++++----
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 38 +++++------
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  | 75 ++++++++++------------
 10 files changed, 276 insertions(+), 146 deletions(-)

commit 7ec62ced6aeae4f72871ceae2cc30661d9179aca
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Nov 21 11:46:53 2018 -0800

    HDDS-861. SCMNodeManager unit tests are broken. Contributed by Xiaoyu Yao.

 .../main/java/org/apache/hadoop/hdds/scm/node/SCMNodeManager.java   | 4 +++-
 .../hdds/scm/node/{TestNodeManager.java => TestSCMNodeManager.java} | 6 +++---
 2 files changed, 6 insertions(+), 4 deletions(-)

commit c4dd2732a02100a26e918e173f836d213c9385fd
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Nov 22 00:49:43 2018 +0530

    HDDS-853. Option to force close a container in Datanode.
    Contributed by Nanda kumar.

 .../CloseContainerCommandHandler.java              |  19 +-
 .../protocol/commands/CloseContainerCommand.java   |  11 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   2 +
 .../TestCloseContainerCommandHandler.java          | 246 ++++++++++++++-------
 4 files changed, 190 insertions(+), 88 deletions(-)

commit 0a5ad009a971ff986a1f332220cc36680b342668
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Nov 21 10:35:39 2018 -0800

    HDDS-816. Create OM metrics for bucket, volume, keys. Contributed by Bharat Viswanadham.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   3 +
 .../common/src/main/resources/ozone-default.xml    |  10 +
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |   5 +
 .../apache/hadoop/ozone/om/OMMetadataManager.java  |  15 +-
 .../org/apache/hadoop/ozone/om/TestOmMetrics.java  | 140 ++++++++++++--
 .../org/apache/hadoop/ozone/om/KeyManager.java     |   6 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  35 ++--
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |  60 ++++++
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     | 106 ++++++-----
 .../org/apache/hadoop/ozone/om/OmMetricsInfo.java  |  43 +++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 211 ++++++++++++++++++---
 .../apache/hadoop/ozone/om/S3BucketManager.java    |   9 +
 .../hadoop/ozone/om/S3BucketManagerImpl.java       |  17 +-
 .../hadoop/ozone/om/TestKeyDeletingService.java    |   7 +-
 .../hadoop/ozone/om/TestS3BucketManager.java       |   5 +
 15 files changed, 561 insertions(+), 111 deletions(-)

commit 1d3d7ad1770222a1885ee137c8522b06695404c0
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Nov 21 23:43:01 2018 +0530

    HDDS-865. GrpcXceiverService is added twice to GRPC netty server. Contributed by Xiaoyu Yao.

 .../ozone/container/common/transport/server/XceiverServerGrpc.java    | 4 ----
 1 file changed, 4 deletions(-)

commit ca2ed61bc751f68a092c8537e1ce8d7e1b251ad4
Author: Márton Elek <elek@apache.org>
Date:   Wed Nov 21 17:59:20 2018 +0100

    HDDS-732. Add read method which takes offset and length in SignedChunkInputStream. Contributed by chencan.

 .../hadoop/ozone/s3/SignedChunksInputStream.java   | 40 ++++++++++++++++++++++
 .../ozone/s3/TestSignedChunksInputStream.java      | 30 ++++++++++++++++
 2 files changed, 70 insertions(+)

commit 0db32acc072222263dc7f3fd4ac0d3f5a291ad56
Author: Márton Elek <elek@apache.org>
Date:   Wed Nov 21 17:04:53 2018 +0100

    HDDS-791. Support Range header for ozone s3 object download. Contributed by Bharat Viswanadham.

 .../dist/src/main/smoketest/s3/objectputget.robot  | 116 ++++++++++++++++++++-
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   |  74 +++++++++++--
 .../hadoop/ozone/s3/exception/S3ErrorTable.java    |   5 +
 .../hadoop/ozone/s3/io/S3WrapperInputStream.java   |  79 ++++++++++++++
 .../apache/hadoop/ozone/s3/io/package-info.java    |  23 ++++
 .../apache/hadoop/ozone/s3/util/RangeHeader.java   |  89 ++++++++++++++++
 .../org/apache/hadoop/ozone/s3/util/S3Consts.java  |  15 +++
 .../org/apache/hadoop/ozone/s3/util/S3utils.java   |  68 ++++++++++++
 .../apache/hadoop/ozone/s3/util/TestS3utils.java   |  93 +++++++++++++++++
 9 files changed, 554 insertions(+), 8 deletions(-)

commit 479e1e1d75383ae4ec34a02d0b73a86b9c764ebd
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Nov 21 11:28:20 2018 +0530

    HDDS-860. Fix TestDataValidate unit tests. Contributed by Shashikant Banerjee.

 .../src/main/java/org/apache/hadoop/ozone/freon/RandomKeyGenerator.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit df37142f78c1cf0ce62efa1f441ee1bd029a8224
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Nov 21 10:51:50 2018 +0530

    HDDS-835. Use storageSize instead of Long for buffer size configs in Ozone Client. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  3 ++-
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  | 11 ++++----
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   | 21 ++++++++-------
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  5 ++++
 .../main/java/org/apache/ratis/RatisHelper.java    |  3 ++-
 .../common/src/main/resources/ozone-default.xml    | 16 +++++------
 .../common/transport/server/XceiverServerGrpc.java |  5 ++--
 .../transport/server/ratis/XceiverServerRatis.java | 14 ++++++----
 .../replication/GrpcReplicationClient.java         |  4 +--
 .../ozone/client/io/ChunkGroupOutputStream.java    |  7 +++--
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 31 ++++++++++++----------
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  | 17 +++++++-----
 .../rpc/TestCloseContainerHandlingByClient.java    |  4 ++-
 .../client/rpc/TestFailureHandlingByClient.java    |  5 ----
 .../ozone/om/TestMultipleContainerReadWrite.java   |  5 ++--
 .../web/storage/DistributedStorageHandler.java     | 29 +++++++++++---------
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  9 ++++---
 .../ozone/web/ozShell/keys/GetKeyHandler.java      |  7 +++--
 .../ozone/web/ozShell/keys/PutKeyHandler.java      |  6 +++--
 .../hadoop/fs/ozone/TestOzoneFSInputStream.java    |  4 ++-
 20 files changed, 116 insertions(+), 90 deletions(-)

commit 5c67cd1c696089d69061e564b7c198ed046afb06
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Nov 20 20:31:07 2018 -0800

    HDDS-855. Move OMMetadataManager from hadoop-ozone/ozone-manager to hadoop-ozone/common. Contributed by Ajay Kumar.

 .../src/main/java/org/apache/hadoop/ozone/om/OMMetadataManager.java       | 0
 .../src/main/java/org/apache/hadoop/ozone/om/OzoneManagerLock.java        | 0
 2 files changed, 0 insertions(+), 0 deletions(-)

commit 8c7741c1e50c7590e564bb8fc8e073c6a42e6c17
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Nov 21 01:07:38 2018 +0530

    Revert "HDDS-835. Use storageSize instead of Long for buffer size configs in Ozone Client. Contributed by Shashikant Banerjee."
    
    This reverts commit c74783036d8a2a1d2ce071a888d14e0ccff9263e.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  3 +--
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  9 ++++---
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   | 21 +++++++--------
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  5 ----
 .../main/java/org/apache/ratis/RatisHelper.java    |  3 +--
 .../common/src/main/resources/ozone-default.xml    |  6 ++---
 .../common/transport/server/XceiverServerGrpc.java |  5 ++--
 .../transport/server/ratis/XceiverServerRatis.java | 14 ++++------
 .../replication/GrpcReplicationClient.java         |  4 +--
 .../ozone/client/io/ChunkGroupOutputStream.java    |  7 ++---
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 31 ++++++++++------------
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  | 17 +++++-------
 .../rpc/TestCloseContainerHandlingByClient.java    |  4 +--
 .../client/rpc/TestFailureHandlingByClient.java    |  5 ++++
 .../ozone/om/TestMultipleContainerReadWrite.java   |  5 ++--
 .../web/storage/DistributedStorageHandler.java     | 29 +++++++++-----------
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  9 +++----
 .../ozone/web/ozShell/keys/GetKeyHandler.java      |  7 ++---
 .../ozone/web/ozShell/keys/PutKeyHandler.java      |  6 ++---
 .../hadoop/fs/ozone/TestOzoneFSInputStream.java    |  4 +--
 20 files changed, 84 insertions(+), 110 deletions(-)

commit 176819e6fd478ac5b8ad5daee164da7eb82bb44f
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Nov 20 23:01:02 2018 +0530

    HDDS-835. Use storageSize instead of Long for buffer size configs in Ozone Client. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  3 ++-
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  9 +++----
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   | 21 ++++++++-------
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  5 ++++
 .../main/java/org/apache/ratis/RatisHelper.java    |  3 ++-
 .../common/src/main/resources/ozone-default.xml    |  6 ++---
 .../common/transport/server/XceiverServerGrpc.java |  5 ++--
 .../transport/server/ratis/XceiverServerRatis.java | 14 ++++++----
 .../replication/GrpcReplicationClient.java         |  4 +--
 .../ozone/client/io/ChunkGroupOutputStream.java    |  7 +++--
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 31 ++++++++++++----------
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  | 17 +++++++-----
 .../rpc/TestCloseContainerHandlingByClient.java    |  4 ++-
 .../client/rpc/TestFailureHandlingByClient.java    |  5 ----
 .../ozone/om/TestMultipleContainerReadWrite.java   |  5 ++--
 .../web/storage/DistributedStorageHandler.java     | 29 +++++++++++---------
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  9 ++++---
 .../ozone/web/ozShell/keys/GetKeyHandler.java      |  7 +++--
 .../ozone/web/ozShell/keys/PutKeyHandler.java      |  6 +++--
 .../hadoop/fs/ozone/TestOzoneFSInputStream.java    |  4 ++-
 20 files changed, 110 insertions(+), 84 deletions(-)

commit 77ebca277550e14460ad764fb7598bfbeedf799b
Author: Márton Elek <elek@apache.org>
Date:   Tue Nov 20 15:49:16 2018 +0100

    HDDS-164. Add unit test for HddsDatanodeService. Contributed by Yiqun Lin.

 .../hadoop/ozone/TestHddsDatanodeService.java      | 95 ++++++++++++++++++++++
 1 file changed, 95 insertions(+)

commit 25058585e5c570016e11b2bff57766895d207b34
Author: Márton Elek <elek@apache.org>
Date:   Tue Nov 20 12:56:03 2018 +0100

    HDDS-692. Use the ProgressBar class in the RandomKeyGenerator freon test. Contributed by Zsolt Horvath.

 .../org/apache/hadoop/ozone/freon/ProgressBar.java | 227 ++++++++-------------
 .../hadoop/ozone/freon/RandomKeyGenerator.java     | 103 ++--------
 .../apache/hadoop/ozone/freon/TestProgressBar.java |  71 ++-----
 3 files changed, 115 insertions(+), 286 deletions(-)

commit c821c0a6ec476b26e7e2e46945ab2d703ecd06dc
Author: Márton Elek <elek@apache.org>
Date:   Tue Nov 20 13:35:40 2018 +0100

    Revert "HDDS-692. Use the ProgressBar class in the RandomKeyGenerator freon test. Contributed by Zsolt Horvath."
    
    This reverts commit 2a7f4859912e83910f9a418f69ce6d4bd4a37815.

 .../org/apache/hadoop/ozone/freon/ProgressBar.java | 227 +++++++++++++--------
 .../hadoop/ozone/freon/RandomKeyGenerator.java     |  87 ++++++--
 .../apache/hadoop/ozone/freon/TestProgressBar.java |  71 +++++--
 3 files changed, 270 insertions(+), 115 deletions(-)

commit dc964223c89ad61ad057591f687a7162544421cb
Author: Márton Elek <elek@apache.org>
Date:   Tue Nov 20 12:56:03 2018 +0100

    HDDS-692. Use the ProgressBar class in the RandomKeyGenerator freon test. Contributed by Zsolt Horvath.

 .../org/apache/hadoop/ozone/freon/ProgressBar.java | 227 ++++++++-------------
 .../hadoop/ozone/freon/RandomKeyGenerator.java     |  87 ++------
 .../apache/hadoop/ozone/freon/TestProgressBar.java |  71 ++-----
 3 files changed, 115 insertions(+), 270 deletions(-)

commit 5b81748dd96f3bbee27d8f833423a3a98a95dfc7
Author: Yiqun Lin <yqlin@apache.org>
Date:   Tue Nov 20 14:22:30 2018 +0800

    HDDS-817. Create SCM metrics for disk from node report. Contributed by Bharat Viswanadham.

 .../hadoop/hdds/scm/node/NodeManagerMXBean.java    |   7 ++
 .../hadoop/hdds/scm/node/NodeStateManager.java     |  14 +++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  60 +++++++++++
 .../hadoop/hdds/scm/container/MockNodeManager.java |   9 ++
 .../testutils/ReplicationNodeManagerMock.java      |   5 +
 .../hadoop/ozone/scm/TestSCMNodeManagerMXBean.java | 112 +++++++++++++++++++++
 6 files changed, 207 insertions(+)

commit a334d429c91cd2a98a94f3b21f50ed270d766945
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Nov 19 22:58:25 2018 +0530

    HDDS-718. Introduce new SCM Commands to list and close Pipelines. Contributed by Lokesh Jain.

 .../hdds/scm/client/ContainerOperationClient.java  | 11 +++++
 .../apache/hadoop/hdds/scm/client/ScmClient.java   | 16 +++++++
 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  | 25 +++++-----
 .../protocol/StorageContainerLocationProtocol.java | 17 +++++++
 ...inerLocationProtocolClientSideTranslatorPB.java | 33 ++++++++++++++
 ...inerLocationProtocolServerSideTranslatorPB.java | 37 +++++++++++++++
 .../proto/StorageContainerLocationProtocol.proto   | 25 ++++++++++
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  |  2 +
 .../hdds/scm/pipeline/PipelineStateManager.java    |  4 ++
 .../hadoop/hdds/scm/pipeline/PipelineStateMap.java |  8 ++++
 .../hdds/scm/pipeline/RatisPipelineUtils.java      |  2 +-
 .../hdds/scm/pipeline/SCMPipelineManager.java      | 10 ++++
 .../hdds/scm/server/SCMClientProtocolServer.java   | 18 ++++++++
 .../org/apache/hadoop/hdds/scm/cli/SCMCLI.java     |  6 ++-
 .../scm/cli/pipeline/ClosePipelineSubcommand.java  | 53 ++++++++++++++++++++++
 .../scm/cli/pipeline/ListPipelinesSubcommand.java  | 48 ++++++++++++++++++++
 .../hadoop/hdds/scm/cli/pipeline/package-info.java | 22 +++++++++
 .../scm/pipeline/TestPipelineStateManager.java     |  7 +++
 18 files changed, 331 insertions(+), 13 deletions(-)

commit b92897370d6d417ab5b78a220f255d25a4413152
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Nov 19 22:47:43 2018 +0530

    HDDS-849. Fix NPE in TestKeyValueHandler because of audit log write.
    Contributed by Dinesh Chitlangia.

 .../apache/hadoop/ozone/container/keyvalue/TestKeyValueHandler.java   | 4 ++++
 1 file changed, 4 insertions(+)

commit 0349106adf627a4f5018abcc0af3643a2519189c
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Nov 19 17:04:18 2018 +0530

    HDDS-847. TestBlockDeletion is failing.
    Contributed by Lokesh Jain.

 .../org/apache/hadoop/ozone/OzoneTestUtils.java    | 50 ++++++++---------
 .../commandhandler/TestBlockDeletion.java          | 65 ++++++++++------------
 2 files changed, 51 insertions(+), 64 deletions(-)

commit 558ae3b9c1b6a6e94fafce3dfa948b0db4f94fd2
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Nov 19 14:38:45 2018 +0530

    HDDS-837. Persist originNodeId as part of .container file in datanode.
    Contributed by Nanda kumar.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  2 +
 .../src/main/proto/DatanodeContainerProtocol.proto | 41 ++++++++---------
 .../ozone/container/common/impl/ContainerData.java | 44 +++++++++++++++---
 .../container/common/impl/ContainerDataYaml.java   |  7 ++-
 .../container/common/impl/HddsDispatcher.java      |  1 +
 .../ozone/container/common/interfaces/Handler.java | 12 +++++
 .../server/ratis/ContainerStateMachine.java        |  7 ++-
 .../container/keyvalue/KeyValueContainer.java      |  3 +-
 .../container/keyvalue/KeyValueContainerData.java  | 52 +++-------------------
 .../ozone/container/keyvalue/KeyValueHandler.java  |  7 ++-
 .../container/ozoneimpl/ContainerController.java   |  9 ++--
 .../replication/DownloadAndImportReplicator.java   |  2 +
 .../proto/StorageContainerDatanodeProtocol.proto   |  1 +
 .../common/TestKeyValueContainerData.java          |  7 ++-
 .../common/impl/TestContainerDataYaml.java         |  4 +-
 .../container/common/impl/TestContainerSet.java    |  7 ++-
 .../container/common/impl/TestHddsDispatcher.java  | 20 ++++++---
 .../container/common/interfaces/TestHandler.java   | 11 ++++-
 .../TestCloseContainerCommandHandler.java          | 29 +++++-------
 .../container/keyvalue/TestBlockManagerImpl.java   |  7 +--
 .../container/keyvalue/TestChunkManagerImpl.java   |  6 ++-
 .../keyvalue/TestKeyValueBlockIterator.java        |  3 +-
 .../container/keyvalue/TestKeyValueContainer.java  | 13 ++++--
 .../container/keyvalue/TestKeyValueHandler.java    | 17 +++++--
 .../container/keyvalue/TestTarContainerPacker.java |  4 +-
 .../container/ozoneimpl/TestOzoneContainer.java    | 14 +++++-
 .../replication/TestReplicationSupervisor.java     |  4 +-
 .../src/test/resources/additionalfields.container  |  4 +-
 .../test/resources/incorrect.checksum.container    |  2 +
 .../src/test/resources/incorrect.container         |  2 +
 .../ozone/container/common/TestEndPoint.java       | 23 +++++++---
 .../container/common/TestBlockDeletingService.java |  3 +-
 .../impl/TestContainerDeletionChoosingPolicy.java  |  8 +++-
 .../common/impl/TestContainerPersistence.java      |  3 +-
 .../container/metrics/TestContainerMetrics.java    | 15 +++++--
 .../container/ozoneimpl/TestOzoneContainer.java    | 10 ++++-
 36 files changed, 266 insertions(+), 138 deletions(-)

commit cfc368400039119c257e3b0ac69f527367c4f42f
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Mon Nov 19 14:38:51 2018 +0530

    HDDS-845. Create a new raftClient instance for every watch request for Ratis. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  3 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 38 +++++++++++++++++-----
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |  3 +-
 3 files changed, 33 insertions(+), 11 deletions(-)

commit 15294cc48a55a88c31dabe8b972cd15e65d44f20
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Nov 19 12:11:05 2018 +0530

    HDDS-844. Add logic for pipeline teardown after timeout. Contributed by Lokesh Jain.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  13 --
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  48 ------
 .../hdds/scm/client/ContainerOperationClient.java  |   3 +-
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   8 +-
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |  11 --
 .../common/src/main/resources/ozone-default.xml    |  13 +-
 .../hadoop/hdds/scm/node/StaleNodeHandler.java     |  14 +-
 .../hdds/scm/pipeline/PipelineActionHandler.java   |  26 +--
 .../hdds/scm/pipeline/PipelineReportHandler.java   |  12 +-
 .../hadoop/hdds/scm/pipeline/PipelineStateMap.java |   6 -
 .../hdds/scm/pipeline/RatisPipelineProvider.java   |  10 +-
 .../hdds/scm/pipeline/RatisPipelineUtils.java      | 176 +++++++++++++++++++++
 .../hdds/scm/server/StorageContainerManager.java   |   4 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  30 +++-
 .../hdds/scm/pipeline/TestPipelineClose.java       | 138 ++++++++++++----
 .../scm/pipeline/TestPipelineStateManager.java     |  14 --
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  |   4 +-
 .../ozone/freon/TestFreonWithPipelineDestroy.java  | 109 +++++++++++++
 18 files changed, 464 insertions(+), 175 deletions(-)

commit 25948e32a814deb919ba6b9851731ef158dd47da
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Nov 16 14:59:59 2018 -0800

    HDDS-120. Adding HDDS datanode Audit Log. Contributed by Dinesh Chitlangia.

 .../org/apache/hadoop/ozone/audit/DNAction.java    |  54 ++++++
 .../ozone/container/common/helpers/BlockData.java  |  10 ++
 .../helpers/ContainerCommandRequestPBHelper.java   | 192 +++++++++++++++++++++
 .../container/common/impl/HddsDispatcher.java      | 133 +++++++++++++-
 hadoop-ozone/common/src/main/bin/ozone             |   2 +
 .../dist/dev-support/bin/dist-layout-stitching     |   1 +
 .../dist/src/main/conf/dn-audit-log4j2.properties  |  90 ++++++++++
 7 files changed, 473 insertions(+), 9 deletions(-)

commit bcb0c757238e56e8eb8947b2304cf669431ab513
Author: Giovanni Matteo Fumarola <gifuma@apache.org>
Date:   Fri Nov 16 10:13:41 2018 -0800

    HDDS-840. [JDK11] Fix Javadoc errors in hadoop-hdds-client module. Contributed by Dinesh Chitlangia.

 .../java/org/apache/hadoop/hdds/scm/XceiverClientRatis.java    |  7 -------
 .../hadoop/hdds/scm/client/ContainerOperationClient.java       | 10 +---------
 2 files changed, 1 insertion(+), 16 deletions(-)

commit d9848c225c6906115dd9305724e893eb762a2ac8
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Nov 16 23:07:45 2018 +0530

    HDDS-801. Quasi close the container when close is not executed via Ratis.
    Contributed by Nanda kumar.

 .../src/main/proto/DatanodeContainerProtocol.proto |   4 +-
 .../ozone/container/common/impl/ContainerData.java |  17 +-
 .../container/common/impl/HddsDispatcher.java      |  14 +-
 .../container/common/interfaces/Container.java     |  15 +-
 .../ozone/container/common/interfaces/Handler.java |  68 ++++++-
 .../common/report/ContainerReportPublisher.java    |   3 +-
 .../common/statemachine/DatanodeStateMachine.java  |   2 +-
 .../common/statemachine/StateContext.java          |  20 --
 .../CloseContainerCommandHandler.java              | 138 +++++++-------
 .../states/endpoint/RegisterEndpointTask.java      |   2 +-
 .../common/transport/server/XceiverServerGrpc.java |   5 +
 .../common/transport/server/XceiverServerSpi.java  |   7 +
 .../transport/server/ratis/XceiverServerRatis.java |  18 +-
 .../container/keyvalue/KeyValueContainer.java      |  41 +++-
 .../ozone/container/keyvalue/KeyValueHandler.java  | 119 ++++++++----
 .../container/ozoneimpl/ContainerController.java   | 124 ++++++++++++
 .../ozone/container/ozoneimpl/OzoneContainer.java  | 124 +++++-------
 .../replication/DownloadAndImportReplicator.java   |  16 +-
 .../OnDemandContainerReplicationSource.java        |  10 +-
 .../protocol/commands/CloseContainerCommand.java   |  12 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   8 +-
 .../container/common/impl/TestHddsDispatcher.java  |  26 ++-
 .../container/common/interfaces/TestHandler.java   |  16 +-
 .../TestCloseContainerCommandHandler.java          | 210 +++++++++++++++++++++
 .../container/keyvalue/TestKeyValueHandler.java    |   8 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |   2 +-
 .../scm/container/CloseContainerEventHandler.java  |   4 +-
 .../hadoop/hdds/scm/node/TestNodeManager.java      |   3 +-
 .../ozone/container/common/TestEndPoint.java       |   8 +-
 .../dist/src/main/smoketest/basic/basic.robot      |   2 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |  18 +-
 .../rpc/TestCloseContainerHandlingByClient.java    |  26 +--
 .../TestCloseContainerByPipeline.java              |  80 ++++----
 .../commandhandler/TestCloseContainerHandler.java  |   3 +-
 .../container/metrics/TestContainerMetrics.java    |  22 ++-
 .../container/server/TestContainerServer.java      |  26 ++-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |  19 +-
 .../freon/TestFreonWithDatanodeFastRestart.java    |   3 +-
 38 files changed, 875 insertions(+), 368 deletions(-)

commit 2ae9729ccdac832b371677cff88e0c142509dfb9
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Nov 15 17:36:09 2018 -0800

    HDDS-825. Code cleanup based on messages from ErrorProne.
    Contributed by Anu Engineer.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |   1 +
 .../hadoop/hdds/scm/XceiverClientManager.java      |   1 +
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |   2 +
 .../hadoop/hdds/scm/storage/ChunkInputStream.java  |   2 +-
 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  |  11 ++
 .../apache/hadoop/ozone/common/StorageInfo.java    |   1 -
 .../java/org/apache/hadoop/utils/db/RDBStore.java  |   7 +-
 .../org/apache/hadoop/ozone/audit/DummyAction.java |   2 +-
 .../hadoop/ozone/lease/TestLeaseManager.java       |  17 ++-
 .../org/apache/hadoop/utils/TestHddsIdFactory.java |   2 +-
 .../org/apache/hadoop/utils/TestMetadataStore.java |  96 +++++++-------
 .../apache/hadoop/utils/TestRocksDBStoreMBean.java |   6 +-
 .../apache/hadoop/utils/db/TestDBStoreBuilder.java |   4 +-
 .../apache/hadoop/utils/db/TestRDBTableStore.java  |   6 +-
 .../java/org/apache/hadoop/utils/package-info.java |  22 ++++
 .../container/keyvalue/impl/BlockManagerImpl.java  |   4 +-
 .../replication/GrpcReplicationClient.java         |   2 +-
 .../hadoop/ozone/container/common/ScmTestMock.java |   4 +-
 .../container/common/TestDatanodeStateMachine.java |  12 +-
 .../container/common/impl/TestHddsDispatcher.java  |   3 +-
 .../common/report/TestReportPublisher.java         |   2 +-
 .../container/common/volume/TestHddsVolume.java    |  54 ++++----
 .../container/common/volume/TestVolumeSet.java     |   6 +-
 .../container/common/volume/package-info.java      |  22 ++++
 .../container/keyvalue/TestBlockManagerImpl.java   | 139 +++++++++------------
 .../container/keyvalue/TestChunkManagerImpl.java   |   3 +-
 .../keyvalue/TestKeyValueBlockIterator.java        |   4 +-
 .../container/keyvalue/TestKeyValueContainer.java  |  11 +-
 .../container/keyvalue/TestKeyValueHandler.java    |   7 +-
 .../container/keyvalue/TestTarContainerPacker.java |  11 +-
 .../ozone/container/keyvalue/package-info.java     |  22 ++++
 .../hadoop/hdds/server/events/EventQueue.java      |   7 +-
 .../hdds/server/events/TestEventWatcher.java       |  49 ++++----
 .../hadoop/hdds/server/events/package-info.java    |  22 ++++
 .../hdds/scm/block/PendingDeleteStatusList.java    |  10 +-
 .../hdds/scm/chillmode/ChillModePrecheck.java      |   1 +
 .../hdds/scm/container/ContainerReplica.java       |  16 ++-
 .../placement/algorithms/SCMCommonPolicy.java      |   6 +-
 .../algorithms/SCMContainerPlacementRandom.java    |   1 +
 .../placement/metrics/DatanodeMetric.java          |   3 +-
 .../container/placement/metrics/LongMetric.java    |   1 -
 .../container/placement/metrics/SCMNodeMetric.java |   4 +-
 .../container/placement/metrics/SCMNodeStat.java   |  10 +-
 .../replication/ReplicationActivityStatus.java     |   3 +-
 .../container/replication/ReplicationManager.java  |   2 +
 .../apache/hadoop/hdds/scm/node/CommandQueue.java  |   8 +-
 .../hadoop/hdds/scm/node/NodeStateManager.java     |   8 +-
 .../hdds/scm/node/states/Node2ContainerMap.java    |   2 +
 .../hadoop/hdds/scm/node/states/NodeStateMap.java  |   4 +-
 .../hdds/scm/pipeline/SCMPipelineManager.java      |   4 +-
 .../hdds/scm/server/SCMClientProtocolServer.java   |   3 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |   4 +-
 .../hadoop/hdds/scm/TestHddsServerUtils.java       |  19 +--
 .../hadoop/hdds/scm/node/TestNodeManager.java      |  12 +-
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   |  16 +--
 .../scm/node/states/TestNode2ContainerMap.java     |   6 +-
 .../container/placement/TestDatanodeMetrics.java   |  15 +--
 .../apache/hadoop/ozone/client/ObjectStore.java    |   2 +
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |   2 +
 .../hadoop/ozone/client/TestHddsClientUtils.java   |  42 ++++---
 .../hadoop/ozone/om/helpers/OmOzoneAclMap.java     |   1 +
 .../hadoop/ozone/web/response/BucketInfo.java      |   6 +-
 .../apache/hadoop/ozone/web/TestBucketInfo.java    |  25 ++--
 .../org/apache/hadoop/ozone/web/TestQuota.java     |  55 ++++----
 .../hdds/scm/pipeline/TestPipelineClose.java       |  27 ++--
 .../hadoop/hdds/scm/pipeline/package-info.java     |  22 ++++
 .../org/apache/hadoop/ozone/OzoneTestUtils.java    |  12 +-
 .../ozone/TestStorageContainerManagerHelper.java   |  10 +-
 .../rpc/TestCloseContainerHandlingByClient.java    |  46 ++++---
 .../java/org/apache/hadoop/ozone/package-info.java |  22 ++++
 .../apache/hadoop/ozone/web/TestOzoneVolumes.java  |   4 +
 .../hadoop/ozone/web/client/package-info.java      |  22 ++++
 .../org/apache/hadoop/ozone/web/package-info.java  |  22 ++++
 .../ozone/web/handlers/BucketProcessTemplate.java  |   4 +-
 .../ozone/web/interfaces/StorageHandler.java       |   1 +
 .../org/apache/hadoop/ozone/web/TestErrorCode.java |   6 +-
 .../org/apache/hadoop/ozone/web/package-info.java  |  22 ++++
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |   1 +
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |   3 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |   1 +
 .../hadoop/ozone/om/ServiceListJSONServlet.java    |   1 +
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  |  11 +-
 .../apache/hadoop/ozone/om/TestChunkStreams.java   |  39 +++---
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java |  19 +--
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |   3 +
 .../hadoop/fs/ozone/TestOzoneFileInterfaces.java   |   3 +-
 .../org/apache/hadoop/fs/ozone/package-info.java   |  22 ++++
 .../ozone/s3/header/AuthorizationHeaderV2.java     |   1 +
 .../ozone/s3/header/AuthorizationHeaderV4.java     |   1 +
 .../apache/hadoop/ozone/s3/header/Credential.java  |   1 +
 .../hadoop/ozone/client/ObjectStoreStub.java       |   2 +
 .../hadoop/ozone/s3/endpoint/TestBucketDelete.java |   2 +-
 .../TestMultiDeleteRequestUnmarshaller.java        |   6 +-
 .../hadoop/ozone/s3/endpoint/TestObjectGet.java    |   9 +-
 .../hadoop/ozone/s3/endpoint/TestObjectHead.java   |  10 +-
 .../hadoop/ozone/freon/RandomKeyGenerator.java     |   2 +-
 .../freon/TestFreonWithDatanodeFastRestart.java    |   4 +-
 .../apache/hadoop/ozone/freon/package-info.java    |  22 ++++
 .../org/apache/hadoop/ozone/om/TestOmSQLCli.java   |   8 +-
 .../org/apache/hadoop/ozone/om/package-info.java   |  22 ++++
 100 files changed, 812 insertions(+), 456 deletions(-)

commit 4ec004bc0112fba68ff46cff3f8823fdaec7d827
Author: Giovanni Matteo Fumarola <gifuma@apache.org>
Date:   Thu Nov 15 14:59:31 2018 -0800

    HDDS-842. [JDK11] Fix Javadoc errors in hadoop-hdds-common module. Contributed by Dinesh Chitlangia.

 .../main/java/org/apache/hadoop/hdds/scm/client/ScmClient.java    | 2 +-
 .../org/apache/hadoop/hdds/scm/protocol/LocatedContainer.java     | 2 +-
 .../java/org/apache/hadoop/hdds/scm/protocol/ScmLocatedBlock.java | 2 +-
 .../hdds/scm/protocol/StorageContainerLocationProtocol.java       | 2 +-
 .../apache/hadoop/hdds/scm/storage/ContainerProtocolCalls.java    | 8 +++++---
 .../src/main/java/org/apache/hadoop/ozone/audit/Auditable.java    | 2 +-
 6 files changed, 10 insertions(+), 8 deletions(-)

commit e66c36e22a8ec4a01020ea3ba4ca2238576fe56c
Author: Giovanni Matteo Fumarola <gifuma@apache.org>
Date:   Thu Nov 15 14:54:41 2018 -0800

    HDDS-843. [JDK11] Fix Javadoc errors in hadoop-hdds-server-scm module. Contributed by Dinesh Chitlangia.

 .../hadoop/hdds/scm/exceptions/package-info.java   | 29 +++++++++++-----------
 .../apache/hadoop/hdds/scm/node/NodeManager.java   | 15 ++++++-----
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  6 ++---
 .../org/apache/hadoop/hdds/scm/HddsTestUtils.java  |  2 +-
 4 files changed, 25 insertions(+), 27 deletions(-)

commit f3877897cda132712fac3fa2ee76c34c887c3ffa
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Nov 15 14:21:42 2018 -0800

    HDDS-821. Handle empty x-amz-storage-class header in Ozone S3 gateway. Contributed by Elek Marton.

 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   |  2 +-
 .../{TestPutObject.java => TestObjectPut.java}     | 25 +++++++++++++++++++++-
 2 files changed, 25 insertions(+), 2 deletions(-)

commit 804eed8eb5f7466f572fa51d0cabba8c7731f31a
Author: Márton Elek <elek@apache.org>
Date:   Thu Nov 15 15:17:18 2018 +0100

    HDDS-223. Create acceptance test for using datanode plugin. Contributed by Sandeep Nemuri.

 hadoop-ozone/dist/src/main/compose/ozone-hdfs/.env      |  2 +-
 .../src/main/compose/ozone-hdfs/docker-compose.yaml     | 13 +++++++++++--
 .../dist/src/main/compose/ozone-hdfs/docker-config      |  4 ++++
 hadoop-ozone/dist/src/main/smoketest/.env               | 17 +++++++++++++++++
 hadoop-ozone/dist/src/main/smoketest/basic/basic.robot  |  2 +-
 hadoop-ozone/dist/src/main/smoketest/test.sh            |  4 +++-
 6 files changed, 37 insertions(+), 5 deletions(-)

commit 2b8b77d341b1cda94e7430058eecd75275f8530e
Author: Márton Elek <elek@apache.org>
Date:   Thu Nov 15 14:23:24 2018 +0100

    HDDS-827. TestStorageContainerManagerHttpServer should use dynamic port. Contributed by Sandeep Nemuri.

 .../apache/hadoop/hdds/scm/TestStorageContainerManagerHttpServer.java    | 1 +
 1 file changed, 1 insertion(+)

commit 137f70fe96195ddc3e89b6f3713dd2dc2a884330
Author: Márton Elek <elek@apache.org>
Date:   Thu Nov 15 14:04:55 2018 +0100

    HDDS-828. Fix deprecation log generated by getting value of the setting ozone.scm.heartbeat.rpc-timeout. Contributed by Yiqun Lin.

 .../src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java       | 4 ++--
 hadoop-hdds/common/src/main/resources/ozone-default.xml               | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 3934b6115f3ce6f0d6156b301f42b833a61ffefa
Author: Márton Elek <elek@apache.org>
Date:   Thu Nov 15 13:51:41 2018 +0100

    HDDS-528. add cli command to checkChill mode status and exit chill mode. Contributed by chencan.

 .../hdds/scm/client/ContainerOperationClient.java  | 20 +++++++
 .../apache/hadoop/hdds/scm/client/ScmClient.java   | 16 ++++++
 .../hdds/scm/cli/ChillModeCheckSubcommand.java     | 61 ++++++++++++++++++++++
 .../hadoop/hdds/scm/cli/ChillModeCommands.java     | 60 +++++++++++++++++++++
 .../hdds/scm/cli/ChillModeExitSubcommand.java      | 57 ++++++++++++++++++++
 .../org/apache/hadoop/hdds/scm/cli/SCMCLI.java     |  1 +
 6 files changed, 215 insertions(+)

commit 54df7a98bbfe6495dc181bff89936c7b4bd366d0
Author: Márton Elek <elek@apache.org>
Date:   Thu Nov 15 12:11:05 2018 +0100

    HDDS-658. Implement s3 bucket list backend call and use it from rest endpoint. Contributed by Bharat Viswanadham.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   2 +
 .../apache/hadoop/ozone/client/ObjectStore.java    | 113 +++++++++++++++++++--
 .../ozone/client/protocol/ClientProtocol.java      |  16 +++
 .../hadoop/ozone/client/rest/RestClient.java       |   8 ++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  19 ++++
 .../org/apache/hadoop/ozone/audit/OMAction.java    |   3 +-
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  23 +++++
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  38 +++++++
 .../src/main/proto/OzoneManagerProtocol.proto      |  15 +++
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  34 +++++++
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |  23 +++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  30 ++++++
 .../apache/hadoop/ozone/om/S3BucketManager.java    |   6 ++
 .../hadoop/ozone/om/S3BucketManagerImpl.java       |  10 +-
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  24 +++++
 .../hadoop/ozone/om/TestS3BucketManager.java       |  25 +++++
 .../hadoop/ozone/s3/endpoint/EndpointBase.java     |  32 ++++++
 .../hadoop/ozone/s3/endpoint/RootEndpoint.java     |  24 ++---
 .../hadoop/ozone/client/ObjectStoreStub.java       |  72 ++++++++++++-
 .../hadoop/ozone/s3/endpoint/TestObjectGet.java    |   1 -
 .../hadoop/ozone/s3/endpoint/TestRootList.java     |  11 +-
 21 files changed, 489 insertions(+), 40 deletions(-)

commit ec65ce2ecbd2dd55bb3d3162677bd6469324a36a
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Nov 12 15:21:31 2018 -0800

    HDDS-832. Docs folder is missing from the Ozone distribution package. Contributed by Elek, Marton.

 .gitignore                                            |   2 +-
 {hadoop-ozone => hadoop-hdds}/docs/README.md          |   4 ++--
 .../docs/archetypes/default.md                        |   0
 {hadoop-ozone => hadoop-hdds}/docs/config.yaml        |   0
 .../docs/content/BucketCommands.md                    |   0
 .../docs/content/BuildingSources.md                   |   0
 .../docs/content/CommandShell.md                      |   1 -
 .../docs/content/Concepts.md                          |   0
 {hadoop-ozone => hadoop-hdds}/docs/content/Dozone.md  |   0
 {hadoop-ozone => hadoop-hdds}/docs/content/Freon.md   |   0
 {hadoop-ozone => hadoop-hdds}/docs/content/Hdds.md    |   0
 {hadoop-ozone => hadoop-hdds}/docs/content/JavaApi.md |   0
 .../docs/content/KeyCommands.md                       |   0
 {hadoop-ozone => hadoop-hdds}/docs/content/OzoneFS.md |   0
 .../docs/content/OzoneManager.md                      |   0
 .../docs/content/RealCluster.md                       |   0
 {hadoop-ozone => hadoop-hdds}/docs/content/Rest.md    |   0
 .../docs/content/RunningViaDocker.md                  |   0
 .../docs/content/RunningWithHDFS.md                   |   0
 {hadoop-ozone => hadoop-hdds}/docs/content/S3.md      |   0
 {hadoop-ozone => hadoop-hdds}/docs/content/SCMCLI.md  |   0
 .../docs/content/Settings.md                          |   0
 .../docs/content/VolumeCommands.md                    |   0
 {hadoop-ozone => hadoop-hdds}/docs/content/_index.md  |   1 -
 .../docs/dev-support/bin/generate-site.sh             |   2 +-
 {hadoop-ozone => hadoop-hdds}/docs/pom.xml            |  18 +++++++++++-------
 {hadoop-ozone => hadoop-hdds}/docs/static/NOTES.md    |   0
 .../docs/static/OzoneOverview.png                     | Bin
 .../docs/static/OzoneOverview.svg                     |   0
 .../docs/static/SCMBlockDiagram.png                   | Bin
 .../docs/static/ozone-logo.png                        | Bin
 .../docs/themes/ozonedoc/layouts/_default/single.html |   0
 .../docs/themes/ozonedoc/layouts/index.html           |   0
 .../docs/themes/ozonedoc/layouts/partials/footer.html |   0
 .../docs/themes/ozonedoc/layouts/partials/header.html |   0
 .../docs/themes/ozonedoc/layouts/partials/navbar.html |   0
 .../themes/ozonedoc/layouts/partials/sidebar.html     |   0
 .../ozonedoc/static/css/bootstrap-theme.min.css       |   0
 .../ozonedoc/static/css/bootstrap-theme.min.css.map   |   0
 .../docs/themes/ozonedoc/static/css/bootstrap.min.css |   0
 .../themes/ozonedoc/static/css/bootstrap.min.css.map  |   0
 .../docs/themes/ozonedoc/static/css/ozonedoc.css      |   0
 .../static/fonts/glyphicons-halflings-regular.eot     | Bin
 .../static/fonts/glyphicons-halflings-regular.svg     |   2 +-
 .../static/fonts/glyphicons-halflings-regular.ttf     | Bin
 .../static/fonts/glyphicons-halflings-regular.woff    | Bin
 .../static/fonts/glyphicons-halflings-regular.woff2   | Bin
 .../docs/themes/ozonedoc/static/js/bootstrap.min.js   |   0
 .../docs/themes/ozonedoc/static/js/jquery.min.js      |   0
 .../docs/themes/ozonedoc/static/js/ozonedoc.js        |   0
 .../docs/themes/ozonedoc/theme.toml                   |   0
 hadoop-hdds/pom.xml                                   |   7 +++++++
 hadoop-hdds/server-scm/pom.xml                        |  12 ++++++++++++
 .../dist/dev-support/bin/dist-layout-stitching        |   3 +--
 hadoop-ozone/dist/pom.xml                             |   4 ++++
 hadoop-ozone/ozone-manager/pom.xml                    |  11 +++++++++++
 hadoop-ozone/pom.xml                                  |   6 +++++-
 57 files changed, 56 insertions(+), 17 deletions(-)

commit 975200057339672a8646c1d5c3c55506f0797d0f
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed Nov 14 16:12:06 2018 -0800

    HDDS-819. Match OzoneFileSystem behavior with S3AFileSystem. Contributed by Hanisha Koneru.

 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    | 277 ++++++++++++++++++---
 .../hadoop/fs/ozone/TestOzoneFileSystem.java       | 174 ++++++++++++-
 2 files changed, 411 insertions(+), 40 deletions(-)

commit 5aecd09b9da18c5b9f64d42e64b0000d3e01b533
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Nov 14 20:05:56 2018 +0530

    HDDS-774. Remove OpenContainerBlockMap from datanode. Contributed by Shashikant Banerjee.

 .../ozone/container/keyvalue/KeyValueHandler.java  |  54 +----
 .../common/impl/TestCloseContainerHandler.java     | 261 ---------------------
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  |  71 ------
 3 files changed, 2 insertions(+), 384 deletions(-)

commit 817478b7f3145828a92e6d6890b8f7a779fc99bd
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Nov 14 15:53:22 2018 +0530

    HDDS-834. Datanode goes OOM based because of segment size. Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  2 +-
 .../common/src/main/resources/ozone-default.xml    |  4 ++--
 .../server/ratis/ContainerStateMachine.java        | 27 +++++++++++++++++-----
 3 files changed, 24 insertions(+), 9 deletions(-)

commit 2ad51b49d2a3d887b1d01185d01ff51fc45a7189
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Nov 13 23:39:14 2018 +0530

    HDDS-675. Add blocking buffer and use watchApi for flush/close in OzoneClient. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  28 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  65 ++-
 .../hadoop/hdds/scm/storage/ChunkOutputStream.java | 448 ++++++++++++++++-----
 .../hadoop/hdds/scm/XceiverClientAsyncReply.java   |  98 +++++
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |  12 +-
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  57 ++-
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  24 +-
 .../common/src/main/resources/ozone-default.xml    |  26 +-
 .../container/keyvalue/impl/BlockManagerImpl.java  |   3 +
 .../hadoop/ozone/client/OzoneClientUtils.java      |  27 --
 .../ozone/client/io/ChunkGroupOutputStream.java    | 337 +++++++++-------
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  27 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |  45 ++-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  19 +
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |   2 +-
 .../rpc/TestCloseContainerHandlingByClient.java    | 252 +++---------
 .../rpc/TestContainerStateMachineFailures.java     |  20 +-
 .../client/rpc/TestFailureHandlingByClient.java    | 213 ++++++++++
 .../ozone/container/ContainerTestHelper.java       |  34 ++
 .../container/ozoneimpl/TestOzoneContainer.java    |   2 +-
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java |   3 +-
 .../ozone/web/TestOzoneRestWithMiniCluster.java    |   2 +-
 .../web/storage/DistributedStorageHandler.java     |  42 +-
 .../hadoop/ozone/freon/TestDataValidate.java       |   6 +
 .../hadoop/ozone/freon/TestRandomKeyGenerator.java |   6 +
 25 files changed, 1248 insertions(+), 550 deletions(-)

commit 3e524d8a7f7bbe17ac1e53eeae3ed64f274b55ae
Author: Yiqun Lin <yqlin@apache.org>
Date:   Tue Nov 13 10:38:27 2018 +0800

    HDDS-831. TestOzoneShell in integration-test is flaky. Contributed by Nanda kumar.

 .../src/test/java/org/apache/hadoop/ozone/ozShell/TestOzoneShell.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cafd70061eb72dc015be9192d228058d9573f594
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Mon Nov 12 14:08:39 2018 -0800

    HDDS-709. Modify Close Container handling sequence on datanodes. Contributed by Shashikant Banerjee.

 .../common/helpers/ContainerNotOpenException.java  |  36 +++++++
 .../helpers/InvalidContainerStateException.java    |  35 +++++++
 .../src/main/proto/DatanodeContainerProtocol.proto |   1 +
 .../container/common/impl/HddsDispatcher.java      | 106 ++++++++++++++++++---
 .../common/interfaces/ContainerDispatcher.java     |  10 ++
 .../CloseContainerCommandHandler.java              |  28 ++++--
 .../server/ratis/ContainerStateMachine.java        |  11 +++
 .../ozone/container/keyvalue/KeyValueHandler.java  |  33 ++++---
 .../ozone/client/io/ChunkGroupOutputStream.java    |  14 ++-
 .../rpc/TestCloseContainerHandlingByClient.java    |   2 +-
 .../rpc/TestContainerStateMachineFailures.java     |   6 +-
 .../transport/server/ratis/TestCSMMetrics.java     |   6 ++
 .../container/server/TestContainerServer.java      |   6 ++
 13 files changed, 255 insertions(+), 39 deletions(-)

commit dcba49fa44d5d3d9ecc423241f3618244ca0c8d1
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Nov 12 23:32:31 2018 +0530

    HDDS-576. Move ContainerWithPipeline creation to RPC endpoint.
    Contributed by Nanda kumar.

 .../hadoop/hdds/scm/container/ContainerID.java     |   2 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |  24 ++---
 .../CloseContainerCommandHandler.java              |   2 +-
 .../protocol/commands/CommandForDatanode.java      |   1 +
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  77 +++++++-------
 .../block/DatanodeDeletedBlockTransactions.java    |  40 ++++---
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |  24 +++--
 .../scm/container/CloseContainerEventHandler.java  | 116 ++++++++++-----------
 .../hdds/scm/container/ContainerManager.java       |  20 +---
 .../hdds/scm/container/ContainerStateManager.java  |   4 +-
 .../hdds/scm/container/SCMContainerManager.java    |  63 +----------
 .../hdds/scm/server/SCMClientProtocolServer.java   |  32 +++++-
 .../hdds/scm/server/StorageContainerManager.java   |   6 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |   2 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    |   2 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  55 ++++++----
 .../container/TestCloseContainerEventHandler.java  |  35 +++----
 .../scm/container/TestContainerReportHandler.java  |   6 +-
 .../scm/container/TestSCMContainerManager.java     |  65 +++++-------
 .../hdds/scm/node/TestContainerPlacement.java      |   7 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |   6 +-
 .../hadoop/hdds/scm/pipeline/TestNodeFailure.java  |  37 ++++---
 .../hdds/scm/pipeline/TestPipelineClose.java       |  10 +-
 .../hadoop/hdds/scm/pipeline/TestSCMRestart.java   |  19 ++--
 .../org/apache/hadoop/ozone/OzoneTestUtils.java    |   5 +-
 .../ozone/client/rest/TestOzoneRestClient.java     |   7 +-
 .../rpc/TestCloseContainerHandlingByClient.java    |  31 ++++--
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  21 ++--
 .../TestCloseContainerByPipeline.java              |  19 ++--
 .../commandhandler/TestCloseContainerHandler.java  |  19 ++--
 .../freon/TestFreonWithDatanodeFastRestart.java    |   8 ++
 .../ozone/freon/TestFreonWithDatanodeRestart.java  |   5 +
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |   2 +-
 33 files changed, 381 insertions(+), 391 deletions(-)

commit 21f9b148a6bccd6f7d47bc93395fc7f6cf84d87c
Author: Márton Elek <elek@apache.org>
Date:   Mon Nov 12 10:54:41 2018 +0100

    HDDS-767. OM should not search for STDOUT root logger for audit logging. Contributed by Dinesh Chitlangia.

 hadoop-ozone/dist/src/main/conf/om-audit-log4j2.properties | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 279fa0c619cbadb59071ec6bd3ce316fe6d723e2
Author: Tsz Wo Nicholas Sze <szetszwo@apache.org>
Date:   Fri Nov 9 18:35:40 2018 -0800

    HDDS-826. Update Ratis to 0.3.0-6f3419a-SNAPSHOT.

 hadoop-hdds/pom.xml  | 2 +-
 hadoop-ozone/pom.xml | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 4f6f7a2820c9d9b58d21e32bc002b242b63c4b8a
Author: Nanda kumar <nanda@apache.org>
Date:   Sat Nov 10 00:07:26 2018 +0530

    HDDS-733. Create container if not exist, as part of chunk write.
    Contributed by Lokesh Jain.

 .../hdds/scm/client/ContainerOperationClient.java  | 10 ---
 .../hadoop/hdds/scm/container/ContainerInfo.java   | 10 +--
 .../container/common/helpers/AllocatedBlock.java   | 19 +----
 ...lockLocationProtocolClientSideTranslatorPB.java |  3 +-
 ...lockLocationProtocolServerSideTranslatorPB.java |  1 -
 .../src/main/proto/ScmBlockLocationProtocol.proto  |  3 +-
 .../container/common/impl/HddsDispatcher.java      | 73 +++++++++++-----
 .../CloseContainerCommandHandler.java              | 21 +++--
 .../container/common/impl/TestHddsDispatcher.java  | 60 +++++++++++++
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 99 ++++++----------------
 .../hdds/scm/chillmode/ContainerChillModeRule.java |  9 +-
 .../scm/container/CloseContainerEventHandler.java  | 13 ---
 .../hdds/scm/container/ContainerStateManager.java  | 46 +++-------
 .../hdds/scm/container/SCMContainerManager.java    | 85 ++++++-------------
 .../hdds/scm/server/SCMClientProtocolServer.java   | 28 ++----
 .../scm/chillmode/TestSCMChillModeManager.java     | 14 +--
 .../container/TestCloseContainerEventHandler.java  | 15 ----
 .../scm/container/TestSCMContainerManager.java     | 28 ------
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  | 20 -----
 .../ozone/client/io/ChunkGroupOutputStream.java    | 33 +-------
 .../hadoop/ozone/om/helpers/OmKeyLocationInfo.java | 21 +----
 .../src/main/proto/OzoneManagerProtocol.proto      |  1 -
 .../TestContainerStateManagerIntegration.java      | 83 +++---------------
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |  4 -
 .../hdds/scm/pipeline/TestPipelineClose.java       |  8 --
 .../rpc/TestCloseContainerHandlingByClient.java    | 52 +++++++++---
 .../rpc/TestContainerStateMachineFailures.java     |  6 +-
 .../ozone/container/ContainerTestHelper.java       | 16 ++++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  2 -
 .../ozone/om/ScmBlockLocationTestIngClient.java    |  3 +-
 30 files changed, 294 insertions(+), 492 deletions(-)

commit 920b9aa2fddb0771559f674ebb8d96ab4120c0fc
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Nov 8 21:28:04 2018 -0800

    HDDS-823. OzoneRestClient is failing with NPE on getKeyDetails call. Contributed by Bharat Viswanadham.

 .../apache/hadoop/ozone/web/storage/DistributedStorageHandler.java   | 5 +++++
 1 file changed, 5 insertions(+)

commit 7e3ee2bc7566670e2ebd4ed87a019d4ceb5e8fcd
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Nov 8 17:52:09 2018 -0800

    HDDS-812. TestEndPoint#testCheckVersionResponse is failing. Contributed by Hanisha Koneru.

 .../test/java/org/apache/hadoop/ozone/container/common/TestEndPoint.java | 1 +
 1 file changed, 1 insertion(+)

commit 708c6a3b718408fcafc2cd72e0532faf9d9f843e
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Fri Nov 9 00:05:45 2018 +0530

    HDDS-806. Update Ratis to latest snapshot version in ozone. Contributed by Tsz Wo Nicholas Sze and Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  8 ++++
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   | 10 +++++
 .../common/src/main/resources/ozone-default.xml    | 15 +++++++
 .../server/ratis/ContainerStateMachine.java        | 48 ++++++++++------------
 .../transport/server/ratis/XceiverServerRatis.java | 11 +++++
 hadoop-hdds/pom.xml                                |  2 +-
 hadoop-ozone/pom.xml                               |  2 +-
 7 files changed, 67 insertions(+), 29 deletions(-)

commit 3c1b73530015f2af1574dac0ec6e5017b81a8331
Author: Yiqun Lin <yqlin@apache.org>
Date:   Thu Nov 8 23:41:43 2018 +0800

    HDDS-802. Container State Manager should get open pipelines for allocating container. Contributed by Lokesh Jain.

 .../hdds/scm/container/ContainerStateManager.java  |  4 +-
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  |  3 ++
 .../hdds/scm/pipeline/PipelineStateManager.java    |  5 ++
 .../hadoop/hdds/scm/pipeline/PipelineStateMap.java | 22 ++++++++
 .../hdds/scm/pipeline/SCMPipelineManager.java      | 11 ++++
 .../scm/pipeline/TestPipelineStateManager.java     | 61 ++++++++++++++++++++--
 6 files changed, 100 insertions(+), 6 deletions(-)

commit 001da1391b67d9d9510a0464b95d89ec53661f52
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Nov 8 18:33:38 2018 +0530

    HDDS-737. Introduce Incremental Container Report.
    Contributed by Nanda kumar.

 .../hadoop/hdds/scm/container/ContainerInfo.java   |   8 +
 .../common/statemachine/DatanodeStateMachine.java  |  17 +-
 .../common/statemachine/StateContext.java          |  13 +-
 .../CloseContainerCommandHandler.java              |  73 +++---
 .../states/endpoint/HeartbeatEndpointTask.java     |  12 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   2 +-
 .../scm/command/CommandStatusReportHandler.java    |   4 -
 .../scm/container/CloseContainerEventHandler.java  |  27 --
 .../hdds/scm/container/CloseContainerWatcher.java  | 101 -------
 .../hdds/scm/container/ContainerManager.java       |  11 -
 .../hdds/scm/container/ContainerReplica.java       |  30 ++-
 .../hdds/scm/container/ContainerReportHandler.java | 202 ++++++++++----
 .../IncrementalContainerReportHandler.java         |  98 +++++++
 .../hdds/scm/container/SCMContainerManager.java    | 107 --------
 .../scm/container/states/ContainerStateMap.java    |   7 -
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  34 +--
 .../hadoop/hdds/scm/node/DeadNodeHandler.java      |  37 ++-
 .../hadoop/hdds/scm/node/NewNodeHandler.java       |  16 +-
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |  50 +---
 .../hadoop/hdds/scm/node/NodeReportHandler.java    |   2 +-
 .../hadoop/hdds/scm/node/NodeStateManager.java     |  69 +----
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  66 ++---
 .../hadoop/hdds/scm/node/StaleNodeHandler.java     |   2 +-
 .../hadoop/hdds/scm/node/states/NodeStateMap.java  |  67 +++--
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java |  17 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |   6 +-
 .../hdds/scm/server/StorageContainerManager.java   |  21 +-
 .../command/TestCommandStatusReportHandler.java    |  14 -
 .../hadoop/hdds/scm/container/MockNodeManager.java |  66 ++---
 .../scm/container/TestContainerReportHandler.java  |  15 +-
 .../scm/container/TestContainerStateManager.java   |   3 +
 .../scm/container/TestSCMContainerManager.java     | 107 +-------
 .../replication/TestReplicationManager.java        |  12 +-
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  |  24 +-
 .../ozone/container/TestCloseContainerWatcher.java | 289 ---------------------
 .../ozone/container/common/TestEndPoint.java       |   6 +-
 .../testutils/ReplicationNodeManagerMock.java      |  55 +---
 .../TestContainerStateManagerIntegration.java      |  11 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |   4 +-
 .../hdds/scm/pipeline/TestPipelineClose.java       |   4 +-
 .../commandhandler/TestBlockDeletion.java          |   6 +-
 41 files changed, 558 insertions(+), 1157 deletions(-)

commit b8e00e725921108b4e93995d236c0544fa4987c2
Author: Yiqun Lin <yqlin@apache.org>
Date:   Wed Nov 7 13:53:28 2018 +0800

    HDDS-809. Refactor SCMChillModeManager.

 .../java/org/apache/hadoop/hdds/scm/ScmUtils.java  |   2 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |   2 +-
 .../hdds/scm/chillmode/ChillModeExitRule.java      |  32 +++
 .../{server => chillmode}/ChillModePrecheck.java   |   3 +-
 .../hdds/scm/chillmode/ChillModeRestrictedOps.java |  41 +++
 .../hdds/scm/chillmode/ContainerChillModeRule.java | 112 ++++++++
 .../hdds/scm/chillmode/DataNodeChillModeRule.java  |  83 ++++++
 .../hdds/scm/{server => chillmode}/Precheck.java   |   2 +-
 .../hdds/scm/chillmode/SCMChillModeManager.java    | 153 ++++++++++
 .../hadoop/hdds/scm/chillmode/package-info.java    |  18 ++
 .../hdds/scm/server/SCMChillModeManager.java       | 319 ---------------------
 .../hdds/scm/server/SCMClientProtocolServer.java   |   1 +
 .../hdds/scm/server/StorageContainerManager.java   |   1 +
 .../TestSCMChillModeManager.java                   |   2 +-
 .../apache/hadoop/ozone/om/TestScmChillMode.java   |   2 +-
 15 files changed, 447 insertions(+), 326 deletions(-)

commit 08df903b1a516dd6fe8862723d194656b83d2779
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Nov 6 07:59:40 2018 -0800

    HDDS-810. Move the "\r\n" at the chunk end in TestSignedChunksInputStream#singlechunkwithoutend.
    Contributed by Chencan.

 .../java/org/apache/hadoop/ozone/s3/TestSignedChunksInputStream.java    | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2c3c2e8f3acebdbb8fdd02d91416dfb8eeb7c7e4
Author: Márton Elek <elek@apache.org>
Date:   Tue Nov 6 18:19:40 2018 +0100

    HDDS-798. Storage-class is showing incorrectly. Contributed by Bharat Viswanadham.

 .../org/apache/hadoop/ozone/client/OzoneKey.java    | 16 +++++++++++++++-
 .../apache/hadoop/ozone/client/OzoneKeyDetails.java |  9 ++++++---
 .../apache/hadoop/ozone/client/rest/RestClient.java |  6 ++++--
 .../apache/hadoop/ozone/client/rpc/RpcClient.java   | 14 ++++++--------
 .../hadoop/ozone/client/rest/response/KeyInfo.java  | 20 ++++++++++++++++++++
 .../apache/hadoop/ozone/web/response/KeyInfo.java   | 21 +++++++++++++++++++++
 .../src/main/smoketest/s3/objectmultidelete.robot   |  4 ++++
 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java    |  9 ++++++++-
 .../apache/hadoop/ozone/client/OzoneBucketStub.java |  2 +-
 9 files changed, 85 insertions(+), 16 deletions(-)

commit c9c697a2b4d9323fecaa7626db47aa26d539a8b0
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Tue Nov 6 21:26:43 2018 +0900

    HDDS-811. [JDK 11] Fix compilation failures with jdk 11. Contributed by Lokesh Jain.

 hadoop-hdds/common/pom.xml     | 6 ++++++
 hadoop-ozone/s3gateway/pom.xml | 4 ++++
 2 files changed, 10 insertions(+)

commit 006d5d3707a0968c739da620df824f15cf3dd1cf
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Nov 6 00:20:57 2018 +0530

    HDDS-794. addendum patch to fix compilation failure. Contributed by Shashikant Banerjee.

 .../org/apache/hadoop/ozone/container/keyvalue/helpers/ChunkUtils.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 59b3b54928e52bb3443cf93eda7a53204bd82bf6
Author: Arpit Agarwal <arp@apache.org>
Date:   Mon Nov 5 10:10:10 2018 -0800

    HDDS-794. Add configs to set StateMachineData write timeout in ContainerStateMachine. Contributed by Shashikant Banerjee.

 .../java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java |  6 ++++++
 .../java/org/apache/hadoop/ozone/OzoneConfigKeys.java  |  9 +++++++++
 .../common/src/main/resources/ozone-default.xml        |  7 +++++++
 .../transport/server/ratis/ContainerStateMachine.java  | 18 ++++++++++++++++--
 .../transport/server/ratis/XceiverServerRatis.java     | 14 ++++++++++++++
 .../ozone/container/keyvalue/helpers/ChunkUtils.java   |  2 ++
 .../container/keyvalue/impl/ChunkManagerImpl.java      |  3 ++-
 7 files changed, 56 insertions(+), 3 deletions(-)

commit 5956c7a9aeab9babb244bbbe2bdc367b70d660dd
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Mon Nov 5 23:43:22 2018 +0530

    HDDS-799. Avoid ByteString to byte array conversion cost by using ByteBuffer in Datanode. Contributed by Mukul Kumar Singh.

 .../ozone/container/keyvalue/KeyValueHandler.java  | 11 ++++---
 .../container/keyvalue/helpers/ChunkUtils.java     | 28 ++++++++--------
 .../container/keyvalue/impl/ChunkManagerImpl.java  |  2 +-
 .../keyvalue/interfaces/ChunkManager.java          |  3 +-
 .../container/keyvalue/TestChunkManagerImpl.java   | 37 +++++++++++-----------
 .../common/impl/TestContainerPersistence.java      | 28 ++++++++++------
 6 files changed, 62 insertions(+), 47 deletions(-)

commit b88bc62049288f7c74ed156914401617157aed09
Author: Arpit Agarwal <arp@apache.org>
Date:   Mon Nov 5 09:40:00 2018 -0800

    HDDS-797. If DN is started before SCM, it does not register. Contributed by Hanisha Koneru.

 .../states/endpoint/VersionEndpointTask.java       | 79 ++++++++++++----------
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  | 52 +++++++++++++-
 2 files changed, 94 insertions(+), 37 deletions(-)

commit 3fccfe1cdd34ca1c108a341d67d1815c44247ad7
Author: Yiqun Lin <yqlin@apache.org>
Date:   Mon Nov 5 17:31:06 2018 +0800

    HDDS-796. Fix failed test TestStorageContainerManagerHttpServer#testHttpPolicy.

 .../main/java/org/apache/hadoop/hdds/server/BaseHttpServer.java    | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

commit 2c055027794e0844137ebc47a6f8cd8239d6d85c
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Nov 2 08:00:18 2018 -0700

    HDDS-788. Change title page of bucket browser in S3gateway. Contributed by Bharat Viswanadham.

 hadoop-ozone/s3gateway/src/main/resources/browser.html   |   4 ++--
 .../src/main/resources/webapps/s3gateway/WEB-INF/web.xml |   4 ++++
 .../src/main/resources/webapps/static/images/ozone.ico   | Bin 0 -> 1150 bytes
 3 files changed, 6 insertions(+), 2 deletions(-)

commit 1a24b57001aca8aa657a3db5cf747873be2b0c0b
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri Nov 2 10:50:32 2018 +0800

    HDDS-751. Replace usage of Guava Optional with Java Optional.

 .../java/org/apache/hadoop/hdds/HddsUtils.java     | 29 ++++++++++------------
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java | 17 +++++++------
 .../apache/hadoop/hdds/server/BaseHttpServer.java  |  9 ++++---
 .../main/java/org/apache/hadoop/ozone/OmUtils.java |  8 +++---
 4 files changed, 32 insertions(+), 31 deletions(-)

commit 3403d1fc24cedb887e1f8579dfdfd46e13cdf79e
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Nov 1 15:43:48 2018 +0530

    HDDS-771. ChunkGroupOutputStream stream entries need to be properly updated on closed container exception. Contributed by Lokesh Jain.

 .../ozone/client/io/ChunkGroupOutputStream.java    |  6 ++-
 .../rpc/TestCloseContainerHandlingByClient.java    | 60 ++++++++++++++++++++++
 2 files changed, 65 insertions(+), 1 deletion(-)

commit df42db89259b89eae533b6581159e23b62bf62c9
Author: Yiqun Lin <yqlin@apache.org>
Date:   Thu Nov 1 14:10:17 2018 +0800

    HDDS-786. Fix the findbugs for SCMClientProtocolServer#getContainerWithPipeline.

 .../java/org/apache/hadoop/hdds/scm/server/SCMClientProtocolServer.java  | 1 -
 1 file changed, 1 deletion(-)

commit f3f3815a39e86e81a44390bdaf7432b2a05673f9
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Thu Nov 1 10:21:25 2018 +0530

    HDDS-697. update and validate the BCSID for PutSmallFile/GetSmallFile command. Contributed by Shashikant Banerjee.

 .../hdds/scm/storage/ContainerProtocolCalls.java   |  8 +++-
 .../src/main/proto/DatanodeContainerProtocol.proto |  2 +-
 .../server/ratis/ContainerStateMachine.java        | 24 +++++++---
 .../ozone/container/keyvalue/KeyValueHandler.java  |  2 -
 .../container/keyvalue/helpers/BlockUtils.java     |  2 +-
 .../container/keyvalue/helpers/SmallFileUtils.java |  7 +++
 .../rpc/TestContainerStateMachineFailures.java     | 21 +--------
 .../hadoop/ozone/scm/TestContainerSmallFile.java   | 51 ++++++++++++++++++++++
 8 files changed, 85 insertions(+), 32 deletions(-)

commit dddabdf1981a2f924578707680fbfc765e98a993
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Oct 31 19:11:12 2018 -0700

    HDDS-777. Fix missing jenkins issue in s3gateway module. Contributed by Bharat Viswanadham.

 hadoop-ozone/s3gateway/pom.xml                       |  2 +-
 .../org/apache/hadoop/ozone/s3/util/S3Consts.java    | 18 ++++++++++++++++++
 .../org/apache/hadoop/ozone/s3/util/S3utils.java     | 20 +++++++++++++++++++-
 3 files changed, 38 insertions(+), 2 deletions(-)

commit f5fcb40b5e99a0f5bbe291077eb54bd9f8149b81
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Oct 31 11:48:23 2018 -0700

    HDDS-677. Create documentation for s3 gateway to the docs. Contributed by Elek Marton.

 hadoop-ozone/docs/content/S3.md | 130 ++++++++++++++++++++++++++++++++++++++++
 1 file changed, 130 insertions(+)

commit 49c2b5d01bc2df05597dd86dab2862ad3deb2cbb
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed Oct 31 11:23:15 2018 -0700

    HDDS-759. Create config settings for SCM and OM DB directories. Contributed by Arpit Agarwal.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  7 ++
 .../java/org/apache/hadoop/hdds/HddsUtils.java     |  2 +-
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  5 ++
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  3 -
 .../common/src/main/resources/ozone-default.xml    | 45 ++++++++---
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java | 16 ++--
 .../ozone/container/common/SCMTestUtils.java       |  3 +-
 .../container/common/TestDatanodeStateMachine.java |  3 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |  4 +-
 .../org/apache/hadoop/hdds/server/ServerUtils.java | 49 ++++++++++--
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java | 10 +--
 .../hdds/scm/container/SCMContainerManager.java    |  4 +-
 .../hdds/scm/pipeline/SCMPipelineManager.java      |  6 +-
 .../apache/hadoop/hdds/scm/server/SCMStorage.java  |  4 +-
 .../hadoop/hdds/scm/TestHddsServerUtils.java       | 50 ++++++++++++
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  4 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  4 +-
 .../container/TestCloseContainerEventHandler.java  |  4 +-
 .../scm/container/TestContainerReportHandler.java  |  4 +-
 .../scm/container/TestSCMContainerManager.java     |  4 +-
 .../hdds/scm/node/TestContainerPlacement.java      |  4 +-
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  |  4 +-
 .../hadoop/hdds/scm/node/TestNodeManager.java      |  4 +-
 .../ozone/container/common/TestEndPoint.java       |  3 +-
 .../main/java/org/apache/hadoop/ozone/OmUtils.java | 42 ++++++++++
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |  3 +
 .../java/org/apache/hadoop/ozone/TestOmUtils.java  | 91 ++++++++++++++++++++++
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  |  4 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  5 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |  7 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  9 ++-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |  3 +-
 .../java/org/apache/hadoop/ozone/om/OMStorage.java |  5 +-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  5 +-
 .../org/apache/hadoop/ozone/om/TestOmSQLCli.java   |  3 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  3 +-
 36 files changed, 343 insertions(+), 83 deletions(-)

commit a5598c95b30815c3a150bb51ac2873f77f48747b
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Oct 31 07:54:23 2018 -0700

    HDDS-773. Loading ozone s3 bucket browser could be failed. Contributed by Elek Marton.

 hadoop-ozone/dist/src/main/smoketest/s3/README.md           |  2 +-
 hadoop-ozone/s3gateway/pom.xml                              |  6 ++++++
 .../org/apache/hadoop/ozone/s3/endpoint/BucketEndpoint.java | 13 ++++++++-----
 3 files changed, 15 insertions(+), 6 deletions(-)

commit 67bcbe4aaa8f8c078b0cb3abad6ad9573e110358
Author: Márton Elek <elek@apache.org>
Date:   Wed Oct 31 12:21:38 2018 +0100

    HDDS-659. Implement pagination in GET bucket (object list) endpoint. Contributed by Bharat Viswanadham.

 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java   | 109 +++++++---
 .../ozone/s3/endpoint/ListObjectResponse.java      |  22 ++
 .../org/apache/hadoop/ozone/s3/util/S3Consts.java  |   1 +
 .../org/apache/hadoop/ozone/s3/util/S3utils.java   |  73 +++++++
 .../hadoop/ozone/client/OzoneBucketStub.java       |   7 +-
 .../hadoop/ozone/s3/endpoint/TestBucketGet.java    | 227 ++++++++++++++++++++-
 6 files changed, 400 insertions(+), 39 deletions(-)

commit 1788993955df4ce107b80e3a6c80a5bcee677cd6
Author: Márton Elek <elek@apache.org>
Date:   Wed Oct 31 11:08:43 2018 +0100

    HDDS-712. Use x-amz-storage-class to specify replication type and replication factor. Contributed by Bharat Viswanadham.

 .../dist/src/main/smoketest/s3/awss3.robot         |  4 +-
 .../dist/src/main/smoketest/s3/objectcopy.robot    | 18 +++---
 .../dist/src/main/smoketest/s3/objectdelete.robot  |  6 +-
 .../src/main/smoketest/s3/objectmultidelete.robot  |  6 +-
 .../dist/src/main/smoketest/s3/objectputget.robot  |  2 +-
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   | 68 ++++++++++++++++-----
 .../org/apache/hadoop/ozone/s3/util/S3Consts.java  | 19 ++++++
 .../apache/hadoop/ozone/s3/util/S3StorageType.java | 55 +++++++++++++++++
 .../apache/hadoop/ozone/s3/util/package-info.java  | 22 +++++++
 .../hadoop/ozone/s3/endpoint/TestPutObject.java    | 69 ++++++++++++----------
 10 files changed, 205 insertions(+), 64 deletions(-)

commit 7a90446e2d6fc4be36a92dcb229ae03ac2535735
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Oct 31 10:29:35 2018 +0530

    HDDS-755. ContainerInfo and ContainerReplica protobuf changes.
    Contributed by Nanda kumar.

 .../hdds/scm/client/ContainerOperationClient.java  |  6 +--
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |  6 +--
 .../hadoop/hdds/scm/container/ContainerInfo.java   |  8 +--
 ...inerLocationProtocolClientSideTranslatorPB.java |  2 +-
 .../src/main/proto/DatanodeContainerProtocol.proto | 27 +++++-----
 .../proto/StorageContainerLocationProtocol.proto   |  4 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |  4 +-
 .../ozone/container/common/impl/ContainerData.java | 22 ++++-----
 .../container/common/impl/ContainerDataYaml.java   |  6 +--
 .../container/common/impl/HddsDispatcher.java      | 13 ++---
 .../container/common/interfaces/Container.java     |  9 ++--
 .../container/keyvalue/KeyValueContainer.java      | 31 ++++++------
 .../container/keyvalue/KeyValueContainerData.java  |  9 ++--
 .../ozone/container/keyvalue/KeyValueHandler.java  | 16 +++---
 .../proto/StorageContainerDatanodeProtocol.proto   | 57 +++++++++++++---------
 .../hadoop/ozone/container/common/ScmTestMock.java | 14 +++---
 .../common/TestKeyValueContainerData.java          |  6 +--
 .../common/impl/TestContainerDataYaml.java         |  8 +--
 .../container/common/impl/TestContainerSet.java    | 16 +++---
 .../container/keyvalue/TestKeyValueContainer.java  | 15 +++---
 .../container/keyvalue/TestKeyValueHandler.java    |  2 +-
 .../hdds/scm/container/ContainerReportHandler.java |  2 +-
 .../hdds/scm/container/SCMContainerManager.java    | 23 ++++-----
 .../org/apache/hadoop/hdds/scm/HddsTestUtils.java  |  2 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java | 20 ++++----
 .../scm/container/TestContainerReportHandler.java  |  6 ++-
 .../scm/container/TestSCMContainerManager.java     | 22 +++++----
 .../hdds/scm/cli/container/InfoSubcommand.java     |  8 ++-
 .../rpc/TestCloseContainerHandlingByClient.java    |  2 +-
 .../rpc/TestContainerStateMachineFailures.java     |  2 +-
 .../common/impl/TestContainerPersistence.java      |  4 +-
 .../commandhandler/TestBlockDeletion.java          | 10 ++--
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  2 +-
 33 files changed, 199 insertions(+), 185 deletions(-)

commit cbb65206f2be00a6764f2ac4ccde26a9c0c5ccbf
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Oct 30 19:17:57 2018 -0700

    HDDS-754. VolumeInfo#getScmUsed throws NPE.
    Contributed by Hanisha Koneru.

 .../ozone/container/common/volume/VolumeInfo.java     | 19 +++++++++++++++++--
 .../ozone/container/common/volume/VolumeSet.java      | 11 +++++++----
 .../ozone/container/common/volume/TestHddsVolume.java |  9 ++++++---
 .../ozone/container/common/volume/TestVolumeSet.java  |  4 +++-
 .../hadoop/hdds/scm/pipeline/TestNodeFailure.java     |  3 ++-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java     |  8 ++++++++
 .../org/apache/hadoop/ozone/MiniOzoneClusterImpl.java | 16 +++++++++++++++-
 7 files changed, 58 insertions(+), 12 deletions(-)

commit 632a1e43461140ad8b7bad0d46c5bf796eadee7d
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Oct 30 19:16:52 2018 -0700

    HDDS-762. Fix unit test failure for TestContainerSQLCli & TestSCMMetrics.
    Contributed by Mukul Kumar Singh.

 hadoop-hdds/pom.xml                                            |  2 +-
 .../common/transport/server/ratis/TestCSMMetrics.java          | 10 +++++++---
 hadoop-ozone/pom.xml                                           |  2 +-
 .../java/org/apache/hadoop/ozone/scm/TestContainerSQLCli.java  |  3 ++-
 4 files changed, 11 insertions(+), 6 deletions(-)

commit e705c8333c190f791dd54ec046028b6e3231dcf9
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Oct 30 14:15:27 2018 +0530

    HDDS-749. Restructure BlockId class in Ozone. Contributed by Shashikant Banerjee.

 .../hadoop/hdds/scm/storage/ChunkOutputStream.java | 17 +++--
 .../org/apache/hadoop/hdds/client/BlockID.java     | 85 ++++++++++++++++------
 .../hadoop/hdds/client/ContainerBlockID.java       | 79 ++++++++++++++++++++
 .../container/common/helpers/AllocatedBlock.java   | 21 +++---
 ...lockLocationProtocolClientSideTranslatorPB.java |  5 +-
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  7 +-
 .../org/apache/hadoop/ozone/common/BlockGroup.java |  3 +-
 .../ozone/container/common/helpers/BlockData.java  |  8 +-
 ...lockLocationProtocolServerSideTranslatorPB.java |  2 +-
 .../src/main/proto/DatanodeContainerProtocol.proto |  4 +-
 .../src/main/proto/ScmBlockLocationProtocol.proto  |  2 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |  7 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  |  5 +-
 .../container/keyvalue/helpers/BlockUtils.java     |  2 -
 .../container/keyvalue/impl/BlockManagerImpl.java  |  6 +-
 .../keyvalue/interfaces/BlockManager.java          |  3 +-
 .../container/keyvalue/TestBlockManagerImpl.java   |  6 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  3 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |  3 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    | 21 ++----
 .../hadoop/ozone/om/helpers/OmKeyLocationInfo.java | 19 +----
 .../src/main/proto/OzoneManagerProtocol.proto      |  1 -
 .../ozone/container/TestContainerReplication.java  |  2 +-
 .../common/impl/TestCloseContainerHandler.java     |  2 +-
 .../common/impl/TestContainerPersistence.java      | 14 ++--
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  | 16 ++--
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  2 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  7 +-
 .../ozone/om/ScmBlockLocationTestIngClient.java    |  3 +-
 29 files changed, 227 insertions(+), 128 deletions(-)

commit 61ee2bc2d65d2e304d6b5525ac0cac1388c801e8
Author: Arpit Agarwal <arp@apache.org>
Date:   Mon Oct 29 17:14:15 2018 -0700

    HDDS-620. ozone.scm.client.address should be an optional setting. Contributed by chencan and Arpit Agarwal.

 .../java/org/apache/hadoop/hdds/HddsUtils.java     |  40 +++++-
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java |  16 ++-
 .../hadoop/hdds/scm/TestHddsServerUtils.java       | 153 +++++++++++++++++++++
 .../hadoop/ozone/client/TestHddsClientUtils.java   | 137 ++++++++++++++++--
 4 files changed, 325 insertions(+), 21 deletions(-)

commit 648f053324f53a5f79170c517d10f2b078a8f220
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Oct 29 12:59:41 2018 -0700

    HDDS-743. S3 multi delete request should return XML header in quiet mode. Contributed by Elek Marton.

 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java   |  9 +---
 .../ozone/s3/endpoint/TestObjectMultiDelete.java   | 61 ++++++++++++++++------
 2 files changed, 48 insertions(+), 22 deletions(-)

commit b38cfb16eb9fab552fbfb56ca613e5b57afff950
Author: Arpit Agarwal <arp@apache.org>
Date:   Mon Oct 29 09:35:18 2018 -0700

    HDDS-727. ozone.log is not getting created in logs directory. Contributed by Nilotpal Nandi.

 hadoop-ozone/dist/dev-support/bin/dist-layout-stitching               | 4 +++-
 .../common => hadoop-ozone/dist}/src/main/conf/log4j.properties       | 0
 .../{common => dist}/src/main/conf/om-audit-log4j2.properties         | 0
 hadoop-ozone/{common => dist}/src/main/conf/ozone-site.xml            | 0
 4 files changed, 3 insertions(+), 1 deletion(-)

commit 6876cf4a5ba5de83ccc597c5975e97dc44de5327
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Oct 29 19:53:52 2018 +0530

    HDDS-728. Datanodes should use different ContainerStateMachine for each pipeline.
    Contributed by Mukul Kumar Singh.

 .../common/statemachine/DatanodeStateMachine.java  |   3 +
 .../common/transport/server/ratis/CSMMetrics.java  |   5 +-
 .../server/ratis/ContainerStateMachine.java        |  21 ++--
 .../transport/server/ratis/XceiverServerRatis.java |  26 +++--
 hadoop-hdds/pom.xml                                |   2 +-
 .../hdds/scm/container/SCMContainerManager.java    |   8 +-
 .../hadoop/hdds/scm/pipeline/TestNodeFailure.java  |   2 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   8 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  20 ++--
 .../apache/hadoop/ozone/client/rpc/TestBCSID.java  |   2 +-
 .../commandhandler/TestBlockDeletion.java          |   4 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |   2 +-
 hadoop-ozone/pom.xml                               |   2 +-
 .../freon/TestFreonWithDatanodeFastRestart.java    | 130 +++++++++++++++++++++
 .../ozone/freon/TestFreonWithDatanodeRestart.java  |  53 +++------
 15 files changed, 208 insertions(+), 80 deletions(-)

commit 285c6d5461ae64533ea8bfdeba97ab6d3b5a0bd1
Author: Márton Elek <elek@apache.org>
Date:   Mon Oct 29 14:45:01 2018 +0100

    HDDS-573. Make VirtualHostStyleFilter port agnostic. Contributed by Danilo Perez.

 .../java/org/apache/hadoop/ozone/s3/VirtualHostStyleFilter.java  | 9 +++++++++
 .../org/apache/hadoop/ozone/s3/TestVirtualHostStyleFilter.java   | 4 +++-
 2 files changed, 12 insertions(+), 1 deletion(-)

commit 0eba02ed7cff66d9a541baa99cab82ff4e92d089
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Oct 27 09:32:28 2018 -0700

    HDDS-739. Support MultiDeleteRequest without XML namespace. Contributed by Elek Marton.

 .../ozone/s3/endpoint/MultiDeleteRequest.java      |  2 +-
 .../endpoint/MultiDeleteRequestUnmarshaller.java   | 84 ++++++++++++++++++++++
 .../ozone/s3/endpoint/XmlNamespaceFilter.java      | 54 ++++++++++++++
 .../TestMultiDeleteRequestUnmarshaller.java        | 76 ++++++++++++++++++++
 4 files changed, 215 insertions(+), 1 deletion(-)

commit 7f6793b50b8cbc2589675836bf5891daed887b0c
Author: Nanda kumar <nanda@apache.org>
Date:   Sat Oct 27 16:51:08 2018 +0530

    HDDS-744. Fix ASF license warning in PipelineNotFoundException class.
    Contributed by Lokesh Jain.

 .../hdds/scm/pipeline/PipelineNotFoundException.java   | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

commit a4f343a34c3324f4ac9ae7b509609c0ec61a1baf
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Oct 26 17:53:47 2018 +0530

    HDDS-694. Plugin new Pipeline management code in SCM.
    Contributed by Lokesh Jain.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  15 +-
 .../hadoop/hdds/scm/XceiverClientManager.java      |   6 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  31 +-
 .../hdds/scm/client/ContainerOperationClient.java  |  40 +-
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |   2 +-
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |   2 +-
 .../hadoop/hdds/scm/container/ContainerInfo.java   |   2 +-
 .../container/common/helpers/AllocatedBlock.java   |   1 +
 .../common/helpers/ContainerWithPipeline.java      |   3 +-
 .../scm/container/common/helpers/Pipeline.java     | 319 --------------
 .../scm/container/common/helpers/PipelineID.java   |  97 -----
 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  |  41 +-
 .../scm/pipeline/PipelineNotFoundException.java    |  28 ++
 .../protocol/StorageContainerLocationProtocol.java |   2 +-
 ...lockLocationProtocolClientSideTranslatorPB.java |   4 +-
 ...inerLocationProtocolClientSideTranslatorPB.java |   4 +-
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  22 +-
 .../main/java/org/apache/ratis/RatisHelper.java    |  15 +-
 .../common/transport/server/XceiverServerGrpc.java |   2 +-
 .../transport/server/ratis/XceiverServerRatis.java |  10 +-
 .../protocol/commands/CloseContainerCommand.java   |   2 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |   2 +-
 .../block/DatanodeDeletedBlockTransactions.java    |   4 +-
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |   5 +-
 .../scm/container/CloseContainerEventHandler.java  |   4 +-
 .../hdds/scm/container/ContainerManager.java       |   6 +-
 .../hdds/scm/container/ContainerStateManager.java  |  25 +-
 .../hdds/scm/container/SCMContainerManager.java    |  59 +--
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |   9 -
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |   4 +-
 .../hadoop/hdds/scm/node/NodeStateManager.java     |   4 +-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |   4 +-
 .../hadoop/hdds/scm/node/StaleNodeHandler.java     |  30 +-
 .../hdds/scm/node/states/Node2PipelineMap.java     |   8 +-
 .../hadoop/hdds/scm/pipeline/PipelineFactory.java  |   6 +-
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  |  10 +-
 .../hadoop/hdds/scm/pipeline/PipelineProvider.java |   2 +-
 .../hdds/scm/pipeline/PipelineReportHandler.java   |  16 +-
 .../hdds/scm/pipeline/PipelineStateManager.java    |  27 +-
 .../hadoop/hdds/scm/pipeline/PipelineStateMap.java |  91 ++--
 .../hdds/scm/pipeline/RatisPipelineProvider.java   |  15 +-
 .../hdds/scm/pipeline/SCMPipelineManager.java      |  37 +-
 .../hdds/scm/pipeline/SimplePipelineProvider.java  |  13 +-
 .../scm/pipelines/PipelineActionEventHandler.java  |  62 ---
 .../hdds/scm/pipelines/PipelineCloseHandler.java   |  52 ---
 .../hadoop/hdds/scm/pipelines/PipelineManager.java | 171 --------
 .../hdds/scm/pipelines/PipelineReportHandler.java  |  59 ---
 .../hdds/scm/pipelines/PipelineSelector.java       | 481 ---------------------
 .../hdds/scm/pipelines/PipelineStateManager.java   | 136 ------
 .../hadoop/hdds/scm/pipelines/package-info.java    |  38 --
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java | 129 ------
 .../hdds/scm/pipelines/ratis/package-info.java     |  18 -
 .../standalone/StandaloneManagerImpl.java          | 122 ------
 .../scm/pipelines/standalone/package-info.java     |  18 -
 .../hdds/scm/server/SCMClientProtocolServer.java   |   2 +-
 .../hdds/scm/server/StorageContainerManager.java   |  39 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    |   9 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  32 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |   4 +-
 .../container/TestCloseContainerEventHandler.java  |  20 +-
 .../scm/container/TestContainerReportHandler.java  |   7 +-
 .../scm/container/TestContainerStateManager.java   |  29 +-
 .../scm/container/TestSCMContainerManager.java     |  24 +-
 .../replication/TestReplicationManager.java        |  29 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   8 +-
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  |   7 +-
 .../hadoop/hdds/scm/node/TestNodeManager.java      |   2 +-
 .../ozone/container/common/TestEndPoint.java       |   2 +-
 .../testutils/ReplicationNodeManagerMock.java      |   4 +-
 .../hdds/scm/cli/container/InfoSubcommand.java     |   5 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |   7 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |  29 +-
 .../hadoop/hdds/scm/pipeline/TestNodeFailure.java  |  22 +-
 .../hdds/scm/pipeline/TestPipelineClose.java       |  41 +-
 .../scm/pipeline/TestPipelineStateManager.java     | 171 +++++---
 .../scm/pipeline/TestRatisPipelineProvider.java    |  13 +-
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  |  45 +-
 .../hadoop/hdds/scm/pipeline/TestSCMRestart.java   |  23 +-
 .../scm/pipeline/TestSimplePipelineProvider.java   |  13 +-
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |   2 +-
 .../TestContainerStateMachineIdempotency.java      |   2 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |  23 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |   4 +-
 .../ozone/TestStorageContainerManagerHelper.java   |   5 +-
 .../ozone/client/rest/TestOzoneRestClient.java     |   4 +-
 .../rpc/TestCloseContainerHandlingByClient.java    |  10 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |   6 +-
 .../ozone/container/ContainerTestHelper.java       |  70 +--
 .../ozone/container/TestContainerReplication.java  |   6 +-
 .../common/impl/TestCloseContainerHandler.java     |  10 +-
 .../TestCloseContainerByPipeline.java              |   8 +-
 .../commandhandler/TestCloseContainerHandler.java  |   2 +-
 .../transport/server/ratis/TestCSMMetrics.java     |   4 +-
 .../container/metrics/TestContainerMetrics.java    |   4 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   9 +-
 .../ozoneimpl/TestOzoneContainerRatis.java         |   6 +-
 .../container/server/TestContainerServer.java      |  21 +-
 .../hadoop/ozone/scm/TestAllocateContainer.java    |   2 +-
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  |   2 +-
 .../ozone/om/ScmBlockLocationTestIngClient.java    |  19 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java  |  27 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |   6 +-
 102 files changed, 791 insertions(+), 2363 deletions(-)

commit 478cb0f803114401a95b7a4593921cee33928790
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Oct 25 17:04:16 2018 -0700

    HDDS-682. Unified o3 address parsing for ozonen sh. Contributed by Elek, Marton.

 .../org/apache/hadoop/hdds/cli/GenericCli.java     |   5 +-
 .../hadoop/hdds/cli/GenericParentCommand.java      |   4 +
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |  77 ++++---
 .../apache/hadoop/ozone/web/ozShell/Handler.java   | 139 +-----------
 .../hadoop/ozone/web/ozShell/OzoneAddress.java     | 251 +++++++++++++++++++++
 .../ozone/web/ozShell/bucket/BucketCommands.java   |   6 +
 .../web/ozShell/bucket/CreateBucketHandler.java    |  27 +--
 .../web/ozShell/bucket/DeleteBucketHandler.java    |  20 +-
 .../web/ozShell/bucket/InfoBucketHandler.java      |  28 +--
 .../web/ozShell/bucket/ListBucketHandler.java      |  26 +--
 .../ozone/web/ozShell/bucket/S3BucketMapping.java  |  55 +----
 .../web/ozShell/bucket/UpdateBucketHandler.java    |  20 +-
 .../ozone/web/ozShell/keys/DeleteKeyHandler.java   |  23 +-
 .../ozone/web/ozShell/keys/GetKeyHandler.java      |  18 +-
 .../ozone/web/ozShell/keys/InfoKeyHandler.java     |  28 +--
 .../hadoop/ozone/web/ozShell/keys/KeyCommands.java |   6 +
 .../ozone/web/ozShell/keys/ListKeyHandler.java     |  28 +--
 .../ozone/web/ozShell/keys/PutKeyHandler.java      |  21 +-
 .../web/ozShell/volume/CreateVolumeHandler.java    |  28 +--
 .../web/ozShell/volume/DeleteVolumeHandler.java    |   8 +-
 .../web/ozShell/volume/InfoVolumeHandler.java      |   8 +-
 .../web/ozShell/volume/ListVolumeHandler.java      |  27 +--
 .../web/ozShell/volume/UpdateVolumeHandler.java    |   8 +-
 .../ozone/web/ozShell/volume/VolumeCommands.java   |   6 +
 .../hadoop/ozone/web/ozShell/TestOzoneAddress.java | 100 ++++++++
 .../hadoop/ozone/web/ozShell/package-info.java     |  21 ++
 26 files changed, 574 insertions(+), 414 deletions(-)

commit 16c1fdf62946a3c160e3f3b9302ae95dc84d193d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Oct 25 16:26:48 2018 -0700

    HDDS-702:Used fixed/external version from hadoop jars in hdds/ozone projects. Contributed by Elek Marton.

 hadoop-hdds/pom.xml  | 161 ++++++++++++++++++++++++++++++++++++++++++++++++++-
 hadoop-ozone/pom.xml | 139 +++++++++++++++++++++++++++++++++++++++++++-
 2 files changed, 295 insertions(+), 5 deletions(-)

commit c4633ab7e60f07f0791a33d143bcdec5f7bc5a2b
Author: Márton Elek <elek@apache.org>
Date:   Thu Oct 25 15:00:39 2018 +0200

    HDDS-703. Ozone docs does not render correctly on a Mobile Device. Contributed by Elek, Marton.

 hadoop-ozone/docs/themes/ozonedoc/layouts/partials/navbar.html  | 5 +++--
 hadoop-ozone/docs/themes/ozonedoc/layouts/partials/sidebar.html | 8 +++++++-
 2 files changed, 10 insertions(+), 3 deletions(-)

commit 29a48d4040de661c94261d13dd3cff56f4b003b3
Author: Márton Elek <elek@apache.org>
Date:   Thu Oct 25 12:45:53 2018 +0200

    HDDS-643. Parse Authorization header in a separate filter. Contributed by Bharat Viswanadham.

 .../hadoop/ozone/s3/VirtualHostStyleFilter.java    | 13 +++++
 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java   |  3 +-
 .../hadoop/ozone/s3/endpoint/EndpointBase.java     | 46 ++++------------
 .../hadoop/ozone/s3/endpoint/RootEndpoint.java     |  6 +--
 .../s3/header/AuthenticationHeaderParser.java      | 61 ++++++++++++++++++++++
 .../ozone/s3/TestVirtualHostStyleFilter.java       | 16 ++++++
 .../hadoop/ozone/s3/endpoint/TestRootList.java     | 22 ++++----
 7 files changed, 115 insertions(+), 52 deletions(-)

commit 09eab92d9d2926ca1a104e5e4e71b33516274d41
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed Oct 24 16:17:05 2018 -0700

    HDDS-719. Remove Ozone dependencies on Apache Hadoop 3.2.0. Contributed by Arpit Agarwal.

 .../java/org/apache/hadoop/hdds/HddsUtils.java     |  11 +++
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |   4 +-
 .../hadoop/hdds/scm/HddsWhiteboxTestUtils.java     | 103 +++++++++++++++++++++
 .../ozone/container/ContainerTestHelper.java       |   6 +-
 .../org/apache/hadoop/ozone/om/TestOmMetrics.java  |  23 ++---
 .../contract/ITestOzoneContractGetFileStatus.java  |   6 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |   6 +-
 7 files changed, 139 insertions(+), 20 deletions(-)

commit 4c59a39797fabfb1cb1c8806e3d1f60fbcd7db25
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Oct 24 15:53:31 2018 -0700

    HDDS-516. Implement CopyObject REST endpoint. Contributed by Bharat Viswanadham.

 .../dist/src/main/smoketest/s3/objectcopy.robot    |  66 ++++++++++++
 .../ozone/s3/endpoint/CopyObjectResponse.java      |  63 ++++++++++++
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   | 112 ++++++++++++++++++--
 .../hadoop/ozone/s3/exception/S3ErrorTable.java    |   6 ++
 .../hadoop/ozone/s3/endpoint/TestPutObject.java    | 114 ++++++++++++++++++++-
 5 files changed, 348 insertions(+), 13 deletions(-)

commit 63d7e2d206cf7531b03aee472205e7f4c474fb94
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Oct 24 12:51:38 2018 -0700

    HDDS-693. Support multi-chunk signatures in s3g PUT object endpoint. Contributed by Elek Marton.

 .../hadoop/ozone/s3/SignedChunksInputStream.java   | 99 ++++++++++++++++++++++
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   | 16 +++-
 .../ozone/s3/TestSignedChunksInputStream.java      | 84 ++++++++++++++++++
 .../hadoop/ozone/s3/endpoint/TestObjectGet.java    |  4 +-
 .../hadoop/ozone/s3/endpoint/TestPutObject.java    | 41 ++++++++-
 5 files changed, 238 insertions(+), 6 deletions(-)

commit 42a1d76047e18099bf00b0a4b87f68e40400e575
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Wed Oct 24 16:04:57 2018 +0530

    HDDS-716. Update ozone to latest ratis snapshot build(0.3.0-aa38160-SNAPSHOT). Contributed by Mukul Kumar Singh.

 .../server/ratis/ContainerStateMachine.java        | 72 ++++++++++++++--------
 1 file changed, 47 insertions(+), 25 deletions(-)

commit 21137c7e57f771478fcd84b5f17d99e748b0976a
Author: Shashikant Banerjee <shashikant@apache.org>
Date:   Tue Oct 23 16:52:17 2018 +0530

    HDDS-708. Validate BCSID while reading blocks from containers in datanodes. Contributed by Shashikant Banerjee.

 .../hdds/scm/storage/ContainerProtocolCalls.java   |  7 ++-
 .../src/main/proto/DatanodeContainerProtocol.proto |  5 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  |  8 ++-
 .../container/keyvalue/impl/BlockManagerImpl.java  | 40 ++++++++++----
 .../keyvalue/interfaces/BlockManager.java          |  4 +-
 .../container/keyvalue/TestBlockManagerImpl.java   |  6 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |  3 +-
 .../ozone/container/TestContainerReplication.java  |  2 +-
 .../common/impl/TestCloseContainerHandler.java     |  2 +-
 .../common/impl/TestContainerPersistence.java      | 64 +++++++++++++++++++++-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  4 +-
 11 files changed, 116 insertions(+), 29 deletions(-)

commit 97faafd5e5f432013c346987ccfd40bf0e3f1bdf
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Oct 22 15:31:13 2018 -0700

    HDDS-676. Enable Read from open Containers via Standalone Protocol.
    Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 194 +++++++++++++++------
 .../hadoop/hdds/scm/XceiverClientManager.java      |  14 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |   6 +
 .../scm/container/common/helpers/Pipeline.java     |   4 +
 .../ozone/client/io/ChunkGroupInputStream.java     |   9 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |   4 +
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   2 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       | 108 ++++++++++++
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  15 +-
 9 files changed, 286 insertions(+), 70 deletions(-)

commit 9bf991727fbf65f75f41e6c54bf6f0be2b422223
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Oct 22 10:17:12 2018 -0700

    HDDS-705. addendum patch to fix find bug issue. Contributed by Bharat Viswanadham.

 .../main/java/org/apache/hadoop/ozone/s3/endpoint/EndpointBase.java   | 4 +++-
 .../main/java/org/apache/hadoop/ozone/s3/exception/S3ErrorTable.java  | 2 +-
 2 files changed, 4 insertions(+), 2 deletions(-)

commit b4fd57988a64615ba06a1973d84e908ee3aaa176
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Oct 22 19:59:35 2018 +0530

    HDDS-638. Enable ratis snapshots for HDDS datanodes. Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   4 +
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   4 +
 .../common/src/main/resources/ozone-default.xml    |   8 ++
 .../server/ratis/ContainerStateMachine.java        |  85 ++++++++++++--
 .../transport/server/ratis/XceiverServerRatis.java |  14 ++-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |   5 +
 .../ozone/freon/TestFreonWithDatanodeRestart.java  | 122 +++++++++++++++++++++
 7 files changed, 233 insertions(+), 9 deletions(-)

commit 4765dfe78a076df43f414bb81509db7fbe7b3919
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Oct 22 15:48:36 2018 +0530

    HDDS-705. OS3Exception resource name should be the actual resource name.
    Contributed by Bharat Viswanadham.
    
    Recommitting after making sure that patch is clean.

 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java   |  4 +--
 .../hadoop/ozone/s3/endpoint/EndpointBase.java     |  7 ++--
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   |  9 +++--
 .../hadoop/ozone/s3/exception/S3ErrorTable.java    | 39 +++-------------------
 .../ozone/s3/header/AuthorizationHeaderV2.java     | 12 +++----
 .../ozone/s3/header/AuthorizationHeaderV4.java     | 12 +++----
 .../apache/hadoop/ozone/s3/header/Credential.java  |  3 +-
 .../ozone/s3/exception/TestOS3Exception.java       |  2 +-
 8 files changed, 24 insertions(+), 64 deletions(-)

commit ed5b4b954512fe04561a0ecd2f18aa2c9bb9ae36
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Oct 22 15:37:40 2018 +0530

    Revert "HDDS-705. OS3Exception resource name should be the actual resource name."
    
    This reverts commit 977c6f64704a44692bed29a49b326eeddc06cdb0.
    
    There was spurious edit in this commit.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 189 ++++++---------------
 .../hadoop/hdds/scm/XceiverClientManager.java      |  14 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |   8 -
 .../scm/container/common/helpers/Pipeline.java     |   4 -
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  11 +-
 .../src/main/proto/DatanodeContainerProtocol.proto |   3 -
 .../ozone/container/keyvalue/KeyValueHandler.java  |   6 +-
 .../container/keyvalue/impl/BlockManagerImpl.java  |  37 +---
 .../keyvalue/interfaces/BlockManager.java          |   4 +-
 .../container/keyvalue/TestBlockManagerImpl.java   |   6 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |  12 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |   4 -
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   2 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       | 106 ------------
 .../ozone/container/ContainerTestHelper.java       |   1 -
 .../ozone/container/TestContainerReplication.java  |   2 +-
 .../common/impl/TestCloseContainerHandler.java     |   2 +-
 .../common/impl/TestContainerPersistence.java      |   6 +-
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  15 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |   4 +-
 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java   |   4 +-
 .../hadoop/ozone/s3/endpoint/EndpointBase.java     |   7 +-
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   |   9 +-
 .../hadoop/ozone/s3/exception/S3ErrorTable.java    |  39 ++++-
 .../ozone/s3/header/AuthorizationHeaderV2.java     |  12 +-
 .../ozone/s3/header/AuthorizationHeaderV4.java     |  12 +-
 .../apache/hadoop/ozone/s3/header/Credential.java  |   3 +-
 .../ozone/s3/exception/TestOS3Exception.java       |   2 +-
 28 files changed, 159 insertions(+), 365 deletions(-)

commit 98be4b1fe0c4d08dd88dfbf8654f4b71b61fd39d
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Oct 21 23:18:38 2018 -0700

    HDDS-544. Unconditional wait findbug warning from ReplicationSupervisor.
    Contributed by Arpit Agarwal.

 .../common/statemachine/DatanodeStateMachine.java  |   1 -
 .../replication/ReplicationSupervisor.java         | 137 ++++++++++-----------
 .../replication/TestReplicationSupervisor.java     |  31 ++---
 3 files changed, 73 insertions(+), 96 deletions(-)

commit 219ec053bffc41f15958c15876b19a9ea8fd3c0c
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Oct 21 22:50:28 2018 -0700

    HDDS-707. Allow registering MBeans without additional jmx properties.
    Contributed by Arpit Agarwal.

 .../java/org/apache/hadoop/hdds/HddsUtils.java     | 43 ++++++++++++++++++++++
 .../java/org/apache/hadoop/utils/RocksDBStore.java |  4 +-
 .../java/org/apache/hadoop/utils/db/RDBStore.java  |  4 +-
 .../hdds/scm/server/StorageContainerManager.java   |  9 ++---
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 10 ++---
 5 files changed, 57 insertions(+), 13 deletions(-)

commit 4d2553f42d9de40fa78c49333f0af7cf82d8b455
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Oct 21 22:49:16 2018 -0700

    HDDS-705. OS3Exception resource name should be the actual resource name.
    Contributed by Bharat Viswanadham.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 189 +++++++++++++++------
 .../hadoop/hdds/scm/XceiverClientManager.java      |  14 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |   8 +
 .../scm/container/common/helpers/Pipeline.java     |   4 +
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  11 +-
 .../src/main/proto/DatanodeContainerProtocol.proto |   3 +
 .../ozone/container/keyvalue/KeyValueHandler.java  |   6 +-
 .../container/keyvalue/impl/BlockManagerImpl.java  |  37 +++-
 .../keyvalue/interfaces/BlockManager.java          |   4 +-
 .../container/keyvalue/TestBlockManagerImpl.java   |   6 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |  12 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |   4 +
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   2 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       | 106 ++++++++++++
 .../ozone/container/ContainerTestHelper.java       |   1 +
 .../ozone/container/TestContainerReplication.java  |   2 +-
 .../common/impl/TestCloseContainerHandler.java     |   2 +-
 .../common/impl/TestContainerPersistence.java      |   6 +-
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  15 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |   4 +-
 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java   |   4 +-
 .../hadoop/ozone/s3/endpoint/EndpointBase.java     |   7 +-
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   |   9 +-
 .../hadoop/ozone/s3/exception/S3ErrorTable.java    |  39 +----
 .../ozone/s3/header/AuthorizationHeaderV2.java     |  12 +-
 .../ozone/s3/header/AuthorizationHeaderV4.java     |  12 +-
 .../apache/hadoop/ozone/s3/header/Credential.java  |   3 +-
 .../ozone/s3/exception/TestOS3Exception.java       |   2 +-
 28 files changed, 365 insertions(+), 159 deletions(-)

commit c6f79871751ca435ea32174bdddc513ce3388293
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Oct 19 11:40:11 2018 -0700

    HDDS-679. Add query parameter to the constructed query in VirtualHostStyleFilter.
    Contributed by Bharat Viswanadham.

 .../hadoop/ozone/s3/VirtualHostStyleFilter.java    | 13 ++++--
 .../ozone/s3/TestVirtualHostStyleFilter.java       | 52 ++++++++++++++++++----
 2 files changed, 53 insertions(+), 12 deletions(-)

commit 068466688bebab2fbe0acc31289d620717657abb
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Oct 19 11:36:36 2018 -0700

    HDDS-621. ozone genconf improvements. Contributed by Dinesh Chitlangia.

 hadoop-ozone/docs/content/Settings.md              |  4 ++--
 .../GenerateOzoneRequiredConfigurations.java       | 26 ++++++++++++++++------
 .../TestGenerateOzoneRequiredConfigurations.java   | 19 ++++++++++++++++
 3 files changed, 40 insertions(+), 9 deletions(-)

commit ccee73e4d0598f9b7dd1ab31781a1c9fde149258
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu Oct 18 22:17:27 2018 -0700

    HDDS-612. Even after setting hdds.scm.chillmode.enabled to false, SCM allocateblock fails with ChillModePrecheck exception. Contributed by Hanisha Koneru.

 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  2 +-
 .../hadoop/hdds/scm/server/ChillModePrecheck.java  | 15 +++++++++++-
 .../hdds/scm/server/SCMChillModeManager.java       | 27 ++++++++++++++--------
 .../hdds/scm/server/SCMClientProtocolServer.java   |  7 +++---
 .../hdds/scm/server/StorageContainerManager.java   | 21 +++++++++--------
 .../apache/hadoop/ozone/om/TestScmChillMode.java   | 22 +++++++++++++++++-
 6 files changed, 69 insertions(+), 25 deletions(-)

commit bb63232ec5bde0debe3cc9a819614b75068e5f6d
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Oct 19 10:13:08 2018 -0700

    HDDS-701. Support key multi-delete.
    Contributed by Elek, Marton.

 .../src/main/smoketest/s3/objectmultidelete.robot  |  44 ++++++
 .../apache/hadoop/ozone/s3/HeaderPreprocessor.java |  47 +++++++
 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java   |  51 +++++++
 .../ozone/s3/endpoint/MultiDeleteRequest.java      |  96 +++++++++++++
 .../ozone/s3/endpoint/MultiDeleteResponse.java     | 154 +++++++++++++++++++++
 .../ozone/s3/endpoint/TestObjectMultiDelete.java   |  86 ++++++++++++
 6 files changed, 478 insertions(+)

commit 1b99a76cfe688b056569b209e2c42390a8e66684
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Oct 19 09:22:46 2018 -0700

    HDDS-672. Spark shell throws OzoneFileSystem not found.
    Contributed by Anu Engineer.

 .../java/org/apache/hadoop/fs/ozone/OzoneFileSystem.java    | 13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)

commit 9120bb4a5d484efa90ddaa9f852960bdd5f8be75
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Oct 19 08:48:11 2018 -0700

    HDDS-680. Provide web based bucket browser.
    Contributed by Elek, Marton.

 .../hadoop/ozone/s3/endpoint/BucketEndpoint.java   |  16 +-
 .../s3gateway/src/main/resources/browser.html      | 617 +++++++++++++++++++++
 .../hadoop/ozone/s3/endpoint/TestBucketGet.java    |  10 +-
 3 files changed, 638 insertions(+), 5 deletions(-)

commit 931ef3c7d094d1a1b29f3fdcce04d0ffc4462757
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Oct 18 12:14:54 2018 -0700

    HDDS-690. Javadoc build fails in hadoop-ozone.
    Contributed by Takanobu Asanuma.

 .../main/java/org/apache/hadoop/ozone/client/BucketArgs.java |  2 +-
 .../org/apache/hadoop/ozone/om/helpers/OmBucketArgs.java     |  4 ++--
 .../org/apache/hadoop/ozone/om/helpers/OmBucketInfo.java     |  2 +-
 .../java/org/apache/hadoop/ozone/om/helpers/OmKeyInfo.java   |  1 -
 .../org/apache/hadoop/ozone/web/handlers/VolumeHandler.java  |  6 ++++--
 .../org/apache/hadoop/ozone/web/interfaces/Accounting.java   |  2 +-
 .../java/org/apache/hadoop/ozone/web/interfaces/Volume.java  | 12 +++++++-----
 .../src/main/java/org/apache/hadoop/ozone/om/KeyManager.java |  2 +-
 .../java/org/apache/hadoop/ozone/om/OzoneManagerLock.java    |  7 ++++---
 .../org/apache/hadoop/ozone/om/ServiceListJSONServlet.java   |  4 ++--
 .../ozone/genconf/GenerateOzoneRequiredConfigurations.java   |  2 +-
 11 files changed, 24 insertions(+), 20 deletions(-)

commit bcdb703ddcac5fa5207cc428d58625f4a7b8b5c6
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu Oct 18 11:51:16 2018 -0700

    HDDS-673. Suppress "Key not found" exception log with stack trace in OM. Contributed by Arpit Agarwal.

 .../src/main/java/org/apache/hadoop/ozone/om/KeyManagerImpl.java        | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3f1493f2a6d3a497ce70e1de44329528920f82e2
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Oct 17 20:44:41 2018 -0700

    HDDS-678. Format of Last-Modified header is invalid in HEAD Object call. Contributed by Elek Marton.

 .../org/apache/hadoop/ozone/s3/endpoint/ObjectEndpoint.java   | 11 ++++++++++-
 .../org/apache/hadoop/ozone/s3/endpoint/TestObjectHead.java   |  5 +++++
 2 files changed, 15 insertions(+), 1 deletion(-)

commit f8473d7c9ecf718b063de3c43596eb992ce2c0bb
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Wed Oct 17 17:51:29 2018 -0700

    HDDS-670. Fix OzoneFS directory rename.

 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |   2 +-
 .../hadoop/fs/ozone/TestOzoneFsRenameDir.java      | 121 +++++++++++++++++++++
 2 files changed, 122 insertions(+), 1 deletion(-)

commit 9c3e979619cc14f1ad2b78e6bd9db5f7c932acc9
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Oct 17 16:46:06 2018 -0700

    HDDS-683. Add a shell command to provide ozone mapping for a S3Bucket. Contributed by Bharat Viswanadham.

 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 42 +++++++++
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java |  5 +-
 .../ozone/web/ozShell/bucket/BucketCommands.java   |  3 +-
 .../ozone/web/ozShell/bucket/S3BucketMapping.java  | 99 ++++++++++++++++++++++
 4 files changed, 147 insertions(+), 2 deletions(-)

commit 71ea9adf0ad4aed1f7ef4d569e676dccc0639483
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Wed Oct 17 14:18:46 2018 -0700

    HDDS-651. Rename o3 to o3fs for Filesystem.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  5 ++-
 .../dist/src/main/compose/ozonefs/docker-config    |  2 +-
 .../dist/src/main/smoketest/ozonefs/ozonefs.robot  | 52 +++++++++++-----------
 hadoop-ozone/docs/content/OzoneFS.md               |  6 +--
 .../apache/hadoop/ozone/web/ozShell/Handler.java   |  6 +--
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |  2 +-
 .../hadoop/fs/ozone/TestOzoneFileInterfaces.java   |  2 +-
 7 files changed, 39 insertions(+), 36 deletions(-)

commit c8f96096258e5b445f89ad51ff56a8f0c6a48b72
Author: Nandakumar <nanda@apache.org>
Date:   Wed Oct 17 18:44:05 2018 +0530

    HDDS-661. When a volume fails in datanode, VersionEndpointTask#call ends up in dead lock. Contributed by Hanisha Koneru.

 .../ozone/container/common/states/endpoint/VersionEndpointTask.java | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit c708029bbad581d5ce72dd98d200afed6aa54708
Author: Nandakumar <nanda@apache.org>
Date:   Wed Oct 17 17:45:35 2018 +0530

    HDDS-662. Introduce ContainerReplicaState in StorageContainerManager. Contributed by Nanda kumar.

 .../hdds/scm/client/ContainerOperationClient.java  |   2 +-
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |   2 +-
 .../hdds/scm/container/ContainerException.java     |  46 ++
 .../hadoop/hdds/scm/container/ContainerID.java     |  28 +-
 .../{common/helpers => }/ContainerInfo.java        |  45 +-
 .../scm/container/ContainerNotFoundException.java  |  44 ++
 .../ContainerReplicaNotFoundException.java         |  45 ++
 .../common/helpers/ContainerWithPipeline.java      |   1 +
 .../protocol/StorageContainerLocationProtocol.java |   2 +-
 ...inerLocationProtocolClientSideTranslatorPB.java |   2 +-
 ...inerLocationProtocolServerSideTranslatorPB.java |   2 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |  17 +-
 .../report/CommandStatusReportPublisher.java       |   2 +-
 .../common/report/TestReportPublisher.java         |  13 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  14 +-
 .../block/DatanodeDeletedBlockTransactions.java    |   6 +-
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |   5 +-
 .../scm/container/CloseContainerEventHandler.java  |  31 +-
 .../hdds/scm/container/CloseContainerWatcher.java  |   3 +-
 .../hdds/scm/container/ContainerManager.java       |  70 ++-
 .../hdds/scm/container/ContainerReplica.java       | 197 +++++++
 .../hdds/scm/container/ContainerReportHandler.java |  60 +--
 .../hdds/scm/container/ContainerStateManager.java  | 242 ++++-----
 .../hdds/scm/container/SCMContainerManager.java    | 566 +++++++++------------
 .../container/replication/ReplicationManager.java  |  38 +-
 .../scm/container/states/ContainerStateMap.java    | 267 +++++-----
 .../hadoop/hdds/scm/node/DeadNodeHandler.java      |  74 +--
 .../hdds/scm/server/SCMChillModeManager.java       |   2 +-
 .../hdds/scm/server/SCMClientProtocolServer.java   |  32 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |   2 +-
 .../hdds/scm/server/StorageContainerManager.java   |  22 +-
 .../org/apache/hadoop/hdds/scm/HddsTestUtils.java  |   2 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  48 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    |   2 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  14 +-
 .../container/TestCloseContainerEventHandler.java  |  22 +-
 .../scm/container/TestContainerReportHandler.java  |  66 +--
 .../scm/container/TestContainerStateManager.java   |  60 ++-
 .../scm/container/TestSCMContainerManager.java     | 117 ++---
 .../replication/TestReplicationManager.java        |  38 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   2 +-
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  | 195 ++++---
 .../hdds/scm/server/TestSCMChillModeManager.java   |   2 +-
 .../ozone/container/TestCloseContainerWatcher.java |  12 +-
 .../org/apache/hadoop/hdds/scm/cli/SCMCLI.java     |   2 +-
 .../hdds/scm/cli/container/ListSubcommand.java     |   4 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |   2 +-
 .../TestContainerStateManagerIntegration.java      | 219 ++++----
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |   7 +-
 .../hdds/scm/pipeline/TestPipelineClose.java       |  10 +-
 .../org/apache/hadoop/ozone/OzoneTestUtils.java    |  10 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |   4 +-
 .../ozone/client/rest/TestOzoneRestClient.java     |   4 +-
 .../rpc/TestCloseContainerHandlingByClient.java    |  10 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |   6 +-
 .../commandhandler/TestBlockDeletion.java          |   3 +-
 .../TestCloseContainerByPipeline.java              |  10 +-
 .../commandhandler/TestCloseContainerHandler.java  |   4 +-
 .../ozone/om/TestContainerReportWithKeys.java      |   2 +-
 .../apache/hadoop/ozone/om/TestScmChillMode.java   |  14 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |   4 -
 .../ozone/genesis/BenchMarkContainerStateMap.java  |  14 +-
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |   8 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |   3 +-
 64 files changed, 1506 insertions(+), 1296 deletions(-)

commit 468d59df7a8de47c087873c83dbd84b1fc03ad80
Author: Márton Elek <elek@apache.org>
Date:   Wed Oct 17 12:44:53 2018 +0200

    HDDS-527. Show SCM chill mode status in SCM UI. Contributed by Yiqun Lin.

 .../server-scm/src/main/resources/webapps/scm/scm-overview.html       | 2 +-
 hadoop-hdds/server-scm/src/main/resources/webapps/scm/scm.js          | 4 ++++
 2 files changed, 5 insertions(+), 1 deletion(-)

commit 1e31a8005071ef94ef95aebd4f7f9b51c9f6f7be
Author: Márton Elek <elek@apache.org>
Date:   Wed Oct 17 11:34:03 2018 +0200

    HDDS-563. Support hybrid VirtualHost style URL. Contributed by Bharat Viswanadham.

 .../hadoop/ozone/s3/VirtualHostStyleFilter.java    | 19 ++++++----------
 .../ozone/s3/TestVirtualHostStyleFilter.java       | 25 ++++++++++++----------
 2 files changed, 21 insertions(+), 23 deletions(-)

commit 1b1d1b886d89fb3e3e5feba83c9c412b3815f972
Author: Nandakumar <nanda@apache.org>
Date:   Wed Oct 17 13:56:54 2018 +0530

    HDDS-656. Add logic for pipeline report and action processing in new pipeline code. Contributed by Lokesh Jain.

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  19 ++
 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  | 103 ++++++----
 hadoop-hdds/common/src/main/proto/hdds.proto       |   1 +
 .../hdds/scm/pipeline/PipelineActionHandler.java   |  66 +++++++
 .../hadoop/hdds/scm/pipeline/PipelineFactory.java  |   7 +-
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  |  13 +-
 .../hdds/scm/pipeline/PipelineReportHandler.java   | 104 ++++++++++
 .../hdds/scm/pipeline/PipelineStateManager.java    | 135 ++++---------
 .../hadoop/hdds/scm/pipeline/PipelineStateMap.java |  76 +++++---
 .../hdds/scm/pipeline/RatisPipelineProvider.java   |  26 ++-
 .../hdds/scm/pipeline/SCMPipelineManager.java      |  81 +++++---
 .../hdds/scm/pipeline/SimplePipelineProvider.java  |   6 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  17 ++
 .../scm/pipeline/TestPipelineStateManager.java     | 209 +++++++++++++++------
 .../scm/pipeline/TestRatisPipelineProvider.java    |  18 +-
 .../hdds/scm/pipeline/TestSCMPipelineManager.java  | 187 ++++++++++++++++++
 .../scm/pipeline/TestSimplePipelineProvider.java   |  16 +-
 17 files changed, 804 insertions(+), 280 deletions(-)

commit de557669fdaf3a2e4708dde92e873f2a64056144
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Oct 16 15:29:53 2018 -0700

    HDDS-665. Add hdds.datanode.dir to docker-config. Contributed by Bharat Viswanadham.

 hadoop-ozone/dist/src/main/compose/ozone-hdfs/docker-config   | 1 +
 hadoop-ozone/dist/src/main/compose/ozone/docker-config        | 1 +
 hadoop-ozone/dist/src/main/compose/ozonefs/docker-config      | 1 +
 hadoop-ozone/dist/src/main/compose/ozoneperf/docker-config    | 2 ++
 hadoop-ozone/dist/src/main/compose/ozones3/docker-config      | 2 ++
 hadoop-ozone/dist/src/main/compose/ozonescripts/docker-config | 1 +
 6 files changed, 8 insertions(+)

commit 242f637de5b36cf8c2f10dea00ecc1c03d53c4af
Author: Arpit Agarwal <arp@apache.org>
Date:   Tue Oct 16 10:40:00 2018 -0700

    HDDS-378. Remove dependencies between hdds/ozone and hdfs proto files. Contributed by Elek, Marton.

 hadoop-hdds/common/pom.xml                         |  6 --
 .../src/main/proto/ScmBlockLocationProtocol.proto  |  1 -
 .../proto/StorageContainerLocationProtocol.proto   |  1 -
 hadoop-hdds/container-service/pom.xml              | 11 +---
 .../org/apache/hadoop/ozone/client/BucketArgs.java |  2 +-
 .../apache/hadoop/ozone/client/OzoneBucket.java    |  2 +-
 .../ozone/client/protocol/ClientProtocol.java      |  2 +-
 .../hadoop/ozone/client/rest/RestClient.java       |  2 +-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  2 +-
 hadoop-ozone/common/pom.xml                        |  6 --
 .../apache/hadoop/hdds/protocol/StorageType.java   | 64 ++++++++++++++++++++++
 .../ozone/client/rest/response/BucketInfo.java     |  2 +-
 .../hadoop/ozone/om/helpers/OmBucketArgs.java      |  7 +--
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      |  9 ++-
 .../hadoop/ozone/web/handlers/BucketArgs.java      |  2 +-
 .../hadoop/ozone/web/response/BucketInfo.java      |  2 +-
 .../src/main/proto/OzoneManagerProtocol.proto      | 12 +++-
 .../apache/hadoop/ozone/web/TestBucketInfo.java    |  2 +-
 .../ozone/TestStorageContainerManagerHelper.java   |  2 +-
 .../ozone/client/rest/TestOzoneRestClient.java     |  2 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  2 +-
 .../ozone/om/TestMultipleContainerReadWrite.java   |  2 +-
 .../hadoop/ozone/om/TestOmBlockVersioning.java     |  2 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |  2 +-
 .../ozone/web/handlers/BucketProcessTemplate.java  |  2 +-
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  2 +-
 .../hadoop/ozone/om/S3BucketManagerImpl.java       |  2 +-
 .../hadoop/ozone/om/TestBucketManagerImpl.java     |  2 +-
 .../hadoop/ozone/client/OzoneBucketStub.java       |  2 +-
 .../hadoop/ozone/client/OzoneVolumeStub.java       |  2 +-
 30 files changed, 102 insertions(+), 57 deletions(-)

commit add3df928e166371dba5def40d4faa9e25dbd9e3
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Tue Oct 16 10:34:16 2018 -0700

    HDDS-667. Fix TestOzoneFileInterfaces. Contributed by Mukul Kumar Singh.

 .../apache/hadoop/ozone/container/keyvalue/impl/BlockManagerImpl.java | 4 ++--
 .../src/test/java/org/apache/hadoop/ozone/MiniOzoneClusterImpl.java   | 2 ++
 2 files changed, 4 insertions(+), 2 deletions(-)

commit 0d4bbd0fea2ffd01e2d1e243fe4b2a23900904a3
Author: Márton Elek <elek@apache.org>
Date:   Tue Oct 16 15:14:05 2018 +0200

    HDDS-657. Remove {volume} path segments from all the remaining rest endpoints. Contributed by Elek, Marton.

 hadoop-ozone/dist/src/main/smoketest/s3/README.md  |  27 +++
 .../dist/src/main/smoketest/s3/__init__.robot      |  21 ++
 .../smoketest/s3/{awscli.robot => awss3.robot}     |  32 +--
 .../dist/src/main/smoketest/s3/buckethead.robot    |  34 ++++
 .../dist/src/main/smoketest/s3/bucketlist.robot    |  32 +++
 .../dist/src/main/smoketest/s3/bucketv2.robot      |  66 ------
 .../dist/src/main/smoketest/s3/bucketv4.robot      |  71 -------
 .../dist/src/main/smoketest/s3/commonawslib.robot  |  43 +++-
 .../dist/src/main/smoketest/s3/objectdelete.robot  |  72 +++++++
 .../dist/src/main/smoketest/s3/objectputget.robot  |  42 ++++
 hadoop-ozone/dist/src/main/smoketest/test.sh       |   5 +-
 .../hadoop/ozone/s3/bucket/DeleteBucket.java       |  67 -------
 .../apache/hadoop/ozone/s3/bucket/HeadBucket.java  |  61 ------
 .../apache/hadoop/ozone/s3/bucket/PutBucket.java   |  79 --------
 .../hadoop/ozone/s3/bucket/package-info.java       |  30 ---
 .../ozone/s3/commontypes/IsoDateAdapter.java       |   2 +-
 .../BucketEndpoint.java}                           | 116 +++++++++--
 .../ozone/s3/{ => endpoint}/EndpointBase.java      |  57 +++++-
 .../{bucket => endpoint}/ListBucketResponse.java   |   2 +-
 .../{object => endpoint}/ListObjectResponse.java   |  13 +-
 .../hadoop/ozone/s3/endpoint/ObjectEndpoint.java   | 222 +++++++++++++++++++++
 .../ListBucket.java => endpoint/RootEndpoint.java} |  60 +++---
 .../s3/{object => endpoint}/package-info.java      |   5 +-
 .../hadoop/ozone/s3/object/DeleteObject.java       |  51 -----
 .../apache/hadoop/ozone/s3/object/HeadObject.java  |  74 -------
 .../apache/hadoop/ozone/s3/object/PutObject.java   |  92 ---------
 .../hadoop/ozone/client/OzoneVolumeStub.java       |   3 +-
 .../TestBucketDelete.java}                         |  29 +--
 .../TestBucketGet.java}                            |  29 +--
 .../TestBucketHead.java}                           |  42 ++--
 .../{bucket => endpoint}/TestBucketResponse.java   |   4 +-
 .../TestObjectDelete.java}                         |  20 +-
 .../hadoop/ozone/s3/endpoint/TestObjectGet.java    |  80 ++++++++
 .../TestObjectHead.java}                           |  39 ++--
 .../s3/{object => endpoint}/TestPutObject.java     |  20 +-
 .../TestRootList.java}                             |  58 ++----
 .../s3/{bucket => endpoint}/package-info.java      |   4 +-
 .../hadoop/ozone/s3/object/package-info.java       |  21 --
 38 files changed, 899 insertions(+), 826 deletions(-)

commit 45cff44adf3a009b8ca28dacfc36534ab21939d4
Author: Arpit Agarwal <arp@apache.org>
Date:   Mon Oct 15 19:30:40 2018 -0700

    HDDS-439. 'ozone oz volume create' should default to current logged in user. Contributed by Dinesh Chitlangia.

 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 22 ++++++++++++++++++++++
 .../web/ozShell/volume/CreateVolumeHandler.java    |  7 +++++--
 2 files changed, 27 insertions(+), 2 deletions(-)

commit ab9ed19f5590d6c9b82b70647e5feda6b41392d1
Author: Arpit Agarwal <arp@apache.org>
Date:   Mon Oct 15 16:45:08 2018 -0700

    HDDS-490. Improve om and scm start up options . Contributed by Namit Maheshwari.

 .../hdds/scm/server/StorageContainerManager.java   |   8 +-
 .../dist/src/main/compose/ozonescripts/start.sh    |   4 +-
 hadoop-ozone/docs/content/RealCluster.md           |  10 +-
 .../org/apache/hadoop/ozone/om/TestOmInit.java     | 103 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  14 +--
 5 files changed, 121 insertions(+), 18 deletions(-)

commit c94534303f93d3d48daf372fccdae37d5a1d61da
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Mon Oct 15 11:52:38 2018 -0700

    HDDS-629. Make ApplyTransaction calls in ContainerStateMachine idempotent. Contributed by Shashikant Banerjee.

 .../ozone/container/keyvalue/KeyValueHandler.java  |  10 +-
 .../container/keyvalue/helpers/ChunkUtils.java     |  11 +-
 .../container/keyvalue/impl/BlockManagerImpl.java  |  24 +++-
 .../container/keyvalue/impl/ChunkManagerImpl.java  |  43 ++++++++
 .../TestContainerStateMachineIdempotency.java      | 121 +++++++++++++++++++++
 .../common/impl/TestContainerPersistence.java      |  17 +--
 6 files changed, 203 insertions(+), 23 deletions(-)

commit c9430c63d46e83fac7320ee97b3b6cae11c5dbd2
Author: Márton Elek <elek@apache.org>
Date:   Sun Oct 14 11:29:50 2018 +0200

    HDDS-519. Implement ListBucket REST endpoint. Contributed by LiXin Ge.

 .../apache/hadoop/ozone/s3/bucket/ListBucket.java  | 74 +++++++++++++++++
 .../hadoop/ozone/s3/bucket/ListBucketResponse.java | 55 ++++++++++++
 .../ozone/s3/commontypes/BucketMetadata.java       | 53 ++++++++++++
 .../hadoop/ozone/s3/exception/S3ErrorTable.java    |  6 +-
 .../hadoop/ozone/client/OzoneVolumeStub.java       |  7 +-
 .../hadoop/ozone/s3/bucket/TestListBucket.java     | 97 ++++++++++++++++++++++
 6 files changed, 290 insertions(+), 2 deletions(-)

commit e70f2554d515780dff6d52ff0f9bb557867721ef
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Sat Oct 13 19:15:01 2018 -0700

    HDDS-579. ContainerStateMachine should fail subsequent transactions per container in case one fails. Contributed by Shashikant Banerjee.

 .../src/main/proto/DatanodeContainerProtocol.proto |   4 +-
 .../container/common/impl/HddsDispatcher.java      |  63 +++++--
 .../ozone/container/keyvalue/KeyValueHandler.java  |  20 +--
 .../proto/StorageContainerDatanodeProtocol.proto   |   1 +
 .../rpc/TestContainerStateMachineFailures.java     | 185 +++++++++++++++++++++
 5 files changed, 242 insertions(+), 31 deletions(-)

commit 2ac9fd6dd9190efa17b29b99fa65f9227ea1bc4b
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Sat Oct 13 12:15:42 2018 -0700

    HDDS-603. Add BlockCommitSequenceId field per Container and expose it in Container Reports. Contributed by Shashikant Banerjee.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 +
 .../apache/hadoop/utils/MetadataKeyFilters.java    |   3 +-
 .../container/common/helpers/ContainerReport.java  | 205 ---------------------
 .../common/helpers/KeyValueContainerReport.java    | 117 ------------
 .../container/common/interfaces/Container.java     |   5 +
 .../container/keyvalue/KeyValueContainer.java      |   9 +-
 .../container/keyvalue/KeyValueContainerData.java  |  16 ++
 .../container/keyvalue/impl/BlockManagerImpl.java  |  21 ++-
 .../ozone/container/ozoneimpl/ContainerReader.java |   7 +
 .../proto/StorageContainerDatanodeProtocol.proto   |   1 +
 .../hadoop/ozone/om/helpers/OmKeyLocationInfo.java |   4 +
 .../apache/hadoop/ozone/client/rpc/TestBCSID.java  | 147 +++++++++++++++
 12 files changed, 208 insertions(+), 328 deletions(-)

commit 4cece8dddbc4f0947b8335d94f43f016104e1dd7
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Sat Oct 13 12:14:39 2018 -0700

    Revert "HDDS-629. Make ApplyTransaction calls in ContainerStateMachine idempotent. Contributed by Shashikant Banerjee."
    
    This reverts commit 0473b68000017cfe4f03acdcb0eedc78b509244f.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 -
 .../apache/hadoop/utils/MetadataKeyFilters.java    |   3 +-
 .../container/common/helpers/ContainerReport.java  | 205 +++++++++++++++++++++
 .../common/helpers/KeyValueContainerReport.java    | 117 ++++++++++++
 .../container/common/interfaces/Container.java     |   5 -
 .../container/keyvalue/KeyValueContainer.java      |   9 +-
 .../container/keyvalue/KeyValueContainerData.java  |  16 --
 .../container/keyvalue/impl/BlockManagerImpl.java  |  21 +--
 .../ozone/container/ozoneimpl/ContainerReader.java |   7 -
 .../proto/StorageContainerDatanodeProtocol.proto   |   1 -
 .../hadoop/ozone/om/helpers/OmKeyLocationInfo.java |   4 -
 .../apache/hadoop/ozone/client/rpc/TestBCSID.java  | 147 ---------------
 12 files changed, 328 insertions(+), 208 deletions(-)

commit a82548b5aedc8dbfb41e9bf3f9f2eb642575a33a
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Sat Oct 13 12:12:08 2018 -0700

    HDDS-629. Make ApplyTransaction calls in ContainerStateMachine idempotent. Contributed by Shashikant Banerjee.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 +
 .../apache/hadoop/utils/MetadataKeyFilters.java    |   3 +-
 .../container/common/helpers/ContainerReport.java  | 205 ---------------------
 .../common/helpers/KeyValueContainerReport.java    | 117 ------------
 .../container/common/interfaces/Container.java     |   5 +
 .../container/keyvalue/KeyValueContainer.java      |   9 +-
 .../container/keyvalue/KeyValueContainerData.java  |  16 ++
 .../container/keyvalue/impl/BlockManagerImpl.java  |  21 ++-
 .../ozone/container/ozoneimpl/ContainerReader.java |   7 +
 .../proto/StorageContainerDatanodeProtocol.proto   |   1 +
 .../hadoop/ozone/om/helpers/OmKeyLocationInfo.java |   4 +
 .../apache/hadoop/ozone/client/rpc/TestBCSID.java  | 147 +++++++++++++++
 12 files changed, 208 insertions(+), 328 deletions(-)

commit 9765d919f6001509e58e51a43603ea42a44926e1
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat Oct 13 10:41:06 2018 -0700

    HDDS-653. TestMetadataStore#testIterator fails on Windows.
    Contributed by Yiqun Lin.

 .../common/src/test/java/org/apache/hadoop/utils/TestMetadataStore.java | 2 ++
 1 file changed, 2 insertions(+)

commit 30eb3ad32d87b5b2a6d8fcef21ff879918f89127
Author: Arpit Agarwal <arp@apache.org>
Date:   Sat Oct 13 09:19:45 2018 -0700

    HDDS-654. Add ServiceLoader resource for OzoneFileSystem. Contributed by Jitendra Nath Pandey.

 .../services/org.apache.hadoop.fs.FileSystem       | 16 +++++++++
 .../hadoop/fs/ozone/TestOzoneFileSystem.java       | 39 ++++++++++++++++++++++
 2 files changed, 55 insertions(+)

commit 3d5bc1450fd972850930569ee61028025c23f8e9
Author: Márton Elek <elek@apache.org>
Date:   Sat Oct 13 15:55:57 2018 +0200

    HDDS-518. Implement PutObject Rest endpoint. Contributed by chencan.

 .../apache/hadoop/ozone/s3/object/PutObject.java   | 53 ++++++++++---
 .../hadoop/ozone/s3/object/TestPutObject.java      | 89 ++++++++++++++++++++++
 2 files changed, 131 insertions(+), 11 deletions(-)

commit c063bd3bb69876f69543b4dd1d8ebddae1e7ef32
Author: Márton Elek <elek@apache.org>
Date:   Thu Oct 11 11:30:07 2018 +0200

    HDDS-616. Collect all the robot test outputs and return with the right exit code. Contributed by Elek, Marton.

 hadoop-ozone/dist/src/main/smoketest/test.sh | 25 ++++++++++++++++++++++---
 1 file changed, 22 insertions(+), 3 deletions(-)

commit 5d74ca288edab80c9ee65b161d97faffc04c253b
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Oct 12 16:59:11 2018 -0700

    HDDS-613. Update HeadBucket, DeleteBucket to not to have volume in path. Contributed by Bharat Viswanadham.

 .../dist/src/main/smoketest/commonlib.robot        |  7 +++++
 .../dist/src/main/smoketest/s3/bucketv2.robot      | 11 +++++++
 .../dist/src/main/smoketest/s3/bucketv4.robot      | 11 +++++++
 .../dist/src/main/smoketest/s3/commonawslib.robot  |  5 +++
 .../hadoop/ozone/s3/bucket/DeleteBucket.java       |  7 ++---
 .../apache/hadoop/ozone/s3/bucket/HeadBucket.java  |  9 ++----
 .../hadoop/ozone/client/ObjectStoreStub.java       | 36 ++++++++++++++++++++--
 .../hadoop/ozone/client/OzoneVolumeStub.java       | 12 +-------
 .../hadoop/ozone/s3/bucket/TestDeleteBucket.java   | 21 +++++--------
 .../hadoop/ozone/s3/bucket/TestHeadBucket.java     | 15 +++------
 10 files changed, 86 insertions(+), 48 deletions(-)

commit 92e757a48960d1eaa0de0df0b1429b8a20850a32
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Oct 12 16:27:54 2018 -0700

    HDDS-445. Create a logger to print out all of the incoming requests.
    Contributed by Bharat Viswanadham.

 hadoop-ozone/dist/src/main/compose/ozones3/docker-config | 4 ++++
 1 file changed, 4 insertions(+)

commit 3e80bcda6d8006d88fea8ad95dc29859766e0cc1
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Oct 12 15:06:42 2018 -0700

    HDDS-646. TestChunkStreams.testErrorReadGroupInputStream fails. Contributed by Nanda kumar.

 .../src/test/java/org/apache/hadoop/ozone/om/TestChunkStreams.java      | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 33d7580e01f66ebf96d0b3115d2c4387199e6507
Author: Nandakumar <nanda@apache.org>
Date:   Sat Oct 13 03:22:20 2018 +0530

    HDDS-587. Add new classes for pipeline management. Contributed by Lokesh Jain.

 .../apache/hadoop/hdds/scm/pipeline/Pipeline.java  | 211 ++++++++++++++++++
 .../hadoop/hdds/scm/pipeline/PipelineID.java       |  80 +++++++
 .../hadoop/hdds/scm/pipeline/package-info.java     |  24 ++
 .../hadoop/hdds/scm/pipeline/PipelineFactory.java  |  56 +++++
 .../hadoop/hdds/scm/pipeline/PipelineManager.java  |  58 +++++
 .../hadoop/hdds/scm/pipeline/PipelineProvider.java |  35 +++
 .../hdds/scm/pipeline/PipelineStateManager.java    | 179 +++++++++++++++
 .../hadoop/hdds/scm/pipeline/PipelineStateMap.java | 212 ++++++++++++++++++
 .../hdds/scm/pipeline/RatisPipelineProvider.java   | 135 +++++++++++
 .../hdds/scm/pipeline/SCMPipelineManager.java      | 226 +++++++++++++++++++
 .../hdds/scm/pipeline/SimplePipelineProvider.java  |  80 +++++++
 .../hadoop/hdds/scm/pipeline/package-info.java     |  24 ++
 .../scm/pipeline/TestPipelineStateManager.java     | 246 +++++++++++++++++++++
 .../scm/pipeline/TestRatisPipelineProvider.java    | 104 +++++++++
 .../scm/pipeline/TestSimplePipelineProvider.java   | 102 +++++++++
 15 files changed, 1772 insertions(+)

commit e133e1b440e7ddefb5711f6c9983a1da9216429e
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Oct 12 14:45:01 2018 -0700

    HDDS-645. Enable OzoneFS contract tests by default.
    Contributed by Arpit Agarwal.

 hadoop-ozone/ozonefs/pom.xml | 9 +++++++++
 1 file changed, 9 insertions(+)

commit be015ab00d5314abb4789dd517d81e3342931d59
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Oct 12 14:44:51 2018 -0700

    HDDS-644. Rename dfs.container.ratis.num.container.op.threads. Contributed by Bharat Viswanadham.

 .../common/src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a382217a76ba81ecc81c18e45b4327e875fb3a56
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Oct 12 14:22:46 2018 -0700

    HDDS-624.PutBlock fails with Unexpected Storage Container Exception.
    Contributed by  Arpit Agarwal.

 .../apache/hadoop/utils/MetadataStoreBuilder.java  | 38 +++++++++++-----------
 .../apache/hadoop/utils/TestRocksDBStoreMBean.java | 19 +++++++----
 .../container/common/utils/ContainerCache.java     |  6 ++--
 .../container/keyvalue/helpers/BlockUtils.java     |  3 +-
 4 files changed, 38 insertions(+), 28 deletions(-)

commit a99269dc36dfaaa668ccc7b11c6f55e3ded83fcb
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Oct 12 13:58:53 2018 -0700

    HDDS-606. Create delete s3Bucket. Contributed by Bharat Viswanadham.

 .../apache/hadoop/ozone/client/ObjectStore.java    |  9 +++++
 .../ozone/client/protocol/ClientProtocol.java      |  8 ++++
 .../hadoop/ozone/client/rest/RestClient.java       |  7 ++++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  8 ++++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  7 ++++
 ...OzoneManagerProtocolClientSideTranslatorPB.java | 23 ++++++++++++
 .../src/main/proto/OzoneManagerProtocol.proto      | 11 ++++++
 .../ozone/client/rpc/TestOzoneRpcClient.java       | 28 ++++++++++++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  9 +++++
 .../apache/hadoop/ozone/om/S3BucketManager.java    |  7 ++++
 .../hadoop/ozone/om/S3BucketManagerImpl.java       | 25 +++++++++++++
 ...OzoneManagerProtocolServerSideTranslatorPB.java | 18 +++++++++
 .../hadoop/ozone/om/TestS3BucketManager.java       | 18 +++++++++
 .../org/apache/hadoop/ozone/s3/EndpointBase.java   | 43 ++++++++++++++++++++++
 .../hadoop/ozone/client/ObjectStoreStub.java       | 26 +++++++++++++
 15 files changed, 247 insertions(+)

commit d629029672e3f59056dfd5994176ace8ed01fafa
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Oct 12 13:33:38 2018 -0700

    HDDS-639. ChunkGroupInputStream gets into infinite loop after reading a block. Contributed by Mukul Kumar Singh.

 .../apache/hadoop/ozone/client/io/ChunkGroupInputStream.java  |  6 +++++-
 .../org/apache/hadoop/fs/ozone/TestOzoneFileInterfaces.java   | 11 ++++++++++-
 2 files changed, 15 insertions(+), 2 deletions(-)

commit 908aa33e3b3eeef4fd4e6f2673ed3b06ac37fa4c
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Oct 12 11:30:57 2018 -0700

    HDDS-641. Fix ozone filesystem robot test. Contributed by Mukul Kumar Singh.

 hadoop-ozone/dist/src/main/compose/ozonefs/docker-config     |  1 +
 hadoop-ozone/dist/src/main/compose/ozoneperf/docker-config   |  1 +
 .../dist/src/main/compose/ozonescripts/docker-config         |  1 +
 hadoop-ozone/dist/src/main/smoketest/ozonefs/ozonefs.robot   | 12 ++++++++----
 4 files changed, 11 insertions(+), 4 deletions(-)

commit fbf1d3eebd117a0a0f2f3de3b6a7886466d577d4
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Oct 12 10:51:50 2018 -0700

    HDDS-555. RandomKeyGenerator runs not closing the XceiverClient properly(addendum). Contributed by Mukul Kumar Singh.

 .../java/org/apache/hadoop/ozone/scm/TestXceiverClientMetrics.java     | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 7826735ca7fff7deb77deedc58d8dceaef6843a9
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Oct 12 10:36:30 2018 -0700

    HDDS-555. RandomKeyGenerator runs not closing the XceiverClient properly. Contributed by Mukul Kumar Singh.

 .../hadoop/hdds/scm/XceiverClientManager.java      | 17 ++++++------
 .../hdds/scm/client/ContainerOperationClient.java  | 15 +++++------
 .../ozone/client/io/ChunkGroupInputStream.java     |  2 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |  3 +--
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |  9 +++----
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  | 12 ++++-----
 .../hadoop/ozone/scm/TestXceiverClientManager.java | 30 +++++++++-------------
 7 files changed, 37 insertions(+), 51 deletions(-)

commit d327608e2866910c1dd0f763908948df5fa15665
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Oct 12 09:58:16 2018 -0700

    HDDS-524. Implement PutBucket REST endpoint. Contributed by Bharat Viswanadham.

 .../dist/src/main/smoketest/s3/bucketv2.robot      |  55 ++++++++
 .../dist/src/main/smoketest/s3/bucketv4.robot      |  60 +++++++++
 .../dist/src/main/smoketest/s3/commonawslib.robot  |  23 ++++
 .../org/apache/hadoop/ozone/s3/EndpointBase.java   |  28 ++++
 .../apache/hadoop/ozone/s3/bucket/PutBucket.java   |  51 +++++--
 .../hadoop/ozone/s3/exception/S3ErrorTable.java    |   8 +-
 .../ozone/s3/header/AuthorizationHeaderV2.java     | 100 ++++++++++++++
 .../ozone/s3/header/AuthorizationHeaderV4.java     | 147 +++++++++++++++++++++
 .../apache/hadoop/ozone/s3/header/Credential.java  |  94 +++++++++++++
 .../hadoop/ozone/s3/header/package-info.java       |  22 +++
 .../ozone/s3/header/TestAuthorizationHeaderV2.java |  88 ++++++++++++
 .../ozone/s3/header/TestAuthorizationHeaderV4.java |  81 ++++++++++++
 12 files changed, 748 insertions(+), 9 deletions(-)

commit 1faf4e973ccd06f4bda458e8ff61e8dd8196c4a4
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri Oct 12 14:00:13 2018 +0800

    HDDS-628. Fix outdated names used in HDDS documentations.

 hadoop-ozone/docs/content/Dozone.md       | 4 ++--
 hadoop-ozone/docs/content/JavaApi.md      | 2 +-
 hadoop-ozone/docs/content/OzoneManager.md | 2 +-
 hadoop-ozone/docs/content/Settings.md     | 2 +-
 4 files changed, 5 insertions(+), 5 deletions(-)

commit bc9a22fcae0945813d16e3c4cd88994de27a13f0
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Oct 11 21:03:01 2018 -0700

    HDDS-609. On restart, SCM does not exit chill mode as it expects DNs to report containers in ALLOCATED state. Contributed by Hanisha Koneru.

 .../hdds/scm/server/SCMChillModeManager.java       | 12 +++--
 .../hdds/scm/server/TestSCMChillModeManager.java   | 53 +++++++++++++++++++++-
 2 files changed, 61 insertions(+), 4 deletions(-)

commit 0aea92ce0a76cc3af3e93495e989d64965eea993
Author: Tsz Wo Nicholas Sze <szetszwo@apache.org>
Date:   Fri Oct 12 10:37:37 2018 +0800

    HDDS-625. putKey hangs for a long time after completion, sometimes forever.  Contributed by Arpit Agarwal

 .../container/common/transport/server/ratis/XceiverServerRatis.java   | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit a3ca34eaac7aad1d0692f347d2a95eb026e2cf1a
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Oct 11 17:19:38 2018 -0700

    HDDS-634. OzoneFS: support basic user group and permission for file/dir.
    Contributed by Xiaoyu Yao.

 .../org/apache/hadoop/fs/ozone/OzoneFileSystem.java     | 16 ++++++++++++++--
 .../apache/hadoop/fs/ozone/TestOzoneFileInterfaces.java | 17 +++++++++++++++--
 2 files changed, 29 insertions(+), 4 deletions(-)

commit 23d0c8abb898abc9537b069ae19ab88a68a14839
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu Oct 11 17:21:27 2018 -0700

    HDDS-636. Turn off ozone.metastore.rocksdb.statistics for now. Contributed by Arpit Agarwal.

 .../common/src/main/java/org/apache/hadoop/ozone/OzoneConfigKeys.java   | 2 +-
 hadoop-hdds/common/src/main/resources/ozone-default.xml                 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 0e75677610f5444f0fac1973a87821170cd577be
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Thu Oct 11 16:59:59 2018 -0700

    HDDS-550. Serialize ApplyTransaction calls per Container in ContainerStateMachine. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |   6 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |   4 +-
 .../hadoop/hdds/scm/storage/ChunkInputStream.java  |   2 +-
 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |   3 +-
 hadoop-hdds/common/pom.xml                         |   4 +-
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   6 +-
 .../hdds/scm/storage/ContainerProtocolCalls.java   |   2 +-
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   6 +-
 .../java/org/apache/hadoop/utils/RocksDBStore.java |   3 +-
 .../java/org/apache/hadoop/utils/db/RDBStore.java  |   3 +-
 .../main/java/org/apache/ratis/RatisHelper.java    |  14 +-
 .../src/main/proto/DatanodeContainerProtocol.proto |   1 -
 .../common/src/main/resources/ozone-default.xml    |   8 +
 .../transport/server/GrpcXceiverService.java       |   2 +-
 .../common/transport/server/XceiverServerGrpc.java |   8 +-
 .../server/ratis/ContainerStateMachine.java        | 440 ++++++---------------
 .../transport/server/ratis/XceiverServerRatis.java |  15 +-
 .../container/keyvalue/helpers/ChunkUtils.java     |   2 +-
 .../container/keyvalue/helpers/SmallFileUtils.java |   2 +-
 .../background/BlockDeletingService.java           |   2 +-
 .../replication/GrpcReplicationClient.java         |   6 +-
 .../replication/GrpcReplicationService.java        |   4 +-
 .../container/common/impl/TestHddsDispatcher.java  |   2 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |   5 +
 .../rpc/TestCloseContainerHandlingByClient.java    |   1 -
 .../ozone/container/ContainerTestHelper.java       |   3 +-
 .../common/impl/TestCloseContainerHandler.java     |   2 +-
 .../container/server/TestContainerServer.java      |   1 -
 .../server/TestContainerStateMachine.java          | 201 ----------
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |   2 +-
 30 files changed, 191 insertions(+), 569 deletions(-)

commit 3e622b2a5c903e4cec6bc320795d911042652336
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Oct 11 15:02:18 2018 -0700

    HDDS-627. OzoneFS read from an MR Job throws java.lang.ArrayIndexOutOfBoundsException. Contributed by Mukul Kumar Singh.

 .../java/org/apache/hadoop/ozone/client/io/ChunkGroupInputStream.java  | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit d6badb85ce03a80792267f1bd908f404f84cf2d0
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Oct 11 13:20:32 2018 -0700

    HDDS-601. On restart, SCM throws 'No such datanode' exception.

 .../states/endpoint/RegisterEndpointTask.java      |   2 +-
 .../protocol/StorageContainerNodeProtocol.java     |   8 ++
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |   7 ++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  26 +++--
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java | 107 +++++++++++++--------
 .../hadoop/hdds/scm/container/MockNodeManager.java |  11 +++
 .../hadoop/hdds/scm/node/TestNodeManager.java      |  53 ----------
 .../server/TestSCMDatanodeHeartbeatDispatcher.java |  41 +++++++-
 .../testutils/ReplicationNodeManagerMock.java      |  11 +++
 9 files changed, 164 insertions(+), 102 deletions(-)

commit 2747255b68c12ec7f905e5446f32c7853395c46f
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu Oct 11 09:20:11 2018 -0700

    HDDS-630. Rename KSM to OM in Hdds.md. Contributed by Takanobu Asanuma.

 hadoop-ozone/docs/content/Hdds.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3219b7bdd558d236c34111182d52d73af17eaa24
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed Oct 10 17:37:20 2018 -0700

    HDDS-619. hdds.db.profile should not be tagged as a required setting & should default to DISK. Contributed by Dinesh Chitlangia.

 .../common/src/main/java/org/apache/hadoop/hdds/HddsConfigKeys.java   | 2 +-
 hadoop-hdds/common/src/main/resources/ozone-default.xml               | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 24c213874de6c3357b49515b487bcb4dd749f435
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Oct 10 20:50:49 2018 +0530

    HDDS-608. Access denied exception for user hdfs while making getContainerWithPipeline call. Contributed by Mukul Kumar Singh.

 .../java/org/apache/hadoop/hdds/scm/server/SCMClientProtocolServer.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fecc8002a2075c01fef1dfa5a52679885c749d15
Author: Márton Elek <elek@apache.org>
Date:   Wed Oct 10 15:23:00 2018 +0200

    HDDS-517. Implement HeadObject REST endpoint. Contributed by LiXin Ge.

 .../hadoop/ozone/s3/exception/S3ErrorTable.java    |  5 +-
 .../apache/hadoop/ozone/s3/object/HeadObject.java  | 38 ++++++---
 .../hadoop/ozone/client/OzoneBucketStub.java       |  6 +-
 .../hadoop/ozone/s3/object/TestHeadObject.java     | 95 ++++++++++++++++++++++
 4 files changed, 131 insertions(+), 13 deletions(-)

commit 8862959f3bdfaf3265dfebed2e153161c8d94778
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Oct 9 18:18:19 2018 -0700

    HDDS-443. Create reusable ProgressBar utility for freon tests.
    Contributed by Zsolt Horvath.

 hadoop-ozone/tools/pom.xml                         |   6 +
 .../org/apache/hadoop/ozone/freon/ProgressBar.java | 210 +++++++++++++++++++++
 .../apache/hadoop/ozone/freon/TestProgressBar.java | 112 +++++++++++
 3 files changed, 328 insertions(+)

commit 2215a4d0f7d3bf9bd4ea9bb6d1ba24700ad4d146
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Wed Oct 10 10:16:57 2018 +0900

    HADOOP-15832. Upgrade BouncyCastle to 1.60. Contributed by Robert Kanter.

 hadoop-hdds/server-scm/pom.xml     | 2 +-
 hadoop-ozone/ozone-manager/pom.xml | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 945c9e41ff5e1e124987afe106644db48316b2f0
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Oct 9 17:52:06 2018 -0700

    HDDS-604. Correct Ozone getOzoneConf description.
    Contributed by Dinesh Chitlangia.

 hadoop-ozone/common/src/main/bin/ozone          |  4 ++--
 hadoop-ozone/common/src/main/bin/start-ozone.sh | 10 +++++-----
 hadoop-ozone/common/src/main/bin/stop-ozone.sh  | 10 +++++-----
 hadoop-ozone/docs/content/CommandShell.md       |  2 +-
 4 files changed, 13 insertions(+), 13 deletions(-)

commit 88645d6d0fb9e70baaa3ef1eec789021121ad996
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Oct 9 17:16:52 2018 -0700

    HDDS-568. ozone sh volume info, update, delete operations fail when volume name is not prefixed by /.
    Contributed by Dinesh Chitlangia.

 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 48 ++++++++++++++++++++++
 .../apache/hadoop/ozone/web/ozShell/Handler.java   | 28 +++++++++++++
 .../web/ozShell/volume/DeleteVolumeHandler.java    | 12 +-----
 .../web/ozShell/volume/InfoVolumeHandler.java      | 22 +---------
 .../web/ozShell/volume/UpdateVolumeHandler.java    | 12 +-----
 5 files changed, 79 insertions(+), 43 deletions(-)

commit 426d922db45ab1ff1ca2df26c283e74bbd445090
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Oct 9 16:57:39 2018 -0700

    HDDS-559. fs.default.name is deprecated.
    Contributed by  Dinesh Chitlangia.

 hadoop-ozone/docs/content/OzoneFS.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 011b3095489e7eeb75aabc70607fb7f1a5a40f72
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Oct 9 16:44:32 2018 -0700

    HDDS-478. Log files related to each daemon doesn't have proper startup and shutdown logs.
    Contributed by Dinesh Chitlangia.

 .../common/src/main/conf/om-audit-log4j2.properties        | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

commit bc728f26713488f00aede829eb0fa7ab26dd1c31
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Oct 9 15:21:02 2018 -0700

    HDDS-583. SCM returns zero as the return code, even when invalid options are passed. Contributed by Namit Maheshwari.

 .../java/org/apache/hadoop/hdds/scm/server/StorageContainerManager.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3af3dafcfef5b7b2e1410ff47fb5c276357dbb04
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Oct 9 13:37:42 2018 -0700

    HDDS-577. Support S3 buckets as first class objects in Ozone Manager - 2.
    Contributed by Bharat Viswanadham.

 .../apache/hadoop/ozone/client/ObjectStore.java    |  48 ++++++
 .../ozone/client/protocol/ClientProtocol.java      |  35 ++++
 .../hadoop/ozone/client/rest/RestClient.java       |  25 +++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  32 ++++
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  25 +++
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  51 ++++++
 .../src/main/proto/OzoneManagerProtocol.proto      |  32 ++++
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  34 ++++
 .../org/apache/hadoop/ozone/om/OzoneManager.java   |  23 +++
 .../hadoop/ozone/om/S3BucketManagerImpl.java       |  11 ++
 ...OzoneManagerProtocolServerSideTranslatorPB.java | 187 +++++++++++++--------
 11 files changed, 429 insertions(+), 74 deletions(-)

commit 2a7fe45c3813709a9972fa37ee4f21b46e63fb4d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Oct 9 12:43:04 2018 -0700

    HDDS-585. Handle common request identifiers in a transparent way. Contributed by Elek Marton.

 .../s3/CommonHeadersContainerResponseFilter.java   |  9 ++++
 .../org/apache/hadoop/ozone/s3/EndpointBase.java   | 23 ++---------
 .../apache/hadoop/ozone/s3/RequestIdentifier.java  | 48 ++++++++++++++++++++++
 .../hadoop/ozone/s3/bucket/DeleteBucket.java       | 15 +++----
 .../apache/hadoop/ozone/s3/bucket/HeadBucket.java  | 21 ++++------
 .../ozone/s3/exception/OS3ExceptionMapper.java     |  9 ++++
 .../hadoop/ozone/s3/exception/S3ErrorTable.java    |  5 +--
 .../hadoop/ozone/s3/bucket/TestDeleteBucket.java   |  5 +--
 .../hadoop/ozone/s3/bucket/TestHeadBucket.java     |  5 +--
 .../ozone/s3/exception/TestOS3Exception.java       |  3 +-
 10 files changed, 90 insertions(+), 53 deletions(-)

commit dc532c79e7c83d95e5881cf37afa2468b83e6186
Author: Arpit Agarwal <arp@apache.org>
Date:   Tue Oct 9 11:04:43 2018 -0700

    HDDS-590. Add unit test for HDDS-583. Contributed by Namit Maheshwari.

 .../apache/hadoop/ozone/TestStorageContainerManager.java    | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 65012797340c55aa7fd2aff38336d724ff6f33ce
Author: Márton Elek <elek@apache.org>
Date:   Tue Oct 9 19:04:04 2018 +0200

    HDDS-602. Bump Ozone version to 0.4.0-SNAPSHOT after ozone-0.3 branch cut.

 hadoop-hdds/client/pom.xml               | 4 ++--
 hadoop-hdds/common/pom.xml               | 6 +++---
 hadoop-hdds/container-service/pom.xml    | 4 ++--
 hadoop-hdds/framework/pom.xml            | 4 ++--
 hadoop-hdds/pom.xml                      | 2 +-
 hadoop-hdds/server-scm/pom.xml           | 4 ++--
 hadoop-hdds/tools/pom.xml                | 4 ++--
 hadoop-ozone/client/pom.xml              | 4 ++--
 hadoop-ozone/common/pom.xml              | 4 ++--
 hadoop-ozone/datanode/pom.xml            | 4 ++--
 hadoop-ozone/dist/pom.xml                | 4 ++--
 hadoop-ozone/docs/pom.xml                | 4 ++--
 hadoop-ozone/integration-test/pom.xml    | 4 ++--
 hadoop-ozone/objectstore-service/pom.xml | 4 ++--
 hadoop-ozone/ozone-manager/pom.xml       | 4 ++--
 hadoop-ozone/ozonefs/pom.xml             | 4 ++--
 hadoop-ozone/pom.xml                     | 6 +++---
 hadoop-ozone/s3gateway/pom.xml           | 4 ++--
 hadoop-ozone/tools/pom.xml               | 4 ++--
 19 files changed, 39 insertions(+), 39 deletions(-)

commit 166356bd4e3d80e23ccc2b1bf0f9d9da0dee4b2d
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Oct 9 18:23:05 2018 +0530

    HDDS-599. Fix TestOzoneConfiguration TestOzoneConfigurationFields. Contributed by Sandeep Nemuri.

 .../common/src/main/resources/ozone-default.xml     | 21 ---------------------
 1 file changed, 21 deletions(-)

commit a08b7e51000699d06d344105958d9ead93d712e7
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Oct 9 18:07:01 2018 +0530

    HDDS-450. Generate BlockCommitSequenceId in ContainerStateMachine for every commit operation in Ratis. Contributed by Shashikant Banerjee.

 .../hadoop/hdds/scm/storage/ChunkOutputStream.java | 12 ++++++++-
 .../hdds/scm/storage/ContainerProtocolCalls.java   | 25 +++++++++--------
 .../ozone/container/common/helpers/BlockData.java  | 12 +++++++++
 .../src/main/proto/DatanodeContainerProtocol.proto |  2 ++
 .../server/ratis/ContainerStateMachine.java        | 31 ++++++++++++++++++----
 .../container/keyvalue/helpers/BlockUtils.java     |  5 +++-
 .../container/keyvalue/impl/BlockManagerImpl.java  |  1 -
 .../ozone/client/io/ChunkGroupOutputStream.java    | 16 ++++++++---
 .../hadoop/ozone/om/helpers/OmKeyLocationInfo.java | 17 +++++++++---
 .../src/main/proto/OzoneManagerProtocol.proto      |  1 +
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  |  4 ++-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  2 ++
 12 files changed, 99 insertions(+), 29 deletions(-)

commit 3df6bba35b93b34c2f3071b43e661c8442b597af
Author: Márton Elek <elek@apache.org>
Date:   Mon Oct 8 15:33:46 2018 +0200

    HDDS-521. Implement DeleteBucket REST endpoint. Contributed by Bharat Viswanadham.

 .../hadoop/ozone/s3/bucket/DeleteBucket.java       |  35 ++++++-
 .../hadoop/ozone/s3/exception/S3ErrorTable.java    |   5 +
 .../hadoop/ozone/client/OzoneVolumeStub.java       |  23 ++++-
 .../hadoop/ozone/s3/bucket/TestDeleteBucket.java   | 109 +++++++++++++++++++++
 .../hadoop/ozone/s3/bucket/TestHeadBucket.java     |   4 +-
 5 files changed, 168 insertions(+), 8 deletions(-)

commit ff0a2aba6bfb64ffdca8e6e81edfe5eab0f51f11
Author: Ajay Kumar <ajay@apache.com>
Date:   Fri Oct 5 14:02:54 2018 -0700

    HDDS-571. Update SCM chill mode exit criteria to optionally wait for n datanodes. Contributed by Ajay Kumar.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  3 ++
 .../common/src/main/resources/ozone-default.xml    |  9 ++++
 .../hdds/scm/server/SCMChillModeManager.java       | 63 +++++++++++++++++++++-
 .../hdds/scm/server/TestSCMChillModeManager.java   | 41 +++++++++++++-
 4 files changed, 113 insertions(+), 3 deletions(-)

commit 18cf6b17f653e344975f5e96bc56824a1baded13
Author: Márton Elek <elek@apache.org>
Date:   Fri Oct 5 13:32:45 2018 +0200

    HDDS-512. Addendum: update test.sh to remove robot framework & python-pip installation. Contributed by Dinesh Chitlangia.

 hadoop-ozone/dist/src/main/smoketest/test.sh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 174200ab80447dcb97b93bdf749fc5a51d1d93b0
Author: Márton Elek <elek@apache.org>
Date:   Fri Oct 5 12:37:01 2018 +0200

    HDDS-512. update test.sh to remove robot framework & python-pip installation. Contributed by Dinesh Chitlangia.

 hadoop-ozone/dist/src/main/smoketest/test.sh | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 0d78d45b76c602f1c48ab24dc8d11b7b5b1bbfad
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Oct 5 16:46:41 2018 +0530

    HDDS-575. LoadExistingContainers should be moved to SCMContainerManager from ContainerStateManager. Contributed by Mukul Kumar Singh.

 .../hdds/scm/container/ContainerStateManager.java  | 49 ++++------------------
 .../hdds/scm/container/SCMContainerManager.java    | 32 ++++++++++++++
 2 files changed, 41 insertions(+), 40 deletions(-)

commit 0396d4964d1cc222481b828a67f8c8f3d3f5a0d1
Author: Márton Elek <elek@apache.org>
Date:   Fri Oct 5 04:33:19 2018 -0400

    HDDS-578. om-audit-log4j2.properties must be packaged in ozone-dist . Contributed by Dinesh Chitlangia.

 hadoop-ozone/dist/dev-support/bin/dist-layout-stitching | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 317bbd0eb6d4713a83a7aab0e82211b416e0c295
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Oct 4 22:32:18 2018 -0700

    HDDS-479. Add more ozone fs tests in the robot integration framework.
    Contributed by  Nilotpal Nandi.

 .../dist/src/main/smoketest/ozonefs/ozonefs.robot  | 75 +++++++++++++++++++++-
 1 file changed, 74 insertions(+), 1 deletion(-)

commit d8efe0a448e8da6d060623ac0b0eb7c006f94dbd
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Oct 4 21:39:29 2018 -0700

    HDDS-354. VolumeInfo.getScmUsed throws NPE. Contributed by Hanisha Koneru.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  11 --
 .../states/endpoint/VersionEndpointTask.java       |  44 ++---
 .../container/common/utils/HddsVolumeUtil.java     |   2 +-
 .../ozone/container/common/volume/VolumeSet.java   | 178 +++++++++++----------
 .../container/keyvalue/KeyValueContainer.java      |   6 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  |   4 +-
 6 files changed, 129 insertions(+), 116 deletions(-)

commit bda2e78da6eebf1d4f2d773a9a1289709d00a5c6
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Oct 4 21:40:13 2018 -0700

    HDDS-572. Support S3 buckets as first class objects in Ozone Manager - 1.
    Contributed by Anu Engineer.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 +
 .../apache/hadoop/ozone/om/OMMetadataManager.java  |   6 +
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  14 ++
 .../apache/hadoop/ozone/om/OzoneManagerLock.java   |  58 +++++-
 .../apache/hadoop/ozone/om/S3BucketManager.java    |  59 +++++++
 .../hadoop/ozone/om/S3BucketManagerImpl.java       | 194 +++++++++++++++++++++
 .../hadoop/ozone/om/exceptions/OMException.java    |   5 +-
 .../hadoop/ozone/om/TestOzoneManagerLock.java      |   3 +-
 .../hadoop/ozone/om/TestS3BucketManager.java       | 115 ++++++++++++
 9 files changed, 443 insertions(+), 12 deletions(-)

commit 4a3efe140816fac3cc661ae3cff393ed566e6755
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Oct 4 21:26:58 2018 -0700

    HDDS-565. TestContainerPersistence fails regularly in Jenkins. Contributed by Dinesh Chitlangia.

 .../hadoop/ozone/container/common/impl/TestContainerPersistence.java   | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 28b5a37a7bf296e754a25287cdbdd360bb1df9fd
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Oct 3 16:00:39 2018 +0530

    HDDS-567. Rename Mapping to ContainerManager in SCM. Contributed by Nanda kumar.

 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |   6 +-
 .../block/DatanodeDeletedBlockTransactions.java    |  10 +-
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |   8 +-
 .../hdds/scm/block/SCMBlockDeletingService.java    |  15 +--
 .../scm/container/CloseContainerEventHandler.java  |   4 +-
 .../hdds/scm/container/CloseContainerWatcher.java  |   4 +-
 .../{Mapping.java => ContainerManager.java}        |   7 +-
 .../hdds/scm/container/ContainerReportHandler.java |  12 +--
 .../hdds/scm/container/ContainerStateManager.java  |   8 +-
 ...tainerMapping.java => SCMContainerManager.java} |  14 +--
 .../hdds/scm/server/SCMClientProtocolServer.java   |  22 ++---
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |   2 +-
 .../hdds/scm/server/StorageContainerManager.java   |  36 +++----
 .../hadoop/hdds/scm/block/TestBlockManager.java    |   6 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |   8 +-
 .../container/TestCloseContainerEventHandler.java  |   4 +-
 .../scm/container/TestContainerReportHandler.java  |  10 +-
 .../scm/container/TestContainerStateManager.java   |   2 +-
 ...erMapping.java => TestSCMContainerManager.java} | 108 ++++++++++-----------
 .../hdds/scm/node/TestContainerPlacement.java      |   9 +-
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  |   4 +-
 .../ozone/container/TestCloseContainerWatcher.java |  12 +--
 .../TestContainerStateManagerIntegration.java      |  52 +++++-----
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |  21 ++--
 .../hadoop/hdds/scm/pipeline/TestNodeFailure.java  |  18 ++--
 .../hdds/scm/pipeline/TestPipelineClose.java       |  28 +++---
 .../hadoop/hdds/scm/pipeline/TestSCMRestart.java   |  33 +++----
 .../org/apache/hadoop/ozone/OzoneTestUtils.java    |   6 +-
 .../ozone/client/rest/TestOzoneRestClient.java     |   2 +-
 .../rpc/TestCloseContainerHandlingByClient.java    |   6 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |   2 +-
 .../commandhandler/TestBlockDeletion.java          |   3 +-
 .../TestCloseContainerByPipeline.java              |   6 +-
 .../commandhandler/TestCloseContainerHandler.java  |   2 +-
 .../apache/hadoop/ozone/om/TestScmChillMode.java   |  12 +--
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  12 ++-
 36 files changed, 260 insertions(+), 254 deletions(-)

commit 9453fb71b201863daba33d93bfcd903278402266
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Oct 3 15:15:43 2018 +0530

    HDDS-526. Clean previous chill mode code from NodeManager. Contributed by Ajay Kumar.

 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |   7 +-
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |  20 ----
 .../hadoop/hdds/scm/node/NodeManagerMXBean.java    |  19 ----
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 109 ------------------
 .../apache/hadoop/hdds/scm/server/SCMMXBean.java   |  12 ++
 .../hdds/scm/server/StorageContainerManager.java   |  15 +++
 .../hadoop/hdds/scm/container/MockNodeManager.java |  58 ----------
 .../hdds/scm/node/TestContainerPlacement.java      |   6 -
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 123 +--------------------
 .../testutils/ReplicationNodeManagerMock.java      |  58 ----------
 .../TestContainerStateManagerIntegration.java      |   1 +
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   4 +-
 .../org/apache/hadoop/ozone/scm/TestSCMMXBean.java |  38 ++-----
 13 files changed, 47 insertions(+), 423 deletions(-)

commit 2b3d913de89d51ddd72a7df7eefadae65202c114
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Oct 2 20:13:59 2018 -0700

    HDDS-520. Implement HeadBucket REST endpoint. Contributed by Bharat Viswanadham.

 .../org/apache/hadoop/ozone/s3/EndpointBase.java   | 15 ++++
 .../apache/hadoop/ozone/s3/bucket/HeadBucket.java  | 67 +++++++++++++++
 .../hadoop/ozone/s3/bucket/TestHeadBucket.java     | 95 ++++++++++++++++++++++
 3 files changed, 177 insertions(+)

commit f5700c183cc0e909ec2ae7d63fa20db8e7cc057a
Author: Sunil G <sunilg@apache.org>
Date:   Tue Oct 2 22:41:41 2018 +0530

    Changed version in trunk to 3.3.0-SNAPSHOT.

 hadoop-hdds/pom.xml  | 2 +-
 hadoop-ozone/pom.xml | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit ed0d40d8e55548809cbd1f0ae24206f32f91084e
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Oct 2 19:47:15 2018 +0530

    HDDS-561. Move Node2ContainerMap and Node2PipelineMap to NodeManager. Contributed by Lokesh Jain.

 .../hdds/scm/container/ContainerReportHandler.java | 16 ++--
 .../hadoop/hdds/scm/node/DeadNodeHandler.java      | 11 +--
 .../hadoop/hdds/scm/node/NewNodeHandler.java       |  9 +--
 .../apache/hadoop/hdds/scm/node/NodeManager.java   | 61 +++++++++++++++
 .../hadoop/hdds/scm/node/NodeStateManager.java     | 88 +++++++++++++++++++++-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 83 ++++++++++++++++++++
 .../hdds/scm/node/SCMNodeStorageStatMap.java       |  2 +-
 .../hadoop/hdds/scm/node/StaleNodeHandler.java     |  9 +--
 .../hdds/scm/node/states/Node2ContainerMap.java    |  2 +-
 .../states}/Node2PipelineMap.java                  |  0
 .../hdds/scm/pipelines/PipelineSelector.java       | 18 ++---
 .../hdds/scm/server/StorageContainerManager.java   | 14 ++--
 .../hadoop/hdds/scm/container/MockNodeManager.java | 87 +++++++++++++++++++++
 .../scm/container/TestContainerReportHandler.java  | 14 ++--
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  | 27 +++----
 .../testutils/ReplicationNodeManagerMock.java      | 82 ++++++++++++++++++++
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |  2 +-
 .../hdds/scm/pipeline/TestPipelineClose.java       |  2 +-
 18 files changed, 445 insertions(+), 82 deletions(-)

commit edf016ccab88b352190e2bb97fcbadc89d5c61b1
Author: Márton Elek <elek@apache.org>
Date:   Tue Oct 2 10:00:10 2018 -0400

    HDDS-560. Create Generic exception class to be used by S3 rest services. Contributed by Bharat Viswanadham.

 hadoop-ozone/s3gateway/pom.xml                     |   5 +
 .../org/apache/hadoop/ozone/s3/EndpointBase.java   |  19 ++-
 .../hadoop/ozone/s3/exception/OS3Exception.java    | 161 +++++++++++++++++++++
 .../ozone/s3/exception/OS3ExceptionMapper.java     |  41 ++++++
 .../hadoop/ozone/s3/exception/S3ErrorTable.java    |  81 +++++++++++
 .../hadoop/ozone/s3/exception/package-info.java    |  21 +++
 .../apache/hadoop/ozone/s3/object/ListObject.java  |   3 +-
 .../hadoop/ozone/s3/bucket/TestGetBucket.java      |   7 +-
 .../ozone/s3/exception/TestOS3Exception.java       |  49 +++++++
 .../hadoop/ozone/s3/exception/package-info.java    |  22 +++
 10 files changed, 401 insertions(+), 8 deletions(-)

commit 3b6031e3c8392abd91aad24a99d46859c3bbea3c
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Oct 1 15:04:20 2018 -0700

    HDDS-562. Create acceptance test to test aws cli with the s3 gateway. Contributed by Elek Marton.

 .../dist/src/main/smoketest/s3/awscli.robot        | 63 ++++++++++++++++++++++
 hadoop-ozone/dist/src/main/smoketest/test.sh       |  3 +-
 2 files changed, 65 insertions(+), 1 deletion(-)

commit 377645fb5b430951a32f079c0870c4ee11a251b9
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Oct 1 13:16:08 2018 -0700

    HDDS-525. Support virtual-hosted style URLs. Contributed by Bharat Viswanadham

 .../common/src/main/resources/ozone-default.xml    |  78 +++++++++-
 hadoop-ozone/integration-test/pom.xml              |   4 +
 .../hadoop/ozone/TestOzoneConfigurationFields.java |   4 +-
 .../hadoop/ozone/s3/S3GatewayConfigKeys.java       |   1 +
 .../hadoop/ozone/s3/VirtualHostStyleFilter.java    | 143 ++++++++++++++++++
 .../ozone/s3/TestVirtualHostStyleFilter.java       | 163 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/s3/package-info.java   |  21 +++
 7 files changed, 411 insertions(+), 3 deletions(-)

commit 132f8442079f2f1634057b1251d17dee69af1f52
Author: Ajay Kumar <ajay@apache.com>
Date:   Mon Oct 1 11:21:26 2018 -0700

    HDDS-557. DeadNodeHandler should handle exception from removeContainerHandler api. Contributed by Ajay Kumar.

 .../hadoop/hdds/scm/node/DeadNodeHandler.java      | 16 +++++++++++++--
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  | 23 ++++++++++++++++++++++
 2 files changed, 37 insertions(+), 2 deletions(-)

commit badcb94160f2a70375c7d0848bd14f2362d74aed
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Oct 1 13:49:55 2018 +0530

    HDDS-325. Add event watcher for delete blocks command. Contributed by Lokesh Jain.

 .../scm/container/common/helpers/Pipeline.java     |  4 +
 .../report/CommandStatusReportPublisher.java       |  2 +-
 .../common/statemachine/StateContext.java          | 58 ++++++++------
 .../CloseContainerCommandHandler.java              |  3 +-
 .../commandhandler/CommandHandler.java             |  7 +-
 .../commandhandler/DeleteBlocksCommandHandler.java | 43 +++++-----
 .../ReplicateContainerCommandHandler.java          |  3 +-
 .../states/endpoint/HeartbeatEndpointTask.java     | 33 +++++++-
 .../ozone/container/ozoneimpl/ContainerReader.java | 20 +++++
 .../protocol/StorageContainerDatanodeProtocol.java | 13 ---
 .../protocol/commands/CommandForDatanode.java      |  8 +-
 .../ozone/protocol/commands/CommandStatus.java     | 41 +++++++---
 .../commands/DeleteBlockCommandStatus.java         | 92 ++++++++++++++++++++++
 ...inerDatanodeProtocolClientSideTranslatorPB.java | 17 ----
 ...inerDatanodeProtocolServerSideTranslatorPB.java | 16 ----
 .../proto/StorageContainerDatanodeProtocol.proto   | 11 +--
 .../hadoop/ozone/container/common/ScmTestMock.java | 24 ++----
 .../common/report/TestReportPublisher.java         |  4 +-
 .../states/endpoint/TestHeartbeatEndpointTask.java | 12 +--
 .../block/DatanodeDeletedBlockTransactions.java    | 20 +++--
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java | 24 +++++-
 .../hdds/scm/block/SCMBlockDeletingService.java    |  2 +-
 .../scm/command/CommandStatusReportHandler.java    | 10 ++-
 .../hdds/scm/container/ContainerMapping.java       | 19 ++---
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   | 19 +++--
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java | 11 ++-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 22 ------
 .../hdds/scm/server/StorageContainerManager.java   | 12 +++
 .../commands/RetriableDatanodeEventWatcher.java    | 58 ++++++++++++++
 .../ozone/protocol/commands/package-info.java      | 18 +++++
 .../command/TestCommandStatusReportHandler.java    | 12 +--
 .../server/TestSCMDatanodeHeartbeatDispatcher.java |  2 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  3 +
 .../commandhandler/TestBlockDeletion.java          | 83 ++++++++++++++++---
 34 files changed, 503 insertions(+), 223 deletions(-)

commit e6a16164ef5af4c86f53778c2bfa62df8580a8e9
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Sep 28 14:00:24 2018 -0700

    HDDS-391. Simplify Audit Framework to make audit logging easier to use.
    Contributed by Dinesh Chitlangia.

 .../org/apache/hadoop/ozone/audit/AuditLogger.java | 44 ++---------
 .../apache/hadoop/ozone/audit/AuditMessage.java    | 77 ++++++++++++++++--
 .../org/apache/hadoop/ozone/audit/Auditor.java     | 33 ++++++++
 .../apache/hadoop/ozone/audit/package-info.java    | 16 ++--
 .../hadoop/ozone/audit/TestOzoneAuditLogger.java   | 89 ++++++++++-----------
 .../common/src/test/resources/log4j2.properties    |  4 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 90 ++++++++++++----------
 7 files changed, 213 insertions(+), 140 deletions(-)

commit d7731f076d4750d866c1c77160701fc4ad3e9cca
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Sep 28 13:06:50 2018 -0700

    HDDS-455. Ozone genconf tool must use picocli. Contributed by Dinesh Chitlangia.

 hadoop-ozone/docs/content/Settings.md              |   2 +-
 .../GenerateOzoneRequiredConfigurations.java       | 130 +++++++---------
 .../TestGenerateOzoneRequiredConfigurations.java   | 167 ++++++++++++++-------
 3 files changed, 167 insertions(+), 132 deletions(-)

commit fc2faf92522ee4a1de1c0e25b5176a7948dffdd3
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Sep 28 11:24:42 2018 -0700

    HDDS-289. Volume and Bucket name should not contain a delimiter ('/'). Contributed by chencan.

 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 55 ++++++++++++++++------
 .../web/ozShell/bucket/CreateBucketHandler.java    | 13 +++--
 .../web/ozShell/bucket/InfoBucketHandler.java      | 14 ++++--
 .../web/ozShell/bucket/ListBucketHandler.java      | 12 ++++-
 .../ozone/web/ozShell/keys/ListKeyHandler.java     | 13 +++--
 .../web/ozShell/volume/CreateVolumeHandler.java    | 21 ++++++---
 .../web/ozShell/volume/InfoVolumeHandler.java      | 16 +++++--
 7 files changed, 108 insertions(+), 36 deletions(-)

commit c0aad76114d00abba50ec49fef368ed87d8143c4
Author: Ajay Kumar <ajay@apache.com>
Date:   Fri Sep 28 10:33:17 2018 -0700

    HDDS-448. Move NodeStat to NodeStatemanager from SCMNodeManager. Contributed by LiXin Ge.

 .../placement/algorithms/SCMCommonPolicy.java      |  4 +-
 .../container/placement/metrics/SCMNodeMetric.java |  1 +
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |  3 +-
 .../hadoop/hdds/scm/node/NodeStateManager.java     | 54 ++++++++++++++---
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 49 +++++++++-------
 .../hadoop/hdds/scm/node/states/NodeStateMap.java  | 68 ++++++++++++++++++++--
 .../hadoop/hdds/scm/container/MockNodeManager.java |  9 ++-
 .../hdds/scm/node/TestNodeReportHandler.java       |  5 +-
 .../testutils/ReplicationNodeManagerMock.java      |  3 +-
 9 files changed, 155 insertions(+), 41 deletions(-)

commit dcc883e6949503599cb5071d9c31427f73a2d112
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Sep 27 16:03:49 2018 -0700

    HDDS-551. Fix the close container status check in CloseContainerCommandHandler. Contributed by Shashikant Banerjee.

 .../commandhandler/CloseContainerCommandHandler.java          | 11 +++++++++++
 .../hadoop/ozone/container/ozoneimpl/OzoneContainer.java      |  9 ---------
 2 files changed, 11 insertions(+), 9 deletions(-)

commit 08d13cee3984604a5ff88f46e9b1a60bddfa934c
Author: Ajay Kumar <ajay@apache.com>
Date:   Thu Sep 27 09:56:30 2018 -0700

    HDDS-401. Update storage statistics on dead node. Contributed by LiXin Ge.

 .../hadoop/hdds/scm/node/DeadNodeHandler.java      |   7 +-
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |   7 ++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  16 +++
 .../hdds/scm/server/StorageContainerManager.java   |   2 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  15 +++
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  | 109 +++++++++++++++++----
 .../testutils/ReplicationNodeManagerMock.java      |   9 ++
 7 files changed, 145 insertions(+), 20 deletions(-)

commit e738b22a562b6a719cf8a69402ee07e9bd1981f9
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Sep 26 09:15:25 2018 +0530

    HDDS-554. In XceiverClientSpi, implement sendCommand(..) using sendCommandAsync(..). Contributed by Tsz Wo Nicholas Sze.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 23 ----------------
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 32 ++--------------------
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   | 10 +++++--
 3 files changed, 10 insertions(+), 55 deletions(-)

commit 76a0d5bc32fb3f4f4c52800d141f2ce698f0a8b6
Author: Ajay Kumar <ajay@apache.com>
Date:   Tue Sep 25 12:50:51 2018 -0700

    HDDS-370. Add and implement following functions in SCMClientProtocolServer. Contributed by Ajay Kumar.

 .../protocol/StorageContainerLocationProtocol.java |  16 +
 ...inerLocationProtocolClientSideTranslatorPB.java |  42 +++
 ...inerLocationProtocolServerSideTranslatorPB.java |  32 ++
 .../proto/StorageContainerLocationProtocol.proto   |  27 ++
 .../hdds/scm/server/SCMChillModeManager.java       |   8 +-
 .../hdds/scm/server/SCMClientProtocolServer.java   |  22 ++
 .../hdds/scm/server/StorageContainerManager.java   |   8 +
 .../hadoop/ozone/TestStorageContainerManager.java  | 151 ----------
 .../apache/hadoop/ozone/om/TestScmChillMode.java   | 330 ++++++++++++++++-----
 9 files changed, 414 insertions(+), 222 deletions(-)

commit ea440ce338150fa8019b519e2507e0a189f5920c
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Sep 24 21:56:36 2018 -0700

    HDDS-444. Add rest service to the s3gateway. Contributed by Elek Marton.

 .../org/apache/hadoop/hdds/cli/GenericCli.java     |   2 +-
 .../apache/hadoop/ozone/client/ObjectStore.java    |  12 +-
 .../apache/hadoop/ozone/client/OzoneBucket.java    |  24 +++-
 .../apache/hadoop/ozone/client/OzoneClient.java    |   7 +
 .../apache/hadoop/ozone/client/OzoneVolume.java    |  32 +++--
 .../src/main/compose/ozones3/docker-compose.yaml   |   2 +
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  41 +++---
 .../hadoop/ozone/web/client/TestBuckets.java       |   4 +-
 .../web/ozShell/bucket/ListBucketHandler.java      |   3 +-
 .../ozone/web/ozShell/keys/ListKeyHandler.java     |   3 +-
 .../web/ozShell/volume/ListVolumeHandler.java      |   2 +-
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |   2 +-
 hadoop-ozone/pom.xml                               |  11 ++
 .../s3/CommonHeadersContainerResponseFilter.java   |  39 ++++++
 .../org/apache/hadoop/ozone/s3/EndpointBase.java   |  76 +++++++++++
 .../java/org/apache/hadoop/ozone/s3/Gateway.java   |  17 ++-
 .../apache/hadoop/ozone/s3/GatewayApplication.java |  29 ++++
 .../hadoop/ozone/s3/OzoneClientProducer.java       |  48 +++++++
 .../hadoop/ozone/s3/OzoneConfigurationHolder.java  |  43 ++++++
 .../hadoop/ozone/s3/S3GatewayConfigKeys.java       |  54 ++++++++
 .../hadoop/ozone/s3/S3GatewayHttpServer.java       |  85 ++++++++++++
 .../hadoop/ozone/s3/bucket/DeleteBucket.java       |  44 ++++++
 .../apache/hadoop/ozone/s3/bucket/PutBucket.java   |  44 ++++++
 .../hadoop/ozone/s3/bucket/package-info.java       |  30 +++++
 .../hadoop/ozone/s3/commontypes/CommonPrefix.java  |  47 +++++++
 .../ozone/s3/commontypes/IsoDateAdapter.java       |  47 +++++++
 .../hadoop/ozone/s3/commontypes/KeyMetadata.java   |  87 ++++++++++++
 .../hadoop/ozone/s3/commontypes/package-info.java  |  29 ++++
 .../hadoop/ozone/s3/object/DeleteObject.java       |  51 +++++++
 .../apache/hadoop/ozone/s3/object/HeadObject.java  |  58 ++++++++
 .../apache/hadoop/ozone/s3/object/ListObject.java  | 118 +++++++++++++++++
 .../hadoop/ozone/s3/object/ListObjectResponse.java | 147 +++++++++++++++++++++
 .../apache/hadoop/ozone/s3/object/PutObject.java   |  61 +++++++++
 .../hadoop/ozone/s3/object/package-info.java       |  29 ++++
 .../org/apache/hadoop/ozone/s3/package-info.java   |  22 +++
 .../src/main/resources/META-INF/beans.xml          |  20 +++
 .../resources/webapps/s3gateway/WEB-INF/beans.xml  |  20 +++
 .../resources/webapps/s3gateway/WEB-INF/web.xml    |  36 +++++
 .../hadoop/ozone/client/ObjectStoreStub.java       | 110 +++++++++++++++
 .../hadoop/ozone/client/OzoneBucketStub.java       | 143 ++++++++++++++++++++
 .../hadoop/ozone/client/OzoneClientStub.java       |  37 ++++++
 .../hadoop/ozone/client/OzoneVolumeStub.java       |  95 +++++++++++++
 .../apache/hadoop/ozone/client/package-info.java   |  21 +++
 .../hadoop/ozone/s3/bucket/TestBucketResponse.java |  40 ++++++
 .../hadoop/ozone/s3/bucket/TestGetBucket.java      | 113 ++++++++++++++++
 .../hadoop/ozone/s3/bucket/package-info.java       |  21 +++
 .../hadoop/ozone/s3/object/TestDeleteObject.java   |  56 ++++++++
 .../hadoop/ozone/s3/object/package-info.java       |  21 +++
 48 files changed, 2041 insertions(+), 42 deletions(-)

commit 5b8b4f45441cd0f014ab526d0ebee59e1baccc20
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Sep 24 13:42:55 2018 -0700

    HDDS-441. Create new s3gateway daemon. Contributed by Elek Marton.

 hadoop-ozone/common/src/main/bin/ozone             |   7 +-
 hadoop-ozone/dist/pom.xml                          |  11 ++
 .../src/main/compose/ozones3/docker-compose.yaml   |  56 +++++++
 .../dist/src/main/compose/ozones3/docker-config    |  73 +++++++++
 hadoop-ozone/pom.xml                               |   1 +
 hadoop-ozone/s3gateway/pom.xml                     | 173 +++++++++++++++++++++
 .../java/org/apache/hadoop/ozone/s3/Gateway.java   |  55 +++++++
 7 files changed, 375 insertions(+), 1 deletion(-)

commit 2be2e7b9269f00fb4553b0df49bc20e51eda29cf
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Sep 24 10:10:11 2018 -0700

    HDDS-447. Separate ozone-dist and hadoop-dist projects with real classpath separation. Contributed by Elek Marton.

 hadoop-hdds/client/pom.xml                         |   5 -
 hadoop-hdds/common/pom.xml                         |   2 -
 hadoop-hdds/container-service/pom.xml              |   5 -
 hadoop-hdds/framework/pom.xml                      |   5 -
 hadoop-hdds/pom.xml                                |  30 ++++
 hadoop-hdds/server-scm/pom.xml                     |  50 ++----
 .../main/{ => resources}/webapps/scm/index.html    |   0
 .../src/main/{ => resources}/webapps/scm/main.html |   0
 .../{ => resources}/webapps/scm/scm-overview.html  |   0
 .../src/main/{ => resources}/webapps/scm/scm.js    |   0
 hadoop-hdds/tools/pom.xml                          |   8 -
 hadoop-ozone/client/pom.xml                        |   6 -
 hadoop-ozone/common/pom.xml                        |   5 -
 hadoop-ozone/common/src/main/bin/ozone             |  50 +++++-
 .../common/src/main/shellprofile.d/hadoop-ozone.sh |  24 ---
 hadoop-ozone/datanode/pom.xml                      |  49 ++++++
 .../dist/dev-support/bin/dist-layout-stitching     | 113 +++++++++++++
 .../dist/dev-support/bin/dist-tar-stitching        |  45 +++++
 hadoop-ozone/dist/pom.xml                          | 184 +++++++++++++++++++++
 hadoop-ozone/dist/src/main/compose/README.md       |  51 ++++++
 hadoop-ozone/dist/src/main/compose/ozone-hdfs/.env |  17 ++
 .../main/compose/ozone-hdfs/docker-compose.yaml    |  60 +++++++
 .../dist/src/main/compose/ozone-hdfs/docker-config |  76 +++++++++
 hadoop-ozone/dist/src/main/compose/ozone/.env      |  17 ++
 .../src/main/compose/ozone/docker-compose.yaml     |  49 ++++++
 .../dist/src/main/compose/ozone/docker-config      |  75 +++++++++
 .../src/main/compose/ozonefs/docker-compose.yaml   |  59 +++++++
 .../dist/src/main/compose/ozonefs/docker-config    |  35 ++++
 hadoop-ozone/dist/src/main/compose/ozoneperf/.env  |  17 ++
 .../dist/src/main/compose/ozoneperf/README.md      |  73 ++++++++
 .../dist/src/main/compose/ozoneperf/compose-all.sh |  18 ++
 .../compose/ozoneperf/docker-compose-freon.yaml    |  26 +++
 .../src/main/compose/ozoneperf/docker-compose.yaml |  64 +++++++
 .../dist/src/main/compose/ozoneperf/docker-config  |  35 ++++
 .../dist/src/main/compose/ozoneperf/init.sh        |  21 +++
 .../dist/src/main/compose/ozoneperf/prometheus.yml |  24 +++
 .../main/compose/ozonescripts/.ssh/authorized_keys |  16 ++
 .../dist/src/main/compose/ozonescripts/.ssh/config |  18 ++
 .../src/main/compose/ozonescripts/.ssh/environment |  16 ++
 .../dist/src/main/compose/ozonescripts/.ssh/id_rsa |  42 +++++
 .../src/main/compose/ozonescripts/.ssh/id_rsa.pub  |  16 ++
 .../dist/src/main/compose/ozonescripts/Dockerfile  |  33 ++++
 .../dist/src/main/compose/ozonescripts/README.md   |  38 +++++
 .../main/compose/ozonescripts/docker-compose.yaml  |  42 +++++
 .../src/main/compose/ozonescripts/docker-config    |  38 +++++
 .../dist/src/main/compose/ozonescripts/ps.sh       |  17 ++
 .../dist/src/main/compose/ozonescripts/start.sh    |  24 +++
 .../dist/src/main/compose/ozonescripts/stop.sh     |  17 ++
 hadoop-ozone/dist/src/main/ozone/README.txt        |  51 ++++++
 hadoop-ozone/dist/src/main/smoketest/README.md     |  30 ++++
 .../dist/src/main/smoketest/basic/basic.robot      |  47 ++++++
 .../src/main/smoketest/basic/ozone-shell.robot     |  82 +++++++++
 .../dist/src/main/smoketest/commonlib.robot        |  24 +++
 .../dist/src/main/smoketest/ozonefs/ozonefs.robot  |  35 ++++
 hadoop-ozone/dist/src/main/smoketest/test.sh       | 101 +++++++++++
 hadoop-ozone/docs/pom.xml                          |   5 -
 hadoop-ozone/integration-test/pom.xml              |  14 --
 hadoop-ozone/objectstore-service/pom.xml           |   5 -
 hadoop-ozone/ozone-manager/pom.xml                 |  50 ++----
 .../webapps/ozoneManager/index.html                |   0
 .../{ => resources}/webapps/ozoneManager/main.css  |   0
 .../{ => resources}/webapps/ozoneManager/main.html |   0
 .../webapps/ozoneManager/om-metrics.html           |   0
 .../webapps/ozoneManager/ozoneManager.js           |   0
 hadoop-ozone/ozonefs/pom.xml                       |   2 -
 hadoop-ozone/pom.xml                               |  25 ++-
 hadoop-ozone/tools/pom.xml                         |  32 +++-
 .../hadoop/ozone/freon/TestDataValidate.java       |   0
 .../hadoop/ozone/freon/TestRandomKeyGenerator.java |   0
 .../org/apache/hadoop/ozone/om/TestOmSQLCli.java   |   0
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |   0
 71 files changed, 1944 insertions(+), 174 deletions(-)

commit 8885b1892c8f306c0e8ed3502fb58c0b420ea8d3
Merge: cbb9a293 83699d58
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Sat Sep 22 21:19:12 2018 -0600

    Merge branch 'HADOOP-15407' into trunk

commit cbb9a293365b09fd2e7e8a6b0b581d5519991dc4
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Sep 20 12:21:34 2018 -0700

    HDDS-514. Clean Unregister JMX upon SCMConnectionManager#close.
    Contributed by Xiaoyu Yao.

 .../ozone/container/common/statemachine/SCMConnectionManager.java  | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit deac8416395aead71efd48d5863036e7a66872f9
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Sep 20 11:51:49 2018 -0700

    HDDS-394. Rename *Key Apis in DatanodeContainerProtocol to *Block apis.
    Contributed Dinesh Chitlangia.

 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |  13 +-
 .../java/org/apache/hadoop/hdds/HddsUtils.java     |   8 +-
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  62 ++++-----
 .../helpers/{KeyData.java => BlockData.java}       |  38 ++---
 .../src/main/proto/DatanodeContainerProtocol.proto |  74 +++++-----
 .../common/impl/OpenContainerBlockMap.java         |  46 +++---
 .../commandhandler/DeleteBlocksCommandHandler.java |   4 +-
 .../server/ratis/ContainerStateMachine.java        |  28 ++--
 .../container/keyvalue/KeyValueBlockIterator.java  |  16 +--
 .../container/keyvalue/KeyValueContainer.java      |   4 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  | 124 ++++++++---------
 .../helpers/{KeyUtils.java => BlockUtils.java}     |  62 ++++-----
 .../keyvalue/helpers/KeyValueContainerUtil.java    |  12 +-
 .../container/keyvalue/helpers/SmallFileUtils.java |   2 +-
 .../{KeyManagerImpl.java => BlockManagerImpl.java} | 104 +++++++-------
 .../container/keyvalue/impl/package-info.java      |   5 +-
 .../{KeyManager.java => BlockManager.java}         |  44 +++---
 .../keyvalue/interfaces/package-info.java          |  21 +++
 .../background/BlockDeletingService.java           |  10 +-
 ...yManagerImpl.java => TestBlockManagerImpl.java} | 130 +++++++++--------
 .../container/keyvalue/TestChunkManagerImpl.java   |   2 +-
 .../keyvalue/TestKeyValueBlockIterator.java        |  30 ++--
 .../container/keyvalue/TestKeyValueContainer.java  |  26 ++--
 .../container/keyvalue/TestKeyValueHandler.java    |  38 ++---
 .../ozone/client/io/ChunkGroupInputStream.java     |   6 +-
 .../ozone/TestStorageContainerManagerHelper.java   |   8 +-
 .../ozone/client/rest/TestOzoneRestClient.java     |   8 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |   8 +-
 .../ozone/container/ContainerTestHelper.java       |  84 +++++------
 .../ozone/container/TestContainerReplication.java  |  24 ++--
 .../container/common/TestBlockDeletingService.java |  12 +-
 .../{TestKeyData.java => TestBlockData.java}       |  36 +++--
 .../common/impl/TestCloseContainerHandler.java     |  51 +++----
 .../common/impl/TestContainerPersistence.java      | 154 +++++++++++----------
 .../commandhandler/TestBlockDeletion.java          |   9 +-
 .../container/ozoneimpl/TestOzoneContainer.java    | 100 +++++++------
 .../server/TestContainerStateMachine.java          |   2 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |   4 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |   4 +-
 .../scm/TestGetCommittedBlockLengthAndPutKey.java  |  12 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  44 +++---
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |   2 +-
 .../ozone/om/ScmBlockLocationTestIngClient.java    |   2 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |  42 +++---
 44 files changed, 798 insertions(+), 717 deletions(-)

commit 0830c76f6bae5da0b17608ef2d2e685d8c3894d2
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Sep 19 14:35:29 2018 -0700

    HDDS-513. Check if the EventQueue is not closed before executing handlers. Contributed by Nanda Kumar.

 .../apache/hadoop/hdds/server/events/EventQueue.java   | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

commit 99f67563d198e466632a18875c89d409a50fcb5a
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Sep 19 12:57:44 2018 -0700

    HDDS-509. TestStorageContainerManager is flaky.
    Contributed by Xiaoyu Yao and Ajay Kumar.

 .../test/java/org/apache/hadoop/ozone/TestStorageContainerManager.java | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 0a913c521baacd2e97471dd4e7b42977f59da1bb
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Sep 20 01:22:18 2018 +0530

    HDDS-507. EventQueue should be shutdown on SCM shutdown. Contributed by Xiaoyu Yao.

 .../org/apache/hadoop/hdds/scm/server/StorageContainerManager.java | 7 +++++++
 1 file changed, 7 insertions(+)

commit b84b388240fc741853a51c235b7543f1f5dedc16
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Sep 19 23:51:50 2018 +0530

    HDDS-460. Replication manager failed to import container data. Contributed by Elek, Marton.

 .../common/statemachine/DatanodeStateMachine.java  |  19 ++-
 .../ReplicateContainerCommandHandler.java          | 120 ++-------------
 .../container/replication/ContainerReplicator.java |  27 ++++
 .../replication/DownloadAndImportReplicator.java   | 136 +++++++++++++++++
 .../replication/GrpcReplicationClient.java         |   2 +-
 .../replication/ReplicationSupervisor.java         | 142 ++++++++++++++++++
 .../container/replication/ReplicationTask.java     | 102 +++++++++++++
 .../TestReplicateContainerCommandHandler.java      | 163 ---------------------
 .../replication/TestReplicationSupervisor.java     | 143 ++++++++++++++++++
 .../ozone/container/replication/package-info.java  |  22 +++
 10 files changed, 602 insertions(+), 274 deletions(-)

commit 1e1e5a5055a86fb82aec898dcdd42e8ee1215db0
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Sep 19 21:43:44 2018 +0530

    HDDS-461. Container remains in CLOSING state in SCM forever. Contributed by Shashikant Banerjee.

 .../common/statemachine/StateContext.java          |  42 ++++++--
 .../CloseContainerCommandHandler.java              |  17 ++-
 .../common/transport/server/XceiverServerGrpc.java |  12 ++-
 .../transport/server/ratis/XceiverServerRatis.java |  31 +++---
 .../ozone/container/ozoneimpl/OzoneContainer.java  | 116 +++++++--------------
 .../protocol/commands/CloseContainerCommand.java   |  23 +---
 .../scm/container/CloseContainerEventHandler.java  |  90 ++++++++++------
 .../TestCloseContainerByPipeline.java              |   5 +-
 8 files changed, 175 insertions(+), 161 deletions(-)

commit 372334e1b7efdd675bcd671524df2d8db99d6108
Author: Márton Elek <elek@apache.org>
Date:   Wed Sep 19 14:51:03 2018 +0200

    HDDS-458. numberofKeys is 0 for all containers even when keys are present. Contributed by LiXin Ge.
    
    (cherry picked from commit 8600b049af184af04dfb93b6bc353740e3e821d3)

 .../container/keyvalue/KeyValueContainer.java      |  1 +
 .../hdds/scm/container/TestContainerMapping.java   | 46 ++++++++++++++++++++++
 2 files changed, 47 insertions(+)

commit e45858b2f1e28906107919ccb1fee0285acc2838
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Sep 19 19:46:25 2018 +0530

    HDDS-502. Exception in OM startup when running unit tests. Contributed by Arpit Agarwal.

 .../hdds/scm/server/StorageContainerManager.java   | 55 ++++++++++++++++++----
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 33 +++++++++++--
 2 files changed, 73 insertions(+), 15 deletions(-)

commit 3964948512b013b54d2727a0b4e8063e55fa0b9b
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Sep 19 18:49:13 2018 +0530

    HDDS-476. Add Pipeline reports to make pipeline active on SCM restart.
    Contributed by Mukul Kumar Singh.

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |   2 +-
 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   5 +
 .../scm/container/common/helpers/Pipeline.java     |  22 ++-
 .../scm/container/common/helpers/PipelineID.java   |  13 +-
 .../common/src/main/resources/ozone-default.xml    |   8 +
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java |  21 +++
 .../common/report/PipelineReportPublisher.java     |  73 ++++++++++
 .../common/report/ReportPublisherFactory.java      |   4 +
 .../states/endpoint/RegisterEndpointTask.java      |   8 +-
 .../common/transport/server/XceiverServerGrpc.java |  16 ++
 .../common/transport/server/XceiverServerSpi.java  |   9 ++
 .../transport/server/ratis/XceiverServerRatis.java |  63 ++++----
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  12 ++
 .../protocol/StorageContainerDatanodeProtocol.java |  10 +-
 .../protocol/StorageContainerNodeProtocol.java     |   6 +-
 ...inerDatanodeProtocolClientSideTranslatorPB.java |   6 +-
 ...inerDatanodeProtocolServerSideTranslatorPB.java |   5 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |  10 ++
 .../hadoop/ozone/container/common/ScmTestMock.java |   8 +-
 .../hdds/scm/container/ContainerMapping.java       |  19 ---
 .../hdds/scm/container/ContainerReportHandler.java |   6 +-
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  15 +-
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  15 +-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |   5 +-
 .../hadoop/hdds/scm/node/StaleNodeHandler.java     |  19 +--
 .../hdds/scm/node/states/Node2ContainerMap.java    | 123 ++--------------
 .../hdds/scm/node/states/Node2ObjectsMap.java      | 162 +++++++++++++++++++++
 .../hadoop/hdds/scm/node/states/ReportResult.java  | 105 +++++++------
 .../hdds/scm/pipelines/Node2PipelineMap.java       |  45 +-----
 .../hdds/scm/pipelines/PipelineCloseHandler.java   |  24 ++-
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  52 +++----
 .../hdds/scm/pipelines/PipelineReportHandler.java  |  59 ++++++++
 .../hdds/scm/pipelines/PipelineSelector.java       | 103 +++++++------
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  41 ++----
 .../standalone/StandaloneManagerImpl.java          |  44 ++----
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java |  23 +++
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  16 +-
 .../hdds/scm/server/StorageContainerManager.java   |  11 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  10 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |   4 +-
 .../hadoop/hdds/scm/node/TestNodeManager.java      |   6 +-
 .../scm/node/states/TestNode2ContainerMap.java     |  28 ++--
 .../ozone/container/common/TestEndPoint.java       |   5 +-
 .../testutils/ReplicationNodeManagerMock.java      |   5 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |   2 +-
 .../hdds/scm/pipeline/TestPipelineClose.java       |   2 +-
 .../hadoop/hdds/scm/pipeline/TestSCMRestart.java   |  20 ++-
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |   9 ++
 .../apache/hadoop/ozone/web/client/TestKeys.java   |   2 +-
 .../hadoop/ozone/web/client/TestKeysRatis.java     |   2 -
 50 files changed, 808 insertions(+), 475 deletions(-)

commit a2ed81c2843766cdd0ff0b06f00ca475e49a7980
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Sep 18 23:21:29 2018 -0700

    HDDS-506. Fields in AllocateScmBlockResponseProto should be optional. Contributed by Arpit Agarwal.

 hadoop-hdds/common/src/main/proto/ScmBlockLocationProtocol.proto    | 6 +++---
 .../java/org/apache/hadoop/hdds/scm/exceptions/SCMException.java    | 3 ++-
 .../java/org/apache/hadoop/hdds/scm/pipelines/PipelineSelector.java | 4 ++++
 3 files changed, 9 insertions(+), 4 deletions(-)

commit 7a6c4f5a029f7e66e1fefa9ab2734993e559c6c4
Author: Arpit Agarwal <arp@apache.org>
Date:   Tue Sep 18 21:18:15 2018 -0700

    HDDS-497. Suppress license warnings for error log files. Contributed by Arpit Agarwal.

 hadoop-hdds/pom.xml  |  7 ++++---
 hadoop-ozone/pom.xml | 30 +++++++++++++++---------------
 2 files changed, 19 insertions(+), 18 deletions(-)

commit 6c53a17bb4cb454aa571b1cde484f3d11ee225e0
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Sep 18 19:58:09 2018 -0700

    HDDS-488. Handle chill mode exception from SCM in OzoneManager. Contributed by Ajay Kumar.

 .../hadoop/ozone/om/helpers/OmBucketInfo.java      |   2 +-
 .../hadoop/ozone/om/helpers/OmVolumeArgs.java      |   2 +-
 .../apache/hadoop/ozone/om/TestScmChillMode.java   | 171 +++++++++++++++++++++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  32 +++-
 .../hadoop/ozone/om/exceptions/OMException.java    |   3 +-
 .../apache/hadoop/ozone/om/TestKeyManagerImpl.java | 165 ++++++++++++++++++++
 6 files changed, 367 insertions(+), 8 deletions(-)

commit 87cac11893e04909f3fc57977a19436c6927d544
Author: Arpit Agarwal <arp@apache.org>
Date:   Tue Sep 18 16:06:21 2018 -0700

    HDDS-503. Suppress ShellBasedUnixGroupsMapping exception in tests. Contributed by Arpit Agarwal.

 hadoop-ozone/integration-test/src/test/resources/log4j.properties | 5 ++++-
 hadoop-ozone/ozonefs/src/test/resources/log4j.properties          | 1 +
 2 files changed, 5 insertions(+), 1 deletion(-)

commit 654c2e96320fe88a7a071e17cec9e8c90bb790b3
Author: Arpit Agarwal <arp@apache.org>
Date:   Tue Sep 18 15:52:00 2018 -0700

    HDDS-500. TestErrorCode.java has wrong package name. Contributed by Anu Engineer.

 .../src/test/java/org/apache/hadoop/ozone/web/client/TestKeys.java       | 1 +
 .../src/test/java/org/apache/hadoop/ozone/{ => web}/TestErrorCode.java   | 0
 2 files changed, 1 insertion(+)

commit 0e931ed1aaefa3aa9b019e2c0e04d829a33c5949
Author: Arpit Agarwal <arp@apache.org>
Date:   Tue Sep 18 15:41:28 2018 -0700

    HDDS-501. AllocateBlockResponse.keyLocation must be an optional field. Contributed by Arpit Agarwal.

 hadoop-ozone/common/src/main/proto/OzoneManagerProtocol.proto | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fec6b916dabeebae35294a3a2a727a96e266e09d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Sep 18 14:50:52 2018 -0700

    HDDS-496. Ozone tools module is incorrectly classified as 'hdds' component. Contributed by Dinesh Chitlangia.

 hadoop-ozone/tools/pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fa0a97ed92fc904734362ce1a340fd5218d91083
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Sep 18 14:31:50 2018 -0700

    HDDS-440. Datanode loops forever if it cannot create directories.
    Contributed by Bharat Viswanadham.

 .../common/states/datanode/InitDatanodeState.java  | 12 +++++--
 .../container/common/TestDatanodeStateMachine.java | 42 ++++++++++++++++++++++
 2 files changed, 52 insertions(+), 2 deletions(-)

commit e172dbcef0ff52d0c7fad2b0eafdd598123b0750
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Sep 18 13:50:28 2018 -0700

    HDDS-495. Ozone docs and ozonefs packages have undefined hadoop component. Contributed by Dinesh Chitlangia.

 hadoop-ozone/docs/pom.xml    | 5 +++++
 hadoop-ozone/ozonefs/pom.xml | 2 ++
 2 files changed, 7 insertions(+)

commit 45309844eb3e4a50e89584cf5d53d7f4cfaace40
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Sep 18 13:28:04 2018 -0700

    HDDS-366. Update functions impacted by SCM chill mode in StorageContainerLocationProtocol. Contributed by Ajay Kumar.

 hadoop-hdds/common/src/main/proto/hdds.proto       |  7 +++
 .../java/org/apache/hadoop/hdds/scm/ScmUtils.java  | 45 ++++++++++++++++
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 17 +-----
 .../hdds/scm/container/ContainerMapping.java       |  6 ---
 .../hadoop/hdds/scm/server/ChillModePrecheck.java  | 12 +++--
 .../hdds/scm/server/SCMChillModeManager.java       |  1 +
 .../hdds/scm/server/SCMClientProtocolServer.java   | 53 ++++++++++++++++++-
 .../hdds/scm/server/StorageContainerManager.java   | 56 +++++++++++---------
 .../hdds/scm/container/TestContainerMapping.java   |  8 ---
 .../scm/server/TestSCMClientProtocolServer.java    | 60 ++++++++++++++++++++++
 .../hadoop/ozone/TestStorageContainerManager.java  | 55 ++++++++++++++++++++
 .../hadoop/ozone/scm/TestContainerSQLCli.java      | 15 ++++--
 12 files changed, 273 insertions(+), 62 deletions(-)

commit 17b8e95872a12e1933b8fbd037f6ccdb28c0734c
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Sep 18 10:44:56 2018 -0700

    HDDS-464. Fix TestCloseContainerHandlingByClient.
    Contributed by Lokesh Jain.

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  4 +++
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  | 13 +++++++
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   | 14 ++++++++
 .../main/java/org/apache/ratis/RatisHelper.java    | 40 +++++++++++++++++++---
 .../common/src/main/resources/ozone-default.xml    | 19 ++++++++++
 .../transport/server/ratis/XceiverServerRatis.java | 13 +++++++
 .../rpc/TestCloseContainerHandlingByClient.java    |  5 ++-
 7 files changed, 100 insertions(+), 8 deletions(-)

commit 6a70ce8c7ee64b4dc4104d6d53a7c089c95dc30a
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Sep 18 10:23:36 2018 -0700

    HDDS-483. Update ozone Documentation to fix below issues.
    Contributed by  Namit Maheshwari.

 hadoop-ozone/docs/content/JavaApi.md | 4 ++++
 hadoop-ozone/docs/content/OzoneFS.md | 6 +++---
 2 files changed, 7 insertions(+), 3 deletions(-)

commit 7a26c8c24dcd08de61947350fa78162f68e2eacd
Author: Márton Elek <elek@apache.org>
Date:   Tue Sep 18 10:26:33 2018 +0200

    HDDS-481. Classes are missing from the shaded ozonefs jar. Contributed by Bharat Viswanadham.
    
    (cherry picked from commit e043783917ed58a1a967ca67b7240b1b3e846a69)

 hadoop-ozone/ozonefs/pom.xml | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 99ada051ad581a84b99128bc723dd2ba7fa0646f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Sep 17 17:13:52 2018 -0700

    HDDS-352. Separate install and testing phases in acceptance tests. Contributed by Elek Marton.

 hadoop-ozone/acceptance-test/README.md             | 48 ------------
 .../acceptance-test/dev-support/bin/robot-all.sh   | 18 -----
 .../dev-support/bin/robot-dnd-all.sh               | 57 --------------
 .../acceptance-test/dev-support/bin/robot.sh       | 38 ----------
 .../acceptance-test/dev-support/docker/Dockerfile  | 21 ------
 .../dev-support/docker/docker-compose.yaml         | 23 ------
 hadoop-ozone/acceptance-test/pom.xml               | 65 ----------------
 .../acceptance-test/src/test/acceptance/basic/.env | 17 -----
 .../src/test/acceptance/basic/basic.robot          | 50 -------------
 .../src/test/acceptance/basic/docker-compose.yaml  | 50 -------------
 .../src/test/acceptance/basic/docker-config        | 34 ---------
 .../src/test/acceptance/basic/ozone-shell.robot    | 86 ----------------------
 .../src/test/acceptance/commonlib.robot            | 78 --------------------
 .../src/test/acceptance/ozonefs/.env               | 17 -----
 .../test/acceptance/ozonefs/docker-compose.yaml    | 59 ---------------
 .../src/test/acceptance/ozonefs/docker-config      | 35 ---------
 .../src/test/acceptance/ozonefs/ozonefs.robot      | 39 ----------
 .../test/acceptance/ozonefs/ozonesinglenode.robot  | 49 ------------
 hadoop-ozone/pom.xml                               |  1 -
 19 files changed, 785 deletions(-)

commit c41e86f9119525212980d1b7b4e52457e86be70a
Author: Arpit Agarwal <arp@apache.org>
Date:   Mon Sep 17 16:21:10 2018 -0700

    HDDS-487. Doc files are missing ASF license headers. Contributed by Namit Maheshwari.

 hadoop-ozone/docs/README.md                         | 13 ++++++++-----
 hadoop-ozone/docs/archetypes/default.md             | 13 ++++++++-----
 hadoop-ozone/docs/content/BucketCommands.md         | 16 ++++++++++++++++
 hadoop-ozone/docs/content/BuildingSources.md        | 17 +++++++++++++++++
 hadoop-ozone/docs/content/CommandShell.md           | 13 ++++++++-----
 hadoop-ozone/docs/content/Concepts.md               | 21 ++++++++++++++-------
 hadoop-ozone/docs/content/Dozone.md                 | 13 ++++++++-----
 hadoop-ozone/docs/content/Freon.md                  | 13 ++++++++-----
 hadoop-ozone/docs/content/Hdds.md                   | 16 ++++++++++++++++
 hadoop-ozone/docs/content/JavaApi.md                | 16 ++++++++++++++++
 hadoop-ozone/docs/content/KeyCommands.md            | 16 ++++++++++++++++
 hadoop-ozone/docs/content/OzoneFS.md                | 16 ++++++++++++++++
 hadoop-ozone/docs/content/OzoneManager.md           | 16 ++++++++++++++++
 hadoop-ozone/docs/content/RealCluster.md            | 13 ++++++++-----
 hadoop-ozone/docs/content/Rest.md                   | 13 ++++++++-----
 hadoop-ozone/docs/content/RunningViaDocker.md       | 13 ++++++++-----
 hadoop-ozone/docs/content/RunningWithHDFS.md        | 16 ++++++++++++++++
 hadoop-ozone/docs/content/SCMCLI.md                 | 13 ++++++++-----
 hadoop-ozone/docs/content/Settings.md               | 13 ++++++++-----
 hadoop-ozone/docs/content/VolumeCommands.md         | 16 ++++++++++++++++
 hadoop-ozone/docs/content/_index.md                 | 13 ++++++++-----
 hadoop-ozone/docs/static/NOTES.md                   | 13 ++++++++-----
 .../themes/ozonedoc/layouts/_default/single.html    | 13 ++++++++-----
 .../docs/themes/ozonedoc/layouts/index.html         | 16 ++++++++++++++++
 .../themes/ozonedoc/layouts/partials/footer.html    | 13 ++++++++-----
 .../themes/ozonedoc/layouts/partials/header.html    | 13 ++++++++-----
 .../themes/ozonedoc/layouts/partials/navbar.html    | 13 ++++++++-----
 .../themes/ozonedoc/layouts/partials/sidebar.html   | 13 ++++++++-----
 28 files changed, 311 insertions(+), 92 deletions(-)

commit aa32fa8321799c33713bc65a6b1990d8f7ac26df
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Sep 17 14:08:39 2018 -0700

    HDDS-475. Block Allocation returns same BlockID on different keys creation.
    Contributed by Nanda Kumar.

 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 202 ++++++++++++---------
 1 file changed, 117 insertions(+), 85 deletions(-)

commit 83699d5811e4d4beebbd88a88cd659a8cd657c3d
Author: Steve Loughran <stevel@apache.org>
Date:   Fri Jun 15 18:14:13 2018 +0100

    HADOOP-15407. HADOOP-15540. Support Windows Azure Storage - Blob file system "ABFS" in Hadoop: Core Commit.
    
    Contributed by Shane Mainali, Thomas Marquardt, Zichen Sun, Georgi Chalakov, Esfandiar Manii, Amit Singh, Dana Kaban, Da Zhou, Junhua Gu, Saher Ahwal, Saurabh Pant, James Baker, Shaoyu Zhang, Lawrence Chen, Kevin Chen and Steve Loughran

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit 0874cb5b72dfe735848db692b85ccb1055007d58
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Sep 17 10:46:28 2018 -0700

    HDDS-435. Enhance the existing ozone documentation.
    Contributed by Elek, Marton.

 hadoop-ozone/common/src/main/bin/ozone             |   1 -
 hadoop-ozone/docs/{config.toml => config.yaml}     |  32 +-
 hadoop-ozone/docs/content/BucketCommands.md        | 106 ++++++
 hadoop-ozone/docs/content/BuildingSources.md       |  37 +++
 hadoop-ozone/docs/content/CommandShell.md          | 232 +++++--------
 hadoop-ozone/docs/content/Concepts.md              | 101 ++++++
 hadoop-ozone/docs/content/Dozone.md                | 107 ++++++
 hadoop-ozone/docs/content/Freon.md                 |  61 ++++
 hadoop-ozone/docs/content/GettingStarted.md        | 369 ---------------------
 hadoop-ozone/docs/content/Hdds.md                  |  49 +++
 hadoop-ozone/docs/content/JavaApi.md               | 152 +++++++++
 hadoop-ozone/docs/content/KeyCommands.md           | 111 +++++++
 hadoop-ozone/docs/content/Metrics.md               | 170 ----------
 hadoop-ozone/docs/content/OzoneFS.md               |  64 ++++
 hadoop-ozone/docs/content/OzoneManager.md          |  61 ++++
 hadoop-ozone/docs/content/RealCluster.md           |  71 ++++
 hadoop-ozone/docs/content/Rest.md                  |  32 +-
 hadoop-ozone/docs/content/RunningViaDocker.md      |  70 ++++
 hadoop-ozone/docs/content/RunningWithHDFS.md       |  61 ++++
 hadoop-ozone/docs/content/SCMCLI.md                |  26 ++
 hadoop-ozone/docs/content/Settings.md              | 139 ++++++++
 hadoop-ozone/docs/content/VolumeCommands.md        | 100 ++++++
 hadoop-ozone/docs/content/_index.md                |  86 +----
 hadoop-ozone/docs/pom.xml                          |   4 -
 .../themes/ozonedoc/layouts/_default/single.html   |   3 +
 .../themes/ozonedoc/layouts/partials/header.html   |   4 +-
 .../themes/ozonedoc/layouts/partials/sidebar.html  |   8 +-
 .../docs/themes/ozonedoc/static/css/ozonedoc.css   |  14 +-
 28 files changed, 1475 insertions(+), 796 deletions(-)

commit 1a0c07081d5e34d4394085cd14ad6a75b7be2ff6
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Sep 17 21:51:54 2018 +0530

    HDDS-399. Persist open pipeline information across SCM restart. Contributed by Mukul Kumar Singh.

 .../scm/container/common/helpers/Pipeline.java     |  24 ++
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   2 +
 .../hdds/scm/container/ContainerMapping.java       |  24 +-
 .../hdds/scm/container/ContainerStateManager.java  |  25 +--
 .../scm/container/states/ContainerStateMap.java    |  38 ----
 .../hadoop/hdds/scm/pipelines/PipelineManager.java | 148 +++++-------
 .../hdds/scm/pipelines/PipelineSelector.java       | 249 ++++++++++-----------
 .../hdds/scm/pipelines/PipelineStateManager.java   | 136 +++++++++++
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |   8 +-
 .../standalone/StandaloneManagerImpl.java          |   8 +-
 .../scm/container/TestContainerReportHandler.java  |   3 +-
 .../scm/container/TestContainerStateManager.java   |   4 +-
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  |   4 +-
 .../TestContainerStateManagerIntegration.java      |  10 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |  22 +-
 .../hdds/scm/pipeline/TestPipelineClose.java       |  15 +-
 .../hadoop/hdds/scm/pipeline/TestSCMRestart.java   | 101 +++++++++
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   5 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   8 +-
 19 files changed, 510 insertions(+), 324 deletions(-)

commit 09d1f0ebd17fb55d124ec261a1b4ac868398532a
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Sun Sep 16 17:55:46 2018 -0700

    HDDS-362. Modify functions impacted by SCM chill mode in ScmBlockLocationProtocol. Contributed by Ajay Kumar.

 hadoop-hdds/common/src/main/proto/hdds.proto       |  7 ++
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 49 ++++++++++--
 .../replication/ReplicationActivityStatus.java     | 55 ++++++++++---
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  2 +
 .../hadoop/hdds/scm/server/ChillModePrecheck.java  | 54 +++++++++++++
 .../apache/hadoop/hdds/scm/server/Precheck.java    | 29 +++++++
 .../hdds/scm/server/SCMChillModeManager.java       | 49 +++++++++++-
 .../hdds/scm/server/StorageContainerManager.java   |  7 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    | 89 +++++++++++++++++-----
 .../replication/TestReplicationActivityStatus.java | 63 +++++++++++++++
 10 files changed, 360 insertions(+), 44 deletions(-)

commit f2cc5435f774323eaa8d8489ebee4de5f8329104
Author: Arpit Agarwal <arp@apache.org>
Date:   Sun Sep 16 14:31:09 2018 -0700

    HDDS-470. Ozone acceptance tests are failing. Contributed by Elek, Marton.
    
    (cherry picked from commit dca8d0c2615d142bca55d367a0bc988ce9860368)

 .../src/test/acceptance/ozonefs/ozonesinglenode.robot  | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit 08713b60fb00318e1648cdeb06c8e9f089fb4a7b
Author: Arpit Agarwal <arp@apache.org>
Date:   Sat Sep 15 22:12:47 2018 -0700

    HDDS-469. Rename 'ozone oz' to 'ozone sh'. Contributed by Arpit Agarwal.

 .../src/test/acceptance/basic/ozone-shell.robot    | 36 +++++++++++-----------
 .../src/test/acceptance/ozonefs/ozonefs.robot      |  6 ++--
 .../test/acceptance/ozonefs/ozonesinglenode.robot  | 16 +++++-----
 hadoop-ozone/common/src/main/bin/ozone             | 12 ++++----
 hadoop-ozone/docs/content/CommandShell.md          | 34 ++++++++++----------
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 16 +++++-----
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java |  4 +--
 7 files changed, 62 insertions(+), 62 deletions(-)

commit be537954464fd57d2452fdc6651ddebb0ac48f17
Author: Nanda kumar <nanda@apache.org>
Date:   Sat Sep 15 23:14:57 2018 +0530

    HDDS-465. Suppress group mapping lookup warnings for ozone. Contributed by Xiaoyu Yao.

 hadoop-hdds/common/src/main/conf/log4j.properties | 1 +
 1 file changed, 1 insertion(+)

commit a7cace3fe159c02ddc1ab43c0eb3e09c099a1964
Author: Nanda kumar <nanda@apache.org>
Date:   Sat Sep 15 23:11:39 2018 +0530

    HDDS-462. Optimize ContainerStateMap#getMatchingContainerIDs in SCM. Contributed by Nanda kumar.

 .../hadoop/hdds/scm/container/ContainerID.java     |  26 +++--
 .../container/common/helpers/ContainerInfo.java    |  10 +-
 .../hdds/scm/container/ContainerStateManager.java  |   4 +-
 .../scm/container/states/ContainerQueryKey.java    | 110 +++++++++++++++++++++
 .../scm/container/states/ContainerStateMap.java    |  42 +++++++-
 .../scm/node/states/TestNode2ContainerMap.java     |   7 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java  |  24 ++++-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |  42 ++++----
 .../org/apache/hadoop/ozone/genesis/Genesis.java   |   9 +-
 9 files changed, 224 insertions(+), 50 deletions(-)

commit 35dee11aef1c519330e8f312eba2842eada762b6
Author: Márton Elek <elek@apache.org>
Date:   Sat Sep 15 13:35:00 2018 +0200

    HDDS-449. Add a NULL check to protect DeadNodeHandler#onMessage. Contributed by LiXin Ge.

 .../main/java/org/apache/hadoop/hdds/scm/node/DeadNodeHandler.java   | 5 +++++
 1 file changed, 5 insertions(+)

commit 857ac8092c8f7bb15daf0566b26bc4074b8692b4
Author: Márton Elek <elek@apache.org>
Date:   Sat Sep 15 13:16:59 2018 +0200

    HDDS-409. Ozone acceptance-test and integration-test packages have undefined hadoop component. Contributed by Dinesh Chitlangia.

 hadoop-ozone/acceptance-test/pom.xml  | 6 ++++++
 hadoop-ozone/integration-test/pom.xml | 5 +++++
 2 files changed, 11 insertions(+)

commit f2e5f5dd90e5e98e2757dd9b9c9ee60992439236
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Sep 14 14:11:53 2018 -0700

    HDDS-446. Provide shaded artifact to start ozone service as a datanode plugin. Contributed by Elek Marton

 hadoop-ozone/objectstore-service/pom.xml | 52 ++++++++++++++++++++++++++++++++
 1 file changed, 52 insertions(+)

commit f59dae37ea4f1b1efe1c8b0ff7b5bef4c37d1a23
Author: Nanda kumar <nanda@apache.org>
Date:   Sat Sep 15 02:34:33 2018 +0530

    HDDS-466. Handle null in argv of StorageContainerManager#createSCM. Contributed by Nanda kumar

 .../org/apache/hadoop/hdds/scm/server/StorageContainerManager.java     | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit bc6e7e0b3f4df33d1f03780eb742ec242baeeae4
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Sep 14 13:34:29 2018 -0700

    HDDS-419. ChunkInputStream bulk read api does not read from all the chunks. Contributed by Lokesh Jain and Mukul Kumar.

 .../hadoop/hdds/scm/storage/ChunkInputStream.java  | 30 +++++++++++++++++-----
 .../ozone/client/io/ChunkGroupInputStream.java     | 25 +++++++++---------
 .../hadoop/ozone/freon/TestDataValidate.java       |  4 +--
 .../hadoop/ozone/freon/RandomKeyGenerator.java     |  7 ++---
 4 files changed, 42 insertions(+), 24 deletions(-)

commit 78e206f4320cec3614b03e9b4668458ec2f214e4
Author: Nanda kumar <nanda@apache.org>
Date:   Sat Sep 15 01:38:13 2018 +0530

    HDDS-454. TestChunkStreams#testErrorReadGroupInputStream & TestChunkStreams#testReadGroupInputStream are failing. Contributed by chencan.

 .../java/org/apache/hadoop/ozone/om/TestChunkStreams.java  | 14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)

commit 879197a4626a1edb5329ead842d16cade2e5bb72
Author: Nanda kumar <nanda@apache.org>
Date:   Sat Sep 15 00:18:52 2018 +0530

    HDDS-389. Remove XceiverServer and XceiverClient and related classes. Contributed by chencan.

 .../org/apache/hadoop/hdds/scm/XceiverClient.java  | 209 ---------------------
 .../hadoop/hdds/scm/XceiverClientHandler.java      | 202 --------------------
 .../hadoop/hdds/scm/XceiverClientInitializer.java  |  74 --------
 .../common/transport/server/XceiverServer.java     | 140 --------------
 .../transport/server/XceiverServerHandler.java     |  82 --------
 .../transport/server/XceiverServerInitializer.java |  64 -------
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   4 +-
 .../container/metrics/TestContainerMetrics.java    |  21 ++-
 .../container/server/TestContainerServer.java      |  54 ++----
 9 files changed, 36 insertions(+), 814 deletions(-)

commit 8a0cd61be92ce74a3a5b676cab95c79f8f4ad488
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Fri Sep 14 11:38:50 2018 -0700

    HDDS-452. 'ozone scm' with incorrect argument first logs all the STARTUP_MSG. Contributed by Namit Maheshwari.

 .../apache/hadoop/hdds/scm/server/StorageContainerManager.java    | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 0faccfdeecb211d2e33f19fc38fd04599ed0e070
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Sep 14 10:08:06 2018 -0700

    HDDS-429. StorageContainerManager lock optimization.
    Contributed by Nanda Kumar.

 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 229 +++++++++++----------
 .../scm/container/states/ContainerStateMap.java    | 177 ++++++++++------
 2 files changed, 226 insertions(+), 180 deletions(-)

commit 89bb2d0aa2cd79ca14a845b9c0f0ebfccd73ba13
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Sep 14 07:02:28 2018 -0700

    HDDS-438. 'ozone oz' should print usage when command or sub-command is missing. Contributed by Dinesh Chitlangia.

 .../org/apache/hadoop/hdds/cli/GenericCli.java     |  5 +-
 .../hdds/cli/MissingSubcommandException.java       | 10 +++-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 69 ++++++++++++++++++++--
 .../ozone/web/ozShell/bucket/BucketCommands.java   |  3 +-
 .../hadoop/ozone/web/ozShell/keys/KeyCommands.java |  3 +-
 .../ozone/web/ozShell/volume/VolumeCommands.java   |  3 +-
 6 files changed, 82 insertions(+), 11 deletions(-)

commit f33c274942403a2f28a989923cbe8f0a069b96e6
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Sep 13 16:37:44 2018 -0700

    HDDS-423. Introduce an ozone specific log4j.properties. Contributed by Elek, Marton.

 hadoop-hdds/common/src/main/conf/log4j.properties  | 156 +++++++++++++++++++++
 .../src/test/acceptance/basic/docker-config        |   3 +-
 .../src/test/acceptance/ozonefs/docker-config      |   3 +-
 3 files changed, 160 insertions(+), 2 deletions(-)

commit f5962bf167e01dd0b14c1d6e76c56d99563614f0
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Sep 13 13:34:22 2018 -0700

    HDDS-414. Fix sbin/stop-ozone.sh to stop Ozone daemons. Contributed by Elek, Marton.

 hadoop-ozone/common/src/main/bin/start-ozone.sh |  0
 hadoop-ozone/common/src/main/bin/stop-ozone.sh  | 16 +++++++++-------
 2 files changed, 9 insertions(+), 7 deletions(-)

commit d10cd35f780a53a1c5342878b03623c5cd4d5503
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu Sep 13 13:00:35 2018 -0700

    HDDS-456. TestOzoneShell#init is breaking due to Null Pointer Exception. Contributed by Dinesh Chitlangia.

 .../src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java         | 3 +++
 1 file changed, 3 insertions(+)

commit 3588b4069b6791f6766d59a2f990a0624e783df4
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu Sep 13 19:00:55 2018 +0530

    HDDS-233. Update ozone to latest ratis snapshot build(0.3.0-50588bd-SNAPSHOT). Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 97 +++++++++-------------
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  6 ++
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  6 ++
 .../main/java/org/apache/ratis/RatisHelper.java    | 45 +++++++---
 .../common/src/main/resources/ozone-default.xml    |  8 ++
 .../transport/server/ratis/XceiverServerRatis.java | 24 ++++--
 .../org/apache/hadoop/ozone/RatisTestHelper.java   | 13 +++
 .../transport/server/ratis/TestCSMMetrics.java     | 16 +---
 .../container/server/TestContainerServer.java      | 13 +--
 9 files changed, 126 insertions(+), 102 deletions(-)

commit 32d1adbe04122c81330a57266cda13ae9ec2c931
Author: Márton Elek <elek@apache.org>
Date:   Thu Sep 13 13:47:59 2018 +0200

    HDDS-415. 'ozone om' with incorrect argument first logs all the STARTUP_MSG. Contributed by Namit Maheshwari.

 .../src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java         | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit a04be21af9019c927adfaee291ed31c9312ffed8
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu Sep 13 11:29:31 2018 +0530

    HDDS-420. putKey failing with KEY_ALLOCATION_ERROR. Contributed by Shashikant Banerjee.

 .../hadoop/ozone/container/common/statemachine/StateContext.java  | 2 +-
 .../common/transport/server/ratis/XceiverServerRatis.java         | 3 +++
 .../java/org/apache/hadoop/hdds/scm/node/StaleNodeHandler.java    | 4 ++++
 .../hadoop/hdds/scm/pipelines/PipelineActionEventHandler.java     | 2 ++
 .../apache/hadoop/hdds/scm/pipelines/ratis/RatisManagerImpl.java  | 8 ++++----
 5 files changed, 14 insertions(+), 5 deletions(-)

commit 3b680a8afd5335d3f0c04d6b7872ec64c905b066
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Sep 12 14:09:15 2018 -0700

    HDDS-395. TestOzoneRestWithMiniCluster fails with "Unable to read ROCKDB config".
    Contributed by Dinesh Chitlangia.

 .../apache/hadoop/utils/db/DBConfigFromFile.java   | 34 +++++++++++++++-------
 1 file changed, 23 insertions(+), 11 deletions(-)

commit 8e1cc7a6cbfa9a0414cd47a58135958783b03c26
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Sep 12 11:32:46 2018 -0700

    HDDS-436. Allow SCM chill mode to be disabled by configuration.
    Contributed by Ajay Kumar.

 .../java/org/apache/hadoop/hdds/HddsConfigKeys.java  |  4 ++++
 .../common/src/main/resources/ozone-default.xml      |  8 ++++++++
 .../hadoop/hdds/scm/server/SCMChillModeManager.java  |  7 ++++++-
 .../hdds/scm/server/StorageContainerManager.java     |  3 ++-
 .../hdds/scm/server/TestSCMChillModeManager.java     | 20 +++++++++++++++-----
 5 files changed, 35 insertions(+), 7 deletions(-)

commit 4e78f8c97553dcf92f955d551f953670444c2a77
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Sep 12 10:38:36 2018 -0700

    HDDS-428. OzoneManager lock optimization.
    Contributed by Nanda Kumar.

 hadoop-hdds/common/pom.xml                         |   5 +
 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   4 +
 .../org/apache/hadoop/ozone/lock/ActiveLock.java   | 101 +++++++++++
 .../org/apache/hadoop/ozone/lock/LockManager.java  | 101 +++++++++++
 .../hadoop/ozone/lock/PooledLockFactory.java       |  43 +++++
 .../org/apache/hadoop/ozone/lock/package-info.java |  21 +++
 .../common/src/main/resources/ozone-default.xml    |  11 ++
 .../apache/hadoop/ozone/lock/TestLockManager.java  |  64 +++++++
 .../org/apache/hadoop/ozone/lock/package-info.java |  21 +++
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  43 ++---
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  90 +++++-----
 .../apache/hadoop/ozone/om/OMMetadataManager.java  |  14 +-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  27 +--
 .../apache/hadoop/ozone/om/OzoneManagerLock.java   | 181 +++++++++++++++++++
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  |  41 +++--
 .../hadoop/ozone/om/TestOzoneManagerLock.java      | 192 +++++++++++++++++++++
 16 files changed, 833 insertions(+), 126 deletions(-)

commit 4580300b64366099e1b91b2b135b3dcfaa7499e2
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Sep 12 18:30:53 2018 +0530

    HDDS-433. ContainerStateMachine#readStateMachineData should properly build LogEntryProto. Contributed by Lokesh Jain.

 .../transport/server/ratis/ContainerStateMachine.java      | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 0df17aab227226a3cceef553d18e6438e8c0172f
Author: Márton Elek <elek@apache.org>
Date:   Wed Sep 12 11:11:12 2018 +0200

    HDDS-425. Move unit test of the genconf tool to hadoop-ozone/tools module. Contributed by Dinesh Chitlangia.

 .../TestGenerateOzoneRequiredConfigurations.java   |  0
 .../apache/hadoop/ozone/genconf/package-info.java  | 22 ++++++++++++++++++++++
 2 files changed, 22 insertions(+)

commit fa02d688e54df3d6b57ba97a2c8be5eddde9fd38
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Sep 11 17:00:04 2018 -0700

    HDDS-432. Replication of closed containers is not working.
    Contributed by Elek, Marton.

 .../ReplicateContainerCommandHandler.java          |  15 ++-
 .../TestReplicateContainerCommandHandler.java      |  19 +++-
 .../container/replication/ReplicationManager.java  |  18 +++-
 .../replication/TestReplicationManager.java        | 104 ++++++++++++---------
 4 files changed, 105 insertions(+), 51 deletions(-)

commit 4f89a4b6dfbf7a46140e25091d83598891353fe0
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Sep 11 16:42:12 2018 -0700

    HDDS-424. Consolidate ozone oz parameters to use GNU convention.
    Contributed by Elek, Marton.

 .../org/apache/hadoop/hdds/cli/GenericCli.java     |  14 +-
 .../hadoop/hdds/cli/GenericParentCommand.java      |  25 ++++
 .../hdds/cli/MissingSubcommandException.java       |  29 ++++
 .../src/test/acceptance/basic/ozone-shell.robot    |  36 ++---
 .../src/test/acceptance/ozonefs/ozonefs.robot      |   6 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 162 +++++++++++----------
 .../apache/hadoop/ozone/web/ozShell/Handler.java   |  36 ++---
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java |  39 +----
 .../ozone/web/ozShell/bucket/BucketCommands.java   |  59 ++++++++
 .../web/ozShell/bucket/CreateBucketHandler.java    |   2 +-
 .../web/ozShell/bucket/DeleteBucketHandler.java    |   2 +-
 .../web/ozShell/bucket/InfoBucketHandler.java      |   2 +-
 .../web/ozShell/bucket/ListBucketHandler.java      |   9 +-
 .../web/ozShell/bucket/UpdateBucketHandler.java    |   6 +-
 .../ozone/web/ozShell/keys/DeleteKeyHandler.java   |   2 +-
 .../ozone/web/ozShell/keys/GetKeyHandler.java      |  11 +-
 .../ozone/web/ozShell/keys/InfoKeyHandler.java     |   2 +-
 .../hadoop/ozone/web/ozShell/keys/KeyCommands.java |  59 ++++++++
 .../ozone/web/ozShell/keys/ListKeyHandler.java     |   9 +-
 .../ozone/web/ozShell/keys/PutKeyHandler.java      |  11 +-
 .../web/ozShell/volume/CreateVolumeHandler.java    |  18 +--
 .../web/ozShell/volume/DeleteVolumeHandler.java    |   2 +-
 .../web/ozShell/volume/InfoVolumeHandler.java      |   2 +-
 .../web/ozShell/volume/ListVolumeHandler.java      |  11 +-
 .../web/ozShell/volume/UpdateVolumeHandler.java    |   6 +-
 .../ozone/web/ozShell/volume/VolumeCommands.java   |  60 ++++++++
 26 files changed, 410 insertions(+), 210 deletions(-)

commit cbb476c5b918b03e8a09b80e7c116b4fb398076d
Author: Xiaoyu Yao <xyao@HW14116.local>
Date:   Tue Sep 11 15:12:59 2018 -0700

    HDDS-416. Remove currentPosition from ChunkInputStreamEntry. Contributed by Lokesh Jain.

 .../apache/hadoop/ozone/client/io/ChunkGroupInputStream.java   | 10 +++-------
 1 file changed, 3 insertions(+), 7 deletions(-)

commit fc77402ff38eb858c1dce8e63d73c8b8b30aa02a
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Sep 11 10:44:47 2018 -0700

    HDDS-431. LeaseManager of CommandWatcher is not started.
    Contributed by Elek, Marton.

 .../java/org/apache/hadoop/hdds/scm/server/StorageContainerManager.java | 2 ++
 1 file changed, 2 insertions(+)

commit 096d861a14a39c08ad5516ce473ba20902e6e9ca
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Sep 11 10:19:50 2018 -0700

    HDDS-222. Remove hdfs command line from ozone distribution.
    Contributed by Elek, Marton.

 hadoop-hdds/client/pom.xml                       |  1 -
 hadoop-hdds/container-service/pom.xml            |  2 -
 hadoop-hdds/framework/pom.xml                    |  1 -
 hadoop-hdds/pom.xml                              |  3 -
 hadoop-hdds/server-scm/pom.xml                   |  4 --
 hadoop-ozone/common/src/main/bin/ozone           |  8 +--
 hadoop-ozone/common/src/main/bin/ozone-config.sh | 51 ++++++++++++++
 hadoop-ozone/common/src/main/bin/start-ozone.sh  | 90 +-----------------------
 hadoop-ozone/common/src/main/bin/stop-ozone.sh   |  6 +-
 hadoop-ozone/objectstore-service/pom.xml         |  2 -
 hadoop-ozone/ozone-manager/pom.xml               |  2 -
 hadoop-ozone/pom.xml                             |  9 ---
 12 files changed, 61 insertions(+), 118 deletions(-)

commit 06c6aa696a50f109499d0d84ad9953df30af8472
Author: Márton Elek <elek@apache.org>
Date:   Sun Sep 9 23:26:55 2018 +0200

    HDDS-421. Resilient DNS resolution in datanode-service. Contributed by Elek, Marton.

 .../container/common/states/datanode/InitDatanodeState.java    | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit bc8409494afce7c889f8d700a11704f6b336ac10
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Sep 10 08:45:49 2018 -0700

    HDDS-403. Fix createdOn and modifiedOn timestamp for volume, bucket, key. Contributed by Dinesh Chitlangia.

 .../main/java/org/apache/hadoop/hdds/scm/client/HddsClientUtils.java  | 4 ++--
 .../src/main/java/org/apache/hadoop/ozone/om/KeyManagerImpl.java      | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit d331d239424631252fd41d9e634506fb8c3110f9
Author: Márton Elek <elek@apache.org>
Date:   Mon Sep 10 13:16:28 2018 +0200

    HDDS-417. Ambiguous error message when using genconf tool. Contributed by Dinesh Chitlangia.

 .../TestGenerateOzoneRequiredConfigurations.java   | 27 +++++++++++++++++++---
 .../GenerateOzoneRequiredConfigurations.java       | 12 +++++-----
 2 files changed, 30 insertions(+), 9 deletions(-)

commit 4ff4b7745f294db69272e8242cb67cc929e3f62b
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Sun Sep 9 10:37:30 2018 +0530

    HDDS-410. ozone scmcli list is not working properly. Contributed by Hanisha Koneru.

 .../apache/hadoop/hdds/scm/container/common/helpers/ContainerInfo.java   | 1 +
 1 file changed, 1 insertion(+)

commit 77a7aa0e83fa6fd1fb9927fd995cf72f823fbfe4
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Sep 7 13:27:15 2018 -0700

    HDDS-398. Support multiple tests in freon.
    Contributed by Elek, Marton.

 .../src/test/acceptance/basic/basic.robot          |    2 +-
 .../hadoop/ozone/freon/TestDataValidate.java       |  119 +-
 .../org/apache/hadoop/ozone/freon/TestFreon.java   |  129 ---
 .../hadoop/ozone/freon/TestRandomKeyGenerator.java |  106 ++
 .../java/org/apache/hadoop/ozone/freon/Freon.java  | 1136 +-------------------
 .../hadoop/ozone/freon/RandomKeyGenerator.java     | 1038 ++++++++++++++++++
 6 files changed, 1205 insertions(+), 1325 deletions(-)

commit c2c27e484471cb74f0685bdff411e156cd832431
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Sep 7 12:53:46 2018 -0700

    HDDS-190. Improve shell error message for unrecognized option.
    Contributed by Elek, Marton.

 .../org/apache/hadoop/hdds/cli/GenericCli.java     |  17 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 246 +++++++------
 .../apache/hadoop/ozone/web/ozShell/Handler.java   |  27 +-
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java | 407 +++------------------
 .../web/ozShell/bucket/CreateBucketHandler.java    |  46 +--
 .../web/ozShell/bucket/DeleteBucketHandler.java    |  45 +--
 .../web/ozShell/bucket/InfoBucketHandler.java      |  42 +--
 .../web/ozShell/bucket/ListBucketHandler.java      |  88 +++--
 .../web/ozShell/bucket/UpdateBucketHandler.java    |  66 ++--
 .../ozone/web/ozShell/keys/DeleteKeyHandler.java   |  48 +--
 .../ozone/web/ozShell/keys/GetKeyHandler.java      |  78 ++--
 .../ozone/web/ozShell/keys/InfoKeyHandler.java     |  45 +--
 .../ozone/web/ozShell/keys/ListKeyHandler.java     |  91 +++--
 .../ozone/web/ozShell/keys/PutKeyHandler.java      |  81 ++--
 .../web/ozShell/volume/CreateVolumeHandler.java    |  65 ++--
 .../web/ozShell/volume/DeleteVolumeHandler.java    |  35 +-
 .../web/ozShell/volume/InfoVolumeHandler.java      |  37 +-
 .../web/ozShell/volume/ListVolumeHandler.java      |  81 ++--
 .../web/ozShell/volume/UpdateVolumeHandler.java    |  49 ++-
 19 files changed, 617 insertions(+), 977 deletions(-)

commit b9676ba61368e6578414e38fa1c17f39040e519d
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Sep 7 11:20:25 2018 -0700

    HDDS-400. Check global replication state for containers of dead node. Contributed by Elek, Marton.

 .../hdds/scm/container/ContainerReportHandler.java | 49 ++++++-----
 .../hdds/scm/container/ContainerStateManager.java  | 38 ++++++++-
 .../hadoop/hdds/scm/node/DeadNodeHandler.java      | 12 +++
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java | 45 ++++++++++
 .../scm/container/TestContainerReportHandler.java  | 20 +----
 .../scm/container/TestContainerStateManager.java   | 96 ++++++++++++++++++++++
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  | 95 ++++++++++++++-------
 ...a => TestContainerStateManagerIntegration.java} |  2 +-
 8 files changed, 280 insertions(+), 77 deletions(-)

commit f4767b1330e5bf4b695199e37e95474998837638
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Sep 7 10:35:45 2018 -0700

    HDDS-351. Add chill mode state to SCM.
    Contributed by Ajay Kumar.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   6 +
 .../common/src/main/resources/ozone-default.xml    |   9 +
 .../hdds/scm/container/ContainerMapping.java       |   5 +
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  10 ++
 .../hdds/scm/server/SCMChillModeManager.java       | 198 +++++++++++++++++++++
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  19 ++
 .../hdds/scm/server/StorageContainerManager.java   |  17 +-
 .../org/apache/hadoop/hdds/scm/HddsTestUtils.java  |  85 +++++++++
 .../hdds/scm/server/TestSCMChillModeManager.java   | 115 ++++++++++++
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |  23 ++-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  93 +++++++---
 .../hadoop/ozone/TestStorageContainerManager.java  | 170 ++++++++++++++----
 12 files changed, 683 insertions(+), 67 deletions(-)

commit 588b824e773f750c147676f0ae1e2cf1e788c9f2
Author: Márton Elek <elek@apache.org>
Date:   Fri Sep 7 17:45:26 2018 +0200

    HDDS-214. Bump ozone/hdds version after the release branch cut

 hadoop-hdds/client/pom.xml               | 4 ++--
 hadoop-hdds/common/pom.xml               | 6 +++---
 hadoop-hdds/container-service/pom.xml    | 4 ++--
 hadoop-hdds/framework/pom.xml            | 4 ++--
 hadoop-hdds/pom.xml                      | 2 +-
 hadoop-hdds/server-scm/pom.xml           | 4 ++--
 hadoop-hdds/tools/pom.xml                | 4 ++--
 hadoop-ozone/acceptance-test/pom.xml     | 2 +-
 hadoop-ozone/client/pom.xml              | 4 ++--
 hadoop-ozone/common/pom.xml              | 4 ++--
 hadoop-ozone/docs/pom.xml                | 4 ++--
 hadoop-ozone/integration-test/pom.xml    | 4 ++--
 hadoop-ozone/objectstore-service/pom.xml | 4 ++--
 hadoop-ozone/ozone-manager/pom.xml       | 4 ++--
 hadoop-ozone/ozonefs/pom.xml             | 4 ++--
 hadoop-ozone/pom.xml                     | 6 +++---
 hadoop-ozone/tools/pom.xml               | 4 ++--
 17 files changed, 34 insertions(+), 34 deletions(-)

commit 629acf180abdb57b6ba8dbff1c73c4e28a9e90e6
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Sep 7 07:36:24 2018 -0700

    HDDS-408. Read (getKey) operation is very slow.
    Contributed by Nandakumar.

 .../java/org/apache/hadoop/ozone/client/io/OzoneInputStream.java     | 5 +++++
 .../src/main/java/org/apache/hadoop/ozone/client/rpc/RpcClient.java  | 3 +--
 2 files changed, 6 insertions(+), 2 deletions(-)

commit f2cc127560bbb0d6c5f6fcebb4702b990908c429
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Sep 6 16:58:15 2018 -0700

    HDDS-397. Handle deletion for keys with no blocks. Contributed by Lokesh Jain.

 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 20 +++++++++
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  8 ----
 .../hadoop/ozone/om/TestKeyDeletingService.java    | 47 +++++++++++++++++++---
 3 files changed, 62 insertions(+), 13 deletions(-)

commit eece1071c9260eb1ffb37e5afaedafb0e74d3dee
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Sep 6 15:08:46 2018 -0700

    HDDS-406. Enable acceptace test of the putKey for rpc protocol.
    Contributed by Elek, Marton.

 .../src/test/acceptance/basic/ozone-shell.robot          | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 20ec1aa9d7b22cfc3babe7eae291516e5941af75
Author: Tsz Wo Nicholas Sze <szetszwo@apache.org>
Date:   Thu Sep 6 14:35:07 2018 -0700

    HDDS-297. Add pipeline actions in Ozone.  Contributed by Mukul Kumar Singh and Shashikant Banerjee

 .../org/apache/hadoop/hdds/scm/XceiverClient.java  |   8 +-
 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |   9 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java |  36 +++-
 .../hdds/scm/client/ContainerOperationClient.java  |   2 +-
 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   5 +
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  11 ++
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |  10 +-
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  12 ++
 .../main/java/org/apache/ratis/RatisHelper.java    |  22 ++-
 .../common/src/main/resources/ozone-default.xml    |  27 +++
 .../common/statemachine/StateContext.java          |  45 +++++
 .../states/endpoint/HeartbeatEndpointTask.java     |  28 +++
 .../server/ratis/ContainerStateMachine.java        |  17 +-
 .../transport/server/ratis/XceiverServerRatis.java | 205 +++++++++++++++------
 .../ozone/container/ozoneimpl/OzoneContainer.java  |   2 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |  26 +++
 .../hdds/scm/container/ContainerMapping.java       |  27 ++-
 .../hdds/scm/container/ContainerStateManager.java  |   5 +-
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  14 ++
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  24 ++-
 .../hadoop/hdds/scm/node/StaleNodeHandler.java     |  16 +-
 .../hdds/scm/pipelines/Node2PipelineMap.java       |  34 +---
 .../scm/pipelines/PipelineActionEventHandler.java  |  60 ++++++
 .../hdds/scm/pipelines/PipelineCloseHandler.java   |  38 ++++
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  10 +-
 .../hdds/scm/pipelines/PipelineSelector.java       |  46 +++--
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  14 +-
 .../standalone/StandaloneManagerImpl.java          |   7 +-
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java |  23 +++
 .../hdds/scm/server/StorageContainerManager.java   |  13 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |   6 +-
 .../hadoop/hdds/scm/pipeline/TestNodeFailure.java  | 126 +++++++++++++
 .../hdds/scm/pipeline/TestPipelineClose.java       |   6 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |  15 ++
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  21 +++
 .../transport/server/ratis/TestCSMMetrics.java     |   3 +-
 .../container/server/TestContainerServer.java      |   3 +-
 .../server/TestContainerStateMachine.java          |   2 +-
 38 files changed, 815 insertions(+), 163 deletions(-)

commit f834a73d2609bb65c5266ba6d45a70fdfcc7b8c7
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Sep 6 12:44:08 2018 -0700

    HDDS-405. User/volume mapping is not cleaned up during the deletion of the last volume.
    Contributed by Elek, Marton.

 .../apache/hadoop/ozone/om/TestOzoneManager.java   | 26 ++++++++++++++++++----
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  |  2 +-
 2 files changed, 23 insertions(+), 5 deletions(-)

commit 654acde04f99557023aecb01a30126ea5f6a5aa4
Author: Márton Elek <elek@apache.org>
Date:   Thu Sep 6 13:16:54 2018 +0200

    HDDS-404. Implement toString() in OmKeyLocationInfo. Contributed by Dinesh Chitlangia.

 .../org/apache/hadoop/ozone/om/helpers/OmKeyLocationInfo.java  | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 0a6c7eb6fef9f62db06618d6fb78a32536ee6a43
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Sep 5 12:26:23 2018 -0700

    HDDS-303. Removing logic to identify containers to be closed from SCM. Contributed by Nanda kumar.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   6 +
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   6 -
 .../common/src/main/resources/ozone-default.xml    |   4 +-
 .../container/common/impl/HddsDispatcher.java      |   6 +-
 .../hdds/scm/container/ContainerMapping.java       |  82 +-------
 .../hdds/scm/container/closer/ContainerCloser.java | 194 ------------------
 .../hdds/scm/container/TestContainerMapping.java   |  43 ----
 .../scm/container/closer/TestContainerCloser.java  | 228 ---------------------
 8 files changed, 16 insertions(+), 553 deletions(-)

commit ba8153a31fac65835b228ceb5279daeeaba1752e
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Sep 5 18:35:11 2018 +0530

    HDDS-358. Use DBStore and TableStore for DeleteKeyService. Contributed by Anu Engineer

 .../apache/hadoop/ozone/om/helpers/OmKeyArgs.java  |  10 ++
 .../apache/hadoop/ozone/om/KeyDeletingService.java | 148 ++++++++++-------
 .../org/apache/hadoop/ozone/om/KeyManager.java     |  24 +--
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  40 ++++-
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     |  48 +++---
 .../ozone/om/ScmBlockLocationTestIngClient.java    | 178 +++++++++++++++++++++
 .../hadoop/ozone/om/TestKeyDeletingService.java    | 164 +++++++++++++++++++
 7 files changed, 516 insertions(+), 96 deletions(-)

commit 7990a4e8538dc73e5963d5f193d4e42dd8571365
Author: Márton Elek <elek@apache.org>
Date:   Wed Sep 5 11:11:53 2018 +0200

    HDDS-333. Create an Ozone Logo. Contributed by Priyanka Nagwekar.

 hadoop-ozone/docs/static/NOTES.md       |  17 +++++++++++++++++
 hadoop-ozone/docs/static/ozone-logo.png | Bin 0 -> 40237 bytes
 2 files changed, 17 insertions(+)

commit 3cb0b9ad0e827b4154608b9c999f31edcf898f45
Author: Márton Elek <elek@apache.org>
Date:   Wed Sep 5 12:40:44 2018 +0200

    HDDS-315. ozoneShell infoKey does not work for directories created as key and throws 'KEY_NOT_FOUND' error. Contributed by Dinesh Chitlangia.

 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 35 ++++++++++++++++++++++
 .../ozone/web/ozShell/keys/InfoKeyHandler.java     |  7 ++++-
 2 files changed, 41 insertions(+), 1 deletion(-)

commit ed75c038d2a115287de261f3b3a1acc6ca0cdcdd
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Sep 4 22:56:42 2018 -0700

    HDDS-268. Add SCM close container watcher. Contributed by Ajay Kumar.

 .../hadoop/hdds/server/events/EventWatcher.java    |  20 +-
 .../scm/command/CommandStatusReportHandler.java    |   6 +-
 .../scm/container/CloseContainerEventHandler.java  |  26 ++
 .../hdds/scm/container/CloseContainerWatcher.java  | 100 +++++++
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  11 +
 .../hdds/scm/server/StorageContainerManager.java   |   8 +
 .../ozone/container/TestCloseContainerWatcher.java | 287 +++++++++++++++++++++
 7 files changed, 450 insertions(+), 8 deletions(-)

commit 1439eb6b80e3c709ad2c1359f3579512147e0611
Author: Tsz Wo Nicholas Sze <szetszwo@apache.org>
Date:   Tue Sep 4 17:10:10 2018 -0700

    HDDS-383. Ozone Client should discard preallocated blocks from closed containers.  Contributed by Shashikant Banerjee

 .../ozone/client/io/ChunkGroupOutputStream.java    | 86 ++++++++++++++--------
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  |  4 +
 .../rpc/TestCloseContainerHandlingByClient.java    | 64 ++++++++++------
 3 files changed, 102 insertions(+), 52 deletions(-)

commit ac74583ba428de43664090777a5ae03ffc98c3f6
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Sep 4 16:27:31 2018 -0700

    HDDS-396. Remove openContainers.db from SCM.
    Contributed by Dinesh Chitlangia.

 .../common/src/main/java/org/apache/hadoop/ozone/OzoneConsts.java     | 1 -
 .../tools/src/main/java/org/apache/hadoop/ozone/scm/cli/SQLCLI.java   | 4 ----
 2 files changed, 5 deletions(-)

commit 5acab7b5cba8c0e9a074dcbab999579f086fcf7a
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Tue Sep 4 14:57:54 2018 -0700

    HDDS-369. Remove the containers of a dead node from the container state map. Contributed by Elek, Marton

 .../hadoop/hdds/scm/node/DeadNodeHandler.java      |  41 ++++++--
 .../hdds/scm/node/states/Node2ContainerMap.java    |  29 +++---
 .../hdds/scm/server/StorageContainerManager.java   |   3 +-
 .../hadoop/hdds/scm/node/TestDeadNodeHandler.java  | 112 +++++++++++++++++++++
 4 files changed, 166 insertions(+), 19 deletions(-)

commit be0bc451524c8d1985f28db5d180d738f8f98fd8
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Sep 5 00:11:07 2018 +0530

    HDDS-98. Adding Ozone Manager Audit Log. Contributed by Dinesh Chitlangia.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  32 ++++
 hadoop-ozone/common/src/main/bin/ozone             |   2 +
 .../src/main/conf/om-audit-log4j2.properties       |  86 +++++++++
 .../org/apache/hadoop/ozone/audit/OMAction.java    |  26 ++-
 .../hadoop/ozone/om/helpers/OmBucketArgs.java      |  25 ++-
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      |  21 +-
 .../apache/hadoop/ozone/om/helpers/OmKeyArgs.java  |  22 ++-
 .../hadoop/ozone/om/helpers/OmVolumeArgs.java      |  16 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 213 +++++++++++++++++++++
 9 files changed, 431 insertions(+), 12 deletions(-)

commit eb85fbe38f18693954f0cbd5382631f28398c546
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Sep 4 23:41:50 2018 +0530

    HDDS-75. Support for CopyContainer. Contributed by Elek, Marton.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   3 +
 .../src/main/proto/DatanodeContainerProtocol.proto |  12 +-
 .../common/src/main/resources/ozone-default.xml    |  10 +-
 .../ozone/container/common/interfaces/Handler.java |  15 +-
 .../common/statemachine/DatanodeStateMachine.java  |  25 +--
 .../ReplicateContainerCommandHandler.java          | 124 ++++++++++++++-
 .../common/transport/server/XceiverServerGrpc.java |  12 +-
 .../container/keyvalue/KeyValueContainer.java      |   3 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  | 100 +++++++-----
 .../ozone/container/ozoneimpl/OzoneContainer.java  |   9 +-
 .../container/replication/ContainerDownloader.java |  40 +++++
 .../replication/ContainerReplicationSource.java    |  49 ++++++
 .../replication/ContainerStreamingOutput.java      |  45 ++++++
 .../replication/GrpcReplicationClient.java         | 169 ++++++++++++++++++++
 .../replication/GrpcReplicationService.java        | 130 +++++++++++++++
 .../OnDemandContainerReplicationSource.java        |  76 +++++++++
 .../replication/SimpleContainerDownloader.java     | 121 ++++++++++++++
 .../ozone/container/replication/package-info.java  |  21 +++
 .../TestReplicateContainerCommandHandler.java      | 146 +++++++++++++++++
 .../statemachine/commandhandler/package-info.java  |  22 +++
 .../ozone/container/TestContainerReplication.java  | 175 +++++++++++++++++++++
 .../TestReplicateContainerHandler.java             |  70 ---------
 .../container/ozoneimpl/TestOzoneContainer.java    |   4 +-
 23 files changed, 1244 insertions(+), 137 deletions(-)

commit 9230f10b10b9cc275e9111068697de6ad983c1db
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Sep 3 20:14:45 2018 +0530

    HDDS-343. Containers are stuck in closing state in scm. Contributed by Elek, Marton.

 .../apache/hadoop/hdds/scm/container/ContainerMapping.java  | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 8c34c468122258325446e7df8fda1092bde03c3e
Author: Márton Elek <elek@apache.org>
Date:   Mon Sep 3 13:32:55 2018 +0200

    HDDS-336. Print out container location information for a specific ozone key . Contributed by LiXin Ge.

 .../apache/hadoop/ozone/client/OzoneBucket.java    |   4 +-
 .../hadoop/ozone/client/OzoneClientUtils.java      |  29 +++++-
 .../hadoop/ozone/client/OzoneKeyDetails.java       |  58 +++++++++++
 .../hadoop/ozone/client/OzoneKeyLocation.java      |  82 ++++++++++++++++
 .../ozone/client/protocol/ClientProtocol.java      |  10 +-
 .../hadoop/ozone/client/rest/RestClient.java       |  27 +++---
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  22 ++---
 .../hadoop/ozone/client/rest/headers/Header.java   |   1 +
 .../ozone/client/rest/response/KeyInfoDetails.java | 107 +++++++++++++++++++++
 .../ozone/client/rest/response/KeyLocation.java    |  89 +++++++++++++++++
 .../hadoop/ozone/web/response/KeyInfoDetails.java  |  80 +++++++++++++++
 .../hadoop/ozone/web/response/KeyLocation.java     |  82 ++++++++++++++++
 .../ozone/client/rest/TestOzoneRestClient.java     |  86 +++++++++++++++--
 .../ozone/client/rpc/TestOzoneRpcClient.java       | 101 +++++++++++++++++--
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |   6 +-
 .../hadoop/ozone/web/handlers/KeyHandler.java      |  12 +++
 .../ozone/web/interfaces/StorageHandler.java       |  12 +++
 .../web/storage/DistributedStorageHandler.java     |  33 +++++--
 .../ozone/web/ozShell/keys/InfoKeyHandler.java     |  10 +-
 19 files changed, 779 insertions(+), 72 deletions(-)

commit 77aad8dab92c8b839ee6e638e25ac91cb4969fca
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Sep 3 12:26:34 2018 +0530

    HDDS-263. Add retries in Ozone Client to handle BlockNotCommitted Exception. Contributed by Shashikant Banerjee.

 .../common/helpers/BlockNotCommittedException.java | 36 +++++++++
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  5 ++
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  8 ++
 .../common/src/main/resources/ozone-default.xml    | 16 ++++
 .../hadoop/ozone/client/OzoneClientUtils.java      | 28 +++++++
 .../ozone/client/io/ChunkGroupOutputStream.java    | 89 +++++++++++++++++----
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  5 ++
 .../rpc/TestCloseContainerHandlingByClient.java    | 91 +++++++++++++++++++---
 .../web/storage/DistributedStorageHandler.java     |  5 ++
 9 files changed, 254 insertions(+), 29 deletions(-)

commit 84af02cd3667c33d28b9a8be88a1086809493075
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Sep 2 11:47:32 2018 -0700

    HDDS-357. Use DBStore and TableStore for OzoneManager non-background service.
    Contributed by Nandakumar.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   6 +-
 .../java/org/apache/hadoop/utils/RocksDBStore.java |   2 +-
 .../java/org/apache/hadoop/utils/db/DBStore.java   |  22 +
 .../java/org/apache/hadoop/utils/db/RDBStore.java  |  26 +-
 .../common/src/main/resources/ozone-default.xml    |   2 +-
 .../org/apache/hadoop/hdds/server/ServerUtils.java |   5 +
 .../ozone/client/io/ChunkGroupOutputStream.java    |   4 +-
 .../hadoop/ozone/om/helpers/OpenKeySession.java    |   6 +-
 .../ozone/om/protocol/OzoneManagerProtocol.java    |  11 +-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |   8 +-
 .../src/main/proto/OzoneManagerProtocol.proto      |   6 +-
 .../rpc/TestCloseContainerHandlingByClient.java    |  37 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |   4 +
 .../org/apache/hadoop/ozone/om/TestOmSQLCli.java   |   7 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |  37 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java |   6 +
 .../apache/hadoop/ozone/om/BucketManagerImpl.java  |  57 +--
 .../org/apache/hadoop/ozone/om/KeyManager.java     |   6 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 276 +++++------
 .../apache/hadoop/ozone/om/OMMetadataManager.java  | 222 +++++----
 .../hadoop/ozone/om/OmMetadataManagerImpl.java     | 509 +++++++++++++--------
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 209 +++++----
 .../apache/hadoop/ozone/om/VolumeManagerImpl.java  | 156 ++++---
 ...OzoneManagerProtocolServerSideTranslatorPB.java |   7 +-
 .../hadoop/ozone/om/TestBucketManagerImpl.java     | 208 ++++-----
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  12 +-
 26 files changed, 978 insertions(+), 873 deletions(-)

commit 81decdca82d740ac5ba4888650e3ca593d8869a4
Author: Nanda kumar <nanda@apache.org>
Date:   Sun Sep 2 00:18:13 2018 +0530

    Revert "HDDS-98. Adding Ozone Manager Audit Log."
    
    This reverts commit 630b64ec7e963968a5bdcd1d625fc78746950137.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  32 ---
 hadoop-ozone/common/src/main/bin/ozone             |   2 -
 .../src/main/conf/om-audit-log4j2.properties       |  86 --------
 .../org/apache/hadoop/ozone/audit/OMAction.java    |  25 +--
 .../hadoop/ozone/om/helpers/OmBucketArgs.java      |  25 +--
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      |  21 +-
 .../apache/hadoop/ozone/om/helpers/OmKeyArgs.java  |  22 +--
 .../hadoop/ozone/om/helpers/OmVolumeArgs.java      |  16 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 218 +--------------------
 9 files changed, 18 insertions(+), 429 deletions(-)

commit 7fba233da6c689c3344d7663753fe1f7cdda0c61
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Aug 31 22:24:30 2018 -0700

    HDDS-392. Incomplete description about auditMap#key in AuditLogging Framework.
    Contributed by  Dinesh Chitlangia.

 .../src/main/java/org/apache/hadoop/ozone/audit/package-info.java   | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 92101813bb9458fb442818ad53afabb793f32bc0
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Aug 31 18:11:01 2018 -0700

    HDDS-379. Simplify and improve the cli arg parsing of ozone scmcli.
    Contributed by Elek, Marton.

 .../common/dev-support/findbugsExcludeFile.xml     |   4 +
 .../org/apache/hadoop/hdds/cli/GenericCli.java     |  82 ++++
 .../hadoop/hdds/cli/HddsVersionProvider.java       |  35 ++
 .../org/apache/hadoop/hdds/cli/package-info.java}  |  13 +-
 hadoop-hdds/pom.xml                                |   5 +
 .../apache/hadoop/hdds/scm/cli/OzoneBaseCLI.java   |  43 --
 .../hadoop/hdds/scm/cli/OzoneCommandHandler.java   |  87 ----
 .../org/apache/hadoop/hdds/scm/cli/SCMCLI.java     | 246 ++++------
 .../scm/cli/container/CloseContainerHandler.java   |  85 ----
 .../hdds/scm/cli/container/CloseSubcommand.java    |  54 +++
 .../scm/cli/container/ContainerCommandHandler.java | 128 -----
 .../scm/cli/container/CreateContainerHandler.java  |  67 ---
 .../hdds/scm/cli/container/CreateSubcommand.java   |  65 +++
 .../scm/cli/container/DeleteContainerHandler.java  |  95 ----
 .../hdds/scm/cli/container/DeleteSubcommand.java   |  60 +++
 .../scm/cli/container/InfoContainerHandler.java    | 114 -----
 .../hdds/scm/cli/container/InfoSubcommand.java     |  94 ++++
 .../scm/cli/container/ListContainerHandler.java    | 117 -----
 .../hdds/scm/cli/container/ListSubcommand.java     |  83 ++++
 .../hdds/scm/cli/container/package-info.java       |   3 +
 .../apache/hadoop/hdds/scm/cli/package-info.java   |  12 +-
 hadoop-ozone/common/src/main/bin/ozone             |   2 +-
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    | 518 ---------------------
 23 files changed, 576 insertions(+), 1436 deletions(-)

commit 9be452a8727e6ba50f3deda370cd71f4fa981096
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Aug 31 14:30:29 2018 -0700

    HDDS-388. Fix the name of the db profile configuration key.
    Contributed by Elek, Marton.

 hadoop-hdds/common/src/main/resources/ozone-default.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit da1d5c5ebfc041cbbfbf9da6b4e29edd6c60810c
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Aug 31 14:20:56 2018 -0700

    HDDS-98. Adding Ozone Manager Audit Log.
    Contributed by Dinesh Chitlangia.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  32 +++
 hadoop-ozone/common/src/main/bin/ozone             |   2 +
 .../src/main/conf/om-audit-log4j2.properties       |  86 ++++++++
 .../org/apache/hadoop/ozone/audit/OMAction.java    |  25 ++-
 .../hadoop/ozone/om/helpers/OmBucketArgs.java      |  25 ++-
 .../hadoop/ozone/om/helpers/OmBucketInfo.java      |  21 +-
 .../apache/hadoop/ozone/om/helpers/OmKeyArgs.java  |  22 ++-
 .../hadoop/ozone/om/helpers/OmVolumeArgs.java      |  16 +-
 .../org/apache/hadoop/ozone/om/OzoneManager.java   | 218 ++++++++++++++++++++-
 9 files changed, 429 insertions(+), 18 deletions(-)

commit 5ce4502b5bf0f2535db94cbc74c584f2c51d531a
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu Aug 30 02:21:24 2018 +0530

    HDDS-280. Support ozone dist-start-stitching on openbsd/osx. Contributed by Elek, Marton.

 hadoop-ozone/acceptance-test/dev-support/bin/robot-all.sh      |  2 +-
 hadoop-ozone/acceptance-test/dev-support/bin/robot-dnd-all.sh  | 10 ++--------
 hadoop-ozone/acceptance-test/dev-support/bin/robot.sh          |  7 ++++---
 hadoop-ozone/acceptance-test/pom.xml                           |  7 +++----
 .../src/test/acceptance/basic/ozone-shell.robot                |  1 -
 .../acceptance-test/src/test/acceptance/commonlib.robot        |  2 +-
 hadoop-ozone/common/pom.xml                                    |  5 +----
 hadoop-ozone/docs/content/GettingStarted.md                    |  3 ++-
 hadoop-ozone/pom.xml                                           |  5 +++++
 9 files changed, 19 insertions(+), 23 deletions(-)

commit 566730d1ba897dd23b390ebd9e27c0e47866b51f
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Aug 29 13:31:19 2018 +0530

    HDDS-380. Remove synchronization from ChunkGroupOutputStream and ChunkOutputStream. Contributed by Shashikant Banerjee.

 .../hadoop/hdds/scm/storage/ChunkOutputStream.java       | 16 ++++++++--------
 .../hadoop/ozone/client/io/ChunkGroupOutputStream.java   | 12 ++++++------
 2 files changed, 14 insertions(+), 14 deletions(-)

commit c9d5ba0d4d431d4a2c2afce926f69caee12d8f85
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Aug 29 07:57:57 2018 +0530

    HDDS-365. Implement flushStateMachineData for containerStateMachine. Contributed by Shashikant Banerjee.

 .../org/apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  2 +-
 .../common/transport/server/XceiverServerGrpc.java     |  2 +-
 .../transport/server/ratis/ContainerStateMachine.java  | 18 ++++++++++++++++++
 3 files changed, 20 insertions(+), 2 deletions(-)

commit 871585dbb1ecc7271b478ceafabacc8e5bdd4f0e
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Aug 28 14:06:19 2018 -0700

    HDDS-382. Remove RatisTestHelper#RatisTestSuite constructor argument and fix checkstyle in ContainerTestHelper, GenericTestUtils
    Contributed by Nandakumar.

 .../org/apache/hadoop/hdds/scm/XceiverClient.java  |  6 +--
 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  6 +--
 .../hadoop/hdds/scm/XceiverClientManager.java      |  2 +-
 .../hadoop/hdds/scm/storage/ChunkInputStream.java  |  7 +--
 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |  4 +-
 .../org/apache/hadoop/hdds/client/BlockID.java     |  5 ++-
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |  2 -
 .../container/common/helpers/AllocatedBlock.java   |  4 +-
 .../container/common/helpers/ContainerInfo.java    | 12 +++---
 .../common/helpers/ContainerWithPipeline.java      |  7 +--
 .../scm/container/common/helpers/Pipeline.java     | 11 +++--
 .../protocol/StorageContainerLocationProtocol.java |  6 ++-
 ...inerLocationProtocolClientSideTranslatorPB.java | 21 +++++----
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  6 +--
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  5 ---
 .../ozone/container/common/helpers/KeyData.java    |  8 ++--
 .../org/apache/hadoop/utils/HddsVersionInfo.java   |  6 ++-
 .../org/apache/hadoop/utils/TestMetadataStore.java |  1 -
 .../apache/hadoop/ozone/HddsDatanodeService.java   |  3 +-
 .../container/common/helpers/ContainerUtils.java   | 22 ++++------
 .../ozone/container/common/impl/ContainerSet.java  |  2 +-
 .../common/impl/OpenContainerBlockMap.java         | 19 ++++----
 .../transport/server/ratis/XceiverServerRatis.java |  6 +--
 .../container/keyvalue/interfaces/KeyManager.java  |  4 +-
 .../ozone/protocol/commands/CommandStatus.java     | 16 +++----
 .../hadoop/ozone/container/common/ScmTestMock.java |  6 ++-
 .../container/common/interfaces/TestHandler.java   |  7 ---
 .../states/endpoint/TestHeartbeatEndpointTask.java |  2 -
 .../volume/TestRoundRobinVolumeChoosingPolicy.java |  5 +--
 .../container/ozoneimpl/TestOzoneContainer.java    |  3 +-
 .../hadoop/hdds/server/events/EventWatcher.java    |  6 ++-
 .../hadoop/hdds/server/events/TestEventQueue.java  |  3 --
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 18 ++++----
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |  3 +-
 .../hdds/scm/block/SCMBlockDeletingService.java    |  4 +-
 .../scm/container/CloseContainerEventHandler.java  |  4 +-
 .../hdds/scm/container/ContainerMapping.java       |  4 +-
 .../hdds/scm/container/ContainerStateManager.java  |  7 +--
 .../container/replication/ReplicationManager.java  |  2 +-
 .../scm/container/states/ContainerStateMap.java    |  2 +-
 .../hdds/scm/node/states/Node2ContainerMap.java    |  4 +-
 .../scm/node/states/NodeNotFoundException.java     |  2 -
 .../hadoop/hdds/scm/node/states/ReportResult.java  |  3 +-
 .../hdds/scm/pipelines/Node2PipelineMap.java       | 50 ++++++++++------------
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  6 +--
 .../hdds/scm/pipelines/PipelineSelector.java       |  7 +--
 .../hdds/scm/server/SCMClientProtocolServer.java   |  3 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  8 ++--
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  1 -
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  7 +--
 .../command/TestCommandStatusReportHandler.java    | 22 +++++-----
 .../container/TestCloseContainerEventHandler.java  |  1 -
 .../hdds/scm/container/TestContainerMapping.java   |  7 +--
 .../scm/container/TestContainerReportHandler.java  |  2 +-
 .../TestSCMContainerPlacementCapacity.java         |  8 ++--
 .../TestSCMContainerPlacementRandom.java           |  4 +-
 .../replication/TestReplicationManager.java        | 11 ++---
 .../replication/TestReplicationQueue.java          |  4 +-
 .../hdds/scm/node/TestContainerPlacement.java      |  5 +--
 .../hadoop/hdds/scm/node/TestNodeManager.java      |  3 +-
 .../hdds/scm/node/TestNodeReportHandler.java       |  3 +-
 .../ozone/container/common/TestEndPoint.java       |  9 ++--
 .../placement/TestContainerPlacement.java          |  6 ++-
 .../apache/hadoop/ozone/client/ObjectStore.java    |  7 ++-
 .../hdds/scm/pipeline/TestPipelineClose.java       |  4 --
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |  8 ++--
 .../ozone/TestStorageContainerManagerHelper.java   |  2 -
 .../rpc/TestCloseContainerHandlingByClient.java    |  3 +-
 .../ozone/container/ContainerTestHelper.java       |  2 -
 .../common/impl/TestContainerPersistence.java      |  1 -
 .../ozoneimpl/TestOzoneContainerRatis.java         |  3 +-
 .../container/ozoneimpl/TestRatisManager.java      |  4 +-
 .../hadoop/ozone/scm/TestAllocateContainer.java    |  2 -
 .../hadoop/ozone/web/TestOzoneWebAccess.java       |  1 -
 .../hadoop/ozone/web/client/TestBuckets.java       |  5 +--
 .../hadoop/ozone/web/client/TestBucketsRatis.java  |  2 +-
 .../hadoop/ozone/web/client/TestKeysRatis.java     |  2 +-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 13 ------
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |  2 -
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  4 --
 80 files changed, 226 insertions(+), 282 deletions(-)

commit 9f1bcc011d6910e4eba0f53a58f001e1fc15920d
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Aug 28 12:59:08 2018 -0700

    HDDS-376. Create custom message structure for use in AuditLogging
    Contributed by Dinesh Chitlangia.

 .../org/apache/hadoop/ozone/audit/AuditLogger.java |  66 ++++-------
 .../apache/hadoop/ozone/audit/AuditMessage.java    |  64 +++++++++++
 .../apache/hadoop/ozone/audit/package-info.java    |  19 +++-
 .../hadoop/ozone/audit/TestOzoneAuditLogger.java   | 124 +++++++++++++--------
 4 files changed, 177 insertions(+), 96 deletions(-)

commit 9c9d5dbcf335ad33f3eb4e631ec16fafed86957d
Author: Márton Elek <elek@apache.org>
Date:   Tue Aug 28 19:22:30 2018 +0200

    HDDS-359. RocksDB Profiles support. Contributed by Anu Engineer.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   6 +
 .../apache/hadoop/utils/db/DBConfigFromFile.java   | 134 ++++++++++++++
 .../java/org/apache/hadoop/utils/db/DBProfile.java | 120 ++++++++++++
 .../org/apache/hadoop/utils/db/DBStoreBuilder.java | 201 +++++++++++++++++++++
 .../java/org/apache/hadoop/utils/db/RDBStore.java  |  32 ++--
 .../org/apache/hadoop/utils/db/TableConfig.java    |  93 ++++++++++
 .../common/src/main/resources/ozone-default.xml    |  10 +
 .../hadoop/utils/db/TestDBConfigFromFile.java      | 116 ++++++++++++
 .../apache/hadoop/utils/db/TestDBStoreBuilder.java | 174 ++++++++++++++++++
 .../org/apache/hadoop/utils/db/TestRDBStore.java   |  17 +-
 .../apache/hadoop/utils/db/TestRDBTableStore.java  |  11 +-
 hadoop-hdds/common/src/test/resources/test.db.ini  | 145 +++++++++++++++
 hadoop-hdds/pom.xml                                |   1 +
 13 files changed, 1040 insertions(+), 20 deletions(-)

commit f5d571ab3719cb38ffa6dd4239d7dad3384c3464
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Aug 28 09:56:02 2018 -0700

    HDDS-332. Remove the ability to configure ozone.handler.type
    Contributed by Nandakumar and Anu Engineer.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |    7 -
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |    1 -
 .../common/src/main/resources/ozone-default.xml    |   21 -
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |    8 +-
 .../ozone/client/rest/TestOzoneRestClient.java     |    7 +-
 .../rpc/TestCloseContainerHandlingByClient.java    |    2 -
 .../ozone/client/rpc/TestOzoneRpcClient.java       |    9 +-
 .../ozone/container/ContainerTestHelper.java       |   10 -
 .../impl/TestContainerDeletionChoosingPolicy.java  |    8 +-
 .../common/impl/TestContainerPersistence.java      |  116 +-
 .../commandhandler/TestBlockDeletion.java          |    8 +-
 .../TestCloseContainerByPipeline.java              |   35 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |    2 -
 .../ozoneimpl/TestOzoneContainerRatis.java         |    2 -
 .../container/ozoneimpl/TestRatisManager.java      |    2 -
 .../hadoop/ozone/freon/TestDataValidate.java       |    7 +-
 .../org/apache/hadoop/ozone/freon/TestFreon.java   |    3 +-
 .../ozone/om/TestContainerReportWithKeys.java      |   12 +-
 .../ozone/om/TestMultipleContainerReadWrite.java   |    5 +-
 .../hadoop/ozone/om/TestOmBlockVersioning.java     |    7 +-
 .../org/apache/hadoop/ozone/om/TestOmMetrics.java  |    7 +-
 .../org/apache/hadoop/ozone/om/TestOmSQLCli.java   |    6 +-
 .../apache/hadoop/ozone/om/TestOzoneManager.java   |    5 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |   20 +-
 .../hadoop/ozone/web/TestLocalOzoneVolumes.java    |  187 ----
 ...utedOzoneVolumes.java => TestOzoneVolumes.java} |   11 +-
 .../hadoop/ozone/web/TestOzoneWebAccess.java       |   10 +-
 .../hadoop/ozone/web/client/TestBuckets.java       |    9 +-
 .../hadoop/ozone/web/client/TestKeysRatis.java     |    4 +-
 .../hadoop/ozone/web/client/TestOzoneClient.java   |    3 -
 .../apache/hadoop/ozone/web/client/TestVolume.java |   11 +-
 .../hadoop/ozone/web/client/TestVolumeRatis.java   |    3 -
 .../hdfs/server/datanode/ObjectStoreHandler.java   |  182 ++--
 .../ozone/web/handlers/StorageHandlerBuilder.java  |   18 +-
 .../web/localstorage/LocalStorageHandler.java      |  385 -------
 .../web/localstorage/OzoneMetadataManager.java     | 1138 --------------------
 .../hadoop/fs/ozone/TestOzoneFSInputStream.java    |    6 +-
 37 files changed, 183 insertions(+), 2094 deletions(-)

commit 477da7b1d4b479fc02603b9e3d473ef3a7819733
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Aug 28 22:19:52 2018 +0530

    HDDS-381. Fix TestKeys#testPutAndGetKeyWithDnRestart. Contributed by Mukul Kumar Singh.

 .../common/transport/server/GrpcXceiverService.java         |  8 +++-----
 .../test/java/org/apache/hadoop/ozone/MiniOzoneCluster.java |  3 ++-
 .../java/org/apache/hadoop/ozone/MiniOzoneClusterImpl.java  | 13 +++++++++++--
 .../statemachine/commandhandler/TestBlockDeletion.java      |  9 +++++++--
 .../java/org/apache/hadoop/ozone/web/client/TestKeys.java   | 11 ++++-------
 5 files changed, 27 insertions(+), 17 deletions(-)

commit 4b4120c66663a0495d9108e771c9aabb0588fb79
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Aug 28 07:11:36 2018 +0530

    HDDS-247. Handle CLOSED_CONTAINER_IO exception in ozoneClient. Contributed by Shashikant Banerjee.

 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |  28 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    | 195 ++++++++--
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  |  23 +-
 .../rpc/TestCloseContainerHandlingByClient.java    | 408 +++++++++++++++++++++
 .../ozone/container/ContainerTestHelper.java       |  21 ++
 .../hadoop/ozone/om/TestOmBlockVersioning.java     |  16 +-
 6 files changed, 630 insertions(+), 61 deletions(-)

commit 3106436466026c4334c43a9b171680b99be7ac48
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Aug 27 10:39:30 2018 -0700

    HDSS-375. ContainerReportHandler should not send replication events for open containers. Contributed by Ajay Kumar.

 .../hdds/scm/container/ContainerReportHandler.java |  4 +++
 .../scm/container/TestContainerReportHandler.java  | 40 ++++++++++++++++------
 2 files changed, 34 insertions(+), 10 deletions(-)

commit ea80345f46b06fd73950fe57974f17ec86f1f734
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Aug 27 08:19:05 2018 -0700

    HDDS-377. Make the ScmClient closable and stop the started threads. Contributed by Elek Marton.

 .../apache/hadoop/hdds/scm/client/ContainerOperationClient.java  | 9 +++++++++
 .../main/java/org/apache/hadoop/hdds/scm/client/ScmClient.java   | 9 ++++++---
 2 files changed, 15 insertions(+), 3 deletions(-)

commit 72ba48ce8756fa8dab019d41be87f310426470c4
Author: Márton Elek <elek@apache.org>
Date:   Mon Aug 27 16:07:55 2018 +0200

    HDDS-227. Use Grpc as the default transport protocol for Standalone pipeline. Contributed by chencan.

 .../hadoop/hdds/scm/XceiverClientManager.java      |  6 +--
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  4 --
 .../common/src/main/resources/ozone-default.xml    |  9 ----
 .../ozone/container/ozoneimpl/OzoneContainer.java  | 11 +----
 .../container/ozoneimpl/TestOzoneContainer.java    | 51 +++++-----------------
 .../hadoop/ozone/scm/TestXceiverClientManager.java | 25 -----------
 .../apache/hadoop/ozone/web/client/TestKeys.java   | 16 -------
 7 files changed, 13 insertions(+), 109 deletions(-)

commit 4796bf9721330161ee54049ee5d22d8b1907c3a0
Author: Márton Elek <elek@apache.org>
Date:   Mon Aug 27 15:42:22 2018 +0200

    HDDS-313. Add metrics to containerState Machine. Contributed by chencan.

 .../common/transport/server/ratis/CSMMetrics.java  | 115 ++++++++++++
 .../server/ratis/ContainerStateMachine.java        |  15 ++
 .../transport/server/ratis/TestCSMMetrics.java     | 202 +++++++++++++++++++++
 3 files changed, 332 insertions(+)

commit a7e7188e17396b6c52634865ebe9abe95c8299ce
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Aug 27 18:29:32 2018 +0530

    HDDS-374. Support to configure container size in units lesser than GB. Contributed by Nanda kumar.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  2 +-
 .../ozone/container/common/impl/ContainerData.java | 24 +++++++++++-----------
 .../container/common/impl/ContainerDataYaml.java   |  5 ++---
 .../container/common/impl/HddsDispatcher.java      |  6 +-----
 .../container/keyvalue/KeyValueContainer.java      |  2 +-
 .../container/keyvalue/KeyValueContainerData.java  | 10 ++++-----
 .../ozone/container/keyvalue/KeyValueHandler.java  | 15 +++++++-------
 .../common/TestKeyValueContainerData.java          |  5 +++--
 .../common/impl/TestContainerDataYaml.java         |  7 ++++---
 .../container/common/impl/TestContainerSet.java    |  7 +++++--
 .../container/common/impl/TestHddsDispatcher.java  |  3 ++-
 .../container/keyvalue/TestChunkManagerImpl.java   |  4 +++-
 .../container/keyvalue/TestKeyManagerImpl.java     |  4 +++-
 .../keyvalue/TestKeyValueBlockIterator.java        |  4 +++-
 .../container/keyvalue/TestKeyValueContainer.java  | 13 +++++++-----
 .../container/keyvalue/TestKeyValueHandler.java    |  4 +++-
 .../container/ozoneimpl/TestOzoneContainer.java    |  5 +++--
 .../src/test/resources/additionalfields.container  |  4 ++--
 .../test/resources/incorrect.checksum.container    |  2 +-
 .../src/test/resources/incorrect.container         |  2 +-
 .../ozone/container/ContainerTestHelper.java       |  4 +++-
 .../container/common/TestBlockDeletingService.java |  2 +-
 .../impl/TestContainerDeletionChoosingPolicy.java  |  8 ++++----
 .../common/impl/TestContainerPersistence.java      |  3 +--
 24 files changed, 79 insertions(+), 66 deletions(-)

commit fc3e890772547cff4e0d55cc0445d744ea434c4d
Author: Márton Elek <elek@apache.org>
Date:   Mon Aug 27 11:41:08 2018 +0200

    HDDS-334. Update GettingStarted page to mention details about Ozone GenConf tool. Contributed by Dinesh Chitlangia.

 hadoop-ozone/docs/content/GettingStarted.md | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit d69509d27ec265d36ef064cc0e909f7dbffbd6cd
Author: Márton Elek <elek@apache.org>
Date:   Fri Aug 24 22:27:43 2018 +0200

    HDDS-364. Update open container replica information in SCM during DN register. Contributed by Ajay Kumar.

 .../hdds/scm/container/ContainerMapping.java       | 25 ++++++++++++++++------
 .../hdds/scm/container/ContainerReportHandler.java |  3 ++-
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  2 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  2 +-
 .../hdds/scm/container/TestContainerMapping.java   | 19 +++++++++++++---
 .../scm/container/closer/TestContainerCloser.java  |  2 +-
 .../commandhandler/TestBlockDeletion.java          |  3 ++-
 7 files changed, 41 insertions(+), 15 deletions(-)

commit ce0b2828ca46cae11aac1b096019cdcd7d7789c5
Author: Márton Elek <elek@apache.org>
Date:   Fri Aug 24 15:36:10 2018 +0200

    HDDS-363. Faster datanode registration during the first startup. Contributed by Elek, Marton.

 .../common/statemachine/DatanodeStateMachine.java  |  5 +---
 .../common/statemachine/StateContext.java          | 20 ++++++++++++++++
 .../states/datanode/RunningDatanodeState.java      |  1 +
 .../states/endpoint/RegisterEndpointTask.java      | 28 ++++++++++++++++++----
 .../ozone/container/common/TestEndPoint.java       |  3 ++-
 5 files changed, 47 insertions(+), 10 deletions(-)

commit 34adee4a3d1cc2622cdf6b7bda730cc8371f2368
Author: Márton Elek <elek@apache.org>
Date:   Fri Aug 24 13:54:38 2018 +0200

    HDDS-317. Use new StorageSize API for reading ozone.scm.container.size.gb. Contributed by Junjie Chen.

 .../main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java    |  6 +++---
 hadoop-hdds/common/src/main/resources/ozone-default.xml        |  7 +++----
 .../hadoop/ozone/container/common/impl/ContainerData.java      |  2 +-
 .../hadoop/ozone/container/keyvalue/KeyValueContainerData.java | 10 +++++++---
 .../hadoop/ozone/container/keyvalue/KeyValueHandler.java       |  7 ++++---
 .../org/apache/hadoop/hdds/scm/block/BlockManagerImpl.java     |  9 +++++----
 .../org/apache/hadoop/hdds/scm/container/ContainerMapping.java |  8 ++++----
 .../hadoop/hdds/scm/container/ContainerStateManager.java       |  9 +++++----
 .../org/apache/hadoop/hdds/scm/pipelines/PipelineSelector.java |  9 +++++----
 .../hdds/scm/container/TestCloseContainerEventHandler.java     |  8 ++++----
 .../hadoop/hdds/scm/container/closer/TestContainerCloser.java  |  7 ++++---
 .../src/main/java/org/apache/hadoop/hdds/scm/cli/SCMCLI.java   |  8 +++++---
 .../statemachine/commandhandler/TestCloseContainerHandler.java |  4 ++--
 .../commandhandler/TestReplicateContainerHandler.java          |  5 ++---
 14 files changed, 54 insertions(+), 45 deletions(-)

commit 102f5e2425e5899ac84a70c883b69d76a7d15aca
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Aug 23 11:30:28 2018 -0700

    HDDS-328. Support export and import of the KeyValueContainer. Contributed by Elek Marton.

 .../container/common/impl/ContainerDataYaml.java   |  94 ++++----
 .../container/common/interfaces/Container.java     |  33 ++-
 .../common/interfaces/ContainerPacker.java         |  58 +++++
 .../container/keyvalue/KeyValueContainer.java      | 128 +++++++++--
 .../ozone/container/keyvalue/KeyValueHandler.java  |  19 +-
 .../container/keyvalue/TarContainerPacker.java     | 249 +++++++++++++++++++++
 .../keyvalue/helpers/KeyValueContainerUtil.java    |  22 +-
 .../container/keyvalue/TestKeyValueContainer.java  |  95 +++++++-
 .../container/keyvalue/TestTarContainerPacker.java | 231 +++++++++++++++++++
 9 files changed, 849 insertions(+), 80 deletions(-)

commit 056f109b5957d657dd5f929451400457e8a350af
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Aug 22 18:55:14 2018 -0700

    HDDS-356. Support ColumnFamily based RockDBStore and TableStore.
    Contributed by Anu Engineer.

 .../java/org/apache/hadoop/utils/db/DBStore.java   |  93 ++++++++
 .../java/org/apache/hadoop/utils/db/RDBStore.java  | 252 +++++++++++++++++++++
 .../apache/hadoop/utils/db/RDBStoreIterator.java   |  88 +++++++
 .../java/org/apache/hadoop/utils/db/RDBTable.java  | 173 ++++++++++++++
 .../java/org/apache/hadoop/utils/db/Table.java     | 150 ++++++++++++
 .../org/apache/hadoop/utils/db/TableIterator.java  |  50 ++++
 .../org/apache/hadoop/utils/db/package-info.java   |  22 ++
 .../org/apache/hadoop/utils/db/TestRDBStore.java   | 246 ++++++++++++++++++++
 .../apache/hadoop/utils/db/TestRDBTableStore.java  | 189 ++++++++++++++++
 .../org/apache/hadoop/utils/db/package-info.java   |  22 ++
 10 files changed, 1285 insertions(+)

commit 8418e35ed8218d9af1c3f721a30d56ceb22aaae0
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Aug 22 10:53:54 2018 -0700

    HDDS-350. ContainerMapping#flushContainerInfo doesn't set containerId. Contributed by Ajay Kumar.

 .../hdds/scm/container/common/helpers/ContainerInfo.java |  1 +
 .../hadoop/hdds/scm/container/ContainerMapping.java      | 16 +---------------
 .../hadoop/hdds/scm/container/TestContainerMapping.java  |  8 ++++++++
 3 files changed, 10 insertions(+), 15 deletions(-)

commit 926177158e525c802ff90f1795733d10821f0e71
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Wed Aug 22 10:04:15 2018 -0700

    HDDS-265. Move numPendingDeletionBlocks and deleteTransactionId from ContainerData to KeyValueContainerData. Contributed by LiXin Ge.

 .../container/common/helpers/ContainerReport.java  |  14 ---
 .../common/helpers/KeyValueContainerReport.java    | 117 +++++++++++++++++++++
 .../ozone/container/common/impl/ContainerData.java |  53 ----------
 .../ozone/container/common/impl/ContainerSet.java  |  50 +--------
 .../RandomContainerDeletionChoosingPolicy.java     |   3 +-
 ...TopNOrderedContainerDeletionChoosingPolicy.java |  24 ++---
 .../container/common/interfaces/Container.java     |   6 ++
 .../ContainerDeletionChoosingPolicy.java           |  13 +++
 .../container/keyvalue/KeyValueContainer.java      |  46 ++++++++
 .../container/keyvalue/KeyValueContainerData.java  |  54 ++++++++++
 .../common/TestKeyValueContainerData.java          |   4 +-
 .../container/common/TestBlockDeletingService.java |   8 +-
 .../commandhandler/TestBlockDeletion.java          |   9 +-
 13 files changed, 268 insertions(+), 133 deletions(-)

commit e97f4743ef550f233393c973aec1f4379435a42b
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Aug 20 13:37:58 2018 +0530

    HDDS-353. Multiple delete Blocks tests are failing consistently. Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java    |  6 +++---
 .../common/report/CommandStatusReportPublisher.java   |  2 +-
 .../common/report/ContainerReportPublisher.java       |  2 +-
 .../container/common/report/NodeReportPublisher.java  |  2 +-
 .../common/statemachine/DatanodeStateMachine.java     |  3 +--
 .../common/statemachine/EndpointStateMachine.java     |  9 +++++----
 .../hadoop/hdds/scm/container/ContainerMapping.java   |  7 ++++---
 .../hdds/scm/container/closer/ContainerCloser.java    |  9 ++++-----
 .../hadoop/ozone/TestStorageContainerManager.java     | 19 ++++++++++++++-----
 .../commandhandler/TestBlockDeletion.java             | 10 +++++++---
 .../org/apache/hadoop/ozone/web/client/TestKeys.java  | 10 +++++++++-
 11 files changed, 50 insertions(+), 29 deletions(-)

commit d2859ec569ebee140bef0d68d79fad4596acb239
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Aug 17 11:50:46 2018 -0700

    HDDS-355. Disable OpenKeyDeleteService and DeleteKeysService.
    Contributed by Anu Engineer.

 .../commandhandler/TestBlockDeletion.java          |  2 ++
 .../apache/hadoop/ozone/om/TestOzoneManager.java   | 11 ++++---
 .../org/apache/hadoop/ozone/om/package-info.java   | 22 +++++++++++++
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java | 37 ++++------------------
 4 files changed, 36 insertions(+), 36 deletions(-)

commit 0b5038a4b5aa0334233d8d906a380d09f7b0b1af
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Aug 17 07:58:24 2018 -0700

    HDDS-218. add existing docker-compose files to the ozone release artifact. Contributed by Elek Marton.

 hadoop-ozone/docs/content/GettingStarted.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 68c88e986119a7433a5e9f6826324feb96d5136a
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Aug 16 22:13:50 2018 -0700

    HDDS-119. Skip Apache license header check for some ozone doc scripts. Contributed by Ajay Kumar.

 hadoop-ozone/docs/pom.xml                  | 17 +++++++++++++++++
 hadoop-ozone/docs/static/OzoneOverview.svg | 13 +++++++++++++
 2 files changed, 30 insertions(+)

commit b67c1dceb9741592c43e01cd40529524ab90f6b6
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu Aug 16 23:35:19 2018 +0530

    HDDS-179. CloseContainer/PutKey command should be syncronized with write operations. Contributed by Shashikant Banerjee.

 .../server/ratis/ContainerStateMachine.java        | 323 +++++++++++++++++----
 .../server/TestContainerStateMachine.java          | 201 +++++++++++++
 2 files changed, 467 insertions(+), 57 deletions(-)

commit 555f5874b0ebd79ecfffbfc99b2ed5d7a06b6ace
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Aug 15 10:58:29 2018 -0700

    HADOOP-15552. Addendum patch to fix the build break in Ozone File system.
    Contributed by Anu Engineer.

 .../hadoop/fs/ozone/contract/ITestOzoneContractGetFileStatus.java       | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ccefecd4d240cdf0ab8cd0c335606d73a9ce713b
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Aug 15 10:06:17 2018 -0700

    Revert "HDDS-119:Skip Apache license header check for some ozone doc scripts. Contributed by  Ajay Kumar"
    
    This reverts commit c4bbcd5634d9e32183ae20adbeafca258568bedd.

 hadoop-ozone/pom.xml | 10 ----------
 1 file changed, 10 deletions(-)

commit 64b602f42953f747bfc5d14765989b0478341093
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Aug 15 08:10:08 2018 -0700

    HDDS-347. TestCloseContainerByPipeline#testCloseContainerViaStandaAlone sometimes fails. Contributed by Lixin Ge.

 .../commandhandler/TestCloseContainerByPipeline.java           | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit ac7332e88b52148d49c6e347b4de1b84d9546bd5
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Aug 14 14:57:46 2018 -0700

    HDDS-298. Implement SCMClientProtocolServer.getContainerWithPipeline for closed containers. Contributed by Ajay Kumar.

 .../hdds/scm/container/ContainerMapping.java       | 28 ++++++++----
 .../scm/container/states/ContainerStateMap.java    |  2 +-
 .../hadoop/hdds/scm/exceptions/SCMException.java   |  3 +-
 .../hdds/scm/container/TestContainerMapping.java   | 50 ++++++++++++++++++++++
 4 files changed, 73 insertions(+), 10 deletions(-)

commit 1598f69407ea5094a3a098189a1e1bfe61a06dde
Author: Márton Elek <elek@apache.org>
Date:   Tue Aug 14 08:32:27 2018 +0200

    HDDS-345. Upgrade RocksDB version from 5.8.0 to 5.14.2. Contributed by Nanda kumar.

 hadoop-hdds/common/pom.xml                                              | 2 +-
 .../common/src/main/java/org/apache/hadoop/utils/RocksDBStore.java      | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 2cc59c8e3945c527135f0f113e0592f12b66022d
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Aug 13 12:39:05 2018 -0700

    HDDS-324. Use pipeline name as Ratis groupID to allow datanode to report pipeline info. Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/XceiverClient.java  |  5 +-
 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |  5 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 14 ++--
 .../hdds/scm/client/ContainerOperationClient.java  |  5 +-
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |  6 +-
 .../container/common/helpers/ContainerInfo.java    | 25 +++---
 .../scm/container/common/helpers/Pipeline.java     | 38 +++++-----
 .../scm/container/common/helpers/PipelineID.java   | 88 ++++++++++++++++++++++
 .../main/java/org/apache/ratis/RatisHelper.java    | 19 +++--
 hadoop-hdds/common/src/main/proto/hdds.proto       |  8 +-
 .../CloseContainerCommandHandler.java              |  3 +-
 .../common/transport/server/XceiverServer.java     |  7 +-
 .../common/transport/server/XceiverServerGrpc.java |  7 +-
 .../common/transport/server/XceiverServerSpi.java  |  6 +-
 .../transport/server/ratis/XceiverServerRatis.java | 36 ++++++---
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  8 +-
 .../protocol/commands/CloseContainerCommand.java   | 19 +++--
 .../proto/StorageContainerDatanodeProtocol.proto   |  1 +
 .../scm/container/CloseContainerEventHandler.java  |  2 +-
 .../hdds/scm/container/ContainerMapping.java       | 14 ++--
 .../hdds/scm/container/ContainerStateManager.java  | 14 ++--
 .../hdds/scm/container/closer/ContainerCloser.java |  4 +-
 .../scm/container/states/ContainerStateMap.java    | 16 ++--
 .../apache/hadoop/hdds/scm/node/DatanodeInfo.java  |  8 ++
 .../hadoop/hdds/scm/pipelines/PipelineManager.java | 36 ++++-----
 .../hdds/scm/pipelines/PipelineSelector.java       | 31 ++++----
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java | 18 ++---
 .../standalone/StandaloneManagerImpl.java          | 14 ++--
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  6 +-
 .../scm/container/TestContainerReportHandler.java  |  4 +-
 .../replication/TestReplicationManager.java        |  5 +-
 .../hadoop/hdds/scm/node/TestNodeManager.java      |  4 +-
 .../ozone/container/common/TestEndPoint.java       |  2 +
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |  8 +-
 .../hdds/scm/pipeline/TestPipelineClose.java       | 10 +--
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |  3 +-
 .../ozone/container/ContainerTestHelper.java       |  5 +-
 .../TestCloseContainerByPipeline.java              | 31 ++++----
 .../commandhandler/TestCloseContainerHandler.java  |  7 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java  | 13 ++--
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |  3 +-
 41 files changed, 360 insertions(+), 198 deletions(-)

commit 70478c174ed270171271f36b8f5b85172b9393b3
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Aug 13 10:08:58 2018 -0700

    HDDS-346. ozoneShell show the new volume info after updateVolume command like updateBucket command.
    Contributed by chencan.

 .../apache/hadoop/ozone/web/ozShell/volume/UpdateVolumeHandler.java  | 5 +++++
 1 file changed, 5 insertions(+)

commit fa46dee733aea4b27da10505f5db1e2046123389
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Aug 13 12:47:52 2018 +0530

    HDDS-308. SCM should identify a container with pending deletes using container reports. Contributed by Lokesh Jain.

 .../ozone/container/common/impl/ContainerSet.java  |  3 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  4 +-
 .../hadoop/hdds/scm/block/DeletedBlockLog.java     |  6 +-
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java | 38 ++++++-----
 .../hdds/scm/block/PendingDeleteHandler.java       | 38 +++++++++++
 .../hdds/scm/block/PendingDeleteStatusList.java    | 79 ++++++++++++++++++++++
 .../hdds/scm/block/SCMBlockDeletingService.java    | 20 +++++-
 .../hdds/scm/container/ContainerMapping.java       | 35 ++++++++--
 .../hdds/scm/container/ContainerStateManager.java  | 14 ++--
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  9 +++
 .../hdds/scm/server/StorageContainerManager.java   |  5 ++
 .../hadoop/hdds/scm/block/TestBlockManager.java    | 25 -------
 .../commandhandler/TestBlockDeletion.java          | 55 ++++++++++++++-
 13 files changed, 268 insertions(+), 63 deletions(-)

commit 1d41b4b21471a2b28f281f6f35dc58690b538bac
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Aug 10 11:43:22 2018 -0700

    HDDS-327. CloseContainer command handler should not throw exception if the container is already closed. Contributed by Shashikant Banerjee.

 .../org/apache/hadoop/ozone/container/keyvalue/KeyValueHandler.java   | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 5c7fb8868e4be31773d796cee89377ee7a7656f5
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri Aug 10 23:45:56 2018 +0530

    HDDS-339. Add block length and blockId in PutKeyResponse. Contributed by Shashikant Banerjee.

 .../src/main/proto/DatanodeContainerProtocol.proto |  1 +
 .../ozone/container/keyvalue/KeyValueHandler.java  | 18 +++++---
 .../ozone/container/keyvalue/helpers/KeyUtils.java | 50 ++++++++++++++++++----
 .../container/keyvalue/impl/KeyManagerImpl.java    |  4 +-
 .../container/keyvalue/interfaces/KeyManager.java  |  3 +-
 ...a => TestGetCommittedBlockLengthAndPutKey.java} | 40 ++++++++++++++++-
 6 files changed, 98 insertions(+), 18 deletions(-)

commit 58fabf4a0bd34a6fa3071ff1fbe5573fbf4dfd56
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Aug 9 16:55:13 2018 -0700

    HDDS-245. Handle ContainerReports in the SCM. Contributed by Elek Marton.

 .../hadoop/hdds/server/events/EventQueue.java      |   7 +-
 .../hdds/scm/container/ContainerReportHandler.java | 107 +++++++++-
 .../replication/ReplicationActivityStatus.java     |  86 ++++++++
 .../ReplicationActivityStatusMXBean.java           |  28 +++
 .../container/replication/ReplicationRequest.java  |  28 ++-
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |   9 +
 .../hdds/scm/node/states/Node2ContainerMap.java    |  10 +-
 .../hadoop/hdds/scm/node/states/ReportResult.java  |  18 +-
 .../hdds/scm/server/StorageContainerManager.java   |  27 ++-
 .../scm/container/TestContainerReportHandler.java  | 228 +++++++++++++++++++++
 ...inerMapTest.java => TestNode2ContainerMap.java} |  28 ++-
 11 files changed, 555 insertions(+), 21 deletions(-)

commit 4b59b45bf309e1a118de398b577f587fb1576c2d
Author: Márton Elek <elek@apache.org>
Date:   Thu Aug 9 14:23:41 2018 +0200

    HDDS-344. Remove multibyte characters from OzoneAcl. Contributed by Takanobu Asanuma.

 .../common/src/main/java/org/apache/hadoop/ozone/OzoneAcl.java    | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit b2c2faa784f9fe23579c0b167a5f99889a1a5513
Author: Márton Elek <elek@apache.org>
Date:   Thu Aug 9 11:06:03 2018 +0200

    HDDS-219. Genearate version-info.properties for hadoop and ozone. Contributed by Sandeep Nemuri.

 hadoop-hdds/common/pom.xml                         |  34 ++++
 .../org/apache/hadoop/utils/HddsVersionInfo.java   | 182 ++++++++++++++++++
 .../main/resources/hdds-version-info.properties    |  26 +++
 hadoop-ozone/common/pom.xml                        |  35 ++++
 hadoop-ozone/common/src/main/bin/ozone             |   2 +-
 .../apache/hadoop/ozone/util/OzoneVersionInfo.java | 213 +++++++++++++++++++++
 .../main/resources/ozone-version-info.properties   |  27 +++
 7 files changed, 518 insertions(+), 1 deletion(-)

commit 4bd26bd8eff016a9148da1c475430af4925f11f3
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Wed Aug 8 16:47:25 2018 -0700

    HDDS-267. Handle consistency issues during container update/close.

 .../ozone/container/common/impl/ContainerData.java |  1 -
 .../container/keyvalue/KeyValueContainer.java      | 54 +++++++--------------
 .../ozone/container/keyvalue/KeyValueHandler.java  | 21 +++++++--
 .../container/keyvalue/TestKeyValueContainer.java  | 16 -------
 .../container/keyvalue/TestKeyValueHandler.java    | 55 ++++++++++++++++++----
 .../common/impl/TestContainerPersistence.java      |  8 ----
 6 files changed, 80 insertions(+), 75 deletions(-)

commit 5afe3931b482787405f2dc5971da51b192cd3f4a
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Aug 7 16:40:33 2018 -0700

    HDDS-124. Validate all required configs needed for ozone-site.xml and reflect the changes in ozone-default.xml
    Contributed by Dinesh Chitlangia.

 hadoop-hdds/common/src/main/resources/ozone-default.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bdef3c3038b17811ea6d287af4ea350f92c2079b
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Aug 7 16:09:53 2018 +0530

    HDDS-301. ozone command shell does not contain subcommand to run ozoneFS commands. Contributed by Nilotpal Nandi.

 .../acceptance-test/src/test/acceptance/ozonefs/ozonefs.robot         | 4 ++--
 .../acceptance-test/src/test/acceptance/ozonefs/ozonesinglenode.robot | 4 ++--
 hadoop-ozone/common/src/main/bin/ozone                                | 4 ++++
 hadoop-ozone/common/src/main/shellprofile.d/hadoop-ozone.sh           | 1 +
 4 files changed, 9 insertions(+), 4 deletions(-)

commit b505c3767ef9f55a4c2d90e3d389ff2ecc8992b7
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Aug 7 15:03:14 2018 +0530

    HDDS-230. ContainerStateMachine should implement readStateMachineData api to read data from Containers if required during replication. Contributed by Mukul Kumar Singh.

 .../server/ratis/ContainerStateMachine.java        | 142 ++++++++++++++++++---
 .../transport/server/ratis/XceiverServerRatis.java |  10 +-
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |   2 +-
 3 files changed, 128 insertions(+), 26 deletions(-)

commit 7b7be33572bee6df8ef02349be51668b627a28e1
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Aug 3 14:53:04 2018 +0530

    HDDS-300. Create a config for volume choosing policy. Contributed by Bharat Viswanadham.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  4 ++
 .../common/src/main/resources/ozone-default.xml    | 11 ++++++
 .../ozone/container/keyvalue/KeyValueHandler.java  | 14 +++++--
 .../container/keyvalue/TestKeyValueHandler.java    | 46 +++++++++++++++++++++-
 4 files changed, 70 insertions(+), 5 deletions(-)

commit 36efd877f76104752fc2e59fe5abb5ee8392cb86
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Aug 2 16:48:21 2018 -0700

    HDDS-312. Add blockIterator to Container. Contributed by Bharat Viswanadham.

 .../container/common/interfaces/Container.java     |  8 +++
 .../container/keyvalue/KeyValueContainer.java      |  8 ++-
 .../container/keyvalue/TestKeyValueContainer.java  | 58 ++++++++++++++++++++--
 3 files changed, 69 insertions(+), 5 deletions(-)

commit f54f4a453413b20a5e6e8cb704bccd0c763f3e43
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Aug 2 19:02:25 2018 +0530

    HDDS-290. putKey is failing with KEY_ALLOCATION_ERROR. Contributed by Xiaoyu Yao.

 .../test/acceptance/ozonefs/ozonesinglenode.robot  | 49 ++++++++++++++++++++++
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java |  4 ++
 .../ozone/web/ozShell/keys/PutKeyHandler.java      | 16 +++++--
 3 files changed, 65 insertions(+), 4 deletions(-)

commit e0a2a88f713d26050d6b72da4a5c87eb2ed4ac72
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu Aug 2 17:34:17 2018 +0530

    HDDS-304. Process ContainerAction from datanode heartbeat in SCM. Contributed by Nanda Kumar.

 .../scm/container/ContainerActionsHandler.java     | 60 +++++++++++++++++++
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   | 16 ++++-
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java | 22 +++++++
 .../hdds/scm/server/StorageContainerManager.java   |  3 +
 .../scm/container/TestContainerActionsHandler.java | 68 ++++++++++++++++++++++
 5 files changed, 168 insertions(+), 1 deletion(-)

commit e4d1f4d0e0e55ac66cd0f7d847fb4dce3dde977e
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Aug 2 11:35:22 2018 +0530

    HDDS-310. VolumeSet shutdown hook fails on datanode restart. Contributed by Bharat Viswanadham.

 .../hadoop/ozone/container/common/volume/VolumeSet.java   | 15 +++++++++++++--
 1 file changed, 13 insertions(+), 2 deletions(-)

commit e5b3c312c4d15251bd771d0a74930936e27329fe
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Aug 1 09:02:43 2018 +0530

    HDDS-226. Client should update block length in OM while committing the key. Contributed by Shashikant Banerjee.

 .../ozone/client/io/ChunkGroupOutputStream.java    | 22 +++++++++++++-
 .../apache/hadoop/ozone/om/helpers/OmKeyArgs.java  | 26 +++++++++++++---
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  | 29 ++++++++++++++++--
 .../hadoop/ozone/om/helpers/OmKeyLocationInfo.java |  6 +++-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  8 ++++-
 .../src/main/proto/OzoneManagerProtocol.proto      |  1 +
 .../ozone/client/rpc/TestOzoneRpcClient.java       | 35 ++++++++++++++++++++++
 .../hadoop/ozone/om/TestOmBlockVersioning.java     | 13 +++++++-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  4 +++
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  5 +++-
 10 files changed, 138 insertions(+), 11 deletions(-)

commit 63b762bbfd446169fd41efaf5d59d086b08a7ae7
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Jul 31 16:26:09 2018 -0700

    HDDS-271. Create a block iterator to iterate blocks in a container. Contributed by Bharat Viswanadham.

 .../org/apache/hadoop/utils/MetaStoreIterator.java |   2 +-
 .../container/common/interfaces/BlockIterator.java |  57 +++++
 .../container/keyvalue/KeyValueBlockIterator.java  | 148 +++++++++++
 .../keyvalue/TestKeyValueBlockIterator.java        | 275 +++++++++++++++++++++
 4 files changed, 481 insertions(+), 1 deletion(-)

commit 36e54d0105824b6ecce769b2a07dd60af180c991
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Jul 31 19:50:40 2018 +0530

    HDDS-279. DeleteBlocks command should not be sent for open containers. Contributed by Lokesh Jain.

 .../block/DatanodeDeletedBlockTransactions.java    | 18 +++--
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |  8 +-
 .../org/apache/hadoop/ozone/OzoneTestUtils.java    | 92 ++++++++++++++++++++++
 .../hadoop/ozone/TestStorageContainerManager.java  |  8 ++
 .../container/common/TestBlockDeletingService.java | 17 +++-
 .../commandhandler/TestBlockDeletion.java          | 47 +++++------
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  3 +
 7 files changed, 152 insertions(+), 41 deletions(-)

commit 81e32bdab00f1b70504518d4743bb6cbb964c912
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Jul 31 17:27:51 2018 +0530

    HDDS-305. Datanode StateContext#addContainerActionIfAbsent will add container action even if there already is a ContainerAction. Contributed by Nanda kumar.

 .../hadoop/ozone/container/common/impl/HddsDispatcher.java  | 13 +------------
 .../src/main/proto/StorageContainerDatanodeProtocol.proto   |  2 +-
 .../common/states/endpoint/TestHeartbeatEndpointTask.java   |  5 +----
 3 files changed, 3 insertions(+), 17 deletions(-)

commit b89fb9aab6b0b6ed922da45f375470196ec56858
Author: Tsz Wo Nicholas Sze <szetszwo@apache.org>
Date:   Mon Jul 30 15:00:29 2018 -0700

    HDDS-293. Reduce memory usage and object creation in KeyData.

 .../ozone/container/common/helpers/KeyData.java    |  84 ++++++++++-----
 .../common/impl/OpenContainerBlockMap.java         |   2 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  |   3 -
 .../container/common/helpers/TestKeyData.java      | 119 +++++++++++++++++++++
 4 files changed, 179 insertions(+), 29 deletions(-)

commit 037231be85a2bdde494d6e18dc943fb8b589fbe8
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Jul 30 21:18:42 2018 +0530

    HDDS-287. Add Close ContainerAction to Datanode#StateContext when the container gets full. Contributed by Nanda kumar.

 .../container/common/impl/HddsDispatcher.java      |  63 ++++++++-
 .../common/statemachine/DatanodeStateMachine.java  |   2 +-
 .../common/statemachine/StateContext.java          |  14 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |   6 +-
 .../container/common/impl/TestHddsDispatcher.java  | 152 +++++++++++++++++++++
 .../ozone/container/common/impl/package-info.java  |  22 +++
 .../container/common/interfaces/TestHandler.java   |   4 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   2 +-
 .../ozone/container/common/TestEndPoint.java       |  12 +-
 .../common/impl/TestCloseContainerHandler.java     |   2 +-
 .../container/metrics/TestContainerMetrics.java    |   2 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   2 +-
 .../container/server/TestContainerServer.java      |   2 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |   6 +-
 14 files changed, 270 insertions(+), 21 deletions(-)

commit dbc8ccb13deba5e207a068415bb19ac4317193a0
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Jul 30 18:45:58 2018 +0530

    HDDS-302. Fix javadoc and add implementation details in ContainerStateMachine. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 30 ++------------------
 .../java/org/apache/hadoop/hdds/HddsUtils.java     | 33 ++++++++++++++++++++++
 .../server/ratis/ContainerStateMachine.java        | 14 ++++++++-
 3 files changed, 49 insertions(+), 28 deletions(-)

commit 726a86698eac8da55d7cbe212554b7747b657901
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Jul 28 14:50:43 2018 -0700

    HDDS-248. Refactor DatanodeContainerProtocol.proto Contributed by Hanisha Koneru.

 .../hdds/scm/storage/ContainerProtocolCalls.java   | 37 ++++++---
 .../src/main/proto/DatanodeContainerProtocol.proto | 96 ++++++++++------------
 .../container/common/impl/HddsDispatcher.java      | 51 +-----------
 .../CloseContainerCommandHandler.java              |  8 +-
 .../server/ratis/ContainerStateMachine.java        |  6 +-
 .../container/keyvalue/KeyValueContainerData.java  |  9 --
 .../ozone/container/keyvalue/KeyValueHandler.java  | 16 ++--
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  2 +-
 .../container/keyvalue/TestKeyValueHandler.java    | 12 ++-
 .../scm/cli/container/InfoContainerHandler.java    |  1 -
 .../ozone/container/ContainerTestHelper.java       | 59 +++++++------
 .../common/impl/TestCloseContainerHandler.java     | 18 ++--
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java | 19 +++--
 13 files changed, 148 insertions(+), 186 deletions(-)

commit 2cd503431a94325be4f7f608c93650cede08a467
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Sun Jul 29 01:02:24 2018 +0530

    HDDS-273. DeleteLog entries should be purged only after corresponding DNs commit the transaction. Contributed by Lokesh Jain.

 .../commandhandler/DeleteBlocksCommandHandler.java |  12 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   4 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |   2 +-
 .../block/DatanodeDeletedBlockTransactions.java    |  47 +++--
 .../hadoop/hdds/scm/block/DeletedBlockLog.java     |  23 +-
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java | 123 +++++++----
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  19 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java | 232 +++++++++++----------
 8 files changed, 256 insertions(+), 206 deletions(-)

commit 0d7237791c9c58003bc68165014cba0fa482cc5d
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Sat Jul 28 22:04:11 2018 +0530

    HDDS-246. Datanode should throw BlockNotCommittedException for uncommitted blocks to Ozone Client. Contributed by Shashikant Banerjee.

 .../src/main/proto/DatanodeContainerProtocol.proto |  1 +
 .../common/impl/OpenContainerBlockMap.java         | 12 ++++++
 .../ozone/container/keyvalue/KeyValueHandler.java  | 12 ++++--
 .../ozone/scm/TestCommittedBlockLengthAPI.java     | 45 +++++++++++++++++-----
 4 files changed, 57 insertions(+), 13 deletions(-)

commit 53a4cf4e55ff5434b0a9d1cb139e5eb9f074a4b5
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jul 27 07:12:21 2018 -0700

    HDDS-270. Move generic container util functions to ContianerUtils.
    Contributed by Hanisha Koneru.

 .../container/common/helpers/ContainerUtils.java   | 34 +++++++++++++---------
 .../container/common/interfaces/Container.java     |  6 ++++
 .../container/keyvalue/KeyValueContainer.java      | 22 +++++++++-----
 .../helpers/KeyValueContainerLocationUtil.java     | 17 -----------
 .../ozone/container/ozoneimpl/ContainerReader.java | 27 ++++++-----------
 .../container/keyvalue/TestKeyValueContainer.java  | 24 +++++----------
 .../common/impl/TestContainerPersistence.java      | 13 ++++-----
 7 files changed, 62 insertions(+), 81 deletions(-)

commit 4665c76275c455b12e6184a16e6363e767772e94
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jul 26 13:17:37 2018 -0700

    HDDS-291. Initialize hadoop metrics system in standalone hdds datanodes. Contributed by Elek Marton.

 .../src/main/java/org/apache/hadoop/ozone/HddsDatanodeService.java      | 2 ++
 .../ozone/container/common/statemachine/SCMConnectionManager.java       | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

commit e914b9b5f0884b71af2fd23420f19035237c2457
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jul 26 13:15:27 2018 -0700

    HDDS-277. PipelineStateMachine should handle closure of pipelines in SCM. Contributed by Mukul Kumar Singh.

 .../container/common/helpers/ContainerInfo.java    |   7 +-
 .../scm/container/CloseContainerEventHandler.java  |  28 ++--
 .../hdds/scm/container/ContainerMapping.java       |  16 ++-
 .../hdds/scm/container/ContainerStateManager.java  |  11 ++
 .../scm/container/states/ContainerStateMap.java    |   2 +-
 .../hdds/scm/pipelines/Node2PipelineMap.java       |  33 +++--
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  31 +++--
 .../hdds/scm/pipelines/PipelineSelector.java       |  70 ++++++++--
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  14 +-
 .../standalone/StandaloneManagerImpl.java          |  13 +-
 .../hdds/scm/server/StorageContainerManager.java   |   2 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    |   4 +-
 .../container/TestCloseContainerEventHandler.java  |  13 +-
 .../hdds/scm/container/TestContainerMapping.java   |   4 +-
 .../scm/container/closer/TestContainerCloser.java  |   4 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   3 +-
 .../hdds/scm/pipeline/TestPipelineClose.java       | 152 +++++++++++++++++++++
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |   4 +-
 18 files changed, 331 insertions(+), 80 deletions(-)

commit b48bde712a8a5da217b02e071650a694609c45fc
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Jul 26 19:00:23 2018 +0530

    HDDS-201. Add name for LeaseManager. Contributed by Sandeep Nemuri.

 .../org/apache/hadoop/ozone/lease/LeaseManager.java | 14 +++++++++-----
 .../apache/hadoop/ozone/lease/TestLeaseManager.java | 21 ++++++++++-----------
 .../hadoop/hdds/server/events/TestEventWatcher.java |  2 +-
 .../hadoop/hdds/scm/container/ContainerMapping.java |  4 ++--
 .../hadoop/hdds/scm/pipelines/PipelineSelector.java |  4 ++--
 .../hdds/scm/server/StorageContainerManager.java    |  3 ++-
 .../replication/TestReplicationManager.java         |  4 ++--
 7 files changed, 28 insertions(+), 24 deletions(-)

commit f696b3ab345c35e10e0edcb795d0d4c6730cacb0
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Jul 25 20:27:03 2018 +0530

    HDDS-288. Fix bugs in OpenContainerBlockMap. Contributed by Tsz Wo Nicholas Sze.

 .../common/impl/OpenContainerBlockMap.java         | 139 ++++++++-------------
 .../ozone/container/keyvalue/KeyValueHandler.java  |  10 +-
 .../common/impl/TestCloseContainerHandler.java     |  30 ++---
 3 files changed, 73 insertions(+), 106 deletions(-)

commit a7c852151a5eb0832bf7d59408fa51248c02b3f4
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Jul 25 18:55:26 2018 +0530

    HDDS-266. Integrate checksum into .container file. Contributed by Hanisha Koneru.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   2 +-
 .../container/common/helpers/ContainerUtils.java   |  59 +++++++++-
 .../ozone/container/common/impl/ContainerData.java |  66 ++++++++++-
 .../container/common/impl/ContainerDataYaml.java   |  98 +++++++++++-----
 .../container/keyvalue/KeyValueContainer.java      | 121 ++++++-------------
 .../container/keyvalue/KeyValueContainerData.java  |  30 ++---
 .../helpers/KeyValueContainerLocationUtil.java     |  32 ++---
 .../keyvalue/helpers/KeyValueContainerUtil.java    | 130 ++++-----------------
 .../ozone/container/ozoneimpl/ContainerReader.java |  92 ++++++++-------
 .../common/impl/TestContainerDataYaml.java         | 107 ++++++++++++-----
 .../container/keyvalue/TestKeyValueContainer.java  |  21 ++--
 .../src/test/resources/additionalfields.container  |   3 +-
 .../test/resources/incorrect.checksum.container    |  11 ++
 .../src/test/resources/incorrect.container         |   3 +-
 hadoop-hdds/pom.xml                                |   1 +
 .../common/impl/TestContainerPersistence.java      |   8 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   7 ++
 17 files changed, 430 insertions(+), 361 deletions(-)

commit 9ded24d4abfae7a66d0be2b5e507f3e6c6a17c6e
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Jul 25 18:11:35 2018 +0530

    HDDS-285. Create a generic Metadata Iterator. Contributed by Bharat Viswanadham.

 .../java/org/apache/hadoop/utils/LevelDBStore.java |   5 +
 .../apache/hadoop/utils/LevelDBStoreIterator.java  |  64 +++++++
 .../org/apache/hadoop/utils/MetaStoreIterator.java |  39 ++++
 .../org/apache/hadoop/utils/MetadataStore.java     |  55 ++++++
 .../java/org/apache/hadoop/utils/RocksDBStore.java |   5 +
 .../apache/hadoop/utils/RocksDBStoreIterator.java  |  66 +++++++
 .../org/apache/hadoop/utils/TestMetadataStore.java | 206 +++++++++++++--------
 7 files changed, 366 insertions(+), 74 deletions(-)

commit e61e1171e7cc2cf2a7e5942fcc319ecc5529cb1b
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Jul 25 14:15:54 2018 +0530

    HDDS-203. Add getCommittedBlockLength API in datanode. Contributed by Shashikant Banerjee.

 .../org/apache/hadoop/hdds/client/BlockID.java     |  20 ++-
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  28 +++
 .../ozone/container/common/helpers/KeyData.java    |  27 ++-
 .../src/main/proto/DatanodeContainerProtocol.proto |  17 +-
 .../container/common/impl/HddsDispatcher.java      |   2 +
 .../ozone/container/keyvalue/KeyValueHandler.java  |  34 ++++
 .../ozone/container/keyvalue/helpers/KeyUtils.java |  20 +++
 .../container/keyvalue/impl/KeyManagerImpl.java    |  27 +++
 .../container/keyvalue/interfaces/KeyManager.java  |   7 +
 .../ozone/scm/TestCommittedBlockLengthAPI.java     | 191 +++++++++++++++++++++
 10 files changed, 368 insertions(+), 5 deletions(-)

commit 316dd81422f97deea69e98bf5a97423d23db4788
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Jul 24 10:16:53 2018 -0700

    HDDS-282. Consolidate logging in scm/container-service. Contributed by Elek Marton.

 .../ozone/container/common/statemachine/EndpointStateMachine.java | 4 ++--
 .../container/common/states/endpoint/RegisterEndpointTask.java    | 3 +--
 .../keyvalue/statemachine/background/BlockDeletingService.java    | 8 +++++---
 .../java/org/apache/hadoop/hdds/server/events/EventQueue.java     | 3 +--
 .../java/org/apache/hadoop/hdds/server/events/TypedEvent.java     | 6 ++++--
 5 files changed, 13 insertions(+), 11 deletions(-)

commit e7eef61d068af1ddeb3286b5aacb906056333284
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Jul 24 21:23:20 2018 +0530

    HDDS-272. TestBlockDeletingService is failing with DiskOutOfSpaceException. Contributed by Lokesh Jain.

 .../ozone/container/keyvalue/KeyValueHandler.java  |  2 +-
 .../background/BlockDeletingService.java           |  9 +--
 .../testutils/BlockDeletingServiceTestImpl.java    |  3 +-
 .../container/common/TestBlockDeletingService.java | 90 +++++++++++++---------
 4 files changed, 60 insertions(+), 44 deletions(-)

commit 2559e8117f6a389d62326e3b1f754163c8866fa5
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Jul 24 12:09:15 2018 +0530

    HDDS-262. Send SCM healthy and failed volumes in the heartbeat. Contributed by Bharat Viswanadham.

 .../ozone/container/common/volume/HddsVolume.java  | 81 ++++++++++++++++------
 .../ozone/container/common/volume/VolumeSet.java   | 28 ++++++--
 .../container/common/volume/TestVolumeSet.java     | 35 ++++++++--
 3 files changed, 111 insertions(+), 33 deletions(-)

commit a4eee506325fffab0ee8ec4c9ecd9bb846329be9
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Jul 23 21:29:44 2018 -0700

    HDDS-258. Helper methods to generate NodeReport and ContainerReport for testing. Contributed by Nanda Kumar.

 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  27 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java | 372 ++++++++++++++++-----
 .../command/TestCommandStatusReportHandler.java    |   2 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |   4 +-
 .../hdds/scm/container/TestContainerMapping.java   |   4 +-
 .../scm/container/closer/TestContainerCloser.java  |   2 +-
 .../TestSCMContainerPlacementCapacity.java         |   2 +-
 .../TestSCMContainerPlacementRandom.java           |   2 +-
 .../replication/TestReplicationManager.java        |   7 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   4 -
 .../hadoop/hdds/scm/node/TestNodeManager.java      |  80 ++---
 .../hdds/scm/node/TestNodeReportHandler.java       |  19 +-
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   |  13 +-
 .../server/TestSCMDatanodeHeartbeatDispatcher.java |   4 +-
 .../ozone/container/common/TestEndPoint.java       |  74 ++--
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |  20 +-
 .../container/metrics/TestContainerMetrics.java    |   2 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   2 +-
 .../container/server/TestContainerServer.java      |   4 +-
 19 files changed, 406 insertions(+), 238 deletions(-)

commit 424a1d383241d0c9f89c93c89afbe19987e7e403
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Jul 23 10:13:53 2018 -0700

    HDDS-199. Implement ReplicationManager to handle underreplication of closed containers. Contributed by Elek Marton.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   7 +
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   1 +
 .../common/src/main/resources/ozone-default.xml    |  10 +
 .../hadoop/hdds/server/events/EventWatcher.java    |   4 +-
 .../hadoop/hdds/server/events/TypedEvent.java      |   5 +
 .../hdds/server/events/TestEventWatcher.java       |   6 +-
 .../algorithms/ContainerPlacementPolicy.java       |   5 +-
 .../placement/algorithms/SCMCommonPolicy.java      |   8 +-
 .../algorithms/SCMContainerPlacementCapacity.java  |  16 +-
 .../algorithms/SCMContainerPlacementRandom.java    |   7 +-
 .../replication/ReplicationCommandWatcher.java     |  56 +++++
 .../container/replication/ReplicationManager.java  | 242 +++++++++++++++++++++
 .../container/replication/ReplicationQueue.java    |  29 ++-
 .../container/replication/ReplicationRequest.java  |   3 +-
 .../scm}/container/replication/package-info.java   |   4 +-
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  31 +++
 .../hdds/scm/server/StorageContainerManager.java   |  42 +++-
 .../TestSCMContainerPlacementCapacity.java         | 106 +++++++++
 .../TestSCMContainerPlacementRandom.java           |  86 ++++++++
 .../replication/TestReplicationManager.java        | 215 ++++++++++++++++++
 .../replication/TestReplicationQueue.java          |  14 +-
 .../scm}/container/replication/package-info.java   |   2 +-
 .../placement/TestContainerPlacement.java          |   5 +-
 23 files changed, 857 insertions(+), 47 deletions(-)

commit 3d3faeeea65dd1c21db862f5d74e49b8cbf6e617
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Jul 23 09:12:47 2018 +0530

    HDDS-181. CloseContainer should commit all pending open Keys on a datanode. Contributed by Shashikant Banerjee.

 .../ozone/container/common/helpers/KeyData.java    |  20 +-
 .../common/impl/OpenContainerBlockMap.java         | 167 +++++++++++++
 .../ozone/container/keyvalue/KeyValueHandler.java  |  69 +++++-
 .../common/impl/TestCloseContainerHandler.java     | 260 +++++++++++++++++++++
 4 files changed, 504 insertions(+), 12 deletions(-)

commit c5f38b6428a30a5833e85b14625e70713b6e5ced
Author: Nanda kumar <nanda@apache.org>
Date:   Sat Jul 21 18:46:31 2018 +0530

    HDDS-249. Fail if multiple SCM IDs on the DataNode and add SCM ID check after version request. Contributed by Bharat Viswanadham.

 .../states/endpoint/VersionEndpointTask.java       | 27 +++++++++--
 .../container/common/utils/HddsVolumeUtil.java     | 56 ++++++++++++++++++++++
 .../ozone/container/ozoneimpl/ContainerReader.java | 22 ++++++---
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  2 +-
 .../hadoop/ozone/container/common/ScmTestMock.java | 27 ++++++++++-
 .../container/common/TestDatanodeStateMachine.java | 14 +++---
 .../ozone/container/common/TestEndPoint.java       | 49 +++++++++++++++++++
 7 files changed, 177 insertions(+), 20 deletions(-)

commit 982847c1c0c68f78a4e12bfe3386bfc197c98a83
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 14:37:13 2018 -0700

    HDDS-260. Support in Datanode for sending ContainerActions to SCM. Contributed by Nanda kumar.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   6 +
 .../common/src/main/resources/ozone-default.xml    |  10 +
 .../common/statemachine/StateContext.java          |  55 +++-
 .../states/endpoint/HeartbeatEndpointTask.java     |  33 ++-
 .../proto/StorageContainerDatanodeProtocol.proto   |   4 +-
 .../common/report/TestReportPublisher.java         |  41 ---
 .../states/endpoint/TestHeartbeatEndpointTask.java | 300 +++++++++++++++++++++
 .../common/states/endpoint/package-info.java       |  18 ++
 8 files changed, 414 insertions(+), 53 deletions(-)

commit 2fe301d849e185fb28a53177e24107eb83607ce6
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 14:22:02 2018 -0700

    HDDS-239. Add PipelineStateManager to track pipeline state transition. Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   5 +
 .../scm/container/common/helpers/Pipeline.java     |   7 +
 .../common/src/main/resources/ozone-default.xml    |  12 ++
 .../hdds/scm/container/ContainerMapping.java       |   4 +
 .../hadoop/hdds/scm/exceptions/SCMException.java   |   1 +
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  64 +++----
 .../hdds/scm/pipelines/PipelineSelector.java       | 212 ++++++++++++++++++---
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  33 +---
 .../standalone/StandaloneManagerImpl.java          |  21 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |  14 ++
 10 files changed, 273 insertions(+), 100 deletions(-)

commit 6b698e682cbaa19c3d23b882ce5377846a546fa6
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 14:20:18 2018 -0700

    Revert "HDDS-239. Add PipelineStateManager to track pipeline state transition. Contributed by Mukul Kumar Singh."
    
    This reverts commit 6837121a43231f854b0b22ad20330012439313ce.(Mixed with HDDS-260)

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   5 -
 .../scm/container/common/helpers/Pipeline.java     |   7 -
 .../common/src/main/resources/ozone-default.xml    |  12 -
 .../common/statemachine/StateContext.java          |  52 +---
 .../states/endpoint/HeartbeatEndpointTask.java     |  24 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   4 +-
 .../common/report/TestReportPublisher.java         |  41 +++
 .../states/endpoint/TestHeartbeatEndpointTask.java | 302 ---------------------
 .../common/states/endpoint/package-info.java       |  18 --
 .../hdds/scm/container/ContainerMapping.java       |   4 -
 .../hadoop/hdds/scm/exceptions/SCMException.java   |   1 -
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  64 +++--
 .../hdds/scm/pipelines/PipelineSelector.java       | 212 ++-------------
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  33 ++-
 .../standalone/StandaloneManagerImpl.java          |  21 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |  14 -
 16 files changed, 146 insertions(+), 668 deletions(-)

commit 85e4a238827fa0c6eb914b9d6203442e6ac91621
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 13:12:07 2018 -0700

    HDDS-275. Add message output for succeeded -deleteVolume CLI. Contributed by Nilotpal Nandi.

 .../src/test/java/org/apache/hadoop/ozone/ozShell/TestOzoneShell.java   | 2 ++
 .../org/apache/hadoop/ozone/web/ozShell/volume/DeleteVolumeHandler.java | 1 +
 2 files changed, 3 insertions(+)

commit 96767199ee2bd0db440a5701fb785bd0bd85c3e4
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 13:03:25 2018 -0700

    HDDS-239. Add PipelineStateManager to track pipeline state transition. Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   5 +
 .../scm/container/common/helpers/Pipeline.java     |   7 +
 .../common/src/main/resources/ozone-default.xml    |  12 +
 .../common/statemachine/StateContext.java          |  52 +++-
 .../states/endpoint/HeartbeatEndpointTask.java     |  24 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   4 +-
 .../common/report/TestReportPublisher.java         |  41 ---
 .../states/endpoint/TestHeartbeatEndpointTask.java | 302 +++++++++++++++++++++
 .../common/states/endpoint/package-info.java       |  18 ++
 .../hdds/scm/container/ContainerMapping.java       |   4 +
 .../hadoop/hdds/scm/exceptions/SCMException.java   |   1 +
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  64 ++---
 .../hdds/scm/pipelines/PipelineSelector.java       | 212 +++++++++++++--
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  33 +--
 .../standalone/StandaloneManagerImpl.java          |  21 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |  14 +
 16 files changed, 668 insertions(+), 146 deletions(-)

commit 2fe0e98cd052743fbbeb82aa911cfa9f5d3ea66d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jul 20 12:41:52 2018 -0700

    HDDS-257. Hook up VolumeSet#shutdown from HddsDispatcher#shutdown. Contributed by Hanisha Koneru

 .../container/common/impl/HddsDispatcher.java      |  2 ++
 .../ozone/container/common/volume/HddsVolume.java  |  2 --
 .../ozone/container/common/volume/VolumeInfo.java  |  8 +++++++
 .../ozone/container/common/volume/VolumeSet.java   | 18 ++++++++++++++-
 .../ozone/container/common/volume/VolumeUsage.java | 17 --------------
 .../container/common/volume/TestVolumeSet.java     | 26 +++++++++++++++++++---
 6 files changed, 50 insertions(+), 23 deletions(-)

commit 362e34a935cc9afbf1c4eb4c21e6d27d77737498
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Jul 20 11:36:42 2018 -0700

    HDDS-250. Cleanup ContainerData.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  5 +-
 .../org/apache/hadoop/ozone/common/Storage.java    |  2 +-
 .../container/common/helpers/ContainerUtils.java   | 21 -------
 .../ozone/container/common/impl/ContainerData.java | 64 ++--------------------
 .../container/keyvalue/KeyValueContainer.java      |  6 +-
 .../container/keyvalue/KeyValueContainerData.java  | 56 +++++--------------
 .../helpers/KeyValueContainerLocationUtil.java     | 18 +++---
 .../background/BlockDeletingService.java           |  8 +--
 .../ozone/container/ozoneimpl/ContainerReader.java | 30 +++++-----
 .../common/impl/TestContainerDataYaml.java         |  4 +-
 .../src/test/resources/additionalfields.container  |  4 +-
 .../src/test/resources/incorrect.container         |  4 +-
 .../common/impl/TestContainerPersistence.java      | 15 +++--
 13 files changed, 71 insertions(+), 166 deletions(-)

commit 87da8fff753296f82bfab8c9aef55acaffbdae52
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 11:03:33 2018 -0700

    HDDS-256. Adding CommandStatusReport Handler. Contributed by Ajay Kumar.

 .../scm/command/CommandStatusReportHandler.java    | 129 +++++++++++++++++++
 .../hadoop/hdds/scm/command/package-info.java      |  26 ++++
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  24 ++++
 .../hdds/scm/server/StorageContainerManager.java   |   4 +
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  18 +++
 .../command/TestCommandStatusReportHandler.java    | 137 +++++++++++++++++++++
 .../hadoop/hdds/scm/command/package-info.java      |  22 ++++
 7 files changed, 360 insertions(+)

commit 317e9496fe7691aa679e45f4946b229db77f9334
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri Jul 20 22:12:40 2018 +0530

    HDDS-264. 'oz' subcommand reference is not present in 'ozone' command help. Contributed by Sandeep Nemuri.

 hadoop-ozone/common/src/main/bin/ozone | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5a02063df04d3914bf492b0dc3ae091c6907fbd3
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 09:07:58 2018 -0700

    HDDS-259. Implement ContainerReportPublisher and NodeReportPublisher. Contributed by Nanda kumar.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     | 26 ++++++++++++++++--
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  5 ----
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  5 ----
 .../common/src/main/resources/ozone-default.xml    | 26 ++++++++++++++----
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java | 13 +++++----
 .../report/CommandStatusReportPublisher.java       | 24 +++++++++++++---
 .../common/report/ContainerReportPublisher.java    | 25 +++++++++++++----
 .../common/report/NodeReportPublisher.java         | 32 ++++++++++++++++++++--
 .../container/common/report/ReportPublisher.java   | 14 ++++++++--
 .../common/report/TestReportPublisher.java         | 11 ++------
 .../hdds/scm/container/closer/ContainerCloser.java | 12 ++++----
 .../scm/container/closer/TestContainerCloser.java  |  8 +++---
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 17 ++++++------
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  5 ++--
 .../hadoop/ozone/TestStorageContainerManager.java  |  8 +++---
 .../hadoop/ozone/scm/node/TestQueryNode.java       |  5 ++--
 16 files changed, 162 insertions(+), 74 deletions(-)

commit 649a9c570ad4788dc282b416811500feb17873d6
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Jul 20 21:39:45 2018 +0530

    HDDS-269. Refactor IdentifiableEventPayload to use a long ID. Contributed by Ajay Kumar.

 .../common/statemachine/StateContext.java          |  4 +-
 .../commandhandler/CommandHandler.java             |  6 +--
 .../protocol/commands/CloseContainerCommand.java   |  6 +--
 .../protocol/commands/DeleteBlocksCommand.java     |  6 +--
 .../commands/ReplicateContainerCommand.java        |  6 +--
 .../ozone/protocol/commands/ReregisterCommand.java |  2 +-
 .../hadoop/ozone/protocol/commands/SCMCommand.java | 16 +++---
 .../hadoop/hdds/server/events/EventWatcher.java    | 47 ++++++++---------
 .../server/events/IdentifiableEventPayload.java    |  4 +-
 .../hdds/server/events/TestEventWatcher.java       | 61 ++++++++++------------
 10 files changed, 75 insertions(+), 83 deletions(-)

commit c749f4e7403323ae75be024b6259b46480501f24
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jul 18 11:46:26 2018 -0700

    HDDS-255. Fix TestOzoneConfigurationFields for missing hdds.command.status.report.interval in config classes. Contributed by Sandeep Nemuri.

 .../java/org/apache/hadoop/ozone/TestOzoneConfigurationFields.java     | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit b7219cff46e952ec029e2541eb84758082edfe05
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jul 18 11:05:42 2018 -0700

    HDDS-207. ozone listVolume command accepts random values as argument. Contributed by Lokesh Jain.

 .../src/test/acceptance/basic/ozone-shell.robot             |  8 +++++---
 .../org/apache/hadoop/ozone/ozShell/TestOzoneShell.java     | 12 ++++++++++--
 .../java/org/apache/hadoop/ozone/web/ozShell/Shell.java     |  1 +
 .../hadoop/ozone/web/ozShell/volume/ListVolumeHandler.java  | 13 ++++++++++++-
 4 files changed, 28 insertions(+), 6 deletions(-)

commit af314b07d64d0252b0f15dedbb0274c1d9e8e224
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jul 18 09:38:43 2018 -0700

    HDDS-241. Handle Volume in inconsistent state. Contributed by Hanisha Koneru.

 .../ozone/container/common/volume/HddsVolume.java  | 45 +++++++++++--
 .../ozone/container/common/volume/VolumeSet.java   | 14 ++--
 .../container/common/volume/TestVolumeSet.java     | 78 ++++++++++++++++++----
 .../container/ozoneimpl/TestOzoneContainer.java    | 18 +++--
 4 files changed, 129 insertions(+), 26 deletions(-)

commit 2a53c70e536efbd0ad09d6a4b08c2bfd005101b0
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sun Jul 15 10:47:20 2018 -0700

    HDDS-254. Fix TestStorageContainerManager#testBlockDeletingThrottling. Contributed by Lokesh Jain

 .../src/test/java/org/apache/hadoop/ozone/MiniOzoneClusterImpl.java     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f5e55dd6023167bc4b1738067122abc434b78e6d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sun Jul 15 10:34:00 2018 -0700

    HDDS-251. Integrate BlockDeletingService in KeyValueHandler. Contributed by Lokesh Jain

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  5 +-
 .../common/src/main/resources/ozone-default.xml    |  4 +-
 .../ozone/container/common/impl/ContainerSet.java  | 16 ++++--
 .../container/common/interfaces/Container.java     |  2 +-
 .../ContainerDeletionChoosingPolicy.java           |  1 -
 .../ozone/container/keyvalue/KeyValueHandler.java  | 24 +++++++++
 .../background/BlockDeletingService.java           | 11 +++-
 .../container/common/TestBlockDeletingService.java | 26 ++++++---
 .../impl/TestContainerDeletionChoosingPolicy.java  | 62 +++++++++-------------
 .../commandhandler/TestBlockDeletion.java          | 14 +++--
 .../TestCloseContainerByPipeline.java              | 18 +++----
 .../commandhandler/TestCloseContainerHandler.java  | 12 ++---
 .../ozone/om/TestContainerReportWithKeys.java      | 11 ++--
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  2 -
 14 files changed, 117 insertions(+), 91 deletions(-)

commit bd972399396af30963f0f33dde39161ef0c0e76f
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 13 11:44:24 2018 -0700

    HDDS-210. Make "-file" argument optional for ozone getKey command. Contributed by Lokesh Jain.

 .../java/org/apache/hadoop/ozone/ozShell/TestOzoneShell.java | 12 ++++++++++++
 .../apache/hadoop/ozone/web/ozShell/keys/GetKeyHandler.java  |  9 ++++++---
 2 files changed, 18 insertions(+), 3 deletions(-)

commit 27e87566c7ee45ae030f0896d9b3eb36b64a1303
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Jul 13 19:50:52 2018 +0530

    HDDS-232. Parallel unit test execution for HDDS/Ozone. Contributed by Arpit Agarwal.

 .../common/report/TestReportPublisher.java         |  2 +-
 hadoop-hdds/pom.xml                                | 49 ++++++++++++++++++++++
 hadoop-ozone/pom.xml                               | 49 ++++++++++++++++++++++
 3 files changed, 99 insertions(+), 1 deletion(-)

commit 38114a8b6fd2b22b58be1a71a41db6bb7ccb61fe
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Jul 13 17:18:42 2018 +0530

    HDDS-253. SCMBlockDeletingService should publish events for delete blocks to EventQueue. Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/scm/block/BlockManagerImpl.java  | 10 ++++++----
 .../hadoop/hdds/scm/block/SCMBlockDeletingService.java      | 13 +++++++++----
 .../hadoop/hdds/scm/server/StorageContainerManager.java     |  2 +-
 .../org/apache/hadoop/hdds/scm/block/TestBlockManager.java  |  2 +-
 .../org/apache/hadoop/ozone/scm/TestContainerSQLCli.java    |  3 +--
 5 files changed, 18 insertions(+), 12 deletions(-)

commit 17b73beb2c488cc4b6e9a3847f2b761615356c01
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jul 12 22:02:57 2018 -0700

    HDDS-238. Add Node2Pipeline Map in SCM to track ratis/standalone pipelines. Contributed by Mukul Kumar Singh.

 .../container/common/helpers/ContainerInfo.java    |  11 ++
 .../hdds/scm/container/ContainerMapping.java       |  11 +-
 .../hdds/scm/container/ContainerStateManager.java  |   6 +
 .../scm/container/states/ContainerStateMap.java    |  36 +++++-
 .../hdds/scm/pipelines/Node2PipelineMap.java       | 121 +++++++++++++++++++++
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  22 ++--
 .../hdds/scm/pipelines/PipelineSelector.java       |  24 +++-
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  11 +-
 .../standalone/StandaloneManagerImpl.java          |   7 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    | 117 ++++++++++++++++++++
 10 files changed, 343 insertions(+), 23 deletions(-)

commit acb4e1b9a678e238f4e5ce59a5ba9b62e2c5b2ab
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jul 12 21:34:32 2018 -0700

    HDDS-187. Command status publisher for datanode.
    Contributed by Ajay Kumar.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   8 +
 .../java/org/apache/hadoop/hdds/HddsIdFactory.java |  53 +++++++
 .../common/src/main/resources/ozone-default.xml    |   9 ++
 .../org/apache/hadoop/utils/TestHddsIdFactory.java |  77 ++++++++++
 .../report/CommandStatusReportPublisher.java       |  71 +++++++++
 .../container/common/report/ReportPublisher.java   |   9 ++
 .../common/report/ReportPublisherFactory.java      |   4 +
 .../common/statemachine/DatanodeStateMachine.java  |   2 +
 .../common/statemachine/StateContext.java          |  70 +++++++++
 .../CloseContainerCommandHandler.java              |   5 +-
 .../commandhandler/CommandHandler.java             |  11 ++
 .../commandhandler/DeleteBlocksCommandHandler.java | 166 +++++++++++----------
 .../ReplicateContainerCommandHandler.java          |   7 +-
 .../protocol/commands/CloseContainerCommand.java   |  36 +++--
 .../ozone/protocol/commands/CommandStatus.java     | 141 +++++++++++++++++
 .../protocol/commands/DeleteBlocksCommand.java     |  13 +-
 .../commands/ReplicateContainerCommand.java        |  20 ++-
 .../ozone/protocol/commands/ReregisterCommand.java |  10 ++
 .../hadoop/ozone/protocol/commands/SCMCommand.java |  19 +++
 .../proto/StorageContainerDatanodeProtocol.proto   |  21 +++
 .../hadoop/ozone/container/common/ScmTestMock.java |  33 +++-
 .../common/report/TestReportPublisher.java         |  75 +++++++++-
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  57 ++++---
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java |  23 ++-
 .../server/TestSCMDatanodeHeartbeatDispatcher.java |  25 +++-
 .../ozone/container/common/TestEndPoint.java       | 111 +++++++++++++-
 26 files changed, 935 insertions(+), 141 deletions(-)

commit baeb2330e2b544e10f2b551802edca6e9e7f0434
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jul 12 12:09:31 2018 -0700

    HDDS-234. Add SCM node report handler.
    Contributed by Ajay Kumar.

 .../apache/hadoop/hdds/scm/node/NodeManager.java   |  9 ++
 .../hadoop/hdds/scm/node/NodeReportHandler.java    | 19 ++++-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 11 +++
 .../hadoop/hdds/scm/container/MockNodeManager.java | 11 +++
 .../hdds/scm/node/TestNodeReportHandler.java       | 95 ++++++++++++++++++++++
 .../testutils/ReplicationNodeManagerMock.java      | 10 +++
 6 files changed, 152 insertions(+), 3 deletions(-)

commit f63b172a86bed0f653f59d15e317be7c8ffee0f0
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jul 12 10:43:24 2018 -0700

    HDDS-228. Add the ReplicaMaps to ContainerStateManager.
    Contributed by Ajay Kumar.

 .../hdds/scm/container/ContainerStateManager.java  | 34 +++++++++
 .../scm/container/states/ContainerStateMap.java    | 86 ++++++++++++++++++++++
 .../scm/container/TestContainerStateManager.java   | 79 ++++++++++++++++++++
 3 files changed, 199 insertions(+)

commit 5a8d785de430deffa39e0e99ed031ed728948ea8
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jul 11 12:08:50 2018 -0700

    HDDS-242. Introduce NEW_NODE, STALE_NODE and DEAD_NODE event
    and corresponding event handlers in SCM.
    Contributed by Nanda Kumar.
    
    Recommitting after making sure that patch is clean.

 .../scm/container/CloseContainerEventHandler.java  |  7 ++-
 .../hdds/scm/container/ContainerMapping.java       |  5 ---
 .../hdds/scm/container/ContainerReportHandler.java | 47 ++++++++++++++++++++
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  9 +---
 .../hdds/scm/container/closer/ContainerCloser.java |  1 -
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   | 22 ++++++++++
 .../apache/hadoop/hdds/scm/node/DatanodeInfo.java  | 11 +++++
 .../hadoop/hdds/scm/node/DeadNodeHandler.java      | 42 ++++++++++++++++++
 .../hadoop/hdds/scm/node/NewNodeHandler.java       | 50 +++++++++++++++++++++
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |  4 +-
 .../hadoop/hdds/scm/node/NodeReportHandler.java    | 42 ++++++++++++++++++
 .../hadoop/hdds/scm/node/NodeStateManager.java     | 32 +++++++++++++-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 24 ++++++----
 .../hadoop/hdds/scm/node/StaleNodeHandler.java     | 42 ++++++++++++++++++
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java | 20 +++++++--
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 18 +++-----
 .../hdds/scm/server/StorageContainerManager.java   | 51 ++++++++++++++++------
 .../hadoop/hdds/scm/container/MockNodeManager.java |  9 ++++
 .../container/TestCloseContainerEventHandler.java  |  2 +
 .../hdds/scm/node/TestContainerPlacement.java      | 12 ++++-
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 11 ++++-
 .../server/TestSCMDatanodeHeartbeatDispatcher.java |  8 +++-
 .../testutils/ReplicationNodeManagerMock.java      |  7 +++
 23 files changed, 417 insertions(+), 59 deletions(-)

commit b46edd7f2d7b2097b821cae884cea9a1e275494b
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jul 11 12:03:42 2018 -0700

    Revert "HDDS-242. Introduce NEW_NODE, STALE_NODE and DEAD_NODE event"
    This reverts commit a47ec5dac4a1cdfec788ce3296b4f610411911ea.
    There was a spurious file in this commit. Revert to clean it.

 .../hdds/scm/container/ContainerReportHandler.java | 47 --------------------
 .../hadoop/hdds/scm/node/DeadNodeHandler.java      | 42 ------------------
 .../hadoop/hdds/scm/node/NewNodeHandler.java       | 50 ---------------------
 .../hadoop/hdds/scm/node/NodeReportHandler.java    | 42 ------------------
 .../hadoop/hdds/scm/node/StaleNodeHandler.java     | 42 ------------------
 hadoop-ozone/common/src/main/bin/ozone-config.sh   | 51 ----------------------
 6 files changed, 274 deletions(-)

commit bf96b7179491fd2f806d84a83c48a40dc226b9ef
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Jul 10 15:58:47 2018 -0700

    HDDS-242. Introduce NEW_NODE, STALE_NODE and DEAD_NODE event
    and corresponding event handlers in SCM.
    Contributed by Nanda Kumar.

 .../hdds/scm/container/ContainerReportHandler.java | 47 ++++++++++++++++++++
 .../hadoop/hdds/scm/node/DeadNodeHandler.java      | 42 ++++++++++++++++++
 .../hadoop/hdds/scm/node/NewNodeHandler.java       | 50 +++++++++++++++++++++
 .../hadoop/hdds/scm/node/NodeReportHandler.java    | 42 ++++++++++++++++++
 .../hadoop/hdds/scm/node/StaleNodeHandler.java     | 42 ++++++++++++++++++
 hadoop-ozone/common/src/main/bin/ozone-config.sh   | 51 ++++++++++++++++++++++
 6 files changed, 274 insertions(+)

commit 62911ba4a6d08b9a8caab258deddb29a6734d845
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Jul 10 14:07:23 2018 -0700

    HDDS-208. ozone createVolume command ignores the first character of the volume name argument. Contributed by Lokesh Jain.

 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 26 +++++++++++++++++++---
 .../web/ozShell/volume/CreateVolumeHandler.java    | 10 ++++-----
 2 files changed, 28 insertions(+), 8 deletions(-)

commit 92ec09e60ffed3afd52b5d4c9a71f548e9a1b53f
Merge: 34be2fd3 022a60ce
Author: Arpit Agarwal <arp@apache.org>
Date:   Mon Jul 9 13:22:58 2018 -0700

    Merge remote-tracking branch 'apache/trunk' into HDDS-48

commit 34be2fd35172e7a9b1e4db5ae15c706d6779d7e2
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jul 9 12:30:59 2018 -0700

    HDDS-48. Fix branch after merging from trunk.

 .../commandhandler/TestBlockDeletion.java          | 32 ++++++++++++----------
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    |  4 +--
 2 files changed, 19 insertions(+), 17 deletions(-)

commit 022a60ce56be1c60ceb7fd3fa323f39da408b18f
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jul 9 13:04:44 2018 -0700

    HDDS-240. Implement metrics for EventQueue.
    Contributed by Elek, Marton.

 .../hadoop/hdds/server/events/EventQueue.java      | 108 ++++++++++++---------
 .../hdds/server/events/SingleThreadExecutor.java   |  35 +++++--
 .../hadoop/hdds/server/events/TestEventQueue.java  |  35 +------
 3 files changed, 91 insertions(+), 87 deletions(-)

commit ffc8bb9de4f1251d3f2cc9e1a839ca7b40bd48d7
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jul 9 13:03:57 2018 -0700

    Revert "HDDS-224. Create metrics for Event Watcher."
    
    This reverts commit cb5e225868a069d6d16244b462ebada44465dce8.
    The JIRA number is wrong, reverting to fix it.

 .../hadoop/hdds/server/events/EventQueue.java      | 108 +++++++++------------
 .../hdds/server/events/SingleThreadExecutor.java   |  35 ++-----
 .../hadoop/hdds/server/events/TestEventQueue.java  |  35 ++++++-
 3 files changed, 87 insertions(+), 91 deletions(-)

commit b801ee5c15bf082e711d6fccc9fa5f6f175780a5
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jul 9 12:52:39 2018 -0700

    HDDS-224. Create metrics for Event Watcher.
    Contributed b Elek, Marton.

 .../hadoop/hdds/server/events/EventQueue.java      | 108 ++++++++++++---------
 .../hdds/server/events/SingleThreadExecutor.java   |  35 +++++--
 .../hadoop/hdds/server/events/TestEventQueue.java  |  35 +------
 3 files changed, 91 insertions(+), 87 deletions(-)

commit a50627d25f780c04db2fead1130d6b2ed4c6c427
Merge: 36c88d38 a831ce7e
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jul 9 12:13:03 2018 -0700

    Merge trunk into HDDS-48

commit 76e5a79621c8b4ea9304305943e966779a5486cf
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jul 9 12:02:20 2018 -0700

    HDDS-224. Create metrics for Event Watcher.
    Contributed by Elek, Marton.

 hadoop-hdds/framework/pom.xml                      |   5 +
 .../hadoop/hdds/server/events/EventWatcher.java    |  43 ++++++++-
 .../hdds/server/events/EventWatcherMetrics.java    |  79 +++++++++++++++
 .../hdds/server/events/TestEventWatcher.java       | 107 ++++++++++++++++++---
 4 files changed, 220 insertions(+), 14 deletions(-)

commit 36c88d38ad6036407600d6ce178518889be6536e
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Mon Jul 9 09:33:09 2018 -0700

    HDDS-213. Single lock to synchronize KeyValueContainer#update.

 .../ozone/container/common/impl/ContainerData.java |  28 +++--
 .../container/common/impl/ContainerDataYaml.java   |  10 +-
 .../container/keyvalue/KeyValueContainer.java      | 124 ++++++++-------------
 .../ozone/container/ozoneimpl/ContainerReader.java |  37 +++---
 4 files changed, 87 insertions(+), 112 deletions(-)

commit a831ce7ed586b64898c2d35598079c9a33446edc
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Jul 8 11:27:54 2018 -0700

    HDDS-235. Fix TestOzoneAuditLogger#verifyDefaultLogLevel.
    Contributed by Xiaoyu Yao.

 .../hadoop/ozone/audit/TestOzoneAuditLogger.java   | 46 +++++++++++++++-------
 1 file changed, 31 insertions(+), 15 deletions(-)

commit 452ea323cc0dca0961d48e77f31e893f68d53610
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Jul 8 11:11:21 2018 -0700

    HDDS-217. Move all SCMEvents to a package.
    Contributed by Anu Engineer.

 .../scm/container/CloseContainerEventHandler.java  | 13 ++--
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   | 80 ++++++++++++++++++++++
 .../hadoop/hdds/scm/events/package-info.java       | 23 +++++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  5 +-
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java | 11 ++-
 .../hdds/scm/server/StorageContainerManager.java   |  7 +-
 .../container/TestCloseContainerEventHandler.java  | 27 ++++----
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 10 +--
 .../server/TestSCMDatanodeHeartbeatDispatcher.java | 20 +++---
 9 files changed, 147 insertions(+), 49 deletions(-)

commit 75f2c00ba3bd97a28e2e3c9e5fe21a6109607ace
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jul 6 16:26:40 2018 -0700

    HDDS-237. Add updateDeleteTransactionId. Contributed by Bharat Viswanadham and Lokesh Jain

 .../ozone/container/common/impl/ContainerData.java  | 21 +++++++++++++++++++++
 .../container/common/interfaces/Container.java      |  6 ++++++
 .../ozone/container/keyvalue/KeyValueContainer.java |  5 +++++
 3 files changed, 32 insertions(+)

commit 9740efd803039144051681de0a5153531bd42e6b
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jul 6 15:02:40 2018 -0700

    HDDS-211. Add a create container Lock. Contributed by Bharat Viswanadham

 .../ozone/container/common/impl/HddsDispatcher.java  |  4 +++-
 .../ozone/container/common/interfaces/Handler.java   |  8 +++-----
 .../ozone/container/keyvalue/KeyValueHandler.java    | 20 +++++++++++++++++---
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java   |  7 -------
 4 files changed, 23 insertions(+), 16 deletions(-)

commit fa21890d4a512a94e5c2395fad069d1039456c6c
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Jul 6 12:09:05 2018 -0700

    HDDS-167. Rename KeySpaceManager to OzoneManager. Contributed by Arpit Agarwal.

 .gitignore                                         |   4 +
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   2 +-
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  22 +-
 .../org/apache/hadoop/ozone/common/Storage.java    |   6 +-
 .../src/main/proto/ScmBlockLocationProtocol.proto  |  10 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |   6 +-
 .../common/src/main/resources/ozone-default.xml    | 120 ++++-----
 .../src/main/resources/webapps/static/ozone.js     |   4 +-
 .../resources/webapps/static/templates/config.html |   4 +-
 .../hadoop/hdds/scm/block/DeletedBlockLog.java     |   2 +-
 .../scm/container/states/ContainerStateMap.java    |   6 +-
 .../apache/hadoop/hdds/scm/node/CommandQueue.java  |   2 +-
 .../hdds/scm/server/SCMBlockProtocolServer.java    |   2 +-
 .../apache/hadoop/hdds/scm/cli/OzoneBaseCLI.java   |   2 +-
 .../src/test/acceptance/basic/basic.robot          |   6 +-
 .../src/test/acceptance/basic/docker-compose.yaml  |   8 +-
 .../src/test/acceptance/basic/docker-config        |   4 +-
 .../src/test/acceptance/basic/ozone-shell.robot    |  18 +-
 .../src/test/acceptance/commonlib.robot            |   4 +-
 .../test/acceptance/ozonefs/docker-compose.yaml    |   8 +-
 .../src/test/acceptance/ozonefs/docker-config      |   4 +-
 .../src/test/acceptance/ozonefs/ozonefs.robot      |   6 +-
 .../org/apache/hadoop/ozone/client/BucketArgs.java |   4 +-
 .../hadoop/ozone/client/OzoneClientFactory.java    |  86 ++++---
 .../org/apache/hadoop/ozone/client/OzoneKey.java   |   2 +-
 .../org/apache/hadoop/ozone/client/VolumeArgs.java |   4 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |  24 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |  54 ++--
 .../client/rest/DefaultRestServerSelector.java     |   2 +-
 .../hadoop/ozone/client/rest/RestClient.java       |  15 +-
 .../ozone/client/rest/RestServerSelector.java      |   2 +-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 142 ++++++-----
 .../hadoop/ozone/client/TestHddsClientUtils.java   |  24 +-
 hadoop-ozone/common/pom.xml                        |   2 +-
 hadoop-ozone/common/src/main/bin/ozone             |   9 +-
 hadoop-ozone/common/src/main/bin/start-ozone.sh    |  16 +-
 hadoop-ozone/common/src/main/bin/stop-ozone.sh     |  16 +-
 .../hadoop/ozone/{KsmUtils.java => OmUtils.java}   |  51 ++--
 .../apache/hadoop/ozone/freon/OzoneGetConf.java    |  16 +-
 .../org/apache/hadoop/ozone/ksm/KSMConfigKeys.java |  81 ------
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |  81 ++++++
 .../helpers/OmBucketArgs.java}                     |  46 ++--
 .../helpers/OmBucketInfo.java}                     |  42 ++--
 .../KsmKeyArgs.java => om/helpers/OmKeyArgs.java}  |  14 +-
 .../KsmKeyInfo.java => om/helpers/OmKeyInfo.java}  |  64 ++---
 .../helpers/OmKeyLocationInfo.java}                |  20 +-
 .../helpers/OmKeyLocationInfoGroup.java}           |  42 ++--
 .../helpers/OmOzoneAclMap.java}                    |  16 +-
 .../helpers/OmVolumeArgs.java}                     |  40 +--
 .../ozone/{ksm => om}/helpers/OpenKeySession.java  |   8 +-
 .../ozone/{ksm => om}/helpers/ServiceInfo.java     |  20 +-
 .../ozone/{ksm => om}/helpers/VolumeArgs.java      |   2 +-
 .../ozone/{ksm => om}/helpers/package-info.java    |   2 +-
 .../hadoop/ozone/{ksm => om}/package-info.java     |   4 +-
 .../protocol/OzoneManagerProtocol.java}            |  68 ++---
 .../ozone/{ksm => om}/protocol/package-info.java   |   2 +-
 ...zoneManagerProtocolClientSideTranslatorPB.java} | 180 ++++++-------
 .../protocolPB/OzoneManagerProtocolPB.java}        |  12 +-
 .../ozone/{ksm => om}/protocolPB/package-info.java |   2 +-
 .../{KSMPBHelper.java => OMPBHelper.java}          |  10 +-
 ...erProtocol.proto => OzoneManagerProtocol.proto} |  14 +-
 hadoop-ozone/docs/content/GettingStarted.md        |  18 +-
 hadoop-ozone/docs/content/Metrics.md               |  10 +-
 hadoop-ozone/docs/content/_index.md                |  12 +-
 hadoop-ozone/docs/static/OzoneOverview.svg         |   2 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |  24 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  66 ++---
 .../hadoop/ozone/TestOzoneConfigurationFields.java |   4 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  18 +-
 .../ozone/TestStorageContainerManagerHelper.java   |  12 +-
 .../ozone/client/rest/TestOzoneRestClient.java     |   6 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  18 +-
 .../commandhandler/TestBlockDeletion.java          |  45 ++--
 .../TestCloseContainerByPipeline.java              |  35 ++-
 .../commandhandler/TestCloseContainerHandler.java  |  14 +-
 .../{ksm => om}/TestContainerReportWithKeys.java   |  12 +-
 .../TestMultipleContainerReadWrite.java            |   2 +-
 .../TestOmBlockVersioning.java}                    |  68 ++---
 .../TestKSMMetrcis.java => om/TestOmMetrics.java}  | 193 +++++++-------
 .../TestKSMSQLCli.java => om/TestOmSQLCli.java}    |  16 +-
 .../TestOzoneManager.java}                         | 185 +++++++-------
 .../TestOzoneManagerRestInterface.java}            |  32 +--
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |  14 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |   3 +-
 .../ozone/web/TestDistributedOzoneVolumes.java     |  12 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  58 ++---
 .../webapps/{ksm => ozoneManager}/.gitkeep         |   0
 .../hdfs/server/datanode/ObjectStoreHandler.java   |  33 ++-
 .../ozone/web/handlers/KeyProcessTemplate.java     |   4 +-
 .../ozone/web/handlers/VolumeProcessTemplate.java  |   4 +-
 .../web/storage/DistributedStorageHandler.java     | 153 ++++++------
 .../hadoop/ozone/{ksm => om}/BucketManager.java    |  20 +-
 .../ozone/{ksm => om}/BucketManagerImpl.java       |  80 +++---
 .../ozone/{ksm => om}/KeyDeletingService.java      |  20 +-
 .../hadoop/ozone/{ksm => om}/KeyManager.java       |  42 ++--
 .../hadoop/ozone/{ksm => om}/KeyManagerImpl.java   | 140 +++++------
 .../ozone/{ksm/KSMMXBean.java => om/OMMXBean.java} |   6 +-
 .../OMMetadataManager.java}                        |  38 +--
 .../{ksm/KSMMetrics.java => om/OMMetrics.java}     |  22 +-
 .../{ksm/KSMStorage.java => om/OMStorage.java}     |  46 ++--
 .../OmMetadataManagerImpl.java}                    | 126 +++++-----
 .../ozone/{ksm => om}/OpenKeyCleanupService.java   |  10 +-
 .../KeySpaceManager.java => om/OzoneManager.java}  | 277 ++++++++++-----------
 .../OzoneManagerHttpServer.java}                   |  30 +--
 .../ozone/{ksm => om}/ServiceListJSONServlet.java  |  14 +-
 .../hadoop/ozone/{ksm => om}/VolumeManager.java    |  18 +-
 .../ozone/{ksm => om}/VolumeManagerImpl.java       |  89 ++++---
 .../exceptions/OMException.java}                   |  22 +-
 .../ozone/{ksm => om}/exceptions/package-info.java |   4 +-
 .../hadoop/ozone/{ksm => om}/package-info.java     |   4 +-
 ...zoneManagerProtocolServerSideTranslatorPB.java} | 180 ++++++-------
 .../hadoop/ozone/protocolPB/package-info.java      |   2 +-
 .../main/webapps/{ksm => ozoneManager}/index.html  |  12 +-
 .../main/webapps/{ksm => ozoneManager}/main.css    |   0
 .../main/webapps/{ksm => ozoneManager}/main.html   |   0
 .../om-metrics.html}                               |   2 +-
 .../{ksm/ksm.js => ozoneManager/ozoneManager.js}   |  14 +-
 .../ozone/{ksm => om}/TestBucketManagerImpl.java   | 129 +++++-----
 .../hadoop/ozone/{ksm => om}/TestChunkStreams.java |   2 +-
 .../TestOzoneManagerHttpServer.java}               |  16 +-
 .../hadoop/ozone/{ksm => om}/package-info.java     |   4 +-
 .../hadoop/fs/ozone/contract/OzoneContract.java    |   4 +-
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  48 ++--
 123 files changed, 1999 insertions(+), 1984 deletions(-)

commit 66b05d6ed1976551e68578f238f23468e63fe8b3
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jul 6 11:01:33 2018 -0700

    HDDS-204. Modify Integration tests for new ContainerIO classes. Contributed by Bharat Viswanadham

 .../ozone/container/keyvalue/KeyValueHandler.java  |  8 ++++
 .../keyvalue/helpers/KeyValueContainerUtil.java    | 10 -----
 .../ozone/container/ozoneimpl/ContainerReader.java | 18 ++++++--
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  2 +-
 .../container/keyvalue/TestKeyValueHandler.java    | 51 +---------------------
 .../TestGenerateOzoneRequiredConfigurations.java   |  5 ++-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |  2 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  2 +
 8 files changed, 31 insertions(+), 67 deletions(-)

commit 451f14284eb92bd2d48e4e1916dc75c173df3e3f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jul 5 15:23:39 2018 -0700

    HDDS-182:CleanUp Reimplemented classes. Contributed by Hansiha Koneru

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   10 +
 .../ozone/container/common/helpers/ChunkUtils.java |  343 ------
 .../container/common/helpers/ContainerData.java    |  512 ---------
 .../container/common/helpers/ContainerUtils.java   |  179 +---
 .../ozone/container/common/helpers/KeyUtils.java   |  148 ---
 .../container/common/impl/ChunkManagerImpl.java    |  233 ----
 .../ozone/container/common/impl/ContainerData.java |  131 ++-
 .../container/common/impl/ContainerDataYaml.java   |   29 +-
 .../common/impl/ContainerLocationManagerImpl.java  |  158 ---
 .../common/impl/ContainerManagerImpl.java          | 1115 --------------------
 .../ozone/container/common/impl/ContainerSet.java  |   19 +-
 .../common/impl/ContainerStorageLocation.java      |  212 ----
 .../ozone/container/common/impl/Dispatcher.java    |  695 ------------
 .../container/common/impl/KeyManagerImpl.java      |  204 ----
 .../RandomContainerDeletionChoosingPolicy.java     |    1 -
 ...TopNOrderedContainerDeletionChoosingPolicy.java |    1 -
 .../container/common/interfaces/ChunkManager.java  |   73 --
 .../container/common/interfaces/Container.java     |    1 -
 .../ContainerDeletionChoosingPolicy.java           |    3 +-
 .../common/interfaces/ContainerManager.java        |  267 -----
 .../container/common/interfaces/KeyManager.java    |   73 --
 .../ozone/container/common/volume/VolumeSet.java   |   13 +-
 .../container/keyvalue/KeyValueContainer.java      |   36 +-
 .../container/keyvalue/KeyValueContainerData.java  |   80 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  |    2 +-
 .../container/keyvalue/helpers/ChunkUtils.java     |   18 +-
 .../ozone/container/keyvalue/helpers/KeyUtils.java |   19 +-
 .../keyvalue/helpers/KeyValueContainerUtil.java    |   48 +-
 .../container/keyvalue/impl/ChunkManagerImpl.java  |   10 +-
 .../background/BlockDeletingService.java           |   35 +-
 .../statemachine/background/package-info.java      |    2 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |    2 +-
 .../common/TestKeyValueContainerData.java          |    2 +-
 .../common/impl/TestContainerDataYaml.java         |    6 +-
 .../container/common/impl/TestContainerSet.java    |   10 +-
 .../volume/TestRoundRobinVolumeChoosingPolicy.java |    6 +-
 .../container/common/volume/TestVolumeSet.java     |    6 +-
 .../container/keyvalue/TestKeyValueContainer.java  |   20 +-
 .../container/keyvalue/TestKeyValueHandler.java    |   11 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |    2 +-
 .../testutils/BlockDeletingServiceTestImpl.java    |    9 +-
 .../src/test/resources/additionalfields.container  |    2 +-
 .../src/test/resources/incorrect.container         |    2 +-
 .../ozone/container/ContainerTestHelper.java       |    2 +
 .../container/common/TestBlockDeletingService.java |  118 +--
 .../impl/TestContainerDeletionChoosingPolicy.java  |   63 +-
 .../common/impl/TestContainerPersistence.java      |  478 ++++-----
 .../container/metrics/TestContainerMetrics.java    |    3 +-
 .../container/server/TestContainerServer.java      |   14 +-
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    |   44 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |   24 +-
 51 files changed, 696 insertions(+), 4798 deletions(-)

commit f63eeeb66678eb802d9b0f45384046080c02f762
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jul 5 11:26:00 2018 -0700

    HDDS-229:Remove singleton for Handler. Contributed by Bharat Viswanadham

 .../ozone/container/common/interfaces/Handler.java |  2 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  | 22 ++++------------------
 2 files changed, 5 insertions(+), 19 deletions(-)

commit 13875aeaf3caa838180ef5dd9437f38ae82e358e
Author: Giovanni Matteo Fumarola <gifuma@apache.com>
Date:   Thu Jul 5 10:55:05 2018 -0700

    Merge branch 'trunk' of https://git-wip-us.apache.org/repos/asf/hadoop into trunk

commit eeb9882f06599fac49245501452db8c61cf4a4d6
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Jul 5 02:11:10 2018 +0530

    HDDS-212. Introduce NodeStateManager to manage the state of Datanodes in SCM. Contributed by Nanda kumar.

 .../hdds/scm/client/ContainerOperationClient.java  |   8 +-
 .../hadoop/hdds/protocol/DatanodeDetails.java      |  13 +-
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   4 -
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |   5 +-
 .../protocol/StorageContainerLocationProtocol.java |   5 +-
 ...inerLocationProtocolClientSideTranslatorPB.java |   8 +-
 ...inerLocationProtocolServerSideTranslatorPB.java |   8 +-
 .../proto/StorageContainerLocationProtocol.proto   |  19 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |  13 +-
 .../common/src/main/resources/ozone-default.xml    |  11 -
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java |  11 -
 .../protocol/StorageContainerNodeProtocol.java     |   4 +-
 .../apache/hadoop/hdds/scm/node/DatanodeInfo.java  | 109 ++++
 .../hadoop/hdds/scm/node/HeartbeatQueueItem.java   |  98 ----
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |  16 +-
 .../hadoop/hdds/scm/node/NodeStateManager.java     | 575 +++++++++++++++++++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 506 ++----------------
 .../node/states/NodeAlreadyExistsException.java    |  45 ++
 .../hadoop/hdds/scm/node/states/NodeException.java |  44 ++
 .../scm/node/states/NodeNotFoundException.java     |  49 ++
 .../hadoop/hdds/scm/node/states/NodeStateMap.java  | 281 ++++++++++
 .../hdds/scm/server/SCMClientProtocolServer.java   |  60 +--
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java |   2 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |   2 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  58 +--
 .../hdds/scm/node/TestContainerPlacement.java      |  10 +-
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 176 ++-----
 .../testutils/ReplicationNodeManagerMock.java      |  37 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |   4 +-
 .../hadoop/ozone/scm/node/TestQueryNode.java       |  19 +-
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |   6 +-
 31 files changed, 1288 insertions(+), 918 deletions(-)

commit c2430e298b8807715d5a2c709932345396c74ea8
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Jul 3 13:30:19 2018 -0700

    HDDS-175. Refactor ContainerInfo to remove Pipeline object from it.
    Contributed by Ajay Kumar.

 .../hdds/scm/client/ContainerOperationClient.java  | 109 +++++++++++---
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |  38 ++++-
 .../container/common/helpers/ContainerInfo.java    | 167 ++++++++++++++-------
 .../common/helpers/ContainerWithPipeline.java      | 131 ++++++++++++++++
 .../protocol/StorageContainerLocationProtocol.java |  13 +-
 ...inerLocationProtocolClientSideTranslatorPB.java |  26 +++-
 ...inerLocationProtocolServerSideTranslatorPB.java |  25 ++-
 .../proto/StorageContainerLocationProtocol.proto   |  15 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |   9 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  80 +++++-----
 .../block/DatanodeDeletedBlockTransactions.java    |  11 +-
 .../scm/container/CloseContainerEventHandler.java  |  26 +++-
 .../hdds/scm/container/ContainerMapping.java       | 128 +++++++++++++---
 .../hdds/scm/container/ContainerStateManager.java  |  30 +++-
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  26 +++-
 .../hdds/scm/container/closer/ContainerCloser.java |  15 +-
 .../scm/container/states/ContainerStateMap.java    |   7 +-
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  27 +++-
 .../hdds/scm/pipelines/PipelineSelector.java       |  16 ++
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |   1 +
 .../standalone/StandaloneManagerImpl.java          |   1 +
 .../hdds/scm/server/SCMClientProtocolServer.java   |  14 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  15 +-
 .../container/TestCloseContainerEventHandler.java  |  31 ++--
 .../hdds/scm/container/TestContainerMapping.java   |  27 ++--
 .../scm/container/closer/TestContainerCloser.java  |  18 ++-
 .../hdds/scm/node/TestContainerPlacement.java      |   6 +-
 .../scm/cli/container/CloseContainerHandler.java   |  10 +-
 .../scm/cli/container/DeleteContainerHandler.java  |   9 +-
 .../scm/cli/container/InfoContainerHandler.java    |  11 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |  15 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |   9 +-
 .../hadoop/ozone/protocolPB/OzonePBHelper.java     |  30 ++++
 .../scm/container/TestContainerStateManager.java   | 161 +++++++++++---------
 .../hadoop/ozone/TestContainerOperations.java      |  11 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |   6 +-
 .../ozone/TestStorageContainerManagerHelper.java   |  10 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |   4 +-
 .../TestCloseContainerByPipeline.java              |  21 ++-
 .../ozone/ksm/TestContainerReportWithKeys.java     |   2 +-
 .../hadoop/ozone/scm/TestAllocateContainer.java    |   6 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |  36 ++---
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    | 135 ++++++++---------
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  62 ++++----
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java |  14 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java  |  16 +-
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  63 +++-----
 47 files changed, 1139 insertions(+), 504 deletions(-)

commit f1e8567869f11378f7bda6b31a09ed6d86b5a842
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Jul 3 11:38:14 2018 -0700

    HDDS-198. Create AuditLogger mechanism to be used by OM, SCM and Datanode.
    Contributed by Dinesh Chitlangia.

 hadoop-hdds/common/pom.xml                         |  18 +++
 .../org/apache/hadoop/ozone/audit/AuditAction.java |  30 +++++
 .../hadoop/ozone/audit/AuditEventStatus.java       |  36 ++++++
 .../org/apache/hadoop/ozone/audit/AuditLogger.java | 128 ++++++++++++++++++++
 .../apache/hadoop/ozone/audit/AuditLoggerType.java |  37 ++++++
 .../org/apache/hadoop/ozone/audit/AuditMarker.java |  38 ++++++
 .../org/apache/hadoop/ozone/audit/Auditable.java   |  32 +++++
 .../apache/hadoop/ozone/audit/package-info.java    | 123 +++++++++++++++++++
 .../org/apache/hadoop/ozone/audit/DummyAction.java |  51 ++++++++
 .../org/apache/hadoop/ozone/audit/DummyEntity.java |  57 +++++++++
 .../hadoop/ozone/audit/TestOzoneAuditLogger.java   | 131 +++++++++++++++++++++
 .../apache/hadoop/ozone/audit/package-info.java    |  23 ++++
 .../common/src/test/resources/log4j2.properties    |  76 ++++++++++++
 .../org/apache/hadoop/ozone/audit/OMAction.java    |  51 ++++++++
 .../apache/hadoop/ozone/audit/package-info.java    |  22 ++++
 15 files changed, 853 insertions(+)

commit 77f4312c091cffb8ca8158b48964832ce79dfb46
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Tue Jul 3 09:53:41 2018 -0700

    HDDS-176. Add keyCount and container maximum size to ContainerData. Contributed by Bharat Viswanadham.

 .../ozone/container/common/impl/ContainerData.java | 50 +++++++++++++++++++++-
 .../container/common/impl/ContainerDataYaml.java   | 10 +++--
 .../states/endpoint/VersionEndpointTask.java       |  3 --
 .../container/keyvalue/KeyValueContainer.java      |  8 +---
 .../container/keyvalue/KeyValueContainerData.java  | 20 ++++++---
 .../ozone/container/keyvalue/KeyValueHandler.java  | 14 +++---
 .../keyvalue/helpers/KeyValueContainerUtil.java    |  1 +
 .../container/keyvalue/impl/KeyManagerImpl.java    |  6 +++
 .../container/keyvalue/impl/package-info.java      | 22 ++++++++++
 .../ozone/container/ozoneimpl/ContainerReader.java | 21 ++++++---
 .../common/TestKeyValueContainerData.java          |  8 +++-
 .../common/impl/TestContainerDataYaml.java         |  6 ++-
 .../container/common/impl/TestContainerSet.java    |  4 +-
 .../container/keyvalue/TestChunkManagerImpl.java   |  2 +-
 .../container/keyvalue/TestKeyManagerImpl.java     |  7 ++-
 .../container/keyvalue/TestKeyValueContainer.java  |  2 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |  2 +-
 .../src/test/resources/additionalfields.container  |  1 +
 .../src/test/resources/incorrect.container         |  1 +
 19 files changed, 147 insertions(+), 41 deletions(-)

commit 3afed6d52dc4de650e025d8a3bdcabc3d13ae837
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Tue Jul 3 09:50:25 2018 -0700

    HDDS-205. Add metrics to HddsDispatcher. Contributed by Bharat Viswanadham.

 .../container/common/helpers/ContainerMetrics.java |  2 +-
 .../ozone/container/common/impl/Dispatcher.java    |  2 +-
 .../container/common/impl/HddsDispatcher.java      | 24 +++++++--
 .../ozone/container/common/interfaces/Handler.java | 14 +++--
 .../ozone/container/keyvalue/KeyValueHandler.java  | 41 ++++++++++++---
 .../container/keyvalue/TestKeyValueHandler.java    | 13 +++--
 .../container/metrics/TestContainerMetrics.java    | 59 +++++++++++++---------
 7 files changed, 110 insertions(+), 45 deletions(-)

commit 38a4a9cd197a7e659344e3c99924c53e3ec93f80
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Jul 3 00:51:16 2018 +0530

    HDDS-206. Ozone shell command doesn't respect KSM port set in ozone-site.xml. Contributed by Shashikant Banerjee.

 .../hadoop/ozone/client/OzoneClientFactory.java    | 13 ++++++------
 .../java/org/apache/hadoop/ozone/KsmUtils.java     | 24 ++++++++++++++--------
 2 files changed, 23 insertions(+), 14 deletions(-)

commit 01b17dc4165ee25cf6e1d79b53f7f2850b694b27
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 28 17:10:10 2018 -0700

    HDDS-169:Add Volume IO Stats. Contributed by Bharat Viswanadham

 .../ozone/container/common/impl/ContainerData.java |  20 +++
 .../ozone/container/common/volume/HddsVolume.java  |   6 +
 .../container/common/volume/VolumeIOStats.java     | 139 +++++++++++++++++++++
 .../container/keyvalue/KeyValueContainer.java      |   1 +
 .../container/keyvalue/helpers/ChunkUtils.java     |  30 +++--
 .../container/keyvalue/impl/ChunkManagerImpl.java  |  26 ++--
 .../container/keyvalue/TestChunkManagerImpl.java   | 111 +++++++++++-----
 .../container/keyvalue/TestKeyManagerImpl.java     |  29 +++--
 8 files changed, 308 insertions(+), 54 deletions(-)

commit 59040e9435d640ce3f6a094a7e7dcbc11e7bedab
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Jun 29 04:37:16 2018 +0530

    HDDS-178: DN should update transactionId on block delete. Contributed by Lokesh Jain.

 .../common/impl/ContainerManagerImpl.java          |   7 +-
 .../common/interfaces/ContainerManager.java        |   2 +
 .../commandhandler/DeleteBlocksCommandHandler.java |  29 ++-
 .../commandhandler/TestBlockDeletion.java          | 211 +++++++++++++++++++++
 4 files changed, 243 insertions(+), 6 deletions(-)

commit e4f5f2baf80455bb47502f7e5788aef91498aada
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Jun 29 04:11:39 2018 +0530

    HDDS-185: TestCloseContainerByPipeline#testCloseContainerViaRatis fail intermittently. Contributed by Shashikant Banerjee.

 .../TestCloseContainerByPipeline.java              | 65 +++++++++++++++++++---
 1 file changed, 58 insertions(+), 7 deletions(-)

commit cfec3871663bbe6693371b12fe172e35355b01f2
Merge: c16e8789 cba5bc19
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 28 14:57:23 2018 -0700

    Merge branch 'trunk' into HDDS-48

commit c16e8789d8c0a9a51aed0ff0fc35f16d6899f8fc
Merge: e3bc9574 cba5bc19
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 28 14:28:23 2018 -0700

    Merge remote-tracking branch 'apache-commit/trunk' into HDDS-48

commit e3bc957477469065da578d0139add311a8b82d81
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 28 14:07:52 2018 -0700

    HDDS-183:Integrate Volumeset, ContainerSet and HddsDispatcher. Contributed by Bharat Viswanadham

 .../src/main/proto/DatanodeContainerProtocol.proto |   1 +
 .../ozone/container/common/impl/ContainerData.java |   1 +
 .../impl/ContainerDataYaml.java}                   |  96 ++---
 .../ozone/container/common/impl/Dispatcher.java    |  11 +
 .../container/common/impl/HddsDispatcher.java      |  28 +-
 .../common/interfaces/ContainerDispatcher.java     |  14 +
 .../ozone/container/common/interfaces/Handler.java |  15 +-
 .../common/statemachine/DatanodeStateMachine.java  |   4 +-
 .../background/BlockDeletingService.java           |   1 +
 .../commandhandler/DeleteBlocksCommandHandler.java |  56 ++-
 .../states/datanode/RunningDatanodeState.java      |   3 +-
 .../states/endpoint/VersionEndpointTask.java       |  34 +-
 .../ozone/container/common/volume/HddsVolume.java  |   6 +
 .../ozone/container/common/volume/VolumeSet.java   |  48 +++
 .../container/keyvalue/KeyValueContainer.java      |  52 +--
 .../container/keyvalue/KeyValueContainerData.java  |  22 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  |  22 +-
 .../keyvalue/helpers/KeyValueContainerUtil.java    | 134 +++++++
 .../ozone/container/ozoneimpl/ContainerReader.java | 157 ++++++++
 .../ozone/container/ozoneimpl/OzoneContainer.java  | 396 +++++++++------------
 .../hadoop/ozone/protocol/VersionResponse.java     |   4 +
 .../ozone/container/common/SCMTestUtils.java       |  13 +-
 .../hadoop/ozone/container/common/ScmTestMock.java |   4 +
 .../common/TestKeyValueContainerData.java          |   3 +-
 ...eyValueYaml.java => TestContainerDataYaml.java} |  25 +-
 .../container/common/impl/TestContainerSet.java    |   6 +-
 .../container/common/interfaces/TestHandler.java   |   8 +-
 .../container/keyvalue/TestChunkManagerImpl.java   |   3 +-
 .../container/keyvalue/TestKeyManagerImpl.java     |   3 +-
 .../container/keyvalue/TestKeyValueContainer.java  |  10 +-
 .../container/keyvalue/TestKeyValueHandler.java    |   8 +-
 .../container/ozoneimpl/TestOzoneContainer.java    | 108 ++++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |   4 +
 .../ozone/container/common/TestEndPoint.java       |  20 +-
 .../ozone/TestStorageContainerManagerHelper.java   |  11 +-
 .../TestCloseContainerByPipeline.java              |   6 +-
 .../commandhandler/TestCloseContainerHandler.java  |   6 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |  13 +-
 .../container/server/TestContainerServer.java      |  10 +
 .../ozone/ksm/TestContainerReportWithKeys.java     |  14 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  22 +-
 41 files changed, 954 insertions(+), 448 deletions(-)

commit 09448cb71f04efa25a886077da2b093cda8217d9
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Jun 28 10:13:30 2018 -0700

    HDDS-173. Refactor Dispatcher and implement Handler for new ContainerIO design.

 .../hdds/scm/storage/ContainerProtocolCalls.java   |  24 +-
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  12 +
 .../src/main/proto/DatanodeContainerProtocol.proto |  20 +-
 .../common/src/main/resources/ozone-default.xml    |  33 ++
 .../ozone/container/common/helpers/ChunkUtils.java |   5 +-
 .../container/common/helpers/ContainerUtils.java   | 169 +++---
 .../ozone/container/common/helpers/KeyUtils.java   |   5 +-
 .../ozone/container/common/impl/ContainerSet.java  |   7 +-
 .../ozone/container/common/impl/Dispatcher.java    |  49 +-
 .../container/common/impl/HddsDispatcher.java      | 180 ++++++
 .../container/common/interfaces/Container.java     |  15 +
 .../ozone/container/common/interfaces/Handler.java |  71 +++
 .../server/ratis/ContainerStateMachine.java        |   5 +-
 .../ozone/container/common/volume/VolumeSet.java   |  11 +-
 .../container/keyvalue/KeyValueContainer.java      |  29 +-
 .../impl => keyvalue}/KeyValueContainerData.java   |  47 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  | 643 +++++++++++++++++++++
 .../{common/impl => keyvalue}/KeyValueYaml.java    |  15 +-
 .../container/keyvalue/helpers/ChunkUtils.java     |  50 +-
 .../ozone/container/keyvalue/helpers/KeyUtils.java |  35 +-
 .../KeyValueContainerLocationUtil.java             |   2 +-
 .../{ => helpers}/KeyValueContainerUtil.java       |  35 +-
 .../helpers/SmallFileUtils.java}                   |  36 +-
 .../keyvalue/{ => impl}/ChunkManagerImpl.java      |   4 +-
 .../keyvalue/{ => impl}/KeyManagerImpl.java        |  20 +-
 .../container/keyvalue/interfaces/KeyManager.java  |   4 +-
 .../common/TestKeyValueContainerData.java          |  36 +-
 .../container/common/impl/TestContainerSet.java    |  12 +-
 .../container/common/impl/TestKeyValueYaml.java    |   2 +
 .../container/common/interfaces/TestHandler.java   |  91 +++
 .../container/keyvalue/TestChunkManagerImpl.java   |   3 +-
 .../container/keyvalue/TestKeyManagerImpl.java     |   7 +-
 .../container/keyvalue/TestKeyValueContainer.java  |  10 +-
 .../container/keyvalue/TestKeyValueHandler.java    | 246 ++++++++
 .../ozone/client/io/ChunkGroupInputStream.java     |   6 +-
 .../ozone/client/io/OzoneContainerTranslation.java |  50 --
 .../ozone/container/ContainerTestHelper.java       |  25 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   6 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |  12 +-
 39 files changed, 1678 insertions(+), 354 deletions(-)

commit cba5bc19e83d170ed9d100e5ee7e96c4308e653d
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jun 27 23:31:32 2018 -0700

    HDDS-195. Create generic CommandWatcher utility.
    Contributed by Elek, Marton.

 .../hadoop/hdds/server/events/EventWatcher.java    | 157 +++++++++++++++
 .../server/events/IdentifiableEventPayload.java    |  30 +++
 .../hdds/server/events/EventHandlerStub.java       |  38 ++++
 .../hdds/server/events/TestEventWatcher.java       | 220 +++++++++++++++++++++
 4 files changed, 445 insertions(+)

commit 3530a4001d57f9bd68a51a2228bf2bc72829c182
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jun 27 14:18:25 2018 -0700

    HDDS-193. Make Datanode heartbeat dispatcher in SCM event based.
    Contributed by Elek, Marton.

 .../scm/server/SCMDatanodeHeartbeatDispatcher.java | 126 ++++++++++
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  14 +-
 .../hdds/scm/server/StorageContainerManager.java   |   4 +-
 .../report/SCMDatanodeContainerReportHandler.java  |  76 -------
 .../report/SCMDatanodeHeartbeatDispatcher.java     | 189 ---------------
 .../report/SCMDatanodeNodeReportHandler.java       |  43 ----
 .../server/report/SCMDatanodeReportHandler.java    |  83 -------
 .../report/SCMDatanodeReportHandlerFactory.java    |  82 -------
 .../hdds/scm/server/report/package-info.java       |  57 -----
 .../server/TestSCMDatanodeHeartbeatDispatcher.java | 119 ++++++++++
 .../TestSCMDatanodeContainerReportHandler.java     |  34 ---
 .../report/TestSCMDatanodeHeartbeatDispatcher.java | 138 -----------
 .../report/TestSCMDatanodeNodeReportHandler.java   |  36 ---
 .../TestSCMDatanodeReportHandlerFactory.java       |  51 -----
 .../hdds/scm/server/report/package-info.java       |  21 --
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    | 253 ---------------------
 16 files changed, 254 insertions(+), 1072 deletions(-)

commit d44a88ae468705d2ee3ba04b01a9d4c01fe02c06
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Jun 26 18:28:47 2018 -0700

    HDDS-94. Change ozone datanode command to start the standalone datanode plugin.
    Contributed by  Sandeep Nemuri.

 .../java/org/apache/hadoop/ozone/HddsDatanodeService.java   | 13 ++++++++++++-
 .../src/test/acceptance/basic/docker-compose.yaml           | 12 ------------
 .../acceptance-test/src/test/acceptance/basic/docker-config |  5 -----
 .../acceptance-test/src/test/acceptance/commonlib.robot     |  1 -
 .../src/test/acceptance/ozonefs/docker-compose.yaml         | 12 ------------
 .../src/test/acceptance/ozonefs/docker-config               |  5 -----
 hadoop-ozone/common/src/main/bin/ozone                      |  9 +++------
 7 files changed, 15 insertions(+), 42 deletions(-)

commit 677fccee65adab4d92952e3dc47a7fd59842fb0b
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jun 27 13:56:45 2018 -0700

    HDDS-170. Fix TestBlockDeletingService#testBlockDeletionTimeout. Contributed by Lokesh Jain.

 .../main/java/org/apache/hadoop/utils/BackgroundService.java  |  2 +-
 .../common/statemachine/background/BlockDeletingService.java  |  8 ++++----
 .../hadoop/ozone/container/ozoneimpl/OzoneContainer.java      |  2 +-
 .../container/testutils/BlockDeletingServiceTestImpl.java     |  4 ++--
 .../ozone/container/common/TestBlockDeletingService.java      | 11 +++++++----
 5 files changed, 15 insertions(+), 12 deletions(-)

commit 37d3affabe419d22087d08b374dd9e0db5ba004d
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jun 27 13:35:30 2018 -0700

    HDDS-186. Create under replicated queue. Contributed by Ajay Kumar.

 .../container/replication/ReplicationQueue.java    |  76 ++++++++++++
 .../container/replication/ReplicationRequest.java  | 106 ++++++++++++++++
 .../ozone/container/replication/package-info.java  |  23 ++++
 .../replication/TestReplicationQueue.java          | 134 +++++++++++++++++++++
 .../ozone/container/replication/package-info.java  |  23 ++++
 5 files changed, 362 insertions(+)

commit 1419092885be2510955ebba07444bd5662a956ba
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jun 27 13:28:00 2018 -0700

    HDDS-194. Remove NodePoolManager and node pool handling from SCM. Contributed by Elek Marton.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  26 --
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 -
 .../common/src/main/resources/ozone-default.xml    |  47 ---
 .../hdds/scm/container/ContainerMapping.java       |  10 +-
 .../container/replication/ContainerSupervisor.java | 340 ---------------------
 .../scm/container/replication/InProgressPool.java  | 255 ----------------
 .../scm/container/replication/PeriodicPool.java    | 119 --------
 .../scm/container/replication/package-info.java    |  23 --
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |   6 -
 .../hadoop/hdds/scm/node/NodePoolManager.java      |  71 -----
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  23 --
 .../hadoop/hdds/scm/node/SCMNodePoolManager.java   | 269 ----------------
 .../hadoop/hdds/scm/container/MockNodeManager.java |   6 -
 .../hdds/scm/node/TestSCMNodePoolManager.java      | 160 ----------
 .../testutils/ReplicationNodeManagerMock.java      |   5 -
 .../testutils/ReplicationNodePoolManagerMock.java  | 133 --------
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  31 --
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  74 -----
 18 files changed, 3 insertions(+), 1596 deletions(-)

commit 06b316170905b5f4fea4d9dfc1943c1f736f4b5a
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jun 27 13:25:45 2018 -0700

    Revert "HDDS-194. Remove NodePoolManager and node pool handling from SCM. Contributed by Elek Marton"
    
    This reverts commit aaf03cc459a34af284f9735453aefd4ddb430d67.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  26 ++
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 +
 .../common/src/main/resources/ozone-default.xml    |  47 +++
 .../container/replication/ReplicationQueue.java    |  78 -----
 .../container/replication/ReplicationReqMsg.java   | 107 -------
 .../ozone/container/replication/package-info.java  |  23 --
 .../replication/TestReplicationQueue.java          | 134 --------
 .../ozone/container/replication/package-info.java  |  23 --
 .../hdds/scm/container/ContainerMapping.java       |  10 +-
 .../container/replication/ContainerSupervisor.java | 340 +++++++++++++++++++++
 .../scm/container/replication/InProgressPool.java  | 255 ++++++++++++++++
 .../scm/container/replication/PeriodicPool.java    | 119 ++++++++
 .../scm/container/replication/package-info.java    |  23 ++
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |   6 +
 .../hadoop/hdds/scm/node/NodePoolManager.java      |  71 +++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  23 ++
 .../hadoop/hdds/scm/node/SCMNodePoolManager.java   | 269 ++++++++++++++++
 .../hadoop/hdds/scm/container/MockNodeManager.java |   6 +
 .../hdds/scm/node/TestSCMNodePoolManager.java      | 160 ++++++++++
 .../testutils/ReplicationNodeManagerMock.java      |   5 +
 .../testutils/ReplicationNodePoolManagerMock.java  | 133 ++++++++
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  31 ++
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  74 +++++
 23 files changed, 1596 insertions(+), 368 deletions(-)

commit a26326da38467e7c461d6cb7fdb884a08aad85e5
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jun 27 12:39:15 2018 -0700

    HDDS-194. Remove NodePoolManager and node pool handling from SCM. Contributed by Elek Marton

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  26 --
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 -
 .../common/src/main/resources/ozone-default.xml    |  47 ---
 .../container/replication/ReplicationQueue.java    |  78 +++++
 .../container/replication/ReplicationReqMsg.java   | 107 +++++++
 .../ozone/container/replication/package-info.java  |  23 ++
 .../replication/TestReplicationQueue.java          | 134 ++++++++
 .../ozone/container/replication/package-info.java  |  23 ++
 .../hdds/scm/container/ContainerMapping.java       |  10 +-
 .../container/replication/ContainerSupervisor.java | 340 ---------------------
 .../scm/container/replication/InProgressPool.java  | 255 ----------------
 .../scm/container/replication/PeriodicPool.java    | 119 --------
 .../scm/container/replication/package-info.java    |  23 --
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |   6 -
 .../hadoop/hdds/scm/node/NodePoolManager.java      |  71 -----
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  23 --
 .../hadoop/hdds/scm/node/SCMNodePoolManager.java   | 269 ----------------
 .../hadoop/hdds/scm/container/MockNodeManager.java |   6 -
 .../hdds/scm/node/TestSCMNodePoolManager.java      | 160 ----------
 .../testutils/ReplicationNodeManagerMock.java      |   5 -
 .../testutils/ReplicationNodePoolManagerMock.java  | 133 --------
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  31 --
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  74 -----
 23 files changed, 368 insertions(+), 1596 deletions(-)

commit c99d230b9f53a5111cf253bd3471e4a6ae19bfac
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jun 25 21:12:05 2018 -0700

    HDDS-192:Create new SCMCommand to request a replication of a container. Contributed by Elek Marton

 .../common/statemachine/DatanodeStateMachine.java  |  3 +
 .../ReplicateContainerCommandHandler.java          | 67 +++++++++++++++
 .../states/endpoint/HeartbeatEndpointTask.java     | 12 +++
 .../commands/ReplicateContainerCommand.java        | 94 ++++++++++++++++++++++
 .../proto/StorageContainerDatanodeProtocol.proto   | 12 ++-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 11 +++
 .../TestReplicateContainerHandler.java             | 71 ++++++++++++++++
 7 files changed, 269 insertions(+), 1 deletion(-)

commit cf8e72ddd63ad91f9677354a79576936072b886a
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jun 25 13:05:22 2018 -0700

    HDDS-191. Queue SCMCommands via EventQueue in SCM.
    Contributed by Elek, Marton.

 .../protocol/commands/CommandForDatanode.java      | 45 ++++++++++++++++++++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 20 +++++++++-
 .../hdds/scm/server/StorageContainerManager.java   |  8 +++-
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 39 +++++++++++++++++++
 4 files changed, 110 insertions(+), 2 deletions(-)

commit a37ae63dc60ac29ffe08f11ad60b17e5b53d8470
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Jun 24 01:05:04 2018 -0700

    HDDS-177. Create a releasable ozonefs artifact
    Contributed by Marton, Elek.

 .../test/acceptance/ozonefs/docker-compose.yaml    |  71 +++
 .../src/test/acceptance/ozonefs/docker-config      |  39 ++
 .../src/test/acceptance/ozonefs/ozonefs.robot      |  39 ++
 hadoop-ozone/ozonefs/pom.xml                       | 211 +++++++
 .../java/org/apache/hadoop/fs/ozone/Constants.java |  42 ++
 .../main/java/org/apache/hadoop/fs/ozone/OzFs.java |  44 ++
 .../apache/hadoop/fs/ozone/OzoneFSInputStream.java |  79 +++
 .../hadoop/fs/ozone/OzoneFSOutputStream.java       |  59 ++
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    | 689 +++++++++++++++++++++
 .../org/apache/hadoop/fs/ozone/package-info.java   |  30 +
 .../hadoop/fs/ozone/TestOzoneFSInputStream.java    | 157 +++++
 .../hadoop/fs/ozone/TestOzoneFileInterfaces.java   | 231 +++++++
 .../ozone/contract/ITestOzoneContractCreate.java   |  48 ++
 .../ozone/contract/ITestOzoneContractDelete.java   |  48 ++
 .../ozone/contract/ITestOzoneContractDistCp.java   |  50 ++
 .../contract/ITestOzoneContractGetFileStatus.java  |  61 ++
 .../fs/ozone/contract/ITestOzoneContractMkdir.java |  48 ++
 .../fs/ozone/contract/ITestOzoneContractOpen.java  |  47 ++
 .../ozone/contract/ITestOzoneContractRename.java   |  49 ++
 .../ozone/contract/ITestOzoneContractRootDir.java  |  51 ++
 .../fs/ozone/contract/ITestOzoneContractSeek.java  |  47 ++
 .../hadoop/fs/ozone/contract/OzoneContract.java    | 123 ++++
 .../ozonefs/src/test/resources/contract/ozone.xml  | 113 ++++
 .../ozonefs/src/test/resources/log4j.properties    |  23 +
 hadoop-ozone/pom.xml                               |   1 +
 25 files changed, 2400 insertions(+)

commit 40b66be0d11b2539462eda75fa15ca911e4488c8
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat Jun 23 15:49:44 2018 -0700

    HDDS-184. Upgrade common-langs version to 3.7 in hadoop-tools/hadoop-ozone.
    Contributed by Takanobu Asanuma.

 .../hadoop/ozone/genconf/TestGenerateOzoneRequiredConfigurations.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 117ae2b0052f2b15d071ad2f8b77e7c6ad58eb21
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Sun Jun 17 23:48:33 2018 -0700

    HDDS-141. Remove PipeLine Class from SCM and move the data field in the Pipeline to ContainerInfo. Contributed by Shashikant Banerjee.

 .../container/common/helpers/ContainerInfo.java    |  32 +++++
 .../scm/container/common/helpers/Pipeline.java     | 142 ++++++++++++---------
 .../container/common/helpers/PipelineChannel.java  | 124 ------------------
 hadoop-hdds/common/src/main/proto/hdds.proto       |   8 +-
 .../hdds/scm/container/closer/ContainerCloser.java |   6 +-
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  67 +++++-----
 .../hdds/scm/pipelines/PipelineSelector.java       |  11 +-
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  13 +-
 .../standalone/StandaloneManagerImpl.java          |   8 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |   8 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   8 +-
 .../ozone/container/ContainerTestHelper.java       |  19 +--
 .../ozone/genesis/BenchMarkContainerStateMap.java  |  11 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |   6 +-
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |   4 +-
 15 files changed, 191 insertions(+), 276 deletions(-)

commit b3e0fbb1712353706fd46219394a215ad8665b08
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jun 15 14:35:33 2018 -0700

    HDDS-160:Refactor KeyManager, ChunkManager. Contributed by Bharat Viswanadham

 .../container/common/interfaces/ChunkManager.java  |   2 +-
 .../ozone/container/keyvalue/ChunkManagerImpl.java | 240 +++++++++++++++++
 .../ozone/container/keyvalue/KeyManagerImpl.java   | 188 +++++++++++++
 .../container/keyvalue/helpers/ChunkUtils.java     | 295 +++++++++++++++++++++
 .../ozone/container/keyvalue/helpers/KeyUtils.java |  37 ++-
 .../keyvalue/interfaces/ChunkManager.java          |  80 ++++++
 .../container/keyvalue/interfaces/KeyManager.java  |  76 ++++++
 .../container/keyvalue/TestChunkManagerImpl.java   | 237 +++++++++++++++++
 .../container/keyvalue/TestKeyManagerImpl.java     | 179 +++++++++++++
 9 files changed, 1331 insertions(+), 3 deletions(-)

commit bf72a899d04af59b04195f4a872f8e197544a8a1
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jun 15 10:23:58 2018 -0700

    HDDS-172. The numbers of operation should be integer in KSM UI.
    Contributed by Takanobu Asanuma.

 hadoop-ozone/ozone-manager/src/main/webapps/ksm/ksm.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit e936592ff90b6346f8fafa13f44eb6c76121f43d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 14 20:54:54 2018 -0700

    HDDS-155:Implement KeyValueContainer and adopt new disk layout for the containers. Contributed by Bharat Viswanadham

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   3 +
 .../org/apache/hadoop/ozone/common/Storage.java    |   3 +-
 .../src/main/proto/DatanodeContainerProtocol.proto |   5 +
 .../container/common/impl/KeyValueContainer.java   |  78 ---
 .../common/impl/KeyValueContainerData.java         |  21 +
 .../container/common/interfaces/Container.java     |  17 +-
 .../container/keyvalue/KeyValueContainer.java      | 544 +++++++++++++++++++++
 .../keyvalue/KeyValueContainerLocationUtil.java    | 140 ++++++
 .../container/keyvalue/KeyValueContainerUtil.java  | 148 ++++++
 .../ozone/container/keyvalue/helpers/KeyUtils.java |  82 ++++
 .../container/keyvalue/helpers/package-info.java   |  21 +
 .../ozone/container/keyvalue/package-info.java     |  21 +
 .../container/common/impl/TestContainerSet.java    |   8 +-
 .../container/keyvalue/TestKeyValueContainer.java  | 281 +++++++++++
 14 files changed, 1285 insertions(+), 87 deletions(-)

commit bf35f98559775441d79c6928e1ea4a8e056b69e8
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jun 14 14:14:24 2018 -0700

    HDDS-146. Refactor the structure of the acceptance tests.
    Contributed by  Elek, Marton.

 .../acceptance-test/dev-support/bin/robot-all.sh   |   2 +-
 .../dev-support/bin/robot-dnd-all.sh               |  63 +++++
 .../acceptance-test/dev-support/bin/robot.sh       |   9 +-
 .../acceptance-test/dev-support/docker/Dockerfile  |  21 ++
 .../dev-support/docker/docker-compose.yaml         |  23 ++
 hadoop-ozone/acceptance-test/pom.xml               |   1 +
 .../src/test/{compose => acceptance/basic}/.env    |   2 +-
 .../src/test/acceptance/basic/basic.robot          |  50 ++++
 .../basic}/docker-compose.yaml                     |   0
 .../{compose => acceptance/basic}/docker-config    |   4 +-
 .../src/test/acceptance/basic/ozone-shell.robot    |  85 +++++++
 .../ozone.robot => acceptance/commonlib.robot}     |  67 ++----
 .../src/test/acceptance/ozonefs/.env               |  17 ++
 .../robotframework/acceptance/ozone-shell.robot    | 256 ---------------------
 14 files changed, 290 insertions(+), 310 deletions(-)

commit b6672821027bcb7fe8e9e368d6bf1119fd4b8d42
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Jun 14 13:28:41 2018 -0700

    HDDS-156. Implement HDDSVolume to manage volume state

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   5 +
 .../container/common/DataNodeLayoutVersion.java    |  80 +++++
 .../common/helpers/DatanodeVersionFile.java        |  95 ++++++
 .../ozone/container/common/impl/VolumeSet.java     | 251 ----------------
 .../common/interfaces/VolumeChoosingPolicy.java    |   4 +-
 .../container/common/utils/HddsVolumeUtil.java     | 163 ++++++++++
 .../ozone/container/common/volume/HddsVolume.java  | 330 +++++++++++++++++++++
 .../RoundRobinVolumeChoosingPolicy.java            |   9 +-
 .../common/{impl => volume}/VolumeInfo.java        |  78 ++---
 .../ozone/container/common/volume/VolumeSet.java   | 309 +++++++++++++++++++
 .../common/{impl => volume}/VolumeUsage.java       |  11 +-
 .../container/common/volume/package-info.java      |  21 ++
 .../common/TestDatanodeLayOutVersion.java          |  38 +++
 .../common/helpers/TestDatanodeVersionFile.java    | 134 +++++++++
 .../impl/TestRoundRobinVolumeChoosingPolicy.java   | 100 -------
 .../container/common/volume/TestHddsVolume.java    | 145 +++++++++
 .../volume/TestRoundRobinVolumeChoosingPolicy.java | 131 ++++++++
 .../{interfaces => volume}/TestVolumeSet.java      |  42 +--
 18 files changed, 1517 insertions(+), 429 deletions(-)

commit eae7c47cf629659245bf0e5f3ee2efc0c9b0e41e
Merge: 4e784cdf 9f1d8b0a
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu Jun 14 09:38:20 2018 -0700

    Merge remote-tracking branch 'apache-commit/trunk' into HDDS-48

commit 9f1d8b0ac96cb5a481ba3116199527fee961d558
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jun 13 20:18:22 2018 -0700

    HDDS-163. Add Datanode heartbeat dispatcher in SCM.
    Contributed by Nandakumar.

 .../container/common/report/ReportManager.java     |   3 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 119 ++++++-------
 .../report/SCMDatanodeContainerReportHandler.java  |  76 +++++++++
 .../report/SCMDatanodeHeartbeatDispatcher.java     | 189 +++++++++++++++++++++
 .../report/SCMDatanodeNodeReportHandler.java       |  43 +++++
 .../server/report/SCMDatanodeReportHandler.java    |  83 +++++++++
 .../report/SCMDatanodeReportHandlerFactory.java    |  82 +++++++++
 .../hdds/scm/server/report/package-info.java       |  57 +++++++
 .../TestSCMDatanodeContainerReportHandler.java     |  34 ++++
 .../report/TestSCMDatanodeHeartbeatDispatcher.java | 138 +++++++++++++++
 .../report/TestSCMDatanodeNodeReportHandler.java   |  36 ++++
 .../TestSCMDatanodeReportHandlerFactory.java       |  51 ++++++
 .../hdds/scm/server/report/package-info.java       |  21 +++
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |  20 ++-
 14 files changed, 875 insertions(+), 77 deletions(-)

commit 8563897634dae0d284d064326fb84db4e2cc14fc
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jun 13 17:50:42 2018 -0700

    HDDS-161. Add functionality to queue ContainerClose command from SCM Heartbeat Response to Ratis.
    Contributed by Shashikant Banerjee.

 .../common/statemachine/DatanodeStateMachine.java  |   9 +
 .../CloseContainerCommandHandler.java              |  21 +-
 .../commandhandler/CommandDispatcher.java          |   4 +
 .../common/transport/server/XceiverServer.java     |   7 +
 .../common/transport/server/XceiverServerGrpc.java |   9 +
 .../common/transport/server/XceiverServerSpi.java  |   7 +
 .../transport/server/ratis/XceiverServerRatis.java |  56 +++++-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  62 +++++-
 .../protocol/commands/CloseContainerCommand.java   |  12 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   1 +
 .../scm/container/CloseContainerEventHandler.java  |   3 +-
 .../hdds/scm/container/closer/ContainerCloser.java |   7 +-
 .../TestCloseContainerByPipeline.java              | 221 +++++++++++++++++++++
 .../commandhandler/TestCloseContainerHandler.java  |   7 +-
 14 files changed, 412 insertions(+), 14 deletions(-)

commit 03a253a831ebb66d667dde55c82dada98feef4e1
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jun 13 11:43:18 2018 -0700

    HDDS-159. RestClient: Implement list operations for volume, bucket and keys. Contributed by Lokesh Jain.

 .../robotframework/acceptance/ozone-shell.robot    |  18 ++--
 .../hadoop/ozone/client/rest/RestClient.java       | 113 ++++++++++++++++++++-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |  33 +++---
 .../hadoop/ozone/web/client/TestBuckets.java       |   3 -
 .../hadoop/ozone/web/client/TestBucketsRatis.java  |   3 -
 .../apache/hadoop/ozone/web/client/TestVolume.java |  12 +--
 6 files changed, 136 insertions(+), 46 deletions(-)

commit 8706b78e4caa6d2cda5f595e77d2b980c732441b
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jun 13 09:50:10 2018 -0700

    HDDS-109. Add reconnect logic for XceiverClientGrpc.
    Contributed by Lokesh Jain.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 23 +++++++++++++++++
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  6 ++---
 .../apache/hadoop/ozone/web/client/TestKeys.java   | 29 +++++++++++++++++-----
 3 files changed, 48 insertions(+), 10 deletions(-)

commit b7a210f8de0e10b5dd4a13236bd83b944ab795ec
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Wed Jun 13 00:36:02 2018 -0700

    HADOOP-15483. Upgrade jquery to version 3.3.1. Contributed by Lokesh Jain, Mukul Kumar Singh and Sunil Govindan.

 hadoop-hdds/server-scm/src/main/webapps/scm/index.html              | 6 +++---
 .../acceptance-test/src/test/robotframework/acceptance/ozone.robot  | 4 ++--
 hadoop-ozone/ozone-manager/src/main/webapps/ksm/index.html          | 6 +++---
 hadoop-ozone/pom.xml                                                | 4 ++--
 4 files changed, 10 insertions(+), 10 deletions(-)

commit c777d62e3345ef4dd418b7b1530f7432a0a585d4
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Jun 12 09:03:42 2018 -0700

    HDDS-130. TestGenerateOzoneRequiredConfigurations should use GenericTestUtils#getTempPath to set output directory. Contributed by Sandeep Nemuri.

 .../TestGenerateOzoneRequiredConfigurations.java   | 72 +++++++++++++++-------
 1 file changed, 50 insertions(+), 22 deletions(-)

commit 6f71a92fd95eeb83a4fcea3d8715e6037404ee9b
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Jun 12 08:25:18 2018 -0700

    HDDS-111. Include tests for Rest Client in TestVolume and TestBucket.
    Contributed by Lokesh Jain.

 .../hadoop/ozone/client/OzoneClientUtils.java      | 18 +++++-----
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |  8 +++--
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      | 11 +++---
 .../hadoop/ozone/web/client/TestBuckets.java       | 40 +++++++++++++++++++---
 .../hadoop/ozone/web/client/TestBucketsRatis.java  | 35 ++++++++++++++++++-
 .../apache/hadoop/ozone/web/client/TestVolume.java | 36 +++++++++++++++++--
 .../hadoop/ozone/web/client/TestVolumeRatis.java   | 29 ++++++++++++++--
 .../web/storage/DistributedStorageHandler.java     | 21 +++++++-----
 8 files changed, 165 insertions(+), 33 deletions(-)

commit 56340777f3b9081fdb6a5026e594fca71d1c5a79
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Jun 12 20:36:23 2018 +0530

    HDDS-158. DatanodeStateMachine endPoint task throws NullPointerException. Contributed by Nanda Kumar.

 .../states/endpoint/HeartbeatEndpointTask.java     | 12 +++-
 .../common/report/TestReportPublisher.java         | 79 ++++++++++++++++++++++
 2 files changed, 88 insertions(+), 3 deletions(-)

commit 0af66c461cab4378dce6160ac8b0cc131c55511c
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Jun 11 16:02:32 2018 -0700

    HDDS-72. Add deleteTransactionId field in ContainerInfo. Contributed by Lokesh Jain.

 .../container/common/helpers/ContainerInfo.java    |  27 ++++-
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   2 +
 .../apache/hadoop/utils/MetadataKeyFilters.java    | 118 +++++++++++++++++----
 hadoop-hdds/common/src/main/proto/hdds.proto       |   1 +
 .../org/apache/hadoop/ozone/TestMetadataStore.java |  61 ++++++++++-
 .../container/common/helpers/ContainerData.java    |  21 ++++
 .../container/common/helpers/ContainerReport.java  |  12 +++
 .../common/impl/ContainerManagerImpl.java          |  15 ++-
 .../background/BlockDeletingService.java           |  16 ++-
 .../commandhandler/DeleteBlocksCommandHandler.java |   3 +
 .../proto/StorageContainerDatanodeProtocol.proto   |   1 +
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |   9 +-
 .../hadoop/hdds/scm/block/DeletedBlockLog.java     |   3 +-
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |   8 +-
 .../hdds/scm/container/ContainerMapping.java       |  35 ++++++
 .../hdds/scm/container/ContainerStateManager.java  |  12 +++
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  11 ++
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  16 +++
 .../hdds/scm/container/TestContainerMapping.java   |   6 +-
 .../scm/container/closer/TestContainerCloser.java  |   3 +-
 .../ozone/TestStorageContainerManagerHelper.java   |   6 +-
 .../container/common/TestBlockDeletingService.java |  29 ++++-
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      |   3 +-
 .../hadoop/ozone/ksm/KSMMetadataManagerImpl.java   |   9 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java  |  44 +++++---
 25 files changed, 401 insertions(+), 70 deletions(-)

commit 4e784cdf89aaf7d8fdb4716062de0637f8bac491
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jun 11 13:14:03 2018 -0700

    HDDS-136:Rename dbPath,containerFilePath. Contributed by Bharat Viswanadham

 .../common/impl/KeyValueContainerData.java         | 34 +++++++++++-----------
 .../ozone/container/common/impl/KeyValueYaml.java  |  9 +++---
 .../common/TestKeyValueContainerData.java          |  8 ++---
 .../container/common/impl/TestKeyValueYaml.java    | 16 +++++-----
 .../src/test/resources/additionalfields.container  |  7 +++--
 .../src/test/resources/incorrect.container         |  7 ++---
 6 files changed, 41 insertions(+), 40 deletions(-)

commit beb1f5a6507c639285046de10d1bf154d616ef63
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Mon Jun 11 12:15:39 2018 -0700

    Revert "Create Version File in Datanode. Contributed by Bharat Viswanadham."
    
    This reverts commit f26d3466d79125123cba00ab81481655d7bfe3c1.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   2 -
 .../org/apache/hadoop/ozone/common/Storage.java    |   6 +-
 .../container/common/DataNodeLayoutVersion.java    |  80 ----------
 .../common/helpers/DatanodeVersionFile.java        | 172 ---------------------
 .../states/datanode/RunningDatanodeState.java      |   3 +-
 .../states/endpoint/VersionEndpointTask.java       |  71 +--------
 .../ozone/container/ozoneimpl/OzoneContainer.java  |   8 +-
 .../hadoop/ozone/protocol/VersionResponse.java     |   4 -
 .../hadoop/ozone/container/common/ScmTestMock.java |  24 ---
 .../common/TestDatanodeLayOutVersion.java          |  38 -----
 .../container/common/TestDatanodeStateMachine.java |   3 +-
 .../common/helpers/TestDatanodeVersionFile.java    | 120 --------------
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |   2 -
 .../ozone/container/common/TestEndPoint.java       | 169 +-------------------
 14 files changed, 14 insertions(+), 688 deletions(-)

commit 65501e7646d7b502015016a950e07d74d4a25a9a
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jun 11 09:04:54 2018 -0700

    HDDS-133:Change format of .container files to Yaml. Contributed by Bharat Viswanadham

 hadoop-hdds/container-service/pom.xml              |   6 +
 .../container/common/impl/ChunkLayOutVersion.java  |  18 ++
 .../ozone/container/common/impl/ContainerData.java |  28 ++-
 .../common/impl/KeyValueContainerData.java         |  19 +-
 .../ozone/container/common/impl/KeyValueYaml.java  | 274 +++++++++++++++++++++
 .../common/TestKeyValueContainerData.java          |  15 +-
 .../container/common/impl/TestKeyValueYaml.java    | 158 ++++++++++++
 .../src/test/resources/additionalfields.container  |   9 +
 .../src/test/resources/incorrect.container         |  10 +
 hadoop-hdds/pom.xml                                |   2 +
 10 files changed, 521 insertions(+), 18 deletions(-)

commit 3ead6db727a9f8abf2e58122d92591ee6b199f02
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jun 8 10:27:01 2018 -0700

    HDDS-157. Upgrade common-langs version to 3.7 in HDDS and Ozone.
    Contributed by Takanobu Asanuma.

 .../java/org/apache/hadoop/hdds/scm/XceiverClientHandler.java     | 2 +-
 .../src/main/java/org/apache/hadoop/hdds/client/BlockID.java      | 2 +-
 .../container/common/states/endpoint/RegisterEndpointTask.java    | 2 +-
 .../org/apache/hadoop/ozone/client/rest/response/KeyInfo.java     | 4 ++--
 .../main/java/org/apache/hadoop/ozone/web/response/KeyInfo.java   | 4 ++--
 .../apache/hadoop/ozone/TestStorageContainerManagerHelper.java    | 2 +-
 .../org/apache/hadoop/ozone/client/rpc/TestOzoneRpcClient.java    | 2 +-
 .../org/apache/hadoop/ozone/ksm/TestContainerReportWithKeys.java  | 2 +-
 .../java/org/apache/hadoop/ozone/ksm/TestKeySpaceManager.java     | 2 +-
 .../java/org/apache/hadoop/ozone/ksm/TestKsmBlockVersioning.java  | 2 +-
 .../apache/hadoop/ozone/ksm/TestMultipleContainerReadWrite.java   | 2 +-
 .../test/java/org/apache/hadoop/ozone/ozShell/TestOzoneShell.java | 2 +-
 .../java/org/apache/hadoop/ozone/scm/TestAllocateContainer.java   | 2 +-
 .../org/apache/hadoop/ozone/scm/TestXceiverClientManager.java     | 2 +-
 .../org/apache/hadoop/ozone/web/TestOzoneRestWithMiniCluster.java | 2 +-
 .../test/java/org/apache/hadoop/ozone/web/client/TestKeys.java    | 8 ++++----
 .../java/org/apache/hadoop/ozone/web/client/TestKeysRatis.java    | 2 +-
 .../test/java/org/apache/hadoop/ozone/web/client/TestVolume.java  | 2 +-
 .../test/java/org/apache/hadoop/ozone/ksm/TestChunkStreams.java   | 2 +-
 .../tools/src/main/java/org/apache/hadoop/ozone/freon/Freon.java  | 6 +++---
 .../apache/hadoop/ozone/genesis/BenchMarkDatanodeDispatcher.java  | 2 +-
 .../apache/hadoop/ozone/genesis/BenchMarkMetadataStoreReads.java  | 2 +-
 .../apache/hadoop/ozone/genesis/BenchMarkMetadataStoreWrites.java | 2 +-
 .../org/apache/hadoop/ozone/genesis/BenchMarkRocksDbStore.java    | 2 +-
 .../main/java/org/apache/hadoop/ozone/genesis/GenesisUtil.java    | 2 +-
 25 files changed, 32 insertions(+), 32 deletions(-)

commit e4279d8e168952f56c9bad99893d73eaa1cdad82
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jun 7 14:35:22 2018 -0700

    HDDS-127. Add CloseContainerEventHandler in SCM.
    Contributed by Shashikant Banerjee.

 .../scm/container/CloseContainerEventHandler.java  |  83 ++++++++++
 .../hdds/scm/container/ContainerMapping.java       |   5 +
 .../hdds/scm/container/ContainerStateManager.java  |   9 ++
 .../apache/hadoop/hdds/scm/container/Mapping.java  |   6 +
 .../container/TestCloseContainerEventHandler.java  | 177 +++++++++++++++++++++
 5 files changed, 280 insertions(+)

commit b6679b45d1dcad18ef5d3eaaa403c54a7d5bfdfc
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu Jun 7 14:10:52 2018 -0700

    HDDS-147. Update Ozone site docs. Contributed by Arpit Agarwal.

 hadoop-ozone/docs/content/CommandShell.md   | 141 +++++------
 hadoop-ozone/docs/content/GettingStarted.md | 353 ++++++++++++++--------------
 2 files changed, 254 insertions(+), 240 deletions(-)

commit 9524c1a9a510e37e25e8db59aecc0f279bd0c1f9
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 7 12:47:58 2018 -0700

    HDDS-119:Skip Apache license header check for some ozone doc scripts. Contributed by  Ajay Kumar

 hadoop-ozone/pom.xml | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 4d97b7b78a6d10d0c0d764898533928bdd0092cb
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Wed Jun 6 15:36:36 2018 -0700

    HDDS-140. Add DU usage to VolumeInfo.

 .../impl/RoundRobinVolumeChoosingPolicy.java       |   2 +-
 .../ozone/container/common/impl/VolumeInfo.java    |  59 +++++--
 .../ozone/container/common/impl/VolumeSet.java     | 109 ++++++------
 .../ozone/container/common/impl/VolumeUsage.java   | 189 +++++++++++++++++++++
 .../container/common/interfaces/TestVolumeSet.java |  33 ++--
 5 files changed, 315 insertions(+), 77 deletions(-)

commit b028800a585a1b9fdd8110e3a03ec3c630e75cd6
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jun 6 13:59:20 2018 -0700

    HDDS-123:ContainerSet class to manage ContainerMap. Contributed by Bharat Viswanadham

 .../ozone/container/common/impl/ContainerData.java |  38 ++++
 .../ozone/container/common/impl/ContainerSet.java  | 239 +++++++++++++++++++++
 .../container/common/impl/KeyValueContainer.java   |   8 +-
 .../container/common/impl/TestContainerSet.java    | 169 +++++++++++++++
 4 files changed, 452 insertions(+), 2 deletions(-)

commit 3a2d73afcac8ffe12a280dee1d1d6bd8565d4f28
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jun 6 08:39:18 2018 -0700

    HDDS-107. TestOzoneConfigurationFields is failing.
    Contributed by LiXin Ge & Mukul Kumar Singh.

 .../src/main/java/org/apache/hadoop/hdds/conf/HddsConfServlet.java   | 5 ++++-
 .../src/main/java/org/apache/hadoop/ozone/OzoneConfigKeys.java       | 2 ++
 .../java/org/apache/hadoop/ozone/TestOzoneConfigurationFields.java   | 1 +
 3 files changed, 7 insertions(+), 1 deletion(-)

commit b59ab1173944597ddcab425bbe3bf7476bf6a7e1
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Jun 5 10:31:42 2018 -0700

    HDDS-129. Support for ReportManager in Datanode.
    Contributed by Nanda Kumar.

 .../common/report/ContainerReportPublisher.java    |  70 ++++++++++
 .../common/report/NodeReportPublisher.java         |  40 ++++++
 .../container/common/report/ReportManager.java     | 147 +++++++++++++++++++++
 .../container/common/report/ReportPublisher.java   |  96 ++++++++++++++
 .../common/report/ReportPublisherFactory.java      |  71 ++++++++++
 .../container/common/report/package-info.java      |  80 +++++++++++
 .../common/statemachine/DatanodeStateMachine.java  |  18 ++-
 .../common/statemachine/StateContext.java          |  59 +++++++--
 .../states/endpoint/HeartbeatEndpointTask.java     |  24 +++-
 .../container/common/report/TestReportManager.java |  52 ++++++++
 .../common/report/TestReportPublisher.java         | 106 +++++++++++++++
 .../common/report/TestReportPublisherFactory.java  |  68 ++++++++++
 .../container/common/report/package-info.java      |  22 +++
 13 files changed, 834 insertions(+), 19 deletions(-)

commit b82c87172788d52247140c8206c2cecc4c4800ec
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Jun 5 08:34:44 2018 -0700

    HDDS-148. Remove ContainerReportManager and ContainerReportManagerImpl. Contributed by Nanda kumar.

 .../common/impl/ContainerManagerImpl.java          |  8 ---
 .../common/impl/ContainerReportManagerImpl.java    | 67 ----------------------
 .../common/interfaces/ContainerReportManager.java  | 30 ----------
 3 files changed, 105 deletions(-)

commit dffa66595936c1e3bad87f6dd0290f3a11975d21
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jun 4 15:28:19 2018 -0700

    Create Version File in Datanode. Contributed by Bharat Viswanadham.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   2 +
 .../org/apache/hadoop/ozone/common/Storage.java    |   6 +-
 .../container/common/DataNodeLayoutVersion.java    |  80 ++++++++++
 .../common/helpers/DatanodeVersionFile.java        | 172 +++++++++++++++++++++
 .../states/datanode/RunningDatanodeState.java      |   3 +-
 .../states/endpoint/VersionEndpointTask.java       |  71 ++++++++-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |   8 +-
 .../hadoop/ozone/protocol/VersionResponse.java     |   4 +
 .../hadoop/ozone/container/common/ScmTestMock.java |  24 +++
 .../common/TestDatanodeLayOutVersion.java          |  38 +++++
 .../container/common/TestDatanodeStateMachine.java |   3 +-
 .../common/helpers/TestDatanodeVersionFile.java    | 120 ++++++++++++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |   2 +
 .../ozone/container/common/TestEndPoint.java       | 169 +++++++++++++++++++-
 14 files changed, 688 insertions(+), 14 deletions(-)

commit 902217f4c1b48095854362c48482821b80204a3b
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Jun 4 09:51:04 2018 -0700

    HDDS-145. Freon times out because of because of wrong ratis port number in datanode details. Contributed by Mukul Kumar Singh.

 hadoop-hdds/common/src/main/java/org/apache/ratis/RatisHelper.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 37160a7e698f690e76b4638196b796bde7716976
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Jun 4 08:55:01 2018 -0700

    HDDS-126. Fix findbugs warning in MetadataKeyFilters.java. Contributed by Akira Ajisaka.

 .../src/main/java/org/apache/hadoop/utils/MetadataKeyFilters.java      | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 86e3a43fc4fb66549e7f7a4b08f8e3cb60fd1dc0
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jun 1 14:42:03 2018 -0700

    HDDS-144. Fix TestEndPoint#testHeartbeat and TestEndPoint#testRegister.
    Contributed by Shashikant Banerjee.

 .../hadoop/ozone/container/common/ScmTestMock.java | 32 ++++++++++++++++++++++
 1 file changed, 32 insertions(+)

commit f9720918492f1076e795d2dd16da240ed8f2f4a7
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jun 1 14:21:35 2018 -0700

    HDDS-142. TestMetadataStore fails on Windows.
    Contributed by  Íñigo Goiri.

 .../java/org/apache/hadoop/ozone/TestMetadataStore.java | 17 ++++++++++++++---
 1 file changed, 14 insertions(+), 3 deletions(-)

commit 5fdf48920e8abfb3ba56cd35108e2d6cf24f953c
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jun 1 12:54:47 2018 -0700

    HDDS-137. Cleanup Hdds-ozone CheckStyle Issues.
    Contributed by Anu Engineer.

 .../container/common/helpers/ContainerData.java    |  3 ++-
 .../common/impl/ContainerManagerImpl.java          |  8 +++++---
 .../container/common/impl/KeyManagerImpl.java      | 12 ++++++++----
 .../server/ratis/ContainerStateMachine.java        |  3 ++-
 .../container/common/utils/ContainerCache.java     |  6 ++++--
 .../ozone/container/common/package-info.java       | 22 ++++++++++++++++++++++
 6 files changed, 43 insertions(+), 11 deletions(-)

commit d2f1c9fb0eaadcb80c0befa43f613da3387bbc4c
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 31 11:28:42 2018 -0700

    HDDS-112. OzoneShell should support commands with url without scheme.
    Contributed by Lokesh Jain.

 .../robotframework/acceptance/ozone-shell.robot    | 21 ++++++++++
 .../apache/hadoop/ozone/web/ozShell/Handler.java   | 49 +++++++++++++++++++++-
 2 files changed, 68 insertions(+), 2 deletions(-)

commit 6f02cd6e614e83a75cb4496d7d9c348abac34db1
Merge: baa03303 1e040f1f
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu May 31 11:45:01 2018 -0700

    Merge remote-tracking branch 'apache-commit/trunk' into HDDS-48

commit baa03303677e40578108489e551460d4ac063e13
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu May 31 10:29:25 2018 -0700

    HDDS-116. Implement VolumeSet to manage disk volumes. Contributed by Hanisha Koneru.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   1 +
 .../impl/RoundRobinVolumeChoosingPolicy.java       |  82 +++++++
 .../ozone/container/common/impl/VolumeInfo.java    | 125 +++++++++++
 .../ozone/container/common/impl/VolumeSet.java     | 250 +++++++++++++++++++++
 .../common/interfaces/VolumeChoosingPolicy.java    |  46 ++++
 .../impl/TestRoundRobinVolumeChoosingPolicy.java   | 100 +++++++++
 .../container/common/interfaces/TestVolumeSet.java | 138 ++++++++++++
 7 files changed, 742 insertions(+)

commit 1e040f1f72d5253e2753f2491ec86758f0c7fcfe
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 30 13:15:44 2018 -0700

    HDDS-128. Support for DN to SCM signaling.
    Contributed by Nanda Kumar.

 .../proto/StorageContainerDatanodeProtocol.proto   | 28 ++++++++++++++++------
 1 file changed, 21 insertions(+), 7 deletions(-)

commit 824a5fdcda624745405052d09ec49d7693eac4df
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri May 25 15:11:19 2018 -0700

    HDDS-90: Create ContainerData, Container classes. Contributed by Bharat Viswanadham

 .../src/main/proto/DatanodeContainerProtocol.proto |   8 +
 .../container/common/impl/ChunkLayOutVersion.java  |  80 +++++++
 .../ozone/container/common/impl/ContainerData.java | 234 +++++++++++++++++++++
 .../container/common/impl/KeyValueContainer.java   |  74 +++++++
 .../common/impl/KeyValueContainerData.java         | 159 ++++++++++++++
 .../container/common/interfaces/Container.java     |  75 +++++++
 .../container/common/TestChunkLayOutVersion.java   |  42 ++++
 .../common/TestKeyValueContainerData.java          | 119 +++++++++++
 8 files changed, 791 insertions(+)

commit 4488dbd6a06a39be8720f723f0ff892b3a318ed2
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 24 18:25:35 2018 -0700

    HDDS-92. Use DBType during parsing datanode .container files. Contributed by Bharat Viswanadham.

 .../apache/hadoop/utils/MetadataStoreBuilder.java  | 40 ++++++++++++---
 .../hadoop/{ozone => utils}/TestMetadataStore.java | 57 ++++++++++++++++++++--
 .../ozone/container/common/helpers/KeyUtils.java   |  3 +-
 .../container/common/utils/ContainerCache.java     |  6 ++-
 4 files changed, 93 insertions(+), 13 deletions(-)

commit 3d2788fcc4a94883aa42e0db4cd62c013468092d
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 30 08:52:07 2018 -0700

    HDDS-88. Create separate message structure to represent ports in DatanodeDetails.
    Contributed by Nanda Kumar.

 .../org/apache/hadoop/hdds/scm/XceiverClient.java  |   2 +-
 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |   2 +-
 .../hadoop/hdds/protocol/DatanodeDetails.java      | 219 ++++++++++++---------
 .../main/java/org/apache/ratis/RatisHelper.java    |   6 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |  10 +-
 .../common/transport/server/XceiverServer.java     |   3 +-
 .../common/transport/server/XceiverServerGrpc.java |   3 +-
 .../transport/server/ratis/XceiverServerRatis.java |   3 +-
 .../container/common/TestDatanodeStateMachine.java |  16 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  12 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  18 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  17 +-
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |   3 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   8 +-
 .../ozone/container/ContainerTestHelper.java       |  12 +-
 .../container/metrics/TestContainerMetrics.java    |   3 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |  11 +-
 .../container/server/TestContainerServer.java      |   8 +-
 .../ksm/TestKeySpaceManagerRestInterface.java      |   5 +-
 .../ozone/web/TestDistributedOzoneVolumes.java     |   4 +-
 .../hadoop/ozone/web/TestLocalOzoneVolumes.java    |   4 +-
 .../hadoop/ozone/web/TestOzoneWebAccess.java       |   4 +-
 .../hadoop/ozone/web/client/TestOzoneClient.java   |   4 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java |   2 -
 .../hadoop/ozone/web/client/TestVolumeRatis.java   |   4 +-
 .../hadoop/ozone/web/OzoneHddsDatanodeService.java |   5 +-
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |   4 +-
 .../apache/hadoop/ozone/genesis/GenesisUtil.java   |  12 +-
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |   6 +-
 29 files changed, 258 insertions(+), 152 deletions(-)

commit 59a1f627ae6c78e76b79b86190cd83d777d99e64
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 29 13:23:58 2018 -0700

    HDDS-114. Ozone Datanode mbean registration fails for StorageLocation.
    Contributed by Elek, Marton.

 .../common/impl/StorageLocationReport.java         | 52 +++++++++++++---------
 .../interfaces/ContainerLocationManagerMXBean.java |  4 +-
 .../interfaces/StorageLocationReportMXBean.java    | 40 +++++++++++++++++
 3 files changed, 71 insertions(+), 25 deletions(-)

commit 5641aa3f8a29966bb39cacb1745bd4d5958196f5
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 29 12:40:27 2018 -0700

    HDDS-81. Moving ContainerReport inside Datanode heartbeat.
    Contributed by Nanda Kumar.

 .../common/impl/ContainerManagerImpl.java          |  22 +-
 .../common/impl/StorageLocationReport.java         |   8 +-
 .../common/interfaces/ContainerManager.java        |   8 +-
 .../common/statemachine/DatanodeStateMachine.java  |   7 +-
 .../common/statemachine/StateContext.java          |  16 +-
 ...dler.java => CloseContainerCommandHandler.java} |  20 +-
 .../commandhandler/CommandDispatcher.java          |   5 +-
 .../commandhandler/CommandHandler.java             |   8 +-
 .../commandhandler/DeleteBlocksCommandHandler.java |  12 +-
 .../states/endpoint/HeartbeatEndpointTask.java     |  30 ++-
 .../states/endpoint/RegisterEndpointTask.java      |  12 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  10 +-
 .../protocol/StorageContainerDatanodeProtocol.java |  30 +--
 .../protocol/StorageContainerNodeProtocol.java     |  15 +-
 .../protocol/commands/CloseContainerCommand.java   |  18 +-
 .../protocol/commands/DeleteBlocksCommand.java     |  18 +-
 .../ozone/protocol/commands/RegisteredCommand.java |  26 +-
 .../ozone/protocol/commands/ReregisterCommand.java |  16 +-
 .../hadoop/ozone/protocol/commands/SCMCommand.java |   4 +-
 ...inerDatanodeProtocolClientSideTranslatorPB.java |  50 +---
 ...inerDatanodeProtocolServerSideTranslatorPB.java |  53 ++--
 .../proto/StorageContainerDatanodeProtocol.proto   | 256 +++++++++----------
 .../hadoop/ozone/container/common/ScmTestMock.java |  78 ++----
 .../hdds/scm/container/ContainerMapping.java       |  10 +-
 .../apache/hadoop/hdds/scm/container/Mapping.java  |   6 +-
 .../container/replication/ContainerSupervisor.java |  13 +-
 .../scm/container/replication/InProgressPool.java  |  15 +-
 .../hadoop/hdds/scm/node/HeartbeatQueueItem.java   |  14 +-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  58 ++---
 .../hdds/scm/node/SCMNodeStorageStatMap.java       |  14 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 195 +++++++--------
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  19 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  26 +-
 .../hdds/scm/container/TestContainerMapping.java   |  24 +-
 .../scm/container/closer/TestContainerCloser.java  |  12 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   6 +-
 .../hadoop/hdds/scm/node/TestNodeManager.java      |  83 +++----
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   |  16 +-
 .../ozone/container/common/TestEndPoint.java       | 113 ++-------
 .../replication/TestContainerSupervisor.java       | 275 ---------------------
 .../testutils/ReplicationDatanodeStateManager.java | 101 --------
 .../testutils/ReplicationNodeManagerMock.java      |  14 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  11 +-
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |  68 ++---
 44 files changed, 603 insertions(+), 1212 deletions(-)

commit e53ccfa73ca2ea8fc50143cd158838b62a1d712d
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 29 09:54:06 2018 -0700

    HDDS-125. Cleanup HDDS CheckStyle issues.
    Contributed by Anu Engineer.

 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  1 -
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |  2 +-
 .../hdds/scm/container/ContainerMapping.java       |  6 +-
 .../hdds/scm/container/ContainerStateManager.java  | 24 ++++----
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  9 ++-
 .../hdds/scm/node/SCMNodeStorageStatMXBean.java    |  4 +-
 .../hdds/scm/node/SCMNodeStorageStatMap.java       | 19 ++++---
 .../hadoop/hdds/scm/node/StorageReportResult.java  |  8 +--
 .../hdds/scm/node/states/Node2ContainerMap.java    |  2 +-
 .../hdds/scm/pipelines/PipelineSelector.java       |  5 +-
 .../hdds/scm/server/StorageContainerManager.java   |  3 +-
 .../scm/TestStorageContainerManagerHttpServer.java |  1 -
 .../apache/hadoop/hdds/scm/block/package-info.java | 23 ++++++++
 .../hdds/scm/container/TestContainerMapping.java   | 12 ++--
 .../hdds/scm/container/closer/package-info.java    | 22 ++++++++
 .../hadoop/hdds/scm/container/package-info.java    | 22 ++++++++
 .../hdds/scm/container/states/package-info.java    | 22 ++++++++
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 66 +++++++++++-----------
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   | 32 ++++++-----
 .../apache/hadoop/hdds/scm/node/package-info.java  | 22 ++++++++
 .../ozone/container/common/TestEndPoint.java       |  2 -
 .../ozone/container/common/package-info.java       | 22 ++++++++
 .../ozone/container/placement/package-info.java    | 22 ++++++++
 .../replication/TestContainerSupervisor.java       |  7 ++-
 24 files changed, 263 insertions(+), 95 deletions(-)

commit 0752f42661e647f12ee8b68af20264c6a37e6eca
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 26 11:06:22 2018 -0700

    HDDS-78. Add per volume level storage stats in SCM.
    Contributed by  Shashikant Banerjee.

 .../container/placement/metrics/SCMNodeStat.java   |  21 --
 .../hdds/scm/node/SCMNodeStorageStatMXBean.java    |   8 +
 .../hdds/scm/node/SCMNodeStorageStatMap.java       | 230 ++++++++++++++-------
 .../hadoop/hdds/scm/node/StorageReportResult.java  |  87 ++++++++
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   | 141 +++++++++----
 5 files changed, 356 insertions(+), 131 deletions(-)

commit 5ddb4217022c149536eb69ca24d3d524498622d9
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 25 15:40:46 2018 -0700

    HDDS-113. Rest and Rpc Client should verify resource name using HddsClientUtils.
    Contributed by Lokesh Jain.

 .../hadoop/hdds/scm/client/HddsClientUtils.java    | 23 ++++++++++
 .../apache/hadoop/ozone/client/ObjectStore.java    |  9 ----
 .../apache/hadoop/ozone/client/OzoneBucket.java    | 24 +---------
 .../apache/hadoop/ozone/client/OzoneVolume.java    | 18 +-------
 .../hadoop/ozone/client/rest/RestClient.java       | 52 +++++++++-------------
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 46 ++++++++-----------
 6 files changed, 64 insertions(+), 108 deletions(-)

commit cce23010b05651f31b410951e5d55131ef94dcf6
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 25 13:06:14 2018 -0700

    HDDS-96. Add an option in ozone script to generate a site file with minimally required ozone configs.
    Contributed by Dinesh Chitlangia.

 .../hadoop/hdds/conf/OzoneConfiguration.java       |   6 +-
 hadoop-ozone/common/src/main/bin/ozone             |   4 +
 .../TestGenerateOzoneRequiredConfigurations.java   | 100 ++++++++++++
 .../GenerateOzoneRequiredConfigurations.java       | 174 +++++++++++++++++++++
 .../apache/hadoop/ozone/genconf/package-info.java  |  24 +++
 5 files changed, 305 insertions(+), 3 deletions(-)

commit 000e96b74805e9f654ab8ee4ab6711cb69b8fc20
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 24 11:10:30 2018 -0700

    HDDS-80. Remove SendContainerCommand from SCM. Contributed by Nanda Kumar.

 .../common/statemachine/DatanodeStateMachine.java  |   3 -
 .../commandhandler/ContainerReportHandler.java     | 114 ---------------------
 .../states/endpoint/HeartbeatEndpointTask.java     |   5 -
 .../protocol/commands/SendContainerCommand.java    |  80 ---------------
 .../proto/StorageContainerDatanodeProtocol.proto   |  16 ++-
 .../scm/container/replication/InProgressPool.java  |  57 -----------
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |   7 --
 7 files changed, 7 insertions(+), 275 deletions(-)

commit e8b8e0090e158cf5e174a8d8f18e580e300b91a9
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu May 24 15:53:42 2018 +0530

    HDDS-45. Removal of old OzoneRestClient. Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/scm/XceiverClient.java  |  22 +-
 .../hadoop/ozone/web/client/OzoneBucket.java       | 646 -----------------
 .../apache/hadoop/ozone/web/client/OzoneKey.java   |  44 --
 .../hadoop/ozone/web/client/OzoneRestClient.java   | 804 ---------------------
 .../hadoop/ozone/web/client/OzoneVolume.java       | 584 ---------------
 .../hadoop/ozone/web/client/package-info.java      |  34 -
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   3 +-
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |  14 +-
 .../ozone/web/TestOzoneRestWithMiniCluster.java    | 207 +++---
 .../hadoop/ozone/web/client/TestBuckets.java       | 193 +++--
 .../hadoop/ozone/web/client/TestBucketsRatis.java  |  15 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   | 286 +++++---
 .../hadoop/ozone/web/client/TestKeysRatis.java     |  29 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java | 285 +++-----
 .../hadoop/ozone/web/client/TestVolumeRatis.java   |  29 +-
 15 files changed, 548 insertions(+), 2647 deletions(-)

commit 8f7f401e83e567c5643dd2ae749a9bb9a1dc5621
Author: Haibo Chen <haibochen@apache.org>
Date:   Wed May 23 11:29:55 2018 -0700

    YARN-4599. Set OOM control for memory cgroups. (Miklos Szegedi via Haibo Chen)

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit 317fc932e1e61aa2c05df1ade79c29c3e92fc577
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 23 09:29:35 2018 -0700

    HDDS-44. Ozone: start-ozone.sh fail to start datanode because of incomplete classpaths.
    Contributed by Mukul Kumar Singh.

 hadoop-ozone/common/src/main/bin/start-ozone.sh | 116 +++++++++++++++++++++++-
 1 file changed, 111 insertions(+), 5 deletions(-)

commit 852ba730cc54be1eeb10d7c7acbdb17f5d4fca12
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 23 14:15:35 2018 +0530

    HDDS-85. Send Container State Info while sending the container report from Datanode to SCM. Contributed by Shashikant Banerjee.

 .../src/main/proto/DatanodeContainerProtocol.proto |  1 +
 .../container/common/helpers/ContainerData.java    |  8 ++++
 .../common/impl/ContainerManagerImpl.java          | 45 ++++++++++++++++++++--
 .../common/interfaces/ContainerManager.java        |  2 +-
 .../commandhandler/ContainerReportHandler.java     |  4 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  4 +-
 .../common/impl/TestContainerPersistence.java      |  2 +-
 7 files changed, 57 insertions(+), 9 deletions(-)

commit 64fef68b29907c42f64883a72e3e8df50803de4a
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 16:51:43 2018 -0700

    HDDS-49. Standalone protocol should use grpc in place of netty.
    Contributed by Mukul Kumar Singh.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 217 +++++++++++++++++++++
 .../hadoop/hdds/scm/XceiverClientManager.java      |  21 +-
 .../hadoop/hdds/scm/XceiverClientMetrics.java      |   8 +-
 .../common/dev-support/findbugsExcludeFile.xml     |   3 +
 hadoop-hdds/common/pom.xml                         |  17 ++
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   4 +
 .../src/main/proto/DatanodeContainerProtocol.proto |   7 +
 .../common/src/main/resources/ozone-default.xml    |   9 +
 .../container/common/helpers/ContainerMetrics.java |  14 +-
 .../transport/server/GrpcXceiverService.java       |  82 ++++++++
 .../common/transport/server/XceiverServerGrpc.java | 105 ++++++++++
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  11 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  10 +-
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  67 +++++--
 14 files changed, 539 insertions(+), 36 deletions(-)

commit 5216398abb7b83c70d2106540e99c164a337585d
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue May 22 15:46:59 2018 -0700

    HDDS-79. Remove ReportState from SCMHeartbeatRequestProto. Contributed by Nanda kumar.

 .../common/impl/ContainerManagerImpl.java          | 14 +---
 .../common/impl/ContainerReportManagerImpl.java    | 43 +++----------
 .../common/interfaces/ContainerManager.java        |  7 --
 .../common/interfaces/ContainerReportManager.java  |  8 +--
 .../common/statemachine/DatanodeStateMachine.java  |  1 -
 .../common/statemachine/StateContext.java          | 38 -----------
 .../states/endpoint/HeartbeatEndpointTask.java     |  3 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  9 ---
 .../protocol/StorageContainerDatanodeProtocol.java |  5 +-
 .../protocol/StorageContainerNodeProtocol.java     |  5 +-
 ...inerDatanodeProtocolClientSideTranslatorPB.java |  5 +-
 ...inerDatanodeProtocolServerSideTranslatorPB.java |  3 +-
 .../proto/StorageContainerDatanodeProtocol.proto   | 39 ------------
 .../hadoop/ozone/container/common/ScmTestMock.java | 13 +---
 .../container/common/TestDatanodeStateMachine.java |  7 --
 .../hadoop/hdds/scm/node/HeartbeatQueueItem.java   | 23 +------
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 30 +--------
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  6 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  5 +-
 .../hdds/scm/node/TestContainerPlacement.java      |  9 +--
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 74 ++++++++++------------
 .../ozone/container/common/TestEndPoint.java       | 11 +---
 .../testutils/ReplicationNodeManagerMock.java      |  5 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  5 +-
 24 files changed, 63 insertions(+), 305 deletions(-)

commit 47e87f4421e49008c4115b2c314dea32c91954a8
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 14:29:06 2018 -0700

    HDDS-89. Addendum Patch-1. Create ozone specific inline documentation as part of the build.
    Contributed by Elek, Marton.

 hadoop-ozone/docs/dev-support/bin/generate-site.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3d2c9f20b458826a8d461078445c70f198747add
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 11:38:11 2018 -0700

    HDDS-74. Rename name of properties related to configuration tags.
    Contributed by Sandeep Nemuri.

 .../src/main/java/org/apache/hadoop/hdds/conf/HddsConfServlet.java    | 2 +-
 hadoop-hdds/common/src/main/resources/ozone-default.xml               | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 9fc335e8ef1a991854f44eae9633e851c618f12b
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 10:49:10 2018 -0700

    HDDS-89. Create ozone specific inline documentation as part of the build.
    Contributed by Elek, Marton.

 .gitignore                                         |   2 +
 hadoop-ozone/docs/README.md                        |  52 ++++
 hadoop-ozone/docs/archetypes/default.md            |  17 ++
 hadoop-ozone/docs/config.toml                      |  23 ++
 .../content/CommandShell.md}                       |   5 +-
 .../content/GettingStarted.md}                     |   7 +-
 .../OzoneMetrics.md => docs/content/Metrics.md}    |   6 +-
 .../markdown/OzoneRest.md => docs/content/Rest.md} |   4 +
 .../OzoneOverview.md => docs/content/_index.md}    |  48 ++--
 hadoop-ozone/docs/dev-support/bin/generate-site.sh |  29 +++
 hadoop-ozone/docs/pom.xml                          |  58 +++++
 hadoop-ozone/docs/static/OzoneOverview.png         | Bin 0 -> 41729 bytes
 hadoop-ozone/docs/static/OzoneOverview.svg         | 225 ++++++++++++++++
 hadoop-ozone/docs/static/SCMBlockDiagram.png       | Bin 0 -> 14714 bytes
 .../themes/ozonedoc/layouts/_default/single.html   |  32 +++
 .../docs/themes/ozonedoc/layouts/index.html        |  21 ++
 .../themes/ozonedoc/layouts/partials/footer.html   |  19 ++
 .../themes/ozonedoc/layouts/partials/header.html   |  31 +++
 .../themes/ozonedoc/layouts/partials/navbar.html   |  33 +++
 .../themes/ozonedoc/layouts/partials/sidebar.html  |  43 +++
 .../ozonedoc/static/css/bootstrap-theme.min.css    |   6 +
 .../static/css/bootstrap-theme.min.css.map         |   1 +
 .../themes/ozonedoc/static/css/bootstrap.min.css   |   6 +
 .../ozonedoc/static/css/bootstrap.min.css.map      |   1 +
 .../docs/themes/ozonedoc/static/css/ozonedoc.css   | 128 +++++++++
 .../static/fonts/glyphicons-halflings-regular.eot  | Bin 0 -> 20127 bytes
 .../static/fonts/glyphicons-halflings-regular.svg  | 288 +++++++++++++++++++++
 .../static/fonts/glyphicons-halflings-regular.ttf  | Bin 0 -> 45404 bytes
 .../static/fonts/glyphicons-halflings-regular.woff | Bin 0 -> 23424 bytes
 .../fonts/glyphicons-halflings-regular.woff2       | Bin 0 -> 18028 bytes
 .../themes/ozonedoc/static/js/bootstrap.min.js     |   7 +
 .../docs/themes/ozonedoc/static/js/jquery.min.js   |   5 +
 .../docs/themes/ozonedoc/static/js/ozonedoc.js     |  23 ++
 hadoop-ozone/docs/themes/ozonedoc/theme.toml       |   2 +
 hadoop-ozone/pom.xml                               |   1 +
 35 files changed, 1103 insertions(+), 20 deletions(-)

commit 76adb0a255a1b71274c49f0c312216062683004b
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon May 21 16:09:24 2018 -0700

    HDDS-82. Merge ContainerData and ContainerStatus classes. Contributed by Bharat Viswanadham.

 .../src/main/proto/DatanodeContainerProtocol.proto |   1 +
 .../container/common/helpers/ContainerData.java    | 163 +++++++++++++++-
 .../common/impl/ContainerManagerImpl.java          | 144 +++++++-------
 .../container/common/impl/ContainerStatus.java     | 217 ---------------------
 .../RandomContainerDeletionChoosingPolicy.java     |  10 +-
 ...TopNOrderedContainerDeletionChoosingPolicy.java |  20 +-
 .../ContainerDeletionChoosingPolicy.java           |   3 +-
 .../common/impl/TestContainerPersistence.java      |  19 +-
 8 files changed, 257 insertions(+), 320 deletions(-)

commit 4f1c9b7e2ca2c43a8f2b5a98c5f8e124ccb2ea3e
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon May 21 22:57:08 2018 +0530

    HDDS-71. Send ContainerType to Datanode during container creation. Contributed by Bharat Viswanadham.

 .../hdds/scm/storage/ContainerProtocolCalls.java   |  2 ++
 .../src/main/proto/DatanodeContainerProtocol.proto |  6 ++++
 .../container/common/helpers/ContainerData.java    | 36 ++++++++++++++++++++++
 .../common/impl/ContainerManagerImpl.java          |  7 +++++
 4 files changed, 51 insertions(+)

commit 667a40894f9e4de19bf279c58a9bdd13eee07bee
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon May 21 08:01:51 2018 -0700

    HDDS-87:Fix test failures with uninitialized storageLocation field in storageReport Contributed by Shashikant Banerjee

 .../java/org/apache/hadoop/hdds/scm/TestUtils.java | 35 ++++++++++---
 .../hdds/scm/node/TestContainerPlacement.java      | 13 ++---
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 58 +++++++++++-----------
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   | 22 ++++----
 .../ozone/container/common/TestEndPoint.java       | 32 ++++++------
 5 files changed, 92 insertions(+), 68 deletions(-)

commit caa0fdd5d4d19a068d00ec1a50da240c5b5be86f
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon May 21 19:06:26 2018 +0530

    HDDS-57. TestContainerCloser#testRepeatedClose and TestContainerCloser#testCleanupThreadRuns fail consistently. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/container/closer/TestContainerCloser.java   | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 13d3919edcc6877310539dd4371c2486f9b07cfd
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri May 18 14:08:46 2018 +0530

    HDDS-76. Modify SCMStorageReportProto to include the data dir paths as well as the StorageType info. Contributed by Shashikant Banerjee.

 .../common/impl/ContainerLocationManagerImpl.java  |  18 +-
 .../common/impl/ContainerManagerImpl.java          |   9 +-
 .../common/impl/ContainerStorageLocation.java      |   9 +
 .../common/impl/StorageLocationReport.java         | 235 ++++++++++++++++++++-
 .../proto/StorageContainerDatanodeProtocol.proto   |  21 +-
 5 files changed, 275 insertions(+), 17 deletions(-)

commit 90d077f36b6422d647bccfc892e3b208aad9becf
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 17 16:13:28 2018 -0700

    HDDS-38. Add SCMNodeStorage map in SCM class to store storage statistics per Datanode.
    Contributed by Shashikant Banerjee.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  10 +
 .../common/src/main/resources/ozone-default.xml    |  19 ++
 .../container/placement/metrics/SCMNodeStat.java   |  21 ++
 .../hdds/scm/node/SCMNodeStorageStatMXBean.java    |  69 +++++
 .../hdds/scm/node/SCMNodeStorageStatMap.java       | 277 +++++++++++++++++++++
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   | 188 ++++++++++++++
 6 files changed, 584 insertions(+)

commit b7636d256a6ce990711a0b74acf1781f554f9ca9
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 17 14:58:09 2018 -0700

    HDDS-73. Add acceptance tests for Ozone Shell.
    Contributed by Lokesh Jain.

 .../acceptance-test/src/test/compose/docker-config |   1 +
 .../robotframework/acceptance/ozone-shell.robot    | 235 +++++++++++++++++++++
 .../src/test/robotframework/acceptance/ozone.robot |  32 ---
 3 files changed, 236 insertions(+), 32 deletions(-)

commit ffba597585a2db6410ff5bd2b31901cdc07ac558
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 17 08:52:00 2018 -0700

    HDDS-3. Send NodeReport and ContainerReport when datanodes register. Contributed by Bharat Viswanadham.

 .../states/datanode/RunningDatanodeState.java      |  1 +
 .../states/endpoint/RegisterEndpointTask.java      | 37 +++++++++++--
 .../protocol/StorageContainerDatanodeProtocol.java |  8 +--
 .../protocol/StorageContainerNodeProtocol.java     |  4 +-
 ...inerDatanodeProtocolClientSideTranslatorPB.java |  8 ++-
 ...inerDatanodeProtocolServerSideTranslatorPB.java |  9 +++-
 .../proto/StorageContainerDatanodeProtocol.proto   |  2 +
 .../hadoop/ozone/container/common/ScmTestMock.java | 60 +++++++++++++++++++---
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  6 ++-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 16 ++++--
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java | 23 ++++++++-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  4 +-
 .../hadoop/hdds/scm/node/TestNodeManager.java      |  3 +-
 .../ozone/container/common/TestEndPoint.java       | 32 +++++++++---
 .../testutils/ReplicationNodeManagerMock.java      |  5 +-
 15 files changed, 186 insertions(+), 32 deletions(-)

commit e32b34b8f8f6cd477b5fd9b9787dfd2a4673265f
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 17 08:31:44 2018 -0700

    HDDS-77. Key replication factor and type should be stored per key by Ozone Manager. Contributed by Mukul Kumar Singh.

 .../hadoop/ozone/ksm/helpers/KsmKeyInfo.java       | 36 ++++++++++++++++++++--
 ...SpaceManagerProtocolClientSideTranslatorPB.java |  2 --
 .../src/main/proto/KeySpaceManagerProtocol.proto   | 10 +++---
 .../apache/hadoop/ozone/ksm/KeyManagerImpl.java    | 19 +++---------
 ...SpaceManagerProtocolServerSideTranslatorPB.java |  6 ----
 5 files changed, 44 insertions(+), 29 deletions(-)

commit 3dd9810143056f499e3b8fe8d2d498a8694af963
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon May 14 22:25:03 2018 +0530

    HDDS-19. Update ozone to latest ratis snapshot build (0.1.1-alpha-d7d7061-SNAPSHOT). Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  | 13 +++++++++
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   | 11 ++++++++
 .../common/src/main/resources/ozone-default.xml    | 12 ++++++++
 .../transport/server/ratis/XceiverServerRatis.java | 33 ++++++++++++++++++++--
 4 files changed, 67 insertions(+), 2 deletions(-)

commit 1b5319d00c0a6845fbd0421f8053e2d2b196008e
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon May 14 09:09:25 2018 -0700

    HDDS-29. Fix TestStorageContainerManager#testRpcPermission. Contributed by  Mukul Kumar Singh.

 .../hdds/scm/server/SCMClientProtocolServer.java   | 15 ++++++++++--
 .../hdds/scm/server/StorageContainerManager.java   |  9 +-------
 .../hadoop/ozone/TestStorageContainerManager.java  | 27 +++++++++++-----------
 3 files changed, 28 insertions(+), 23 deletions(-)

commit 2c8b27d15379294b179e3c0e3da2c599150d8be7
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 13:37:34 2018 -0700

    HDDS-51. Fix TestDeletedBlockLog#testDeletedBlockTransactions.
    Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/block/TestDeletedBlockLog.java  | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 5c2ff223b1b7483a06411229e588084520ea1451
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 10:18:53 2018 -0700

    HDDS-32. Fix TestContainerDeletionChoosingPolicy#testTopNOrderedChoosingPolicy.
    Contributed by Mukul Kumar Singh.

 .../common/impl/TestContainerDeletionChoosingPolicy.java      | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit 911dbf9734c74ad2413133e9f506863181e7a837
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 10:13:13 2018 -0700

    HDDS-53. Fix TestKey#testPutAndGetKeyWithDnRestart.
    Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/ozone/MiniOzoneClusterImpl.java    | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit 7bbbd0765c69b2ee904c01cc46bc61664722f30e
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 10:07:32 2018 -0700

    HDDS-52. Fix TestSCMCli#testInfoContainer.
    Contributed by Mukul Kumar Singh.

 .../src/test/java/org/apache/hadoop/ozone/scm/TestSCMCli.java           | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6db7a17bc36a665d8a808349c203233e1f2b98b0
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 09:57:42 2018 -0700

    HDDS-17. Add node to container map class to simplify state in SCM.
    Contributed by Anu Engineer.

 .../hadoop/hdds/scm/container/ContainerID.java     |   2 +-
 .../hdds/scm/container/states/package-info.java    |   2 +-
 .../hadoop/hdds/scm/exceptions/SCMException.java   |   4 +-
 .../hdds/scm/node/states/Node2ContainerMap.java    | 184 ++++++++++++
 .../hadoop/hdds/scm/node/states/ReportResult.java  |  86 ++++++
 .../hadoop/hdds/scm/node/states/package-info.java  |  22 ++
 .../scm/node/states/Node2ContainerMapTest.java     | 308 +++++++++++++++++++++
 .../hadoop/hdds/scm/node/states/package-info.java  |  23 ++
 .../ozone/genesis/GenesisMemoryProfiler.java       |   4 +-
 9 files changed, 631 insertions(+), 4 deletions(-)

commit ed11002772e4c057d88fa434f0aaac8b203150b8
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Sat May 12 17:40:29 2018 +0530

    HDDS-21. Add support for rename key within a bucket for rest client. Contributed by Lokesh Jain.

 .../hadoop/ozone/client/rest/RestClient.java       | 16 +++++++-
 .../hadoop/ozone/client/rest/headers/Header.java   |  2 +
 .../ozone/client/rest/TestOzoneRestClient.java     | 30 +++++++++++++++
 .../hadoop/ozone/web/handlers/KeyHandler.java      | 45 ++++++++++++++++++++++
 .../apache/hadoop/ozone/web/interfaces/Keys.java   | 31 +++++++++++++++
 5 files changed, 123 insertions(+), 1 deletion(-)

commit 6a29c69f42a68777f7d605bb852f540ff8a3f406
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 11 13:52:05 2018 -0700

    HDDS-40. Separating packaging of Ozone/HDDS from the main Hadoop.
    Contributed by Elek, Marton.

 .gitignore                                         |  5 +++
 hadoop-ozone/acceptance-test/README.md             | 22 +++++++++----
 .../acceptance-test/dev-support/bin/robot-all.sh   | 18 ++++++++++
 .../acceptance-test/dev-support/bin/robot.sh       | 38 ++++++++++++++++++++++
 hadoop-ozone/acceptance-test/pom.xml               | 29 +----------------
 hadoop-ozone/acceptance-test/src/test/compose/.env |  2 +-
 .../src/test/compose/docker-compose.yaml           |  8 ++---
 .../src/test/robotframework/acceptance/ozone.robot |  7 ++--
 8 files changed, 86 insertions(+), 43 deletions(-)

commit cb0ba02cb6dfe454a025ab9733e194a3f359cbc8
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 11 11:35:21 2018 -0700

    HDDS-25. Simple async event processing for SCM.
    Contributed by Elek, Marton.

 .../apache/hadoop/hdds/server/events/Event.java    |  42 ++++
 .../hadoop/hdds/server/events/EventExecutor.java   |  68 +++++++
 .../hadoop/hdds/server/events/EventHandler.java    |  33 ++++
 .../hadoop/hdds/server/events/EventPublisher.java  |  28 +++
 .../hadoop/hdds/server/events/EventQueue.java      | 213 +++++++++++++++++++++
 .../hdds/server/events/SingleThreadExecutor.java   | 103 ++++++++++
 .../hadoop/hdds/server/events/TypedEvent.java      |  51 +++++
 .../hadoop/hdds/server/events/package-info.java    |  23 +++
 .../hadoop/hdds/server/events/TestEventQueue.java  | 113 +++++++++++
 .../hdds/server/events/TestEventQueueChain.java    |  79 ++++++++
 10 files changed, 753 insertions(+)

commit 06d8033538a99d8ee44a8947d2d7b01d0176a797
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 11 11:08:45 2018 -0700

    HDDS-39. Ozone: Compile Ozone/HDFS/Cblock protobuf files with proto3 compiler using maven protoc plugin.
    Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/XceiverClient.java  | 16 +++----
 .../hadoop/hdds/scm/XceiverClientHandler.java      | 10 ++---
 .../hadoop/hdds/scm/XceiverClientInitializer.java  | 18 ++++----
 .../hadoop/hdds/scm/XceiverClientMetrics.java      |  2 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 18 ++++----
 .../hdds/scm/client/ContainerOperationClient.java  |  5 ++-
 .../hadoop/hdds/scm/storage/ChunkInputStream.java  |  6 +--
 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |  8 ++--
 hadoop-hdds/common/pom.xml                         | 52 +++++++++++++++++++++-
 .../org/apache/hadoop/hdds/client/BlockID.java     |  2 +-
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |  4 +-
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |  3 +-
 .../common/helpers/StorageContainerException.java  |  2 +-
 .../hdds/scm/storage/ContainerProtocolCalls.java   | 40 +++++++++--------
 .../ozone/container/common/helpers/ChunkInfo.java  |  2 +-
 .../ozone/container/common/helpers/KeyData.java    |  2 +-
 .../com/google/protobuf/ShadedProtoUtil.java       | 38 ----------------
 .../shaded/com/google/protobuf/package-info.java   | 22 ---------
 .../src/main/proto/DatanodeContainerProtocol.proto |  2 +-
 .../ozone/container/common/helpers/ChunkUtils.java | 36 +++++++--------
 .../container/common/helpers/ContainerData.java    |  4 +-
 .../container/common/helpers/ContainerMetrics.java |  2 +-
 .../container/common/helpers/ContainerUtils.java   |  6 +--
 .../ozone/container/common/helpers/FileUtils.java  |  4 +-
 .../ozone/container/common/helpers/KeyUtils.java   | 10 ++---
 .../container/common/impl/ChunkManagerImpl.java    | 10 ++---
 .../common/impl/ContainerManagerImpl.java          | 42 ++++++++---------
 .../ozone/container/common/impl/Dispatcher.java    | 26 +++++------
 .../container/common/impl/KeyManagerImpl.java      |  6 +--
 .../container/common/interfaces/ChunkManager.java  |  2 +-
 .../common/interfaces/ContainerDispatcher.java     |  4 +-
 .../background/BlockDeletingService.java           |  5 ++-
 .../common/transport/server/XceiverServer.java     | 15 ++++---
 .../transport/server/XceiverServerHandler.java     |  8 ++--
 .../transport/server/XceiverServerInitializer.java | 18 ++++----
 .../server/ratis/ContainerStateMachine.java        | 25 +++++------
 .../scm/cli/container/InfoContainerHandler.java    |  5 ++-
 .../ozone/client/io/ChunkGroupInputStream.java     |  2 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |  2 +-
 .../ozone/client/io/OzoneContainerTranslation.java |  2 +-
 .../ozone/container/ContainerTestHelper.java       | 10 ++---
 .../container/common/TestBlockDeletingService.java |  2 +-
 .../common/impl/TestContainerPersistence.java      |  6 +--
 .../container/metrics/TestContainerMetrics.java    |  8 ++--
 .../container/ozoneimpl/TestOzoneContainer.java    |  3 +-
 .../container/server/TestContainerServer.java      | 10 +++--
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |  2 +-
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java | 12 +++--
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  2 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java | 27 ++++++-----
 50 files changed, 284 insertions(+), 284 deletions(-)

commit 29d4c02ab4c8fc73f9799086fe1dab5aa4d12979
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 11 10:20:04 2018 -0700

    HDDS-47. Add acceptance tests for Ozone Shell.
    Contributed by Lokesh Jain.

 .../src/test/robotframework/acceptance/ozone.robot | 24 ++++++++++++++++++++--
 .../hadoop/ozone/client/OzoneClientUtils.java      |  1 +
 2 files changed, 23 insertions(+), 2 deletions(-)

commit 5532981a799322fcb81a3dc0f13d1dc6a38e4d3a
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu May 10 17:24:40 2018 -0700

    HDDS-43: Rename hdsl to hdds in hadoop-ozone/acceptance-test/README.md. Contributed by Sandeep Nemuri

 hadoop-ozone/acceptance-test/README.md | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 307edef75013afed4f063af13097ef73d6b00ca1
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 17:08:26 2018 -0700

    HDDS-34. Remove .meta file during creation of container
    Contributed by Bharat Viswanadham.

 .../src/main/proto/DatanodeContainerProtocol.proto |  5 ---
 .../container/common/helpers/ContainerData.java    | 27 --------------
 .../container/common/helpers/ContainerUtils.java   | 35 +++---------------
 .../common/impl/ContainerManagerImpl.java          | 42 +++-------------------
 .../scm/cli/container/InfoContainerHandler.java    |  3 --
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    |  2 +-
 6 files changed, 9 insertions(+), 105 deletions(-)

commit e2483ebef3f1406ceaf4893ebbe27a227d2f72ce
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 16:27:21 2018 -0700

    HDDS-37. Remove dependency of hadoop-hdds-common and hadoop-hdds-server-scm from hadoop-ozone/tools/pom.xml.
    Contributed by Sandeep Nemuri.

 hadoop-ozone/tools/pom.xml | 12 ------------
 1 file changed, 12 deletions(-)

commit a1eb815d6f73416be23ffbe1c7e4176ed2489f84
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 10 14:49:58 2018 -0700

    HDDS-16. Remove Pipeline from Datanode Container Protocol protobuf definition. Contributed by Mukul Kumar Singh.

 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |  4 +-
 .../org/apache/hadoop/hdds/client/BlockID.java     | 12 +++++
 .../hdds/scm/storage/ContainerProtocolCalls.java   | 12 ++---
 .../ozone/container/common/helpers/ChunkInfo.java  |  5 +-
 .../ozone/container/common/helpers/KeyData.java    |  7 ++-
 .../src/main/proto/DatanodeContainerProtocol.proto | 63 ++++++++++++++--------
 .../container/common/helpers/ContainerData.java    | 19 +++----
 .../ozone/container/common/impl/Dispatcher.java    |  5 --
 .../scm/cli/container/InfoContainerHandler.java    |  5 +-
 .../ozone/client/io/OzoneContainerTranslation.java |  2 +-
 .../ozone/container/ContainerTestHelper.java       | 10 ++--
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |  9 ++--
 12 files changed, 85 insertions(+), 68 deletions(-)

commit ac9862e60c2c3df259669325a11dc6ee0a3fb4be
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 12:43:13 2018 -0700

    HDDS-31. Fix TestSCMCli. Contributed by Lokesh Jain.

 .../container/common/helpers/ContainerInfo.java    | 26 +++++++
 .../scm/cli/container/CreateContainerHandler.java  |  8 ++-
 .../scm/cli/container/ListContainerHandler.java    |  8 +--
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    | 80 ++++++++++------------
 4 files changed, 74 insertions(+), 48 deletions(-)

commit 3fe5e35af152ebecdbd83e2779812a01d132c79f
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 11:44:14 2018 -0700

    HDDS-42. Inconsistent module names and descriptions. Contributed by Tsz Wo Nicholas Sze.

 hadoop-hdds/client/pom.xml            | 5 +++--
 hadoop-hdds/common/pom.xml            | 2 +-
 hadoop-hdds/container-service/pom.xml | 4 ++--
 hadoop-hdds/framework/pom.xml         | 4 ++--
 hadoop-hdds/pom.xml                   | 4 ++--
 hadoop-hdds/server-scm/pom.xml        | 4 ++--
 hadoop-hdds/tools/pom.xml             | 4 ++--
 hadoop-ozone/acceptance-test/pom.xml  | 4 ++--
 hadoop-ozone/common/pom.xml           | 2 +-
 hadoop-ozone/integration-test/pom.xml | 4 ++--
 hadoop-ozone/ozone-manager/pom.xml    | 4 ++--
 hadoop-ozone/pom.xml                  | 2 +-
 12 files changed, 22 insertions(+), 21 deletions(-)

commit 0c8d805fa2dfa0bfda570942c3b0e494d0274e47
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 11:28:35 2018 -0700

    HDDS-30. Fix TestContainerSQLCli. Contributed by Shashikant Banerjee.

 .../hadoop/ozone/scm/TestContainerSQLCli.java      | 23 -------
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    | 73 ++++------------------
 2 files changed, 13 insertions(+), 83 deletions(-)

commit 1b42ebbcfe0e0c0eef5f1e626a576e28fc062405
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 9 21:23:33 2018 -0700

    HDDS-18. Ozone Shell should use RestClient and RpcClient. Contributed by Lokesh Jain.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  12 +-
 .../src/test/compose/docker-compose.yaml           |   1 +
 .../src/test/robotframework/acceptance/ozone.robot |  13 +-
 .../apache/hadoop/ozone/client/ObjectStore.java    |  49 ++--
 .../apache/hadoop/ozone/client/OzoneBucket.java    |  25 +-
 .../OzoneClientException.java}                     |  10 +-
 .../hadoop/ozone/client/OzoneClientFactory.java    |   2 +-
 .../hadoop/ozone/client/OzoneClientUtils.java      |  86 ++++++
 .../apache/hadoop/ozone/client/OzoneVolume.java    |  26 +-
 .../hadoop/ozone/client/rest/RestClient.java       |   8 +-
 .../hadoop/ozone/web/client/OzoneBucket.java       |  47 ++--
 .../hadoop/ozone/web/client/OzoneRestClient.java   |  43 +--
 .../hadoop/ozone/web/client/OzoneVolume.java       |  23 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 298 ++++++++++++++-------
 .../hadoop/ozone/web/client/TestBuckets.java       |   3 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java |   3 +-
 .../apache/hadoop/ozone/web/ozShell/Handler.java   |  59 ++--
 .../web/ozShell/bucket/CreateBucketHandler.java    |  32 +--
 .../web/ozShell/bucket/DeleteBucketHandler.java    |  20 +-
 .../web/ozShell/bucket/InfoBucketHandler.java      |  25 +-
 .../web/ozShell/bucket/ListBucketHandler.java      |  51 ++--
 .../web/ozShell/bucket/UpdateBucketHandler.java    |  41 +--
 .../ozone/web/ozShell/keys/DeleteKeyHandler.java   |  26 +-
 .../ozone/web/ozShell/keys/GetKeyHandler.java      |  46 ++--
 .../ozone/web/ozShell/keys/InfoKeyHandler.java     |  31 +--
 .../ozone/web/ozShell/keys/ListKeyHandler.java     |  48 ++--
 .../ozone/web/ozShell/keys/PutKeyHandler.java      |  49 ++--
 .../web/ozShell/volume/CreateVolumeHandler.java    |  28 +-
 .../web/ozShell/volume/DeleteVolumeHandler.java    |  18 +-
 .../web/ozShell/volume/InfoVolumeHandler.java      |  38 +--
 .../web/ozShell/volume/ListVolumeHandler.java      |  58 ++--
 .../web/ozShell/volume/UpdateVolumeHandler.java    |  24 +-
 32 files changed, 735 insertions(+), 508 deletions(-)

commit c22a1181b3ec3993211f031f31a000bb84911e9b
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 9 20:20:21 2018 +0530

    HDDS-28. Ozone:Duplicate declaration in hadoop-tools/hadoop-ozone/pom.xml. Contributed by Tsz Wo Nicholas Sze.

 hadoop-ozone/tools/pom.xml | 4 ++++
 1 file changed, 4 insertions(+)

commit 35861aa3157ed1f3fec15f3cde87010584ad8e9a
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 9 19:06:07 2018 +0530

    HDDS-20. Ozone: Add support for rename key within a bucket for rpc client. Contributed by Lokesh Jain.

 .../apache/hadoop/ozone/client/OzoneBucket.java    |   8 ++
 .../ozone/client/protocol/ClientProtocol.java      |  10 ++
 .../hadoop/ozone/client/rest/RestClient.java       |   6 ++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  15 +++
 .../hadoop/ozone/ksm/helpers/KsmKeyInfo.java       |   6 +-
 .../ksm/protocol/KeySpaceManagerProtocol.java      |   9 +-
 ...SpaceManagerProtocolClientSideTranslatorPB.java |  27 +++++
 .../src/main/proto/KeySpaceManagerProtocol.proto   |  20 +++-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  44 ++++++++
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      | 115 +++++++++++++++++++++
 .../ozone/web/interfaces/StorageHandler.java       |   9 ++
 .../web/localstorage/LocalStorageHandler.java      |   6 ++
 .../web/storage/DistributedStorageHandler.java     |  11 ++
 .../org/apache/hadoop/ozone/ksm/KSMMetrics.java    |  22 ++++
 .../org/apache/hadoop/ozone/ksm/KeyManager.java    |  10 ++
 .../apache/hadoop/ozone/ksm/KeyManagerImpl.java    |  65 ++++++++++++
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |  11 ++
 .../hadoop/ozone/ksm/exceptions/KSMException.java  |   2 +
 ...SpaceManagerProtocolServerSideTranslatorPB.java |  26 +++++
 19 files changed, 418 insertions(+), 4 deletions(-)

commit 01bbe6ea48e53c44de01ffa55d09c0c2665f21e2
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 9 10:21:41 2018 +0530

    HDDS-33. Ozone : Fix the test logic in TestKeySpaceManager#testDeleteKey. Contributed by Shashikant Banerjee.

 .../java/org/apache/hadoop/ozone/ksm/TestKeySpaceManager.java    | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit fcaf8d594d5f544a8b3b8070c03a02cbaea2e7a7
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue May 8 18:11:33 2018 +0530

    HDDS-23. Remove SCMNodeAddressList from SCMRegisterRequestProto. Contributed by Nanda Kumar.

 .../container/common/states/endpoint/RegisterEndpointTask.java   | 3 +--
 .../hadoop/ozone/protocol/StorageContainerDatanodeProtocol.java  | 7 +++----
 .../StorageContainerDatanodeProtocolClientSideTranslatorPB.java  | 3 +--
 .../StorageContainerDatanodeProtocolServerSideTranslatorPB.java  | 9 +--------
 .../src/main/proto/StorageContainerDatanodeProtocol.proto        | 1 -
 .../org/apache/hadoop/ozone/container/common/ScmTestMock.java    | 4 +---
 .../apache/hadoop/hdds/scm/server/SCMDatanodeProtocolServer.java | 7 +++----
 .../org/apache/hadoop/ozone/container/common/TestEndPoint.java   | 4 +---
 8 files changed, 11 insertions(+), 27 deletions(-)

commit 440d25b21831100178426e8f4013fb9f61bd5f7f
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon May 7 18:24:00 2018 -0700

    HDDS-27. Fix TestStorageContainerManager#testBlockDeletionTra;nsactions. Contributed by Xiaoyu Yao.

 .../java/org/apache/hadoop/ozone/TestStorageContainerManager.java  | 1 -
 .../org/apache/hadoop/ozone/TestStorageContainerManagerHelper.java | 7 +++----
 2 files changed, 3 insertions(+), 5 deletions(-)

commit 5481c10372a885d9b23def13482ff690c68aabee
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon May 7 14:42:18 2018 -0700

    HDDS-1. Remove SCM Block DB. Contributed by Xiaoyu Yao.

 .../hadoop/hdds/scm/XceiverClientManager.java      |  17 +-
 .../hdds/scm/client/ContainerOperationClient.java  | 121 +++---
 .../hadoop/hdds/scm/storage/ChunkInputStream.java  |  13 +-
 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |  18 +-
 .../org/apache/hadoop/hdds/client/BlockID.java     |  59 +++
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |  46 ++-
 .../container/common/helpers/AllocatedBlock.java   |  20 +-
 .../container/common/helpers/ContainerInfo.java    |  22 +-
 .../common/helpers/DeleteBlockResult.java          |  16 +-
 .../scm/container/common/helpers/Pipeline.java     |  18 +-
 .../container/common/helpers/PipelineChannel.java  |   2 +
 .../scm/protocol/ScmBlockLocationProtocol.java     |  12 -
 .../protocol/StorageContainerLocationProtocol.java |  26 +-
 ...lockLocationProtocolClientSideTranslatorPB.java |  46 +--
 ...inerLocationProtocolClientSideTranslatorPB.java |  60 ++-
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  66 ++--
 .../org/apache/hadoop/ozone/common/BlockGroup.java |  26 +-
 .../ozone/common/DeleteBlockGroupResult.java       |  13 +-
 .../ozone/container/common/helpers/KeyData.java    |  41 +-
 ...lockLocationProtocolServerSideTranslatorPB.java |  38 +-
 ...inerLocationProtocolServerSideTranslatorPB.java |  30 +-
 .../java/org/apache/hadoop/utils/LevelDBStore.java |   4 +-
 .../apache/hadoop/utils/MetadataKeyFilters.java    |  20 +-
 .../java/org/apache/hadoop/utils/RocksDBStore.java |   1 +
 .../src/main/proto/DatanodeContainerProtocol.proto |  82 ++--
 .../src/main/proto/ScmBlockLocationProtocol.proto  |  36 +-
 .../proto/StorageContainerLocationProtocol.proto   |  16 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |  13 +-
 .../ozone/container/common/helpers/ChunkUtils.java |  20 +-
 .../container/common/helpers/ContainerData.java    |  33 +-
 .../container/common/helpers/ContainerReport.java  |  19 +-
 .../container/common/helpers/ContainerUtils.java   |  14 +-
 .../helpers/DeletedContainerBlocksSummary.java     |  19 +-
 .../ozone/container/common/helpers/FileUtils.java  |   3 +-
 .../ozone/container/common/helpers/KeyUtils.java   |   6 +-
 .../container/common/impl/ChunkManagerImpl.java    |  76 ++--
 .../common/impl/ContainerManagerImpl.java          | 210 ++++++-----
 .../ozone/container/common/impl/Dispatcher.java    | 121 +++---
 .../container/common/impl/KeyManagerImpl.java      |  66 ++--
 .../RandomContainerDeletionChoosingPolicy.java     |   4 +-
 ...TopNOrderedContainerDeletionChoosingPolicy.java |   4 +-
 .../container/common/interfaces/ChunkManager.java  |  19 +-
 .../ContainerDeletionChoosingPolicy.java           |   2 +-
 .../common/interfaces/ContainerManager.java        |  76 ++--
 .../container/common/interfaces/KeyManager.java    |  17 +-
 .../background/BlockDeletingService.java           |   8 +-
 .../commandhandler/CloseContainerHandler.java      |   9 +-
 .../commandhandler/DeleteBlocksCommandHandler.java |   9 +-
 .../states/endpoint/HeartbeatEndpointTask.java     |   2 +-
 .../server/ratis/ContainerStateMachine.java        |  21 +-
 .../container/common/utils/ContainerCache.java     |  36 +-
 .../protocol/commands/CloseContainerCommand.java   |  14 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   9 +-
 .../hadoop/ozone/container/common/ScmTestMock.java |   2 +-
 .../apache/hadoop/hdds/scm/block/BlockManager.java |  12 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 171 ++-------
 .../block/DatanodeDeletedBlockTransactions.java    |   6 +-
 .../hadoop/hdds/scm/block/DeletedBlockLog.java     |   6 +-
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |  24 +-
 .../hdds/scm/container/ContainerMapping.java       |  80 ++--
 .../hdds/scm/container/ContainerStateManager.java  |  12 +-
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  33 +-
 .../hdds/scm/container/closer/ContainerCloser.java |  16 +-
 .../scm/container/replication/InProgressPool.java  |  10 +-
 .../hadoop/hdds/scm/node/SCMNodePoolManager.java   |   2 +-
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  15 +-
 .../hdds/scm/pipelines/PipelineSelector.java       |   8 +-
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |   2 +-
 .../hdds/scm/server/SCMBlockProtocolServer.java    |  20 +-
 .../hdds/scm/server/SCMClientProtocolServer.java   |  47 +--
 .../hdds/scm/server/StorageContainerManager.java   |   9 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  34 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  56 +--
 .../hdds/scm/container/TestContainerMapping.java   |  79 ++--
 .../scm/container/closer/TestContainerCloser.java  |  25 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   9 +-
 .../ozone/container/common/TestEndPoint.java       |   7 +-
 .../replication/TestContainerSupervisor.java       |  32 +-
 .../testutils/ReplicationDatanodeStateManager.java |  11 +-
 .../scm/cli/container/CloseContainerHandler.java   |  26 +-
 .../scm/cli/container/ContainerCommandHandler.java |   1 -
 .../scm/cli/container/CreateContainerHandler.java  |  22 +-
 .../scm/cli/container/DeleteContainerHandler.java  |  26 +-
 .../scm/cli/container/InfoContainerHandler.java    |  31 +-
 .../scm/cli/container/ListContainerHandler.java    |  12 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |  25 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |  35 +-
 .../ozone/client/io/OzoneContainerTranslation.java |  11 +-
 .../ozone/ksm/helpers/KsmKeyLocationInfo.java      |  41 +-
 .../ozone/ksm/helpers/KsmKeyLocationInfoGroup.java |   2 +-
 .../apache/hadoop/ozone/web/handlers/UserArgs.java |   8 +-
 .../src/main/proto/KeySpaceManagerProtocol.proto   |  11 +-
 .../scm/container/TestContainerStateManager.java   | 124 +++---
 .../hadoop/ozone/TestContainerOperations.java      |  10 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   3 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  64 ++--
 .../ozone/TestStorageContainerManagerHelper.java   |  33 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  10 +-
 .../ozone/container/ContainerTestHelper.java       | 180 ++++-----
 .../container/common/TestBlockDeletingService.java |  25 +-
 .../impl/TestContainerDeletionChoosingPolicy.java  |  19 +-
 .../common/impl/TestContainerPersistence.java      | 419 ++++++++++-----------
 .../commandhandler/TestCloseContainerHandler.java  |  14 +-
 .../container/metrics/TestContainerMetrics.java    |  14 +-
 .../container/ozoneimpl/TestOzoneContainer.java    | 142 +++----
 .../ozoneimpl/TestOzoneContainerRatis.java         |   3 +-
 .../container/server/TestContainerServer.java      |  18 +-
 .../ozone/ksm/TestContainerReportWithKeys.java     |   8 +-
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      |   8 -
 .../hadoop/ozone/ksm/TestKsmBlockVersioning.java   |   2 +-
 .../hadoop/ozone/scm/TestAllocateContainer.java    |  24 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  40 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |  68 ++--
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    | 210 +++++------
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |   5 +-
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  86 ++---
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java |  19 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |   5 +-
 .../hadoop/ozone/ksm/KSMMetadataManagerImpl.java   |  10 +-
 .../hadoop/ozone/ksm/KeyDeletingService.java       |   3 +-
 .../apache/hadoop/ozone/ksm/KeyManagerImpl.java    |   6 +-
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |   2 +-
 .../hadoop/ozone/ksm/OpenKeyCleanupService.java    |   3 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java  |  10 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java | 170 ++++++---
 .../ozone/genesis/BenchMarkRocksDbStore.java       |  14 +-
 126 files changed, 2047 insertions(+), 2402 deletions(-)

commit 83a6a61973689816ccc85f71ad3b2de6145f007d
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 2 10:44:47 2018 -0700

    HDDS-15. Add memory profiler support to Genesis. Contributed by Anu Engineer.

 .../org/apache/hadoop/ozone/genesis/Genesis.java   |  7 ++-
 .../ozone/genesis/GenesisMemoryProfiler.java       | 59 ++++++++++++++++++++++
 2 files changed, 65 insertions(+), 1 deletion(-)

commit fc4752705d007debfce34d751b3fda4c42b6ce66
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Apr 30 21:41:10 2018 -0700

    HDDS-13. Refactor StorageContainerManager into seperate RPC endpoints. Contributed by Anu Engineer.

 .../hadoop/hdds/scm/StorageContainerManager.java   | 1290 --------------------
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |    5 +-
 .../hdds/scm/server/SCMBlockProtocolServer.java    |  222 ++++
 .../hdds/scm/server/SCMClientProtocolServer.java   |  314 +++++
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  350 ++++++
 .../hadoop/hdds/scm/{ => server}/SCMMXBean.java    |    2 +-
 .../hadoop/hdds/scm/{ => server}/SCMStorage.java   |    2 +-
 .../hdds/scm/server/StorageContainerManager.java   |  722 +++++++++++
 .../StorageContainerManagerHttpServer.java         |    3 +-
 .../hadoop/hdds/scm/server/package-info.java       |   22 +
 .../scm/TestStorageContainerManagerHttpServer.java |    7 +-
 hadoop-ozone/common/src/main/bin/ozone             |    2 +-
 .../scm/container/TestContainerStateManager.java   |   29 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   34 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   10 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |   20 +-
 .../ozone/TestStorageContainerManagerHelper.java   |    2 +-
 .../ozone/ksm/TestContainerReportWithKeys.java     |    2 +-
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      |    8 +-
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    |   13 +-
 .../org/apache/hadoop/ozone/scm/TestSCMMXBean.java |    2 +-
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |   16 +-
 22 files changed, 1716 insertions(+), 1361 deletions(-)

commit 1f787dd97f0a993ea9aab08cb3353770dcdc9441
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Apr 30 09:20:58 2018 -0700

    HDDS-11. Fix findbugs exclude rules for ozone and hdds projects. Contributed by Elek, Marton.

 .../dev-support/findbugsExcludeFile.xml             | 21 +++++++++++++++++++++
 hadoop-hdds/container-service/pom.xml               |  7 +++++++
 .../tools/dev-support/findbugsExcludeFile.xml       | 19 +++++++++++++++++++
 hadoop-ozone/tools/pom.xml                          | 14 ++++++++++++++
 4 files changed, 61 insertions(+)

commit 6b00da6fb5464444208c4a00bdf0d629a64dfbb4
Author: Ewan Higgs <ewan.higgs@wdc.com>
Date:   Fri Apr 27 19:21:37 2018 +0900

    HADOOP-14188. Remove the usage of org.mockito.internal.util.reflection.Whitebox
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 .../src/test/java/org/apache/hadoop/ozone/ksm/TestKSMMetrcis.java       | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 416999e1849f3872858bb072fdcbc7a2f5a6a4ed
Author: Owen O'Malley <omalley@apache.org>
Date:   Wed Apr 25 19:45:00 2018 -0700

    HDFS-7240 git commit fixup
    
    Signed-off-by: Owen O'Malley <omalley@apache.org>

 .../common/impl/ContainerLocationManagerImpl.java  | 150 +++++++++++++++++++++
 .../container/server/TestContainerServer.java      |   7 +-
 .../ozone/web/netty/ObjectStoreChannelHandler.java |   6 +-
 .../web/netty/ObjectStoreJerseyContainer.java      |   8 +-
 .../RequestContentObjectStoreChannelHandler.java   |   4 +-
 .../RequestDispatchObjectStoreChannelHandler.java  |   6 +-
 6 files changed, 168 insertions(+), 13 deletions(-)

commit 5962eaef65ecc561819a3211d1d02d7a595ef1a2
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Apr 17 10:26:08 2018 -0700

    HDFS-13422. Ozone: Fix whitespaces and license issues in HDFS-7240 branch. Contributed by Lokesh Jain.

 .../java/org/apache/hadoop/hdds/HddsConfigKeys.java   | 17 +++++++++++++++++
 hadoop-hdds/framework/README.md                       |  4 ++--
 hadoop-hdds/framework/pom.xml                         | 19 -------------------
 hadoop-hdds/pom.xml                                   | 19 +++++++++++++++++++
 hadoop-hdds/tools/pom.xml                             |  2 +-
 hadoop-ozone/acceptance-test/README.md                |  6 +++---
 hadoop-ozone/acceptance-test/pom.xml                  |  4 ++--
 hadoop-ozone/pom.xml                                  |  2 ++
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java    | 17 +++++++++++++++++
 .../ozone/genesis/BenchMarkMetadataStoreReads.java    | 17 +++++++++++++++++
 .../ozone/genesis/BenchMarkMetadataStoreWrites.java   | 17 +++++++++++++++++
 .../org/apache/hadoop/ozone/genesis/GenesisUtil.java  | 17 +++++++++++++++++
 12 files changed, 114 insertions(+), 27 deletions(-)

commit 5b22ce6d84b2dd592b59b371e2d54020416a00da
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Apr 16 16:17:52 2018 -0700

    HDFS-13407. Ozone: Use separated version schema for Hdds/Ozone projects. Contributed by Elek Marton.

 hadoop-hdds/client/pom.xml               | 4 ++--
 hadoop-hdds/common/pom.xml               | 4 ++--
 hadoop-hdds/container-service/pom.xml    | 4 ++--
 hadoop-hdds/framework/pom.xml            | 4 ++--
 hadoop-hdds/pom.xml                      | 2 +-
 hadoop-hdds/server-scm/pom.xml           | 4 ++--
 hadoop-hdds/tools/pom.xml                | 4 ++--
 hadoop-ozone/client/pom.xml              | 4 ++--
 hadoop-ozone/common/pom.xml              | 4 ++--
 hadoop-ozone/integration-test/pom.xml    | 4 ++--
 hadoop-ozone/objectstore-service/pom.xml | 4 ++--
 hadoop-ozone/ozone-manager/pom.xml       | 4 ++--
 hadoop-ozone/pom.xml                     | 2 +-
 hadoop-ozone/tools/pom.xml               | 4 ++--
 14 files changed, 26 insertions(+), 26 deletions(-)

commit 10241d7e8d568e226fc3dc0ff47e9919740719ec
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Apr 17 16:11:47 2018 +0530

    HDFS-13444. Ozone: Fix checkstyle issues in HDFS-7240. Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   2 +-
 .../java/org/apache/hadoop/hdds/HddsUtils.java     |   2 +-
 .../apache/hadoop/hdds/conf/HddsConfServlet.java   |  39 +++---
 .../hadoop/hdds/scm/container/package-info.java    |  18 +++
 .../hadoop/ozone/web/utils/package-info.java       |  19 +++
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java |   5 +-
 .../org/apache/hadoop/hdds/scm/package-info.java   |  19 +++
 .../apache/hadoop/ozone/HddsDatanodeService.java   |   2 +-
 .../container/common/impl/ChunkManagerImpl.java    |   2 +
 .../ozone/container/common/impl/Dispatcher.java    |   2 +-
 .../ozone/protocol/commands/RegisteredCommand.java |   8 +-
 .../hadoop/ozone/protocolPB/package-info.java      |  19 +++
 .../ozone/container/common/ContainerTestUtils.java |   2 +-
 .../org/apache/hadoop/hdds/server/ServerUtils.java |   2 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |   2 +-
 .../placement/TestContainerPlacement.java          |   4 +-
 .../hadoop/hdds/scm/cli/OzoneCommandHandler.java   |   2 +-
 .../org/apache/hadoop/hdds/scm/cli/SCMCLI.java     |   5 +-
 .../scm/cli/container/CloseContainerHandler.java   |   5 +-
 .../hadoop/ozone/client/TestHddsClientUtils.java   |   4 +-
 .../java/org/apache/hadoop/ozone/KsmUtils.java     |   2 +-
 .../apache/hadoop/ozone/freon/OzoneGetConf.java    |  18 +--
 .../scm/container/TestContainerStateManager.java   |  36 +++---
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   9 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   4 +-
 .../ozone/ksm/TestContainerReportWithKeys.java     |   7 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |   6 +-
 .../hadoop/ozone/scm/node/TestQueryNode.java       |   2 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java  | 141 +++++++++------------
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |  22 ++--
 .../ozone/genesis/BenchMarkMetadataStoreReads.java |   6 +-
 .../genesis/BenchMarkMetadataStoreWrites.java      |   4 +-
 .../ozone/genesis/BenchMarkRocksDbStore.java       |   4 +-
 .../org/apache/hadoop/ozone/genesis/Genesis.java   |   6 +-
 .../apache/hadoop/ozone/genesis/GenesisUtil.java   |   6 +-
 35 files changed, 253 insertions(+), 183 deletions(-)

commit 87db1afc41aa42e5146efc0cd0ec55b3f7883850
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Apr 16 20:18:27 2018 +0530

    HDFS-13424. Ozone: Refactor MiniOzoneClassicCluster. Contributed by Nanda Kumar.

 .../apache/hadoop/ozone/HddsDatanodeService.java   |  72 ++-
 hadoop-ozone/integration-test/pom.xml              |   6 +-
 .../scm/container/TestContainerStateManager.java   |  12 +-
 .../hadoop/ozone/MiniOzoneClassicCluster.java      | 616 ---------------------
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  | 291 +++++++++-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  | 425 ++++++++++++++
 .../apache/hadoop/ozone/MiniOzoneTestHelper.java   |  81 ---
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |  24 +-
 .../hadoop/ozone/TestContainerOperations.java      |   9 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |  27 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  34 +-
 .../ozone/TestStorageContainerManagerHelper.java   |  12 +-
 .../ozone/client/rest/TestOzoneRestClient.java     |   9 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  10 +-
 .../commandhandler/TestCloseContainerHandler.java  |  22 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |  36 +-
 .../ozoneimpl/TestOzoneContainerRatis.java         |  19 +-
 .../container/ozoneimpl/TestRatisManager.java      |  18 +-
 .../hadoop/ozone/freon/TestDataValidate.java       |   7 +-
 .../org/apache/hadoop/ozone/freon/TestFreon.java   |  10 +-
 .../ozone/ksm/TestContainerReportWithKeys.java     |  20 +-
 .../apache/hadoop/ozone/ksm/TestKSMMetrcis.java    |   5 +-
 .../org/apache/hadoop/ozone/ksm/TestKSMSQLCli.java |  27 +-
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      |   5 +-
 .../ksm/TestKeySpaceManagerRestInterface.java      |  23 +-
 .../hadoop/ozone/ksm/TestKsmBlockVersioning.java   |   5 +-
 .../ozone/ksm/TestMultipleContainerReadWrite.java  |   5 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |  21 +-
 .../hadoop/ozone/scm/TestAllocateContainer.java    |  13 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  43 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |  14 +-
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    |  21 +-
 .../org/apache/hadoop/ozone/scm/TestSCMMXBean.java |  14 +-
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |  23 +-
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  18 +-
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java |  12 +-
 .../hadoop/ozone/scm/node/TestQueryNode.java       |  19 +-
 .../ozone/web/TestDistributedOzoneVolumes.java     |  14 +-
 .../hadoop/ozone/web/TestLocalOzoneVolumes.java    |  18 +-
 .../ozone/web/TestOzoneRestWithMiniCluster.java    |  17 +-
 .../hadoop/ozone/web/TestOzoneWebAccess.java       |  14 +-
 .../hadoop/ozone/web/client/TestBuckets.java       |  14 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  32 +-
 .../hadoop/ozone/web/client/TestKeysRatis.java     |   5 +-
 .../hadoop/ozone/web/client/TestOzoneClient.java   |  16 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java |  14 +-
 .../hadoop/ozone/web/client/TestVolumeRatis.java   |  14 +-
 .../src/test/resources/log4j.properties            |  18 +
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |   6 +-
 49 files changed, 1089 insertions(+), 1121 deletions(-)

commit 35a12e04085c39e0a7b2c4ea0eecdca46727398f
Author: Nanda kumar <nanda@apache.org>
Date:   Sun Apr 15 00:02:22 2018 +0530

    HDFS-13446. Ozone: Fix OzoneFileSystem contract test failures. Contributed by Mukul Kumar Singh.

 hadoop-hdds/container-service/pom.xml              |  5 +++++
 .../common/states/datanode/InitDatanodeState.java  |  7 +++++++
 .../src/test/resources/log4j.properties            | 23 ++++++++++++++++++++++
 hadoop-hdds/server-scm/pom.xml                     |  5 +++++
 .../scm/TestStorageContainerManagerHttpServer.java |  2 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  4 ++--
 .../hadoop/hdds/scm/container/MockNodeManager.java |  2 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |  3 +++
 8 files changed, 47 insertions(+), 4 deletions(-)

commit 481948b2f534bcdde143224e0384dc0ece640f34
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Apr 13 13:42:57 2018 -0700

    HDFS-13197. Ozone: Fix ConfServlet#getOzoneTags cmd. Contributed by Ajay Kumar.

 .../apache/hadoop/hdds/conf/HddsConfServlet.java   | 181 ++++++
 .../common/src/main/resources/ozone-default.xml    |  10 +
 .../apache/hadoop/hdds/server/BaseHttpServer.java  |  10 +-
 .../src/main/resources/webapps/static/ozone.js     | 668 +++++++++++----------
 .../resources/webapps/static/templates/config.html |  28 +-
 5 files changed, 562 insertions(+), 335 deletions(-)

commit 6cc06ef2db8e286d26bac178bb7ff141fac43f20
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri Apr 13 14:13:06 2018 +0530

    HDFS-13423. Ozone: Clean-up of ozone related change from hadoop-hdfs-project. Contributed by Nanda Kumar.

 .../java/org/apache/hadoop/hdds/HddsUtils.java     | 46 ++++++++++++++++++++++
 .../apache/hadoop/ozone/HddsDatanodeService.java   |  3 +-
 .../hadoop/ozone/MiniOzoneClassicCluster.java      | 19 +--------
 .../apache/hadoop/ozone/MiniOzoneTestHelper.java   | 22 +++++++++--
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |  2 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |  8 +---
 .../org/apache/hadoop/ozone/TestOzoneHelper.java   |  3 +-
 .../ozone/TestStorageContainerManagerHelper.java   |  2 +-
 .../commandhandler/TestCloseContainerHandler.java  |  2 +-
 .../ozoneimpl/TestOzoneContainerRatis.java         |  3 +-
 .../container/ozoneimpl/TestRatisManager.java      |  3 +-
 .../ksm/TestKeySpaceManagerRestInterface.java      |  3 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |  3 +-
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    |  3 +-
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |  3 +-
 .../ozone/web/TestDistributedOzoneVolumes.java     |  4 +-
 .../hadoop/ozone/web/TestLocalOzoneVolumes.java    |  4 +-
 .../hadoop/ozone/web/TestOzoneWebAccess.java       |  3 +-
 .../hadoop/ozone/web/client/TestBuckets.java       |  3 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  4 +-
 .../hadoop/ozone/web/client/TestOzoneClient.java   |  3 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java |  3 +-
 .../ozone/web/netty/ObjectStoreRestHttpServer.java | 45 +--------------------
 23 files changed, 102 insertions(+), 92 deletions(-)

commit 4af576b1f4d061f3c96969226da2299bf3dcde74
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Apr 13 00:47:38 2018 +0530

    HDFS-13413. Ozone: ClusterId and DatanodeUuid should be marked mandatory fields in SCMRegisteredCmdResponseProto. Contributed by Shashikant Banerjee.

 .../container/common/states/endpoint/RegisterEndpointTask.java    | 8 ++++++++
 .../apache/hadoop/ozone/protocol/commands/RegisteredCommand.java  | 6 ++----
 .../src/main/proto/StorageContainerDatanodeProtocol.proto         | 4 ++--
 3 files changed, 12 insertions(+), 6 deletions(-)

commit b14f763c9846f545e70035d482af93369062a35c
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu Apr 12 21:21:44 2018 +0530

    HDFS-13414. Ozone: Update existing Ozone documentation according to the recent changes. Contributed by Elek, Marton.

 .../src/main/site/markdown/OzoneCommandShell.md    | 38 +++++++-------
 .../main/site/markdown/OzoneGettingStarted.md.vm   | 59 ++++++++++++++++------
 .../src/main/site/markdown/OzoneRest.md            | 32 ++++++------
 3 files changed, 78 insertions(+), 51 deletions(-)

commit 237e0d7d6dbac0be39f96192e551eb951fe66002
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu Apr 12 13:46:52 2018 +0530

    HDFS-13425. Ozone: Clean-up of ozone related change from hadoop-common-project. Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/scm/TestArchive.java    | 114 ---------------------
 .../container/replication/ContainerSupervisor.java |  11 +-
 2 files changed, 10 insertions(+), 115 deletions(-)

commit 2bd38f6d1497c546d86e1d2725baec542340c993
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Apr 11 18:42:16 2018 +0530

    HDFS-13415. Ozone: Remove cblock code from HDFS-7240. Contributed by Elek, Marton.

 hadoop-cblock/pom.xml                              |  61 ---
 .../server/dev-support/findbugsExcludeFile.xml     |  21 -
 hadoop-cblock/server/pom.xml                       | 159 ------
 .../org/apache/hadoop/cblock/CBlockConfigKeys.java | 222 --------
 .../org/apache/hadoop/cblock/CBlockManager.java    | 426 ---------------
 .../java/org/apache/hadoop/cblock/CblockUtils.java | 129 -----
 ...BlockServiceProtocolClientSideTranslatorPB.java | 135 -----
 .../hadoop/cblock/client/CBlockVolumeClient.java   |  83 ---
 .../apache/hadoop/cblock/client/package-info.java  |  18 -
 .../hadoop/cblock/exception/CBlockException.java   |  29 -
 .../hadoop/cblock/exception/package-info.java      |  18 -
 .../hadoop/cblock/jscsiHelper/BlockWriterTask.java | 175 ------
 ...CBlockClientProtocolClientSideTranslatorPB.java | 147 -----
 .../cblock/jscsiHelper/CBlockIStorageImpl.java     | 440 ---------------
 .../cblock/jscsiHelper/CBlockManagerHandler.java   |  50 --
 .../cblock/jscsiHelper/CBlockTargetMetrics.java    | 334 ------------
 .../cblock/jscsiHelper/CBlockTargetServer.java     | 128 -----
 .../cblock/jscsiHelper/ContainerCacheFlusher.java  | 599 ---------------------
 .../cblock/jscsiHelper/SCSITargetDaemon.java       | 132 -----
 .../cblock/jscsiHelper/cache/CacheModule.java      |  52 --
 .../cblock/jscsiHelper/cache/LogicalBlock.java     |  50 --
 .../jscsiHelper/cache/impl/AsyncBlockWriter.java   | 221 --------
 .../cache/impl/BlockBufferFlushTask.java           | 118 ----
 .../jscsiHelper/cache/impl/BlockBufferManager.java | 184 -------
 .../jscsiHelper/cache/impl/CBlockLocalCache.java   | 577 --------------------
 .../cblock/jscsiHelper/cache/impl/DiskBlock.java   |  77 ---
 .../jscsiHelper/cache/impl/SyncBlockReader.java    | 263 ---------
 .../jscsiHelper/cache/impl/package-info.java       |  18 -
 .../cblock/jscsiHelper/cache/package-info.java     |  18 -
 .../hadoop/cblock/jscsiHelper/package-info.java    |  18 -
 .../cblock/kubernetes/DynamicProvisioner.java      | 331 ------------
 .../hadoop/cblock/kubernetes/package-info.java     |  23 -
 .../hadoop/cblock/meta/ContainerDescriptor.java    | 107 ----
 .../hadoop/cblock/meta/VolumeDescriptor.java       | 269 ---------
 .../org/apache/hadoop/cblock/meta/VolumeInfo.java  |  79 ---
 .../apache/hadoop/cblock/meta/package-info.java    |  18 -
 .../org/apache/hadoop/cblock/package-info.java     |  18 -
 .../hadoop/cblock/proto/CBlockClientProtocol.java  |  38 --
 .../hadoop/cblock/proto/CBlockServiceProtocol.java |  45 --
 .../hadoop/cblock/proto/MountVolumeResponse.java   |  79 ---
 .../apache/hadoop/cblock/proto/package-info.java   |  18 -
 .../protocolPB/CBlockClientServerProtocolPB.java   |  37 --
 ...ClientServerProtocolServerSideTranslatorPB.java | 116 ----
 .../cblock/protocolPB/CBlockServiceProtocolPB.java |  35 --
 ...BlockServiceProtocolServerSideTranslatorPB.java | 159 ------
 .../hadoop/cblock/protocolPB/package-info.java     |  18 -
 .../hadoop/cblock/storage/StorageManager.java      | 427 ---------------
 .../apache/hadoop/cblock/storage/package-info.java |  18 -
 .../org/apache/hadoop/cblock/util/KeyUtil.java     |  49 --
 .../apache/hadoop/cblock/util/package-info.java    |  18 -
 .../main/proto/CBlockClientServerProtocol.proto    |  93 ----
 .../src/main/proto/CBlockServiceProtocol.proto     | 133 -----
 .../server/src/main/resources/cblock-default.xml   | 347 ------------
 .../apache/hadoop/cblock/TestBufferManager.java    | 456 ----------------
 .../cblock/TestCBlockConfigurationFields.java      |  35 --
 .../apache/hadoop/cblock/TestCBlockReadWrite.java  | 377 -------------
 .../org/apache/hadoop/cblock/TestCBlockServer.java | 212 --------
 .../hadoop/cblock/TestCBlockServerPersistence.java | 132 -----
 .../apache/hadoop/cblock/TestLocalBlockCache.java  | 444 ---------------
 .../cblock/kubernetes/TestDynamicProvisioner.java  |  74 ---
 .../hadoop/cblock/util/ContainerLookUpService.java |  73 ---
 .../hadoop/cblock/util/MockStorageClient.java      | 176 ------
 .../resources/dynamicprovisioner/expected1-pv.json |  54 --
 .../resources/dynamicprovisioner/input1-pvc.json   |  55 --
 hadoop-cblock/tools/pom.xml                        |  42 --
 .../org/apache/hadoop/cblock/cli/CBlockCli.java    | 265 ---------
 .../org/apache/hadoop/cblock/cli/package-info.java |  18 -
 .../org/apache/hadoop/cblock/TestCBlockCLI.java    | 242 ---------
 hadoop-ozone/common/src/main/bin/ozone             |  14 -
 .../common/src/main/shellprofile.d/hadoop-ozone.sh |   4 +-
 70 files changed, 1 insertion(+), 10049 deletions(-)

commit b7a2c8b5a5054c46e1395fdbd19ce9adc3767be6
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Apr 11 17:05:33 2018 +0530

    HDFS-13348. Ozone: Update IP and hostname in Datanode from SCM's response to the register call. Contributed by Shashikant Banerjee.

 .../states/endpoint/RegisterEndpointTask.java      | 34 +++++----
 .../ozone/protocol/commands/RegisteredCommand.java | 88 +++++++++++++++++-----
 .../proto/StorageContainerDatanodeProtocol.proto   |  2 +
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 19 +++--
 .../ozone/container/common/TestEndPoint.java       |  4 +-
 5 files changed, 106 insertions(+), 41 deletions(-)

commit e7529968dc7fd6c1eed706d0cc3eb9b6f3bf2b52
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Apr 11 14:36:51 2018 +0530

    HDFS-13416. Ozone: TestNodeManager tests fail. Contributed by Bharat Viswanadham.

 .../hadoop/hdds/protocol/DatanodeDetails.java      | 11 +++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  6 +--
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 51 ++++++++++------------
 3 files changed, 38 insertions(+), 30 deletions(-)

commit 2b76b07c2d0f13109a4b8d158d5eafbd211a8397
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Apr 11 14:25:38 2018 +0530

    HDFS-13324. Ozone: Remove InfoPort and InfoSecurePort from DatanodeDetails. Contributed by Shashikant Banerjee.

 .../hadoop/hdds/protocol/DatanodeDetails.java      | 88 +---------------------
 hadoop-hdds/common/src/main/proto/hdds.proto       |  8 +-
 .../apache/hadoop/ozone/HddsDatanodeService.java   |  7 --
 .../container/common/TestDatanodeStateMachine.java |  2 -
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  2 -
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  4 -
 .../ozone/container/ContainerTestHelper.java       |  2 -
 .../org/apache/hadoop/ozone/ksm/TestKSMSQLCli.java |  2 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  2 +-
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |  2 -
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |  6 --
 .../apache/hadoop/ozone/genesis/GenesisUtil.java   |  2 -
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    | 31 +++-----
 .../apache/hadoop/ozone/scm/cli/package-info.java  |  2 +-
 14 files changed, 22 insertions(+), 138 deletions(-)

commit dfc8dde2146972eea615b5f332b4dff4699ade73
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Apr 10 11:28:52 2018 -0700

    HDFS-13395. Ozone: Plugins support in HDSL Datanode Service. Contributed by Nanda Kumar.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   3 +
 .../common/src/main/resources/ozone-default.xml    |   8 ++
 .../apache/hadoop/ozone/HddsDatanodeService.java   | 118 ++++++++++++++++-----
 .../common/statemachine/DatanodeStateMachine.java  |  10 ++
 .../acceptance-test/src/test/compose/docker-config |   3 +-
 .../hadoop/ozone/MiniOzoneClassicCluster.java      |   4 +-
 .../apache/hadoop/ozone/MiniOzoneTestHelper.java   |   5 +
 ...stPlugin.java => OzoneHddsDatanodeService.java} |  54 +++-------
 8 files changed, 135 insertions(+), 70 deletions(-)

commit a13a907ff104a5aac92acf3c8b9b8294ea88ccc6
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri Apr 6 16:55:08 2018 +0530

    HDFS-13342. Ozone: Rename and fix ozone CLI scripts. Contributed by Shashikant Banerjee.

 .../hadoop/hdds/scm/StorageContainerManager.java   |  6 ++--
 .../src/test/compose/docker-compose.yaml           | 14 ++++-----
 .../src/test/robotframework/acceptance/ozone.robot | 18 ++++++------
 hadoop-ozone/common/src/main/bin/{oz => ozone}     |  8 ++---
 hadoop-ozone/common/src/main/bin/start-ozone.sh    | 14 ++++-----
 hadoop-ozone/common/src/main/bin/stop-ozone.sh     | 14 ++++-----
 .../apache/hadoop/ozone/freon/OzoneGetConf.java    |  4 +--
 .../common/src/main/shellprofile.d/hadoop-ozone.sh |  2 +-
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |  4 +--
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java | 16 +++++-----
 .../src/main/site/markdown/OzoneCommandShell.md    | 34 +++++++++++-----------
 11 files changed, 67 insertions(+), 67 deletions(-)

commit 4772024c6cd40e9966164bbe2b75ba7637a12455
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Apr 5 12:45:38 2018 -0700

    HDFS-13405. Addendum: Ozone: Rename HDSL to HDDS.
    Contributed by Ajay Kumar.

 .../main/java/org/apache/hadoop/{hdsl => hdds}/server/BaseHttpServer.java | 0
 .../main/java/org/apache/hadoop/{hdsl => hdds}/server/ServerUtils.java    | 0
 .../java/org/apache/hadoop/{hdsl => hdds}/server/ServiceRuntimeInfo.java  | 0
 .../org/apache/hadoop/{hdsl => hdds}/server/ServiceRuntimeInfoImpl.java   | 0
 .../main/java/org/apache/hadoop/{hdsl => hdds}/server/package-info.java   | 0
 .../java/org/apache/hadoop/{hdsl => hdds}/server/TestBaseHttpServer.java  | 0
 6 files changed, 0 insertions(+), 0 deletions(-)

commit a3a5e5536770d4f2772900525a44981c3126fd2c
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Apr 5 11:24:39 2018 -0700

    HDFS-13405. Ozone: Rename HDSL to HDDS.
    Contributed by Ajay Kumar, Elek Marton, Mukul Kumar Singh, Shashikant Banerjee and Anu Engineer.

 hadoop-cblock/server/pom.xml                       |    8 +-
 .../org/apache/hadoop/cblock/CBlockManager.java    |   14 +-
 .../java/org/apache/hadoop/cblock/CblockUtils.java |    4 +-
 .../hadoop/cblock/client/CBlockVolumeClient.java   |    2 +-
 .../hadoop/cblock/jscsiHelper/BlockWriterTask.java |    6 +-
 ...CBlockClientProtocolClientSideTranslatorPB.java |    2 +-
 .../cblock/jscsiHelper/CBlockIStorageImpl.java     |    4 +-
 .../cblock/jscsiHelper/CBlockTargetServer.java     |    4 +-
 .../cblock/jscsiHelper/ContainerCacheFlusher.java  |    4 +-
 .../cblock/jscsiHelper/SCSITargetDaemon.java       |   20 +-
 .../jscsiHelper/cache/impl/AsyncBlockWriter.java   |    8 +-
 .../jscsiHelper/cache/impl/CBlockLocalCache.java   |    4 +-
 .../jscsiHelper/cache/impl/SyncBlockReader.java    |    8 +-
 .../cblock/kubernetes/DynamicProvisioner.java      |    2 +-
 .../hadoop/cblock/meta/ContainerDescriptor.java    |    2 +-
 .../hadoop/cblock/meta/VolumeDescriptor.java       |    2 +-
 .../hadoop/cblock/proto/MountVolumeResponse.java   |    2 +-
 ...ClientServerProtocolServerSideTranslatorPB.java |    2 +-
 .../hadoop/cblock/storage/StorageManager.java      |   12 +-
 .../main/proto/CBlockClientServerProtocol.proto    |    4 +-
 .../apache/hadoop/cblock/TestBufferManager.java    |   12 +-
 .../apache/hadoop/cblock/TestCBlockReadWrite.java  |   20 +-
 .../org/apache/hadoop/cblock/TestCBlockServer.java |    4 +-
 .../hadoop/cblock/TestCBlockServerPersistence.java |    4 +-
 .../apache/hadoop/cblock/TestLocalBlockCache.java  |   12 +-
 .../cblock/kubernetes/TestDynamicProvisioner.java  |    2 +-
 .../hadoop/cblock/util/ContainerLookUpService.java |    2 +-
 .../hadoop/cblock/util/MockStorageClient.java      |   24 +-
 .../org/apache/hadoop/cblock/cli/CBlockCli.java    |    2 +-
 .../org/apache/hadoop/cblock/TestCBlockCLI.java    |    2 +-
 {hadoop-hdsl => hadoop-hdds}/client/pom.xml        |   12 +-
 .../org/apache/hadoop/hdds}/scm/XceiverClient.java |   20 +-
 .../hadoop/hdds}/scm/XceiverClientHandler.java     |   10 +-
 .../hadoop/hdds}/scm/XceiverClientInitializer.java |    6 +-
 .../hadoop/hdds}/scm/XceiverClientManager.java     |   43 +-
 .../hadoop/hdds}/scm/XceiverClientMetrics.java     |    4 +-
 .../hadoop/hdds}/scm/XceiverClientRatis.java       |   22 +-
 .../hdds}/scm/client/ContainerOperationClient.java |   42 +-
 .../hadoop/hdds/scm/client/HddsClientUtils.java    |  135 +--
 .../hadoop/hdds}/scm/client/package-info.java      |    2 +-
 .../org/apache/hadoop/hdds}/scm/package-info.java  |    2 +-
 .../hadoop/hdds}/scm/storage/ChunkInputStream.java |   18 +-
 .../hdds}/scm/storage/ChunkOutputStream.java       |   22 +-
 .../hadoop/hdds}/scm/storage/package-info.java     |    2 +-
 .../common/dev-support/findbugsExcludeFile.xml     |    2 +-
 {hadoop-hdsl => hadoop-hdds}/common/pom.xml        |   13 +-
 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |    6 +
 .../java/org/apache/hadoop/hdds/HddsUtils.java     |   35 +-
 .../org/apache/hadoop/hdds}/client/OzoneQuota.java |    2 +-
 .../hadoop/hdds}/client/ReplicationFactor.java     |    2 +-
 .../hadoop/hdds}/client/ReplicationType.java       |    2 +-
 .../apache/hadoop/hdds/client/package-info.java    |   23 +
 .../hadoop/hdds}/conf/OzoneConfiguration.java      |   13 +-
 .../org/apache/hadoop/hdds}/conf/package-info.java |    2 +-
 .../java/org/apache/hadoop/hdds}/package-info.java |    4 +-
 .../hadoop/hdds}/protocol/DatanodeDetails.java     |   14 +-
 .../apache/hadoop/hdds}/protocol/package-info.java |    4 +-
 .../org/apache/hadoop/hdds}/scm/ScmConfigKeys.java |   26 +-
 .../java/org/apache/hadoop/hdds}/scm/ScmInfo.java  |    2 +-
 .../apache/hadoop/hdds}/scm/XceiverClientSpi.java  |   14 +-
 .../apache/hadoop/hdds}/scm/client/ScmClient.java  |   22 +-
 .../hadoop/hdds/scm/client}/package-info.java      |    2 +-
 .../hadoop/hdds/scm/container}/ContainerID.java    |    2 +-
 .../container/common/helpers/AllocatedBlock.java   |    2 +-
 .../container/common/helpers/ContainerInfo.java    |   26 +-
 .../common/helpers/DeleteBlockResult.java          |    5 +-
 .../scm/container/common/helpers/Pipeline.java     |   20 +-
 .../container/common/helpers/PipelineChannel.java  |   22 +-
 .../common/helpers/StorageContainerException.java  |    4 +-
 .../scm/container/common/helpers/package-info.java |    2 +-
 .../org/apache/hadoop/hdds}/scm/package-info.java  |    2 +-
 .../hdds}/scm/protocol/LocatedContainer.java       |    2 +-
 .../scm/protocol/ScmBlockLocationProtocol.java     |   16 +-
 .../hadoop/hdds}/scm/protocol/ScmLocatedBlock.java |    8 +-
 .../protocol/StorageContainerLocationProtocol.java |   27 +-
 .../hadoop/hdds/scm/protocol}/package-info.java    |    2 +-
 ...lockLocationProtocolClientSideTranslatorPB.java |   46 +-
 .../scm/protocolPB/ScmBlockLocationProtocolPB.java |    6 +-
 ...inerLocationProtocolClientSideTranslatorPB.java |   68 +-
 .../StorageContainerLocationProtocolPB.java        |    6 +-
 .../hadoop/hdds/scm/protocolPB}/package-info.java  |    2 +-
 .../hdds}/scm/storage/ContainerProtocolCalls.java  |   49 +-
 .../hadoop/hdds}/scm/storage/package-info.java     |    2 +-
 .../java/org/apache/hadoop/ozone/OzoneAcl.java     |    0
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |    7 +-
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |    0
 .../org/apache/hadoop/ozone/common/BlockGroup.java |    4 +-
 .../ozone/common/DeleteBlockGroupResult.java       |    8 +-
 .../common/InconsistentStorageStateException.java  |    6 +-
 .../org/apache/hadoop/ozone/common/Storage.java    |   15 +-
 .../apache/hadoop/ozone/common/StorageInfo.java    |   13 +-
 .../apache/hadoop/ozone/common/package-info.java   |    0
 .../InvalidStateTransitionException.java           |    0
 .../ozone/common/statemachine/StateMachine.java    |    0
 .../ozone/common/statemachine/package-info.java    |    0
 .../ozone/container/common/helpers/ChunkInfo.java  |    8 +-
 .../ozone/container/common/helpers/KeyData.java    |    8 +-
 .../container/common/helpers/package-info.java     |    0
 .../java/org/apache/hadoop/ozone/lease/Lease.java  |    0
 .../ozone/lease/LeaseAlreadyExistException.java    |    0
 .../hadoop/ozone/lease/LeaseCallbackExecutor.java  |    0
 .../apache/hadoop/ozone/lease/LeaseException.java  |    0
 .../hadoop/ozone/lease/LeaseExpiredException.java  |    0
 .../apache/hadoop/ozone/lease/LeaseManager.java    |    0
 .../lease/LeaseManagerNotRunningException.java     |    0
 .../hadoop/ozone/lease/LeaseNotFoundException.java |    0
 .../apache/hadoop/ozone/lease/package-info.java    |    0
 .../java/org/apache/hadoop/ozone/package-info.java |    0
 ...lockLocationProtocolServerSideTranslatorPB.java |   51 +-
 ...inerLocationProtocolServerSideTranslatorPB.java |   70 +-
 .../hadoop/ozone/protocolPB/package-info.java      |    0
 .../apache/hadoop/ozone/web/utils/JsonUtils.java   |    6 +-
 .../org/apache/hadoop/utils/BackgroundService.java |   14 +-
 .../org/apache/hadoop/utils/BackgroundTask.java    |    0
 .../apache/hadoop/utils/BackgroundTaskQueue.java   |    0
 .../apache/hadoop/utils/BackgroundTaskResult.java  |    0
 .../org/apache/hadoop/utils/BatchOperation.java    |    0
 .../org/apache/hadoop/utils/EntryConsumer.java     |    0
 .../java/org/apache/hadoop/utils/LevelDBStore.java |   10 +-
 .../apache/hadoop/utils/MetadataKeyFilters.java    |    0
 .../org/apache/hadoop/utils/MetadataStore.java     |    0
 .../apache/hadoop/utils/MetadataStoreBuilder.java  |   23 +-
 .../java/org/apache/hadoop/utils/RocksDBStore.java |   14 +-
 .../org/apache/hadoop/utils/RocksDBStoreMBean.java |   10 +-
 .../java/org/apache/hadoop/utils/package-info.java |    0
 .../main/java/org/apache/ratis/RatisHelper.java    |   10 +-
 .../main/java/org/apache/ratis/package-info.java   |    0
 .../com/google/protobuf/ShadedProtoUtil.java       |    0
 .../shaded/com/google/protobuf/package-info.java   |    0
 .../src/main/proto/DatanodeContainerProtocol.proto |    6 +-
 .../src/main/proto/ScmBlockLocationProtocol.proto  |   16 +-
 .../proto/StorageContainerLocationProtocol.proto   |    6 +-
 .../common/src/main/proto/hdds.proto               |    6 +-
 .../common/src/main/resources/ozone-default.xml    |   10 +-
 .../org/apache/hadoop/hdds}/scm/TestArchive.java   |    2 +-
 .../org/apache/hadoop/hdds}/scm/package-info.java  |    2 +-
 .../org/apache/hadoop/ozone/TestMetadataStore.java |   22 +-
 .../org/apache/hadoop/ozone/TestOzoneAcls.java     |    0
 .../hadoop/ozone/common/TestStateMachine.java      |   12 +-
 .../hadoop/ozone/lease/TestLeaseManager.java       |    0
 .../apache/hadoop/ozone/lease/package-info.java    |    0
 .../java/org/apache/hadoop/ozone/package-info.java |    0
 .../apache/hadoop/utils/TestRocksDBStoreMBean.java |    2 +-
 .../container-service/pom.xml                      |   16 +-
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java |   34 +-
 .../org/apache/hadoop/hdds}/scm/VersionInfo.java   |    2 +-
 .../apache/hadoop/ozone/HddsDatanodeService.java   |   34 +-
 .../ozone/container/common/helpers/ChunkUtils.java |   39 +-
 .../container/common/helpers/ContainerData.java    |   22 +-
 .../container/common/helpers/ContainerMetrics.java |    8 +-
 .../container/common/helpers/ContainerReport.java  |    2 +-
 .../container/common/helpers/ContainerUtils.java   |   21 +-
 .../helpers/DeletedContainerBlocksSummary.java     |    2 +-
 .../ozone/container/common/helpers/FileUtils.java  |    2 +-
 .../ozone/container/common/helpers/KeyUtils.java   |   13 +-
 .../container/common/helpers/package-info.java     |    0
 .../container/common/impl/ChunkManagerImpl.java    |   17 +-
 .../common/impl/ContainerManagerImpl.java          | 1113 ++++++++++++++++++++
 .../common/impl/ContainerReportManagerImpl.java    |   11 +-
 .../container/common/impl/ContainerStatus.java     |    0
 .../common/impl/ContainerStorageLocation.java      |    4 +-
 .../ozone/container/common/impl/Dispatcher.java    |   25 +-
 .../container/common/impl/KeyManagerImpl.java      |   11 +-
 .../RandomContainerDeletionChoosingPolicy.java     |   15 +-
 .../common/impl/StorageLocationReport.java         |    0
 ...TopNOrderedContainerDeletionChoosingPolicy.java |   17 +-
 .../ozone/container/common/impl/package-info.java  |    0
 .../container/common/interfaces/ChunkManager.java  |    7 +-
 .../ContainerDeletionChoosingPolicy.java           |    9 +-
 .../common/interfaces/ContainerDispatcher.java     |    6 +-
 .../interfaces/ContainerLocationManager.java       |    0
 .../interfaces/ContainerLocationManagerMXBean.java |    0
 .../common/interfaces/ContainerManager.java        |   17 +-
 .../common/interfaces/ContainerReportManager.java  |    2 +-
 .../container/common/interfaces/KeyManager.java    |    5 +-
 .../container/common/interfaces/package-info.java  |    0
 .../ozone/container/common/package-info.java       |    0
 .../common/statemachine/DatanodeStateMachine.java  |   19 +-
 .../common/statemachine/EndpointStateMachine.java  |    7 +-
 .../statemachine/EndpointStateMachineMBean.java    |    0
 .../common/statemachine/SCMConnectionManager.java  |   13 +-
 .../statemachine/SCMConnectionManagerMXBean.java   |    0
 .../common/statemachine/StateContext.java          |   16 +-
 .../background/BlockDeletingService.java           |   21 +-
 .../statemachine/background/package-info.java      |    0
 .../commandhandler/CloseContainerHandler.java      |    8 +-
 .../commandhandler/CommandDispatcher.java          |    2 +-
 .../commandhandler/CommandHandler.java             |    2 +-
 .../commandhandler/ContainerReportHandler.java     |   12 +-
 .../commandhandler/DeleteBlocksCommandHandler.java |   23 +-
 .../statemachine/commandhandler/package-info.java  |    0
 .../common/statemachine/package-info.java          |    0
 .../container/common/states/DatanodeState.java     |    0
 .../common/states/datanode/InitDatanodeState.java  |   16 +-
 .../states/datanode/RunningDatanodeState.java      |    0
 .../common/states/datanode/package-info.java       |    0
 .../states/endpoint/HeartbeatEndpointTask.java     |   12 +-
 .../states/endpoint/RegisterEndpointTask.java      |    7 +-
 .../states/endpoint/VersionEndpointTask.java       |    6 +-
 .../common/states/endpoint/package-info.java       |    0
 .../container/common/states/package-info.java      |    0
 .../common/transport/server/XceiverServer.java     |    8 +-
 .../transport/server/XceiverServerHandler.java     |   10 +-
 .../transport/server/XceiverServerInitializer.java |    3 +-
 .../common/transport/server/XceiverServerSpi.java  |    4 +-
 .../common/transport/server/package-info.java      |    0
 .../server/ratis/ContainerStateMachine.java        |   23 +-
 .../transport/server/ratis/XceiverServerRatis.java |   11 +-
 .../transport/server/ratis/package-info.java       |    0
 .../container/common/utils/ContainerCache.java     |    0
 .../ozone/container/common/utils/package-info.java |    0
 .../ozone/container/ozoneimpl/OzoneContainer.java  |   37 +-
 .../ozone/container/ozoneimpl/package-info.java    |    0
 .../java/org/apache/hadoop/ozone/package-info.java |    0
 .../protocol/StorageContainerDatanodeProtocol.java |   34 +-
 .../protocol/StorageContainerNodeProtocol.java     |   12 +-
 .../hadoop/ozone/protocol/VersionResponse.java     |    4 +-
 .../protocol/commands/CloseContainerCommand.java   |    7 +-
 .../protocol/commands/DeleteBlocksCommand.java     |    9 +-
 .../ozone/protocol/commands/RegisteredCommand.java |    8 +-
 .../ozone/protocol/commands/ReregisterCommand.java |    9 +-
 .../hadoop/ozone/protocol/commands/SCMCommand.java |    4 +-
 .../protocol/commands/SendContainerCommand.java    |    6 +-
 .../ozone/protocol/commands/package-info.java      |    0
 .../apache/hadoop/ozone/protocol/package-info.java |    2 +-
 ...inerDatanodeProtocolClientSideTranslatorPB.java |   41 +-
 .../StorageContainerDatanodeProtocolPB.java        |    4 +-
 ...inerDatanodeProtocolServerSideTranslatorPB.java |   22 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   12 +-
 .../com.sun.jersey.spi.container.ContainerProvider |    0
 .../ozone/container/common/ContainerTestUtils.java |    4 +-
 .../ozone/container/common/SCMTestUtils.java       |   15 +-
 .../hadoop/ozone/container/common/ScmTestMock.java |   31 +-
 .../container/common/TestDatanodeStateMachine.java |   26 +-
 .../testutils/BlockDeletingServiceTestImpl.java    |    5 +-
 .../ozone/container/testutils/package-info.java    |    0
 {hadoop-hdsl => hadoop-hdds}/framework/README.md   |    4 +-
 {hadoop-hdsl => hadoop-hdds}/framework/pom.xml     |   14 +-
 .../apache/hadoop/hdsl/server/BaseHttpServer.java  |    6 +-
 .../org/apache/hadoop/hdsl/server/ServerUtils.java |   15 +-
 .../hadoop/hdsl/server/ServiceRuntimeInfo.java     |    2 +-
 .../hadoop/hdsl/server/ServiceRuntimeInfoImpl.java |    2 +-
 .../apache/hadoop/hdsl/server/package-info.java    |    4 +-
 .../src/main/resources/webapps/datanode/dn.js      |    0
 .../resources/webapps/static/angular-1.6.4.min.js  |    0
 .../webapps/static/angular-nvd3-1.0.9.min.js       |    0
 .../webapps/static/angular-route-1.6.4.min.js      |    0
 .../main/resources/webapps/static/d3-3.5.17.min.js |    0
 .../src/main/resources/webapps/static/dfs-dust.js  |    0
 .../resources/webapps/static/nvd3-1.8.5.min.css    |    0
 .../webapps/static/nvd3-1.8.5.min.css.map          |    0
 .../resources/webapps/static/nvd3-1.8.5.min.js     |    0
 .../resources/webapps/static/nvd3-1.8.5.min.js.map |    0
 .../src/main/resources/webapps/static/ozone.css    |    0
 .../src/main/resources/webapps/static/ozone.js     |    0
 .../resources/webapps/static/templates/config.html |    0
 .../resources/webapps/static/templates/jvm.html    |    0
 .../resources/webapps/static/templates/menu.html   |    0
 .../webapps/static/templates/overview.html         |    0
 .../webapps/static/templates/rpc-metrics.html      |    0
 .../hadoop/hdsl/server/TestBaseHttpServer.java     |    5 +-
 .../framework/src/test/resources/ozone-site.xml    |    0
 {hadoop-hdsl => hadoop-hdds}/pom.xml               |    7 +-
 {hadoop-hdsl => hadoop-hdds}/server-scm/pom.xml    |   22 +-
 .../org/apache/hadoop/hdds}/scm/SCMMXBean.java     |    8 +-
 .../org/apache/hadoop/hdds}/scm/SCMStorage.java    |   12 +-
 .../hadoop/hdds}/scm/StorageContainerManager.java  |  196 ++--
 .../scm/StorageContainerManagerHttpServer.java     |    5 +-
 .../hadoop/hdds}/scm/block/BlockManager.java       |   12 +-
 .../hadoop/hdds}/scm/block/BlockManagerImpl.java   |   59 +-
 .../hadoop/hdds}/scm/block/BlockmanagerMXBean.java |    2 +-
 .../block/DatanodeDeletedBlockTransactions.java    |   16 +-
 .../hadoop/hdds}/scm/block/DeletedBlockLog.java    |    4 +-
 .../hdds}/scm/block/DeletedBlockLogImpl.java       |   20 +-
 .../hdds}/scm/block/SCMBlockDeletingService.java   |   24 +-
 .../hadoop/hdds}/scm/block/package-info.java       |    2 +-
 .../hdds}/scm/container/ContainerMapping.java      |   86 +-
 .../hdds}/scm/container/ContainerStateManager.java |   46 +-
 .../apache/hadoop/hdds}/scm/container/Mapping.java |   17 +-
 .../scm/container/closer/ContainerCloser.java      |   14 +-
 .../hdds}/scm/container/closer/package-info.java   |    2 +-
 .../hadoop/hdds}/scm/container/package-info.java   |    2 +-
 .../algorithms/ContainerPlacementPolicy.java       |    4 +-
 .../placement/algorithms/SCMCommonPolicy.java      |   14 +-
 .../algorithms/SCMContainerPlacementCapacity.java  |   10 +-
 .../algorithms/SCMContainerPlacementRandom.java    |    8 +-
 .../placement/algorithms/package-info.java         |    2 +-
 .../container/placement/metrics/ContainerStat.java |    9 +-
 .../placement/metrics/DatanodeMetric.java          |    4 +-
 .../container/placement/metrics/LongMetric.java    |    2 +-
 .../scm/container/placement/metrics/NodeStat.java  |    2 +-
 .../container/placement/metrics/SCMMetrics.java    |    2 +-
 .../container/placement/metrics/SCMNodeMetric.java |    2 +-
 .../container/placement/metrics/SCMNodeStat.java   |    2 +-
 .../container/placement/metrics/package-info.java  |    2 +-
 .../scm/container/placement/package-info.java      |    2 +-
 .../container/replication/ContainerSupervisor.java |   32 +-
 .../scm/container/replication/InProgressPool.java  |   27 +-
 .../scm/container/replication/PeriodicPool.java    |    2 +-
 .../scm/container/replication/package-info.java    |    2 +-
 .../scm/container/states}/ContainerAttribute.java  |    7 +-
 .../hdds/scm/container/states}/ContainerState.java |   16 +-
 .../scm/container/states}/ContainerStateMap.java   |   19 +-
 .../hdds/scm/container/states}/package-info.java   |    2 +-
 .../hadoop/hdds}/scm/exceptions/SCMException.java  |    2 +-
 .../hadoop/hdds}/scm/exceptions/package-info.java  |    2 +-
 .../apache/hadoop/hdds}/scm/node/CommandQueue.java |    2 +-
 .../hadoop/hdds}/scm/node/HeartbeatQueueItem.java  |    9 +-
 .../apache/hadoop/hdds}/scm/node/NodeManager.java  |   10 +-
 .../hadoop/hdds}/scm/node/NodeManagerMXBean.java   |    2 +-
 .../hadoop/hdds}/scm/node/NodePoolManager.java     |    7 +-
 .../hadoop/hdds}/scm/node/SCMNodeManager.java      |   72 +-
 .../hadoop/hdds}/scm/node/SCMNodePoolManager.java  |   31 +-
 .../apache/hadoop/hdds}/scm/node/package-info.java |    2 +-
 .../org/apache/hadoop/hdds}/scm/package-info.java  |    2 +-
 .../hdds}/scm/pipelines/PipelineManager.java       |   15 +-
 .../hdds}/scm/pipelines/PipelineSelector.java      |   32 +-
 .../hadoop/hdds}/scm/pipelines/package-info.java   |    2 +-
 .../scm/pipelines/ratis/RatisManagerImpl.java      |   26 +-
 .../hdds/scm/pipelines/ratis/package-info.java     |   18 +
 .../standalone/StandaloneManagerImpl.java          |   29 +-
 .../scm/pipelines/standalone}/package-info.java    |    2 +-
 .../hadoop/hdds}/scm/ratis/package-info.java       |    2 +-
 .../server-scm/src/main/webapps/scm/index.html     |    0
 .../server-scm/src/main/webapps/scm/main.html      |    0
 .../src/main/webapps/scm/scm-overview.html         |    0
 .../server-scm/src/main/webapps/scm/scm.js         |    0
 .../apache/hadoop/hdds/scm/HddsServerUtilTest.java |   55 +-
 .../scm/TestStorageContainerManagerHttpServer.java |    3 +-
 .../org/apache/hadoop/hdds}/scm/TestUtils.java     |    8 +-
 .../hadoop/hdds}/scm/block/TestBlockManager.java   |   26 +-
 .../hdds}/scm/block/TestDeletedBlockLog.java       |   27 +-
 .../hdds}/scm/container/MockNodeManager.java       |   55 +-
 .../hdds}/scm/container/TestContainerMapping.java  |   44 +-
 .../scm/container/closer/TestContainerCloser.java  |   49 +-
 .../container/states}/TestContainerAttribute.java  |    5 +-
 .../hdds}/scm/node/TestContainerPlacement.java     |   40 +-
 .../hadoop/hdds}/scm/node/TestNodeManager.java     |   58 +-
 .../hdds}/scm/node/TestSCMNodePoolManager.java     |   17 +-
 .../org/apache/hadoop/hdds}/scm/package-info.java  |    2 +-
 .../ozone/container/common/TestEndPoint.java       |   59 +-
 .../placement/TestContainerPlacement.java          |   17 +-
 .../container/placement/TestDatanodeMetrics.java   |    4 +-
 .../replication/TestContainerSupervisor.java       |   39 +-
 .../ozone/container/replication/package-info.java  |    0
 .../testutils/ReplicationDatanodeStateManager.java |   15 +-
 .../testutils/ReplicationNodeManagerMock.java      |   33 +-
 .../testutils/ReplicationNodePoolManagerMock.java  |    6 +-
 .../ozone/container/testutils/package-info.java    |    0
 {hadoop-hdsl => hadoop-hdds}/tools/pom.xml         |   15 +-
 .../apache/hadoop/hdds}/scm/cli/OzoneBaseCLI.java  |    2 +-
 .../hadoop/hdds}/scm/cli/OzoneCommandHandler.java  |    4 +-
 .../apache/hadoop/hdds}/scm/cli/ResultCode.java    |    2 +-
 .../org/apache/hadoop/hdds}/scm/cli/SCMCLI.java    |   39 +-
 .../scm/cli/container/CloseContainerHandler.java   |   16 +-
 .../scm/cli/container/ContainerCommandHandler.java |   29 +-
 .../scm/cli/container/CreateContainerHandler.java  |   10 +-
 .../scm/cli/container/DeleteContainerHandler.java  |   12 +-
 .../scm/cli/container/InfoContainerHandler.java    |   21 +-
 .../scm/cli/container/ListContainerHandler.java    |   14 +-
 .../hdds}/scm/cli/container/package-info.java      |    2 +-
 .../apache/hadoop/hdds/scm/cli}/package-info.java  |    2 +-
 .../apache/hadoop/ozone/client/package-info.java   |   23 -
 .../apache/hadoop/ozone/client/package-info.java   |   23 -
 .../container/ContainerStates/package-info.java    |   22 -
 .../common/impl/ContainerLocationManagerImpl.java  |   92 --
 .../scm/pipelines/standalone/package-info.java     |   18 -
 hadoop-ozone/acceptance-test/README.md             |    2 +-
 .../acceptance-test/src/test/compose/docker-config |    2 +-
 .../apache/hadoop/ozone/client/ObjectStore.java    |   11 +-
 .../apache/hadoop/ozone/client/OzoneBucket.java    |    5 +-
 .../hadoop/ozone/client/OzoneClientFactory.java    |    2 +-
 .../apache/hadoop/ozone/client/OzoneVolume.java    |   14 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |   14 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |   22 +-
 .../ozone/client/io/OzoneContainerTranslation.java |    2 +-
 .../hadoop/ozone/client/io/OzoneInputStream.java   |    2 +-
 .../ozone/client/protocol/ClientProtocol.java      |    6 +-
 .../hadoop/ozone/client/rest/RestClient.java       |   22 +-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |   28 +-
 .../hadoop/ozone/web/client/OzoneBucket.java       |   19 +-
 .../hadoop/ozone/web/client/OzoneRestClient.java   |   12 +-
 .../hadoop/ozone/web/client/OzoneVolume.java       |    6 +-
 ...neClientUtils.java => TestHddsClientUtils.java} |   10 +-
 hadoop-ozone/common/pom.xml                        |    2 +-
 hadoop-ozone/common/src/main/bin/oz                |    2 +-
 .../java/org/apache/hadoop/ozone/KsmUtils.java     |    4 +-
 .../ozone/client/rest/response/VolumeInfo.java     |    2 +-
 .../apache/hadoop/ozone/freon/OzoneGetConf.java    |    6 +-
 .../hadoop/ozone/ksm/helpers/KsmKeyArgs.java       |    4 +-
 .../hadoop/ozone/ksm/helpers/KsmVolumeArgs.java    |    2 +-
 .../hadoop/ozone/ksm/helpers/ServiceInfo.java      |    2 +-
 .../apache/hadoop/ozone/web/utils/OzoneUtils.java  |    6 +-
 .../src/main/proto/KeySpaceManagerProtocol.proto   |   10 +-
 .../common/src/main/shellprofile.d/hadoop-ozone.sh |   12 +-
 .../scm/container/TestContainerStateManager.java   |   97 +-
 .../hadoop/ozone/MiniOzoneClassicCluster.java      |   24 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |    4 +-
 .../apache/hadoop/ozone/MiniOzoneTestHelper.java   |   14 +-
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |    2 +-
 .../hadoop/ozone/TestContainerOperations.java      |   26 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   24 +-
 .../hadoop/ozone/TestOzoneConfigurationFields.java |    2 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |   41 +-
 .../ozone/TestStorageContainerManagerHelper.java   |    4 +-
 .../ozone/client/rest/TestOzoneRestClient.java     |    8 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |   24 +-
 .../ozone/container/ContainerTestHelper.java       |   22 +-
 .../container/common/TestBlockDeletingService.java |    8 +-
 .../impl/TestContainerDeletionChoosingPolicy.java  |    8 +-
 .../common/impl/TestContainerPersistence.java      |   12 +-
 .../commandhandler/TestCloseContainerHandler.java  |   18 +-
 .../container/metrics/TestContainerMetrics.java    |   16 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   12 +-
 .../ozoneimpl/TestOzoneContainerRatis.java         |    6 +-
 .../container/ozoneimpl/TestRatisManager.java      |    4 +-
 .../container/server/TestContainerServer.java      |   21 +-
 .../hadoop/ozone/freon/TestDataValidate.java       |    2 +-
 .../org/apache/hadoop/ozone/freon/TestFreon.java   |    2 +-
 .../ozone/ksm/TestContainerReportWithKeys.java     |   16 +-
 .../apache/hadoop/ozone/ksm/TestKSMMetrcis.java    |    2 +-
 .../org/apache/hadoop/ozone/ksm/TestKSMSQLCli.java |    4 +-
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      |   17 +-
 .../ksm/TestKeySpaceManagerRestInterface.java      |   14 +-
 .../hadoop/ozone/ksm/TestKsmBlockVersioning.java   |    2 +-
 .../ozone/ksm/TestMultipleContainerReadWrite.java  |    4 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |    2 +-
 .../hadoop/ozone/scm/TestAllocateContainer.java    |    8 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |   39 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |   30 +-
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    |   42 +-
 .../org/apache/hadoop/ozone/scm/TestSCMMXBean.java |    7 +-
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |   16 +-
 .../hadoop/ozone/scm/TestXceiverClientManager.java |   20 +-
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java |   18 +-
 .../hadoop/ozone/scm/node/TestQueryNode.java       |   39 +-
 .../ozone/web/TestDistributedOzoneVolumes.java     |    2 +-
 .../hadoop/ozone/web/TestLocalOzoneVolumes.java    |    2 +-
 .../ozone/web/TestOzoneRestWithMiniCluster.java    |    2 +-
 .../hadoop/ozone/web/TestOzoneWebAccess.java       |    2 +-
 .../hadoop/ozone/web/client/TestBuckets.java       |    2 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |    4 +-
 .../hadoop/ozone/web/client/TestOzoneClient.java   |    2 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java |    6 +-
 .../hadoop/ozone/web/client/TestVolumeRatis.java   |    2 +-
 .../hdfs/server/datanode/ObjectStoreHandler.java   |   14 +-
 .../org/apache/hadoop/ozone/OzoneRestUtils.java    |    4 +-
 .../hadoop/ozone/web/ObjectStoreRestPlugin.java    |   12 +-
 .../ozone/web/handlers/StorageHandlerBuilder.java  |    2 +-
 .../ozone/web/netty/ObjectStoreRestHttpServer.java |   36 +-
 .../web/storage/DistributedStorageHandler.java     |   22 +-
 hadoop-ozone/ozone-manager/pom.xml                 |    2 +-
 .../org/apache/hadoop/ozone/ksm/KSMMXBean.java     |    2 +-
 .../hadoop/ozone/ksm/KSMMetadataManagerImpl.java   |    4 +-
 .../org/apache/hadoop/ozone/ksm/KSMStorage.java    |    6 +-
 .../hadoop/ozone/ksm/KeyDeletingService.java       |    2 +-
 .../apache/hadoop/ozone/ksm/KeyManagerImpl.java    |   14 +-
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |   46 +-
 .../ozone/ksm/KeySpaceManagerHttpServer.java       |    2 +-
 .../hadoop/ozone/ksm/OpenKeyCleanupService.java    |    2 +-
 .../apache/hadoop/ozone/ksm/VolumeManagerImpl.java |    8 +-
 ...SpaceManagerProtocolServerSideTranslatorPB.java |   14 +-
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java |    2 +-
 .../apache/hadoop/ozone/ksm/TestChunkStreams.java  |    2 +-
 .../ozone/ksm/TestKeySpaceManagerHttpServer.java   |    2 +-
 hadoop-ozone/pom.xml                               |   16 +-
 hadoop-ozone/tools/pom.xml                         |    6 +-
 .../java/org/apache/hadoop/ozone/freon/Freon.java  |    5 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java  |   22 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |   32 +-
 .../org/apache/hadoop/ozone/genesis/Genesis.java   |    2 +-
 .../apache/hadoop/ozone/genesis/GenesisUtil.java   |    2 +-
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |   18 +-
 .../apache/hadoop/ozone/scm/cli/package-info.java  |    2 +-
 474 files changed, 3885 insertions(+), 2684 deletions(-)

commit 188cb478bb6a19e75902954f8cd7a7f6b7bc88e4
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Apr 4 21:08:05 2018 +0530

    HDFS-13309. Ozone: Improve error message in case of missing nodes. Contributed by Elek, Marton.

 .../org/apache/hadoop/ozone/scm/container/ContainerStateManager.java | 5 +++++
 1 file changed, 5 insertions(+)

commit b5839fa8b1515335f1223ad1fd949365ac80fc53
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Apr 4 20:34:42 2018 +0530

    HDFS-13316. Ozone: Update the ksm/scm CLI usage info. Contributed by Xiaoyu Yao.

 .../java/org/apache/hadoop/ozone/scm/StorageContainerManager.java   | 6 +++---
 .../src/main/java/org/apache/hadoop/ozone/ksm/KeySpaceManager.java  | 4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 5d0d6444dd975cffee956603ac03318324b0e305
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Apr 4 19:44:49 2018 +0530

    HDFS-13320. Ozone: Support for MicrobenchMarking Tool. Contributed by Shashikant Banerjee

 .../ContainerStates/ContainerStateMap.java         |   2 +
 hadoop-ozone/common/src/main/bin/oz                | 142 +----------
 .../ozone/{tools => freon}/OzoneGetConf.java       |   2 +-
 .../ozone/{tools => freon}/package-info.java       |   2 +-
 .../ozone/{tools => freon}/TestDataValidate.java   |   2 +-
 .../hadoop/ozone/{tools => freon}/TestFreon.java   |   2 +-
 .../ozone/{tools => freon}/package-info.java       |   2 +-
 .../ContainerStates/TestContainerStateMap.java     | 226 ------------------
 hadoop-ozone/tools/pom.xml                         |  18 ++
 .../hadoop/ozone/{tools => freon}/Freon.java       |   2 +-
 .../ozone/{tools => freon}/package-info.java       |   2 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java} | 170 ++++++-------
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java | 263 +++++++++++++++++++++
 .../ozone/genesis/BenchMarkMetadataStoreReads.java |  50 ++++
 .../genesis/BenchMarkMetadataStoreWrites.java      |  43 ++++
 .../ozone/genesis/BenchMarkRocksDbStore.java       | 115 +++++++++
 .../org/apache/hadoop/ozone/genesis/Genesis.java   |  50 ++++
 .../apache/hadoop/ozone/genesis/GenesisUtil.java   |  75 ++++++
 .../apache/hadoop/ozone/genesis/package-info.java  |  25 ++
 .../org/apache/hadoop/test/OzoneTestDriver.java    |   2 +-
 20 files changed, 745 insertions(+), 450 deletions(-)

commit 476e54ff008bf29225a95185065c7bbe490167fd
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Apr 4 08:59:01 2018 +0530

    HDFS-13391. Ozone: Make dependency of internal sub-module scope as provided in maven. Contributed by Nanda kumar.

 hadoop-cblock/pom.xml                    |  5 +++
 hadoop-hdsl/client/pom.xml               |  1 +
 hadoop-hdsl/common/pom.xml               | 17 --------
 hadoop-hdsl/container-service/pom.xml    | 20 +--------
 hadoop-hdsl/framework/pom.xml            | 13 +-----
 hadoop-hdsl/pom.xml                      | 37 +++++++++++++++++
 hadoop-hdsl/server-scm/pom.xml           | 23 ++---------
 hadoop-hdsl/tools/pom.xml                |  3 ++
 hadoop-ozone/client/pom.xml              | 21 +---------
 hadoop-ozone/common/pom.xml              | 20 ---------
 hadoop-ozone/integration-test/pom.xml    | 53 +++++-------------------
 hadoop-ozone/objectstore-service/pom.xml |  7 +---
 hadoop-ozone/ozone-manager/pom.xml       | 22 +---------
 hadoop-ozone/pom.xml                     | 69 ++++++++++++++++++++++++++++++++
 hadoop-ozone/tools/pom.xml               |  6 +++
 15 files changed, 142 insertions(+), 175 deletions(-)

commit 9a3689372542750397f3915c3e496499fe7584e1
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Apr 2 20:43:31 2018 -0700

    HDFS-13341. Ozone: Move ozone specific ServiceRuntimeInfo utility to the framework. Contributed by Elek, Marton.

 .../org/apache/hadoop/cblock/CBlockManager.java    |  2 +-
 .../apache/hadoop/ozone/scm/HdslServerUtil.java    |  2 +-
 hadoop-hdsl/framework/README.md                    | 24 ++++++++
 .../server/BaseHttpServer.java}                    | 10 ++--
 .../web/util => hdsl/server}/ServerUtils.java      |  2 +-
 .../hadoop/hdsl/server/ServiceRuntimeInfo.java     | 64 ++++++++++++++++++++++
 .../hadoop/hdsl/server/ServiceRuntimeInfoImpl.java | 55 +++++++++++++++++++
 .../{ozone/web => hdsl/server}/package-info.java   |  4 +-
 .../apache/hadoop/ozone/web/util/package-info.java | 23 --------
 .../hadoop/hdsl/server/TestBaseHttpServer.java     | 17 +++---
 .../org/apache/hadoop/ozone/scm/SCMMXBean.java     |  2 +-
 .../org/apache/hadoop/ozone/scm/SCMStorage.java    |  2 +-
 .../hadoop/ozone/scm/StorageContainerManager.java  |  4 +-
 .../scm/StorageContainerManagerHttpServer.java     |  4 +-
 .../hadoop/ozone/scm/block/BlockManagerImpl.java   |  2 +-
 .../ozone/scm/block/DeletedBlockLogImpl.java       |  2 +-
 .../ozone/scm/container/ContainerMapping.java      |  2 +-
 .../hadoop/ozone/scm/node/SCMNodePoolManager.java  |  2 +-
 .../hadoop/ozone/web/client/OzoneBucket.java       |  2 +-
 .../hadoop/ozone/web/client/OzoneRestClient.java   |  2 +-
 .../hadoop/ozone/web/client/OzoneVolume.java       |  2 +-
 .../org/apache/hadoop/ozone/ksm/KSMMXBean.java     |  2 +-
 .../hadoop/ozone/ksm/KSMMetadataManagerImpl.java   |  2 +-
 .../org/apache/hadoop/ozone/ksm/KSMStorage.java    |  2 +-
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |  4 +-
 .../ozone/ksm/KeySpaceManagerHttpServer.java       |  4 +-
 26 files changed, 182 insertions(+), 61 deletions(-)

commit a18eb98a109ad2d77a01cc62e69e313e277294c3
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Mar 29 21:06:10 2018 +0530

    HDFS-13368. Ozone:TestEndPoint tests are failing consistently. Contributed by Shashikant Banerjee.

 hadoop-hdsl/server-scm/pom.xml                                |  6 +++++-
 .../apache/hadoop/ozone/container/common/TestEndPoint.java    | 11 +++++------
 2 files changed, 10 insertions(+), 7 deletions(-)

commit 6e6ea034332af094a21af55639f421284f9b05f4
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Mar 27 12:55:26 2018 -0700

    HDFS-13300. Ozone: Remove DatanodeID dependency from HDSL and Ozone.
    Contributed by Nanda kumar.

 .../java/org/apache/hadoop/scm/XceiverClient.java  |   6 +-
 .../apache/hadoop/scm/XceiverClientHandler.java    |   2 +-
 .../org/apache/hadoop/scm/XceiverClientRatis.java  |  10 +-
 .../java/org/apache/hadoop/hdsl/HdslUtils.java     |   2 +-
 .../hadoop/hdsl/protocol/DatanodeDetails.java      | 422 +++++++++++++++++++++
 .../apache/hadoop/hdsl/protocol/package-info.java  |  22 ++
 .../org/apache/hadoop/scm/XceiverClientSpi.java    |   4 +-
 .../scm/container/common/helpers/Pipeline.java     |   8 +-
 .../container/common/helpers/PipelineChannel.java  |  19 +-
 .../hadoop/scm/storage/ContainerProtocolCalls.java |  40 +-
 .../main/java/org/apache/ratis/RatisHelper.java    |  19 +-
 .../src/main/proto/DatanodeContainerProtocol.proto |   2 +-
 hadoop-hdsl/common/src/main/proto/hdsl.proto       |  16 +-
 .../apache/hadoop/ozone/HdslDatanodeService.java   | 140 +++++++
 .../org/apache/hadoop/ozone/HdslServerPlugin.java  |  82 ----
 .../container/common/helpers/ContainerUtils.java   |  72 +---
 .../common/interfaces/ContainerManager.java        |   6 +-
 .../common/statemachine/DatanodeStateMachine.java  |  26 +-
 .../common/states/datanode/InitDatanodeState.java  |  32 +-
 .../states/datanode/RunningDatanodeState.java      |  82 +---
 .../states/endpoint/HeartbeatEndpointTask.java     |  45 +--
 .../states/endpoint/RegisterEndpointTask.java      |  43 +--
 .../common/transport/server/XceiverServer.java     |   4 +-
 .../transport/server/ratis/XceiverServerRatis.java |  21 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  13 +-
 .../protocol/StorageContainerDatanodeProtocol.java |  10 +-
 .../protocol/StorageContainerNodeProtocol.java     |  11 +-
 ...inerDatanodeProtocolClientSideTranslatorPB.java |  16 +-
 ...inerDatanodeProtocolServerSideTranslatorPB.java |   8 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |  28 +-
 .../hadoop/ozone/container/common/ScmTestMock.java |  24 +-
 .../container/common/TestDatanodeStateMachine.java |  32 +-
 .../hadoop/ozone/scm/StorageContainerManager.java  |  43 ++-
 .../block/DatanodeDeletedBlockTransactions.java    |  26 +-
 .../ozone/scm/block/SCMBlockDeletingService.java   |  17 +-
 .../ozone/scm/container/ContainerMapping.java      |   2 +-
 .../scm/container/closer/ContainerCloser.java      |   8 +-
 .../algorithms/ContainerPlacementPolicy.java       |   4 +-
 .../placement/algorithms/SCMCommonPolicy.java      |  29 +-
 .../algorithms/SCMContainerPlacementCapacity.java  |  32 +-
 .../algorithms/SCMContainerPlacementRandom.java    |  12 +-
 .../container/replication/ContainerSupervisor.java |  13 +-
 .../scm/container/replication/InProgressPool.java  |  31 +-
 .../apache/hadoop/ozone/scm/node/CommandQueue.java |  20 +-
 .../hadoop/ozone/scm/node/HeartbeatQueueItem.java  |  22 +-
 .../apache/hadoop/ozone/scm/node/NodeManager.java  |  25 +-
 .../hadoop/ozone/scm/node/NodePoolManager.java     |  12 +-
 .../hadoop/ozone/scm/node/SCMNodeManager.java      | 155 ++++----
 .../hadoop/ozone/scm/node/SCMNodePoolManager.java  |  41 +-
 .../ozone/scm/pipelines/PipelineManager.java       |   8 +-
 .../ozone/scm/pipelines/PipelineSelector.java      |  23 +-
 .../scm/pipelines/ratis/RatisManagerImpl.java      |  19 +-
 .../standalone/StandaloneManagerImpl.java          |  18 +-
 .../ozone/container/common/TestEndPoint.java       |  49 ++-
 .../placement/TestContainerPlacement.java          |  24 +-
 .../replication/TestContainerSupervisor.java       |  15 +-
 .../testutils/ReplicationDatanodeStateManager.java |   8 +-
 .../testutils/ReplicationNodeManagerMock.java      |  48 +--
 .../testutils/ReplicationNodePoolManagerMock.java  |  23 +-
 .../org/apache/hadoop/ozone/scm/TestUtils.java     |  58 +--
 .../hadoop/ozone/scm/block/TestBlockManager.java   |   8 +-
 .../ozone/scm/block/TestDeletedBlockLog.java       |  44 ++-
 .../ozone/scm/container/MockNodeManager.java       | 105 ++---
 .../ozone/scm/container/TestContainerMapping.java  |  19 +-
 .../scm/container/closer/TestContainerCloser.java  |  20 +-
 .../ozone/scm/node/TestContainerPlacement.java     |  11 +-
 .../hadoop/ozone/scm/node/TestNodeManager.java     | 227 ++++++-----
 .../ozone/scm/node/TestSCMNodePoolManager.java     |  31 +-
 .../scm/cli/container/InfoContainerHandler.java    |   4 +-
 .../apache/hadoop/ozone/web/utils/OzoneUtils.java  |   4 +-
 .../hadoop/ozone/MiniOzoneClassicCluster.java      |  34 +-
 .../apache/hadoop/ozone/MiniOzoneTestHelper.java   |   6 +-
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |   3 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |  98 ++---
 .../hadoop/ozone/TestStorageContainerManager.java  |   3 +-
 .../ozone/TestStorageContainerManagerHelper.java   |  11 +-
 .../ozone/container/ContainerTestHelper.java       |  60 +--
 .../container/common/TestBlockDeletingService.java |   4 +-
 .../impl/TestContainerDeletionChoosingPolicy.java  |  12 +-
 .../common/impl/TestContainerPersistence.java      |   4 +-
 .../commandhandler/TestCloseContainerHandler.java  |   5 +-
 .../container/metrics/TestContainerMetrics.java    |   5 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   5 +-
 .../ozoneimpl/TestOzoneContainerRatis.java         |   5 +-
 .../container/ozoneimpl/TestRatisManager.java      |  14 +-
 .../container/server/TestContainerServer.java      |  25 +-
 .../ksm/TestKeySpaceManagerRestInterface.java      |   2 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |   2 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  12 +-
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    |  11 +-
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |  31 +-
 .../ozone/web/TestDistributedOzoneVolumes.java     |   2 +-
 .../hadoop/ozone/web/TestLocalOzoneVolumes.java    |   2 +-
 .../hadoop/ozone/web/TestOzoneWebAccess.java       |   2 +-
 .../hadoop/ozone/web/client/TestBuckets.java       |   2 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |   4 +-
 .../hadoop/ozone/web/client/TestOzoneClient.java   |   2 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java |   2 +-
 hadoop-ozone/objectstore-service/pom.xml           |   5 +
 .../hadoop/ozone/web/ObjectStoreRestPlugin.java    |  49 ++-
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |   3 +-
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  52 ++-
 102 files changed, 1758 insertions(+), 1244 deletions(-)

commit 4d7ec92f1bb428f1dcfaf4b8563358368d144b9b
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Mar 27 11:26:43 2018 -0700

    HDFS-13340. Ozone: Fix false positive RAT warning when project built without hds/cblock. Contributed by Elek Marton.

 hadoop-cblock/server/pom.xml                            | 10 ----------
 .../test/resources/dynamicprovisioner/expected1-pv.json | 17 +++++++++++++++++
 .../test/resources/dynamicprovisioner/input1-pvc.json   | 17 +++++++++++++++++
 hadoop-ozone/common/dev-support/findbugsExcludeFile.xml | 17 +++++++++++++++++
 hadoop-ozone/pom.xml                                    |  2 --
 5 files changed, 51 insertions(+), 12 deletions(-)

commit c4dc3999707887f0f4ae3a5a45da009181fc0caa
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Mar 23 22:39:19 2018 -0700

    HDFS-13343. Ozone: Provide docker based acceptance testing on pseudo cluster.
    Contributed by Elek, Marton.

 hadoop-ozone/acceptance-test/README.md             |  38 +++++++
 hadoop-ozone/acceptance-test/pom.xml               |  86 +++++++++++++++
 hadoop-ozone/acceptance-test/src/test/compose/.env |  17 +++
 .../src/test/compose/docker-compose.yaml           |  61 +++++++++++
 .../acceptance-test/src/test/compose/docker-config |  34 ++++++
 .../src/test/robotframework/acceptance/ozone.robot | 116 +++++++++++++++++++++
 6 files changed, 352 insertions(+)

commit 8667598172b9117ce0f3658b42a99ee1053fe342
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Mar 21 19:20:13 2018 -0700

    HDFS-13319. Ozone: start-ozone.sh/stop-ozone.sh fail because of unresolved path.
    Contributed by Mukul Kumar Singh.

 hadoop-ozone/common/src/main/bin/oz | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e3bbdc04f10a796fd92aa6d23783a5b085ca26d2
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Mar 19 15:58:50 2018 -0700

    HDFS-13298. Addendum: Ozone: Make ozone/hdsl/cblock modules turned off by default. Contributed by Elek, Marton.
    
    While committing the original patch, some files were missed. This patch addresses that issue.

 .../src/main/resources/webapps/datanode/dn.js      |  92 ++++++
 .../resources/webapps/static/angular-1.6.4.min.js  | 332 +++++++++++++++++++
 .../webapps/static/angular-nvd3-1.0.9.min.js       |   1 +
 .../webapps/static/angular-route-1.6.4.min.js      |  17 +
 .../main/resources/webapps/static/d3-3.5.17.min.js |   5 +
 .../src/main/resources/webapps/static/dfs-dust.js  | 133 ++++++++
 .../resources/webapps/static/nvd3-1.8.5.min.css    |   2 +
 .../webapps/static/nvd3-1.8.5.min.css.map          |   1 +
 .../resources/webapps/static/nvd3-1.8.5.min.js     |  11 +
 .../resources/webapps/static/nvd3-1.8.5.min.js.map |   1 +
 .../src/main/resources/webapps/static/ozone.css    |  60 ++++
 .../src/main/resources/webapps/static/ozone.js     | 355 +++++++++++++++++++++
 .../resources/webapps/static/templates/config.html |  91 ++++++
 .../resources/webapps/static/templates/jvm.html    |  26 ++
 .../resources/webapps/static/templates/menu.html   |  60 ++++
 .../webapps/static/templates/overview.html         |  39 +++
 .../webapps/static/templates/rpc-metrics.html      |  87 +++++
 17 files changed, 1313 insertions(+)

commit e004e7bdd6a69ed8a0ce02043a1c305a0c3c8c59
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Mar 16 15:53:48 2018 -0700

    HDFS-13304. Document: update the new ozone docker file location. Contributed by Xiaoyu Yao.

 .../src/main/site/markdown/OzoneGettingStarted.md.vm              | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 39b78370590810047b2fb02b9fde42f1eda725a5
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Mar 16 13:27:29 2018 -0700

    HDFS-13298. Ozone: Make ozone/hdsl/cblock modules turned off by default. Contributed by  Elek, Marton.

 hadoop-hdsl/framework/pom.xml                      |   6 +-
 .../framework/src/main/webapps/datanode/dn.js      |  92 ------
 .../src/main/webapps/static/angular-1.6.4.min.js   | 332 -------------------
 .../main/webapps/static/angular-nvd3-1.0.9.min.js  |   1 -
 .../main/webapps/static/angular-route-1.6.4.min.js |  17 -
 .../src/main/webapps/static/d3-3.5.17.min.js       |   5 -
 .../framework/src/main/webapps/static/dfs-dust.js  | 133 --------
 .../src/main/webapps/static/nvd3-1.8.5.min.css     |   2 -
 .../src/main/webapps/static/nvd3-1.8.5.min.css.map |   1 -
 .../src/main/webapps/static/nvd3-1.8.5.min.js      |  11 -
 .../src/main/webapps/static/nvd3-1.8.5.min.js.map  |   1 -
 .../framework/src/main/webapps/static/ozone.css    |  60 ----
 .../framework/src/main/webapps/static/ozone.js     | 355 ---------------------
 .../src/main/webapps/static/templates/config.html  |  91 ------
 .../src/main/webapps/static/templates/jvm.html     |  26 --
 .../src/main/webapps/static/templates/menu.html    |  60 ----
 .../main/webapps/static/templates/overview.html    |  39 ---
 .../main/webapps/static/templates/rpc-metrics.html |  87 -----
 hadoop-hdsl/server-scm/pom.xml                     |  24 ++
 hadoop-ozone/ozone-manager/pom.xml                 |  24 ++
 20 files changed, 51 insertions(+), 1316 deletions(-)

commit ea79132dcd16eb69846f030a20ce666633c47538
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Mar 15 09:23:33 2018 -0700

    HDFS-13258. Ozone: restructure Hdsl/Ozone code to separated maven subprojects.
    Contributed by Elek Marton, Mukul Kumar Singh, Xiaoyu Yao, Ajay Kumar, Anu Engineer, Lokesh Jain, Nanda Kumar.

 .gitattributes                                     |   20 +
 .gitignore                                         |   50 +
 hadoop-cblock/pom.xml                              |   56 +
 .../server/dev-support/findbugsExcludeFile.xml     |   21 +
 hadoop-cblock/server/pom.xml                       |  169 +++
 .../org/apache/hadoop/cblock/CBlockConfigKeys.java |  222 ++++
 .../org/apache/hadoop/cblock/CBlockManager.java    |  426 +++++++
 .../java/org/apache/hadoop/cblock/CblockUtils.java |  129 ++
 ...BlockServiceProtocolClientSideTranslatorPB.java |  135 +++
 .../hadoop/cblock/client/CBlockVolumeClient.java   |   83 ++
 .../apache/hadoop/cblock/client/package-info.java  |   18 +
 .../hadoop/cblock/exception/CBlockException.java   |   29 +
 .../hadoop/cblock/exception/package-info.java      |   18 +
 .../hadoop/cblock/jscsiHelper/BlockWriterTask.java |  175 +++
 ...CBlockClientProtocolClientSideTranslatorPB.java |  147 +++
 .../cblock/jscsiHelper/CBlockIStorageImpl.java     |  440 +++++++
 .../cblock/jscsiHelper/CBlockManagerHandler.java   |   50 +
 .../cblock/jscsiHelper/CBlockTargetMetrics.java    |  334 ++++++
 .../cblock/jscsiHelper/CBlockTargetServer.java     |  128 ++
 .../cblock/jscsiHelper/ContainerCacheFlusher.java  |  599 +++++++++
 .../cblock/jscsiHelper/SCSITargetDaemon.java       |  132 ++
 .../cblock/jscsiHelper/cache/CacheModule.java      |   52 +
 .../cblock/jscsiHelper/cache/LogicalBlock.java     |   50 +
 .../jscsiHelper/cache/impl/AsyncBlockWriter.java   |  221 ++++
 .../cache/impl/BlockBufferFlushTask.java           |  118 ++
 .../jscsiHelper/cache/impl/BlockBufferManager.java |  184 +++
 .../jscsiHelper/cache/impl/CBlockLocalCache.java   |  577 +++++++++
 .../cblock/jscsiHelper/cache/impl/DiskBlock.java   |   77 ++
 .../jscsiHelper/cache/impl/SyncBlockReader.java    |  263 ++++
 .../jscsiHelper/cache/impl/package-info.java       |   18 +
 .../cblock/jscsiHelper/cache/package-info.java     |   18 +
 .../hadoop/cblock/jscsiHelper/package-info.java    |   18 +
 .../cblock/kubernetes/DynamicProvisioner.java      |  331 +++++
 .../hadoop/cblock/kubernetes/package-info.java     |   23 +
 .../hadoop/cblock/meta/ContainerDescriptor.java    |  107 ++
 .../hadoop/cblock/meta/VolumeDescriptor.java       |  269 +++++
 .../org/apache/hadoop/cblock/meta/VolumeInfo.java  |   79 ++
 .../apache/hadoop/cblock/meta/package-info.java    |   18 +
 .../org/apache/hadoop/cblock/package-info.java     |   18 +
 .../hadoop/cblock/proto/CBlockClientProtocol.java  |   38 +
 .../hadoop/cblock/proto/CBlockServiceProtocol.java |   45 +
 .../hadoop/cblock/proto/MountVolumeResponse.java   |   79 ++
 .../apache/hadoop/cblock/proto/package-info.java   |   18 +
 .../protocolPB/CBlockClientServerProtocolPB.java   |   37 +
 ...ClientServerProtocolServerSideTranslatorPB.java |  116 ++
 .../cblock/protocolPB/CBlockServiceProtocolPB.java |   35 +
 ...BlockServiceProtocolServerSideTranslatorPB.java |  159 +++
 .../hadoop/cblock/protocolPB/package-info.java     |   18 +
 .../hadoop/cblock/storage/StorageManager.java      |  427 +++++++
 .../apache/hadoop/cblock/storage/package-info.java |   18 +
 .../org/apache/hadoop/cblock/util/KeyUtil.java     |   49 +
 .../apache/hadoop/cblock/util/package-info.java    |   18 +
 .../main/proto/CBlockClientServerProtocol.proto    |   93 ++
 .../src/main/proto/CBlockServiceProtocol.proto     |  133 ++
 .../server/src/main/resources/cblock-default.xml   |  347 ++++++
 .../apache/hadoop/cblock/TestBufferManager.java    |  456 +++++++
 .../cblock/TestCBlockConfigurationFields.java      |   35 +
 .../apache/hadoop/cblock/TestCBlockReadWrite.java  |  377 ++++++
 .../org/apache/hadoop/cblock/TestCBlockServer.java |  212 ++++
 .../hadoop/cblock/TestCBlockServerPersistence.java |  132 ++
 .../apache/hadoop/cblock/TestLocalBlockCache.java  |  444 +++++++
 .../cblock/kubernetes/TestDynamicProvisioner.java  |   74 ++
 .../hadoop/cblock/util/ContainerLookUpService.java |   73 ++
 .../hadoop/cblock/util/MockStorageClient.java      |  176 +++
 .../resources/dynamicprovisioner/expected1-pv.json |   37 +
 .../resources/dynamicprovisioner/input1-pvc.json   |   38 +
 hadoop-cblock/tools/pom.xml                        |   42 +
 .../org/apache/hadoop/cblock/cli/CBlockCli.java    |  265 ++++
 .../org/apache/hadoop/cblock/cli/package-info.java |   18 +
 .../org/apache/hadoop/cblock/TestCBlockCLI.java    |  242 ++++
 hadoop-hdsl/client/pom.xml                         |   48 +
 .../hadoop/ozone/client/OzoneClientUtils.java      |  231 ++++
 .../apache/hadoop/ozone/client/package-info.java   |   23 +
 .../java/org/apache/hadoop/scm/XceiverClient.java  |  192 +++
 .../apache/hadoop/scm/XceiverClientHandler.java    |  204 ++++
 .../hadoop/scm/XceiverClientInitializer.java       |   72 ++
 .../apache/hadoop/scm/XceiverClientManager.java    |  219 ++++
 .../apache/hadoop/scm/XceiverClientMetrics.java    |   92 ++
 .../org/apache/hadoop/scm/XceiverClientRatis.java  |  264 ++++
 .../scm/client/ContainerOperationClient.java       |  403 +++++++
 .../org/apache/hadoop/scm/client/package-info.java |   23 +
 .../java/org/apache/hadoop/scm/package-info.java   |   23 +
 .../hadoop/scm/storage/ChunkInputStream.java       |  261 ++++
 .../hadoop/scm/storage/ChunkOutputStream.java      |  227 ++++
 .../apache/hadoop/scm/storage/package-info.java    |   23 +
 .../common/dev-support/findbugsExcludeFile.xml     |   21 +
 hadoop-hdsl/common/pom.xml                         |  146 +++
 .../java/org/apache/hadoop/hdsl/HdslUtils.java     |  273 +++++
 .../hadoop/hdsl/conf/OzoneConfiguration.java       |  161 +++
 .../org/apache/hadoop/hdsl/conf/package-info.java  |   18 +
 .../java/org/apache/hadoop/hdsl/package-info.java  |   23 +
 .../java/org/apache/hadoop/ozone/OzoneAcl.java     |  231 ++++
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  239 ++++
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  167 +++
 .../org/apache/hadoop/ozone/client/OzoneQuota.java |  203 ++++
 .../hadoop/ozone/client/ReplicationFactor.java     |   63 +
 .../hadoop/ozone/client/ReplicationType.java       |   28 +
 .../apache/hadoop/ozone/client/package-info.java   |   23 +
 .../org/apache/hadoop/ozone/common/BlockGroup.java |   87 ++
 .../ozone/common/DeleteBlockGroupResult.java       |   94 ++
 .../common/InconsistentStorageStateException.java  |   51 +
 .../org/apache/hadoop/ozone/common/Storage.java    |  249 ++++
 .../apache/hadoop/ozone/common/StorageInfo.java    |  184 +++
 .../apache/hadoop/ozone/common/package-info.java   |   18 +
 .../InvalidStateTransitionException.java           |   42 +
 .../ozone/common/statemachine/StateMachine.java    |   68 ++
 .../ozone/common/statemachine/package-info.java    |   21 +
 .../ozone/container/common/helpers/ChunkInfo.java  |  185 +++
 .../ozone/container/common/helpers/KeyData.java    |  170 +++
 .../container/common/helpers/package-info.java     |   23 +
 .../java/org/apache/hadoop/ozone/lease/Lease.java  |  189 +++
 .../ozone/lease/LeaseAlreadyExistException.java    |   46 +
 .../hadoop/ozone/lease/LeaseCallbackExecutor.java  |   65 +
 .../apache/hadoop/ozone/lease/LeaseException.java  |   45 +
 .../hadoop/ozone/lease/LeaseExpiredException.java  |   45 +
 .../apache/hadoop/ozone/lease/LeaseManager.java    |  247 ++++
 .../lease/LeaseManagerNotRunningException.java     |   45 +
 .../hadoop/ozone/lease/LeaseNotFoundException.java |   46 +
 .../apache/hadoop/ozone/lease/package-info.java    |   26 +
 .../java/org/apache/hadoop/ozone/package-info.java |   35 +
 ...lockLocationProtocolServerSideTranslatorPB.java |  169 +++
 ...inerLocationProtocolServerSideTranslatorPB.java |  202 ++++
 .../hadoop/ozone/protocolPB/package-info.java      |   24 +
 .../apache/hadoop/ozone/web/utils/JsonUtils.java   |   71 ++
 .../java/org/apache/hadoop/scm/ScmConfigKeys.java  |  271 +++++
 .../main/java/org/apache/hadoop/scm/ScmInfo.java   |   81 ++
 .../org/apache/hadoop/scm/XceiverClientSpi.java    |  129 ++
 .../org/apache/hadoop/scm/client/ScmClient.java    |  139 +++
 .../org/apache/hadoop/scm/client/package-info.java |   24 +
 .../scm/container/ContainerStates/ContainerID.java |   97 ++
 .../container/ContainerStates/package-info.java    |   22 +
 .../container/common/helpers/AllocatedBlock.java   |   77 ++
 .../container/common/helpers/ContainerInfo.java    |  333 +++++
 .../common/helpers/DeleteBlockResult.java          |   52 +
 .../scm/container/common/helpers/Pipeline.java     |  253 ++++
 .../container/common/helpers/PipelineChannel.java  |  121 ++
 .../common/helpers/StorageContainerException.java  |  104 ++
 .../scm/container/common/helpers/package-info.java |   22 +
 .../java/org/apache/hadoop/scm/package-info.java   |   24 +
 .../hadoop/scm/protocol/LocatedContainer.java      |  127 ++
 .../scm/protocol/ScmBlockLocationProtocol.java     |   72 ++
 .../hadoop/scm/protocol/ScmLocatedBlock.java       |  100 ++
 .../protocol/StorageContainerLocationProtocol.java |  123 ++
 .../apache/hadoop/scm/protocol/package-info.java   |   19 +
 ...lockLocationProtocolClientSideTranslatorPB.java |  207 ++++
 .../scm/protocolPB/ScmBlockLocationProtocolPB.java |   35 +
 ...inerLocationProtocolClientSideTranslatorPB.java |  304 +++++
 .../StorageContainerLocationProtocolPB.java        |   34 +
 .../apache/hadoop/scm/protocolPB/package-info.java |   24 +
 .../hadoop/scm/storage/ContainerProtocolCalls.java |  397 ++++++
 .../apache/hadoop/scm/storage/package-info.java    |   23 +
 .../org/apache/hadoop/utils/BackgroundService.java |  161 +++
 .../org/apache/hadoop/utils/BackgroundTask.java    |   28 +
 .../apache/hadoop/utils/BackgroundTaskQueue.java   |   64 +
 .../apache/hadoop/utils/BackgroundTaskResult.java  |   44 +
 .../org/apache/hadoop/utils/BatchOperation.java    |   90 ++
 .../org/apache/hadoop/utils/EntryConsumer.java     |   38 +
 .../java/org/apache/hadoop/utils/LevelDBStore.java |  380 ++++++
 .../apache/hadoop/utils/MetadataKeyFilters.java    |  118 ++
 .../org/apache/hadoop/utils/MetadataStore.java     |  172 +++
 .../apache/hadoop/utils/MetadataStoreBuilder.java  |  125 ++
 .../java/org/apache/hadoop/utils/RocksDBStore.java |  382 ++++++
 .../org/apache/hadoop/utils/RocksDBStoreMBean.java |  136 +++
 .../java/org/apache/hadoop/utils/package-info.java |   18 +
 .../main/java/org/apache/ratis/RatisHelper.java    |  128 ++
 .../main/java/org/apache/ratis/package-info.java   |   22 +
 .../com/google/protobuf/ShadedProtoUtil.java       |   38 +
 .../shaded/com/google/protobuf/package-info.java   |   22 +
 .../src/main/proto/DatanodeContainerProtocol.proto |  415 +++++++
 .../src/main/proto/ScmBlockLocationProtocol.proto  |  166 +++
 .../proto/StorageContainerLocationProtocol.proto   |  214 ++++
 hadoop-hdsl/common/src/main/proto/hdsl.proto       |  162 +++
 .../common/src/main/resources/ozone-default.xml    | 1031 ++++++++++++++++
 .../org/apache/hadoop/ozone/TestMetadataStore.java |  414 +++++++
 .../org/apache/hadoop/ozone/TestOzoneAcls.java     |  141 +++
 .../hadoop/ozone/common/TestStateMachine.java      |  104 ++
 .../hadoop/ozone/lease/TestLeaseManager.java       |  374 ++++++
 .../apache/hadoop/ozone/lease/package-info.java    |   21 +
 .../java/org/apache/hadoop/ozone/package-info.java |   21 +
 .../java/org/apache/hadoop/scm/TestArchive.java    |  114 ++
 .../java/org/apache/hadoop/scm/package-info.java   |   21 +
 .../apache/hadoop/utils/TestRocksDBStoreMBean.java |   87 ++
 hadoop-hdsl/container-service/pom.xml              |  114 ++
 .../org/apache/hadoop/ozone/HdslServerPlugin.java  |   82 ++
 .../ozone/container/common/helpers/ChunkUtils.java |  345 ++++++
 .../container/common/helpers/ContainerData.java    |  326 +++++
 .../container/common/helpers/ContainerMetrics.java |  121 ++
 .../container/common/helpers/ContainerReport.java  |  218 ++++
 .../container/common/helpers/ContainerUtils.java   |  477 ++++++++
 .../helpers/DeletedContainerBlocksSummary.java     |  103 ++
 .../ozone/container/common/helpers/FileUtils.java  |   81 ++
 .../ozone/container/common/helpers/KeyUtils.java   |  147 +++
 .../container/common/helpers/package-info.java     |   22 +
 .../container/common/impl/ChunkManagerImpl.java    |  232 ++++
 .../common/impl/ContainerLocationManagerImpl.java  |   92 ++
 .../common/impl/ContainerReportManagerImpl.java    |   89 ++
 .../container/common/impl/ContainerStatus.java     |  217 ++++
 .../common/impl/ContainerStorageLocation.java      |  203 ++++
 .../ozone/container/common/impl/Dispatcher.java    |  708 +++++++++++
 .../container/common/impl/KeyManagerImpl.java      |  201 ++++
 .../RandomContainerDeletionChoosingPolicy.java     |   69 ++
 .../common/impl/StorageLocationReport.java         |   63 +
 ...TopNOrderedContainerDeletionChoosingPolicy.java |   90 ++
 .../ozone/container/common/impl/package-info.java  |   22 +
 .../container/common/interfaces/ChunkManager.java  |   75 ++
 .../ContainerDeletionChoosingPolicy.java           |   45 +
 .../common/interfaces/ContainerDispatcher.java     |   49 +
 .../interfaces/ContainerLocationManager.java       |   58 +
 .../interfaces/ContainerLocationManagerMXBean.java |   36 +
 .../common/interfaces/ContainerManager.java        |  277 +++++
 .../common/interfaces/ContainerReportManager.java  |   32 +
 .../container/common/interfaces/KeyManager.java    |   75 ++
 .../container/common/interfaces/package-info.java  |   20 +
 .../ozone/container/common/package-info.java       |   28 +
 .../common/statemachine/DatanodeStateMachine.java  |  386 ++++++
 .../common/statemachine/EndpointStateMachine.java  |  295 +++++
 .../statemachine/EndpointStateMachineMBean.java    |   34 +
 .../common/statemachine/SCMConnectionManager.java  |  203 ++++
 .../statemachine/SCMConnectionManagerMXBean.java   |   27 +
 .../common/statemachine/StateContext.java          |  281 +++++
 .../background/BlockDeletingService.java           |  238 ++++
 .../statemachine/background/package-info.java      |   18 +
 .../commandhandler/CloseContainerHandler.java      |  112 ++
 .../commandhandler/CommandDispatcher.java          |  177 +++
 .../commandhandler/CommandHandler.java             |   59 +
 .../commandhandler/ContainerReportHandler.java     |  110 ++
 .../commandhandler/DeleteBlocksCommandHandler.java |  204 ++++
 .../statemachine/commandhandler/package-info.java  |   18 +
 .../common/statemachine/package-info.java          |   28 +
 .../container/common/states/DatanodeState.java     |   55 +
 .../common/states/datanode/InitDatanodeState.java  |  167 +++
 .../states/datanode/RunningDatanodeState.java      |  253 ++++
 .../common/states/datanode/package-info.java       |   21 +
 .../states/endpoint/HeartbeatEndpointTask.java     |  270 +++++
 .../states/endpoint/RegisterEndpointTask.java      |  198 +++
 .../states/endpoint/VersionEndpointTask.java       |   66 +
 .../common/states/endpoint/package-info.java       |   20 +
 .../container/common/states/package-info.java      |   18 +
 .../common/transport/server/XceiverServer.java     |  128 ++
 .../transport/server/XceiverServerHandler.java     |   80 ++
 .../transport/server/XceiverServerInitializer.java |   61 +
 .../common/transport/server/XceiverServerSpi.java  |   43 +
 .../common/transport/server/package-info.java      |   24 +
 .../server/ratis/ContainerStateMachine.java        |  290 +++++
 .../transport/server/ratis/XceiverServerRatis.java |  214 ++++
 .../transport/server/ratis/package-info.java       |   23 +
 .../container/common/utils/ContainerCache.java     |  168 +++
 .../ozone/container/common/utils/package-info.java |   18 +
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  269 +++++
 .../ozone/container/ozoneimpl/package-info.java    |   21 +
 .../java/org/apache/hadoop/ozone/package-info.java |   23 +
 .../protocol/StorageContainerDatanodeProtocol.java |   84 ++
 .../protocol/StorageContainerNodeProtocol.java     |   69 ++
 .../hadoop/ozone/protocol/VersionResponse.java     |  150 +++
 .../protocol/commands/CloseContainerCommand.java   |   75 ++
 .../protocol/commands/DeleteBlocksCommand.java     |   63 +
 .../ozone/protocol/commands/RegisteredCommand.java |  177 +++
 .../ozone/protocol/commands/ReregisterCommand.java |   58 +
 .../hadoop/ozone/protocol/commands/SCMCommand.java |   41 +
 .../protocol/commands/SendContainerCommand.java    |   80 ++
 .../ozone/protocol/commands/package-info.java      |   21 +
 .../apache/hadoop/ozone/protocol/package-info.java |   23 +
 ...inerDatanodeProtocolClientSideTranslatorPB.java |  195 +++
 .../StorageContainerDatanodeProtocolPB.java        |   32 +
 ...inerDatanodeProtocolServerSideTranslatorPB.java |  113 ++
 .../apache/hadoop/ozone/scm/HdslServerUtil.java    |  304 +++++
 .../org/apache/hadoop/ozone/scm/VersionInfo.java   |   81 ++
 .../proto/StorageContainerDatanodeProtocol.proto   |  367 ++++++
 .../com.sun.jersey.spi.container.ContainerProvider |   16 +
 .../ozone/container/common/ContainerTestUtils.java |   68 ++
 .../ozone/container/common/SCMTestUtils.java       |  121 ++
 .../hadoop/ozone/container/common/ScmTestMock.java |  261 ++++
 .../container/common/TestDatanodeStateMachine.java |  361 ++++++
 .../testutils/BlockDeletingServiceTestImpl.java    |  103 ++
 .../ozone/container/testutils/package-info.java    |   18 +
 hadoop-hdsl/framework/pom.xml                      |  102 ++
 .../apache/hadoop/ozone/web/OzoneHttpServer.java   |  218 ++++
 .../org/apache/hadoop/ozone/web/package-info.java  |   23 +
 .../apache/hadoop/ozone/web/util/ServerUtils.java  |  140 +++
 .../apache/hadoop/ozone/web/util/package-info.java |   23 +
 .../framework/src/main/webapps/datanode/dn.js      |   92 ++
 .../src/main/webapps/static/angular-1.6.4.min.js   |  332 +++++
 .../main/webapps/static/angular-nvd3-1.0.9.min.js  |    1 +
 .../main/webapps/static/angular-route-1.6.4.min.js |   17 +
 .../src/main/webapps/static/d3-3.5.17.min.js       |    5 +
 .../framework/src/main/webapps/static/dfs-dust.js  |  133 ++
 .../src/main/webapps/static/nvd3-1.8.5.min.css     |    2 +
 .../src/main/webapps/static/nvd3-1.8.5.min.css.map |    1 +
 .../src/main/webapps/static/nvd3-1.8.5.min.js      |   11 +
 .../src/main/webapps/static/nvd3-1.8.5.min.js.map  |    1 +
 .../framework/src/main/webapps/static/ozone.css    |   60 +
 .../framework/src/main/webapps/static/ozone.js     |  355 ++++++
 .../src/main/webapps/static/templates/config.html  |   91 ++
 .../src/main/webapps/static/templates/jvm.html     |   26 +
 .../src/main/webapps/static/templates/menu.html    |   60 +
 .../main/webapps/static/templates/overview.html    |   39 +
 .../main/webapps/static/templates/rpc-metrics.html |   87 ++
 .../framework/src/test/resources/ozone-site.xml    |   24 +
 hadoop-hdsl/pom.xml                                |   60 +
 hadoop-hdsl/server-scm/pom.xml                     |  141 +++
 .../org/apache/hadoop/ozone/scm/SCMMXBean.java     |   50 +
 .../org/apache/hadoop/ozone/scm/SCMStorage.java    |   73 ++
 .../hadoop/ozone/scm/StorageContainerManager.java  | 1269 ++++++++++++++++++++
 .../scm/StorageContainerManagerHttpServer.java     |   77 ++
 .../hadoop/ozone/scm/block/BlockManager.java       |   86 ++
 .../hadoop/ozone/scm/block/BlockManagerImpl.java   |  531 ++++++++
 .../hadoop/ozone/scm/block/BlockmanagerMXBean.java |   30 +
 .../block/DatanodeDeletedBlockTransactions.java    |  130 ++
 .../hadoop/ozone/scm/block/DeletedBlockLog.java    |  124 ++
 .../ozone/scm/block/DeletedBlockLogImpl.java       |  352 ++++++
 .../ozone/scm/block/SCMBlockDeletingService.java   |  172 +++
 .../hadoop/ozone/scm/block/package-info.java       |   22 +
 .../ozone/scm/container/ContainerMapping.java      |  607 ++++++++++
 .../ozone/scm/container/ContainerStateManager.java |  451 +++++++
 .../ContainerStates/ContainerAttribute.java        |  244 ++++
 .../container/ContainerStates/ContainerState.java  |   96 ++
 .../ContainerStates/ContainerStateMap.java         |  402 +++++++
 .../container/ContainerStates/package-info.java    |   22 +
 .../apache/hadoop/ozone/scm/container/Mapping.java |  107 ++
 .../scm/container/closer/ContainerCloser.java      |  192 +++
 .../ozone/scm/container/closer/package-info.java   |   23 +
 .../hadoop/ozone/scm/container/package-info.java   |   22 +
 .../algorithms/ContainerPlacementPolicy.java       |   41 +
 .../placement/algorithms/SCMCommonPolicy.java      |  194 +++
 .../algorithms/SCMContainerPlacementCapacity.java  |  133 ++
 .../algorithms/SCMContainerPlacementRandom.java    |   89 ++
 .../placement/algorithms/package-info.java         |   18 +
 .../container/placement/metrics/ContainerStat.java |  166 +++
 .../placement/metrics/DatanodeMetric.java          |   91 ++
 .../container/placement/metrics/LongMetric.java    |  162 +++
 .../scm/container/placement/metrics/NodeStat.java  |   67 ++
 .../container/placement/metrics/SCMMetrics.java    |  154 +++
 .../container/placement/metrics/SCMNodeMetric.java |  223 ++++
 .../container/placement/metrics/SCMNodeStat.java   |  139 +++
 .../container/placement/metrics/package-info.java  |   20 +
 .../scm/container/placement/package-info.java      |   19 +
 .../container/replication/ContainerSupervisor.java |  333 +++++
 .../scm/container/replication/InProgressPool.java  |  313 +++++
 .../scm/container/replication/PeriodicPool.java    |  119 ++
 .../scm/container/replication/package-info.java    |   23 +
 .../hadoop/ozone/scm/exceptions/SCMException.java  |  119 ++
 .../hadoop/ozone/scm/exceptions/package-info.java  |   18 +
 .../apache/hadoop/ozone/scm/node/CommandQueue.java |  190 +++
 .../hadoop/ozone/scm/node/HeartbeatQueueItem.java  |  116 ++
 .../apache/hadoop/ozone/scm/node/NodeManager.java  |  152 +++
 .../hadoop/ozone/scm/node/NodeManagerMXBean.java   |   57 +
 .../hadoop/ozone/scm/node/NodePoolManager.java     |   72 ++
 .../hadoop/ozone/scm/node/SCMNodeManager.java      |  891 ++++++++++++++
 .../hadoop/ozone/scm/node/SCMNodePoolManager.java  |  267 ++++
 .../apache/hadoop/ozone/scm/node/package-info.java |   31 +
 .../org/apache/hadoop/ozone/scm/package-info.java  |   22 +
 .../ozone/scm/pipelines/PipelineManager.java       |  176 +++
 .../ozone/scm/pipelines/PipelineSelector.java      |  227 ++++
 .../hadoop/ozone/scm/pipelines/package-info.java   |   38 +
 .../scm/pipelines/ratis/RatisManagerImpl.java      |  155 +++
 .../ozone/scm/pipelines/ratis/package-info.java    |   18 +
 .../standalone/StandaloneManagerImpl.java          |  142 +++
 .../scm/pipelines/standalone/package-info.java     |   18 +
 .../hadoop/ozone/scm/ratis/package-info.java       |   22 +
 .../server-scm/src/main/webapps/scm/index.html     |   76 ++
 .../server-scm/src/main/webapps/scm/main.html      |   20 +
 .../src/main/webapps/scm/scm-overview.html         |   60 +
 hadoop-hdsl/server-scm/src/main/webapps/scm/scm.js |   54 +
 .../ozone/container/common/TestEndPoint.java       |  465 +++++++
 .../placement/TestContainerPlacement.java          |  131 ++
 .../container/placement/TestDatanodeMetrics.java   |   59 +
 .../replication/TestContainerSupervisor.java       |  268 +++++
 .../ozone/container/replication/package-info.java  |   18 +
 .../testutils/ReplicationDatanodeStateManager.java |   97 ++
 .../testutils/ReplicationNodeManagerMock.java      |  323 +++++
 .../testutils/ReplicationNodePoolManagerMock.java  |  132 ++
 .../ozone/container/testutils/package-info.java    |   18 +
 .../hadoop/ozone/scm/HdslServerUtilTest.java       |  315 +++++
 .../scm/TestStorageContainerManagerHttpServer.java |  141 +++
 .../org/apache/hadoop/ozone/scm/TestUtils.java     |  103 ++
 .../hadoop/ozone/scm/block/TestBlockManager.java   |  160 +++
 .../ozone/scm/block/TestDeletedBlockLog.java       |  348 ++++++
 .../ContainerStates/TestContainerAttribute.java    |  142 +++
 .../ozone/scm/container/MockNodeManager.java       |  520 ++++++++
 .../ozone/scm/container/TestContainerMapping.java  |  336 ++++++
 .../scm/container/closer/TestContainerCloser.java  |  221 ++++
 .../ozone/scm/node/TestContainerPlacement.java     |  173 +++
 .../hadoop/ozone/scm/node/TestNodeManager.java     | 1148 ++++++++++++++++++
 .../ozone/scm/node/TestSCMNodePoolManager.java     |  158 +++
 .../org/apache/hadoop/ozone/scm/package-info.java  |   21 +
 hadoop-hdsl/tools/pom.xml                          |   61 +
 .../apache/hadoop/ozone/scm/cli/OzoneBaseCLI.java  |   43 +
 .../hadoop/ozone/scm/cli/OzoneCommandHandler.java  |   87 ++
 .../apache/hadoop/ozone/scm/cli/ResultCode.java    |   31 +
 .../org/apache/hadoop/ozone/scm/cli/SCMCLI.java    |  230 ++++
 .../scm/cli/container/CloseContainerHandler.java   |   84 ++
 .../scm/cli/container/ContainerCommandHandler.java |  128 ++
 .../scm/cli/container/CreateContainerHandler.java  |   81 ++
 .../scm/cli/container/DeleteContainerHandler.java  |   92 ++
 .../scm/cli/container/InfoContainerHandler.java    |  115 ++
 .../scm/cli/container/ListContainerHandler.java    |  121 ++
 .../ozone/scm/cli/container/package-info.java      |   19 +
 .../apache/hadoop/ozone/scm/cli/package-info.java  |   19 +
 hadoop-ozone/client/pom.xml                        |   62 +
 .../org/apache/hadoop/ozone/client/BucketArgs.java |  123 ++
 .../apache/hadoop/ozone/client/ObjectStore.java    |  210 ++++
 .../apache/hadoop/ozone/client/OzoneBucket.java    |  360 ++++++
 .../apache/hadoop/ozone/client/OzoneClient.java    |  103 ++
 .../hadoop/ozone/client/OzoneClientFactory.java    |  307 +++++
 .../ozone/client/OzoneClientInvocationHandler.java |   62 +
 .../org/apache/hadoop/ozone/client/OzoneKey.java   |  119 ++
 .../apache/hadoop/ozone/client/OzoneVolume.java    |  293 +++++
 .../org/apache/hadoop/ozone/client/VolumeArgs.java |  128 ++
 .../ozone/client/io/ChunkGroupInputStream.java     |  319 +++++
 .../ozone/client/io/ChunkGroupOutputStream.java    |  492 ++++++++
 .../ozone/client/io/OzoneContainerTranslation.java |   51 +
 .../hadoop/ozone/client/io/OzoneInputStream.java   |   60 +
 .../hadoop/ozone/client/io/OzoneOutputStream.java  |   64 +
 .../hadoop/ozone/client/io/package-info.java       |   23 +
 .../apache/hadoop/ozone/client/package-info.java   |   23 +
 .../ozone/client/protocol/ClientProtocol.java      |  323 +++++
 .../hadoop/ozone/client/protocol/package-info.java |   23 +
 .../client/rest/DefaultRestServerSelector.java     |   36 +
 .../ozone/client/rest/OzoneExceptionMapper.java    |   45 +
 .../hadoop/ozone/client/rest/RestClient.java       |  799 ++++++++++++
 .../ozone/client/rest/RestServerSelector.java      |   40 +
 .../ozone/client/rest/exceptions/package-info.java |   22 +
 .../ozone/client/rest/headers/package-info.java    |   22 +
 .../hadoop/ozone/client/rest/package-info.java     |   23 +
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  567 +++++++++
 .../hadoop/ozone/client/rpc/package-info.java      |   23 +
 .../hadoop/ozone/web/client/OzoneBucket.java       |  644 ++++++++++
 .../apache/hadoop/ozone/web/client/OzoneKey.java   |   44 +
 .../hadoop/ozone/web/client/OzoneRestClient.java   |  803 +++++++++++++
 .../ozone/web/client/OzoneRestClientException.java |   54 +
 .../hadoop/ozone/web/client/OzoneVolume.java       |  583 +++++++++
 .../hadoop/ozone/web/client/package-info.java      |   34 +
 .../hadoop/ozone/client/TestOzoneClientUtils.java  |  105 ++
 .../apache/hadoop/ozone/client/package-info.java   |   23 +
 .../common/dev-support/findbugsExcludeFile.xml     |    5 +
 hadoop-ozone/common/pom.xml                        |  108 ++
 hadoop-ozone/common/src/main/bin/oz                |  332 +++++
 hadoop-ozone/common/src/main/bin/start-ozone.sh    |  105 ++
 hadoop-ozone/common/src/main/bin/stop-ozone.sh     |   99 ++
 hadoop-ozone/common/src/main/conf/ozone-site.xml   |   24 +
 .../java/org/apache/hadoop/ozone/KsmUtils.java     |   87 ++
 .../hadoop/ozone/client/io/LengthInputStream.java  |   49 +
 .../hadoop/ozone/client/io/package-info.java       |   22 +
 .../hadoop/ozone/client/rest/OzoneException.java   |  267 ++++
 .../hadoop/ozone/client/rest/headers/Header.java   |   71 ++
 .../ozone/client/rest/headers/package-info.java    |   22 +
 .../hadoop/ozone/client/rest/package-info.java     |   22 +
 .../ozone/client/rest/response/BucketInfo.java     |  231 ++++
 .../hadoop/ozone/client/rest/response/KeyInfo.java |  216 ++++
 .../ozone/client/rest/response/VolumeInfo.java     |  215 ++++
 .../ozone/client/rest/response/VolumeOwner.java    |   61 +
 .../ozone/client/rest/response/package-info.java   |   24 +
 .../org/apache/hadoop/ozone/ksm/KSMConfigKeys.java |   81 ++
 .../hadoop/ozone/ksm/helpers/KsmBucketArgs.java    |  233 ++++
 .../hadoop/ozone/ksm/helpers/KsmBucketInfo.java    |  235 ++++
 .../hadoop/ozone/ksm/helpers/KsmKeyArgs.java       |  119 ++
 .../hadoop/ozone/ksm/helpers/KsmKeyInfo.java       |  243 ++++
 .../ozone/ksm/helpers/KsmKeyLocationInfo.java      |  136 +++
 .../ozone/ksm/helpers/KsmKeyLocationInfoGroup.java |  118 ++
 .../hadoop/ozone/ksm/helpers/KsmOzoneAclMap.java   |  110 ++
 .../hadoop/ozone/ksm/helpers/KsmVolumeArgs.java    |  223 ++++
 .../hadoop/ozone/ksm/helpers/OpenKeySession.java   |   50 +
 .../hadoop/ozone/ksm/helpers/ServiceInfo.java      |  237 ++++
 .../hadoop/ozone/ksm/helpers/VolumeArgs.java       |  140 +++
 .../hadoop/ozone/ksm/helpers/package-info.java     |   18 +
 .../org/apache/hadoop/ozone/ksm/package-info.java  |   21 +
 .../ksm/protocol/KeySpaceManagerProtocol.java      |  245 ++++
 .../hadoop/ozone/ksm/protocol/package-info.java    |   19 +
 ...SpaceManagerProtocolClientSideTranslatorPB.java |  744 ++++++++++++
 .../ksm/protocolPB/KeySpaceManagerProtocolPB.java  |   34 +
 .../hadoop/ozone/ksm/protocolPB/package-info.java  |   19 +
 .../java/org/apache/hadoop/ozone/package-info.java |   22 +
 .../hadoop/ozone/protocolPB/KSMPBHelper.java       |  113 ++
 .../hadoop/ozone/protocolPB/package-info.java      |   24 +
 .../apache/hadoop/ozone/tools/OzoneGetConf.java    |  269 +++++
 .../apache/hadoop/ozone/tools/package-info.java    |   21 +
 .../hadoop/ozone/web/handlers/BucketArgs.java      |  214 ++++
 .../apache/hadoop/ozone/web/handlers/KeyArgs.java  |  117 ++
 .../apache/hadoop/ozone/web/handlers/ListArgs.java |  142 +++
 .../apache/hadoop/ozone/web/handlers/UserArgs.java |  168 +++
 .../hadoop/ozone/web/handlers/VolumeArgs.java      |  142 +++
 .../hadoop/ozone/web/handlers/package-info.java    |   22 +
 .../hadoop/ozone/web/request/OzoneQuota.java       |  214 ++++
 .../hadoop/ozone/web/request/package-info.java     |   23 +
 .../hadoop/ozone/web/response/BucketInfo.java      |  325 +++++
 .../apache/hadoop/ozone/web/response/KeyInfo.java  |  290 +++++
 .../hadoop/ozone/web/response/ListBuckets.java     |  154 +++
 .../apache/hadoop/ozone/web/response/ListKeys.java |  209 ++++
 .../hadoop/ozone/web/response/ListVolumes.java     |  152 +++
 .../hadoop/ozone/web/response/VolumeInfo.java      |  308 +++++
 .../hadoop/ozone/web/response/VolumeOwner.java     |   60 +
 .../hadoop/ozone/web/response/package-info.java    |   23 +
 .../apache/hadoop/ozone/web/utils/OzoneUtils.java  |  227 ++++
 .../hadoop/ozone/web/utils/package-info.java       |   18 +
 .../src/main/proto/KeySpaceManagerProtocol.proto   |  457 +++++++
 .../common/src/main/shellprofile.d/hadoop-ozone.sh |   46 +
 .../apache/hadoop/ozone/web/TestBucketInfo.java    |   81 ++
 .../hadoop/ozone/web/TestOzoneHttpServer.java      |   98 ++
 .../org/apache/hadoop/ozone/web/TestQuota.java     |  116 ++
 .../org/apache/hadoop/ozone/web/TestUtils.java     |  101 ++
 .../apache/hadoop/ozone/web/TestVolumeStructs.java |   73 ++
 .../org/apache/hadoop/ozone/web/package-info.java  |   21 +
 hadoop-ozone/integration-test/pom.xml              |  117 ++
 .../hadoop/ozone/MiniOzoneClassicCluster.java      |  615 ++++++++++
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |   62 +
 .../apache/hadoop/ozone/MiniOzoneTestHelper.java   |   60 +
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |  115 ++
 .../hadoop/ozone/TestContainerOperations.java      |   90 ++
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |  254 ++++
 .../hadoop/ozone/TestOzoneConfigurationFields.java |   38 +
 .../org/apache/hadoop/ozone/TestOzoneHelper.java   |  414 +++++++
 .../hadoop/ozone/TestStorageContainerManager.java  |  447 +++++++
 .../ozone/TestStorageContainerManagerHelper.java   |  180 +++
 .../ozone/client/rest/TestOzoneRestClient.java     |  405 +++++++
 .../hadoop/ozone/client/rest/package-info.java     |   23 +
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  815 +++++++++++++
 .../hadoop/ozone/client/rpc/package-info.java      |   23 +
 .../ozone/container/ContainerTestHelper.java       |  595 +++++++++
 .../container/common/TestBlockDeletingService.java |  398 ++++++
 .../impl/TestContainerDeletionChoosingPolicy.java  |  197 +++
 .../common/impl/TestContainerPersistence.java      |  905 ++++++++++++++
 .../commandhandler/TestCloseContainerHandler.java  |  113 ++
 .../container/metrics/TestContainerMetrics.java    |  124 ++
 .../container/ozoneimpl/TestOzoneContainer.java    |  584 +++++++++
 .../ozoneimpl/TestOzoneContainerRatis.java         |  143 +++
 .../container/ozoneimpl/TestRatisManager.java      |  129 ++
 .../container/server/TestContainerServer.java      |  253 ++++
 .../ozone/ksm/TestContainerReportWithKeys.java     |  142 +++
 .../apache/hadoop/ozone/ksm/TestKSMMetrcis.java    |  307 +++++
 .../org/apache/hadoop/ozone/ksm/TestKSMSQLCli.java |  273 +++++
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      | 1238 +++++++++++++++++++
 .../ksm/TestKeySpaceManagerRestInterface.java      |  140 +++
 .../hadoop/ozone/ksm/TestKsmBlockVersioning.java   |  254 ++++
 .../ozone/ksm/TestMultipleContainerReadWrite.java  |  216 ++++
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |  804 +++++++++++++
 .../hadoop/ozone/scm/TestAllocateContainer.java    |  104 ++
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  300 +++++
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |  151 +++
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    |  535 +++++++++
 .../org/apache/hadoop/ozone/scm/TestSCMMXBean.java |  162 +++
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |  251 ++++
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  196 +++
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java |  172 +++
 .../BenchmarkContainerStateMap.java                |  180 +++
 .../ContainerStates/TestContainerStateMap.java     |  226 ++++
 .../scm/container/TestContainerStateManager.java   |  303 +++++
 .../hadoop/ozone/scm/node/TestQueryNode.java       |  122 ++
 .../hadoop/ozone/tools/TestDataValidate.java       |  146 +++
 .../org/apache/hadoop/ozone/tools/TestFreon.java   |  136 +++
 .../apache/hadoop/ozone/tools/package-info.java    |   21 +
 .../ozone/web/TestDistributedOzoneVolumes.java     |  186 +++
 .../hadoop/ozone/web/TestLocalOzoneVolumes.java    |  185 +++
 .../ozone/web/TestOzoneRestWithMiniCluster.java    |  258 ++++
 .../hadoop/ozone/web/TestOzoneWebAccess.java       |  126 ++
 .../hadoop/ozone/web/client/TestBuckets.java       |  251 ++++
 .../hadoop/ozone/web/client/TestBucketsRatis.java  |   76 ++
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  692 +++++++++++
 .../hadoop/ozone/web/client/TestKeysRatis.java     |  126 ++
 .../hadoop/ozone/web/client/TestOzoneClient.java   |  306 +++++
 .../apache/hadoop/ozone/web/client/TestVolume.java |  434 +++++++
 .../hadoop/ozone/web/client/TestVolumeRatis.java   |  131 ++
 .../src/test/resources/webapps/ksm/.gitkeep        |   15 +
 .../src/test/resources/webapps/scm/.gitkeep        |   15 +
 hadoop-ozone/objectstore-service/pom.xml           |   67 ++
 .../hdfs/server/datanode/ObjectStoreHandler.java   |  191 +++
 .../hadoop/hdfs/server/datanode/package-info.java  |   22 +
 .../org/apache/hadoop/ozone/OzoneRestUtils.java    |  222 ++++
 .../java/org/apache/hadoop/ozone/package-info.java |   22 +
 .../hadoop/ozone/web/ObjectStoreApplication.java   |   59 +
 .../hadoop/ozone/web/ObjectStoreRestPlugin.java    |  113 ++
 .../hadoop/ozone/web/exceptions/ErrorTable.java    |  225 ++++
 .../hadoop/ozone/web/exceptions/package-info.java  |   22 +
 .../hadoop/ozone/web/handlers/BucketHandler.java   |  197 +++
 .../ozone/web/handlers/BucketProcessTemplate.java  |  323 +++++
 .../hadoop/ozone/web/handlers/KeyHandler.java      |  245 ++++
 .../ozone/web/handlers/KeyProcessTemplate.java     |  235 ++++
 .../hadoop/ozone/web/handlers/ServiceFilter.java   |   61 +
 .../ozone/web/handlers/StorageHandlerBuilder.java  |   76 ++
 .../ozone/web/handlers/UserHandlerBuilder.java     |   75 ++
 .../hadoop/ozone/web/handlers/VolumeHandler.java   |  272 +++++
 .../ozone/web/handlers/VolumeProcessTemplate.java  |  276 +++++
 .../hadoop/ozone/web/handlers/package-info.java    |   22 +
 .../hadoop/ozone/web/interfaces/Accounting.java    |   57 +
 .../apache/hadoop/ozone/web/interfaces/Bucket.java |  183 +++
 .../apache/hadoop/ozone/web/interfaces/Keys.java   |  146 +++
 .../ozone/web/interfaces/StorageHandler.java       |  295 +++++
 .../hadoop/ozone/web/interfaces/UserAuth.java      |  101 ++
 .../apache/hadoop/ozone/web/interfaces/Volume.java |  182 +++
 .../hadoop/ozone/web/interfaces/package-info.java  |   22 +
 .../web/localstorage/LocalStorageHandler.java      |  379 ++++++
 .../web/localstorage/OzoneMetadataManager.java     | 1138 ++++++++++++++++++
 .../ozone/web/localstorage/package-info.java       |   18 +
 .../LengthInputStreamMessageBodyWriter.java        |   59 +
 .../web/messages/StringMessageBodyWriter.java      |   62 +
 .../hadoop/ozone/web/messages/package-info.java    |   18 +
 .../ozone/web/netty/CloseableCleanupListener.java  |   46 +
 .../ozone/web/netty/ObjectStoreChannelHandler.java |   78 ++
 .../web/netty/ObjectStoreJerseyContainer.java      |  348 ++++++
 .../netty/ObjectStoreJerseyContainerProvider.java  |   40 +
 .../ozone/web/netty/ObjectStoreRestHttpServer.java |  256 ++++
 .../ozone/web/netty/ObjectStoreURLDispatcher.java  |   61 +
 .../RequestContentObjectStoreChannelHandler.java   |  117 ++
 .../RequestDispatchObjectStoreChannelHandler.java  |  103 ++
 .../hadoop/ozone/web/netty/package-info.java       |   26 +
 .../org/apache/hadoop/ozone/web/package-info.java  |   22 +
 .../web/storage/DistributedStorageHandler.java     |  539 +++++++++
 .../hadoop/ozone/web/storage/package-info.java     |   27 +
 .../apache/hadoop/ozone/web/userauth/Simple.java   |  169 +++
 .../hadoop/ozone/web/userauth/package-info.java    |   23 +
 .../com.sun.jersey.spi.container.ContainerProvider |   16 +
 .../org/apache/hadoop/ozone/TestErrorCode.java     |   53 +
 hadoop-ozone/ozone-manager/pom.xml                 |  108 ++
 .../org/apache/hadoop/ozone/ksm/BucketManager.java |   79 ++
 .../apache/hadoop/ozone/ksm/BucketManagerImpl.java |  315 +++++
 .../org/apache/hadoop/ozone/ksm/KSMMXBean.java     |   31 +
 .../hadoop/ozone/ksm/KSMMetadataManager.java       |  253 ++++
 .../hadoop/ozone/ksm/KSMMetadataManagerImpl.java   |  525 ++++++++
 .../org/apache/hadoop/ozone/ksm/KSMMetrics.java    |  437 +++++++
 .../org/apache/hadoop/ozone/ksm/KSMStorage.java    |   90 ++
 .../hadoop/ozone/ksm/KeyDeletingService.java       |  141 +++
 .../org/apache/hadoop/ozone/ksm/KeyManager.java    |  165 +++
 .../apache/hadoop/ozone/ksm/KeyManagerImpl.java    |  512 ++++++++
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |  908 ++++++++++++++
 .../ozone/ksm/KeySpaceManagerHttpServer.java       |   78 ++
 .../hadoop/ozone/ksm/OpenKeyCleanupService.java    |  116 ++
 .../hadoop/ozone/ksm/ServiceListJSONServlet.java   |  103 ++
 .../org/apache/hadoop/ozone/ksm/VolumeManager.java |  100 ++
 .../apache/hadoop/ozone/ksm/VolumeManagerImpl.java |  391 ++++++
 .../hadoop/ozone/ksm/exceptions/KSMException.java  |  116 ++
 .../hadoop/ozone/ksm/exceptions/package-info.java  |   19 +
 .../org/apache/hadoop/ozone/ksm/package-info.java  |   21 +
 ...SpaceManagerProtocolServerSideTranslatorPB.java |  539 +++++++++
 .../hadoop/ozone/protocolPB/package-info.java      |   22 +
 .../apache/hadoop/ozone/web/ozShell/Handler.java   |   79 ++
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java |  415 +++++++
 .../web/ozShell/bucket/CreateBucketHandler.java    |   96 ++
 .../web/ozShell/bucket/DeleteBucketHandler.java    |   87 ++
 .../web/ozShell/bucket/InfoBucketHandler.java      |   94 ++
 .../web/ozShell/bucket/ListBucketHandler.java      |  113 ++
 .../web/ozShell/bucket/UpdateBucketHandler.java    |   94 ++
 .../ozone/web/ozShell/bucket/package-info.java     |   23 +
 .../ozone/web/ozShell/keys/DeleteKeyHandler.java   |   96 ++
 .../ozone/web/ozShell/keys/GetKeyHandler.java      |  116 ++
 .../ozone/web/ozShell/keys/InfoKeyHandler.java     |   98 ++
 .../ozone/web/ozShell/keys/ListKeyHandler.java     |  116 ++
 .../ozone/web/ozShell/keys/PutKeyHandler.java      |  106 ++
 .../ozone/web/ozShell/keys/package-info.java       |   23 +
 .../hadoop/ozone/web/ozShell/package-info.java     |   27 +
 .../web/ozShell/volume/CreateVolumeHandler.java    |   99 ++
 .../web/ozShell/volume/DeleteVolumeHandler.java    |   81 ++
 .../web/ozShell/volume/InfoVolumeHandler.java      |   95 ++
 .../web/ozShell/volume/ListVolumeHandler.java      |  114 ++
 .../web/ozShell/volume/UpdateVolumeHandler.java    |   92 ++
 .../ozone/web/ozShell/volume/package-info.java     |   23 +
 .../org/apache/hadoop/ozone/web/package-info.java  |   24 +
 .../src/main/site/markdown/OzoneCommandShell.md    |  150 +++
 .../main/site/markdown/OzoneGettingStarted.md.vm   |  320 +++++
 .../src/main/site/markdown/OzoneMetrics.md         |  166 +++
 .../src/main/site/markdown/OzoneOverview.md        |   88 ++
 .../src/main/site/markdown/OzoneRest.md            |  549 +++++++++
 .../ozone-manager/src/main/webapps/ksm/index.html  |   70 ++
 .../src/main/webapps/ksm/ksm-metrics.html          |   44 +
 .../ozone-manager/src/main/webapps/ksm/ksm.js      |  108 ++
 .../ozone-manager/src/main/webapps/ksm/main.css    |   23 +
 .../ozone-manager/src/main/webapps/ksm/main.html   |   18 +
 .../hadoop/ozone/ksm/TestBucketManagerImpl.java    |  395 ++++++
 .../apache/hadoop/ozone/ksm/TestChunkStreams.java  |  234 ++++
 .../ozone/ksm/TestKeySpaceManagerHttpServer.java   |  141 +++
 .../org/apache/hadoop/ozone/ksm/package-info.java  |   21 +
 hadoop-ozone/pom.xml                               |  100 ++
 hadoop-ozone/tools/pom.xml                         |   47 +
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  720 +++++++++++
 .../apache/hadoop/ozone/scm/cli/package-info.java  |   22 +
 .../java/org/apache/hadoop/ozone/tools/Freon.java  | 1146 ++++++++++++++++++
 .../apache/hadoop/ozone/tools/package-info.java    |   22 +
 .../org/apache/hadoop/test/OzoneTestDriver.java    |   59 +
 676 files changed, 107341 insertions(+)

